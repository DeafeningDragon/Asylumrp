import{r as x,u as Ms,j as e,c as hs,t as sa,a as na,J as fe,b as Ys,S as kn,d as Sn,L as ta,B as Qs,U as an,e as Hs,W as aa,H as ia,f as ra,M as la,C as ca,g as oa,h as da,i as xa,k as ha,l as ua,D as ma,m as ja,P as pa,n as ga,R as fa,o as _a,p as ba,A as ya,q as Na,s as rn,v as ve,w as va,x as zn,I as Tn,F as In,y as wa,z as Ca,T as ka,O as Sa,E as $n,G as ke,K as Pn,N as za,Q as An,V as Dn,X as Mn,Y as En,Z as Es,_ as On,$ as Ta,a0 as Rn,a1 as Vn,a2 as Ia,a3 as $a,a4 as Ln,a5 as Fn,a6 as Pa,a7 as Aa,a8 as qn,a9 as Jn,aa as Da,ab as Ma,ac as Ea,ad as Un,ae as us,af as Oa,ag as Ra,ah as Z,ai as H,aj as ue,ak as Se,al as me,am as Bn,an as Hn,ao as Gn,ap as Zn,aq as Wn,ar as Kn,as as Va,at as La,au as Os,av as Fa,aw as qa,ax as $e,ay as Xn,az as ze,aA as Ja,aB as Ua,aC as Te,aD as Pe,aE as Ba,aF as Yn,aG as Rs,aH as Ha,aI as Ga,aJ as Za,aK as Wa,aL as Ka,aM as Xa,aN as Ya,aO as Qa,aP as ei,aQ as si,aR as Qn,aS as ni,aT as B,aU as ms,aV as ge,aW as ln,aX as Gs,aY as et,aZ as ti,a_ as ai,a$ as st,b0 as ii,b1 as Je,b2 as le,b3 as Ae,b4 as Ue,b5 as Be,b6 as He,b7 as Ge,b8 as Ze,b9 as We,ba as ce,bb as Ke,bc as Xe,bd as Ye,be as Qe,bf as es,bg as ri,bh as nt,bi as li,bj as tt,bk as at,bl as ci,bm as it,bn as oi,bo as rt,bp as lt,bq as di,br as xi,bs as ct,bt as hi,bu as ui,bv as mi,bw as ot,bx as js,by as ks,bz as ws,bA as qe,bB as ss,bC as ns,bD as dt,bE as xt,bF as ht,bG as ji,bH as pi,bI as gi,bJ as ut,bK as mt,bL as fi,bM as _i,bN as jt,bO as bi,bP as yi,bQ as Ni,bR as vi,bS as wi,bT as Ci,bU as ki,bV as Ce,bW as As,bX as pt,bY as Si,bZ as zi,b_ as Ti,b$ as Ii,c0 as gt,c1 as ft,c2 as $i,c3 as Pi,c4 as Ai,c5 as Di}from"./vendor-Bd7Q47Lz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=i(n);fetch(n.href,c)}})();const _t=()=>!window.invokeNative,Mi=()=>{};async function _e(s,t,i,a){const n={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};if(_t()&&i!=null)return a&&await new Promise(c=>setTimeout(c,a)),i;do try{const c=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${c}/${s}`,n)).json()}catch{await new Promise(o=>setTimeout(o,500))}while(s!="hideFrame");return{}}const bt=x.createContext(null),Ei=({children:s})=>{const[t,i]=x.useState(!1),[a,n]=x.useState(!1),c=Ms();function o(r){r?(n(!0),setTimeout(()=>i(r),100)):(i(r),_e("hideFrame"))}return x.useEffect(()=>{let r;return t||(r=setTimeout(()=>n(!1),500)),()=>clearTimeout(r)},[t]),x.useEffect(()=>{if(!t)return;const r=N=>{["Escape"].includes(N.code)&&(_t()||_e("hideFrame"),i(!t),setTimeout(()=>c("/"),500))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[t]),e.jsx(bt.Provider,{value:{visible:t,setVisible:o},children:e.jsx("div",{className:"fade-container",style:{opacity:t?1:0,display:a?"block":"none"},children:s})})},Cs=()=>x.useContext(bt),os=(s,t)=>{const i=x.useRef(Mi);x.useEffect(()=>{i.current=t},[t]),x.useEffect(()=>{const a=n=>{const{action:c,data:o}=n.data;i.current&&c===s&&i.current(o)};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[s])},q=hs(s=>({data:{},get:(t,...i)=>{let a=q.getState().data[t];if(!a)return t;for(let n of i)a=a.replace("%s",n);return a},set:t=>s({data:{...t}})}));function E(...s){return sa(na(s))}function De(){fe.error("Invalid form data. Please re-check all of the tabs for missing data or mistakes.")}const en=Ys("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=x.forwardRef(({className:s,variant:t,size:i,asChild:a=!1,...n},c)=>{const o=a?kn:"button";return e.jsx(o,{className:E(en({variant:t,size:i,className:s})),ref:c,...n})});_.displayName="Button";const re=hs(s=>({jobs:[],setJobs:t=>s({jobs:t}),addJob:t=>{s(i=>({jobs:[...i.jobs,t]})),_e("createJob",t)},setJob:t=>s(i=>i.jobs.some(n=>n.name===t.name)?{jobs:i.jobs.map(n=>n.name===t.name?t:n)}:{jobs:[...i.jobs,t]}),updateJob:(t,i)=>{s(a=>({jobs:a.jobs.map(n=>n.name===t.name?t:n)})),i?_e("updateJobField",{name:t.name,field:i,data:t[i]},void 0,100):_e("updateJob",t)},removeJob:(t,i)=>{s(a=>({jobs:a.jobs.filter(n=>n.name!==t)})),i||_e("removeJob",t)}})),ye=()=>{const{id:s}=Sn(),{jobs:t}=re();return t.find(i=>i.name===s)};function Oi(){const s=q(),t=[{icon:ta,label:s.get("ui_dashboard"),path:"/"},{icon:Qs,label:s.get("ui_jobs"),path:"/jobs"},{icon:an,label:s.get("ui_community"),path:"/community"},{icon:Hs,label:s.get("ui_settings"),path:"/settings"},{icon:aa,label:s.get("ui_webhooks"),path:"/webhooks"},{icon:ia,label:s.get("ui_history"),path:"/history"}],i=[{icon:Hs,label:s.get("ui_general"),subpath:"/"},{icon:an,label:s.get("ui_grades"),subpath:"/grades"},{icon:ra,label:s.get("ui_actions"),subpath:"/actions"},{icon:la,label:s.get("ui_blips"),subpath:"/blips"},{icon:ca,label:s.get("ui_boss_menus"),subpath:"/boss-menus"},{icon:oa,label:s.get("ui_cloakrooms"),subpath:"/cloakrooms"},{icon:da,label:s.get("ui_collecting"),subpath:"/collecting"},{icon:xa,label:s.get("ui_spawner_zones"),subpath:"/spawner-zones"},{icon:ha,label:s.get("ui_crafting"),subpath:"/crafting"},{icon:ua,label:s.get("ui_garages"),subpath:"/garages"},{icon:ma,label:s.get("ui_selling"),subpath:"/selling"},{icon:ja,label:s.get("ui_shops"),subpath:"/shops"},{icon:pa,label:s.get("ui_stashes"),subpath:"/stashes"},{icon:ga,label:s.get("ui_alarms"),subpath:"/alarms"},{icon:fa,label:s.get("ui_registers"),subpath:"/registers"},{icon:_a,label:s.get("ui_animation_zones"),subpath:"/animation-zones"},{icon:ba,label:s.get("ui_music_players"),subpath:"/music-players"},{icon:ya,label:s.get("ui_teleports"),subpath:"/teleports"}],a=Na(),n=Ms(),{id:c}=Sn(),{jobs:o}=re(),r=o.find(w=>w.name===c),N=a.pathname.includes("/edit"),[d,y]=x.useState(-1),S=x.useRef(null);return x.useEffect(()=>{const C=(N?i:t).findIndex(g=>N?a.pathname.endsWith(g.subpath):a.pathname===g.path);y(C),C!==-1&&S.current&&(S.current.style.transform=`translateY(${C*2.75}rem)`)},[a,N]),e.jsxs("div",{className:"w-64 bg-background border-r h-full flex flex-col justify-between",children:[e.jsxs("div",{className:`space-y-1 overflow-y-auto max-h-[36rem] p-4 ${N?"border-b":""} relative`,children:[e.jsx("div",{ref:S,className:"absolute left-4 top-5 right-4 rounded-md h-10 bg-muted transition-transform duration-300 ease-in-out",style:{transform:`translateY(${d*2.75}rem)`,opacity:d!==-1?1:0}}),N?i.map((w,C)=>e.jsx(_,{variant:"ghost",className:E("w-full justify-start text-muted-foreground hover:text-foreground hover:bg-transparent relative z-10",a.pathname.endsWith(w.subpath)&&"text-foreground"),asChild:!0,children:e.jsxs(rn,{to:`/edit/${c}${w.subpath}`,children:[e.jsx(w.icon,{className:"mr-3 h-5 w-5"}),w.label]})},C)):t.map((w,C)=>e.jsx(_,{variant:"ghost",className:E("w-full justify-start text-muted-foreground hover:text-foreground hover:bg-transparent relative z-10",a.pathname===w.path&&"text-foreground"),asChild:!0,children:e.jsxs(rn,{to:w.path,children:[e.jsx(w.icon,{className:"mr-3 h-5 w-5"}),w.label]})},C))]}),N&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col text-xs gap-1",children:[e.jsxs("p",{className:"font-bold flex items-center",children:[e.jsx(ve,{className:"mr-1 h-[0.6rem] w-[0.6rem]"}),s.get("ui_editing_job")]}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground line-clamp-1",children:r==null?void 0:r.label})]}),e.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>n("/jobs"),children:[e.jsx(va,{className:"mr-3 h-4 w-4"}),s.get("ui_go_back")]})]})]})}const Vs=x.forwardRef(({className:s,...t},i)=>e.jsx(zn,{ref:i,className:E("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Vs.displayName=zn.displayName;const Ls=x.forwardRef(({className:s,...t},i)=>e.jsx(Tn,{ref:i,className:E("aspect-square h-full w-full",s),...t}));Ls.displayName=Tn.displayName;const Fs=x.forwardRef(({className:s,...t},i)=>e.jsx(In,{ref:i,className:E("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Fs.displayName=In.displayName;function yt(){const[s,t]=x.useState("dark");return x.useEffect(()=>{const i=localStorage.getItem("theme");i?t(i):window.matchMedia("(prefers-color-scheme: dark)").matches&&t("dark")},[]),x.useEffect(()=>{localStorage.setItem("theme",s),document.documentElement.classList.toggle("dark",s==="dark")},[s]),{theme:s,setTheme:t}}function Ri(){const{theme:s,setTheme:t}=yt();return e.jsxs(_,{variant:"outline",size:"icon",onClick:()=>t(s==="light"?"dark":"light"),className:"bg-background hover:bg-background2 text-foreground",children:[e.jsx(wa,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Ca,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}const Nt=hs(s=>({serverId:0,username:"",avatarUrl:"",setProfile:t=>s(t)}));function Vi({className:s}){const{username:t,avatarUrl:i,serverId:a}=Nt();return e.jsxs("header",{className:E("flex items-center justify-between p-4 bg-background border-b rounded-t-3xl",s),children:[e.jsx(Ri,{}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("p",{className:"text-sm font-medium",children:t}),e.jsxs("p",{className:"text-sm font-medium",children:["ID: ",a]})]}),e.jsxs(Vs,{children:[e.jsx(Ls,{src:i,alt:t}),e.jsx(Fs,{children:t.charAt(0).toUpperCase()})]})]})]})}const Li=[{name:"police",label:"Los Santos Police Department",type:"leo",defaultDuty:!0,offDutyPay:!1,whitelisted:!0,canWash:!1,playerActions:{steal:!1,handcuff:"both",drag:!0,carry:!0,bill:!0,revive:{item:"defibrillator",removeAfterUse:!1},heal:{item:"firstaid",removeAfterUse:!0}},vehicleActions:{putInsideVehicle:!0,takeOutOfVehicle:!0,hijack:{item:"lockpick",removeAfterUse:!0},repair:{item:"repairkit",removeAfterUse:!0},clean:{item:"cleaningkit",removeAfterUse:!0},impound:!1},grades:[{name:"cadet",label:"Cadet",salary:1500},{name:"officer",label:"Officer",salary:2e3},{name:"sergeant",label:"Sergeant",salary:2500},{name:"lieutenant",label:"Lieutenant",salary:3e3},{name:"captain",label:"Captain",salary:3500,bossActions:!0}],bossMenus:[{radius:3,icon:"fas fa-briefcase",target:!0,prop:[{model:"prop_police_phone",offset:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:447.35,y:-975.57,z:30.69}]}],blips:[{coords:{x:425.1,y:-979.5,z:30.7},name:"Police Station",sprite:60,size:1,color:29,global:!0}],cloakrooms:[{radius:3,target:!0,prop:[{model:"prop_ld_int_safe_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:452.6,y:-992.8,z:30.6}]}],garages:[{label:"Police Garage",vehicleType:"car",type:"normal",shared:!0,radius:5,saveRadius:30,target:!0,prop:[{model:"prop_police_door_surround",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{coords:{x:454.6,y:-1017.4,z:28.4},spawnCoords:{x:438.4,y:-1018.3,z:27.7,w:90}}],vehicles:[{model:"police",label:"Police Cruiser",grade:0,price:0,props:{}},{model:"police2",label:"Police SUV",grade:2,price:0,props:{}}]}],collecting:[{label:"Collect Evidence",progress:"Collecting evidence...",icon:"fas fa-search",radius:3,duration:5e3,items:[{name:"evidence",count:{min:1,max:3}}],animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItem:"evidence_bag",max:10,recover:300,target:!0,prop:[{model:"prop_cs_hand_radio",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:440,y:-976,z:30.7}]}],advancedCollecting:[{label:"Collect Fingerprints",progress:"Collecting fingerprints...",icon:"fas fa-fingerprint",radius:3,duration:8e3,items:[{name:"fingerprint",count:{min:1,max:1}}],animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItem:"fingerprint_kit",propModel:"prop_cs_hand_radio",interactionOffset:{x:0,y:0,z:0},target:!0,locations:[{coords:{x:445,y:-980,z:30.7},radius:5,interval:600,maxSpawned:3}]}],crafting:[{label:"Police Equipment Crafting",grade:2,icon:"fas fa-tools",radius:3,entries:[{blueprint:"handcuffs_blueprint",duration:1e4,progress:"Crafting handcuffs...",animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItems:[{name:"metal",count:2},{name:"plastic",count:1}],giveItems:[{name:"handcuffs",count:1}]}],target:!0,prop:[{model:"prop_tool_bench02",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:460,y:-981,z:30.7}]}],selling:[{label:"Sell Confiscated Items",progress:"Selling items...",icon:"fas fa-dollar-sign",radius:3,grade:3,animation:{dict:"mp_common",clip:"givetake1_a"},duration:5e3,sellAtOnce:!1,items:[{name:"drug_sample",price:{min:100,max:200},currency:"bank"}],employeePercentage:10,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:455,y:-980,z:30.7}]}],shops:[{label:"Police Equipment Shop",icon:"fas fa-shield-alt",grade:0,items:[{name:"body_armor",price:500,currency:"bank",icon:"fas fa-vest",image:"body_armor.png",grade:0},{name:"radio",price:200,currency:"bank",icon:"fas fa-broadcast-tower",image:"radio.png",grade:0}],radius:3,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:452,y:-980,z:30.7}]}],stashes:[{label:"Police Evidence Locker",name:"police_evidence",grade:0,shared:!0,icon:"fas fa-box",slots:50,maxWeight:1e5,global:!1,radius:3,target:!0,prop:[{model:"prop_cabinet_02b",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:459,y:-985,z:30.7}]}],registers:[{employeePercentage:10,radius:3,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:451,y:-973,z:30.7}]}],animationZones:[{label:"Police Training Area",stop:"Stop Training",icon:"fas fa-dumbbell",radius:5,target:!0,duration:6e4,progress:"Training...",notify:"You've completed your training session.",animation:{dict:"rcmfanatic1maryann_stretchidle_b",clip:"idle_e"},animationProp:{model:"prop_barbell_01",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},checkOccupied:!0,move:!1,back:!1,disableFreeze:!1,global:!0,offset:{x:0,y:0,z:0},locations:[{x:450,y:-993,z:30.7}]}],musicPlayers:[{label:"Police Station Music Player",icon:"fas fa-music",radius:10,target:!0,soundDistance:20,prop:[{model:"prop_boombox_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:440,y:-985,z:30.7}]}],teleports:[{from:{label:"Ground Floor",icon:"fas fa-arrow-up",target:{x:440,y:-981,z:30.7},coords:{x:440,y:-981,z:30.7,w:0}},to:{label:"Rooftop",icon:"fas fa-arrow-down",target:{x:458,y:-984,z:43.7},coords:{x:458,y:-984,z:43.7,w:0}},radius:30}]}],sn=hs((s,t)=>({globalWebhook:"",settings:{alarms:!1,collecting:!1,crafting:!0,vehicleBought:!0,registers:!0,selling:!0,shops:!0,stashes:!0},jobs:{},rawSet:i=>{s(i)},set:i=>{s(i),_e("updateWebhookData",i)}})),vt=hs(s=>({history:[],setHistory:t=>s({history:t})})),wt=hs(s=>({framework:"es_extended",setFramework:t=>s({framework:t})})),Ct=hs(s=>({totalJobs:0,onDutyCount:0,lastOnDutyCount:0,wealthiestJob:null,jobCounts:{},setStats:t=>{s(i=>({...i,...t}))}})),kt=hs(s=>({settings:{interactDistance:3,impoundPrice:500,handcuffItems:!0,handcuffsItemName:"handcuffs",ziptiesItemName:"zipties",handcuffsSkillCheck:!0,sprintWhileDrag:!1,actionsMenu:!0,radialMenu:!1,disableTargetInteractions:!1,tackleCooldown:1e4,tackleRadius:2,playerActions:{steal:!1,handcuff:!1,drag:!1,carry:!1,bill:!1,tackle:!1,revive:!1,heal:!1},vehicleActions:{putInsideVehicle:!1,takeOutOfVehicle:!1,hijack:{item:"lockpick",removeAfterUse:!0},repair:!1,clean:!1,impound:!1},durations:{steal:3e3,revive:1e4,heal:5e3,hijack:1e3,repair:1e4,clean:1e4,impound:1e4}},setSettings:t=>s(i=>({settings:{...i.settings,...t}}))})),Fi=()=>{const s=Cs(),t=q(),i=Ms();x.useState(!1);const{theme:a}=yt(),{jobs:n,setJobs:c,setJob:o,removeJob:r}=re(),N=sn(),{setHistory:d}=vt(),{setFramework:y}=wt(),{setStats:S}=Ct(),{setSettings:w}=kt(),{setProfile:C}=Nt();return x.useEffect(()=>{async function g(){const T=await _e("getJobs",void 0,Li,200);c(T)}g()},[]),os("open",()=>{s.setVisible(!0)}),os("updateJob",g=>{o(g)}),os("removeJob",g=>{r(g,!0)}),os("updateJobs",g=>{c(g)}),os("openEditJob",g=>{i(`/edit/${g}/`)}),os("updateWebhookData",g=>{N.rawSet(g)}),os("updateHistory",g=>{d(g)}),os("updateStats",g=>{S(g)}),os("updateSettings",g=>{w(g)}),os("updateProfile",g=>{C(g)}),x.useEffect(()=>{(async()=>{const T=await _e("getHistory",void 0,[]);d(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await _e("getFramework",void 0,"qb-core");y(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await _e("getStats",void 0,{totalJobs:0,onDutyCount:0,jobCounts:{},wealthiestJob:null,lastOnDutyCount:0});S(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await _e("getSettings",void 0,{});w(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await _e("getProfile",void 0,{serverId:21,username:"Andrew.",avatarUrl:""});C(T)})()},[]),x.useEffect(()=>{(async()=>{try{const T=await _e("getLanguage",void 0,"en"),P=await fetch(`./locales/${T}.json`);if(!P.ok)throw new Error("Preferred language not available");const v=await P.json();t.set(v)}catch{console.warn("Failed to load preferred language, falling back to English");const v=await(await fetch("./locales/en.json")).json();t.set(v)}})()},[]),e.jsxs("div",{className:"w-screen h-screen flex justify-center items-center bg-transparent",children:[e.jsx(ka,{position:"top-center",theme:a,toastOptions:{className:"bg-background text-foreground font-[Inter] border"}}),e.jsxs("div",{className:"w-[76rem] h-[45rem] bg-background rounded-3xl shadow-lg border overflow-hidden flex flex-col",children:[e.jsx(Vi,{}),e.jsxs("div",{className:"flex grow overflow-hidden",children:[e.jsx(Oi,{}),e.jsx("div",{className:"w-full p-6",children:e.jsx(Sa,{})})]})]})]})},te=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:E("w-full caption-bottom text-sm",s),...t})}));te.displayName="Table";const ae=x.forwardRef(({className:s,...t},i)=>e.jsx("thead",{ref:i,className:E("[&_tr]:border-b",s),...t}));ae.displayName="TableHeader";const ie=x.forwardRef(({className:s,...t},i)=>e.jsx("tbody",{ref:i,className:E("[&_tr:last-child]:border-0",s),...t}));ie.displayName="TableBody";const qi=x.forwardRef(({className:s,...t},i)=>e.jsx("tfoot",{ref:i,className:E("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));qi.displayName="TableFooter";const L=x.forwardRef(({className:s,...t},i)=>e.jsx("tr",{ref:i,className:E("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));L.displayName="TableRow";const z=x.forwardRef(({className:s,...t},i)=>e.jsx("th",{ref:i,className:E("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));z.displayName="TableHead";const k=x.forwardRef(({className:s,...t},i)=>e.jsx("td",{ref:i,className:E("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));k.displayName="TableCell";const Ji=x.forwardRef(({className:s,...t},i)=>e.jsx("caption",{ref:i,className:E("mt-4 text-sm text-muted-foreground",s),...t}));Ji.displayName="TableCaption";const Q=Ia,ee=$a,Ui=x.forwardRef(({className:s,inset:t,children:i,...a},n)=>e.jsxs($n,{ref:n,className:E("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...a,children:[i,e.jsx(ke,{className:"ml-auto h-4 w-4"})]}));Ui.displayName=$n.displayName;const Bi=x.forwardRef(({className:s,...t},i)=>e.jsx(Pn,{ref:i,className:E("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Bi.displayName=Pn.displayName;const Y=x.forwardRef(({className:s,sideOffset:t=4,...i},a)=>e.jsx(za,{children:e.jsx(An,{ref:a,sideOffset:t,className:E("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})}));Y.displayName=An.displayName;const W=x.forwardRef(({className:s,inset:t,...i},a)=>e.jsx(Dn,{ref:a,className:E("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...i}));W.displayName=Dn.displayName;const Hi=x.forwardRef(({className:s,children:t,checked:i,...a},n)=>e.jsxs(Mn,{ref:n,className:E("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(En,{children:e.jsx(Es,{className:"h-4 w-4"})})}),t]}));Hi.displayName=Mn.displayName;const Gi=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(On,{ref:a,className:E("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(En,{children:e.jsx(Ta,{className:"h-2 w-2 fill-current"})})}),t]}));Gi.displayName=On.displayName;const Zi=x.forwardRef(({className:s,inset:t,...i},a)=>e.jsx(Rn,{ref:a,className:E("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...i}));Zi.displayName=Rn.displayName;const Wi=x.forwardRef(({className:s,...t},i)=>e.jsx(Vn,{ref:i,className:E("-mx-1 my-1 h-px bg-muted",s),...t}));Wi.displayName=Vn.displayName;const b=x.forwardRef(({className:s,type:t,...i},a)=>(i.value=i.value===void 0?"":i.value,e.jsx("input",{type:t,className:E("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})));b.displayName="Input";const je=Ma,we=Ea,Ki=Da,St=x.forwardRef(({className:s,...t},i)=>e.jsx(Ln,{ref:i,className:E("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));St.displayName=Ln.displayName;const oe=x.forwardRef(({className:s,children:t,...i},a)=>{const n=o=>{var r;o.key==="Escape"&&o.stopPropagation(),(r=i.onKeyDown)==null||r.call(i,o)},c=Cs();return e.jsx(Ki,{children:e.jsxs("div",{style:{opacity:c!=null&&c.visible?1:0},children:[e.jsx(St,{}),e.jsxs(Fn,{ref:a,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-2xl",s),onKeyDown:n,...i,children:[t,e.jsxs(Pa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})})});oe.displayName=Fn.displayName;const de=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});de.displayName="DialogHeader";const qs=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});qs.displayName="DialogFooter";const xe=x.forwardRef(({className:s,...t},i)=>e.jsx(qn,{ref:i,className:E("text-lg font-bold leading-none tracking-tight",s),...t}));xe.displayName=qn.displayName;const he=x.forwardRef(({className:s,...t},i)=>e.jsx(Jn,{ref:i,className:E("text-sm text-muted-foreground",s),...t}));he.displayName=Jn.displayName;const Xi=Ys("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),zt=x.forwardRef(({className:s,...t},i)=>e.jsx(Un,{ref:i,className:E(Xi(),s),...t}));zt.displayName=Un.displayName;const pe=Oa,Tt=x.createContext({}),p=({...s})=>e.jsx(Tt.Provider,{value:{name:s.name},children:e.jsx(Ra,{...s})}),Js=()=>{const s=x.useContext(Tt),t=x.useContext(It),{getFieldState:i,formState:a}=us(),n=i(s.name,a);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:c}=t;return{id:c,name:s.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`,...n}},It=x.createContext({}),m=x.forwardRef(({className:s,...t},i)=>{const a=x.useId();return e.jsx(It.Provider,{value:{id:a},children:e.jsx("div",{ref:i,className:E("space-y-2",s),...t})})});m.displayName="FormItem";const f=x.forwardRef(({className:s,...t},i)=>{const{error:a,formItemId:n}=Js();return e.jsx(zt,{ref:i,className:E(a&&"text-destructive",s),htmlFor:n,...t})});f.displayName="FormLabel";const j=x.forwardRef(({...s},t)=>{const{error:i,formItemId:a,formDescriptionId:n,formMessageId:c}=Js();return e.jsx(kn,{ref:t,id:a,"aria-describedby":i?`${n} ${c}`:`${n}`,"aria-invalid":!!i,...s})});j.displayName="FormControl";const I=x.forwardRef(({className:s,...t},i)=>{const{formDescriptionId:a}=Js();return e.jsx("p",{ref:i,id:a,className:E("text-sm text-muted-foreground",s),...t})});I.displayName="FormDescription";const D=x.forwardRef(({className:s,children:t,...i},a)=>{const n=q(),{error:c,formMessageId:o}=Js(),r=c?n.get(String(c==null?void 0:c.message)):t;return!r||r===(c==null?void 0:c.message)?null:e.jsx("p",{ref:a,id:o,className:E("text-sm font-medium text-destructive",s),...i,children:r})});D.displayName="FormMessage";const Yi=Z({name:H().min(1,"ui_error_required").regex(/^[a-zA-Z0-9_]+$/,"ui_error_name_invalid"),label:H().min(1,"ui_error_required")});function Qi({duplicateJob:s,setDuplicateJob:t,onCreate:i}){const a=q(),[n,c]=x.useState(!1);x.useEffect(()=>{s&&c(!0)},[s]);const o=ue({resolver:me(Yi),defaultValues:{name:"",label:""}});function r(d){c(d),setTimeout(()=>{t(null),o.reset()},200)}function N(d){i({...s?{...s,...d}:d}),c(!1)}return e.jsxs(je,{open:n,onOpenChange:r,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>o.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",a.get("ui_create_new_job")]})}),e.jsxs(oe,{className:"sm:max-w-[425px]",children:[e.jsxs(de,{children:[e.jsx(xe,{children:s?a.get("ui_duplicate_job"):a.get("ui_create_new_job")}),e.jsx(he,{})]}),e.jsx(pe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"space-y-4",children:[e.jsx(p,{control:o.control,name:"name",render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:a.get("ui_job_name")}),e.jsx(j,{children:e.jsx(b,{...d,placeholder:a.get("ui_job_name_placeholder")})}),e.jsx(I,{children:a.get("ui_job_name_explain")}),e.jsx(D,{})]})}),e.jsx(p,{control:o.control,name:"label",render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:a.get("ui_job_label")}),e.jsx(j,{children:e.jsx(b,{...d,placeholder:a.get("ui_job_label_placeholder")})}),e.jsx(I,{children:a.get("ui_job_label_description")}),e.jsx(D,{})]})}),e.jsx(_,{type:"submit",children:a.get("ui_create_job")})]})})]})]})}const er=La,sr=Va,$t=x.forwardRef(({className:s,...t},i)=>e.jsx(Bn,{className:E("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:i}));$t.displayName=Bn.displayName;const Pt=x.forwardRef(({className:s,...t},i)=>e.jsxs(sr,{children:[e.jsx($t,{}),e.jsx(Hn,{ref:i,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Pt.displayName=Hn.displayName;const At=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col space-y-2 text-center sm:text-left",s),...t});At.displayName="AlertDialogHeader";const Dt=({className:s,...t})=>e.jsx("div",{className:E("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Dt.displayName="AlertDialogFooter";const Mt=x.forwardRef(({className:s,...t},i)=>e.jsx(Gn,{ref:i,className:E("text-lg font-semibold",s),...t}));Mt.displayName=Gn.displayName;const Et=x.forwardRef(({className:s,...t},i)=>e.jsx(Zn,{ref:i,className:E("text-sm text-muted-foreground",s),...t}));Et.displayName=Zn.displayName;const Ot=x.forwardRef(({className:s,...t},i)=>e.jsx(Wn,{ref:i,className:E(en(),s),...t}));Ot.displayName=Wn.displayName;const Rt=x.forwardRef(({className:s,...t},i)=>e.jsx(Kn,{ref:i,className:E(en({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Rt.displayName=Kn.displayName;const bs={remoteUrl:"https://jobs.lunar-scripts.com"};function nr({shareJob:s,setShareJob:t}){const i=q(),[a,n]=x.useState(!1),c=async o=>{o.preventDefault(),n(!0);try{const r=await fetch(`${bs.remoteUrl}/api/jobs/upload-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error;const{id:N}=await r.json();window.invokeNative?window.invokeNative("openUrl",`${bs.remoteUrl}/jobs/create?id=${N}`):window.open(`${bs.remoteUrl}/jobs/create?id=${N}`,"_blank")}catch{fe.error(i.get("ui_error_share_job"))}setTimeout(()=>n(!1),500),t(null)};return e.jsx(er,{open:!!s,onOpenChange:()=>t(null),children:e.jsxs(Pt,{children:[e.jsxs(At,{children:[e.jsx(Mt,{children:i.get("ui_share_job")}),e.jsx(Et,{children:i.get("ui_share_job_description")})]}),e.jsxs(Dt,{children:[e.jsx(Rt,{asChild:!0,children:e.jsx(_,{variant:"outline",onClick:()=>t(null),disabled:a,children:i.get("ui_cancel")})}),e.jsx(Ot,{asChild:!0,children:e.jsxs(_,{onClick:c,disabled:a,children:[a&&e.jsx(Os,{className:"mr-2 w-4 h-4 animate-spin"}),i.get("ui_confirm")]})})]})]})})}function Me({searchTerm:s}){const t=q();return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[40vh] gap-6",children:[e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-secondary rounded-full",children:s.length>0?e.jsx(Fa,{className:"w-10 h-10 text-secondary-foreground"}):e.jsx(qa,{className:"w-10 h-10 text-secondary-foreground"})}),e.jsx("div",{className:"space-y-2 text-center",children:s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t.get("ui_no_results")}),e.jsx("p",{className:"text-muted-foreground",children:t.get("ui_no_results_description")})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t.get("ui_no_data_to_display")}),e.jsx("p",{className:"text-muted-foreground",children:t.get("ui_no_data_to_display_description")})]})})]})}const tr=({isOpen:s,onClose:t,onConfirm:i,title:a,description:n})=>e.jsx(je,{open:s,onOpenChange:t,children:e.jsxs(oe,{children:[e.jsxs(de,{children:[e.jsx(xe,{children:a}),e.jsx(he,{children:n})]}),e.jsxs(qs,{children:[e.jsx(_,{variant:"outline",onClick:t,children:"Cancel"}),e.jsx(_,{onClick:i,children:"Confirm"})]})]})}),Vt=x.createContext(null),Ie=()=>{const s=x.useContext(Vt);if(!s)throw new Error("useConfirm must be used within a ConfirmProvider");return s.confirm},ar=({children:s})=>{const[t,i]=x.useState({isOpen:!1,title:"",description:"",resolve:null}),a=x.useCallback((o,r)=>new Promise(N=>{i({isOpen:!0,title:o,description:r,resolve:N})}),[]),n=x.useCallback(()=>{i(o=>({...o,isOpen:!1})),t.resolve&&t.resolve(!1)},[t]),c=x.useCallback(()=>{i(o=>({...o,isOpen:!1})),t.resolve&&t.resolve(!0)},[t]);return e.jsxs(Vt.Provider,{value:{confirm:a},children:[s,e.jsx(tr,{isOpen:t.isOpen,onClose:n,onConfirm:c,title:t.title,description:t.description})]})},ir={name:"",label:"",grades:[{name:"boss",label:"Boss",salary:1e3,bossActions:!0}],playerActions:{},vehicleActions:{},bossMenus:[],blips:[],cloakrooms:[],collecting:[],crafting:[],garages:[],selling:[],shops:[],stashes:[],alarms:[],registers:[],animationZones:[],musicPlayers:[],teleports:[]};function rr(){const s=q(),{jobs:t,addJob:i,removeJob:a}=re(),[n,c]=x.useState("name"),[o,r]=x.useState("asc"),[N,d]=x.useState(1),[y,S]=x.useState(""),[w,C]=x.useState(null),[g,T]=x.useState(null),P=Ms(),v=6,A=Ie(),[R]=$e(y,300),G=Xn.useMemo(()=>n?[...t].sort((V,F)=>V[n]<F[n]?o==="asc"?-1:1:V[n]>F[n]?o==="asc"?1:-1:0):t,[t,n,o]).filter(V=>V.name.toLowerCase().includes(R.toLowerCase())),$=G.slice((N-1)*v,N*v),K=Math.ceil(G.length/v),l=V=>{n===V?r(o==="asc"?"desc":"asc"):(c(V),r("asc"))},u=({column:V})=>n!==V?e.jsx(Ba,{className:"ml-2 h-4 w-4"}):o==="asc"?e.jsx(Yn,{className:"ml-2 h-4 w-4"}):e.jsx(Rs,{className:"ml-2 h-4 w-4"}),h=V=>{if(t.some(F=>F.name===V.name)){fe.error(s.get("ui_job_already_exists"));return}i({...ir,...V})};return e.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_jobs"),value:y,onChange:V=>S(V.target.value),className:"max-w-sm"}),e.jsx(Qi,{duplicateJob:w,setDuplicateJob:C,onCreate:h}),e.jsx(nr,{shareJob:g,setShareJob:T})]}),e.jsx("div",{className:"grow",children:e.jsxs(te,{className:"table-fixed w-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{onClick:()=>l("name"),className:"cursor-pointer w-1/6",children:e.jsxs("span",{className:"flex items-center",children:[s.get("ui_job_name"),e.jsx(u,{column:"name"})]})}),e.jsx(z,{onClick:()=>l("label"),className:"cursor-pointer w-1/4",children:e.jsxs("span",{className:"flex items-center",children:[s.get("ui_job_label"),e.jsx(u,{column:"label"})]})}),e.jsx(z,{className:"w-1/3",children:s.get("ui_job_grades")}),e.jsx(z,{className:"w-1/6",children:s.get("ui_actions")})]})}),e.jsx(ie,{children:$.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:R})})}):$.map(V=>e.jsxs(L,{children:[e.jsx(k,{className:"truncate",children:V.name}),e.jsx(k,{className:"truncate",children:V.label}),e.jsx(k,{className:"truncate",children:V.grades.length>0?V.grades.map(F=>F.label).join(", "):"No grades defined yet"}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onSelect:()=>P(`/edit/${V.name}/`),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),s.get("ui_edit")]}),e.jsxs(W,{onSelect:()=>C(V),children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),s.get("ui_duplicate")]}),e.jsxs(W,{onSelect:()=>T(V),children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),s.get("ui_share")]}),e.jsxs(W,{className:"text-red-500",onSelect:async()=>{await A(s.get("ui_delete_job"),s.get("ui_delete_job_description"))&&a(V.name)},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),s.get("ui_delete")]})]})]})})]},V.name))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>d(V=>Math.max(V-1,1)),disabled:N===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(K)].map((V,F)=>{const xs=F+1;return xs===1||xs===K||xs>=N-1&&xs<=N+1?e.jsx(_,{variant:N===xs?"outline":"ghost",size:"icon",onClick:()=>d(xs),children:xs},F):xs===N-2||xs===N+2?e.jsx("span",{children:"..."},F):null})}),e.jsx(_,{onClick:()=>d(V=>Math.min(V+1,K)),disabled:N===K||K===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const be=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:E("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));be.displayName="Card";const gs=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:E("flex flex-col space-y-1.5 p-6",s),...t}));gs.displayName="CardHeader";const fs=x.forwardRef(({className:s,isDiv:t,...i},a)=>{const n=t?"div":"h3";return e.jsx(n,{ref:a,className:E("text-2xl font-semibold leading-none tracking-tight",s),...i})});fs.displayName="CardTitle";const Ds=x.forwardRef(({className:s,isDiv:t,...i},a)=>{const n=t?"div":"p";return e.jsx(n,{ref:a,className:E("text-sm text-muted-foreground",s),...i})});Ds.displayName="CardDescription";const Ne=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:E("p-6 pt-0",s),...t}));Ne.displayName="CardContent";const lr=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:E("flex items-center p-6 pt-0",s),...t}));lr.displayName="CardFooter";const cr={light:"",dark:".dark"},Lt=x.createContext(null);function Ft(){const s=x.useContext(Lt);if(!s)throw new Error("useChart must be used within a <ChartContainer />");return s}const qt=x.forwardRef(({id:s,className:t,children:i,config:a,...n},c)=>{const o=x.useId(),r=`chart-${s||o.replace(/:/g,"")}`;return e.jsx(Lt.Provider,{value:{config:a},children:e.jsxs("div",{"data-chart":r,ref:c,className:E("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...n,children:[e.jsx(or,{id:r,config:a}),e.jsx(Ha,{children:i})]})})});qt.displayName="Chart";const or=({id:s,config:t})=>{const i=Object.entries(t).filter(([a,n])=>n.theme||n.color);return i.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(cr).map(([a,n])=>`
${n} [data-chart=${s}] {
${i.map(([c,o])=>{var N;const r=((N=o.theme)==null?void 0:N[a])||o.color;return r?`  --color-${c}: ${r};`:null}).join(`
`)}
}
`).join(`
`)}}):null},dr=Ga,Jt=x.forwardRef(({active:s,payload:t,className:i,indicator:a="dot",hideLabel:n=!1,hideIndicator:c=!1,label:o,labelFormatter:r,labelClassName:N,formatter:d,color:y,nameKey:S,labelKey:w},C)=>{const{config:g}=Ft(),T=x.useMemo(()=>{var G;if(n||!(t!=null&&t.length))return null;const[v]=t,A=`${w||v.dataKey||v.name||"value"}`,R=Zs(g,v,A),O=!w&&typeof o=="string"?((G=g[o])==null?void 0:G.label)||o:R==null?void 0:R.label;return r?e.jsx("div",{className:E("font-medium",N),children:r(O,t)}):O?e.jsx("div",{className:E("font-medium",N),children:O}):null},[o,r,t,n,N,g,w]);if(!s||!(t!=null&&t.length))return null;const P=t.length===1&&a!=="dot";return e.jsxs("div",{ref:C,className:E("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),children:[P?null:T,e.jsx("div",{className:"grid gap-1.5",children:t.map((v,A)=>{const R=`${S||v.name||v.dataKey||"value"}`,O=Zs(g,v,R),G=y||v.payload.fill||v.color;return e.jsx("div",{className:E("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",a==="dot"&&"items-center"),children:d&&(v==null?void 0:v.value)!==void 0&&v.name?d(v.value,v.name,v,A,v.payload):e.jsxs(e.Fragment,{children:[O!=null&&O.icon?e.jsx(O.icon,{}):!c&&e.jsx("div",{className:E("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":a==="dot","w-1":a==="line","w-0 border-[1.5px] border-dashed bg-transparent":a==="dashed","my-0.5":P&&a==="dashed"}),style:{"--color-bg":G,"--color-border":G}}),e.jsxs("div",{className:E("flex flex-1 justify-between leading-none",P?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[P?T:null,e.jsx("span",{className:"text-muted-foreground",children:(O==null?void 0:O.label)||v.name})]}),v.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:v.value.toLocaleString()})]})]})},v.dataKey)})})]})});Jt.displayName="ChartTooltip";const xr=x.forwardRef(({className:s,hideIcon:t=!1,payload:i,verticalAlign:a="bottom",nameKey:n},c)=>{const{config:o}=Ft();return i!=null&&i.length?e.jsx("div",{ref:c,className:E("flex items-center justify-center gap-4",a==="top"?"pb-3":"pt-3",s),children:i.map(r=>{const N=`${n||r.dataKey||"value"}`,d=Zs(o,r,N);return e.jsxs("div",{className:E("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[d!=null&&d.icon&&!t?e.jsx(d.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:r.color}}),d==null?void 0:d.label]},r.value)})}):null});xr.displayName="ChartLegend";function Zs(s,t,i){if(typeof t!="object"||t===null)return;const a="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let n=i;return i in t&&typeof t[i]=="string"?n=t[i]:a&&i in a&&typeof a[i]=="string"&&(n=a[i]),n in s?s[n]:s[i]}const hr=Ys("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function cn({className:s,variant:t,...i}){return e.jsx("div",{className:E(hr({variant:t}),s),...i})}const ur={count:{label:"Player count",icon:Qs}};function mr(){const s=q(),{jobs:t}=re(),{onDutyCount:i,lastOnDutyCount:a,wealthiestJob:n,jobCounts:c}=Ct(),o=Object.entries(c).map(([r,N])=>{var d;return{name:((d=t.find(y=>y.name===r))==null?void 0:d.label)||r,count:N}}).filter(r=>r.count>0);return e.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[e.jsx("h1",{className:"text-xl font-bold",children:s.get("ui_dashboard")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_total_jobs")}),e.jsx(Qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ne,{children:[e.jsx("div",{className:"text-lg font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.get("ui_create_jobs_description")})]})]}),e.jsxs(be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_on_duty_players")}),e.jsx(Za,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ne,{children:[e.jsx("div",{className:"text-lg font-bold",children:i}),e.jsxs(cn,{variant:"outline",className:"text-xs mt-2 text-muted-foreground",children:[i>=a?`+${i-a}`:`${i-a}`," ",s.get("ui_last_hour")]})]})]}),e.jsxs(be,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_wealthiest_job")}),e.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(Ne,{children:[e.jsx("div",{className:"font-bold text-lg line-clamp-1",children:(n==null?void 0:n.label)||s.get("ui_no_big_earners_yet")}),e.jsxs(cn,{variant:"outline",className:"text-xs mt-2 text-muted-foreground",children:[s.get("ui_account_balance"),": $",(n==null?void 0:n.balance.toLocaleString())||"0"]})]})]})]}),e.jsxs(be,{className:"mt-6 grow overflow-hidden flex flex-col",children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-lg",children:s.get("ui_popular_jobs")}),e.jsx(Ds,{children:s.get("ui_popular_jobs_description")})]}),e.jsxs(Ne,{className:"p-0 grow relative",children:[e.jsx(qt,{config:ur,className:"h-72 w-full",children:e.jsxs(Ka,{data:o.sort((r,N)=>N.count-r.count).slice(0,10),margin:{top:20,right:30,left:5,bottom:20},children:[e.jsx(Xa,{vertical:!1}),e.jsx(Ya,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(Qa,{allowDecimals:!1,tickCount:5}),e.jsx(dr,{cursor:!1,wrapperClassName:"w-72",content:e.jsx(Jt,{hideLabel:!0})}),e.jsx(ei,{dataKey:"count",name:s.get("ui_player_count"),fill:"currentColor",radius:4,maxBarSize:80}),e.jsx(si,{})]})}),o.length===0&&e.jsx("p",{className:"text-center text-2xl text-muted-foreground absolute top-[40%] left-[48%] transform -translate-x-1/2 -translate-y-1/2",children:s.get("ui_no_data_available")})]})]})]})}const X=x.forwardRef(({className:s,...t},i)=>e.jsx(Qn,{ref:i,className:E("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(ni,{className:E("flex items-center justify-center text-current"),children:e.jsx(Es,{className:"h-4 w-4"})})}));X.displayName=Qn.displayName;const jr=Z({name:H().min(1,"ui_error_required"),label:H().min(1,"ui_error_required"),type:H().optional(),defaultDuty:B().optional(),offDutyPay:B().optional(),whitelisted:B().optional(),canWash:B().optional(),webhook:H().url("ui_error_url").optional().or(ms(""))});function pr(){const s=q(),t=ye(),{updateJob:i}=re(),{framework:a}=wt(),n=sn(),c=ue({resolver:me(jr),defaultValues:{...t,webhook:t&&n.jobs[t.name]||""}});function o(r){const N={...t,...r,webhook:void 0};i(N),c.reset(r),fe.success(s.get("ui_job_updated")),r.webhook&&n.rawSet({globalWebhook:n.globalWebhook,settings:n.settings,jobs:{...n.jobs,[t.name]:r.webhook}}),_e("updateJobWebhook",{name:N.name,url:r.webhook})}return e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o),className:"space-y-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"name",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:s.get("ui_name")}),e.jsx(j,{children:e.jsx(b,{...r,disabled:!0})}),e.jsx(I,{children:s.get("ui_job_name_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:s.get("ui_label")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:s.get("ui_job_label_description")}),e.jsx(D,{})]})})]}),a==="qb-core"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{control:c.control,name:"type",render:({field:r})=>e.jsxs(m,{className:"w-1/2 pr-2",children:[e.jsx(f,{children:s.get("ui_type")}),e.jsx(j,{children:e.jsx(b,{placeholder:"leo",...r})}),e.jsx(I,{children:s.get("ui_job_type_description")}),e.jsx(D,{})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"defaultDuty",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_default_duty")}),e.jsx(I,{children:s.get("ui_default_duty_description")})]})]})}),e.jsx(p,{control:c.control,name:"offDutyPay",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_off_duty_pay")}),e.jsx(I,{children:s.get("ui_off_duty_pay_description")})]})]})})]})]}),a==="es_extended"&&e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"whitelisted",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_whitelisted")}),e.jsx(I,{children:s.get("ui_whitelisted_description")})]})]})}),e.jsx(p,{control:c.control,name:"canWash",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_can_wash")}),e.jsx(I,{children:s.get("ui_can_wash_description")})]})]})})]}),e.jsx(p,{control:c.control,name:"webhook",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_webhook")}),e.jsx(j,{children:e.jsx(b,{placeholder:"https://discord.com/api/webhooks/...",...r})}),e.jsx(I,{children:s.get("ui_job_webhook_description")}),e.jsx(D,{})]})}),e.jsx(_,{type:"submit",disabled:!c.formState.isDirty,children:s.get("ui_save")})]})})}const Ut=ge.union([ge.string(),ge.number()]).transform(s=>{if(typeof s=="string"){const t=parseFloat(s);return isNaN(t)?void 0:t}if(typeof s=="number")return s}),M=Ut.pipe(ge.number()),ds=Ut.pipe(ge.number().min(0).optional()).optional(),gr=Z({label:H().min(1,"ui_error_required"),salary:M,bossActions:B().default(!1).optional()}),on={label:"",salary:0,bossActions:!1};function fr({isOpen:s,setIsOpen:t,editingGrade:i,onSubmit:a}){const n=q(),c=ye(),o=ue({resolver:me(gr.refine(y=>!c.grades.some(S=>S.name!==(i==null?void 0:i.name)&&S.label===y.label),{message:"Grade label must be unique",path:["label"]})),defaultValues:i||on});x.useEffect(()=>{o.reset(i||on)},[i]);const r=o.formState.isDirty;function N(y){r&&a({...y,name:y.label.toLowerCase().replace(/ /g,"_")}),t(!1)}function d(y){t(y),o.reset()}return e.jsxs(je,{open:s,onOpenChange:d,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>o.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_grade")]})}),e.jsxs(oe,{children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_grade"):n.get("ui_add_grade")}),e.jsx(he,{})]}),e.jsx(pe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N,De),className:"space-y-4 py-4",children:[e.jsx(p,{control:o.control,name:"label",render:({field:y})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_grade_label")}),e.jsx(j,{children:e.jsx(b,{placeholder:n.get("ui_enter_grade_label"),...y})}),e.jsx(I,{children:n.get("ui_grade_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:o.control,name:"salary",render:({field:y})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_salary")}),e.jsx(j,{children:e.jsx(b,{type:"number",placeholder:n.get("ui_enter_salary"),...y})}),e.jsx(I,{children:n.get("ui_salary_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:o.control,name:"bossActions",render:({field:y})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 py-4",children:[e.jsx(j,{children:e.jsx(X,{checked:y.value,onCheckedChange:y.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_boss_actions_access")}),e.jsx(I,{children:n.get("ui_boss_actions_access_description")})]})]})}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_grade")})]})})]})]})}const Bt=hs(s=>({content:null,contentType:null,setCopiedContent:(t,i)=>s({content:t,contentType:i}),clearContent:()=>s({content:null,contentType:null})})),Ee=({onPaste:s,contentType:t,isDropdown:i})=>{const a=q(),{content:n,contentType:c}=Bt(),o=()=>{n&&c===t?(s(n),fe.success(a.get("ui_pasted"))):fe.error(a.get("ui_no_compatible_content"))};return i?e.jsxs(W,{onClick:o,children:[e.jsx(ln,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Paste"})]}):e.jsx(_,{variant:"outline",size:"icon",onClick:o,children:e.jsx(ln,{className:"h-4 w-4"})})},se=({getContent:s,contentType:t,isDropdown:i,text:a})=>{const n=q(),c=Bt(r=>r.setCopiedContent),o=()=>{const r=s();c(r,t),fe.success(n.get("ui_copied"))};return i?e.jsxs(W,{onClick:o,children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:a||n.get("ui_copy")})]}):e.jsx(_,{variant:"outline",size:"icon",onClick:o,children:e.jsx(Gs,{className:"h-4 w-4"})})},Ve=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(et,{ref:a,className:E("relative overflow-hidden",s),...i,children:[e.jsx(ti,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Ht,{}),e.jsx(ai,{})]}));Ve.displayName=et.displayName;const Ht=x.forwardRef(({className:s,orientation:t="vertical",...i},a)=>e.jsx(st,{ref:a,orientation:t,className:E("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:e.jsx(ii,{className:"relative flex-1 rounded-full bg-border"})}));Ht.displayName=st.displayName;function _r({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function br({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function yr(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.grades)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),d=Ie(),y=Je(le(es),le(Qe,{coordinateGetter:Ye})),S=P=>{o(P),setTimeout(()=>{P||N(null)},200)},w=P=>{i({...t,grades:P},"grades")},C=P=>{const v=[...a,...(Array.isArray(P)?P:[P]).map(A=>({...A}))];n(v),o(!1),w(v)},g=P=>{if(r){const v=a.map((A,R)=>R===a.findIndex(O=>O===r)?P:A);n(v),o(!1),setTimeout(()=>{N(null)},500),w(v)}};function T(P){const{active:v,over:A}=P;if(v.id!==A.id){const R=a.findIndex($=>$.label===v.id),O=a.findIndex($=>$.label===A.id),G=ri(a,R,O);n(G),w(G)}}return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_grades")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_grades_description")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"grade",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"grade",onPaste:C,isDropdown:!0})]})]}),e.jsx(fr,{isOpen:c,editingGrade:r||void 0,setIsOpen:S,onSubmit:r?g:C})]})]}),e.jsx("div",{className:"grow overflow-hidden",children:e.jsx(Ue,{sensors:y,collisionDetection:Be,onDragEnd:T,modifiers:[He,Ge],children:e.jsx(Ve,{className:"h-full",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-32"}),e.jsx(z,{className:"w-20",children:s.get("ui_id")}),e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_salary")}),e.jsx(z,{children:s.get("ui_boss_actions_access")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{className:"pb-20",children:e.jsx(Ze,{items:a.map(P=>P.label),strategy:We,children:a.map((P,v)=>e.jsxs(_r,{id:P.label,children:[e.jsx(br,{id:P.label}),e.jsx(k,{children:v}),e.jsx(k,{children:P.label}),e.jsxs(k,{children:["$",P.salary]}),e.jsx(k,{children:P.bossActions?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(P),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>P,contentType:"grade",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await d(s.get("ui_delete_grade"),s.get("ui_delete_grade_description"))){const A=a.filter((R,O)=>O!==v);n(A),w(A)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},P.label))})})]})})})})]})}const nn=Z({item:H().optional(),removeAfterUse:B().optional()});function Nr({isOpen:s,setOpen:t,action:i,updateAction:a}){const n=q(),c=ue({resolver:me(nn),defaultValues:{item:"",removeAfterUse:!1,...i}}),o=r=>{a(r),t(!1)};return e.jsx(je,{open:s,onOpenChange:t,children:e.jsxs(oe,{children:[e.jsxs(de,{children:[e.jsx(xe,{children:n.get("ui_edit_action")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o),className:"space-y-4",children:[e.jsx(p,{control:c.control,name:"item",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_item_name")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_enter_item_name")})]})}),e.jsx(p,{control:c.control,name:"removeAfterUse",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_remove_after_use")}),e.jsx(I,{children:n.get("ui_remove_after_use_description")})]})]})}),e.jsx(qs,{children:e.jsx(_,{type:"button",onClick:c.handleSubmit(o),className:"w-full",children:n.get("ui_save")})})]})})]})})}const Us=hi,Bs=ui,Ss=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(nt,{ref:a,className:E("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[t,e.jsx(li,{asChild:!0,children:e.jsx(Rs,{className:"h-4 w-4 opacity-50"})})]}));Ss.displayName=nt.displayName;const Gt=x.forwardRef(({className:s,...t},i)=>e.jsx(tt,{ref:i,className:E("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Yn,{className:"h-4 w-4"})}));Gt.displayName=tt.displayName;const Zt=x.forwardRef(({className:s,...t},i)=>e.jsx(at,{ref:i,className:E("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Rs,{className:"h-4 w-4"})}));Zt.displayName=at.displayName;const zs=x.forwardRef(({className:s,children:t,position:i="popper",...a},n)=>e.jsx(ci,{children:e.jsxs(it,{ref:n,className:E("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...a,children:[e.jsx(Gt,{}),e.jsx(oi,{className:E("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Zt,{})]})}));zs.displayName=it.displayName;const vr=x.forwardRef(({className:s,...t},i)=>e.jsx(rt,{ref:i,className:E("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));vr.displayName=rt.displayName;const Fe=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(lt,{ref:a,className:E("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(di,{children:e.jsx(Es,{className:"h-4 w-4"})})}),e.jsx(xi,{children:t})]}));Fe.displayName=lt.displayName;const wr=x.forwardRef(({className:s,...t},i)=>e.jsx(ct,{ref:i,className:E("-mx-1 my-1 h-px bg-muted",s),...t}));wr.displayName=ct.displayName;function Cr({isOpen:s,setOpen:t,initialValue:i,updateValue:a}){const n=q(),[c,o]=x.useState(i||"both"),r=()=>{a(c),t(!1)},N=()=>{o(i||"both"),t(!1)};return e.jsx(je,{open:s,onOpenChange:N,children:e.jsxs(oe,{className:"w-96",children:[e.jsxs(de,{children:[e.jsx(xe,{children:n.get("ui_edit_handcuff_options")}),e.jsx(he,{})]}),e.jsxs(Us,{value:c,onValueChange:d=>o(d),children:[e.jsx(Ss,{className:"w-full",children:e.jsx(Bs,{placeholder:n.get("ui_select_handcuff_option")})}),e.jsxs(zs,{children:[e.jsx(Fe,{value:"both",children:n.get("ui_both")}),e.jsx(Fe,{value:"handcuffs",children:n.get("ui_handcuffs")}),e.jsx(Fe,{value:"zipties",children:n.get("ui_zipties")})]})]}),e.jsx(qs,{children:e.jsx(_,{type:"button",onClick:r,className:"w-full",children:n.get("ui_save")})})]})})}function ne({name:s,label:t,description:i,control:a,isPrimitive:n}){const[c,o]=x.useState(!1),{field:r}=mi({name:s,control:a,defaultValue:!1}),N=typeof r.value=="object"||typeof r.value=="string";return e.jsx(p,{control:a,name:s,render:()=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 relative",style:{paddingRight:n?"2rem":"5rem"},children:[e.jsx(j,{children:e.jsx(X,{type:"button",checked:N||r.value,onCheckedChange:d=>{r.onChange(d?n?!0:s==="playerActions.handcuff"?"both":{item:"",removeAfterUse:!1}:!1)}})}),e.jsxs("div",{className:"space-y-1 leading-none flex-grow",children:[e.jsx(f,{children:t}),e.jsx(I,{children:i})]}),!n&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>o(!0),disabled:!r.value,className:"ml-auto w-10 h-10 absolute right-2 top-2",children:e.jsx(Hs,{className:"h-4 w-4"})}),s==="playerActions.handcuff"?e.jsx(Cr,{isOpen:c,setOpen:o,initialValue:typeof r.value=="string"?r.value:"both",updateValue:d=>r.onChange(d)}):e.jsx(Nr,{isOpen:c,setOpen:o,action:r.value,updateAction:d=>r.onChange(d)})]})})}const vs=x.forwardRef(({className:s,orientation:t="horizontal",decorative:i=!0,...a},n)=>e.jsx(ot,{ref:n,decorative:i,orientation:t,className:E("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));vs.displayName=ot.displayName;const ys=js([B(),nn]),kr=Z({playerActions:Z({steal:B(),handcuff:js([ms("both"),ms("handcuffs"),ms("zipties"),B()]),drag:B(),carry:B(),tackle:B(),bill:B(),revive:ys,heal:ys}),vehicleActions:Z({putInsideVehicle:B(),takeOutOfVehicle:B(),hijack:ys,repair:ys,clean:ys,impound:ys})}),Ps={playerActions:{steal:!1,handcuff:!1,drag:!1,carry:!1,bill:!1,tackle:!1,revive:!1,heal:!1},vehicleActions:{putInsideVehicle:!1,takeOutOfVehicle:!1,hijack:!1,repair:!1,clean:!1,impound:!1}};function Sr(){const s=ye(),t=q(),{updateJob:i}=re(),a=ue({resolver:me(kr),defaultValues:{playerActions:(s==null?void 0:s.playerActions)||Ps.playerActions,vehicleActions:(s==null?void 0:s.vehicleActions)||Ps.vehicleActions}});Array.isArray(a.watch("playerActions"))&&a.setValue("playerActions",Ps.playerActions),Array.isArray(a.watch("vehicleActions"))&&a.setValue("vehicleActions",Ps.vehicleActions);const n=c=>{i({...s,playerActions:c.playerActions,vehicleActions:c.vehicleActions}),fe.success("Actions updated."),a.reset(c)};return e.jsx(pe,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(n),className:"space-y-8 overflow-y-scroll h-full px-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:t.get("ui_player_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.get("ui_player_actions_description")})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(ne,{name:"playerActions.handcuff",label:t.get("ui_handcuff"),description:t.get("ui_handcuff_description"),control:a.control}),e.jsx(ne,{name:"playerActions.drag",label:t.get("ui_drag"),description:t.get("ui_drag_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.steal",label:t.get("ui_steal"),description:t.get("ui_steal_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.carry",label:t.get("ui_carry"),description:t.get("ui_carry_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.tackle",label:t.get("ui_tackle"),description:t.get("ui_tackle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.bill",label:t.get("ui_bill"),description:t.get("ui_bill_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.revive",label:t.get("ui_revive"),description:t.get("ui_revive_description"),control:a.control}),e.jsx(ne,{name:"playerActions.heal",label:t.get("ui_heal"),description:t.get("ui_heal_description"),control:a.control})]}),e.jsx(vs,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:t.get("ui_vehicle_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.get("ui_vehicle_actions_description")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(ne,{name:"vehicleActions.putInsideVehicle",label:t.get("ui_put_inside_vehicle"),description:t.get("ui_put_inside_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"vehicleActions.takeOutOfVehicle",label:t.get("ui_take_out_of_vehicle"),description:t.get("ui_take_out_of_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"vehicleActions.hijack",label:t.get("ui_hijack"),description:t.get("ui_hijack_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.repair",label:t.get("ui_repair"),description:t.get("ui_repair_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.clean",label:t.get("ui_clean"),description:t.get("ui_clean_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.impound",label:t.get("ui_impound"),description:t.get("ui_impound_description"),control:a.control})]}),e.jsx(_,{type:"submit",disabled:!a.formState.isDirty,children:t.get("ui_save_actions")})]})})}function _s({name:s,label:t,description:i,is4D:a=!1,className:n,disableButton:c=!1,target:o=!1,forceDisableTarget:r=!1}){const{control:N,setValue:d,watch:y}=us(),S=Cs(),w=async()=>{S.setVisible(!1);const C=await _e("getCoordsInput",{target:o,is4D:a,forceDisableTarget:r},{x:10,y:-10,z:20,w:10},500);S.setVisible(!0),d(s,C)};return e.jsxs(m,{className:n,children:[e.jsx(f,{children:t}),e.jsx(j,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-2",children:[["x","y","z",...a?["w"]:[]].map(C=>e.jsx(p,{control:N,name:`${s}.${C}`,render:({field:g})=>e.jsx(m,{className:"w-full",children:e.jsx(j,{children:e.jsx(b,{type:"number",placeholder:C.toUpperCase(),...g,value:g.value})})})},C)),!c&&e.jsx(_,{onClick:w,type:"button",size:"icon",className:"shrink-0",children:e.jsx(ks,{className:"w-4 h-4"})})]})})}),i&&e.jsx(I,{children:i})]})}const zr=Z({coords:Z({x:M,y:M,z:M}).catch({x:0,y:0,z:0}),name:H().min(1,"ui_error_required"),sprite:M,size:M,color:M,global:B().default(!1).optional()}),dn={coords:{x:0,y:0,z:0,w:0},name:"",sprite:0,size:1,color:0,global:!1};function Tr({isOpen:s,setIsOpen:t,editingBlip:i,onSubmit:a}){const n=q(),c=ue({resolver:me(zr),defaultValues:i||dn});x.useEffect(()=>{c.reset(i||dn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_blip")]})}),e.jsxs(oe,{children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_blip"):n.get("ui_add_blip")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"space-y-4 py-4",children:[e.jsx(_s,{name:"coords",label:n.get("ui_coordinates"),forceDisableTarget:!0}),e.jsx(p,{control:c.control,name:"name",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_blip_name")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_blip_name_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"sprite",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_sprite")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_sprite_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"size",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_size")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_size_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"color",render:({field:r})=>e.jsxs(m,{children:[e.jsx(f,{children:n.get("ui_color")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_color_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"global",render:({field:r})=>e.jsxs(m,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_blip")})]})]})}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_blip")})]})})]})]})}function Ir(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.blips)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,blips:l},"blips")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h})).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map(h=>h===r?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>l.name.toLowerCase().includes(g.toLowerCase())),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_blips"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"blip",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"blip",onPaste:A,isDropdown:!0})]})]}),e.jsx(Tr,{isOpen:c,editingBlip:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_name")}),e.jsx(z,{children:s.get("ui_sprite")}),e.jsx(z,{children:s.get("ui_size")}),e.jsx(z,{children:s.get("ui_color")}),e.jsx(z,{children:s.get("ui_global")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{children:e.jsx(k,{colSpan:6,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.name}),e.jsx(k,{children:l.sprite}),e.jsx(k,{children:l.size}),e.jsx(k,{children:l.color}),e.jsx(k,{children:l.global?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"blip",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_blip"),s.get("ui_delete_blip_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}function xn({...s}){return e.jsx(b,{type:"number",...s,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}const $r=Z({model:js([ws.number().refine(s=>s!==0),H().min(1,"ui_error_required")]).catch("hei_prop_heist_wooden_box"),offset:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0)}).catch({x:0,y:0,z:0}),rotation:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0)}).catch({x:0,y:0,z:0})}),ts=qe($r);function Pr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Ar({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function as({name:s,control:t,className:i}){const a=q(),{watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:t}),y=n("props");if(y)for(let C=0;C<y.length;C++)Array.isArray(y[C])&&c(`props.${C}`,{model:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}});const S=Je(le(es),le(Qe,{coordinateGetter:Ye}));function w(C){const{active:g,over:T}=C;if(g.id!==T.id){const P=o.findIndex(A=>A.id===g.id),v=o.findIndex(A=>A.id===T.id);d(P,v)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_props")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({model:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}),className:"shrink-0",children:a.get("ui_add_prop")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96",children:e.jsx(Ue,{sensors:S,collisionDetection:Be,onDragEnd:w,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{className:"w-52",children:a.get("ui_model")}),e.jsx(z,{children:a.get("ui_offset_x")}),e.jsx(z,{children:a.get("ui_offset_y")}),e.jsx(z,{children:a.get("ui_offset_z")}),e.jsx(z,{children:a.get("ui_rotation_x")}),e.jsx(z,{children:a.get("ui_rotation_y")}),e.jsx(z,{children:a.get("ui_rotation_z")}),e.jsx(z,{className:"w-20 text-center",children:a.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:o.map(C=>C.id),strategy:We,children:o.map((C,g)=>e.jsxs(Pr,{id:C.id,children:[e.jsx(Ar,{id:C.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${g}.model`,control:t,render:({field:T})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...T,placeholder:a.get("ui_prop_model")})})})})}),["x","y","z"].map(T=>e.jsx(k,{className:"p-3",children:e.jsx(p,{name:`${s}.${g}.offset.${T}`,control:t,render:({field:P})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(xn,{...P,placeholder:T.toUpperCase(),step:"0.01"})})})})},T)),["x","y","z"].map(T=>e.jsx(k,{className:"p-3",children:e.jsx(p,{name:`${s}.${g}.rotation.${T}`,control:t,render:({field:P})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(xn,{...P,placeholder:`Rot ${T.toUpperCase()}`,step:"0.01"})})})})},`rot_${T}`)),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(g),children:e.jsx(ns,{className:"h-4 w-4"})})})]},C.id))})})]})})})})})]})}const Dr=Z({model:js([ws.number().refine(s=>s!==0),H().min(1,"ui_error_required")]).catch("a_m_y_genstreet_01"),offset:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0)}).catch({x:0,y:0,z:0}),heading:M.catch(0)}),is=qe(Dr);function Mr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Er({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function rs({name:s,control:t,className:i}){const a=q(),{watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:t}),y=n("ped");if(y)for(let C=0;C<y.length;C++)Array.isArray(y[C])&&c(`ped.${C}`,{model:"",offset:{x:0,y:0,z:0},heading:0});const S=Je(le(es),le(Qe,{coordinateGetter:Ye}));function w(C){const{active:g,over:T}=C;if(g.id!==T.id){const P=o.findIndex(A=>A.id===g.id),v=o.findIndex(A=>A.id===T.id);d(P,v)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_peds")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({model:"",offset:{x:0,y:0,z:0},heading:0}),className:"shrink-0",children:a.get("ui_add_ped")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:S,collisionDetection:Be,onDragEnd:w,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{className:"w-40",children:a.get("ui_model")}),e.jsx(z,{children:a.get("ui_offset_x")}),e.jsx(z,{children:a.get("ui_offset_y")}),e.jsx(z,{children:a.get("ui_offset_z")}),e.jsx(z,{children:a.get("ui_heading")}),e.jsx(z,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:o.map(C=>C.id),strategy:We,children:o.map((C,g)=>e.jsxs(Mr,{id:C.id,children:[e.jsx(Er,{id:C.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${g}.model`,control:t,render:({field:T})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...T,placeholder:"Ped model"})})})})}),["x","y","z"].map(T=>e.jsx(k,{className:"p-2",children:e.jsx(p,{name:`${s}.${g}.offset.${T}`,control:t,render:({field:P})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...P,type:"number",defaultValue:0,placeholder:T.toUpperCase(),step:"0.5"})})})})},T)),e.jsx(k,{children:e.jsx(p,{name:`${s}.${g}.heading`,control:t,render:({field:T})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...T,type:"number",defaultValue:0,placeholder:"Heading",step:"0.5"})})})})}),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(g),children:e.jsx(ns,{className:"h-4 w-4"})})})]},C.id))})})]})})})})})]})}const Re=ji,Oe=x.forwardRef(({className:s,...t},i)=>e.jsx(dt,{ref:i,className:E("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Oe.displayName=dt.displayName;const J=x.forwardRef(({className:s,...t},i)=>e.jsx(xt,{ref:i,className:E("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));J.displayName=xt.displayName;const U=x.forwardRef(({className:s,...t},i)=>e.jsx(ht,{ref:i,className:E("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));U.displayName=ht.displayName;const Or=Z({x:M.catch(0),y:M.catch(0),z:M.catch(0),w:M.catch(0)}),ls=qe(Or);function Rr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Vr({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function cs({name:s,className:t}){const i=q(),{control:a,watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:a}),y=Cs();Array.isArray(n("locations"))||c("locations",[]);const S=n("target"),w=n("prop"),C=n("ped"),g=Je(le(es),le(Qe,{coordinateGetter:Ye})),T=async v=>{y.setVisible(!1);const A=await _e("getCoordsInput",{target:S,prop:w,ped:C},{x:0,y:0,z:0,w:0},500);y.setVisible(!0),c(`${s}.${v}`,A)};function P(v){const{active:A,over:R}=v;if(A.id!==R.id){const O=o.findIndex($=>$.id===A.id),G=o.findIndex($=>$.id===R.id);d(O,G)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",t),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:i.get("ui_locations")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({x:0,y:0,z:0,w:0}),className:"shrink-0",children:i.get("ui_add_location")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96",children:e.jsx(Ue,{sensors:g,collisionDetection:Be,onDragEnd:P,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:"X"}),e.jsx(z,{children:"Y"}),e.jsx(z,{children:"Z"}),e.jsx(z,{children:"W"}),e.jsx(z,{className:"w-32 text-center",children:i.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:o.map(v=>v.id),strategy:We,children:o.map((v,A)=>e.jsxs(Rr,{id:v.id,children:[e.jsx(Vr,{id:v.id}),["x","y","z","w"].map(R=>e.jsx(k,{children:e.jsx(p,{name:`${s}.${A}.${R}`,control:a,render:({field:O})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...O,type:"number",placeholder:R.toUpperCase(),step:"0.1"})})})})},R)),e.jsx(k,{children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(A),children:e.jsx(ks,{className:"h-4 w-4"})}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(A),children:e.jsx(ns,{className:"h-4 w-4"})})]})})]},v.id))})})]})})})})})]})}const Le=({name:s,description:t})=>{const i=q(),{control:a,formState:n}=us();return e.jsx(p,{control:a,name:s,render:({field:c})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:i.get("ui_interaction_style")}),e.jsxs(Us,{onValueChange:o=>c.onChange(o==="true"?!0:o==="false"?!1:void 0),defaultValue:c.value===!0?"true":c.value===!1?"false":"undefined",children:[e.jsx(j,{children:e.jsx(Ss,{children:e.jsx(Bs,{placeholder:"Select targeting option"})})}),e.jsxs(zs,{children:[e.jsx(Fe,{value:"true",children:i.get("ui_target")}),e.jsx(Fe,{value:"false",children:i.get("ui_3d_prompts_or_text_ui")}),e.jsx(Fe,{value:"undefined",children:i.get("ui_inherit_global")})]})]}),e.jsx(I,{children:t}),e.jsx(D,{})]})})},Lr=Z({locations:ls,label:H().min(1),icon:H().min(1),radius:M,target:B().optional(),prop:ts.optional(),ped:is.optional()}),hn={locations:[{x:0,y:0,z:0,w:0}],radius:1.25,icon:"briefcase",label:"",prop:[],ped:[]};function Fr({isOpen:s,setIsOpen:t,editingBossMenu:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Lr),defaultValues:i||hn});x.useEffect(()=>{c.reset(i||hn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_boss_menu")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_boss_menu"):n.get("ui_add_boss_menu")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_boss_menu_placeholder")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_boss_menu")})]})})]})]})}function qr(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.bossMenus)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,bossMenus:l},"bossMenus")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return(u=l.icon)==null?void 0:u.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_boss_menus"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"bossMenu",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"bossMenu",onPaste:A,isDropdown:!0})]})]}),e.jsx(Fr,{isOpen:c,editingBossMenu:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_radius")}),e.jsx(z,{children:s.get("ui_target")}),e.jsx(z,{children:s.get("ui_locations")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{children:e.jsx(k,{colSpan:5,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.radius}),e.jsx(k,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:l.locations.length}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"bossMenu",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_boss_menu"),s.get("ui_delete_boss_menu_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Jr=Z({label:H().min(1),icon:H().min(1),locations:ls,radius:ws.number().min(0,"ui_error_positive").optional(),target:B().optional(),prop:ts.optional(),ped:is.optional()}),un={locations:[{x:0,y:0,z:0,w:0}],radius:2,label:"",icon:"shirt",prop:[],ped:[]};function Ur({isOpen:s,setIsOpen:t,editingCloakroom:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Jr),defaultValues:i||un});x.useEffect(()=>{c.reset(i||un)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_cloakroom")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_cloakroom"):n.get("ui_add_cloakroom")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_cloakroom")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_cloakroom")})]})})]})]})}function Br(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.cloakrooms)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,cloakrooms:l},"cloakrooms")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>l.locations.some(u=>JSON.stringify(u).toLowerCase().includes(g.toLowerCase()))),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_cloakrooms"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"cloakroom",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"cloakroom",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ur,{isOpen:c,editingCloakroom:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_radius")}),e.jsx(z,{children:s.get("ui_target")}),e.jsx(z,{children:s.get("ui_locations")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{children:e.jsx(k,{colSpan:5,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.radius}),e.jsx(k,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:l.locations.length}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"cloakroom",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_cloakroom"),s.get("ui_delete_cloakroom_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Hr=fi,Ws=x.forwardRef(({className:s,...t},i)=>e.jsx(pi,{ref:i,className:E("border-b",s),...t}));Ws.displayName="AccordionItem";const Ks=x.forwardRef(({className:s,children:t,...i},a)=>e.jsx(gi,{className:"flex",children:e.jsxs(ut,{ref:a,className:E("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[t,e.jsx(Rs,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ks.displayName=ut.displayName;const Xs=x.forwardRef(({className:s,children:t,...i},a)=>e.jsx(mt,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:e.jsx("div",{className:E("pb-4 pt-0",s),children:t})}));Xs.displayName=mt.displayName;const Ts=ge.union([ge.object({scenario:ge.string().min(1,"ui_error_required"),playEnter:ge.boolean().optional()}),ge.object({dict:ge.string().min(1,"ui_error_required"),clip:ge.string().min(1,"ui_error_required"),flag:ds,blendIn:ds,blendOut:ds,duration:ds,playbackRate:ds,lockX:ge.boolean().optional(),lockY:ge.boolean().optional(),lockZ:ge.boolean().optional()})]),Is=ge.object({model:ge.union([ge.coerce.number(),ge.string()]).catch(void 0),bone:ds,position:ge.object({x:M,y:M,z:M}).catch({x:0,y:0,z:0}),rotation:ge.object({x:M,y:M,z:M}).catch({x:0,y:0,z:0})}).transform(s=>s.model!==void 0?s:void 0),$s=({name:s,disableNone:t})=>{const i=q(),{control:a,watch:n,setValue:c}=us(),o=n(s),[r,N]=x.useState(o?"dict"in o?"animation":"scenario":"none");return x.useEffect(()=>{r==="none"?c(s,void 0):r==="scenario"&&(!o||!("scenario"in o))?c(s,{scenario:""}):r==="animation"&&(!o||!("dict"in o))&&c(s,{dict:"",clip:""})},[r,s,c]),e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{control:a,name:`${s}.type`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_animation_type")}),e.jsxs(Us,{onValueChange:y=>{N(y)},value:r,children:[e.jsx(j,{children:e.jsx(Ss,{children:e.jsx(Bs,{placeholder:i.get("ui_select_animation_type")})})}),e.jsxs(zs,{children:[!t&&e.jsx(Fe,{value:"none",children:i.get("ui_none")}),e.jsx(Fe,{value:"scenario",children:i.get("ui_scenario")}),e.jsx(Fe,{value:"animation",children:i.get("ui_animation")})]})]})]})}),r==="scenario"&&e.jsxs(e.Fragment,{children:[e.jsx(p,{control:a,name:`${s}.scenario`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_scenario")}),e.jsx(j,{children:e.jsx(b,{...d,placeholder:"WORLD_HUMAN_CLIPBOARD"})}),e.jsx(I,{children:i.get("ui_scenario_desc")})]})}),e.jsx(p,{control:a,name:`${s}.playEnter`,render:({field:d})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:d.value,onCheckedChange:d.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:i.get("ui_play_enter_animation")}),e.jsx(I,{children:i.get("ui_play_enter_animation_desc")})]})]})})]}),r==="animation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:a,name:`${s}.dict`,render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:i.get("ui_animation_dict")}),e.jsx(j,{children:e.jsx(b,{...d,placeholder:"e.g. anim@amb@clubhouse@tutorial@bkr_tut_ig3@"})}),e.jsx(I,{children:i.get("ui_animation_dict_desc")})]})}),e.jsx(p,{control:a,name:`${s}.clip`,render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:i.get("ui_animation_clip")}),e.jsx(j,{children:e.jsx(b,{...d,placeholder:"machinic_loop_mechandplayer"})}),e.jsx(I,{children:i.get("ui_animation_clip_desc")})]})})]}),e.jsxs(Hr,{type:"single",collapsible:!0,children:[e.jsxs(Ws,{value:"advanced-settings",children:[e.jsx(Ks,{children:i.get("ui_advanced_settings")}),e.jsxs(Xs,{className:"space-y-4 mt-4 px-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(p,{control:a,name:`${s}.flag`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_flag")}),e.jsx(j,{children:e.jsx(b,{type:"number",...d})})]})}),e.jsx(p,{control:a,name:`${s}.blendIn`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_blend_in")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.1",...d})})]})}),e.jsx(p,{control:a,name:`${s}.blendOut`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_blend_out")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.1",...d})})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(p,{control:a,name:`${s}.duration`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_duration")}),e.jsx(j,{children:e.jsx(b,{type:"number",...d})})]})}),e.jsx(p,{control:a,name:`${s}.playbackRate`,render:({field:d})=>e.jsxs(m,{children:[e.jsx(f,{children:i.get("ui_playback_rate")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.1",...d})})]})}),e.jsxs("div",{className:"flex space-x-4 items-center mt-6",children:[e.jsx(p,{control:a,name:`${s}.lockX`,render:({field:d})=>e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(j,{children:e.jsx(X,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(f,{children:i.get("ui_lock_x")})]})}),e.jsx(p,{control:a,name:`${s}.lockY`,render:({field:d})=>e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(j,{children:e.jsx(X,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(f,{children:i.get("ui_lock_y")})]})}),e.jsx(p,{control:a,name:`${s}.lockZ`,render:({field:d})=>e.jsxs(m,{className:"flex items-center space-x-2",children:[e.jsx(j,{children:e.jsx(X,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(f,{children:i.get("ui_lock_z")})]})})]})]})]})]}),e.jsxs(Ws,{value:"animation-prop",children:[e.jsx(Ks,{children:i.get("ui_animation_prop")}),e.jsx(Xs,{className:"space-y-4 mt-4 px-4",children:e.jsx(Gr,{name:s})})]})]})]})]})},Gr=({name:s})=>{const t=q(),i=`${s}Prop`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{name:`${i}.model`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_model")}),e.jsx(j,{children:e.jsx(b,{...a,placeholder:"e.g. prop_cs_hand_radio"})}),e.jsx(I,{children:t.get("ui_model_desc")})]})}),e.jsx(p,{name:`${i}.bone`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_bone")}),e.jsx(j,{children:e.jsx(b,{type:"number",...a,placeholder:"e.g. 28422"})}),e.jsx(I,{children:t.get("ui_bone_desc")})]})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx(p,{name:`${i}.position.x`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_offset_x")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})}),e.jsx(p,{name:`${i}.position.y`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_offset_y")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})}),e.jsx(p,{name:`${i}.position.z`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_offset_z")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})}),e.jsx(p,{name:`${i}.rotation.x`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_rotation_x")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})}),e.jsx(p,{name:`${i}.rotation.y`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_rotation_y")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})}),e.jsx(p,{name:`${i}.rotation.z`,render:({field:a})=>e.jsxs(m,{children:[e.jsx(f,{children:t.get("ui_rotation_z")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.01",...a})})]})})]})]})},Wt=qe(Z({name:H().min(1),count:Z({min:M.catch(1),max:M.catch(1)}).catch({min:1,max:1})}));function Zr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Wr({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function Kt({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ss({name:s,control:t}),N=Je(le(es),le(Qe,{coordinateGetter:Ye}));function d(y){const{active:S,over:w}=y;if(S.id!==w.id){const C=n.findIndex(T=>T.id===S.id),g=n.findIndex(T=>T.id===w.id);r(C,g)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_items")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>c({name:"",count:{min:1,max:1}}),className:"shrink-0",children:a.get("ui_add_item")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:N,collisionDetection:Be,onDragEnd:d,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:a.get("ui_item_name")}),e.jsx(z,{children:a.get("ui_min_count")}),e.jsx(z,{children:a.get("ui_max_count")}),e.jsx(z,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:n.map(y=>y.id),strategy:We,children:n.map((y,S)=>e.jsxs(Zr,{id:y.id,children:[e.jsx(Wr,{id:y.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.name`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,placeholder:a.get("ui_item_name")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.count.min`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,type:"number",placeholder:a.get("ui_min")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.count.max`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,type:"number",placeholder:a.get("ui_max")})})})})}),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>o(S),children:e.jsx(ns,{className:"h-4 w-4"})})})]},y.id))})})]})})})})})]})}const Kr=Z({label:H().min(1),progress:H(),icon:H(),radius:M,duration:M,items:Wt,animation:Ts.optional(),animationProp:Is.optional(),requiredItem:H().optional(),max:ds,recover:ds,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),mn={label:"",progress:"Collecting...",requiredItem:"",icon:"hand",duration:2e3,radius:1.25,items:[{name:"",count:{min:1,max:1}}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Xr({isOpen:s,setIsOpen:t,editingCollecting:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Kr),defaultValues:i||mn});x.useEffect(()=>{c.reset(i||mn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_collecting_point")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_collecting_point"):n.get("ui_add_collecting_point")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_ped")}),e.jsx(J,{value:"prop",children:n.get("ui_prop")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_collecting_point")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_progress_text")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_duration")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"requiredItem",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_required_item")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_required_item_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"max",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_max_collectable")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_max_collectable_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"recover",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_recovery_time")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_recovery_time_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kt,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx($s,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_collecting_point")})]})})]})]})}function Yr(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.collecting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,collecting:l},"collecting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase()))||l.progress.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_collecting"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"collecting",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"collecting",onPaste:A,isDropdown:!0})]})]}),e.jsx(Xr,{isOpen:c,editingCollecting:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_progress")}),e.jsx(z,{children:s.get("ui_duration")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.progress}),e.jsx(k,{children:l.duration}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"collecting",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_collecting_point"),s.get("ui_delete_collecting_point_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Xt=bi,Yt=yi,tn=x.forwardRef(({className:s,align:t="center",sideOffset:i=4,...a},n)=>e.jsx(_i,{children:e.jsx(jt,{ref:n,align:t,sideOffset:i,className:E("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));tn.displayName=jt.displayName;function Qr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function el({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function jn({name:s,control:t,className:i,label:a,description:n}){const c=q(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:t}),y=Je(le(es),le(Qe,{coordinateGetter:Ye}));function S(w){const{active:C,over:g}=w;if(C.id!==g.id){const T=o.findIndex(v=>v.id===C.id),P=o.findIndex(v=>v.id===g.id);d(T,P)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"my-4",children:[e.jsx(f,{children:a}),e.jsx(I,{children:n})]}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({name:"",count:1}),className:"shrink-0",children:c.get("ui_add_item")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-48 overflow-x-hidden",children:e.jsx(Ue,{sensors:y,collisionDetection:Be,onDragEnd:S,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:c.get("ui_item_name")}),e.jsx(z,{children:c.get("ui_count")}),e.jsx(z,{className:"w-24 text-center",children:c.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:o.map(w=>w.id),strategy:We,children:o.map((w,C)=>e.jsxs(Qr,{id:w.id,children:[e.jsx(el,{id:w.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.name`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,placeholder:c.get("ui_item_name_placeholder")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.count`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,type:"number",placeholder:c.get("ui_count")})})})})}),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>N(C),children:e.jsx(ns,{className:"h-4 w-4"})})})]},w.id))})})]})})})})})]})}const sl=Z({blueprint:H().optional(),duration:M,progress:H().min(1).catch("Crafting..."),requiredItems:qe(Z({name:H().min(1),count:M})).transform(s=>s.filter(t=>t.name!==""&&t.count>0)),giveItems:qe(Z({name:H().min(1),count:M})).transform(s=>s.filter(t=>t.name!==""&&t.count>0))}),nl=qe(sl);function tl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function al({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function il({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ss({name:s,control:t}),N=Je(le(es),le(Qe,{coordinateGetter:Ye}));function d(y){const{active:S,over:w}=y;if(S.id!==w.id){const C=n.findIndex(T=>T.id===S.id),g=n.findIndex(T=>T.id===w.id);r(C,g)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_crafting_entries")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>c({label:"",blueprint:"",duration:1e4,progress:a.get("ui_crafting_progress"),requiredItems:[{name:"",count:1}],giveItems:[{name:"",count:1}]}),className:"shrink-0",children:a.get("ui_add_crafting_entry")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:N,collisionDetection:Be,onDragEnd:d,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:a.get("ui_duration")}),e.jsx(z,{children:a.get("ui_progress")}),e.jsx(z,{children:a.get("ui_required_blueprint")}),e.jsx(z,{className:"w-36 text-center",children:a.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:n.map(y=>y.id),strategy:We,children:n.map((y,S)=>e.jsxs(tl,{id:y.id,children:[e.jsx(al,{id:y.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.duration`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,type:"number",placeholder:"Duration"})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.progress`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,placeholder:"Progress"})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${S}.blueprint`,control:t,render:({field:w})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...w,placeholder:"Blueprint"})})})})}),e.jsxs(k,{className:"flex justify-center gap-1",children:[e.jsxs(Xt,{children:[e.jsx(Yt,{asChild:!0,children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ni,{className:"h-4 w-4"})})}),e.jsx(tn,{className:"w-[32rem] h-[25rem] rounded-xl",side:"left",children:e.jsxs(Re,{defaultValue:"requiredItems",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"requiredItems",children:a.get("ui_required_items")}),e.jsx(J,{value:"giveItems",children:a.get("ui_give_items")})]}),e.jsx(U,{value:"requiredItems",children:e.jsx(jn,{name:`${s}.${S}.requiredItems`,control:t,label:a.get("ui_required_items"),description:a.get("ui_required_items_description")})}),e.jsx(U,{value:"giveItems",children:e.jsx(jn,{name:`${s}.${S}.giveItems`,control:t,label:a.get("ui_give_items"),description:a.get("ui_give_items_description")})})]})})]}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>o(S),children:e.jsx(ns,{className:"h-4 w-4"})})]})]},y.id))})})]})})})})})]})}const rl=Z({label:H().min(1,"ui_error_required"),grade:M,icon:H().min(1,"ui_error_required"),radius:M,entries:nl,animation:Ts.optional(),animationProp:Is.optional(),target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),pn={icon:"screwdriver-wrench",radius:1.25,grade:0,entries:[{blueprint:"",duration:1e4,progress:"Crafting...",requiredItems:[],giveItems:[]}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function ll({isOpen:s,setIsOpen:t,editingCrafting:i,onSubmit:a}){const n=q(),c=ue({resolver:me(rl),defaultValues:i||pn});x.useEffect(()=>{c.reset(i||pn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_crafting_point")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_crafting_point"):n.get("ui_add_crafting_point")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"recipes",children:n.get("ui_recipes")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:"Crafting"})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_grade")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"recipes",className:"space-y-4 shrink-0 py-4",children:e.jsx(il,{name:"entries",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx($s,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_crafting_point")})]})})]})]})}function cl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.crafting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,crafting:l},"crafting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_crafting"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"crafting",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"crafting",onPaste:A,isDropdown:!0})]})]}),e.jsx(ll,{isOpen:c,editingCrafting:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_grade")}),e.jsx(z,{children:s.get("ui_icon")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.grade||0}),e.jsx(k,{children:l.icon}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"crafting",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_crafting_point"),s.get("ui_delete_crafting_point_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Qt=x.forwardRef(({className:s,...t},i)=>e.jsx("textarea",{className:E("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:i,...t}));Qt.displayName="Textarea";function ol({value:s,onChange:t,placeholder:i,rows:a=5}){const n=q(),[c,o]=x.useState(""),[r,N]=x.useState(null),[d,y]=x.useState(!1),S=x.useRef(null);x.useEffect(()=>{d||o(JSON.stringify(s,null,2))},[s,d]);const w=T=>{const P=T.target.value;o(P);try{const v=JSON.parse(P);N(null),t(v)}catch{N(n.get("ui_invalid_json"))}},C=()=>{y(!0)},g=()=>{y(!1),S.current&&(S.current.value=JSON.stringify(JSON.parse(c),null,2))};return e.jsx("div",{className:"space-y-2",children:e.jsx(Qt,{id:"json-input",ref:S,value:c,onChange:w,onFocus:C,onBlur:g,placeholder:i||n.get("ui_enter_json"),rows:a,className:r?"border-red-500":""})})}function dl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function xl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function hl({name:s,control:t,className:i,showPrice:a}){const n=q(),{fields:c,append:o,remove:r,move:N,update:d}=ss({name:s,control:t}),y=Je(le(es),le(Qe,{coordinateGetter:Ye}));function S(w){const{active:C,over:g}=w;if(C.id!==g.id){const T=c.findIndex(v=>v.id===C.id),P=c.findIndex(v=>v.id===g.id);N(T,P)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:n.get("ui_vehicles")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>o({model:"",label:"",price:0,grade:0,props:{}}),className:"shrink-0",children:n.get("ui_add_vehicle")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:y,collisionDetection:Be,onDragEnd:S,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:n.get("ui_model")}),e.jsx(z,{children:n.get("ui_label")}),a&&e.jsx(z,{children:n.get("ui_price")}),e.jsx(z,{children:n.get("ui_grade")}),e.jsx(z,{className:"w-32 text-center",children:n.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:c.map(w=>w.id),strategy:We,children:c.map((w,C)=>e.jsxs(dl,{id:w.id,children:[e.jsx(xl,{id:w.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.model`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,placeholder:n.get("ui_model")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.label`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,placeholder:n.get("ui_label")})})})})}),a&&e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.price`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,type:"number",placeholder:n.get("ui_price")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.grade`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,type:"number",placeholder:n.get("ui_grade")})})})})}),e.jsxs(k,{className:"flex justify-center space-x-2",children:[e.jsxs(Xt,{children:[e.jsx(Yt,{asChild:!0,children:e.jsx(_,{type:"button",variant:"outline",size:"icon",children:e.jsx(vi,{className:"h-4 w-4"})})}),e.jsx(tn,{className:"w-80",side:"left",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Vehicle Properties - JSON"}),e.jsx(p,{name:`${s}.${C}.props`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(ol,{placeholder:n.get("ui_enter_json_for_vehicle_props"),value:g.value,onChange:g.onChange,rows:10})})})})]})})]}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>r(C),children:e.jsx(ns,{className:"h-4 w-4"})})]})]},w.id))})})]})})})})})]})}function ul({id:s,children:t}){const{attributes:i,listeners:a,setNodeRef:n,transform:c,transition:o}=ce({id:s}),r={transform:Ke.Transform.toString(c),transition:o};return e.jsx("div",{ref:n,style:r,children:t})}function ml({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx("div",{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move shrink-0"})})}function jl({name:s,control:t,className:i}){const a=q(),{setValue:n,watch:c}=us(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:t}),y=Cs(),S=Je(le(es),le(Qe,{coordinateGetter:Ye})),w=c("target"),C=c("ped"),g=c("prop"),T=async(v,A)=>{y.setVisible(!1);const R=await _e("getCoordsInput",A==="spawnCoords"?{target:!1,forceDisableTarget:!0}:{target:w,ped:C,prop:g},{x:0,y:0,z:0,w:0},500);y.setVisible(!0),n(`${s}.${v}.${A}`,R)};function P(v){const{active:A,over:R}=v;if(A.id!==R.id){const O=o.findIndex($=>$.id===A.id),G=o.findIndex($=>$.id===R.id);d(O,G)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_garage_locations")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}}),className:"shrink-0",children:a.get("ui_add_garage_location")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 pr-2",children:e.jsx(Ue,{sensors:S,collisionDetection:Be,onDragEnd:P,modifiers:[He,Ge],children:e.jsx(Ze,{items:o.map(v=>v.id),strategy:We,children:o.map((v,A)=>e.jsx(ul,{id:v.id,children:e.jsxs("div",{className:"flex items-center space-x-2 p-2 border-b",children:[e.jsx(ml,{id:v.id}),e.jsxs("div",{className:"flex-grow space-y-2 px-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(f,{className:"w-20 flex items-center",children:[a.get("ui_coords"),":"]}),e.jsx("div",{className:"flex-grow grid grid-cols-4 gap-2",children:["x","y","z","w"].map(R=>e.jsx(p,{name:`${s}.${A}.coords.${R}`,control:t,render:({field:O})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...O,type:"number",placeholder:R.toUpperCase(),step:"0.01",className:"w-full"})})})},`coords.${R}`))}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(A,"coords"),children:e.jsx(ks,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(f,{className:"w-20 flex items-center",children:[a.get("ui_spawn_coords"),":"]}),e.jsx("div",{className:"flex-grow grid grid-cols-4 gap-2",children:["x","y","z","w"].map(R=>e.jsx(p,{name:`${s}.${A}.spawnCoords.${R}`,control:t,render:({field:O})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...O,type:"number",placeholder:R.toUpperCase(),step:"0.01",className:"w-full"})})})},`spawnCoords.${R}`))}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(A,"spawnCoords"),children:e.jsx(ks,{className:"h-4 w-4"})})]})]}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(A),children:e.jsx(ns,{className:"h-4 w-4"})})]})},v.id))})})})})})]})}const pl=Z({model:js([ws.number(),H()]),label:H().optional(),price:M,grade:M.catch(0),props:wi(Ci()).optional()}),gl=Z({coords:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0),w:M.catch(0)}),spawnCoords:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0),w:M.catch(0)})}),fl=Z({label:H().min(1,"ui_error_required"),vehicleType:H().min(1,"ui_error_required"),type:ki(["normal","buy","temporary"]),shared:B().optional(),vehicles:qe(pl).transform(s=>s.filter(t=>t.model!==""&&t.model!==0)).optional(),radius:ws.number().min(0,"ui_error_positive").optional(),saveRadius:M,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:qe(gl)}),gn={icon:"warehouse",vehicleType:"car",type:"buy",shared:!1,radius:1.25,saveRadius:3,locations:[{coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}}],vehicles:[],prop:[],ped:[]};function _l({isOpen:s,setIsOpen:t,editingGarage:i,onSubmit:a}){const n=q(),c=ue({resolver:me(fl),defaultValues:i||gn});x.useEffect(()=>{c.reset(i||gn)},[i]);function o(d){a(d),t(!1)}const r=c.watch("locations");if(r)for(let d=0;d<r.length;d++)Array.isArray(r[d])&&c.setValue(`locations.${d}`,{coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}});const N=c.watch("vehicles");if(N)for(let d=0;d<N.length;d++)Array.isArray(N[d].props)&&c.setValue(`vehicles.${d}.props`,{});return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_garage")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_garage"):n.get("ui_add_garage")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-5",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"vehicles",children:n.get("ui_vehicles")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_label")}),e.jsx(j,{children:e.jsx(b,{...d})}),e.jsx(I,{children:n.get("ui_label_garage_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"vehicleType",render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_vehicle_type")}),e.jsx(j,{children:e.jsx(b,{...d})}),e.jsx(I,{children:n.get("ui_vehicle_type_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"type",render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_type")}),e.jsxs(Us,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(j,{children:e.jsx(Ss,{children:e.jsx(Bs,{placeholder:"Select a garage type"})})}),e.jsxs(zs,{children:[e.jsx(Fe,{value:"normal",children:"Normal"}),e.jsx(Fe,{value:"buy",children:"Buy"}),e.jsx(Fe,{value:"temporary",children:"Temporary"})]})]}),e.jsx(I,{children:n.get("ui_type_garage_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...d})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(p,{control:c.control,name:"saveRadius",render:({field:d})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_save_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",...d})}),e.jsx(I,{children:n.get("ui_save_radius_description")}),e.jsx(D,{})]})})}),c.watch("type")!=="temporary"&&e.jsx(p,{control:c.control,name:"shared",render:({field:d})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:d.value,onCheckedChange:d.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_shared")}),e.jsx(I,{children:n.get("ui_shared_garage_description")})]})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"vehicles",className:"space-y-4 shrink-0 py-4",children:e.jsx(hl,{name:"vehicles",control:c.control,showPrice:c.watch("type")==="buy"})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(jl,{name:"locations",control:c.control})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_garage")})]})})]})]})}function bl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.garages)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,garages:l},"garages")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>l.label.toLowerCase().includes(g.toLowerCase())||l.vehicleType.toLowerCase().includes(g.toLowerCase())),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_garages"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"garage",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"garage",onPaste:A,isDropdown:!0})]})]}),e.jsx(_l,{isOpen:c,editingGarage:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_vehicle_type")}),e.jsx(z,{children:s.get("ui_type")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.vehicleType}),e.jsx(k,{children:l.type}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"garage",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_garage"),s.get("ui_delete_garage_confirm"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const yl=Z({name:H().min(1),price:Z({min:M.catch(1),max:M.catch(1)}),currency:H().min(1).catch("money")}),Nl=qe(yl);function vl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function wl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function Cl({name:s,control:t,className:i,isRandom:a=!1}){const n=q(),{fields:c,append:o,remove:r,move:N}=ss({name:s,control:t}),d=Je(le(es),le(Qe,{coordinateGetter:Ye}));function y(w){const{active:C,over:g}=w;if(C.id!==g.id){const T=c.findIndex(v=>v.id===C.id),P=c.findIndex(v=>v.id===g.id);N(T,P)}}function S(w){r(w)}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:n.get("ui_sell_items")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>o({name:"",price:{min:1,max:1},currency:"",icon:""}),className:"shrink-0",children:n.get("ui_add_sell_item")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:d,collisionDetection:Be,onDragEnd:y,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:n.get("ui_item_name")}),e.jsx(z,{children:n.get("ui_min_price")}),e.jsx(z,{children:n.get("ui_max_price")}),e.jsx(z,{children:n.get("ui_currency")}),e.jsx(z,{className:"w-24 text-center",children:n.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:c.map(w=>w.id),strategy:We,children:c.map((w,C)=>e.jsxs(vl,{id:w.id,children:[e.jsx(wl,{id:w.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.name`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,placeholder:n.get("ui_item_name")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.price.min`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,type:"number",placeholder:n.get("ui_min_price")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.price.max`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,type:"number",placeholder:n.get("ui_max_price")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${C}.currency`,control:t,render:({field:g})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...g,placeholder:n.get("ui_currency")})})})})}),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>S(C),children:e.jsx(ns,{className:"h-4 w-4"})})})]},w.id))})})]})})})})})]})}const kl=Z({label:H().min(1,"ui_error_required"),progress:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:M,grade:M,animation:Ts.optional(),animationProp:Is.optional(),duration:M,sellAtOnce:B(),items:Nl,employeePercentage:M,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),fn={duration:2e3,radius:1.25,grade:0,icon:"dollar-sign",sellAtOnce:!1,items:[{name:"",price:{min:1,max:1},currency:"money"}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Sl({isOpen:s,setIsOpen:t,editingSelling:i,onSubmit:a}){const n=q(),c=ue({resolver:me(kl),defaultValues:i||fn});x.useEffect(()=>{c.reset(i||fn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_selling_point")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_selling_point"):n.get("ui_add_selling_point")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_sell")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_progress_text")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_selling_progress")})}),e.jsx(I,{children:n.get("ui_progress_text_selling")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_duration")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_grade")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(D,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(p,{control:c.control,name:"employeePercentage",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_employee_percentage")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_employee_percentage_description")}),e.jsx(D,{})]})})}),e.jsx(p,{control:c.control,name:"sellAtOnce",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_sell_at_once")}),e.jsx(I,{children:n.get("ui_sell_at_once_description")})]})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Cl,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx($s,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_selling_point")})]})})]})]})}function zl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.selling)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,selling:l},"selling")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase()))||l.progress.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_selling_points"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"selling",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"selling",onPaste:A,isDropdown:!0})]})]}),e.jsx(Sl,{isOpen:c,editingSelling:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_progress")}),e.jsx(z,{children:s.get("ui_duration")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.progress}),e.jsx(k,{children:l.duration}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"selling",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_selling_point"),s.get("ui_delete_selling_point_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Tl=Z({label:H().min(1),name:H().optional(),grade:M,shared:B().optional(),icon:H().optional(),slots:M,maxWeight:M,global:B().optional(),radius:M,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),_n={label:"",icon:"boxes",shared:!1,radius:1.25,slots:90,maxWeight:12e4,locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Il({isOpen:s,setIsOpen:t,editingStash:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Tl),defaultValues:i||_n});x.useEffect(()=>{c.reset(i||_n)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_stash")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_stash"):n.get("ui_add_stash")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_stash")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"name",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_name")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_stash_name_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"slots",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_slots")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_slots_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"maxWeight",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_max_weight")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_max_weight_description")}),e.jsx(D,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(p,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_grade")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(D,{})]})})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(p,{control:c.control,name:"shared",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 w-1/2",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_shared")}),e.jsx(I,{children:n.get("ui_shared_stash_description")})]})]})}),e.jsx(p,{control:c.control,name:"global",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 w-1/2",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_stash_description")})]})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_stash")})]})})]})]})}function $l(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.stashes)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,stashes:l},"stashes")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},200),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return l.label.toLowerCase().includes(g.toLowerCase())||((u=l.name)==null?void 0:u.toLowerCase().includes(g.toLowerCase()))}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_stashes"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"stash",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"stash",onPaste:A,isDropdown:!0})]})]}),e.jsx(Il,{isOpen:c,editingStash:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_name")}),e.jsx(z,{children:s.get("ui_slots")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.name||`${t.name}_stash_${u}`}),e.jsx(k,{children:l.slots}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"stash",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_stash"),s.get("ui_delete_stash_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Pl=Z({from:Z({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),target:Z({x:Ce(),y:Ce(),z:Ce()}),coords:Z({x:Ce(),y:Ce(),z:Ce(),w:Ce()})}),to:Z({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),target:Z({x:Ce(),y:Ce(),z:Ce()}),coords:Z({x:Ce(),y:Ce(),z:Ce(),w:Ce()})}),disableAnim:B().optional(),routingBucket:M,radius:M,grade:M,target:B().optional()}),Al={radius:1.25,grade:0,from:{label:"Go inside",icon:"door-open",target:{x:0,y:0,z:0},coords:{x:0,y:0,z:0,w:0}},to:{label:"Go outside",icon:"door-closed",target:{x:0,y:0,z:0},coords:{x:0,y:0,z:0,w:0}}};function Dl({isOpen:s,setIsOpen:t,editingTeleport:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Pl),defaultValues:i||Al});x.useEffect(()=>{i&&c.reset(i)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_teleport")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_teleport"):n.get("ui_add_teleport")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"routingBucket",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_routing_bucket")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_routing_bucket_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_grade")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(D,{})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(p,{control:c.control,name:"disableAnim",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_disable_animation")}),e.jsx(I,{children:n.get("ui_disable_animation_description")})]})]})}),e.jsxs("div",{className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"from.label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_from_label")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_from_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"from.icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_from_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_from_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_s,{name:"from.target",label:n.get("ui_target_point"),className:"w-1/2"}),e.jsx(_s,{name:"from.coords",label:n.get("ui_coords_point"),is4D:!0,forceDisableTarget:!0,className:"w-1/2"})]})]}),e.jsxs("div",{className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"to.label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_to_label")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_to_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"to.icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_to_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_to_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_s,{name:"to.target",label:n.get("ui_target_point"),className:"w-1/2"}),e.jsx(_s,{name:"to.coords",label:n.get("ui_coords_point"),is4D:!0,forceDisableTarget:!0,className:"w-1/2"})]})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_teleport")})]})})]})]})}function Ml(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.teleports)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,teleports:l},"teleports")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u,h;return((u=l.from.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase()))||((h=l.to.label)==null?void 0:h.toLowerCase().includes(g.toLowerCase()))}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_teleports"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"teleport",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"teleport",onPaste:A,isDropdown:!0})]})]}),e.jsx(Dl,{isOpen:c,editingTeleport:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_from")}),e.jsx(z,{children:s.get("ui_to")}),e.jsx(z,{children:s.get("ui_radius")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.from.label}),e.jsx(k,{children:l.to.label}),e.jsx(k,{children:l.radius}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"teleport",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_teleport"),s.get("ui_delete_teleport_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const El=Z({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:M,target:B().optional(),soundDistance:ds,prop:ts.optional(),ped:is.optional(),locations:ls}),bn={label:"",icon:"music",radius:1.25,soundDistance:20,prop:[],ped:[],locations:[{x:0,y:0,z:0,w:0}]};function Ol({isOpen:s,setIsOpen:t,editingMusicPlayer:i,onSubmit:a}){const n=q(),c=ue({resolver:me(El),defaultValues:i||bn});x.useEffect(()=>{c.reset(i||bn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_music_player")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_music_player"):n.get("ui_add_music_player")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_play_music")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"soundDistance",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_sound_distance")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_sound_distance_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_music_player")})]})})]})]})}function Rl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.musicPlayers)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,musicPlayers:l},"musicPlayers")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_music_players"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"musicPlayer",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"musicPlayer",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ol,{isOpen:c,editingMusicPlayer:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_icon")}),e.jsx(z,{children:s.get("ui_sound_distance")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.icon}),e.jsx(k,{children:l.soundDistance}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"musicPlayer",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_music_player"),s.get("ui_delete_music_player_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Vl=Z({label:H().min(1),icon:H().min(1),target:B().optional(),global:B().optional(),radius:M,cooldown:M,prop:ts.optional(),ped:is.optional(),locations:ls}),yn={label:"",icon:"bell",cooldown:3e4,radius:1.25,locations:[{x:0,y:0,z:0,w:0}],global:!0,prop:[],ped:[]};function Ll({isOpen:s,setIsOpen:t,editingAlarm:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Vl),defaultValues:i||yn});x.useEffect(()=>{c.reset(i||yn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_alarm")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_alarm"):n.get("ui_add_alarm")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_alert_police")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"cooldown",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_cooldown")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_cooldown_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")}),e.jsx(p,{control:c.control,name:"global",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_alarm")})]})]})})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_alarm")})]})})]})]})}function Fl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.alarms)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,alarms:l},"alarms")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_alarms"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"alarm",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"alarm",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ll,{isOpen:c,editingAlarm:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_global")}),e.jsx(z,{children:s.get("ui_cooldown")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.global?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:l.cooldown}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsx(se,{getContent:()=>l,contentType:"alarm",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_alarm"),s.get("ui_delete_alarm_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const ql=Z({employeePercentage:M,radius:M,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),Nn={employeePercentage:10,radius:1.25,icon:"cash-register",prop:[],ped:[],locations:[{x:0,y:0,z:0,w:0}]};function Jl({isOpen:s,setIsOpen:t,editingRegister:i,onSubmit:a}){const n=q(),c=ue({resolver:me(ql),defaultValues:i||Nn});x.useEffect(()=>{c.reset(i||Nn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_register")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_register"):n.get("ui_add_register")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"employeePercentage",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_employee_percentage")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_employee_percentage_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_register")})]})})]})]})}function Ul(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.registers)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,registers:l},"registers")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>l.employeePercentage.toString().includes(g.toLowerCase())),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_registers"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"register",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"register",onPaste:A,isDropdown:!0})]})]}),e.jsx(Jl,{isOpen:c,editingRegister:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_employee_percentage")}),e.jsx(z,{children:s.get("ui_radius")}),e.jsx(z,{children:s.get("ui_target")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.employeePercentage}),e.jsx(k,{children:l.radius}),e.jsx(k,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"register",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_register"),s.get("ui_delete_register_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const Bl=Z({label:H().min(1,"ui_error_required"),stop:H().optional(),icon:H().min(1,"ui_error_required"),radius:M,target:B().optional(),duration:ds,progress:H().optional(),notify:H().optional(),animation:Ts,animationProp:Is.optional(),checkOccupied:B(),move:B().optional(),back:B().optional(),disableFreeze:B().optional(),global:B(),offset:Z({x:Ce().catch(0),y:Ce().catch(0),z:Ce().catch(0)}).catch({x:0,y:0,z:0}),locations:ls}).refine(s=>s.duration===void 0&&s.stop&&s.stop.length>0||s.duration!==void 0&&(!s.stop||s.stop.length===0),{message:"ui_error_duration_or_stop",path:["stop"]}),vn={label:"",icon:"",stop:"",progress:"",notify:"",radius:1.25,checkOccupied:!1,global:!1,animation:{clip:""},locations:[{x:0,y:0,z:0,w:0}],offset:{x:0,y:0,z:0}};function Hl({isOpen:s,setIsOpen:t,editingAnimationZone:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Bl),defaultValues:i||vn});x.useEffect(()=>{c.reset(i||vn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_animation_zone")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_animation_zone"):n.get("ui_add_animation_zone")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"advanced",children:n.get("ui_advanced")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"stop",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_stop_text")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_stop_text_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_duration")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_progress_text")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"notify",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_notify_text")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_notify_text_description")}),e.jsx(D,{})]})}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx($s,{name:"animation",disableNone:!0})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})}),e.jsxs(U,{value:"advanced",className:"space-y-4 shrink-0 py-4",children:[e.jsx(p,{control:c.control,name:"checkOccupied",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_check_occupied")}),e.jsx(I,{children:n.get("ui_check_occupied_description")})]})]})}),e.jsx(p,{control:c.control,name:"move",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_move")}),e.jsx(I,{children:n.get("ui_move_description")})]})]})}),e.jsx(p,{control:c.control,name:"back",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_back")}),e.jsx(I,{children:n.get("ui_back_description")})]})]})}),e.jsx(p,{control:c.control,name:"disableFreeze",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_disable_freeze")}),e.jsx(I,{children:n.get("ui_disable_freeze_description")})]})]})}),e.jsx(p,{control:c.control,name:"global",render:({field:r})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_animation_zone")})]})]})}),e.jsx(_s,{name:"offset",label:n.get("ui_offset"),disableButton:!0})]})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_animation_zone")})]})})]})]})}function Gl(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.animationZones)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,animationZones:l},"animationZones")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>l.label.toLowerCase().includes(g.toLowerCase())||l.icon.toLowerCase().includes(g.toLowerCase())),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_animation_zones"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"animationZone",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"animationZone",onPaste:A,isDropdown:!0})]})]}),e.jsx(Hl,{isOpen:c,editingAnimationZone:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_icon")}),e.jsx(z,{children:s.get("ui_duration")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.icon}),e.jsx(k,{children:l.duration||s.get("ui_infinite")}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"animationZone",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_animation_zone"),s.get("ui_delete_animation_zone_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}function Zl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=ce({id:s}),c={transform:Ke.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Wl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx(k,{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move"})})}function Kl({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ss({name:s,control:t}),N=Je(le(es),le(Qe,{coordinateGetter:Ye}));function d(S){const{active:w,over:C}=S;if(w.id!==C.id){const g=n.findIndex(P=>P.id===w.id),T=n.findIndex(P=>P.id===C.id);r(g,T)}}function y(S){o(S)}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_shop_items")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>c({name:"",price:0,currency:"",icon:"",grade:0}),className:"shrink-0",children:a.get("ui_add_shop_item")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 overflow-x-hidden",children:e.jsx(Ue,{sensors:N,collisionDetection:Be,onDragEnd:d,modifiers:[He,Ge],children:e.jsxs(te,{className:"table-fixed h-full",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{className:"w-10"}),e.jsx(z,{children:a.get("ui_item_name")}),e.jsx(z,{children:a.get("ui_price")}),e.jsx(z,{children:a.get("ui_currency")}),e.jsx(z,{children:a.get("ui_grade")}),e.jsx(z,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(ie,{children:e.jsx(Ze,{items:n.map(S=>S.id),strategy:We,children:n.map((S,w)=>e.jsxs(Zl,{id:S.id,children:[e.jsx(Wl,{id:S.id}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${w}.name`,control:t,render:({field:C})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...C,placeholder:a.get("ui_item_name")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${w}.price`,control:t,render:({field:C})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...C,type:"number",placeholder:a.get("ui_price")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${w}.currency`,control:t,render:({field:C})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...C,placeholder:a.get("ui_currency")})})})})}),e.jsx(k,{children:e.jsx(p,{name:`${s}.${w}.grade`,control:t,render:({field:C})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...C,type:"number",placeholder:a.get("ui_grade")})})})})}),e.jsx(k,{className:"flex justify-center",children:e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>y(w),children:e.jsx(ns,{className:"h-4 w-4"})})})]},S.id))})})]})})})})})]})}const Xl=Z({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),grade:M,items:qe(Z({name:H(),price:M,currency:H().min(1).catch("money"),grade:M})).transform(s=>s.filter(t=>t.name.trim()!=="")),radius:M,target:B().optional(),prop:ts.optional(),ped:is.optional(),locations:ls}),wn={icon:"basket-shopping",grade:0,items:[{name:"",price:1,currency:"",grade:0}],radius:1.25,locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Yl({isOpen:s,setIsOpen:t,editingShop:i,onSubmit:a}){const n=q(),c=ue({resolver:me(Xl),defaultValues:i||wn});x.useEffect(()=>{c.reset(i||wn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_shop")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_shop"):n.get("ui_add_shop")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-5",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_ped")}),e.jsx(J,{value:"prop",children:n.get("ui_prop")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_shop")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_grade")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kl,{name:"items",control:c.control})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(rs,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(as,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(cs,{name:"locations"})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_shop")})]})})]})]})}function Ql(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.shops)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,shops:l},"shops")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_shops"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"shop",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"shop",onPaste:A,isDropdown:!0})]})]}),e.jsx(Yl,{isOpen:c,editingShop:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_icon")}),e.jsx(z,{children:s.get("ui_grade")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.icon}),e.jsx(k,{children:l.grade}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"shop",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_shop"),s.get("ui_delete_shop_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const ec=Z({globalWebhook:H().url("ui_error_url").or(ms("")),settings:Z({alarms:B().optional(),collecting:B().optional(),crafting:B().optional(),vehicleBought:B().optional(),registers:B().optional(),selling:B().optional(),shops:B().optional(),stashes:B().optional()})});function sc(){const s=q(),t=sn(),i=ue({resolver:me(ec),defaultValues:{globalWebhook:t.globalWebhook||"",settings:{alarms:t.settings.alarms,collecting:t.settings.collecting,crafting:t.settings.crafting,vehicleBought:t.settings.vehicleBought,registers:t.settings.registers,selling:t.settings.selling,shops:t.settings.shops,stashes:t.settings.stashes}}}),a=async o=>{t.set(o),i.reset(o),fe.success(s.get("ui_webhook_configuration_saved"))},{isDirty:n,isSubmitting:c}=i.formState;return e.jsx(pe,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_webhook_configuration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_webhook_configuration_description")})]}),e.jsx(p,{control:i.control,name:"globalWebhook",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_global_webhook")}),e.jsx(j,{children:e.jsx(b,{placeholder:"https://discord.com/api/webhooks/...",...o})}),e.jsx(I,{children:s.get("ui_global_webhook_description")}),e.jsx(D,{})]})}),e.jsxs("div",{children:[e.jsx(f,{className:"text-s",children:s.get("ui_job_webhooks")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_job_webhooks_description")})]}),e.jsx(vs,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_logging_configuration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_logging_configuration_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{control:i.control,name:"settings.alarms",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_alarms")})]})}),e.jsx(p,{control:i.control,name:"settings.collecting",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_collecting")})]})}),e.jsx(p,{control:i.control,name:"settings.crafting",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_crafting")})]})}),e.jsx(p,{control:i.control,name:"settings.vehicleBought",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_vehicle_bought")})]})}),e.jsx(p,{control:i.control,name:"settings.registers",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_registers")})]})}),e.jsx(p,{control:i.control,name:"settings.selling",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_selling")})]})}),e.jsx(p,{control:i.control,name:"settings.shops",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_shops")})]})}),e.jsx(p,{control:i.control,name:"settings.stashes",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(f,{className:"font-normal",children:s.get("ui_stashes")})]})})]}),e.jsxs(_,{type:"submit",disabled:!n||c,children:[c&&e.jsx(Os,{className:"mr-2 h-4 w-4 animate-spin"}),s.get("ui_save_changes")]})]})})}const Ns=js([B(),nn]),nc=Z({interactDistance:M,impoundPrice:M,handcuffItems:B(),handcuffsItemName:H().optional(),ziptiesItemName:H().optional(),handcuffsSkillCheck:B(),sprintWhileDrag:B(),actionsMenu:B(),radialMenu:B(),disableTargetInteractions:B(),tackleRadius:M,tackleCooldown:M,playerActions:Z({steal:B(),handcuff:js([ms("both"),ms("handcuffs"),ms("zipties"),B()]),drag:B(),carry:B(),bill:B(),revive:Ns,heal:Ns}),vehicleActions:Z({putInsideVehicle:B(),takeOutOfVehicle:B(),hijack:Ns,repair:Ns,clean:Ns,impound:Ns}),durations:Z({steal:M,revive:M,heal:M,hijack:M,repair:M,clean:M,impound:M})}).refine(s=>s.handcuffItems&&(!s.handcuffsItemName||!s.ziptiesItemName)?{handcuffsItemName:"handcuffs",ziptiesItemName:"zipties"}:!0,{message:"Handcuffs item name is required if handcuff items are enabled",path:["handcuffsItemName"]});function tc(){const s=q(),{settings:t,setSettings:i}=kt(),a=ue({resolver:me(nc),defaultValues:t}),n=Object.keys(a.formState.dirtyFields).length>0,c=o=>{i(o),_e("updateSettings",o),a.reset(o),fe.success(s.get("ui_settings_saved"))};return e.jsx(pe,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(c),className:"space-y-8 overflow-y-scroll h-full pr-4 pl-2 -ml-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_settings")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_settings_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{control:a.control,name:"interactDistance",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_interact_distance")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_interact_distance_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"impoundPrice",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_impound_price")}),e.jsx(j,{children:e.jsx(b,{type:"number",...o,onChange:r=>o.onChange(parseInt(r.target.value))})}),e.jsx(I,{children:s.get("ui_impound_price_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"tackleRadius",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_tackle_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_tackle_radius_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"tackleCooldown",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_tackle_cooldown")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_tackle_cooldown_description")}),e.jsx(D,{})]})}),e.jsx("div",{className:"col-span-2",children:e.jsx(be,{className:"p-4 bg-background",children:e.jsx(p,{control:a.control,name:"handcuffItems",render:({field:o})=>e.jsxs(m,{className:"space-y-3",children:[e.jsx(f,{children:s.get("ui_handcuff_items")}),e.jsx(j,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{checked:o.value,onCheckedChange:o.onChange,id:"handcuffItems"}),e.jsx("label",{htmlFor:"handcuffItems",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s.get("ui_enable_handcuff_items")})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(p,{control:a.control,name:"handcuffsItemName",disabled:!o.value,render:({field:r})=>e.jsx(m,{className:"grow",children:e.jsx(j,{children:e.jsx(b,{...r,placeholder:s.get("ui_handcuffs_item_placeholder")})})})}),e.jsx(p,{control:a.control,name:"ziptiesItemName",disabled:!o.value,render:({field:r})=>e.jsx(m,{className:"grow",children:e.jsx(j,{children:e.jsx(b,{...r,placeholder:s.get("ui_zipties_item_placeholder")})})})})]})]})}),e.jsx(I,{children:s.get("ui_handcuff_items_description")}),e.jsx(D,{})]})})})}),e.jsx(p,{control:a.control,name:"handcuffsSkillCheck",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_handcuffs_skill_check")}),e.jsx(I,{children:s.get("ui_handcuffs_skill_check_description")})]})]})}),e.jsx(p,{control:a.control,name:"sprintWhileDrag",render:({field:o})=>e.jsxs(m,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(j,{children:e.jsx(X,{checked:o.value,onCheckedChange:o.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(f,{children:s.get("ui_sprint_while_drag")}),e.jsx(I,{children:s.get("ui_sprint_while_drag_description")})]})]})})]}),e.jsx(vs,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_global_player_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_global_player_actions_description")})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(ne,{name:"playerActions.handcuff",label:s.get("ui_handcuff"),description:s.get("ui_handcuff_description"),control:a.control}),e.jsx(ne,{name:"playerActions.drag",label:s.get("ui_drag"),description:s.get("ui_drag_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.steal",label:s.get("ui_steal"),description:s.get("ui_steal_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.carry",label:s.get("ui_carry"),description:s.get("ui_carry_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.tackle",label:s.get("ui_tackle"),description:s.get("ui_tackle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.bill",label:s.get("ui_bill"),description:s.get("ui_bill_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"playerActions.revive",label:s.get("ui_revive"),description:s.get("ui_revive_description"),control:a.control}),e.jsx(ne,{name:"playerActions.heal",label:s.get("ui_heal"),description:s.get("ui_heal_description"),control:a.control})]}),e.jsx(vs,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_global_vehicle_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_global_vehicle_actions_description")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(ne,{name:"vehicleActions.putInsideVehicle",label:s.get("ui_put_inside_vehicle"),description:s.get("ui_put_inside_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"vehicleActions.takeOutOfVehicle",label:s.get("ui_take_out_of_vehicle"),description:s.get("ui_take_out_of_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(ne,{name:"vehicleActions.hijack",label:s.get("ui_hijack"),description:s.get("ui_hijack_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.repair",label:s.get("ui_repair"),description:s.get("ui_repair_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.clean",label:s.get("ui_clean"),description:s.get("ui_clean_description"),control:a.control}),e.jsx(ne,{name:"vehicleActions.impound",label:s.get("ui_impound"),description:s.get("ui_impound_description"),control:a.control})]}),e.jsx(vs,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_action_durations")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_action_durations_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(p,{control:a.control,name:"durations.steal",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_steal")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.revive",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_revive")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.heal",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_heal")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.hijack",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_hijack")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.repair",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_repair")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.clean",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_clean")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})}),e.jsx(p,{control:a.control,name:"durations.impound",render:({field:o})=>e.jsxs(m,{children:[e.jsx(f,{children:s.get("ui_impound")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:100,...o})}),e.jsx(D,{})]})})]}),e.jsx(_,{type:"submit",disabled:!n,children:s.get("ui_save_settings")})]})})}function ac(){const s=q();function t(a){const c=Date.now()-a*1e3,o=Math.floor(c/1e3),r=Math.floor(o/60),N=Math.floor(r/60),d=Math.floor(N/24),y=Math.floor(d/30),S=Math.floor(d/365);return o<60?o<=5?s.get("ui_just_now"):s.get(o===1?"ui_second_ago":"ui_seconds_ago",o):r<60?s.get(r===1?"ui_minute_ago":"ui_minutes_ago",r):N<24?s.get(N===1?"ui_hour_ago":"ui_hours_ago",N):d<30?s.get(d===1?"ui_day_ago":"ui_days_ago",d):y<12?s.get(y===1?"ui_month_ago":"ui_months_ago",y):s.get(S===1?"ui_year_ago":"ui_years_ago",S)}const{history:i}=vt();return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_history_title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_history_description")})]}),e.jsx(Ve,{className:"grow",children:e.jsxs(te,{children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_author")}),e.jsx(z,{children:s.get("ui_action")}),e.jsx(z,{children:s.get("ui_timestamp")})]})}),e.jsx(ie,{children:i.sort((a,n)=>n.timestamp-a.timestamp).map((a,n)=>e.jsxs(L,{children:[e.jsx(k,{children:a.username}),e.jsx(k,{children:a.action}),e.jsx(k,{children:t(a.timestamp)})]},n))})]})})]})}function ic(){const s=q(),[t,i]=x.useState(""),[a,n]=x.useState(!1),[c,o]=x.useState(!1),{jobs:r,addJob:N}=re();x.useEffect(()=>{c&&i("")},[c]);const d=async()=>{if(!t.trim()){fe.error(s.get("ui_please_enter_valid_code"));return}n(!0);try{const y=await fetch(`${bs.remoteUrl}/api/jobs/${t}/data`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!y.ok){fe.error(s.get("ui_invalid_import_code"));return}const{data:S}=await y.json(),w=JSON.parse(S);if(r.find(C=>C.name===w.name)){fe.error(s.get("ui_job_already_exists"));return}N(w),fe.success(s.get("ui_job_imported_successfully")),i(""),o(!1)}catch{fe.error(s.get("ui_failed_to_import_job"))}finally{n(!1)}};return e.jsxs(je,{open:c,onOpenChange:o,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(As,{className:"mr-2 w-4 h-4"}),s.get("ui_import_by_code")]})}),e.jsxs(oe,{children:[e.jsxs(de,{children:[e.jsx(xe,{children:s.get("ui_import_job")}),e.jsx(he,{children:s.get("ui_import_by_code_description")})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(b,{placeholder:s.get("ui_enter_import_code"),value:t,onChange:y=>i(y.target.value)}),e.jsxs(_,{onClick:d,disabled:a,children:[a&&e.jsx(Os,{className:"mr-2 w-4 h-4 animate-spin"}),s.get("ui_import")]})]})]})]})}const rc=Si,lc=zi,cc=Ti,ea=x.forwardRef(({className:s,sideOffset:t=4,...i},a)=>(x.useEffect(()=>{const n=document.querySelector("[data-radix-popper-content-wrapper]");n&&(n.style.position="absolute")},[]),e.jsx(pt,{ref:a,sideOffset:t,className:E("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})));ea.displayName=pt.displayName;function ps({className:s,...t}){return e.jsx("div",{className:E("animate-pulse rounded-md bg-muted",s),...t})}function oc({job:s,isOpen:t,onClose:i}){const a=q(),{jobs:n,addJob:c}=re(),[o,r]=x.useState(s),[N,d]=x.useState(!1),[y,S]=x.useState(!1);x.useEffect(()=>{if(r(s),s){async function g(){const P=await(await fetch(`${bs.remoteUrl}/api/jobs/${s._id}`)).json();r(P)}g()}},[s]);function w(g){navigator.clipboard.writeText(g),d(!0),fe.success(a.get("ui_copied")),setTimeout(()=>d(!1),1e3)}const C=async()=>{S(!0);try{const g=await fetch(`${bs.remoteUrl}/api/jobs/${s._id}/data`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!g.ok){fe.error(a.get("ui_invalid_import_code"));return}const{data:T}=await g.json(),P=JSON.parse(T);if(n.find(v=>v.name===P.name)){fe.error(a.get("ui_job_already_exists"));return}c(P),fe.success(a.get("ui_job_imported_successfully"))}catch{fe.error(a.get("ui_failed_to_import_job"))}finally{S(!1)}};return e.jsx(je,{open:t,onOpenChange:i,children:o&&e.jsxs(oe,{className:"max-w-4xl",children:[e.jsxs(de,{children:[e.jsx(xe,{className:"text-2xl",children:o.name}),e.jsx(he,{})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ii,{className:"w-5 h-5 mt-1 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:o.description&&o.description.length>0?o.description:"No description provided"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(gt,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Supported Maps"}),e.jsx("p",{className:"text-muted-foreground",children:o.requiredMaps})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ft,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Language"}),e.jsx("p",{className:"text-muted-foreground",children:o.language||"English"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(As,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Imported Count"}),e.jsx("p",{className:"text-muted-foreground",children:o.importedCount})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between border-b py-6",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs(Vs,{className:"h-10 w-10 mr-4",children:[e.jsx(Ls,{src:o.authorAvatar,alt:o.author}),e.jsx(Fs,{children:o.author.substring(0,2)})]}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold",children:o.author})})]}),e.jsxs(_,{onClick:C,children:[y?e.jsx(Os,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(As,{className:"h-4 w-4 mr-2"}),a.get("ui_import")]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:a.get("ui_job_items")}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:a.get("ui_job_items_description")}),e.jsxs(Re,{defaultValue:"esxItemsCode",className:"w-full",children:[e.jsxs(Oe,{className:"mb-4",children:[e.jsx(J,{value:"esxItemsCode",children:"ESX"}),e.jsx(J,{value:"qbcoreItemsCode",children:"QBCore"}),e.jsx(J,{value:"oxInventoryItemsCode",children:"OX Inventory"})]}),["esxItemsCode","qbcoreItemsCode","oxInventoryItemsCode"].map(g=>{const T=o[g];return e.jsx(U,{value:g,children:e.jsxs("div",{className:"relative w-[50rem] ",children:[e.jsx("pre",{className:"bg-secondary p-4 rounded-md overflow-x-auto overflow-y-scroll h-64",children:e.jsx("code",{children:T})}),e.jsx(_,{className:"absolute top-2 right-4 w-8 h-8",size:"icon",onClick:()=>w(T),children:N?e.jsx(Es,{className:"h-4 w-4"}):e.jsx(Gs,{className:"h-4 w-4"})})]})},g)})]})]})]})]})})}function dc(){const s=q(),[t,i]=x.useState([]),[a,n]=x.useState(null),[c,o]=x.useState(!1),[r,N]=x.useState(!1),[d,y]=x.useState(!0),S=x.useMemo(()=>Date.now(),[]),w=x.useRef(null),C=x.useRef(null),g=x.useCallback(async()=>{if(!(r||!d)){N(!0);try{const T=t.length,P=await fetch(`${bs.remoteUrl}/api/jobs?lastIndex=${T}&lastLoadTime=${S}&limit=9`),{jobs:v,hasMore:A}=await P.json();i([...t,...v]),y(A)}catch(T){fe.error(s.get("ui_error_fetching_jobs")),console.error("Error fetching jobs:",T)}finally{N(!1)}}},[t.length,r,d,S,s]);return x.useEffect(()=>{g()},[]),x.useEffect(()=>{if(!C.current)return;const T=()=>{C.current&&C.current.scrollTop+C.current.clientHeight>=C.current.scrollHeight/1.5&&d&&!r&&g()};return C.current.addEventListener("scroll",T),()=>{var P;return(P=C.current)==null?void 0:P.removeEventListener("scroll",T)}},[g,d,r]),e.jsxs("div",{className:"h-full flex flex-col overflow-y-hidden",children:[e.jsx(oc,{job:a,isOpen:c,onClose:()=>{o(!1),setTimeout(()=>n(null),400)}}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-lg font-bold",children:s.get("ui_community_jobs")}),e.jsx(rc,{children:e.jsxs(lc,{children:[e.jsx(cc,{children:e.jsx($i,{className:"w-4 h-4 ml-2 text-muted-foreground"})}),e.jsx(ea,{side:"right",children:e.jsx("p",{children:s.get("ui_community_jobs_tooltip")})})]})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_community_jobs_description")})]}),e.jsx(ic,{})]}),e.jsx("div",{ref:C,className:"overflow-y-scroll grow pr-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10",children:[t.map((T,P)=>e.jsxs(be,{className:"flex flex-col justify-between",ref:P===t.length-1?w:null,children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-base",children:T.name}),e.jsxs(Ds,{className:"text-sm space-y-1",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(gt,{className:"w-4 h-4 mr-2"}),T.requiredMaps]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ft,{className:"w-4 h-4 mr-2"}),T.language||"English"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(As,{className:"w-4 h-4 mr-2"}),s.get("ui_imported",T.importedCount||0)]})]})]}),e.jsx(Ne,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Vs,{className:"h-8 w-8 mr-2",children:[e.jsx(Ls,{src:T.authorAvatar,alt:T.author}),e.jsx(Fs,{children:T.author.charAt(0)})]}),e.jsx("span",{className:"text-sm",children:T.author})]}),e.jsx(_,{size:"sm",onClick:()=>{n(T),setTimeout(()=>o(!0),50)},children:s.get("ui_view")})]})})]},T._id)),r&&Array.from({length:t.length===0?9:3}).map((T,P)=>e.jsxs(be,{className:"flex flex-col justify-between",children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-base",isDiv:!0,children:e.jsx(ps,{className:"h-6 w-3/4"})}),e.jsxs(Ds,{isDiv:!0,className:"text-sm space-y-1",children:[e.jsx(ps,{className:"h-4 w-1/2"}),e.jsx(ps,{className:"h-4 w-1/4"}),e.jsx(ps,{className:"h-4 w-1/3"})]})]}),e.jsx(Ne,{children:e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ps,{className:"h-8 w-8 rounded-full mr-2"}),e.jsx(ps,{className:"h-4 w-16"})]}),e.jsx(ps,{className:"h-10 w-14"})]})})]},`skeleton-${P}`))]})})]})}function xc({id:s,children:t}){const{attributes:i,listeners:a,setNodeRef:n,transform:c,transition:o}=ce({id:s}),r={transform:Ke.Transform.toString(c),transition:o};return e.jsx("div",{ref:n,style:r,children:t})}function hc({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=ce({id:s});return e.jsx("div",{ref:a,...t,...i,children:e.jsx(Xe,{className:"h-4 w-4 cursor-move shrink-0"})})}function uc({name:s,control:t,className:i}){const a=q(),{setValue:n,watch:c}=us(),{fields:o,append:r,remove:N,move:d}=ss({name:s,control:t}),y=Cs(),S=Je(le(es),le(Qe,{coordinateGetter:Ye})),w=c("target"),C=c("ped"),g=c("prop"),T=async v=>{y.setVisible(!1);const A=await _e("getCoordsInput",{target:w,ped:C,prop:g},{x:0,y:0,z:0},500);y.setVisible(!0),n(`${s}.${v}.coords`,A)};function P(v){const{active:A,over:R}=v;if(A.id!==R.id){const O=o.findIndex($=>$.id===A.id),G=o.findIndex($=>$.id===R.id);d(O,G)}}return e.jsxs("div",{className:E("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(f,{children:a.get("ui_spawner_zone_locations")}),e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>r({coords:{x:0,y:0,z:0},radius:5,interval:300,maxSpawned:1}),className:"shrink-0",children:a.get("ui_add_spawner_zone_location")})]}),e.jsx(be,{children:e.jsx(Ne,{className:"px-0 flex flex-col",children:e.jsx(Ve,{className:"h-96 pr-2",children:e.jsx(Ue,{sensors:S,collisionDetection:Be,onDragEnd:P,modifiers:[He,Ge],children:e.jsx(Ze,{items:o.map(v=>v.id),strategy:We,children:o.map((v,A)=>e.jsx(xc,{id:v.id,children:e.jsxs("div",{className:"flex items-start space-x-2 p-2 border-b",children:[e.jsx(hc,{id:v.id}),e.jsxs("div",{className:"flex-grow space-y-4 pb-2 px-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{children:a.get("ui_coords")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-grow grid grid-cols-3 gap-2",children:["x","y","z"].map(R=>e.jsx(p,{name:`${s}.${A}.coords.${R}`,control:t,render:({field:O})=>e.jsx(m,{children:e.jsx(j,{children:e.jsx(b,{...O,type:"number",placeholder:R.toUpperCase(),step:"0.01",className:"w-full"})})})},`coords.${R}`))}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(A),children:e.jsx(ks,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(p,{name:`${s}.${A}.radius`,control:t,render:({field:R})=>e.jsxs(m,{children:[e.jsx(f,{children:a.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{...R,type:"number",step:"0.1",className:"w-full"})})]})}),e.jsx(p,{name:`${s}.${A}.interval`,control:t,render:({field:R})=>e.jsxs(m,{children:[e.jsx(f,{children:a.get("ui_interval")}),e.jsx(j,{children:e.jsx(b,{...R,type:"number",className:"w-full"})})]})}),e.jsx(p,{name:`${s}.${A}.maxSpawned`,control:t,render:({field:R})=>e.jsxs(m,{children:[e.jsx(f,{children:a.get("ui_max_spawned")}),e.jsx(j,{children:e.jsx(b,{...R,type:"number",className:"w-full"})})]})})]})]}),e.jsx(_,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(A),children:e.jsx(ns,{className:"h-4 w-4"})})]})},v.id))})})})})})]})}const mc=Z({label:H().min(1,"ui_error_required"),progress:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:M,duration:M,animation:Ts.optional(),animationProp:Is.optional(),requiredItem:H().optional(),propModel:js([ws.number().min(1),H().min(1)]).catch("prop_plant_01a"),interactionOffset:Z({x:M,y:M,z:M}),target:B().optional(),items:Wt,locations:qe(Z({coords:Z({x:M.catch(0),y:M.catch(0),z:M.catch(0)}),radius:M,interval:M,maxSpawned:M}))}),Cn={duration:5e3,radius:1.25,label:"",icon:"hand",items:[{name:"",count:{min:1,max:1}}],interactionOffset:{x:0,y:0,z:1},locations:[{coords:{x:0,y:0,z:0,w:0},radius:15,interval:6e4,maxSpawned:20}],propModel:""};function jc({isOpen:s,setIsOpen:t,editingSpawnerZone:i,onSubmit:a}){const n=q(),c=ue({resolver:me(mc),defaultValues:i||Cn});x.useEffect(()=>{c.reset(i||Cn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(je,{open:s,onOpenChange:t,children:[e.jsx(we,{asChild:!0,children:e.jsxs(_,{onClick:()=>c.reset(),children:[e.jsx(Se,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_spawner_zone")]})}),e.jsxs(oe,{className:"min-w-fit",children:[e.jsxs(de,{children:[e.jsx(xe,{children:i?n.get("ui_edit_spawner_zone"):n.get("ui_add_spawner_zone")}),e.jsx(he,{})]}),e.jsx(pe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,De),className:"h-fit py-4 w-[50rem]",children:[e.jsxs(Re,{defaultValue:"basic",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"label",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_interaction_label")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_harvest")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_progress_text")}),e.jsx(j,{children:e.jsx(b,{...r,placeholder:n.get("ui_harvesting")})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_icon")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_radius")}),e.jsx(j,{children:e.jsx(b,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(D,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(p,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_progress_duration")}),e.jsx(j,{children:e.jsx(b,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_progress_duration_description")}),e.jsx(D,{})]})}),e.jsx(p,{control:c.control,name:"requiredItem",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_required_item")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_required_item_description")}),e.jsx(D,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(p,{control:c.control,name:"propModel",render:({field:r})=>e.jsxs(m,{className:"flex-1",children:[e.jsx(f,{children:n.get("ui_prop_model")}),e.jsx(j,{children:e.jsx(b,{...r})}),e.jsx(I,{children:n.get("ui_prop_model_description")}),e.jsx(D,{})]})})}),e.jsx(_s,{name:"interactionOffset",label:n.get("ui_interaction_offset"),description:n.get("ui_interaction_offset_description"),disableButton:!0}),e.jsx(Le,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kt,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx($s,{name:"animation"})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(uc,{name:"locations",control:c.control})})]}),e.jsx(_,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_spawner_zone")})]})})]})]})}function pc(){const s=q(),t=ye(),{updateJob:i}=re(),[a,n]=x.useState((t==null?void 0:t.advancedCollecting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,y]=x.useState(1),S=6,[w,C]=x.useState(""),[g]=$e(w,100),T=Ie(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},v=l=>{i({...t,advancedCollecting:l},"advancedCollecting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),v(u)},R=l=>{if(r){const u=a.map((h,V)=>V===a.findIndex(F=>F===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),v(u)}},O=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(g.toLowerCase()))||l.progress.toLowerCase().includes(g.toLowerCase())}),[a,g]),G=x.useMemo(()=>{const l=(d-1)*S;return O.slice(l,l+S)},[O,d]),$=Math.ceil(O.length/S),K=x.useCallback(l=>{C(l.target.value),y(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{placeholder:s.get("ui_search_spawner_zones"),value:w,onChange:K,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})}),e.jsxs(Y,{align:"end",children:[e.jsx(se,{getContent:()=>a,contentType:"spawnerZones",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Ee,{contentType:"spawnerZones",onPaste:A,isDropdown:!0})]})]}),e.jsx(jc,{isOpen:c,editingSpawnerZone:r||void 0,setIsOpen:P,onSubmit:r?R:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(te,{className:"table-fixed",children:[e.jsx(ae,{children:e.jsxs(L,{children:[e.jsx(z,{children:s.get("ui_label")}),e.jsx(z,{children:s.get("ui_progress")}),e.jsx(z,{children:s.get("ui_duration")}),e.jsx(z,{children:s.get("ui_actions")})]})}),e.jsx(ie,{children:G.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(k,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Me,{searchTerm:g})})}):G.map((l,u)=>e.jsxs(L,{children:[e.jsx(k,{children:l.label}),e.jsx(k,{children:l.progress}),e.jsx(k,{children:l.duration}),e.jsx(k,{children:e.jsxs(Q,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(ze,{className:"h-4 w-4"})]})}),e.jsxs(Y,{align:"end",children:[e.jsxs(W,{onClick:()=>{N(l),o(!0)},children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(se,{getContent:()=>l,contentType:"spawnerZones",isDropdown:!0}),e.jsxs(W,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_spawner_zone"),s.get("ui_delete_spawner_zone_description"))){const h=a.filter((V,F)=>F!==u);n(h),v(h)}},children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(_,{onClick:()=>y(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array($)].map((l,u)=>{const h=u+1;return h===1||h===$||h>=d-1&&h<=d+1?e.jsx(_,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>y(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(_,{onClick:()=>y(l=>Math.min(l+1,$)),disabled:d===$||$===0,size:"icon",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})}const gc=Pi([{path:"/",element:e.jsx(Ei,{children:e.jsx(ar,{children:e.jsx(Fi,{})})}),children:[{path:"/",element:e.jsx(mr,{})},{path:"/jobs",element:e.jsx(rr,{})},{path:"/settings",element:e.jsx(tc,{})},{path:"/webhooks",element:e.jsx(sc,{})},{path:"/history",element:e.jsx(ac,{})},{path:"/community",element:e.jsx(dc,{})},{path:"/edit/:id",children:[{path:"",element:e.jsx(pr,{})},{path:"grades",element:e.jsx(yr,{})},{path:"actions",element:e.jsx(Sr,{})},{path:"blips",element:e.jsx(Ir,{})},{path:"boss-menus",element:e.jsx(qr,{})},{path:"cloakrooms",element:e.jsx(Br,{})},{path:"collecting",element:e.jsx(Yr,{})},{path:"spawner-zones",element:e.jsx(pc,{})},{path:"crafting",element:e.jsx(cl,{})},{path:"garages",element:e.jsx(bl,{})},{path:"selling",element:e.jsx(zl,{})},{path:"shops",element:e.jsx(Ql,{})},{path:"stashes",element:e.jsx($l,{})},{path:"alarms",element:e.jsx(Fl,{})},{path:"registers",element:e.jsx(Ul,{})},{path:"animation-zones",element:e.jsx(Gl,{})},{path:"music-players",element:e.jsx(Rl,{})},{path:"teleports",element:e.jsx(Ml,{})}]}]}]);Ai.createRoot(document.getElementById("root")).render(e.jsx(Xn.StrictMode,{children:e.jsx(Di,{router:gc})}));

function m7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var rfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I={exports:{}},sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=Symbol.for("react.element"),ife=Symbol.for("react.portal"),afe=Symbol.for("react.fragment"),sfe=Symbol.for("react.strict_mode"),ofe=Symbol.for("react.profiler"),lfe=Symbol.for("react.provider"),ufe=Symbol.for("react.context"),cfe=Symbol.for("react.forward_ref"),dfe=Symbol.for("react.suspense"),pfe=Symbol.for("react.memo"),hfe=Symbol.for("react.lazy"),ZB=Symbol.iterator;function ffe(e){return e===null||typeof e!="object"?null:(e=ZB&&e[ZB]||e["@@iterator"],typeof e=="function"?e:null)}var g7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y7=Object.assign,v7={};function Oy(e,t,n){this.props=e,this.context=t,this.refs=v7,this.updater=n||g7}Oy.prototype.isReactComponent={};Oy.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oy.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b7(){}b7.prototype=Oy.prototype;function vA(e,t,n){this.props=e,this.context=t,this.refs=v7,this.updater=n||g7}var bA=vA.prototype=new b7;bA.constructor=vA;y7(bA,Oy.prototype);bA.isPureReactComponent=!0;var XB=Array.isArray,w7=Object.prototype.hasOwnProperty,wA={current:null},x7={key:!0,ref:!0,__self:!0,__source:!0};function _7(e,t,n){var r,i={},a=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)w7.call(t,r)&&!x7.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:B1,type:e,key:a,ref:s,props:i,_owner:wA.current}}function mfe(e,t){return{$$typeof:B1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xA(e){return typeof e=="object"&&e!==null&&e.$$typeof===B1}function gfe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var JB=/\/+/g;function fN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gfe(""+e.key):t.toString(36)}function q_(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case B1:case ife:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+fN(s,0):r,XB(i)?(n="",e!=null&&(n=e.replace(JB,"$&/")+"/"),q_(i,t,n,"",function(u){return u})):i!=null&&(xA(i)&&(i=mfe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(JB,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",XB(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+fN(a,o);s+=q_(a,t,n,l,i)}else if(l=ffe(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+fN(a,o++),s+=q_(a,t,n,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ox(e,t,n){if(e==null)return e;var r=[],i=0;return q_(e,r,"","",function(a){return t.call(n,a,i++)}),r}function yfe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qa={current:null},K_={transition:null},vfe={ReactCurrentDispatcher:qa,ReactCurrentBatchConfig:K_,ReactCurrentOwner:wA};sn.Children={map:Ox,forEach:function(e,t,n){Ox(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ox(e,function(){t++}),t},toArray:function(e){return Ox(e,function(t){return t})||[]},only:function(e){if(!xA(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};sn.Component=Oy;sn.Fragment=afe;sn.Profiler=ofe;sn.PureComponent=vA;sn.StrictMode=sfe;sn.Suspense=dfe;sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vfe;sn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=y7({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=wA.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)w7.call(t,l)&&!x7.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:B1,type:e.type,key:i,ref:a,props:r,_owner:s}};sn.createContext=function(e){return e={$$typeof:ufe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lfe,_context:e},e.Consumer=e};sn.createElement=_7;sn.createFactory=function(e){var t=_7.bind(null,e);return t.type=e,t};sn.createRef=function(){return{current:null}};sn.forwardRef=function(e){return{$$typeof:cfe,render:e}};sn.isValidElement=xA;sn.lazy=function(e){return{$$typeof:hfe,_payload:{_status:-1,_result:e},_init:yfe}};sn.memo=function(e,t){return{$$typeof:pfe,type:e,compare:t===void 0?null:t}};sn.startTransition=function(e){var t=K_.transition;K_.transition={};try{e()}finally{K_.transition=t}};sn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};sn.useCallback=function(e,t){return qa.current.useCallback(e,t)};sn.useContext=function(e){return qa.current.useContext(e)};sn.useDebugValue=function(){};sn.useDeferredValue=function(e){return qa.current.useDeferredValue(e)};sn.useEffect=function(e,t){return qa.current.useEffect(e,t)};sn.useId=function(){return qa.current.useId()};sn.useImperativeHandle=function(e,t,n){return qa.current.useImperativeHandle(e,t,n)};sn.useInsertionEffect=function(e,t){return qa.current.useInsertionEffect(e,t)};sn.useLayoutEffect=function(e,t){return qa.current.useLayoutEffect(e,t)};sn.useMemo=function(e,t){return qa.current.useMemo(e,t)};sn.useReducer=function(e,t,n){return qa.current.useReducer(e,t,n)};sn.useRef=function(e){return qa.current.useRef(e)};sn.useState=function(e){return qa.current.useState(e)};sn.useSyncExternalStore=function(e,t,n){return qa.current.useSyncExternalStore(e,t,n)};sn.useTransition=function(){return qa.current.useTransition()};sn.version="18.2.0";(function(e){e.exports=sn})(I);const kr=yA(I.exports),Xp=m7({__proto__:null,default:kr},[I.exports]);var pO={},Kl={exports:{}},Vs={},k7={exports:{}},S7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,ee){var Y=V.length;V.push(ee);e:for(;0<Y;){var Q=Y-1>>>1,oe=V[Q];if(0<i(oe,ee))V[Q]=ee,V[Y]=oe,Y=Q;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var ee=V[0],Y=V.pop();if(Y!==ee){V[0]=Y;e:for(var Q=0,oe=V.length,pe=oe>>>1;Q<pe;){var he=2*(Q+1)-1,ge=V[he],_e=he+1,Ne=V[_e];if(0>i(ge,Y))_e<oe&&0>i(Ne,ge)?(V[Q]=Ne,V[_e]=Y,Q=_e):(V[Q]=ge,V[he]=Y,Q=he);else if(_e<oe&&0>i(Ne,Y))V[Q]=Ne,V[_e]=Y,Q=_e;else break e}}return ee}function i(V,ee){var Y=V.sortIndex-ee.sortIndex;return Y!==0?Y:V.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,d=null,p=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=V)r(u),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=n(u)}}function k(V){if(g=!1,_(V),!m)if(n(l)!==null)m=!0,Z(S);else{var ee=n(u);ee!==null&&te(k,ee.startTime-V)}}function S(V,ee){m=!1,g&&(g=!1,v(P),P=-1),h=!0;var Y=p;try{for(_(ee),d=n(l);d!==null&&(!(d.expirationTime>ee)||V&&!F());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var oe=Q(d.expirationTime<=ee);ee=e.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),_(ee)}else r(l);d=n(l)}if(d!==null)var pe=!0;else{var he=n(u);he!==null&&te(k,he.startTime-ee),pe=!1}return pe}finally{d=null,p=Y,h=!1}}var $=!1,N=null,P=-1,D=5,O=-1;function F(){return!(e.unstable_now()-O<D)}function E(){if(N!==null){var V=e.unstable_now();O=V;var ee=!0;try{ee=N(!0,V)}finally{ee?z():($=!1,N=null)}}else $=!1}var z;if(typeof b=="function")z=function(){b(E)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,K=q.port2;q.port1.onmessage=E,z=function(){K.postMessage(null)}}else z=function(){y(E,0)};function Z(V){N=V,$||($=!0,z())}function te(V,ee){P=y(function(){V(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,Z(S))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var Y=p;p=ee;try{return V()}finally{p=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,ee){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=p;p=V;try{return ee()}finally{p=Y}},e.unstable_scheduleCallback=function(V,ee,Y){var Q=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,V={id:c++,callback:ee,priorityLevel:V,startTime:Y,expirationTime:oe,sortIndex:-1},Y>Q?(V.sortIndex=Y,t(u,V),n(l)===null&&V===n(u)&&(g?(v(P),P=-1):g=!0,te(k,Y-Q))):(V.sortIndex=oe,t(l,V),m||h||(m=!0,Z(S))),V},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(V){var ee=p;return function(){var Y=p;p=ee;try{return V.apply(this,arguments)}finally{p=Y}}}})(S7);(function(e){e.exports=S7})(k7);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C7=I.exports,Ls=k7.exports;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I7=new Set,jb={};function Oh(e,t){Wg(e,t),Wg(e+"Capture",t)}function Wg(e,t){for(jb[e]=t,e=0;e<t.length;e++)I7.add(t[e])}var Nu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hO=Object.prototype.hasOwnProperty,bfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YB={},QB={};function wfe(e){return hO.call(QB,e)?!0:hO.call(YB,e)?!1:bfe.test(e)?QB[e]=!0:(YB[e]=!0,!1)}function xfe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _fe(e,t,n,r){if(t===null||typeof t>"u"||xfe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ka(e,t,n,r,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yi[e]=new Ka(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yi[t]=new Ka(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yi[e]=new Ka(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yi[e]=new Ka(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yi[e]=new Ka(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yi[e]=new Ka(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yi[e]=new Ka(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yi[e]=new Ka(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yi[e]=new Ka(e,5,!1,e.toLowerCase(),null,!1,!1)});var _A=/[\-:]([a-z])/g;function kA(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_A,kA);Yi[t]=new Ka(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_A,kA);Yi[t]=new Ka(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_A,kA);Yi[t]=new Ka(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yi[e]=new Ka(e,1,!1,e.toLowerCase(),null,!1,!1)});Yi.xlinkHref=new Ka("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yi[e]=new Ka(e,1,!1,e.toLowerCase(),null,!0,!0)});function SA(e,t,n,r){var i=Yi.hasOwnProperty(t)?Yi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_fe(t,n,i,r)&&(n=null),r||i===null?wfe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bu=C7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Px=Symbol.for("react.element"),rg=Symbol.for("react.portal"),ig=Symbol.for("react.fragment"),CA=Symbol.for("react.strict_mode"),fO=Symbol.for("react.profiler"),$7=Symbol.for("react.provider"),T7=Symbol.for("react.context"),IA=Symbol.for("react.forward_ref"),mO=Symbol.for("react.suspense"),gO=Symbol.for("react.suspense_list"),$A=Symbol.for("react.memo"),_c=Symbol.for("react.lazy"),N7=Symbol.for("react.offscreen"),e4=Symbol.iterator;function O0(e){return e===null||typeof e!="object"?null:(e=e4&&e[e4]||e["@@iterator"],typeof e=="function"?e:null)}var Cr=Object.assign,mN;function rb(e){if(mN===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mN=t&&t[1]||""}return`
`+mN+e}var gN=!1;function yN(e,t){if(!e||gN)return"";gN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{gN=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rb(e):""}function kfe(e){switch(e.tag){case 5:return rb(e.type);case 16:return rb("Lazy");case 13:return rb("Suspense");case 19:return rb("SuspenseList");case 0:case 2:case 15:return e=yN(e.type,!1),e;case 11:return e=yN(e.type.render,!1),e;case 1:return e=yN(e.type,!0),e;default:return""}}function yO(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ig:return"Fragment";case rg:return"Portal";case fO:return"Profiler";case CA:return"StrictMode";case mO:return"Suspense";case gO:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T7:return(e.displayName||"Context")+".Consumer";case $7:return(e._context.displayName||"Context")+".Provider";case IA:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $A:return t=e.displayName||null,t!==null?t:yO(e.type)||"Memo";case _c:t=e._payload,e=e._init;try{return yO(e(t))}catch{}}return null}function Sfe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yO(t);case 8:return t===CA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ad(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function E7(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cfe(e){var t=E7(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mx(e){e._valueTracker||(e._valueTracker=Cfe(e))}function O7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=E7(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Lk(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vO(e,t){var n=t.checked;return Cr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function t4(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ad(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P7(e,t){t=t.checked,t!=null&&SA(e,"checked",t,!1)}function bO(e,t){P7(e,t);var n=ad(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wO(e,t.type,n):t.hasOwnProperty("defaultValue")&&wO(e,t.type,ad(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function n4(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function wO(e,t,n){(t!=="number"||Lk(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ib=Array.isArray;function wg(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ad(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xO(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return Cr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function r4(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(De(92));if(ib(n)){if(1<n.length)throw Error(De(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ad(n)}}function M7(e,t){var n=ad(t.value),r=ad(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function i4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A7(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _O(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A7(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ax,R7=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ax=Ax||document.createElement("div"),Ax.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ax.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hb(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _b={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ife=["Webkit","ms","Moz","O"];Object.keys(_b).forEach(function(e){Ife.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_b[t]=_b[e]})});function D7(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_b.hasOwnProperty(e)&&_b[e]?(""+t).trim():t+"px"}function L7(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=D7(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var $fe=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kO(e,t){if(t){if($fe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function SO(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CO=null;function TA(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var IO=null,xg=null,_g=null;function a4(e){if(e=j1(e)){if(typeof IO!="function")throw Error(De(280));var t=e.stateNode;t&&(t=y2(t),IO(e.stateNode,e.type,t))}}function F7(e){xg?_g?_g.push(e):_g=[e]:xg=e}function z7(){if(xg){var e=xg,t=_g;if(_g=xg=null,a4(e),t)for(e=0;e<t.length;e++)a4(t[e])}}function B7(e,t){return e(t)}function W7(){}var vN=!1;function V7(e,t,n){if(vN)return e(t,n);vN=!0;try{return B7(e,t,n)}finally{vN=!1,(xg!==null||_g!==null)&&(W7(),z7())}}function Ub(e,t){var n=e.stateNode;if(n===null)return null;var r=y2(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(De(231,t,typeof n));return n}var $O=!1;if(Nu)try{var P0={};Object.defineProperty(P0,"passive",{get:function(){$O=!0}}),window.addEventListener("test",P0,P0),window.removeEventListener("test",P0,P0)}catch{$O=!1}function Tfe(e,t,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var kb=!1,Fk=null,zk=!1,TO=null,Nfe={onError:function(e){kb=!0,Fk=e}};function Efe(e,t,n,r,i,a,s,o,l){kb=!1,Fk=null,Tfe.apply(Nfe,arguments)}function Ofe(e,t,n,r,i,a,s,o,l){if(Efe.apply(this,arguments),kb){if(kb){var u=Fk;kb=!1,Fk=null}else throw Error(De(198));zk||(zk=!0,TO=u)}}function Ph(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function j7(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s4(e){if(Ph(e)!==e)throw Error(De(188))}function Pfe(e){var t=e.alternate;if(!t){if(t=Ph(e),t===null)throw Error(De(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return s4(i),e;if(a===r)return s4(i),t;a=a.sibling}throw Error(De(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(De(189))}}if(n.alternate!==r)throw Error(De(190))}if(n.tag!==3)throw Error(De(188));return n.stateNode.current===n?e:t}function H7(e){return e=Pfe(e),e!==null?U7(e):null}function U7(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U7(e);if(t!==null)return t;e=e.sibling}return null}var G7=Ls.unstable_scheduleCallback,o4=Ls.unstable_cancelCallback,Mfe=Ls.unstable_shouldYield,Afe=Ls.unstable_requestPaint,Lr=Ls.unstable_now,Rfe=Ls.unstable_getCurrentPriorityLevel,NA=Ls.unstable_ImmediatePriority,q7=Ls.unstable_UserBlockingPriority,Bk=Ls.unstable_NormalPriority,Dfe=Ls.unstable_LowPriority,K7=Ls.unstable_IdlePriority,h2=null,Rl=null;function Lfe(e){if(Rl&&typeof Rl.onCommitFiberRoot=="function")try{Rl.onCommitFiberRoot(h2,e,void 0,(e.current.flags&128)===128)}catch{}}var zo=Math.clz32?Math.clz32:Bfe,Ffe=Math.log,zfe=Math.LN2;function Bfe(e){return e>>>=0,e===0?32:31-(Ffe(e)/zfe|0)|0}var Rx=64,Dx=4194304;function ab(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wk(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=ab(o):(a&=s,a!==0&&(r=ab(a)))}else s=n&~i,s!==0?r=ab(s):a!==0&&(r=ab(a));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zo(t),i=1<<n,r|=e[n],t&=~i;return r}function Wfe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vfe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-zo(a),o=1<<s,l=i[s];l===-1?((o&n)===0||(o&r)!==0)&&(i[s]=Wfe(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}function NO(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z7(){var e=Rx;return Rx<<=1,(Rx&4194240)===0&&(Rx=64),e}function bN(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function W1(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zo(t),e[t]=n}function jfe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-zo(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function EA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zo(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Bn=0;function X7(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var J7,OA,Y7,Q7,e9,EO=!1,Lx=[],Vc=null,jc=null,Hc=null,Gb=new Map,qb=new Map,Tc=[],Hfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l4(e,t){switch(e){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":jc=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":Gb.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qb.delete(t.pointerId)}}function M0(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=j1(t),t!==null&&OA(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Ufe(e,t,n,r,i){switch(t){case"focusin":return Vc=M0(Vc,e,t,n,r,i),!0;case"dragenter":return jc=M0(jc,e,t,n,r,i),!0;case"mouseover":return Hc=M0(Hc,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Gb.set(a,M0(Gb.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,qb.set(a,M0(qb.get(a)||null,e,t,n,r,i)),!0}return!1}function t9(e){var t=Sp(e.target);if(t!==null){var n=Ph(t);if(n!==null){if(t=n.tag,t===13){if(t=j7(n),t!==null){e.blockedOn=t,e9(e.priority,function(){Y7(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Z_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=OO(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);CO=r,n.target.dispatchEvent(r),CO=null}else return t=j1(n),t!==null&&OA(t),e.blockedOn=n,!1;t.shift()}return!0}function u4(e,t,n){Z_(e)&&n.delete(t)}function Gfe(){EO=!1,Vc!==null&&Z_(Vc)&&(Vc=null),jc!==null&&Z_(jc)&&(jc=null),Hc!==null&&Z_(Hc)&&(Hc=null),Gb.forEach(u4),qb.forEach(u4)}function A0(e,t){e.blockedOn===t&&(e.blockedOn=null,EO||(EO=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,Gfe)))}function Kb(e){function t(i){return A0(i,e)}if(0<Lx.length){A0(Lx[0],e);for(var n=1;n<Lx.length;n++){var r=Lx[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vc!==null&&A0(Vc,e),jc!==null&&A0(jc,e),Hc!==null&&A0(Hc,e),Gb.forEach(t),qb.forEach(t),n=0;n<Tc.length;n++)r=Tc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tc.length&&(n=Tc[0],n.blockedOn===null);)t9(n),n.blockedOn===null&&Tc.shift()}var kg=Bu.ReactCurrentBatchConfig,Vk=!0;function qfe(e,t,n,r){var i=Bn,a=kg.transition;kg.transition=null;try{Bn=1,PA(e,t,n,r)}finally{Bn=i,kg.transition=a}}function Kfe(e,t,n,r){var i=Bn,a=kg.transition;kg.transition=null;try{Bn=4,PA(e,t,n,r)}finally{Bn=i,kg.transition=a}}function PA(e,t,n,r){if(Vk){var i=OO(e,t,n,r);if(i===null)NN(e,t,r,jk,n),l4(e,r);else if(Ufe(i,e,t,n,r))r.stopPropagation();else if(l4(e,r),t&4&&-1<Hfe.indexOf(e)){for(;i!==null;){var a=j1(i);if(a!==null&&J7(a),a=OO(e,t,n,r),a===null&&NN(e,t,r,jk,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else NN(e,t,r,null,n)}}var jk=null;function OO(e,t,n,r){if(jk=null,e=TA(r),e=Sp(e),e!==null)if(t=Ph(e),t===null)e=null;else if(n=t.tag,n===13){if(e=j7(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jk=e,null}function n9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rfe()){case NA:return 1;case q7:return 4;case Bk:case Dfe:return 16;case K7:return 536870912;default:return 16}default:return 16}}var Pc=null,MA=null,X_=null;function r9(){if(X_)return X_;var e,t=MA,n=t.length,r,i="value"in Pc?Pc.value:Pc.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[a-r];r++);return X_=i.slice(e,1<r?1-r:void 0)}function J_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fx(){return!0}function c4(){return!1}function js(e){function t(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fx:c4,this.isPropagationStopped=c4,this}return Cr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fx)},persist:function(){},isPersistent:Fx}),t}var Py={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AA=js(Py),V1=Cr({},Py,{view:0,detail:0}),Zfe=js(V1),wN,xN,R0,f2=Cr({},V1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RA,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==R0&&(R0&&e.type==="mousemove"?(wN=e.screenX-R0.screenX,xN=e.screenY-R0.screenY):xN=wN=0,R0=e),wN)},movementY:function(e){return"movementY"in e?e.movementY:xN}}),d4=js(f2),Xfe=Cr({},f2,{dataTransfer:0}),Jfe=js(Xfe),Yfe=Cr({},V1,{relatedTarget:0}),_N=js(Yfe),Qfe=Cr({},Py,{animationName:0,elapsedTime:0,pseudoElement:0}),eme=js(Qfe),tme=Cr({},Py,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nme=js(tme),rme=Cr({},Py,{data:0}),p4=js(rme),ime={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ame={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ome(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sme[e])?!!t[e]:!1}function RA(){return ome}var lme=Cr({},V1,{key:function(e){if(e.key){var t=ime[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=J_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ame[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RA,charCode:function(e){return e.type==="keypress"?J_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?J_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ume=js(lme),cme=Cr({},f2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h4=js(cme),dme=Cr({},V1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RA}),pme=js(dme),hme=Cr({},Py,{propertyName:0,elapsedTime:0,pseudoElement:0}),fme=js(hme),mme=Cr({},f2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gme=js(mme),yme=[9,13,27,32],DA=Nu&&"CompositionEvent"in window,Sb=null;Nu&&"documentMode"in document&&(Sb=document.documentMode);var vme=Nu&&"TextEvent"in window&&!Sb,i9=Nu&&(!DA||Sb&&8<Sb&&11>=Sb),f4=String.fromCharCode(32),m4=!1;function a9(e,t){switch(e){case"keyup":return yme.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ag=!1;function bme(e,t){switch(e){case"compositionend":return s9(t);case"keypress":return t.which!==32?null:(m4=!0,f4);case"textInput":return e=t.data,e===f4&&m4?null:e;default:return null}}function wme(e,t){if(ag)return e==="compositionend"||!DA&&a9(e,t)?(e=r9(),X_=MA=Pc=null,ag=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return i9&&t.locale!=="ko"?null:t.data;default:return null}}var xme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xme[e.type]:t==="textarea"}function o9(e,t,n,r){F7(r),t=Hk(t,"onChange"),0<t.length&&(n=new AA("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Cb=null,Zb=null;function _me(e){v9(e,0)}function m2(e){var t=lg(e);if(O7(t))return e}function kme(e,t){if(e==="change")return t}var l9=!1;if(Nu){var kN;if(Nu){var SN="oninput"in document;if(!SN){var y4=document.createElement("div");y4.setAttribute("oninput","return;"),SN=typeof y4.oninput=="function"}kN=SN}else kN=!1;l9=kN&&(!document.documentMode||9<document.documentMode)}function v4(){Cb&&(Cb.detachEvent("onpropertychange",u9),Zb=Cb=null)}function u9(e){if(e.propertyName==="value"&&m2(Zb)){var t=[];o9(t,Zb,e,TA(e)),V7(_me,t)}}function Sme(e,t,n){e==="focusin"?(v4(),Cb=t,Zb=n,Cb.attachEvent("onpropertychange",u9)):e==="focusout"&&v4()}function Cme(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return m2(Zb)}function Ime(e,t){if(e==="click")return m2(t)}function $me(e,t){if(e==="input"||e==="change")return m2(t)}function Tme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qo=typeof Object.is=="function"?Object.is:Tme;function Xb(e,t){if(qo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hO.call(t,i)||!qo(e[i],t[i]))return!1}return!0}function b4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w4(e,t){var n=b4(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b4(n)}}function c9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?c9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function d9(){for(var e=window,t=Lk();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Lk(e.document)}return t}function LA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Nme(e){var t=d9(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&c9(n.ownerDocument.documentElement,n)){if(r!==null&&LA(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=w4(n,a);var s=w4(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Eme=Nu&&"documentMode"in document&&11>=document.documentMode,sg=null,PO=null,Ib=null,MO=!1;function x4(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;MO||sg==null||sg!==Lk(r)||(r=sg,"selectionStart"in r&&LA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ib&&Xb(Ib,r)||(Ib=r,r=Hk(PO,"onSelect"),0<r.length&&(t=new AA("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sg)))}function zx(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var og={animationend:zx("Animation","AnimationEnd"),animationiteration:zx("Animation","AnimationIteration"),animationstart:zx("Animation","AnimationStart"),transitionend:zx("Transition","TransitionEnd")},CN={},p9={};Nu&&(p9=document.createElement("div").style,"AnimationEvent"in window||(delete og.animationend.animation,delete og.animationiteration.animation,delete og.animationstart.animation),"TransitionEvent"in window||delete og.transitionend.transition);function g2(e){if(CN[e])return CN[e];if(!og[e])return e;var t=og[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in p9)return CN[e]=t[n];return e}var h9=g2("animationend"),f9=g2("animationiteration"),m9=g2("animationstart"),g9=g2("transitionend"),y9=new Map,_4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cd(e,t){y9.set(e,t),Oh(t,[e])}for(var IN=0;IN<_4.length;IN++){var $N=_4[IN],Ome=$N.toLowerCase(),Pme=$N[0].toUpperCase()+$N.slice(1);Cd(Ome,"on"+Pme)}Cd(h9,"onAnimationEnd");Cd(f9,"onAnimationIteration");Cd(m9,"onAnimationStart");Cd("dblclick","onDoubleClick");Cd("focusin","onFocus");Cd("focusout","onBlur");Cd(g9,"onTransitionEnd");Wg("onMouseEnter",["mouseout","mouseover"]);Wg("onMouseLeave",["mouseout","mouseover"]);Wg("onPointerEnter",["pointerout","pointerover"]);Wg("onPointerLeave",["pointerout","pointerover"]);Oh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mme=new Set("cancel close invalid load scroll toggle".split(" ").concat(sb));function k4(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ofe(r,t,void 0,e),e.currentTarget=null}function v9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;k4(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;k4(i,o,u),a=l}}}if(zk)throw e=TO,zk=!1,TO=null,e}function or(e,t){var n=t[FO];n===void 0&&(n=t[FO]=new Set);var r=e+"__bubble";n.has(r)||(b9(t,e,2,!1),n.add(r))}function TN(e,t,n){var r=0;t&&(r|=4),b9(n,e,r,t)}var Bx="_reactListening"+Math.random().toString(36).slice(2);function Jb(e){if(!e[Bx]){e[Bx]=!0,I7.forEach(function(n){n!=="selectionchange"&&(Mme.has(n)||TN(n,!1,e),TN(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bx]||(t[Bx]=!0,TN("selectionchange",!1,t))}}function b9(e,t,n,r){switch(n9(t)){case 1:var i=qfe;break;case 4:i=Kfe;break;default:i=PA}n=i.bind(null,t,n,e),i=void 0,!$O||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function NN(e,t,n,r,i){var a=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Sp(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}V7(function(){var u=a,c=TA(n),d=[];e:{var p=y9.get(e);if(p!==void 0){var h=AA,m=e;switch(e){case"keypress":if(J_(n)===0)break e;case"keydown":case"keyup":h=ume;break;case"focusin":m="focus",h=_N;break;case"focusout":m="blur",h=_N;break;case"beforeblur":case"afterblur":h=_N;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Jfe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=pme;break;case h9:case f9:case m9:h=eme;break;case g9:h=fme;break;case"scroll":h=Zfe;break;case"wheel":h=gme;break;case"copy":case"cut":case"paste":h=nme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=h4}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var b=u,_;b!==null;){_=b;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,v!==null&&(k=Ub(b,v),k!=null&&g.push(Yb(b,k,_)))),y)break;b=b.return}0<g.length&&(p=new h(p,m,null,n,c),d.push({event:p,listeners:g}))}}if((t&7)===0){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==CO&&(m=n.relatedTarget||n.fromElement)&&(Sp(m)||m[Eu]))break e;if((h||p)&&(p=c.window===c?c:(p=c.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?Sp(m):null,m!==null&&(y=Ph(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=d4,k="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=h4,k="onPointerLeave",v="onPointerEnter",b="pointer"),y=h==null?p:lg(h),_=m==null?p:lg(m),p=new g(k,b+"leave",h,n,c),p.target=y,p.relatedTarget=_,k=null,Sp(c)===u&&(g=new g(v,b+"enter",m,n,c),g.target=_,g.relatedTarget=y,k=g),y=k,h&&m)t:{for(g=h,v=m,b=0,_=g;_;_=Am(_))b++;for(_=0,k=v;k;k=Am(k))_++;for(;0<b-_;)g=Am(g),b--;for(;0<_-b;)v=Am(v),_--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Am(g),v=Am(v)}g=null}else g=null;h!==null&&S4(d,p,h,g,!1),m!==null&&y!==null&&S4(d,y,m,g,!0)}}e:{if(p=u?lg(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=kme;else if(g4(p))if(l9)S=$me;else{S=Cme;var $=Sme}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Ime);if(S&&(S=S(e,u))){o9(d,S,n,c);break e}$&&$(e,p,u),e==="focusout"&&($=p._wrapperState)&&$.controlled&&p.type==="number"&&wO(p,"number",p.value)}switch($=u?lg(u):window,e){case"focusin":(g4($)||$.contentEditable==="true")&&(sg=$,PO=u,Ib=null);break;case"focusout":Ib=PO=sg=null;break;case"mousedown":MO=!0;break;case"contextmenu":case"mouseup":case"dragend":MO=!1,x4(d,n,c);break;case"selectionchange":if(Eme)break;case"keydown":case"keyup":x4(d,n,c)}var N;if(DA)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ag?a9(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(i9&&n.locale!=="ko"&&(ag||P!=="onCompositionStart"?P==="onCompositionEnd"&&ag&&(N=r9()):(Pc=c,MA="value"in Pc?Pc.value:Pc.textContent,ag=!0)),$=Hk(u,P),0<$.length&&(P=new p4(P,e,null,n,c),d.push({event:P,listeners:$}),N?P.data=N:(N=s9(n),N!==null&&(P.data=N)))),(N=vme?bme(e,n):wme(e,n))&&(u=Hk(u,"onBeforeInput"),0<u.length&&(c=new p4("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=N))}v9(d,t)})}function Yb(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hk(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ub(e,n),a!=null&&r.unshift(Yb(e,a,i)),a=Ub(e,t),a!=null&&r.push(Yb(e,a,i))),e=e.return}return r}function Am(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S4(e,t,n,r,i){for(var a=t._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Ub(n,a),l!=null&&s.unshift(Yb(n,l,o))):i||(l=Ub(n,a),l!=null&&s.push(Yb(n,l,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Ame=/\r\n?/g,Rme=/\u0000|\uFFFD/g;function C4(e){return(typeof e=="string"?e:""+e).replace(Ame,`
`).replace(Rme,"")}function Wx(e,t,n){if(t=C4(t),C4(e)!==t&&n)throw Error(De(425))}function Uk(){}var AO=null,RO=null;function DO(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var LO=typeof setTimeout=="function"?setTimeout:void 0,Dme=typeof clearTimeout=="function"?clearTimeout:void 0,I4=typeof Promise=="function"?Promise:void 0,Lme=typeof queueMicrotask=="function"?queueMicrotask:typeof I4<"u"?function(e){return I4.resolve(null).then(e).catch(Fme)}:LO;function Fme(e){setTimeout(function(){throw e})}function EN(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Kb(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Kb(t)}function Uc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var My=Math.random().toString(36).slice(2),$l="__reactFiber$"+My,Qb="__reactProps$"+My,Eu="__reactContainer$"+My,FO="__reactEvents$"+My,zme="__reactListeners$"+My,Bme="__reactHandles$"+My;function Sp(e){var t=e[$l];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Eu]||n[$l]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$4(e);e!==null;){if(n=e[$l])return n;e=$4(e)}return t}e=n,n=e.parentNode}return null}function j1(e){return e=e[$l]||e[Eu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function y2(e){return e[Qb]||null}var zO=[],ug=-1;function Id(e){return{current:e}}function ur(e){0>ug||(e.current=zO[ug],zO[ug]=null,ug--)}function tr(e,t){ug++,zO[ug]=e.current,e.current=t}var sd={},ga=Id(sd),us=Id(!1),Jp=sd;function Vg(e,t){var n=e.type.contextTypes;if(!n)return sd;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function cs(e){return e=e.childContextTypes,e!=null}function Gk(){ur(us),ur(ga)}function T4(e,t,n){if(ga.current!==sd)throw Error(De(168));tr(ga,t),tr(us,n)}function w9(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(De(108,Sfe(e)||"Unknown",i));return Cr({},n,r)}function qk(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sd,Jp=ga.current,tr(ga,e),tr(us,us.current),!0}function N4(e,t,n){var r=e.stateNode;if(!r)throw Error(De(169));n?(e=w9(e,t,Jp),r.__reactInternalMemoizedMergedChildContext=e,ur(us),ur(ga),tr(ga,e)):ur(us),tr(us,n)}var fu=null,v2=!1,ON=!1;function x9(e){fu===null?fu=[e]:fu.push(e)}function Wme(e){v2=!0,x9(e)}function $d(){if(!ON&&fu!==null){ON=!0;var e=0,t=Bn;try{var n=fu;for(Bn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fu=null,v2=!1}catch(i){throw fu!==null&&(fu=fu.slice(e+1)),G7(NA,$d),i}finally{Bn=t,ON=!1}}return null}var cg=[],dg=0,Kk=null,Zk=0,ro=[],io=0,Yp=null,wu=1,xu="";function lp(e,t){cg[dg++]=Zk,cg[dg++]=Kk,Kk=e,Zk=t}function _9(e,t,n){ro[io++]=wu,ro[io++]=xu,ro[io++]=Yp,Yp=e;var r=wu;e=xu;var i=32-zo(r)-1;r&=~(1<<i),n+=1;var a=32-zo(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,wu=1<<32-zo(t)+i|n<<i|r,xu=a+e}else wu=1<<a|n<<i|r,xu=e}function FA(e){e.return!==null&&(lp(e,1),_9(e,1,0))}function zA(e){for(;e===Kk;)Kk=cg[--dg],cg[dg]=null,Zk=cg[--dg],cg[dg]=null;for(;e===Yp;)Yp=ro[--io],ro[io]=null,xu=ro[--io],ro[io]=null,wu=ro[--io],ro[io]=null}var Ms=null,Ts=null,mr=!1,Ro=null;function k9(e,t){var n=ao(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function E4(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ms=e,Ts=Uc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ms=e,Ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yp!==null?{id:wu,overflow:xu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ao(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ms=e,Ts=null,!0):!1;default:return!1}}function BO(e){return(e.mode&1)!==0&&(e.flags&128)===0}function WO(e){if(mr){var t=Ts;if(t){var n=t;if(!E4(e,t)){if(BO(e))throw Error(De(418));t=Uc(n.nextSibling);var r=Ms;t&&E4(e,t)?k9(r,n):(e.flags=e.flags&-4097|2,mr=!1,Ms=e)}}else{if(BO(e))throw Error(De(418));e.flags=e.flags&-4097|2,mr=!1,Ms=e}}}function O4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ms=e}function Vx(e){if(e!==Ms)return!1;if(!mr)return O4(e),mr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!DO(e.type,e.memoizedProps)),t&&(t=Ts)){if(BO(e))throw S9(),Error(De(418));for(;t;)k9(e,t),t=Uc(t.nextSibling)}if(O4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ts=Uc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ts=null}}else Ts=Ms?Uc(e.stateNode.nextSibling):null;return!0}function S9(){for(var e=Ts;e;)e=Uc(e.nextSibling)}function jg(){Ts=Ms=null,mr=!1}function BA(e){Ro===null?Ro=[e]:Ro.push(e)}var Vme=Bu.ReactCurrentBatchConfig;function Mo(e,t){if(e&&e.defaultProps){t=Cr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Xk=Id(null),Jk=null,pg=null,WA=null;function VA(){WA=pg=Jk=null}function jA(e){var t=Xk.current;ur(Xk),e._currentValue=t}function VO(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sg(e,t){Jk=e,WA=pg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ss=!0),e.firstContext=null)}function ho(e){var t=e._currentValue;if(WA!==e)if(e={context:e,memoizedValue:t,next:null},pg===null){if(Jk===null)throw Error(De(308));pg=e,Jk.dependencies={lanes:0,firstContext:e}}else pg=pg.next=e;return t}var Cp=null;function HA(e){Cp===null?Cp=[e]:Cp.push(e)}function C9(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,HA(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ou(e,r)}function Ou(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kc=!1;function UA(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _u(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(mn&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ou(e,n)}return i=r.interleaved,i===null?(t.next=t,HA(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ou(e,n)}function Y_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EA(e,n)}}function P4(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yk(e,t,n,r){var i=e.updateQueue;kc=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,c=u=l=null,o=a;do{var p=o.lane,h=o.eventTime;if((r&p)===p){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,g=o;switch(p=t,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,d,p):m,p==null)break e;d=Cr({},d,p);break e;case 2:kc=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);eh|=s,e.lanes=s,e.memoizedState=d}}function M4(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(De(191,i));i.call(r)}}}var $9=new C7.Component().refs;function jO(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Cr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var b2={isMounted:function(e){return(e=e._reactInternals)?Ph(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Da(),i=Kc(e),a=_u(r,i);a.payload=t,n!=null&&(a.callback=n),t=Gc(e,a,i),t!==null&&(Bo(t,e,i,r),Y_(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Da(),i=Kc(e),a=_u(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Gc(e,a,i),t!==null&&(Bo(t,e,i,r),Y_(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Da(),r=Kc(e),i=_u(n,r);i.tag=2,t!=null&&(i.callback=t),t=Gc(e,i,r),t!==null&&(Bo(t,e,r,n),Y_(t,e,r))}};function A4(e,t,n,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):t.prototype&&t.prototype.isPureReactComponent?!Xb(n,r)||!Xb(i,a):!0}function T9(e,t,n){var r=!1,i=sd,a=t.contextType;return typeof a=="object"&&a!==null?a=ho(a):(i=cs(t)?Jp:ga.current,r=t.contextTypes,a=(r=r!=null)?Vg(e,i):sd),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=b2,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function R4(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&b2.enqueueReplaceState(t,t.state,null)}function HO(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=$9,UA(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=ho(a):(a=cs(t)?Jp:ga.current,i.context=Vg(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(jO(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&b2.enqueueReplaceState(i,i.state,null),Yk(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function D0(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(De(309));var r=n.stateNode}if(!r)throw Error(De(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var o=i.refs;o===$9&&(o=i.refs={}),s===null?delete o[a]:o[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(De(284));if(!n._owner)throw Error(De(290,e))}return e}function jx(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function D4(e){var t=e._init;return t(e._payload)}function N9(e){function t(v,b){if(e){var _=v.deletions;_===null?(v.deletions=[b],v.flags|=16):_.push(b)}}function n(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Zc(v,b),v.index=0,v.sibling=null,v}function a(v,b,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<b?(v.flags|=2,b):_):(v.flags|=2,b)):(v.flags|=1048576,b)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,b,_,k){return b===null||b.tag!==6?(b=FN(_,v.mode,k),b.return=v,b):(b=i(b,_),b.return=v,b)}function l(v,b,_,k){var S=_.type;return S===ig?c(v,b,_.props.children,k,_.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_c&&D4(S)===b.type)?(k=i(b,_.props),k.ref=D0(v,b,_),k.return=v,k):(k=ik(_.type,_.key,_.props,null,v.mode,k),k.ref=D0(v,b,_),k.return=v,k)}function u(v,b,_,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=zN(_,v.mode,k),b.return=v,b):(b=i(b,_.children||[]),b.return=v,b)}function c(v,b,_,k,S){return b===null||b.tag!==7?(b=Dp(_,v.mode,k,S),b.return=v,b):(b=i(b,_),b.return=v,b)}function d(v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=FN(""+b,v.mode,_),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Px:return _=ik(b.type,b.key,b.props,null,v.mode,_),_.ref=D0(v,null,b),_.return=v,_;case rg:return b=zN(b,v.mode,_),b.return=v,b;case _c:var k=b._init;return d(v,k(b._payload),_)}if(ib(b)||O0(b))return b=Dp(b,v.mode,_,null),b.return=v,b;jx(v,b)}return null}function p(v,b,_,k){var S=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:o(v,b,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Px:return _.key===S?l(v,b,_,k):null;case rg:return _.key===S?u(v,b,_,k):null;case _c:return S=_._init,p(v,b,S(_._payload),k)}if(ib(_)||O0(_))return S!==null?null:c(v,b,_,k,null);jx(v,_)}return null}function h(v,b,_,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(_)||null,o(b,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Px:return v=v.get(k.key===null?_:k.key)||null,l(b,v,k,S);case rg:return v=v.get(k.key===null?_:k.key)||null,u(b,v,k,S);case _c:var $=k._init;return h(v,b,_,$(k._payload),S)}if(ib(k)||O0(k))return v=v.get(_)||null,c(b,v,k,S,null);jx(b,k)}return null}function m(v,b,_,k){for(var S=null,$=null,N=b,P=b=0,D=null;N!==null&&P<_.length;P++){N.index>P?(D=N,N=null):D=N.sibling;var O=p(v,N,_[P],k);if(O===null){N===null&&(N=D);break}e&&N&&O.alternate===null&&t(v,N),b=a(O,b,P),$===null?S=O:$.sibling=O,$=O,N=D}if(P===_.length)return n(v,N),mr&&lp(v,P),S;if(N===null){for(;P<_.length;P++)N=d(v,_[P],k),N!==null&&(b=a(N,b,P),$===null?S=N:$.sibling=N,$=N);return mr&&lp(v,P),S}for(N=r(v,N);P<_.length;P++)D=h(N,v,P,_[P],k),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?P:D.key),b=a(D,b,P),$===null?S=D:$.sibling=D,$=D);return e&&N.forEach(function(F){return t(v,F)}),mr&&lp(v,P),S}function g(v,b,_,k){var S=O0(_);if(typeof S!="function")throw Error(De(150));if(_=S.call(_),_==null)throw Error(De(151));for(var $=S=null,N=b,P=b=0,D=null,O=_.next();N!==null&&!O.done;P++,O=_.next()){N.index>P?(D=N,N=null):D=N.sibling;var F=p(v,N,O.value,k);if(F===null){N===null&&(N=D);break}e&&N&&F.alternate===null&&t(v,N),b=a(F,b,P),$===null?S=F:$.sibling=F,$=F,N=D}if(O.done)return n(v,N),mr&&lp(v,P),S;if(N===null){for(;!O.done;P++,O=_.next())O=d(v,O.value,k),O!==null&&(b=a(O,b,P),$===null?S=O:$.sibling=O,$=O);return mr&&lp(v,P),S}for(N=r(v,N);!O.done;P++,O=_.next())O=h(N,v,P,O.value,k),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?P:O.key),b=a(O,b,P),$===null?S=O:$.sibling=O,$=O);return e&&N.forEach(function(E){return t(v,E)}),mr&&lp(v,P),S}function y(v,b,_,k){if(typeof _=="object"&&_!==null&&_.type===ig&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Px:e:{for(var S=_.key,$=b;$!==null;){if($.key===S){if(S=_.type,S===ig){if($.tag===7){n(v,$.sibling),b=i($,_.props.children),b.return=v,v=b;break e}}else if($.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_c&&D4(S)===$.type){n(v,$.sibling),b=i($,_.props),b.ref=D0(v,$,_),b.return=v,v=b;break e}n(v,$);break}else t(v,$);$=$.sibling}_.type===ig?(b=Dp(_.props.children,v.mode,k,_.key),b.return=v,v=b):(k=ik(_.type,_.key,_.props,null,v.mode,k),k.ref=D0(v,b,_),k.return=v,v=k)}return s(v);case rg:e:{for($=_.key;b!==null;){if(b.key===$)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(v,b.sibling),b=i(b,_.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else t(v,b);b=b.sibling}b=zN(_,v.mode,k),b.return=v,v=b}return s(v);case _c:return $=_._init,y(v,b,$(_._payload),k)}if(ib(_))return m(v,b,_,k);if(O0(_))return g(v,b,_,k);jx(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(v,b.sibling),b=i(b,_),b.return=v,v=b):(n(v,b),b=FN(_,v.mode,k),b.return=v,v=b),s(v)):n(v,b)}return y}var Hg=N9(!0),E9=N9(!1),H1={},Dl=Id(H1),e1=Id(H1),t1=Id(H1);function Ip(e){if(e===H1)throw Error(De(174));return e}function GA(e,t){switch(tr(t1,t),tr(e1,e),tr(Dl,H1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_O(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_O(t,e)}ur(Dl),tr(Dl,t)}function Ug(){ur(Dl),ur(e1),ur(t1)}function O9(e){Ip(t1.current);var t=Ip(Dl.current),n=_O(t,e.type);t!==n&&(tr(e1,e),tr(Dl,n))}function qA(e){e1.current===e&&(ur(Dl),ur(e1))}var _r=Id(0);function Qk(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var PN=[];function KA(){for(var e=0;e<PN.length;e++)PN[e]._workInProgressVersionPrimary=null;PN.length=0}var Q_=Bu.ReactCurrentDispatcher,MN=Bu.ReactCurrentBatchConfig,Qp=0,Sr=null,di=null,Ii=null,eS=!1,$b=!1,n1=0,jme=0;function sa(){throw Error(De(321))}function ZA(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qo(e[n],t[n]))return!1;return!0}function XA(e,t,n,r,i,a){if(Qp=a,Sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q_.current=e===null||e.memoizedState===null?qme:Kme,e=n(r,i),$b){a=0;do{if($b=!1,n1=0,25<=a)throw Error(De(301));a+=1,Ii=di=null,t.updateQueue=null,Q_.current=Zme,e=n(r,i)}while($b)}if(Q_.current=tS,t=di!==null&&di.next!==null,Qp=0,Ii=di=Sr=null,eS=!1,t)throw Error(De(300));return e}function JA(){var e=n1!==0;return n1=0,e}function yl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Sr.memoizedState=Ii=e:Ii=Ii.next=e,Ii}function fo(){if(di===null){var e=Sr.alternate;e=e!==null?e.memoizedState:null}else e=di.next;var t=Ii===null?Sr.memoizedState:Ii.next;if(t!==null)Ii=t,di=e;else{if(e===null)throw Error(De(310));di=e,e={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Ii===null?Sr.memoizedState=Ii=e:Ii=Ii.next=e}return Ii}function r1(e,t){return typeof t=="function"?t(e):t}function AN(e){var t=fo(),n=t.queue;if(n===null)throw Error(De(311));n.lastRenderedReducer=e;var r=di,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((Qp&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Sr.lanes|=c,eh|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,qo(r,t.memoizedState)||(ss=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Sr.lanes|=a,eh|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function RN(e){var t=fo(),n=t.queue;if(n===null)throw Error(De(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);qo(a,t.memoizedState)||(ss=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function P9(){}function M9(e,t){var n=Sr,r=fo(),i=t(),a=!qo(r.memoizedState,i);if(a&&(r.memoizedState=i,ss=!0),r=r.queue,YA(D9.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ii!==null&&Ii.memoizedState.tag&1){if(n.flags|=2048,i1(9,R9.bind(null,n,r,i,t),void 0,null),Pi===null)throw Error(De(349));(Qp&30)!==0||A9(n,t,i)}return i}function A9(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Sr.updateQueue,t===null?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function R9(e,t,n,r){t.value=n,t.getSnapshot=r,L9(t)&&F9(e)}function D9(e,t,n){return n(function(){L9(t)&&F9(e)})}function L9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qo(e,n)}catch{return!0}}function F9(e){var t=Ou(e,1);t!==null&&Bo(t,e,1,-1)}function L4(e){var t=yl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r1,lastRenderedState:e},t.queue=e,e=e.dispatch=Gme.bind(null,Sr,e),[t.memoizedState,e]}function i1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Sr.updateQueue,t===null?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function z9(){return fo().memoizedState}function ek(e,t,n,r){var i=yl();Sr.flags|=e,i.memoizedState=i1(1|t,n,void 0,r===void 0?null:r)}function w2(e,t,n,r){var i=fo();r=r===void 0?null:r;var a=void 0;if(di!==null){var s=di.memoizedState;if(a=s.destroy,r!==null&&ZA(r,s.deps)){i.memoizedState=i1(t,n,a,r);return}}Sr.flags|=e,i.memoizedState=i1(1|t,n,a,r)}function F4(e,t){return ek(8390656,8,e,t)}function YA(e,t){return w2(2048,8,e,t)}function B9(e,t){return w2(4,2,e,t)}function W9(e,t){return w2(4,4,e,t)}function V9(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function j9(e,t,n){return n=n!=null?n.concat([e]):null,w2(4,4,V9.bind(null,t,e),n)}function QA(){}function H9(e,t){var n=fo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZA(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function U9(e,t){var n=fo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZA(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function G9(e,t,n){return(Qp&21)===0?(e.baseState&&(e.baseState=!1,ss=!0),e.memoizedState=n):(qo(n,t)||(n=Z7(),Sr.lanes|=n,eh|=n,e.baseState=!0),t)}function Hme(e,t){var n=Bn;Bn=n!==0&&4>n?n:4,e(!0);var r=MN.transition;MN.transition={};try{e(!1),t()}finally{Bn=n,MN.transition=r}}function q9(){return fo().memoizedState}function Ume(e,t,n){var r=Kc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},K9(e))Z9(t,n);else if(n=C9(e,t,n,r),n!==null){var i=Da();Bo(n,e,r,i),X9(n,t,r)}}function Gme(e,t,n){var r=Kc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(K9(e))Z9(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,qo(o,s)){var l=t.interleaved;l===null?(i.next=i,HA(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=C9(e,t,i,r),n!==null&&(i=Da(),Bo(n,e,r,i),X9(n,t,r))}}function K9(e){var t=e.alternate;return e===Sr||t!==null&&t===Sr}function Z9(e,t){$b=eS=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function X9(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,EA(e,n)}}var tS={readContext:ho,useCallback:sa,useContext:sa,useEffect:sa,useImperativeHandle:sa,useInsertionEffect:sa,useLayoutEffect:sa,useMemo:sa,useReducer:sa,useRef:sa,useState:sa,useDebugValue:sa,useDeferredValue:sa,useTransition:sa,useMutableSource:sa,useSyncExternalStore:sa,useId:sa,unstable_isNewReconciler:!1},qme={readContext:ho,useCallback:function(e,t){return yl().memoizedState=[e,t===void 0?null:t],e},useContext:ho,useEffect:F4,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ek(4194308,4,V9.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ek(4194308,4,e,t)},useInsertionEffect:function(e,t){return ek(4,2,e,t)},useMemo:function(e,t){var n=yl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ume.bind(null,Sr,e),[r.memoizedState,e]},useRef:function(e){var t=yl();return e={current:e},t.memoizedState=e},useState:L4,useDebugValue:QA,useDeferredValue:function(e){return yl().memoizedState=e},useTransition:function(){var e=L4(!1),t=e[0];return e=Hme.bind(null,e[1]),yl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Sr,i=yl();if(mr){if(n===void 0)throw Error(De(407));n=n()}else{if(n=t(),Pi===null)throw Error(De(349));(Qp&30)!==0||A9(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,F4(D9.bind(null,r,a,e),[e]),r.flags|=2048,i1(9,R9.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=yl(),t=Pi.identifierPrefix;if(mr){var n=xu,r=wu;n=(r&~(1<<32-zo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=n1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jme++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kme={readContext:ho,useCallback:H9,useContext:ho,useEffect:YA,useImperativeHandle:j9,useInsertionEffect:B9,useLayoutEffect:W9,useMemo:U9,useReducer:AN,useRef:z9,useState:function(){return AN(r1)},useDebugValue:QA,useDeferredValue:function(e){var t=fo();return G9(t,di.memoizedState,e)},useTransition:function(){var e=AN(r1)[0],t=fo().memoizedState;return[e,t]},useMutableSource:P9,useSyncExternalStore:M9,useId:q9,unstable_isNewReconciler:!1},Zme={readContext:ho,useCallback:H9,useContext:ho,useEffect:YA,useImperativeHandle:j9,useInsertionEffect:B9,useLayoutEffect:W9,useMemo:U9,useReducer:RN,useRef:z9,useState:function(){return RN(r1)},useDebugValue:QA,useDeferredValue:function(e){var t=fo();return di===null?t.memoizedState=e:G9(t,di.memoizedState,e)},useTransition:function(){var e=RN(r1)[0],t=fo().memoizedState;return[e,t]},useMutableSource:P9,useSyncExternalStore:M9,useId:q9,unstable_isNewReconciler:!1};function Gg(e,t){try{var n="",r=t;do n+=kfe(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function DN(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function UO(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Xme=typeof WeakMap=="function"?WeakMap:Map;function J9(e,t,n){n=_u(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rS||(rS=!0,tP=r),UO(e,t)},n}function Y9(e,t,n){n=_u(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){UO(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){UO(e,t),typeof r!="function"&&(qc===null?qc=new Set([this]):qc.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function z4(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Xme;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=cge.bind(null,e,t,n),t.then(e,e))}function B4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function W4(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_u(-1,1),t.tag=2,Gc(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Jme=Bu.ReactCurrentOwner,ss=!1;function Pa(e,t,n,r){t.child=e===null?E9(t,null,n,r):Hg(t,e.child,n,r)}function V4(e,t,n,r,i){n=n.render;var a=t.ref;return Sg(t,i),r=XA(e,t,n,r,a,i),n=JA(),e!==null&&!ss?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pu(e,t,i)):(mr&&n&&FA(t),t.flags|=1,Pa(e,t,r,i),t.child)}function j4(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!oR(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Q9(e,t,a,r,i)):(e=ik(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&i)===0){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xb,n(s,r)&&e.ref===t.ref)return Pu(e,t,i)}return t.flags|=1,e=Zc(a,r),e.ref=t.ref,e.return=t,t.child=e}function Q9(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Xb(a,r)&&e.ref===t.ref)if(ss=!1,t.pendingProps=r=a,(e.lanes&i)!==0)(e.flags&131072)!==0&&(ss=!0);else return t.lanes=e.lanes,Pu(e,t,i)}return GO(e,t,n,r,i)}function eq(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(fg,Is),Is|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tr(fg,Is),Is|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,tr(fg,Is),Is|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,tr(fg,Is),Is|=r;return Pa(e,t,i,n),t.child}function tq(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function GO(e,t,n,r,i){var a=cs(n)?Jp:ga.current;return a=Vg(t,a),Sg(t,i),n=XA(e,t,n,r,a,i),r=JA(),e!==null&&!ss?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pu(e,t,i)):(mr&&r&&FA(t),t.flags|=1,Pa(e,t,n,i),t.child)}function H4(e,t,n,r,i){if(cs(n)){var a=!0;qk(t)}else a=!1;if(Sg(t,i),t.stateNode===null)tk(e,t),T9(t,n,r),HO(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ho(u):(u=cs(n)?Jp:ga.current,u=Vg(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&R4(t,s,r,u),kc=!1;var p=t.memoizedState;s.state=p,Yk(t,r,s,i),l=t.memoizedState,o!==r||p!==l||us.current||kc?(typeof c=="function"&&(jO(t,n,c,r),l=t.memoizedState),(o=kc||A4(t,n,o,r,p,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,I9(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Mo(t.type,o),s.props=u,d=t.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ho(l):(l=cs(n)?Jp:ga.current,l=Vg(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||p!==l)&&R4(t,s,r,l),kc=!1,p=t.memoizedState,s.state=p,Yk(t,r,s,i);var m=t.memoizedState;o!==d||p!==m||us.current||kc?(typeof h=="function"&&(jO(t,n,h,r),m=t.memoizedState),(u=kc||A4(t,n,u,r,p,m,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return qO(e,t,n,r,a,i)}function qO(e,t,n,r,i,a){tq(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&N4(t,n,!1),Pu(e,t,a);r=t.stateNode,Jme.current=t;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Hg(t,e.child,null,a),t.child=Hg(t,null,o,a)):Pa(e,t,o,a),t.memoizedState=r.state,i&&N4(t,n,!0),t.child}function nq(e){var t=e.stateNode;t.pendingContext?T4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T4(e,t.context,!1),GA(e,t.containerInfo)}function U4(e,t,n,r,i){return jg(),BA(i),t.flags|=256,Pa(e,t,n,r),t.child}var KO={dehydrated:null,treeContext:null,retryLane:0};function ZO(e){return{baseLanes:e,cachePool:null,transitions:null}}function rq(e,t,n){var r=t.pendingProps,i=_r.current,a=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),tr(_r,i&1),e===null)return WO(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,a?(r=t.mode,a=t.child,s={mode:"hidden",children:s},(r&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=s):a=k2(s,r,0,null),e=Dp(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ZO(n),t.memoizedState=KO,e):eR(t,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Yme(e,t,s,r,o,i,n);if(a){a=r.fallback,s=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return(s&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Zc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Zc(o,a):(a=Dp(a,s,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,s=e.child.memoizedState,s=s===null?ZO(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=KO,r}return a=e.child,e=a.sibling,r=Zc(a,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eR(e,t){return t=k2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hx(e,t,n,r){return r!==null&&BA(r),Hg(t,e.child,null,n),e=eR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yme(e,t,n,r,i,a,s){if(n)return t.flags&256?(t.flags&=-257,r=DN(Error(De(422))),Hx(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=k2({mode:"visible",children:r.children},i,0,null),a=Dp(a,i,s,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,(t.mode&1)!==0&&Hg(t,e.child,null,s),t.child.memoizedState=ZO(s),t.memoizedState=KO,a);if((t.mode&1)===0)return Hx(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(De(419)),r=DN(a,r,void 0),Hx(e,t,s,r)}if(o=(s&e.childLanes)!==0,ss||o){if(r=Pi,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|s))!==0?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ou(e,i),Bo(r,e,i,-1))}return sR(),r=DN(Error(De(421))),Hx(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=dge.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ts=Uc(i.nextSibling),Ms=t,mr=!0,Ro=null,e!==null&&(ro[io++]=wu,ro[io++]=xu,ro[io++]=Yp,wu=e.id,xu=e.overflow,Yp=t),t=eR(t,r.children),t.flags|=4096,t)}function G4(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),VO(e.return,t,n)}function LN(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function iq(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Pa(e,t,r.children,n),r=_r.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G4(e,n,t);else if(e.tag===19)G4(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(tr(_r,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Qk(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),LN(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Qk(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}LN(t,!0,n,null,a);break;case"together":LN(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tk(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eh|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,n=Zc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Qme(e,t,n){switch(t.tag){case 3:nq(t),jg();break;case 5:O9(t);break;case 1:cs(t.type)&&qk(t);break;case 4:GA(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;tr(Xk,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(tr(_r,_r.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?rq(e,t,n):(tr(_r,_r.current&1),e=Pu(e,t,n),e!==null?e.sibling:null);tr(_r,_r.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return iq(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tr(_r,_r.current),r)break;return null;case 22:case 23:return t.lanes=0,eq(e,t,n)}return Pu(e,t,n)}var aq,XO,sq,oq;aq=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};XO=function(){};sq=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ip(Dl.current);var a=null;switch(n){case"input":i=vO(e,i),r=vO(e,r),a=[];break;case"select":i=Cr({},i,{value:void 0}),r=Cr({},r,{value:void 0}),a=[];break;case"textarea":i=xO(e,i),r=xO(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uk)}kO(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jb.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&or("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};oq=function(e,t,n,r){n!==r&&(t.flags|=4)};function L0(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function oa(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ege(e,t,n){var r=t.pendingProps;switch(zA(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oa(t),null;case 1:return cs(t.type)&&Gk(),oa(t),null;case 3:return r=t.stateNode,Ug(),ur(us),ur(ga),KA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ro!==null&&(iP(Ro),Ro=null))),XO(e,t),oa(t),null;case 5:qA(t);var i=Ip(t1.current);if(n=t.type,e!==null&&t.stateNode!=null)sq(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(De(166));return oa(t),null}if(e=Ip(Dl.current),Vx(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[$l]=t,r[Qb]=a,e=(t.mode&1)!==0,n){case"dialog":or("cancel",r),or("close",r);break;case"iframe":case"object":case"embed":or("load",r);break;case"video":case"audio":for(i=0;i<sb.length;i++)or(sb[i],r);break;case"source":or("error",r);break;case"img":case"image":case"link":or("error",r),or("load",r);break;case"details":or("toggle",r);break;case"input":t4(r,a),or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},or("invalid",r);break;case"textarea":r4(r,a),or("invalid",r)}kO(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Wx(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Wx(r.textContent,o,e),i=["children",""+o]):jb.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&or("scroll",r)}switch(n){case"input":Mx(r),n4(r,a,!0);break;case"textarea":Mx(r),i4(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Uk)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A7(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[$l]=t,e[Qb]=r,aq(e,t,!1,!1),t.stateNode=e;e:{switch(s=SO(n,r),n){case"dialog":or("cancel",e),or("close",e),i=r;break;case"iframe":case"object":case"embed":or("load",e),i=r;break;case"video":case"audio":for(i=0;i<sb.length;i++)or(sb[i],e);i=r;break;case"source":or("error",e),i=r;break;case"img":case"image":case"link":or("error",e),or("load",e),i=r;break;case"details":or("toggle",e),i=r;break;case"input":t4(e,r),i=vO(e,r),or("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Cr({},r,{value:void 0}),or("invalid",e);break;case"textarea":r4(e,r),i=xO(e,r),or("invalid",e);break;default:i=r}kO(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?L7(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&R7(e,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Hb(e,l):typeof l=="number"&&Hb(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jb.hasOwnProperty(a)?l!=null&&a==="onScroll"&&or("scroll",e):l!=null&&SA(e,a,l,s))}switch(n){case"input":Mx(e),n4(e,r,!1);break;case"textarea":Mx(e),i4(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ad(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?wg(e,!!r.multiple,a,!1):r.defaultValue!=null&&wg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Uk)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return oa(t),null;case 6:if(e&&t.stateNode!=null)oq(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(De(166));if(n=Ip(t1.current),Ip(Dl.current),Vx(t)){if(r=t.stateNode,n=t.memoizedProps,r[$l]=t,(a=r.nodeValue!==n)&&(e=Ms,e!==null))switch(e.tag){case 3:Wx(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wx(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$l]=t,t.stateNode=r}return oa(t),null;case 13:if(ur(_r),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mr&&Ts!==null&&(t.mode&1)!==0&&(t.flags&128)===0)S9(),jg(),t.flags|=98560,a=!1;else if(a=Vx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(De(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(De(317));a[$l]=t}else jg(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;oa(t),a=!1}else Ro!==null&&(iP(Ro),Ro=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(_r.current&1)!==0?yi===0&&(yi=3):sR())),t.updateQueue!==null&&(t.flags|=4),oa(t),null);case 4:return Ug(),XO(e,t),e===null&&Jb(t.stateNode.containerInfo),oa(t),null;case 10:return jA(t.type._context),oa(t),null;case 17:return cs(t.type)&&Gk(),oa(t),null;case 19:if(ur(_r),a=t.memoizedState,a===null)return oa(t),null;if(r=(t.flags&128)!==0,s=a.rendering,s===null)if(r)L0(a,!1);else{if(yi!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=Qk(e),s!==null){for(t.flags|=128,L0(a,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return tr(_r,_r.current&1|2),t.child}e=e.sibling}a.tail!==null&&Lr()>qg&&(t.flags|=128,r=!0,L0(a,!1),t.lanes=4194304)}else{if(!r)if(e=Qk(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),L0(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!mr)return oa(t),null}else 2*Lr()-a.renderingStartTime>qg&&n!==1073741824&&(t.flags|=128,r=!0,L0(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Lr(),t.sibling=null,n=_r.current,tr(_r,r?n&1|2:n&1),t):(oa(t),null);case 22:case 23:return aR(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Is&1073741824)!==0&&(oa(t),t.subtreeFlags&6&&(t.flags|=8192)):oa(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function tge(e,t){switch(zA(t),t.tag){case 1:return cs(t.type)&&Gk(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ug(),ur(us),ur(ga),KA(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return qA(t),null;case 13:if(ur(_r),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));jg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ur(_r),null;case 4:return Ug(),null;case 10:return jA(t.type._context),null;case 22:case 23:return aR(),null;case 24:return null;default:return null}}var Ux=!1,ca=!1,nge=typeof WeakSet=="function"?WeakSet:Set,lt=null;function hg(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Or(e,t,r)}else n.current=null}function JO(e,t,n){try{n()}catch(r){Or(e,t,r)}}var q4=!1;function rge(e,t){if(AO=Vk,e=d9(),LA(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,c=0,d=e,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++u===i&&(o=s),p===a&&++c===r&&(l=s),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(RO={focusedElem:e,selectionRange:n},Vk=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){t=lt;try{var m=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Mo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(k){Or(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}return m=q4,q4=!1,m}function Tb(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&JO(t,n,a)}i=i.next}while(i!==r)}}function x2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function YO(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function lq(e){var t=e.alternate;t!==null&&(e.alternate=null,lq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$l],delete t[Qb],delete t[FO],delete t[zme],delete t[Bme])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uq(e){return e.tag===5||e.tag===3||e.tag===4}function K4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function QO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uk));else if(r!==4&&(e=e.child,e!==null))for(QO(e,t,n),e=e.sibling;e!==null;)QO(e,t,n),e=e.sibling}function eP(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(eP(e,t,n),e=e.sibling;e!==null;)eP(e,t,n),e=e.sibling}var Hi=null,Ao=!1;function cc(e,t,n){for(n=n.child;n!==null;)cq(e,t,n),n=n.sibling}function cq(e,t,n){if(Rl&&typeof Rl.onCommitFiberUnmount=="function")try{Rl.onCommitFiberUnmount(h2,n)}catch{}switch(n.tag){case 5:ca||hg(n,t);case 6:var r=Hi,i=Ao;Hi=null,cc(e,t,n),Hi=r,Ao=i,Hi!==null&&(Ao?(e=Hi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Hi.removeChild(n.stateNode));break;case 18:Hi!==null&&(Ao?(e=Hi,n=n.stateNode,e.nodeType===8?EN(e.parentNode,n):e.nodeType===1&&EN(e,n),Kb(e)):EN(Hi,n.stateNode));break;case 4:r=Hi,i=Ao,Hi=n.stateNode.containerInfo,Ao=!0,cc(e,t,n),Hi=r,Ao=i;break;case 0:case 11:case 14:case 15:if(!ca&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&((a&2)!==0||(a&4)!==0)&&JO(n,t,s),i=i.next}while(i!==r)}cc(e,t,n);break;case 1:if(!ca&&(hg(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Or(n,t,o)}cc(e,t,n);break;case 21:cc(e,t,n);break;case 22:n.mode&1?(ca=(r=ca)||n.memoizedState!==null,cc(e,t,n),ca=r):cc(e,t,n);break;default:cc(e,t,n)}}function Z4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nge),t.forEach(function(r){var i=pge.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function No(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;o!==null;){switch(o.tag){case 5:Hi=o.stateNode,Ao=!1;break e;case 3:Hi=o.stateNode.containerInfo,Ao=!0;break e;case 4:Hi=o.stateNode.containerInfo,Ao=!0;break e}o=o.return}if(Hi===null)throw Error(De(160));cq(a,s,i),Hi=null,Ao=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Or(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dq(t,e),t=t.sibling}function dq(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(No(t,e),pl(e),r&4){try{Tb(3,e,e.return),x2(3,e)}catch(g){Or(e,e.return,g)}try{Tb(5,e,e.return)}catch(g){Or(e,e.return,g)}}break;case 1:No(t,e),pl(e),r&512&&n!==null&&hg(n,n.return);break;case 5:if(No(t,e),pl(e),r&512&&n!==null&&hg(n,n.return),e.flags&32){var i=e.stateNode;try{Hb(i,"")}catch(g){Or(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=n!==null?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&P7(i,a),SO(o,s);var u=SO(o,a);for(s=0;s<l.length;s+=2){var c=l[s],d=l[s+1];c==="style"?L7(i,d):c==="dangerouslySetInnerHTML"?R7(i,d):c==="children"?Hb(i,d):SA(i,c,d,u)}switch(o){case"input":bO(i,a);break;case"textarea":M7(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?wg(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?wg(i,!!a.multiple,a.defaultValue,!0):wg(i,!!a.multiple,a.multiple?[]:"",!1))}i[Qb]=a}catch(g){Or(e,e.return,g)}}break;case 6:if(No(t,e),pl(e),r&4){if(e.stateNode===null)throw Error(De(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Or(e,e.return,g)}}break;case 3:if(No(t,e),pl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kb(t.containerInfo)}catch(g){Or(e,e.return,g)}break;case 4:No(t,e),pl(e);break;case 13:No(t,e),pl(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(rR=Lr())),r&4&&Z4(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ca=(u=ca)||c,No(t,e),ca=u):No(t,e),pl(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(lt=e,c=e.child;c!==null;){for(d=lt=c;lt!==null;){switch(p=lt,h=p.child,p.tag){case 0:case 11:case 14:case 15:Tb(4,p,p.return);break;case 1:hg(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Or(r,n,g)}}break;case 5:hg(p,p.return);break;case 22:if(p.memoizedState!==null){J4(d);continue}}h!==null?(h.return=p,lt=h):J4(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=D7("display",s))}catch(g){Or(e,e.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Or(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:No(t,e),pl(e),r&4&&Z4(e);break;case 21:break;default:No(t,e),pl(e)}}function pl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(uq(n)){var r=n;break e}n=n.return}throw Error(De(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Hb(i,""),r.flags&=-33);var a=K4(e);eP(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=K4(e);QO(e,o,s);break;default:throw Error(De(161))}}catch(l){Or(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ige(e,t,n){lt=e,pq(e)}function pq(e,t,n){for(var r=(e.mode&1)!==0;lt!==null;){var i=lt,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ux;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ca;o=Ux;var u=ca;if(Ux=s,(ca=l)&&!u)for(lt=i;lt!==null;)s=lt,l=s.child,s.tag===22&&s.memoizedState!==null?Y4(i):l!==null?(l.return=s,lt=l):Y4(i);for(;a!==null;)lt=a,pq(a),a=a.sibling;lt=i,Ux=o,ca=u}X4(e)}else(i.subtreeFlags&8772)!==0&&a!==null?(a.return=i,lt=a):X4(e)}}function X4(e){for(;lt!==null;){var t=lt;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ca||x2(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ca)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&M4(t,a,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}M4(t,s,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Kb(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}ca||t.flags&512&&YO(t)}catch(p){Or(t,t.return,p)}}if(t===e){lt=null;break}if(n=t.sibling,n!==null){n.return=t.return,lt=n;break}lt=t.return}}function J4(e){for(;lt!==null;){var t=lt;if(t===e){lt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,lt=n;break}lt=t.return}}function Y4(e){for(;lt!==null;){var t=lt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{x2(4,t)}catch(l){Or(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Or(t,i,l)}}var a=t.return;try{YO(t)}catch(l){Or(t,a,l)}break;case 5:var s=t.return;try{YO(t)}catch(l){Or(t,s,l)}}}catch(l){Or(t,t.return,l)}if(t===e){lt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,lt=o;break}lt=t.return}}var age=Math.ceil,nS=Bu.ReactCurrentDispatcher,tR=Bu.ReactCurrentOwner,lo=Bu.ReactCurrentBatchConfig,mn=0,Pi=null,Jr=null,Ji=0,Is=0,fg=Id(0),yi=0,a1=null,eh=0,_2=0,nR=0,Nb=null,rs=null,rR=0,qg=1/0,cu=null,rS=!1,tP=null,qc=null,Gx=!1,Mc=null,iS=0,Eb=0,nP=null,nk=-1,rk=0;function Da(){return(mn&6)!==0?Lr():nk!==-1?nk:nk=Lr()}function Kc(e){return(e.mode&1)===0?1:(mn&2)!==0&&Ji!==0?Ji&-Ji:Vme.transition!==null?(rk===0&&(rk=Z7()),rk):(e=Bn,e!==0||(e=window.event,e=e===void 0?16:n9(e.type)),e)}function Bo(e,t,n,r){if(50<Eb)throw Eb=0,nP=null,Error(De(185));W1(e,n,r),((mn&2)===0||e!==Pi)&&(e===Pi&&((mn&2)===0&&(_2|=n),yi===4&&Nc(e,Ji)),ds(e,r),n===1&&mn===0&&(t.mode&1)===0&&(qg=Lr()+500,v2&&$d()))}function ds(e,t){var n=e.callbackNode;Vfe(e,t);var r=Wk(e,e===Pi?Ji:0);if(r===0)n!==null&&o4(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&o4(n),t===1)e.tag===0?Wme(Q4.bind(null,e)):x9(Q4.bind(null,e)),Lme(function(){(mn&6)===0&&$d()}),n=null;else{switch(X7(r)){case 1:n=NA;break;case 4:n=q7;break;case 16:n=Bk;break;case 536870912:n=K7;break;default:n=Bk}n=wq(n,hq.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hq(e,t){if(nk=-1,rk=0,(mn&6)!==0)throw Error(De(327));var n=e.callbackNode;if(Cg()&&e.callbackNode!==n)return null;var r=Wk(e,e===Pi?Ji:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=aS(e,r);else{t=r;var i=mn;mn|=2;var a=mq();(Pi!==e||Ji!==t)&&(cu=null,qg=Lr()+500,Rp(e,t));do try{lge();break}catch(o){fq(e,o)}while(1);VA(),nS.current=a,mn=i,Jr!==null?t=0:(Pi=null,Ji=0,t=yi)}if(t!==0){if(t===2&&(i=NO(e),i!==0&&(r=i,t=rP(e,i))),t===1)throw n=a1,Rp(e,0),Nc(e,r),ds(e,Lr()),n;if(t===6)Nc(e,r);else{if(i=e.current.alternate,(r&30)===0&&!sge(i)&&(t=aS(e,r),t===2&&(a=NO(e),a!==0&&(r=a,t=rP(e,a))),t===1))throw n=a1,Rp(e,0),Nc(e,r),ds(e,Lr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(De(345));case 2:up(e,rs,cu);break;case 3:if(Nc(e,r),(r&130023424)===r&&(t=rR+500-Lr(),10<t)){if(Wk(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Da(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=LO(up.bind(null,e,rs,cu),t);break}up(e,rs,cu);break;case 4:if(Nc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-zo(r);a=1<<s,s=t[s],s>i&&(i=s),r&=~a}if(r=i,r=Lr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*age(r/1960))-r,10<r){e.timeoutHandle=LO(up.bind(null,e,rs,cu),r);break}up(e,rs,cu);break;case 5:up(e,rs,cu);break;default:throw Error(De(329))}}}return ds(e,Lr()),e.callbackNode===n?hq.bind(null,e):null}function rP(e,t){var n=Nb;return e.current.memoizedState.isDehydrated&&(Rp(e,t).flags|=256),e=aS(e,t),e!==2&&(t=rs,rs=n,t!==null&&iP(t)),e}function iP(e){rs===null?rs=e:rs.push.apply(rs,e)}function sge(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!qo(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nc(e,t){for(t&=~nR,t&=~_2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zo(t),r=1<<n;e[n]=-1,t&=~r}}function Q4(e){if((mn&6)!==0)throw Error(De(327));Cg();var t=Wk(e,0);if((t&1)===0)return ds(e,Lr()),null;var n=aS(e,t);if(e.tag!==0&&n===2){var r=NO(e);r!==0&&(t=r,n=rP(e,r))}if(n===1)throw n=a1,Rp(e,0),Nc(e,t),ds(e,Lr()),n;if(n===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,up(e,rs,cu),ds(e,Lr()),null}function iR(e,t){var n=mn;mn|=1;try{return e(t)}finally{mn=n,mn===0&&(qg=Lr()+500,v2&&$d())}}function th(e){Mc!==null&&Mc.tag===0&&(mn&6)===0&&Cg();var t=mn;mn|=1;var n=lo.transition,r=Bn;try{if(lo.transition=null,Bn=1,e)return e()}finally{Bn=r,lo.transition=n,mn=t,(mn&6)===0&&$d()}}function aR(){Is=fg.current,ur(fg)}function Rp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dme(n)),Jr!==null)for(n=Jr.return;n!==null;){var r=n;switch(zA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gk();break;case 3:Ug(),ur(us),ur(ga),KA();break;case 5:qA(r);break;case 4:Ug();break;case 13:ur(_r);break;case 19:ur(_r);break;case 10:jA(r.type._context);break;case 22:case 23:aR()}n=n.return}if(Pi=e,Jr=e=Zc(e.current,null),Ji=Is=t,yi=0,a1=null,nR=_2=eh=0,rs=Nb=null,Cp!==null){for(t=0;t<Cp.length;t++)if(n=Cp[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Cp=null}return e}function fq(e,t){do{var n=Jr;try{if(VA(),Q_.current=tS,eS){for(var r=Sr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}eS=!1}if(Qp=0,Ii=di=Sr=null,$b=!1,n1=0,tR.current=null,n===null||n.return===null){yi=1,a1=t,Jr=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Ji,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if((c.mode&1)===0&&(d===0||d===11||d===15)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=B4(s);if(h!==null){h.flags&=-257,W4(h,s,o,a,t),h.mode&1&&z4(a,u,t),t=h,l=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}else{if((t&1)===0){z4(a,u,t),sR();break e}l=Error(De(426))}}else if(mr&&o.mode&1){var y=B4(s);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),W4(y,s,o,a,t),BA(Gg(l,o));break e}}a=l=Gg(l,o),yi!==4&&(yi=2),Nb===null?Nb=[a]:Nb.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=J9(a,l,t);P4(a,v);break e;case 1:o=l;var b=a.type,_=a.stateNode;if((a.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qc===null||!qc.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=Y9(a,o,t);P4(a,k);break e}}a=a.return}while(a!==null)}yq(n)}catch(S){t=S,Jr===n&&n!==null&&(Jr=n=n.return);continue}break}while(1)}function mq(){var e=nS.current;return nS.current=tS,e===null?tS:e}function sR(){(yi===0||yi===3||yi===2)&&(yi=4),Pi===null||(eh&268435455)===0&&(_2&268435455)===0||Nc(Pi,Ji)}function aS(e,t){var n=mn;mn|=2;var r=mq();(Pi!==e||Ji!==t)&&(cu=null,Rp(e,t));do try{oge();break}catch(i){fq(e,i)}while(1);if(VA(),mn=n,nS.current=r,Jr!==null)throw Error(De(261));return Pi=null,Ji=0,yi}function oge(){for(;Jr!==null;)gq(Jr)}function lge(){for(;Jr!==null&&!Mfe();)gq(Jr)}function gq(e){var t=bq(e.alternate,e,Is);e.memoizedProps=e.pendingProps,t===null?yq(e):Jr=t,tR.current=null}function yq(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=ege(n,t,Is),n!==null){Jr=n;return}}else{if(n=tge(n,t),n!==null){n.flags&=32767,Jr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yi=6,Jr=null;return}}if(t=t.sibling,t!==null){Jr=t;return}Jr=t=e}while(t!==null);yi===0&&(yi=5)}function up(e,t,n){var r=Bn,i=lo.transition;try{lo.transition=null,Bn=1,uge(e,t,n,r)}finally{lo.transition=i,Bn=r}return null}function uge(e,t,n,r){do Cg();while(Mc!==null);if((mn&6)!==0)throw Error(De(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(jfe(e,a),e===Pi&&(Jr=Pi=null,Ji=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Gx||(Gx=!0,wq(Bk,function(){return Cg(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=lo.transition,lo.transition=null;var s=Bn;Bn=1;var o=mn;mn|=4,tR.current=null,rge(e,n),dq(n,e),Nme(RO),Vk=!!AO,RO=AO=null,e.current=n,ige(n),Afe(),mn=o,Bn=s,lo.transition=a}else e.current=n;if(Gx&&(Gx=!1,Mc=e,iS=i),a=e.pendingLanes,a===0&&(qc=null),Lfe(n.stateNode),ds(e,Lr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rS)throw rS=!1,e=tP,tP=null,e;return(iS&1)!==0&&e.tag!==0&&Cg(),a=e.pendingLanes,(a&1)!==0?e===nP?Eb++:(Eb=0,nP=e):Eb=0,$d(),null}function Cg(){if(Mc!==null){var e=X7(iS),t=lo.transition,n=Bn;try{if(lo.transition=null,Bn=16>e?16:e,Mc===null)var r=!1;else{if(e=Mc,Mc=null,iS=0,(mn&6)!==0)throw Error(De(331));var i=mn;for(mn|=4,lt=e.current;lt!==null;){var a=lt,s=a.child;if((lt.flags&16)!==0){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(lt=u;lt!==null;){var c=lt;switch(c.tag){case 0:case 11:case 15:Tb(8,c,a)}var d=c.child;if(d!==null)d.return=c,lt=d;else for(;lt!==null;){c=lt;var p=c.sibling,h=c.return;if(lq(c),c===u){lt=null;break}if(p!==null){p.return=h,lt=p;break}lt=h}}}var m=a.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}lt=a}}if((a.subtreeFlags&2064)!==0&&s!==null)s.return=a,lt=s;else e:for(;lt!==null;){if(a=lt,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Tb(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,lt=v;break e}lt=a.return}}var b=e.current;for(lt=b;lt!==null;){s=lt;var _=s.child;if((s.subtreeFlags&2064)!==0&&_!==null)_.return=s,lt=_;else e:for(s=b;lt!==null;){if(o=lt,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:x2(9,o)}}catch(S){Or(o,o.return,S)}if(o===s){lt=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,lt=k;break e}lt=o.return}}if(mn=i,$d(),Rl&&typeof Rl.onPostCommitFiberRoot=="function")try{Rl.onPostCommitFiberRoot(h2,e)}catch{}r=!0}return r}finally{Bn=n,lo.transition=t}}return!1}function e5(e,t,n){t=Gg(n,t),t=J9(e,t,1),e=Gc(e,t,1),t=Da(),e!==null&&(W1(e,1,t),ds(e,t))}function Or(e,t,n){if(e.tag===3)e5(e,e,n);else for(;t!==null;){if(t.tag===3){e5(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qc===null||!qc.has(r))){e=Gg(n,e),e=Y9(t,e,1),t=Gc(t,e,1),e=Da(),t!==null&&(W1(t,1,e),ds(t,e));break}}t=t.return}}function cge(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Da(),e.pingedLanes|=e.suspendedLanes&n,Pi===e&&(Ji&n)===n&&(yi===4||yi===3&&(Ji&130023424)===Ji&&500>Lr()-rR?Rp(e,0):nR|=n),ds(e,t)}function vq(e,t){t===0&&((e.mode&1)===0?t=1:(t=Dx,Dx<<=1,(Dx&130023424)===0&&(Dx=4194304)));var n=Da();e=Ou(e,t),e!==null&&(W1(e,t,n),ds(e,n))}function dge(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vq(e,n)}function pge(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(De(314))}r!==null&&r.delete(t),vq(e,n)}var bq;bq=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||us.current)ss=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ss=!1,Qme(e,t,n);ss=(e.flags&131072)!==0}else ss=!1,mr&&(t.flags&1048576)!==0&&_9(t,Zk,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;tk(e,t),e=t.pendingProps;var i=Vg(t,ga.current);Sg(t,n),i=XA(null,t,r,e,i,n);var a=JA();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cs(r)?(a=!0,qk(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,UA(t),i.updater=b2,t.stateNode=i,i._reactInternals=t,HO(t,r,e,n),t=qO(null,t,r,!0,a,n)):(t.tag=0,mr&&a&&FA(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(tk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=fge(r),e=Mo(r,e),i){case 0:t=GO(null,t,r,e,n);break e;case 1:t=H4(null,t,r,e,n);break e;case 11:t=V4(null,t,r,e,n);break e;case 14:t=j4(null,t,r,Mo(r.type,e),n);break e}throw Error(De(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mo(r,i),GO(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mo(r,i),H4(e,t,r,i,n);case 3:e:{if(nq(t),e===null)throw Error(De(387));r=t.pendingProps,a=t.memoizedState,i=a.element,I9(e,t),Yk(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Gg(Error(De(423)),t),t=U4(e,t,r,n,i);break e}else if(r!==i){i=Gg(Error(De(424)),t),t=U4(e,t,r,n,i);break e}else for(Ts=Uc(t.stateNode.containerInfo.firstChild),Ms=t,mr=!0,Ro=null,n=E9(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jg(),r===i){t=Pu(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return O9(t),e===null&&WO(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,DO(r,i)?s=null:a!==null&&DO(r,a)&&(t.flags|=32),tq(e,t),Pa(e,t,s,n),t.child;case 6:return e===null&&WO(t),null;case 13:return rq(e,t,n);case 4:return GA(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Hg(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mo(r,i),V4(e,t,r,i,n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:return Pa(e,t,t.pendingProps.children,n),t.child;case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,tr(Xk,r._currentValue),r._currentValue=s,a!==null)if(qo(a.value,s)){if(a.children===i.children&&!us.current){t=Pu(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=_u(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),VO(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(De(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),VO(s,n,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sg(t,n),i=ho(i),r=r(i),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return r=t.type,i=Mo(r,t.pendingProps),i=Mo(r.type,i),j4(e,t,r,i,n);case 15:return Q9(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Mo(r,i),tk(e,t),t.tag=1,cs(r)?(e=!0,qk(t)):e=!1,Sg(t,n),T9(t,r,i),HO(t,r,i,n),qO(null,t,r,!0,e,n);case 19:return iq(e,t,n);case 22:return eq(e,t,n)}throw Error(De(156,t.tag))};function wq(e,t){return G7(e,t)}function hge(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(e,t,n,r){return new hge(e,t,n,r)}function oR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fge(e){if(typeof e=="function")return oR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===IA)return 11;if(e===$A)return 14}return 2}function Zc(e,t){var n=e.alternate;return n===null?(n=ao(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ik(e,t,n,r,i,a){var s=2;if(r=e,typeof e=="function")oR(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case ig:return Dp(n.children,i,a,t);case CA:s=8,i|=8;break;case fO:return e=ao(12,n,t,i|2),e.elementType=fO,e.lanes=a,e;case mO:return e=ao(13,n,t,i),e.elementType=mO,e.lanes=a,e;case gO:return e=ao(19,n,t,i),e.elementType=gO,e.lanes=a,e;case N7:return k2(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $7:s=10;break e;case T7:s=9;break e;case IA:s=11;break e;case $A:s=14;break e;case _c:s=16,r=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=ao(s,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Dp(e,t,n,r){return e=ao(7,e,r,t),e.lanes=n,e}function k2(e,t,n,r){return e=ao(22,e,r,t),e.elementType=N7,e.lanes=n,e.stateNode={isHidden:!1},e}function FN(e,t,n){return e=ao(6,e,null,t),e.lanes=n,e}function zN(e,t,n){return t=ao(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mge(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bN(0),this.expirationTimes=bN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bN(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lR(e,t,n,r,i,a,s,o,l){return e=new mge(e,t,n,o,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ao(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UA(a),e}function gge(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rg,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xq(e){if(!e)return sd;e=e._reactInternals;e:{if(Ph(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var n=e.type;if(cs(n))return w9(e,n,t)}return t}function _q(e,t,n,r,i,a,s,o,l){return e=lR(n,r,!0,e,i,a,s,o,l),e.context=xq(null),n=e.current,r=Da(),i=Kc(n),a=_u(r,i),a.callback=t!=null?t:null,Gc(n,a,i),e.current.lanes=i,W1(e,i,r),ds(e,r),e}function S2(e,t,n,r){var i=t.current,a=Da(),s=Kc(i);return n=xq(n),t.context===null?t.context=n:t.pendingContext=n,t=_u(a,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Gc(i,t,s),e!==null&&(Bo(e,i,s,a),Y_(e,i,s)),s}function sS(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function t5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uR(e,t){t5(e,t),(e=e.alternate)&&t5(e,t)}function yge(){return null}var kq=typeof reportError=="function"?reportError:function(e){console.error(e)};function cR(e){this._internalRoot=e}C2.prototype.render=cR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));S2(e,t,null,null)};C2.prototype.unmount=cR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;th(function(){S2(null,e,null,null)}),t[Eu]=null}};function C2(e){this._internalRoot=e}C2.prototype.unstable_scheduleHydration=function(e){if(e){var t=Q7();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tc.length&&t!==0&&t<Tc[n].priority;n++);Tc.splice(n,0,e),n===0&&t9(e)}};function dR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function I2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function n5(){}function vge(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=sS(s);a.call(u)}}var s=_q(t,r,e,0,null,!1,!1,"",n5);return e._reactRootContainer=s,e[Eu]=s.current,Jb(e.nodeType===8?e.parentNode:e),th(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=sS(l);o.call(u)}}var l=lR(e,0,!1,null,null,!1,!1,"",n5);return e._reactRootContainer=l,e[Eu]=l.current,Jb(e.nodeType===8?e.parentNode:e),th(function(){S2(t,l,n,r)}),l}function $2(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=sS(s);o.call(l)}}S2(t,s,e,i)}else s=vge(n,t,e,i,r);return sS(s)}J7=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ab(t.pendingLanes);n!==0&&(EA(t,n|1),ds(t,Lr()),(mn&6)===0&&(qg=Lr()+500,$d()))}break;case 13:th(function(){var r=Ou(e,1);if(r!==null){var i=Da();Bo(r,e,1,i)}}),uR(e,1)}};OA=function(e){if(e.tag===13){var t=Ou(e,134217728);if(t!==null){var n=Da();Bo(t,e,134217728,n)}uR(e,134217728)}};Y7=function(e){if(e.tag===13){var t=Kc(e),n=Ou(e,t);if(n!==null){var r=Da();Bo(n,e,t,r)}uR(e,t)}};Q7=function(){return Bn};e9=function(e,t){var n=Bn;try{return Bn=e,t()}finally{Bn=n}};IO=function(e,t,n){switch(t){case"input":if(bO(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=y2(r);if(!i)throw Error(De(90));O7(r),bO(r,i)}}}break;case"textarea":M7(e,n);break;case"select":t=n.value,t!=null&&wg(e,!!n.multiple,t,!1)}};B7=iR;W7=th;var bge={usingClientEntryPoint:!1,Events:[j1,lg,y2,F7,z7,iR]},F0={findFiberByHostInstance:Sp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},wge={bundleType:F0.bundleType,version:F0.version,rendererPackageName:F0.rendererPackageName,rendererConfig:F0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=H7(e),e===null?null:e.stateNode},findFiberByHostInstance:F0.findFiberByHostInstance||yge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qx.isDisabled&&qx.supportsFiber)try{h2=qx.inject(wge),Rl=qx}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bge;Vs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dR(t))throw Error(De(200));return gge(e,t,null,n)};Vs.createRoot=function(e,t){if(!dR(e))throw Error(De(299));var n=!1,r="",i=kq;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=lR(e,1,!1,null,null,n,!1,r,i),e[Eu]=t.current,Jb(e.nodeType===8?e.parentNode:e),new cR(t)};Vs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=H7(t),e=e===null?null:e.stateNode,e};Vs.flushSync=function(e){return th(e)};Vs.hydrate=function(e,t,n){if(!I2(t))throw Error(De(200));return $2(null,e,t,!0,n)};Vs.hydrateRoot=function(e,t,n){if(!dR(e))throw Error(De(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=kq;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=_q(t,null,e,1,n!=null?n:null,i,!1,a,s),e[Eu]=t.current,Jb(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new C2(t)};Vs.render=function(e,t,n){if(!I2(t))throw Error(De(200));return $2(null,e,t,!1,n)};Vs.unmountComponentAtNode=function(e){if(!I2(e))throw Error(De(40));return e._reactRootContainer?(th(function(){$2(null,null,e,!1,function(){e._reactRootContainer=null,e[Eu]=null})}),!0):!1};Vs.unstable_batchedUpdates=iR;Vs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!I2(n))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return $2(e,t,n,!1,r)};Vs.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=Vs})(Kl);const Ob=yA(Kl.exports),xge=m7({__proto__:null,default:Ob},[Kl.exports]);var r5=Kl.exports;pO.createRoot=r5.createRoot,pO.hydrateRoot=r5.hydrateRoot;const _ge={colorScheme:"dark"};var Mr=function(){return Mr=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Mr.apply(this,arguments)};function Sq(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s1(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var ak="right-scroll-bar-position",sk="width-before-scroll-bar",kge="with-scroll-bars-hidden",Sge="--removed-body-scroll-bar-size";function Cge(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ige(e,t){var n=I.exports.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}function $ge(e,t){return Ige(t||null,function(n){return e.forEach(function(r){return Cge(r,n)})})}var T2={exports:{}},N2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tge=I.exports,Nge=Symbol.for("react.element"),Ege=Symbol.for("react.fragment"),Oge=Object.prototype.hasOwnProperty,Pge=Tge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mge={key:!0,ref:!0,__self:!0,__source:!0};function Cq(e,t,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Oge.call(t,r)&&!Mge.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Nge,type:e,key:a,ref:s,props:i,_owner:Pge.current}}N2.Fragment=Ege;N2.jsx=Cq;N2.jsxs=Cq;(function(e){e.exports=N2})(T2);const Fe=T2.exports.Fragment,x=T2.exports.jsx,B=T2.exports.jsxs;function Age(e){return e}function Rge(e,t){t===void 0&&(t=Age);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var s=t(a,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(a){for(r=!0;n.length;){var s=n;n=[],s.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(a),s=n}var l=function(){var c=s;s=[],c.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){s.push(c),u()},filter:function(c){return s=s.filter(c),n}}}};return i}function Dge(e){e===void 0&&(e={});var t=Rge(null);return t.options=Mr({async:!0,ssr:!1},e),t}var Iq=function(e){var t=e.sideCar,n=Sq(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return x(r,{...Mr({},n)})};Iq.isSideCarExport=!0;function Lge(e,t){return e.useMedium(t),Iq}var $q=Dge(),BN=function(){},E2=I.exports.forwardRef(function(e,t){var n=I.exports.useRef(null),r=I.exports.useState({onScrollCapture:BN,onWheelCapture:BN,onTouchMoveCapture:BN}),i=r[0],a=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,p=e.sideCar,h=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,_=Sq(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,S=$ge([n,t]),$=Mr(Mr({},_),i);return B(Fe,{children:[c&&x(k,{sideCar:$q,removeScrollBar:u,shards:d,noIsolation:h,inert:m,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:b}),s?I.exports.cloneElement(I.exports.Children.only(o),Mr(Mr({},$),{ref:S})):x(v,{...Mr({},$,{className:l,ref:S}),children:o})]})});E2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};E2.classNames={fullWidth:sk,zeroRight:ak};var Fge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zge(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Fge();return t&&e.setAttribute("nonce",t),e}function Bge(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wge(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Vge=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zge())&&(Bge(t,n),Wge(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jge=function(){var e=Vge();return function(t,n){I.exports.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Tq=function(){var e=jge(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Hge={left:0,top:0,right:0,gap:0},WN=function(e){return parseInt(e||"",10)||0},Uge=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[WN(n),WN(r),WN(i)]},Gge=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Hge;var t=Uge(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},qge=Tq(),Kge=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(kge,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ak,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(sk,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ak," .").concat(ak,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sk," .").concat(sk,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Sge,": ").concat(o,`px;
  }
`)},Zge=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r,a=I.exports.useMemo(function(){return Gge(i)},[i]);return x(qge,{styles:Kge(a,!t,i,n?"":"!important")})},aP=!1;if(typeof window<"u")try{var Kx=Object.defineProperty({},"passive",{get:function(){return aP=!0,!0}});window.addEventListener("test",Kx,Kx),window.removeEventListener("test",Kx,Kx)}catch{aP=!1}var Rm=aP?{passive:!1}:!1,Xge=function(e){return e.tagName==="TEXTAREA"},Nq=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Xge(e)&&n[t]==="visible")},Jge=function(e){return Nq(e,"overflowY")},Yge=function(e){return Nq(e,"overflowX")},i5=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Eq(e,r);if(i){var a=Oq(e,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Qge=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},eye=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Eq=function(e,t){return e==="v"?Jge(t):Yge(t)},Oq=function(e,t){return e==="v"?Qge(t):eye(t)},tye=function(e,t){return e==="h"&&t==="rtl"?-1:1},nye=function(e,t,n,r,i){var a=tye(e,window.getComputedStyle(t).direction),s=a*r,o=n.target,l=t.contains(o),u=!1,c=s>0,d=0,p=0;do{var h=Oq(e,o),m=h[0],g=h[1],y=h[2],v=g-y-a*m;(m||v)&&Eq(e,o)&&(d+=v,p+=m),o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(c&&(i&&d===0||!i&&s>d)||!c&&(i&&p===0||!i&&-s>p))&&(u=!0),u},Zx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},a5=function(e){return[e.deltaX,e.deltaY]},s5=function(e){return e&&"current"in e?e.current:e},rye=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iye=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},aye=0,Dm=[];function sye(e){var t=I.exports.useRef([]),n=I.exports.useRef([0,0]),r=I.exports.useRef(),i=I.exports.useState(aye++)[0],a=I.exports.useState(Tq)[0],s=I.exports.useRef(e);I.exports.useEffect(function(){s.current=e},[e]),I.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=s1([e.lockRef.current],(e.shards||[]).map(s5),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=I.exports.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!s.current.allowPinchZoom;var v=Zx(g),b=n.current,_="deltaX"in g?g.deltaX:b[0]-v[0],k="deltaY"in g?g.deltaY:b[1]-v[1],S,$=g.target,N=Math.abs(_)>Math.abs(k)?"h":"v";if("touches"in g&&N==="h"&&$.type==="range")return!1;var P=i5(N,$);if(!P)return!0;if(P?S=N:(S=N==="v"?"h":"v",P=i5(N,$)),!P)return!1;if(!r.current&&"changedTouches"in g&&(_||k)&&(r.current=S),!S)return!0;var D=r.current||S;return nye(D,y,g,D==="h"?_:k,!0)},[]),l=I.exports.useCallback(function(g){var y=g;if(!(!Dm.length||Dm[Dm.length-1]!==a)){var v="deltaY"in y?a5(y):Zx(y),b=t.current.filter(function(S){return S.name===y.type&&S.target===y.target&&rye(S.delta,v)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var _=(s.current.shards||[]).map(s5).filter(Boolean).filter(function(S){return S.contains(y.target)}),k=_.length>0?o(y,_[0]):!s.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),u=I.exports.useCallback(function(g,y,v,b){var _={name:g,delta:y,target:v,should:b};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(k){return k!==_})},1)},[]),c=I.exports.useCallback(function(g){n.current=Zx(g),r.current=void 0},[]),d=I.exports.useCallback(function(g){u(g.type,a5(g),g.target,o(g,e.lockRef.current))},[]),p=I.exports.useCallback(function(g){u(g.type,Zx(g),g.target,o(g,e.lockRef.current))},[]);I.exports.useEffect(function(){return Dm.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Rm),document.addEventListener("touchmove",l,Rm),document.addEventListener("touchstart",c,Rm),function(){Dm=Dm.filter(function(g){return g!==a}),document.removeEventListener("wheel",l,Rm),document.removeEventListener("touchmove",l,Rm),document.removeEventListener("touchstart",c,Rm)}},[]);var h=e.removeScrollBar,m=e.inert;return B(Fe,{children:[m?x(a,{styles:iye(i)}):null,h?x(Zge,{gapMode:e.gapMode}):null]})}const oye=Lge($q,sye);var Pq=I.exports.forwardRef(function(e,t){return x(E2,{...Mr({},e,{ref:t,sideCar:oye})})});Pq.classNames=E2.classNames;const lye=Pq;function sP(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function uye(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function cye(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function dye(e,t,n){return sP(e,n)===sP(t,n)}function pye({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:a="rtl",orientation:s}){return o=>{var l;n==null||n(o);const u=Array.from(((l=sP(o.currentTarget,e))==null?void 0:l.querySelectorAll(t))||[]).filter(g=>dye(o.currentTarget,g,e)),c=u.findIndex(g=>o.currentTarget===g),d=cye(c,u,r),p=uye(c,u,r),h=a==="rtl"?p:d,m=a==="rtl"?d:p;switch(o.key){case"ArrowRight":{s==="horizontal"&&(o.stopPropagation(),o.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowLeft":{s==="horizontal"&&(o.stopPropagation(),o.preventDefault(),u[m].focus(),i&&u[m].click());break}case"ArrowUp":{s==="vertical"&&(o.stopPropagation(),o.preventDefault(),u[p].focus(),i&&u[p].click());break}case"ArrowDown":{s==="vertical"&&(o.stopPropagation(),o.preventDefault(),u[d].focus(),i&&u[d].click());break}case"Home":{o.stopPropagation(),o.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{o.stopPropagation(),o.preventDefault();const g=u.length-1;!u[g].disabled&&u[g].focus();break}}}}function Ay(e){const t=I.exports.createContext(null);return[({children:i,value:a})=>x(t.Provider,{value:a,children:i}),()=>{const i=I.exports.useContext(t);if(i===null)throw new Error(e);return i}]}function pR(e){return Array.isArray(e)?e:[e]}function o5(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const hye=()=>{};function fye(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||hye:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function oS(e,t){return n=>{e==null||e(n),t==null||t(n)}}function mye(e){return Object.keys(e)}function Mq({data:e}){const t=[],n=[],r=e.reduce((i,a,s)=>(a.group?i[a.group]?i[a.group].push(s):i[a.group]=[s]:n.push(s),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(a=>e[a]))}),t.push(...n.map(i=>e[i])),t}function gye(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const yye=typeof window<"u"?I.exports.useLayoutEffect:I.exports.useEffect;function Aq(e){function t(r){const i=Object.keys(r).reduce((a,s)=>(a[`${e}:${s}`]=o=>r[s](o.detail),a),{});yye(()=>(Object.keys(i).forEach(a=>{window.removeEventListener(a,i[a]),window.addEventListener(a,i[a])}),()=>Object.keys(i).forEach(a=>{window.removeEventListener(a,i[a])})),[i])}function n(r){return(...i)=>gye(`${e}:${String(r)}`,i[0])}return[t,n]}function U1(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==kr.Fragment:!1}function Rq(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Rq(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Dq(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=Rq(t))&&(r&&(r+=" "),r+=n);return r}const Lq={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function vye(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var bye=Object.defineProperty,l5=Object.getOwnPropertySymbols,wye=Object.prototype.hasOwnProperty,xye=Object.prototype.propertyIsEnumerable,u5=(e,t,n)=>t in e?bye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c5=(e,t)=>{for(var n in t||(t={}))wye.call(t,n)&&u5(e,n,t[n]);if(l5)for(var n of l5(t))xye.call(t,n)&&u5(e,n,t[n]);return e};function _ye(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:c5({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:c5({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function G1(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function hR(e){const t=G1(e);return(n,r,i=!0,a=!0)=>{if(typeof n=="string"&&n.includes(".")){const[o,l]=n.split("."),u=parseInt(l,10);if(o in e.colors&&u>=0&&u<10)return e.colors[o][typeof r=="number"&&!a?r:u]}const s=typeof r=="number"?r:t();return n in e.colors?e.colors[n][s]:i?e.colors[e.primaryColor][s]:n}}function Fq(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function kye(e,...t){return`linear-gradient(${e}deg, ${Fq(t)})`}function Sye(...e){return`radial-gradient(circle, ${Fq(e)})`}function zq(e){const t=hR(e),n=G1(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function Bq(e){return t=>{if(typeof t=="number")return`${t/16}${e}`;if(typeof t=="string"){const n=t.replace("px","");if(!Number.isNaN(Number(n)))return`${Number(n)/16}${e}`}return t}}const G=Bq("rem"),Xc=Bq("em");function ke({size:e,sizes:t,units:n}){return e in t?t[e]:typeof e=="number"?n==="em"?Xc(e):G(e):e||t.md}function Ko(e){return typeof e=="number"?e:typeof e=="string"&&e.includes("rem")?Number(e.replace("rem",""))*16:typeof e=="string"&&e.includes("em")?Number(e.replace("em",""))*16:Number(e)}function Cye(e){return t=>`@media (min-width: ${Xc(Ko(ke({size:t,sizes:e.breakpoints})))})`}function Iye(e){return t=>`@media (max-width: ${Xc(Ko(ke({size:t,sizes:e.breakpoints}))-1)})`}function $ye(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function Tye(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,a=n&255;return{r,g:i,b:a,a:1}}function Nye(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function fR(e){return $ye(e)?Tye(e):e.startsWith("rgb")?Nye(e):{r:0,g:0,b:0,a:1}}function Xm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(--"))return e;const{r:n,g:r,b:i}=fR(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function Eye(e=0){return{position:"absolute",top:G(e),right:G(e),left:G(e),bottom:G(e)}}function Oye(e,t){if(typeof e=="string"&&e.startsWith("var(--"))return e;const{r:n,g:r,b:i,a}=fR(e),s=1-t,o=l=>Math.round(l*s);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${a})`}function Pye(e,t){if(typeof e=="string"&&e.startsWith("var(--"))return e;const{r:n,g:r,b:i,a}=fR(e),s=o=>Math.round(o+(255-o)*t);return`rgba(${s(n)}, ${s(r)}, ${s(i)}, ${a})`}function Mye(e){return t=>{if(typeof t=="number")return G(t);const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function Aye(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function Rye(e){const t=hR(e),n=G1(e),r=zq(e);return({variant:i,color:a,gradient:s,primaryFallback:o})=>{const l=Aye(a,e);switch(i){case"light":return{border:"transparent",background:Xm(t(a,e.colorScheme==="dark"?8:0,o,!1),e.colorScheme==="dark"?.2:1),color:a==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(a,e.colorScheme==="dark"?2:n("light")),hover:Xm(t(a,e.colorScheme==="dark"?7:1,o,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:a==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(a,e.colorScheme==="dark"?2:n("light")),hover:Xm(t(a,e.colorScheme==="dark"?8:0,o,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(a,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(a,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?Xm(t(a,5,o,!1),.05):Xm(t(a,0,o,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(a,n()),hover:null};case"transparent":return{border:"transparent",color:a==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(a,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(s),color:e.white,border:"transparent",hover:null};default:{const u=n(),c=l.isSplittedColor?l.shade:u,d=l.isSplittedColor?l.key:a;return{border:"transparent",background:t(d,c,o),color:e.white,hover:t(d,c===9?8:c+1)}}}}}function Dye(e){return t=>{const n=G1(e)(t);return e.colors[e.primaryColor][n]}}function Lye(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}function Fye(e){return()=>({userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]})}function zye(e){return()=>e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]}const li={fontStyles:vye,themeColor:hR,focusStyles:_ye,linearGradient:kye,radialGradient:Sye,smallerThan:Iye,largerThan:Cye,rgba:Xm,cover:Eye,darken:Oye,lighten:Pye,radius:Mye,variant:Rye,primaryShade:G1,hover:Lye,gradient:zq,primaryColor:Dye,placeholderStyles:Fye,dimmed:zye};var Bye=Object.defineProperty,Wye=Object.defineProperties,Vye=Object.getOwnPropertyDescriptors,d5=Object.getOwnPropertySymbols,jye=Object.prototype.hasOwnProperty,Hye=Object.prototype.propertyIsEnumerable,p5=(e,t,n)=>t in e?Bye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uye=(e,t)=>{for(var n in t||(t={}))jye.call(t,n)&&p5(e,n,t[n]);if(d5)for(var n of d5(t))Hye.call(t,n)&&p5(e,n,t[n]);return e},Gye=(e,t)=>Wye(e,Vye(t));function Wq(e){return Gye(Uye({},e),{fn:{fontStyles:li.fontStyles(e),themeColor:li.themeColor(e),focusStyles:li.focusStyles(e),largerThan:li.largerThan(e),smallerThan:li.smallerThan(e),radialGradient:li.radialGradient,linearGradient:li.linearGradient,gradient:li.gradient(e),rgba:li.rgba,cover:li.cover,lighten:li.lighten,darken:li.darken,primaryShade:li.primaryShade(e),radius:li.radius(e),variant:li.variant(e),hover:li.hover,primaryColor:li.primaryColor(e),placeholderStyles:li.placeholderStyles(e),dimmed:li.dimmed(e)}})}Object.keys(Lq);const qye={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:Lq,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.1)",sm:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 0.625rem 0.9375rem -0.3125rem, rgba(0, 0, 0, 0.04) 0 0.4375rem 0.4375rem -0.3125rem",md:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 1.25rem 1.5625rem -0.3125rem, rgba(0, 0, 0, 0.04) 0 0.625rem 0.625rem -0.3125rem",lg:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 1.75rem 1.4375rem -0.4375rem, rgba(0, 0, 0, 0.04) 0 0.75rem 0.75rem -0.4375rem",xl:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 2.25rem 1.75rem -0.4375rem, rgba(0, 0, 0, 0.04) 0 1.0625rem 1.0625rem -0.4375rem"},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem"},radius:{xs:"0.125rem",sm:"0.25rem",md:"0.5rem",lg:"1rem",xl:"2rem"},spacing:{xs:"0.625rem",sm:"0.75rem",md:"1rem",lg:"1.25rem",xl:"1.5rem"},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:"2.125rem",lineHeight:1.3,fontWeight:void 0},h2:{fontSize:"1.625rem",lineHeight:1.35,fontWeight:void 0},h3:{fontSize:"1.375rem",lineHeight:1.4,fontWeight:void 0},h4:{fontSize:"1.125rem",lineHeight:1.45,fontWeight:void 0},h5:{fontSize:"1rem",lineHeight:1.5,fontWeight:void 0},h6:{fontSize:"0.875rem",lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(0.0625rem)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:"0.125rem",outline:`0.125rem solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},mR=Wq(qye);function Kye(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Zye(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Xye=function(){function e(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zye(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Kye(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),la="-ms-",lS="-moz-",Sn="-webkit-",Vq="comm",gR="rule",yR="decl",Jye="@import",jq="@keyframes",Yye="@layer",Qye=Math.abs,O2=String.fromCharCode,eve=Object.assign;function tve(e,t){return qi(e,0)^45?(((t<<2^qi(e,0))<<2^qi(e,1))<<2^qi(e,2))<<2^qi(e,3):0}function Hq(e){return e.trim()}function nve(e,t){return(e=t.exec(e))?e[0]:e}function Cn(e,t,n){return e.replace(t,n)}function oP(e,t){return e.indexOf(t)}function qi(e,t){return e.charCodeAt(t)|0}function o1(e,t,n){return e.slice(t,n)}function wl(e){return e.length}function vR(e){return e.length}function Xx(e,t){return t.push(e),e}function rve(e,t){return e.map(t).join("")}var P2=1,Kg=1,Uq=0,ms=0,Zr=0,Ry="";function M2(e,t,n,r,i,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:P2,column:Kg,length:s,return:""}}function z0(e,t){return eve(M2("",null,null,"",null,null,0),e,{length:-e.length},t)}function ive(){return Zr}function ave(){return Zr=ms>0?qi(Ry,--ms):0,Kg--,Zr===10&&(Kg=1,P2--),Zr}function As(){return Zr=ms<Uq?qi(Ry,ms++):0,Kg++,Zr===10&&(Kg=1,P2++),Zr}function Ll(){return qi(Ry,ms)}function ok(){return ms}function q1(e,t){return o1(Ry,e,t)}function l1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Gq(e){return P2=Kg=1,Uq=wl(Ry=e),ms=0,[]}function qq(e){return Ry="",e}function lk(e){return Hq(q1(ms-1,lP(e===91?e+2:e===40?e+1:e)))}function sve(e){for(;(Zr=Ll())&&Zr<33;)As();return l1(e)>2||l1(Zr)>3?"":" "}function ove(e,t){for(;--t&&As()&&!(Zr<48||Zr>102||Zr>57&&Zr<65||Zr>70&&Zr<97););return q1(e,ok()+(t<6&&Ll()==32&&As()==32))}function lP(e){for(;As();)switch(Zr){case e:return ms;case 34:case 39:e!==34&&e!==39&&lP(Zr);break;case 40:e===41&&lP(e);break;case 92:As();break}return ms}function lve(e,t){for(;As()&&e+Zr!==47+10;)if(e+Zr===42+42&&Ll()===47)break;return"/*"+q1(t,ms-1)+"*"+O2(e===47?e:As())}function uve(e){for(;!l1(Ll());)As();return q1(e,ms)}function cve(e){return qq(uk("",null,null,null,[""],e=Gq(e),0,[0],e))}function uk(e,t,n,r,i,a,s,o,l){for(var u=0,c=0,d=s,p=0,h=0,m=0,g=1,y=1,v=1,b=0,_="",k=i,S=a,$=r,N=_;y;)switch(m=b,b=As()){case 40:if(m!=108&&qi(N,d-1)==58){oP(N+=Cn(lk(b),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:N+=lk(b);break;case 9:case 10:case 13:case 32:N+=sve(m);break;case 92:N+=ove(ok()-1,7);continue;case 47:switch(Ll()){case 42:case 47:Xx(dve(lve(As(),ok()),t,n),l);break;default:N+="/"}break;case 123*g:o[u++]=wl(N)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+c:v==-1&&(N=Cn(N,/\f/g,"")),h>0&&wl(N)-d&&Xx(h>32?f5(N+";",r,n,d-1):f5(Cn(N," ","")+";",r,n,d-2),l);break;case 59:N+=";";default:if(Xx($=h5(N,t,n,u,c,i,o,_,k=[],S=[],d),a),b===123)if(c===0)uk(N,t,$,$,k,a,d,o,S);else switch(p===99&&qi(N,3)===110?100:p){case 100:case 108:case 109:case 115:uk(e,$,$,r&&Xx(h5(e,$,$,0,0,i,o,_,i,k=[],d),S),i,S,d,o,r?k:S);break;default:uk(N,$,$,$,[""],S,0,o,S)}}u=c=h=0,g=v=1,_=N="",d=s;break;case 58:d=1+wl(N),h=m;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&ave()==125)continue}switch(N+=O2(b),b*g){case 38:v=c>0?1:(N+="\f",-1);break;case 44:o[u++]=(wl(N)-1)*v,v=1;break;case 64:Ll()===45&&(N+=lk(As())),p=Ll(),c=d=wl(_=N+=uve(ok())),b++;break;case 45:m===45&&wl(N)==2&&(g=0)}}return a}function h5(e,t,n,r,i,a,s,o,l,u,c){for(var d=i-1,p=i===0?a:[""],h=vR(p),m=0,g=0,y=0;m<r;++m)for(var v=0,b=o1(e,d+1,d=Qye(g=s[m])),_=e;v<h;++v)(_=Hq(g>0?p[v]+" "+b:Cn(b,/&\f/g,p[v])))&&(l[y++]=_);return M2(e,t,n,i===0?gR:o,l,u,c)}function dve(e,t,n){return M2(e,t,n,Vq,O2(ive()),o1(e,2,-2),0)}function f5(e,t,n,r){return M2(e,t,n,yR,o1(e,0,r),o1(e,r+1,-1),r)}function Ig(e,t){for(var n="",r=vR(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function pve(e,t,n,r){switch(e.type){case Yye:if(e.children.length)break;case Jye:case yR:return e.return=e.return||e.value;case Vq:return"";case jq:return e.return=e.value+"{"+Ig(e.children,r)+"}";case gR:e.value=e.props.join(",")}return wl(n=Ig(e.children,r))?e.return=e.value+"{"+n+"}":""}function hve(e){var t=vR(e);return function(n,r,i,a){for(var s="",o=0;o<t;o++)s+=e[o](n,r,i,a)||"";return s}}function fve(e){return function(t){t.root||(t=t.return)&&e(t)}}var m5=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function mve(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var gve=function(t,n,r){for(var i=0,a=0;i=a,a=Ll(),i===38&&a===12&&(n[r]=1),!l1(a);)As();return q1(t,ms)},yve=function(t,n){var r=-1,i=44;do switch(l1(i)){case 0:i===38&&Ll()===12&&(n[r]=1),t[r]+=gve(ms-1,n,r);break;case 2:t[r]+=lk(i);break;case 4:if(i===44){t[++r]=Ll()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=O2(i)}while(i=As());return t},vve=function(t,n){return qq(yve(Gq(t),n))},g5=new WeakMap,bve=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!g5.get(r))&&!i){g5.set(t,!0);for(var a=[],s=vve(n,a),o=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<o.length;c++,u++)t.props[u]=a[l]?s[l].replace(/&\f/g,o[c]):o[c]+" "+s[l]}}},wve=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Kq(e,t){switch(tve(e,t)){case 5103:return Sn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Sn+e+lS+e+la+e+e;case 6828:case 4268:return Sn+e+la+e+e;case 6165:return Sn+e+la+"flex-"+e+e;case 5187:return Sn+e+Cn(e,/(\w+).+(:[^]+)/,Sn+"box-$1$2"+la+"flex-$1$2")+e;case 5443:return Sn+e+la+"flex-item-"+Cn(e,/flex-|-self/,"")+e;case 4675:return Sn+e+la+"flex-line-pack"+Cn(e,/align-content|flex-|-self/,"")+e;case 5548:return Sn+e+la+Cn(e,"shrink","negative")+e;case 5292:return Sn+e+la+Cn(e,"basis","preferred-size")+e;case 6060:return Sn+"box-"+Cn(e,"-grow","")+Sn+e+la+Cn(e,"grow","positive")+e;case 4554:return Sn+Cn(e,/([^-])(transform)/g,"$1"+Sn+"$2")+e;case 6187:return Cn(Cn(Cn(e,/(zoom-|grab)/,Sn+"$1"),/(image-set)/,Sn+"$1"),e,"")+e;case 5495:case 3959:return Cn(e,/(image-set\([^]*)/,Sn+"$1$`$1");case 4968:return Cn(Cn(e,/(.+:)(flex-)?(.*)/,Sn+"box-pack:$3"+la+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sn+e+e;case 4095:case 3583:case 4068:case 2532:return Cn(e,/(.+)-inline(.+)/,Sn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(wl(e)-1-t>6)switch(qi(e,t+1)){case 109:if(qi(e,t+4)!==45)break;case 102:return Cn(e,/(.+:)(.+)-([^]+)/,"$1"+Sn+"$2-$3$1"+lS+(qi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~oP(e,"stretch")?Kq(Cn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qi(e,t+1)!==115)break;case 6444:switch(qi(e,wl(e)-3-(~oP(e,"!important")&&10))){case 107:return Cn(e,":",":"+Sn)+e;case 101:return Cn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sn+(qi(e,14)===45?"inline-":"")+"box$3$1"+Sn+"$2$3$1"+la+"$2box$3")+e}break;case 5936:switch(qi(e,t+11)){case 114:return Sn+e+la+Cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Sn+e+la+Cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Sn+e+la+Cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Sn+e+la+e+e}return e}var xve=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case yR:t.return=Kq(t.value,t.length);break;case jq:return Ig([z0(t,{value:Cn(t.value,"@","@"+Sn)})],i);case gR:if(t.length)return rve(t.props,function(a){switch(nve(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ig([z0(t,{props:[Cn(a,/:(read-\w+)/,":"+lS+"$1")]})],i);case"::placeholder":return Ig([z0(t,{props:[Cn(a,/:(plac\w+)/,":"+Sn+"input-$1")]}),z0(t,{props:[Cn(a,/:(plac\w+)/,":"+lS+"$1")]}),z0(t,{props:[Cn(a,/:(plac\w+)/,la+"input-$1")]})],i)}return""})}},_ve=[xve],Zq=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||_ve,a={},s,o=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),v=1;v<y.length;v++)a[y[v]]=!0;o.push(g)});var l,u=[bve,wve];{var c,d=[pve,fve(function(g){c.insert(g)})],p=hve(u.concat(i,d)),h=function(y){return Ig(cve(y),p)};l=function(y,v,b,_){c=b,h(y?y+"{"+v.styles+"}":v.styles),_&&(m.inserted[v.name]=!0)}}var m={key:n,sheet:new Xye({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return m.sheet.hydrate(o),m};function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}var Xq={exports:{}},Hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=typeof Symbol=="function"&&Symbol.for,bR=Fi?Symbol.for("react.element"):60103,wR=Fi?Symbol.for("react.portal"):60106,A2=Fi?Symbol.for("react.fragment"):60107,R2=Fi?Symbol.for("react.strict_mode"):60108,D2=Fi?Symbol.for("react.profiler"):60114,L2=Fi?Symbol.for("react.provider"):60109,F2=Fi?Symbol.for("react.context"):60110,xR=Fi?Symbol.for("react.async_mode"):60111,z2=Fi?Symbol.for("react.concurrent_mode"):60111,B2=Fi?Symbol.for("react.forward_ref"):60112,W2=Fi?Symbol.for("react.suspense"):60113,kve=Fi?Symbol.for("react.suspense_list"):60120,V2=Fi?Symbol.for("react.memo"):60115,j2=Fi?Symbol.for("react.lazy"):60116,Sve=Fi?Symbol.for("react.block"):60121,Cve=Fi?Symbol.for("react.fundamental"):60117,Ive=Fi?Symbol.for("react.responder"):60118,$ve=Fi?Symbol.for("react.scope"):60119;function Hs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bR:switch(e=e.type,e){case xR:case z2:case A2:case D2:case R2:case W2:return e;default:switch(e=e&&e.$$typeof,e){case F2:case B2:case j2:case V2:case L2:return e;default:return t}}case wR:return t}}}function Jq(e){return Hs(e)===z2}Hn.AsyncMode=xR;Hn.ConcurrentMode=z2;Hn.ContextConsumer=F2;Hn.ContextProvider=L2;Hn.Element=bR;Hn.ForwardRef=B2;Hn.Fragment=A2;Hn.Lazy=j2;Hn.Memo=V2;Hn.Portal=wR;Hn.Profiler=D2;Hn.StrictMode=R2;Hn.Suspense=W2;Hn.isAsyncMode=function(e){return Jq(e)||Hs(e)===xR};Hn.isConcurrentMode=Jq;Hn.isContextConsumer=function(e){return Hs(e)===F2};Hn.isContextProvider=function(e){return Hs(e)===L2};Hn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bR};Hn.isForwardRef=function(e){return Hs(e)===B2};Hn.isFragment=function(e){return Hs(e)===A2};Hn.isLazy=function(e){return Hs(e)===j2};Hn.isMemo=function(e){return Hs(e)===V2};Hn.isPortal=function(e){return Hs(e)===wR};Hn.isProfiler=function(e){return Hs(e)===D2};Hn.isStrictMode=function(e){return Hs(e)===R2};Hn.isSuspense=function(e){return Hs(e)===W2};Hn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===A2||e===z2||e===D2||e===R2||e===W2||e===kve||typeof e=="object"&&e!==null&&(e.$$typeof===j2||e.$$typeof===V2||e.$$typeof===L2||e.$$typeof===F2||e.$$typeof===B2||e.$$typeof===Cve||e.$$typeof===Ive||e.$$typeof===$ve||e.$$typeof===Sve)};Hn.typeOf=Hs;(function(e){e.exports=Hn})(Xq);var Yq=Xq.exports,Tve={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Nve={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qq={};Qq[Yq.ForwardRef]=Tve;Qq[Yq.Memo]=Nve;var Eve=!0;function Ove(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var Pve=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||Eve===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},eK=function(t,n,r){Pve(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function Mve(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var tK={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ave=/[A-Z]|^ms/g,Rve=/_EMO_([^_]+?)_([^]*?)_EMO_/g,nK=function(t){return t.charCodeAt(1)===45},y5=function(t){return t!=null&&typeof t!="boolean"},VN=mve(function(e){return nK(e)?e:e.replace(Ave,"-$&").toLowerCase()}),v5=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Rve,function(r,i,a){return xl={name:i,styles:a,next:xl},i})}return tK[t]!==1&&!nK(t)&&typeof n=="number"&&n!==0?n+"px":n};function u1(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return xl={name:n.name,styles:n.styles,next:xl},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)xl={name:r.name,styles:r.styles,next:xl},r=r.next;var i=n.styles+";";return i}return Dve(e,t,n)}case"function":{if(e!==void 0){var a=xl,s=n(e);return xl=a,u1(e,t,s)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function Dve(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=u1(e,t,n[i])+";";else for(var a in n){var s=n[a];if(typeof s!="object")t!=null&&t[s]!==void 0?r+=a+"{"+t[s]+"}":y5(s)&&(r+=VN(a)+":"+v5(a,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var o=0;o<s.length;o++)y5(s[o])&&(r+=VN(a)+":"+v5(a,s[o])+";");else{var l=u1(e,t,s);switch(a){case"animation":case"animationName":{r+=VN(a)+":"+l+";";break}default:r+=a+"{"+l+"}"}}}return r}var b5=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xl,rK=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,a="";xl=void 0;var s=t[0];s==null||s.raw===void 0?(i=!1,a+=u1(r,n,s)):a+=s[0];for(var o=1;o<t.length;o++)a+=u1(r,n,t[o]),i&&(a+=s[o]);b5.lastIndex=0;for(var l="",u;(u=b5.exec(a))!==null;)l+="-"+u[1];var c=Mve(a)+l;return{name:c,styles:a,next:xl}},Lve=Xp["useInsertionEffect"]?Xp["useInsertionEffect"]:!1,w5=Lve||I.exports.useLayoutEffect,iK=I.exports.createContext(typeof HTMLElement<"u"?Zq({key:"css"}):null);iK.Provider;var Fve=function(t){return I.exports.forwardRef(function(n,r){var i=I.exports.useContext(iK);return t(n,i,r)})},uP=I.exports.createContext({}),zve=function(t,n){if(typeof n=="function"){var r=n(t);return r}return Zn({},t,n)},Bve=m5(function(e){return m5(function(t){return zve(e,t)})}),Wve=function(t){var n=I.exports.useContext(uP);return t.theme!==n&&(n=Bve(n)(t.theme)),x(uP.Provider,{value:n,children:t.children})},H2=Fve(function(e,t){var n=e.styles,r=rK([n],void 0,I.exports.useContext(uP)),i=I.exports.useRef();return w5(function(){var a=t.key+"-global",s=new t.sheet.constructor({key:a,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,l=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(o=!0,l.setAttribute("data-emotion",a),s.hydrate([l])),i.current=[s,o],function(){s.flush()}},[t]),w5(function(){var a=i.current,s=a[0],o=a[1];if(o){a[1]=!1;return}if(r.next!==void 0&&eK(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null}),Vve=Object.defineProperty,jve=Object.defineProperties,Hve=Object.getOwnPropertyDescriptors,x5=Object.getOwnPropertySymbols,Uve=Object.prototype.hasOwnProperty,Gve=Object.prototype.propertyIsEnumerable,_5=(e,t,n)=>t in e?Vve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qve=(e,t)=>{for(var n in t||(t={}))Uve.call(t,n)&&_5(e,n,t[n]);if(x5)for(var n of x5(t))Gve.call(t,n)&&_5(e,n,t[n]);return e},Kve=(e,t)=>jve(e,Hve(t));function Zve({theme:e}){return x(H2,{styles:{"*, *::before, *::after":{boxSizing:"border-box"},html:{colorScheme:e.colorScheme==="dark"?"dark":"light"},body:Kve(qve({},e.fn.fontStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,fontSize:e.fontSizes.md,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"})}})}function B0(e,t,n,r=G){Object.keys(t).forEach(i=>{e[`--mantine-${n}-${i}`]=r(t[i])})}function Xve({theme:e}){const t={"--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-transition-timing-function":e.transitionTimingFunction,"--mantine-line-height":`${e.lineHeight}`,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":`${e.headings.fontWeight}`};B0(t,e.shadows,"shadow"),B0(t,e.fontSizes,"font-size"),B0(t,e.radius,"radius"),B0(t,e.spacing,"spacing"),B0(t,e.breakpoints,"breakpoints",Xc),Object.keys(e.colors).forEach(r=>{e.colors[r].forEach((i,a)=>{t[`--mantine-color-${r}-${a}`]=i})});const n=e.headings.sizes;return Object.keys(n).forEach(r=>{t[`--mantine-${r}-font-size`]=n[r].fontSize,t[`--mantine-${r}-line-height`]=`${n[r].lineHeight}`}),x(H2,{styles:{":root":t}})}var Jve=Object.defineProperty,Yve=Object.defineProperties,Qve=Object.getOwnPropertyDescriptors,k5=Object.getOwnPropertySymbols,e0e=Object.prototype.hasOwnProperty,t0e=Object.prototype.propertyIsEnumerable,S5=(e,t,n)=>t in e?Jve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hl=(e,t)=>{for(var n in t||(t={}))e0e.call(t,n)&&S5(e,n,t[n]);if(k5)for(var n of k5(t))t0e.call(t,n)&&S5(e,n,t[n]);return e},jN=(e,t)=>Yve(e,Qve(t));function n0e(e,t){var n;if(!t)return e;const r=Object.keys(e).reduce((i,a)=>{if(a==="headings"&&t.headings){const s=t.headings.sizes?Object.keys(e.headings.sizes).reduce((o,l)=>(o[l]=hl(hl({},e.headings.sizes[l]),t.headings.sizes[l]),o),{}):e.headings.sizes;return jN(hl({},i),{headings:jN(hl(hl({},e.headings),t.headings),{sizes:s})})}if(a==="breakpoints"&&t.breakpoints){const s=hl(hl({},e.breakpoints),t.breakpoints);return jN(hl({},i),{breakpoints:Object.fromEntries(Object.entries(s).sort((o,l)=>Ko(o[1])-Ko(l[1])))})}return i[a]=typeof t[a]=="object"?hl(hl({},e[a]),t[a]):typeof t[a]=="number"||typeof t[a]=="boolean"||typeof t[a]=="function"?t[a]:t[a]||e[a],i},{});if((t==null?void 0:t.fontFamily)&&!((n=t==null?void 0:t.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=t.fontFamily),!(r.primaryColor in r.colors))throw new Error("MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more \u2013 https://mantine.dev/theming/colors/#primary-color");return r}function r0e(e,t){return Wq(n0e(e,t))}function aK(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}const i0e={html:{fontFamily:"sans-serif",lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:0},"article, aside, footer, header, nav, section, figcaption, figure, main":{display:"block"},h1:{fontSize:"2em"},hr:{boxSizing:"content-box",height:0,overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{background:"transparent",textDecorationSkip:"objects"},"a:active, a:hover":{outlineWidth:0},"abbr[title]":{borderBottom:"none",textDecoration:"underline"},"b, strong":{fontWeight:"bolder"},"code, kbp, samp":{fontFamily:"monospace, monospace",fontSize:"1em"},dfn:{fontStyle:"italic"},mark:{backgroundColor:"#ff0",color:"#000"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},"audio, video":{display:"inline-block"},"audio:not([controls])":{display:"none",height:0},img:{borderStyle:"none",verticalAlign:"middle"},"svg:not(:root)":{overflow:"hidden"},"button, input, optgroup, select, textarea":{fontFamily:"sans-serif",fontSize:"100%",lineHeight:"1.15",margin:0},"button, input":{overflow:"visible"},"button, select":{textTransform:"none"},"button, [type=reset], [type=submit]":{WebkitAppearance:"button"},"button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner":{borderStyle:"none",padding:0},"button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring":{outline:`${G(1)} dotted ButtonText`},legend:{boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:0,whiteSpace:"normal"},progress:{display:"inline-block",verticalAlign:"baseline"},textarea:{overflow:"auto"},"[type=checkbox], [type=radio]":{boxSizing:"border-box",padding:0},"[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button":{height:"auto"},"[type=search]":{appearance:"none"},"[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration":{appearance:"none"},"::-webkit-file-upload-button":{appearance:"button",font:"inherit"},"details, menu":{display:"block"},summary:{display:"list-item"},canvas:{display:"inline-block"},template:{display:"none"}};function a0e(){return x(H2,{styles:i0e})}var s0e=Object.defineProperty,C5=Object.getOwnPropertySymbols,o0e=Object.prototype.hasOwnProperty,l0e=Object.prototype.propertyIsEnumerable,I5=(e,t,n)=>t in e?s0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pb=(e,t)=>{for(var n in t||(t={}))o0e.call(t,n)&&I5(e,n,t[n]);if(C5)for(var n of C5(t))l0e.call(t,n)&&I5(e,n,t[n]);return e};const uS=I.exports.createContext({theme:mR});function Za(){var e;return((e=I.exports.useContext(uS))==null?void 0:e.theme)||mR}function u0e(e){const t=Za(),n=r=>{var i,a,s,o;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((a=t.components[r])==null?void 0:a.classNames)||{},variants:(s=t.components[r])==null?void 0:s.variants,sizes:(o=t.components[r])==null?void 0:o.sizes}};return Array.isArray(e)?e.map(n):[n(e)]}function sK(){var e;return(e=I.exports.useContext(uS))==null?void 0:e.emotionCache}function Ue(e,t,n){var r;const i=Za(),a=(r=i.components[e])==null?void 0:r.defaultProps,s=typeof a=="function"?a(i):a;return Pb(Pb(Pb({},t),s),aK(n))}function oK({theme:e,emotionCache:t,withNormalizeCSS:n=!1,withGlobalStyles:r=!1,withCSSVariables:i=!1,inherit:a=!1,children:s}){const o=I.exports.useContext(uS),l=r0e(mR,a?Pb(Pb({},o.theme),e):e);return x(Wve,{theme:l,children:B(uS.Provider,{value:{theme:l,emotionCache:t},children:[n&&x(a0e,{}),r&&x(Zve,{theme:l}),i&&x(Xve,{theme:l}),typeof l.globalStyles=="function"&&x(H2,{styles:l.globalStyles(l)}),s]})})}oK.displayName="@mantine/core/MantineProvider";const c0e={app:100,modal:200,popover:300,overlay:400,max:9999};function Wu(e){return c0e[e]}function d0e(e,t){const n=I.exports.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const p0e=Zq({key:"mantine",prepend:!0});function h0e(){return sK()||p0e}var f0e=Object.defineProperty,$5=Object.getOwnPropertySymbols,m0e=Object.prototype.hasOwnProperty,g0e=Object.prototype.propertyIsEnumerable,T5=(e,t,n)=>t in e?f0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y0e=(e,t)=>{for(var n in t||(t={}))m0e.call(t,n)&&T5(e,n,t[n]);if($5)for(var n of $5(t))g0e.call(t,n)&&T5(e,n,t[n]);return e};const HN="ref";function v0e(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(HN in n))return{args:e,ref:t};t=n[HN];const r=y0e({},n);return delete r[HN],{args:[r],ref:t}}const{cssFactory:b0e}=(()=>{function e(n,r,i){const a=[],s=Ove(n,a,i);return a.length<2?i:s+r(a)}function t(n){const{cache:r}=n,i=(...s)=>{const{ref:o,args:l}=v0e(s),u=rK(l,r.registered);return eK(r,u,!1),`${r.key}-${u.name}${o===void 0?"":` ${o}`}`};return{css:i,cx:(...s)=>e(r.registered,i,Dq(s))}}return{cssFactory:t}})();function lK(){const e=h0e();return d0e(()=>b0e({cache:e}),[e])}function w0e({cx:e,classes:t,context:n,classNames:r,name:i,cache:a}){const s=n.reduce((o,l)=>(Object.keys(l.classNames).forEach(u=>{typeof o[u]!="string"?o[u]=`${l.classNames[u]}`:o[u]=`${o[u]} ${l.classNames[u]}`}),o),{});return Object.keys(t).reduce((o,l)=>(o[l]=e(t[l],s[l],r!=null&&r[l],Array.isArray(i)?i.filter(Boolean).map(u=>`${(a==null?void 0:a.key)||"mantine"}-${u}-${l}`).join(" "):i?`${(a==null?void 0:a.key)||"mantine"}-${i}-${l}`:null),o),{})}var x0e=Object.defineProperty,N5=Object.getOwnPropertySymbols,_0e=Object.prototype.hasOwnProperty,k0e=Object.prototype.propertyIsEnumerable,E5=(e,t,n)=>t in e?x0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UN=(e,t)=>{for(var n in t||(t={}))_0e.call(t,n)&&E5(e,n,t[n]);if(N5)for(var n of N5(t))k0e.call(t,n)&&E5(e,n,t[n]);return e};function cP(e,t){return t&&Object.keys(t).forEach(n=>{e[n]?e[n]=UN(UN({},e[n]),t[n]):e[n]=UN({},t[n])}),e}function O5(e,t,n,r){const i=a=>typeof a=="function"?a(t,n||{},r):a||{};return Array.isArray(e)?e.map(a=>i(a.styles)).reduce((a,s)=>cP(a,s),{}):i(e)}function S0e({ctx:e,theme:t,params:n,variant:r,size:i}){return e.reduce((a,s)=>(s.variants&&r in s.variants&&cP(a,s.variants[r](t,n,{variant:r,size:i})),s.sizes&&i in s.sizes&&cP(a,s.sizes[i](t,n,{variant:r,size:i})),a),{})}function tt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const a=Za(),s=u0e(i==null?void 0:i.name),o=sK(),l={variant:i==null?void 0:i.variant,size:i==null?void 0:i.size},{css:u,cx:c}=lK(),d=t(a,r,l),p=O5(i==null?void 0:i.styles,a,r,l),h=O5(s,a,r,l),m=S0e({ctx:s,theme:a,params:r,variant:i==null?void 0:i.variant,size:i==null?void 0:i.size}),g=Object.fromEntries(Object.keys(d).map(y=>{const v=c({[u(d[y])]:!(i!=null&&i.unstyled)},u(m[y]),u(h[y]),u(p[y]));return[y,v]}));return{classes:w0e({cx:c,classes:g,context:s,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:o}),cx:c,theme:a}}return n}function Wo(e){return`___ref-${e||""}`}var C0e=Object.defineProperty,I0e=Object.defineProperties,$0e=Object.getOwnPropertyDescriptors,P5=Object.getOwnPropertySymbols,T0e=Object.prototype.hasOwnProperty,N0e=Object.prototype.propertyIsEnumerable,M5=(e,t,n)=>t in e?C0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W0=(e,t)=>{for(var n in t||(t={}))T0e.call(t,n)&&M5(e,n,t[n]);if(P5)for(var n of P5(t))N0e.call(t,n)&&M5(e,n,t[n]);return e},V0=(e,t)=>I0e(e,$0e(t));const j0={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${G(10)})`},transitionProperty:"transform, opacity"},Jx={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(-${G(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${G(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${G(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${G(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:V0(W0({},j0),{common:{transformOrigin:"center center"}}),"pop-bottom-left":V0(W0({},j0),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":V0(W0({},j0),{common:{transformOrigin:"bottom right"}}),"pop-top-left":V0(W0({},j0),{common:{transformOrigin:"top left"}}),"pop-top-right":V0(W0({},j0),{common:{transformOrigin:"top right"}})},A5=["mousedown","touchstart"];function E0e(e,t,n){const r=I.exports.useRef();return I.exports.useEffect(()=>{const i=a=>{const{target:s}=a!=null?a:{};if(Array.isArray(n)){const o=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";n.every(u=>!!u&&!a.composedPath().includes(u))&&!o&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||A5).forEach(a=>document.addEventListener(a,i)),()=>{(t||A5).forEach(a=>document.removeEventListener(a,i))}},[r,e,n]),r}function O0e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function P0e(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function M0e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.exports.useState(n?t:P0e(e,t)),a=I.exports.useRef();return I.exports.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(e),i(a.current.matches),O0e(a.current,s=>i(s.matches))},[e]),r}function Fl(e,t,n){return Math.min(Math.max(e,t),n)}const _R=typeof document<"u"?I.exports.useLayoutEffect:I.exports.useEffect;function Mi(e,t){const n=I.exports.useRef(!1);I.exports.useEffect(()=>()=>{n.current=!1},[]),I.exports.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function uK({opened:e,shouldReturnFocus:t=!0}){const n=I.exports.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Mi(()=>{let i=-1;const a=s=>{s.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",a),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",a)}},[e,t]),r}const A0e=/input|select|textarea|button|object/,cK="a, input, select, textarea, button, object, [tabindex]";function R0e(e){return e.style.display==="none"}function D0e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(R0e(n))return!1;n=n.parentNode}return!0}function dK(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function dP(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(dK(e));return(A0e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&D0e(e)}function pK(e){const t=dK(e);return(Number.isNaN(t)||t>=0)&&dP(e)}function L0e(e){return Array.from(e.querySelectorAll(cK)).filter(pK)}function F0e(e,t){const n=L0e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();if(!(r===i.activeElement||e===i.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function Lp(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function z0e(e,t="body > :not(script)"){const n=Lp(),r=Array.from(document.querySelectorAll(t)).map(i=>{var a;if(((a=i==null?void 0:i.shadowRoot)==null?void 0:a.contains(e))||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),l=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!l&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}function B0e(e=!0){const t=I.exports.useRef(),n=I.exports.useRef(null),r=a=>{let s=a.querySelector("[data-autofocus]");if(!s){const o=Array.from(a.querySelectorAll(cK));s=o.find(pK)||o.find(dP)||null,!s&&dP(a)&&(s=a)}s&&s.focus({preventScroll:!0})},i=I.exports.useCallback(a=>{if(!!e){if(a===null){n.current&&(n.current(),n.current=null);return}n.current=z0e(a),t.current!==a&&(a?(setTimeout(()=>{a.getRootNode()&&r(a)}),t.current=a):t.current=null)}},[e]);return I.exports.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const a=s=>{s.key==="Tab"&&t.current&&F0e(t.current,s)};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a),n.current&&n.current()}},[e]),i}const W0e=e=>(e+1)%1e6;function V0e(){const[,e]=I.exports.useReducer(W0e,0);return e}const j0e=kr["useId".toString()]||(()=>{});function H0e(){const e=j0e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Vu(e){const t=H0e(),[n,r]=I.exports.useState(t);return _R(()=>{r(Lp())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function cS(e,t,n){I.exports.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function hK(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function fK(...e){return t=>{e.forEach(n=>hK(n,t))}}function ju(...e){return I.exports.useCallback(fK(...e),e)}const mK=e=>({x:Fl(e.x,0,1),y:Fl(e.y,0,1)});function kR(e,t,n="ltr"){const r=I.exports.useRef(),i=I.exports.useRef(!1),a=I.exports.useRef(!1),s=I.exports.useRef(0),[o,l]=I.exports.useState(!1);return I.exports.useEffect(()=>{i.current=!0},[]),I.exports.useEffect(()=>{const u=({x:b,y:_})=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const k=r.current.getBoundingClientRect();if(k.width&&k.height){const S=Fl((b-k.left)/k.width,0,1);e({x:n==="ltr"?S:1-S,y:Fl((_-k.top)/k.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},p=()=>{!a.current&&i.current&&(a.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),c())},h=()=>{a.current&&i.current&&(a.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},m=b=>{p(),b.preventDefault(),g(b)},g=b=>u({x:b.clientX,y:b.clientY}),y=b=>{b.cancelable&&b.preventDefault(),p(),v(b)},v=b=>{b.cancelable&&b.preventDefault(),u({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",m),r.current.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",m),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:o}}function Zo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,a]=I.exports.useState(t!==void 0?t:n),s=o=>{a(o),r==null||r(o)};return e!==void 0?[e,r,!0]:[i,s,!1]}function U0e({initialValues:e=[],limit:t}){const[{state:n,queue:r},i]=I.exports.useState({state:e.slice(0,t),queue:e.slice(t)});return{state:n,queue:r,add:(...l)=>i(u=>{const c=[...u.state,...u.queue,...l];return{state:c.slice(0,t),queue:c.slice(t)}}),update:l=>i(u=>{const c=l([...u.state,...u.queue]);return{state:c.slice(0,t),queue:c.slice(t)}}),cleanQueue:()=>i(l=>({state:l.state,queue:[]}))}}function K1(e,t){return M0e("(prefers-reduced-motion: reduce)",e,t)}const G0e=e=>e<.5?2*e*e:-1+(4-2*e)*e,q0e=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:a})=>{if(!t||!n&&typeof document>"u")return 0;const s=!!n,l=(n||document.body).getBoundingClientRect(),u=t.getBoundingClientRect(),c=d=>u[d]-l[d];if(e==="y"){const d=c("top");if(d===0)return 0;if(r==="start"){const h=d-i;return h<=u.height*(a?0:1)||!a?h:0}const p=s?l.height:window.innerHeight;if(r==="end"){const h=d+i-p+u.height;return h>=-u.height*(a?0:1)||!a?h:0}return r==="center"?d-p/2+u.height/2:0}if(e==="x"){const d=c("left");if(d===0)return 0;if(r==="start"){const h=d-i;return h<=u.width||!a?h:0}const p=s?l.width:window.innerWidth;if(r==="end"){const h=d+i-p+u.width;return h>=-u.width||!a?h:0}return r==="center"?d-p/2+u.width/2:0}return 0},K0e=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},Z0e=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:a}=document;i[r]=n,a[r]=n}};function gK({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=G0e,offset:i=0,cancelable:a=!0,isList:s=!1}={}){const o=I.exports.useRef(0),l=I.exports.useRef(0),u=I.exports.useRef(!1),c=I.exports.useRef(null),d=I.exports.useRef(null),p=K1(),h=()=>{o.current&&cancelAnimationFrame(o.current)},m=I.exports.useCallback(({alignment:y="start"}={})=>{var v;u.current=!1,o.current&&h();const b=(v=K0e({parent:c.current,axis:t}))!=null?v:0,_=q0e({parent:c.current,target:d.current,axis:t,alignment:y,offset:i,isList:s})-(c.current?0:b);function k(){l.current===0&&(l.current=performance.now());const $=performance.now()-l.current,N=p||e===0?1:$/e,P=b+_*r(N);Z0e({parent:c.current,axis:t,distance:P}),!u.current&&N<1?o.current=requestAnimationFrame(k):(typeof n=="function"&&n(),l.current=0,o.current=0,h())}k()},[t,e,r,s,i,n,p]),g=()=>{a&&(u.current=!0)};return cS("wheel",g,{passive:!0}),cS("touchmove",g,{passive:!0}),I.exports.useEffect(()=>h,[]),{scrollableRef:c,targetRef:d,scrollIntoView:m,cancel:h}}function R5(){if(typeof window>"u")return"undetermined";const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function X0e(e={getValueInEffect:!0}){const[t,n]=I.exports.useState(e.getValueInEffect?"undetermined":R5());return _R(()=>{e.getValueInEffect&&n(R5)},[]),t}function J0e(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function Y0e(e){const[t,n]=I.exports.useState(e);return[t,J0e(n)]}function Tr(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,a]=I.exports.useState(e),s=I.exports.useCallback(()=>{a(u=>u||(n==null||n(),!0))},[n]),o=I.exports.useCallback(()=>{a(u=>u&&(r==null||r(),!1))},[r]),l=I.exports.useCallback(()=>{i?o():s()},[o,s,i]);return[i,{open:s,close:o,toggle:l}]}var D5=Object.getOwnPropertySymbols,Q0e=Object.prototype.hasOwnProperty,ebe=Object.prototype.propertyIsEnumerable,tbe=(e,t)=>{var n={};for(var r in e)Q0e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&D5)for(var r of D5(e))t.indexOf(r)<0&&ebe.call(e,r)&&(n[r]=e[r]);return n};function Td(e){const t=e,{m:n,mx:r,my:i,mt:a,mb:s,ml:o,mr:l,p:u,px:c,py:d,pt:p,pb:h,pl:m,pr:g,bg:y,c:v,opacity:b,ff:_,fz:k,fw:S,lts:$,ta:N,lh:P,fs:D,tt:O,td:F,w:E,miw:z,maw:q,h:K,mih:Z,mah:te,bgsz:V,bgp:ee,bgr:Y,bga:Q,pos:oe,top:pe,left:he,bottom:ge,right:_e,inset:Ne,display:Se}=t,Re=tbe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:aK({m:n,mx:r,my:i,mt:a,mb:s,ml:o,mr:l,p:u,px:c,py:d,pt:p,pb:h,pl:m,pr:g,bg:y,c:v,opacity:b,ff:_,fz:k,fw:S,lts:$,ta:N,lh:P,fs:D,tt:O,td:F,w:E,miw:z,maw:q,h:K,mih:Z,mah:te,bgsz:V,bgp:ee,bgr:Y,bga:Q,pos:oe,top:pe,left:he,bottom:ge,right:_e,inset:Ne,display:Se}),rest:Re}}function nbe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>Ko(ke({size:r,sizes:t.breakpoints}))-Ko(ke({size:i,sizes:t.breakpoints})));return"base"in e?["base",...n]:n}function rbe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return nbe(e,t).reduce((s,o)=>{if(o==="base"&&e.base!==void 0){const u=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{s[c]=u}),s):(s[r]=u,s)}const l=n(e[o],t);return Array.isArray(r)?(s[t.fn.largerThan(o)]={},r.forEach(u=>{s[t.fn.largerThan(o)][u]=l}),s):(s[t.fn.largerThan(o)]={[r]:l},s)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((a,s)=>(a[s]=i,a),{}):{[r]:i}}function ibe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function abe(e){return G(e)}function sbe(e){return e}function obe(e,t){return ke({size:e,sizes:t.fontSizes})}const lbe=["-xs","-sm","-md","-lg","-xl"];function ube(e,t){return lbe.includes(e)?`calc(${ke({size:e.replace("-",""),sizes:t.spacing})} * -1)`:ke({size:e,sizes:t.spacing})}const cbe={identity:sbe,color:ibe,size:abe,fontSize:obe,spacing:ube},dbe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"identity",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"identity",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"}};var pbe=Object.defineProperty,L5=Object.getOwnPropertySymbols,hbe=Object.prototype.hasOwnProperty,fbe=Object.prototype.propertyIsEnumerable,F5=(e,t,n)=>t in e?pbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z5=(e,t)=>{for(var n in t||(t={}))hbe.call(t,n)&&F5(e,n,t[n]);if(L5)for(var n of L5(t))fbe.call(t,n)&&F5(e,n,t[n]);return e};function B5(e,t,n=dbe){return Object.keys(n).reduce((i,a)=>(a in e&&e[a]!==void 0&&i.push(rbe({value:e[a],getValue:cbe[n[a].type],property:n[a].property,theme:t})),i),[]).reduce((i,a)=>(Object.keys(a).forEach(s=>{typeof a[s]=="object"&&a[s]!==null&&s in i?i[s]=z5(z5({},i[s]),a[s]):i[s]=a[s]}),i),{})}function W5(e,t){return typeof e=="function"?e(t):e}function mbe(e,t,n){const r=Za(),{css:i,cx:a}=lK();return Array.isArray(e)?a(n,i(B5(t,r)),e.map(s=>i(W5(s,r)))):a(n,i(W5(e,r)),i(B5(t,r)))}var gbe=Object.defineProperty,dS=Object.getOwnPropertySymbols,yK=Object.prototype.hasOwnProperty,vK=Object.prototype.propertyIsEnumerable,V5=(e,t,n)=>t in e?gbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ybe=(e,t)=>{for(var n in t||(t={}))yK.call(t,n)&&V5(e,n,t[n]);if(dS)for(var n of dS(t))vK.call(t,n)&&V5(e,n,t[n]);return e},vbe=(e,t)=>{var n={};for(var r in e)yK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dS)for(var r of dS(e))t.indexOf(r)<0&&vK.call(e,r)&&(n[r]=e[r]);return n};const bK=I.exports.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:a,sx:s}=n,o=vbe(n,["className","component","style","sx"]);const{systemStyles:l,rest:u}=Td(o);return x(i||"div",{...ybe({ref:t,className:mbe(s,l,r),style:a},u)})});bK.displayName="@mantine/core/Box";const vt=bK;var bbe=Object.defineProperty,wbe=Object.defineProperties,xbe=Object.getOwnPropertyDescriptors,j5=Object.getOwnPropertySymbols,_be=Object.prototype.hasOwnProperty,kbe=Object.prototype.propertyIsEnumerable,H5=(e,t,n)=>t in e?bbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U5=(e,t)=>{for(var n in t||(t={}))_be.call(t,n)&&H5(e,n,t[n]);if(j5)for(var n of j5(t))kbe.call(t,n)&&H5(e,n,t[n]);return e},Sbe=(e,t)=>wbe(e,xbe(t)),Cbe=tt(e=>({root:Sbe(U5(U5({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const Ibe=Cbe;var $be=Object.defineProperty,pS=Object.getOwnPropertySymbols,wK=Object.prototype.hasOwnProperty,xK=Object.prototype.propertyIsEnumerable,G5=(e,t,n)=>t in e?$be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tbe=(e,t)=>{for(var n in t||(t={}))wK.call(t,n)&&G5(e,n,t[n]);if(pS)for(var n of pS(t))xK.call(t,n)&&G5(e,n,t[n]);return e},Nbe=(e,t)=>{var n={};for(var r in e)wK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pS)for(var r of pS(e))t.indexOf(r)<0&&xK.call(e,r)&&(n[r]=e[r]);return n};const _K=I.exports.forwardRef((e,t)=>{const n=Ue("UnstyledButton",{},e),{className:r,component:i="button",unstyled:a,variant:s}=n,o=Nbe(n,["className","component","unstyled","variant"]),{classes:l,cx:u}=Ibe(null,{name:"UnstyledButton",unstyled:a,variant:s});return x(vt,{...Tbe({component:i,ref:t,className:u(l.root,r),type:i==="button"?"button":void 0},o)})});_K.displayName="@mantine/core/UnstyledButton";const Z1=_K;var Ebe=Object.defineProperty,Obe=Object.defineProperties,Pbe=Object.getOwnPropertyDescriptors,hS=Object.getOwnPropertySymbols,kK=Object.prototype.hasOwnProperty,SK=Object.prototype.propertyIsEnumerable,q5=(e,t,n)=>t in e?Ebe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ip=(e,t)=>{for(var n in t||(t={}))kK.call(t,n)&&q5(e,n,t[n]);if(hS)for(var n of hS(t))SK.call(t,n)&&q5(e,n,t[n]);return e},GN=(e,t)=>Obe(e,Pbe(t)),Mbe=(e,t)=>{var n={};for(var r in e)kK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hS)for(var r of hS(e))t.indexOf(r)<0&&SK.call(e,r)&&(n[r]=e[r]);return n};function Abe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function qN(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Yx=typeof window<"u"&&window.requestAnimationFrame;function Rbe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.exports.useRef(null),a=0,s={display:"none",height:0,overflow:"hidden"},[o,l]=I.exports.useState(r?{}:s),u=m=>{Kl.exports.flushSync(()=>l(m))},c=m=>{u(g=>ip(ip({},g),m))};function d(m){return{transition:`height ${e||Abe(m)}ms ${t}`}}Mi(()=>{Yx(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Yx(()=>{const m=qN(i);c(GN(ip({},d(m)),{height:m}))})}:()=>{const m=qN(i);c(GN(ip({},d(m)),{willChange:"height",height:m})),Yx(()=>c({height:a,overflow:"hidden"}))})},[r]);const p=m=>{if(!(m.target!==i.current||m.propertyName!=="height"))if(r){const g=qN(i);g===o.height?u({}):c({height:g}),n()}else o.height===a&&(u(s),n())};function h(m={}){var g=m,{style:y={},refKey:v="ref"}=g,b=Mbe(g,["style","refKey"]);const _=b[v];return GN(ip({"aria-hidden":!r},b),{[v]:fK(i,_),onTransitionEnd:p,style:ip(ip({boxSizing:"border-box"},y),o)})}return h}var Dbe=Object.defineProperty,fS=Object.getOwnPropertySymbols,CK=Object.prototype.hasOwnProperty,IK=Object.prototype.propertyIsEnumerable,K5=(e,t,n)=>t in e?Dbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qx=(e,t)=>{for(var n in t||(t={}))CK.call(t,n)&&K5(e,n,t[n]);if(fS)for(var n of fS(t))IK.call(t,n)&&K5(e,n,t[n]);return e},Lbe=(e,t)=>{var n={};for(var r in e)CK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fS)for(var r of fS(e))t.indexOf(r)<0&&IK.call(e,r)&&(n[r]=e[r]);return n};const Fbe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},U2=I.exports.forwardRef((e,t)=>{const n=Ue("Collapse",Fbe,e),{children:r,in:i,transitionDuration:a,transitionTimingFunction:s,style:o,onTransitionEnd:l,animateOpacity:u}=n,c=Lbe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity"]),d=Za(),p=K1(),m=(d.respectReducedMotion?p:!1)?0:a,{systemStyles:g,rest:y}=Td(c),v=Rbe({opened:i,transitionDuration:m,transitionTimingFunction:s,onTransitionEnd:l});return m===0?i?x(vt,{...Qx({},y),children:r}):null:x(vt,{...Qx({},v(Qx(Qx({style:o,ref:t},y),g))),children:x("div",{style:{opacity:i||!u?1:0,transition:u?`opacity ${m}ms ${s}`:"none"},children:r})})});U2.displayName="@mantine/core/Collapse";var zbe=Object.defineProperty,Bbe=Object.defineProperties,Wbe=Object.getOwnPropertyDescriptors,Z5=Object.getOwnPropertySymbols,Vbe=Object.prototype.hasOwnProperty,jbe=Object.prototype.propertyIsEnumerable,X5=(e,t,n)=>t in e?zbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pP=(e,t)=>{for(var n in t||(t={}))Vbe.call(t,n)&&X5(e,n,t[n]);if(Z5)for(var n of Z5(t))jbe.call(t,n)&&X5(e,n,t[n]);return e},J5=(e,t)=>Bbe(e,Wbe(t));const Hbe=["subtle","filled","outline","light","default","transparent","gradient"],e_={xs:G(18),sm:G(22),md:G(28),lg:G(34),xl:G(44)};function Ube({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Hbe.includes(e)?pP({border:`${G(1)} solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover})):null}var Gbe=tt((e,{radius:t,color:n,gradient:r},{variant:i,size:a})=>({root:J5(pP({position:"relative",borderRadius:e.fn.radius(t),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",height:ke({size:a,sizes:e_}),minHeight:ke({size:a,sizes:e_}),width:ke({size:a,sizes:e_}),minWidth:ke({size:a,sizes:e_})},Ube({variant:i,theme:e,color:n,gradient:r})),{"&:active":e.activeStyles,"& [data-action-icon-loader]":{maxWidth:"70%"},"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":J5(pP({content:'""'},e.fn.cover(G(-1))),{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(t),cursor:"not-allowed"})}})}));const qbe=Gbe;var Kbe=Object.defineProperty,mS=Object.getOwnPropertySymbols,$K=Object.prototype.hasOwnProperty,TK=Object.prototype.propertyIsEnumerable,Y5=(e,t,n)=>t in e?Kbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q5=(e,t)=>{for(var n in t||(t={}))$K.call(t,n)&&Y5(e,n,t[n]);if(mS)for(var n of mS(t))TK.call(t,n)&&Y5(e,n,t[n]);return e},eW=(e,t)=>{var n={};for(var r in e)$K.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mS)for(var r of mS(e))t.indexOf(r)<0&&TK.call(e,r)&&(n[r]=e[r]);return n};function Zbe(e){var t=e,{size:n,color:r}=t,i=eW(t,["size","color"]);const a=i,{style:s}=a,o=eW(a,["style"]);return B("svg",{...Q5({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,style:Q5({width:n},s)},o),children:[B("rect",{y:"10",width:"15",height:"120",rx:"6",children:[x("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),B("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6",children:[x("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),B("rect",{x:"60",width:"15",height:"140",rx:"6",children:[x("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),B("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6",children:[x("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),B("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6",children:[x("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]})]})}var Xbe=Object.defineProperty,gS=Object.getOwnPropertySymbols,NK=Object.prototype.hasOwnProperty,EK=Object.prototype.propertyIsEnumerable,tW=(e,t,n)=>t in e?Xbe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nW=(e,t)=>{for(var n in t||(t={}))NK.call(t,n)&&tW(e,n,t[n]);if(gS)for(var n of gS(t))EK.call(t,n)&&tW(e,n,t[n]);return e},rW=(e,t)=>{var n={};for(var r in e)NK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gS)for(var r of gS(e))t.indexOf(r)<0&&EK.call(e,r)&&(n[r]=e[r]);return n};function Jbe(e){var t=e,{size:n,color:r}=t,i=rW(t,["size","color"]);const a=i,{style:s}=a,o=rW(a,["style"]);return x("svg",{...nW({viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r,style:nW({width:n,height:n},s)},o),children:x("g",{fill:"none",fillRule:"evenodd",children:B("g",{transform:"translate(2.5 2.5)",strokeWidth:"5",children:[x("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),x("path",{d:"M32 16c0-9.94-8.06-16-16-16",children:x("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})})]})})})}var Ybe=Object.defineProperty,yS=Object.getOwnPropertySymbols,OK=Object.prototype.hasOwnProperty,PK=Object.prototype.propertyIsEnumerable,iW=(e,t,n)=>t in e?Ybe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aW=(e,t)=>{for(var n in t||(t={}))OK.call(t,n)&&iW(e,n,t[n]);if(yS)for(var n of yS(t))PK.call(t,n)&&iW(e,n,t[n]);return e},sW=(e,t)=>{var n={};for(var r in e)OK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yS)for(var r of yS(e))t.indexOf(r)<0&&PK.call(e,r)&&(n[r]=e[r]);return n};function Qbe(e){var t=e,{size:n,color:r}=t,i=sW(t,["size","color"]);const a=i,{style:s}=a,o=sW(a,["style"]);return B("svg",{...aW({viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r,style:aW({width:n},s)},o),children:[B("circle",{cx:"15",cy:"15",r:"15",children:[x("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]}),B("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3",children:[x("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]}),B("circle",{cx:"105",cy:"15",r:"15",children:[x("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),x("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]})]})}var e1e=Object.defineProperty,vS=Object.getOwnPropertySymbols,MK=Object.prototype.hasOwnProperty,AK=Object.prototype.propertyIsEnumerable,oW=(e,t,n)=>t in e?e1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t1e=(e,t)=>{for(var n in t||(t={}))MK.call(t,n)&&oW(e,n,t[n]);if(vS)for(var n of vS(t))AK.call(t,n)&&oW(e,n,t[n]);return e},n1e=(e,t)=>{var n={};for(var r in e)MK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vS)for(var r of vS(e))t.indexOf(r)<0&&AK.call(e,r)&&(n[r]=e[r]);return n};const KN={bars:Zbe,oval:Jbe,dots:Qbe},r1e={xs:G(18),sm:G(22),md:G(36),lg:G(44),xl:G(58)},i1e={size:"md"};function G2(e){const t=Ue("Loader",i1e,e),{size:n,color:r,variant:i}=t,a=n1e(t,["size","color","variant"]),s=Za(),o=i in KN?i:s.loader;return x(vt,{...t1e({role:"presentation",component:KN[o]||KN.bars,size:ke({size:n,sizes:r1e}),color:s.fn.variant({variant:"filled",primaryFallback:!1,color:r||s.primaryColor}).background},a)})}G2.displayName="@mantine/core/Loader";var a1e=Object.defineProperty,bS=Object.getOwnPropertySymbols,RK=Object.prototype.hasOwnProperty,DK=Object.prototype.propertyIsEnumerable,lW=(e,t,n)=>t in e?a1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uW=(e,t)=>{for(var n in t||(t={}))RK.call(t,n)&&lW(e,n,t[n]);if(bS)for(var n of bS(t))DK.call(t,n)&&lW(e,n,t[n]);return e},s1e=(e,t)=>{var n={};for(var r in e)RK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bS)for(var r of bS(e))t.indexOf(r)<0&&DK.call(e,r)&&(n[r]=e[r]);return n};const o1e={color:"gray",size:"md",variant:"subtle"},LK=I.exports.forwardRef((e,t)=>{const n=Ue("ActionIcon",o1e,e),{className:r,color:i,children:a,radius:s,size:o,variant:l,gradient:u,disabled:c,loaderProps:d,loading:p,unstyled:h,__staticSelector:m}=n,g=s1e(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled","__staticSelector"]),{classes:y,cx:v,theme:b}=qbe({radius:s,color:i,gradient:u},{name:["ActionIcon",m],unstyled:h,size:o,variant:l}),_=x(G2,{...uW({color:b.fn.variant({color:i,variant:l}).color,size:"100%","data-action-icon-loader":!0},d)});return x(Z1,{...uW({className:v(y.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":p||void 0,unstyled:h},g),children:p?_:a})});LK.displayName="@mantine/core/ActionIcon";const Le=LK;var l1e=Object.defineProperty,u1e=Object.defineProperties,c1e=Object.getOwnPropertyDescriptors,wS=Object.getOwnPropertySymbols,FK=Object.prototype.hasOwnProperty,zK=Object.prototype.propertyIsEnumerable,cW=(e,t,n)=>t in e?l1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d1e=(e,t)=>{for(var n in t||(t={}))FK.call(t,n)&&cW(e,n,t[n]);if(wS)for(var n of wS(t))zK.call(t,n)&&cW(e,n,t[n]);return e},p1e=(e,t)=>u1e(e,c1e(t)),h1e=(e,t)=>{var n={};for(var r in e)FK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wS)for(var r of wS(e))t.indexOf(r)<0&&zK.call(e,r)&&(n[r]=e[r]);return n};function SR(e){const t=Ue("Portal",{},e),{children:n,target:r,className:i,innerRef:a}=t,s=h1e(t,["children","target","className","innerRef"]),o=Za(),[l,u]=I.exports.useState(!1),c=I.exports.useRef();return _R(()=>(u(!0),c.current=r?typeof r=="string"?document.querySelector(r):r:document.createElement("div"),r||document.body.appendChild(c.current),()=>{!r&&document.body.removeChild(c.current)}),[r]),l?Kl.exports.createPortal(x("div",{...p1e(d1e({className:i,dir:o.dir},s),{ref:a}),children:n}),c.current):null}SR.displayName="@mantine/core/Portal";var f1e=Object.defineProperty,xS=Object.getOwnPropertySymbols,BK=Object.prototype.hasOwnProperty,WK=Object.prototype.propertyIsEnumerable,dW=(e,t,n)=>t in e?f1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m1e=(e,t)=>{for(var n in t||(t={}))BK.call(t,n)&&dW(e,n,t[n]);if(xS)for(var n of xS(t))WK.call(t,n)&&dW(e,n,t[n]);return e},g1e=(e,t)=>{var n={};for(var r in e)BK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xS)for(var r of xS(e))t.indexOf(r)<0&&WK.call(e,r)&&(n[r]=e[r]);return n};function X1(e){var t=e,{withinPortal:n=!0,children:r}=t,i=g1e(t,["withinPortal","children"]);return n?x(SR,{...m1e({},i),children:r}):x(Fe,{children:r})}X1.displayName="@mantine/core/OptionalPortal";var y1e=Object.defineProperty,_S=Object.getOwnPropertySymbols,VK=Object.prototype.hasOwnProperty,jK=Object.prototype.propertyIsEnumerable,pW=(e,t,n)=>t in e?y1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hW=(e,t)=>{for(var n in t||(t={}))VK.call(t,n)&&pW(e,n,t[n]);if(_S)for(var n of _S(t))jK.call(t,n)&&pW(e,n,t[n]);return e},v1e=(e,t)=>{var n={};for(var r in e)VK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_S)for(var r of _S(e))t.indexOf(r)<0&&jK.call(e,r)&&(n[r]=e[r]);return n};function HK(e){const t=e,{width:n,height:r,style:i}=t,a=v1e(t,["width","height","style"]);return x("svg",{...hW({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:hW({width:n,height:r},i)},a),children:x("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}HK.displayName="@mantine/core/CloseIcon";var b1e=Object.defineProperty,kS=Object.getOwnPropertySymbols,UK=Object.prototype.hasOwnProperty,GK=Object.prototype.propertyIsEnumerable,fW=(e,t,n)=>t in e?b1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w1e=(e,t)=>{for(var n in t||(t={}))UK.call(t,n)&&fW(e,n,t[n]);if(kS)for(var n of kS(t))GK.call(t,n)&&fW(e,n,t[n]);return e},x1e=(e,t)=>{var n={};for(var r in e)UK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kS)for(var r of kS(e))t.indexOf(r)<0&&GK.call(e,r)&&(n[r]=e[r]);return n};const _1e={xs:G(12),sm:G(16),md:G(20),lg:G(28),xl:G(34)},k1e={size:"sm"},qK=I.exports.forwardRef((e,t)=>{const n=Ue("CloseButton",k1e,e),{iconSize:r,size:i,children:a}=n,s=x1e(n,["iconSize","size","children"]),o=G(r||_1e[i]);return x(Le,{...w1e({ref:t,__staticSelector:"CloseButton",size:i},s),children:a||x(HK,{width:o,height:o})})});qK.displayName="@mantine/core/CloseButton";const q2=qK;var S1e=Object.defineProperty,C1e=Object.defineProperties,I1e=Object.getOwnPropertyDescriptors,mW=Object.getOwnPropertySymbols,$1e=Object.prototype.hasOwnProperty,T1e=Object.prototype.propertyIsEnumerable,gW=(e,t,n)=>t in e?S1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t_=(e,t)=>{for(var n in t||(t={}))$1e.call(t,n)&&gW(e,n,t[n]);if(mW)for(var n of mW(t))T1e.call(t,n)&&gW(e,n,t[n]);return e},N1e=(e,t)=>C1e(e,I1e(t));function E1e({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function O1e({theme:e,color:t}){return t==="dimmed"?e.fn.dimmed():typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:t||"inherit"}function P1e(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}function M1e({theme:e,truncate:t}){return t==="start"?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",direction:e.dir==="ltr"?"rtl":"ltr",textAlign:e.dir==="ltr"?"right":"left"}:t?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:null}var A1e=tt((e,{color:t,lineClamp:n,truncate:r,inline:i,inherit:a,underline:s,gradient:o,weight:l,transform:u,align:c,strikethrough:d,italic:p},{size:h})=>{const m=e.fn.variant({variant:"gradient",gradient:o});return{root:N1e(t_(t_(t_(t_({},e.fn.fontStyles()),e.fn.focusStyles()),P1e(n)),M1e({theme:e,truncate:r})),{color:O1e({color:t,theme:e}),fontFamily:a?"inherit":e.fontFamily,fontSize:a||h===void 0?"inherit":ke({size:h,sizes:e.fontSizes}),lineHeight:a?"inherit":i?1:e.lineHeight,textDecoration:E1e({underline:s,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:a?"inherit":l,textTransform:u,textAlign:c,fontStyle:p?"italic":void 0}),gradient:{backgroundImage:m.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const R1e=A1e;var D1e=Object.defineProperty,SS=Object.getOwnPropertySymbols,KK=Object.prototype.hasOwnProperty,ZK=Object.prototype.propertyIsEnumerable,yW=(e,t,n)=>t in e?D1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L1e=(e,t)=>{for(var n in t||(t={}))KK.call(t,n)&&yW(e,n,t[n]);if(SS)for(var n of SS(t))ZK.call(t,n)&&yW(e,n,t[n]);return e},F1e=(e,t)=>{var n={};for(var r in e)KK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SS)for(var r of SS(e))t.indexOf(r)<0&&ZK.call(e,r)&&(n[r]=e[r]);return n};const z1e={variant:"text"},XK=I.exports.forwardRef((e,t)=>{const n=Ue("Text",z1e,e),{className:r,size:i,weight:a,transform:s,color:o,align:l,variant:u,lineClamp:c,truncate:d,gradient:p,inline:h,inherit:m,underline:g,strikethrough:y,italic:v,classNames:b,styles:_,unstyled:k,span:S,__staticSelector:$}=n,N=F1e(n,["className","size","weight","transform","color","align","variant","lineClamp","truncate","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span","__staticSelector"]),{classes:P,cx:D}=R1e({color:o,lineClamp:c,truncate:d,inline:h,inherit:m,underline:g,strikethrough:y,italic:v,weight:a,transform:s,align:l,gradient:p},{unstyled:k,name:$||"Text",variant:u,size:i});return x(vt,{...L1e({ref:t,className:D(P.root,{[P.gradient]:u==="gradient"},r),component:S?"span":"div"},N)})});XK.displayName="@mantine/core/Text";const Te=XK,B1e=I.exports.createContext({zIndex:1e3,fixed:!1,layout:"default"}),W1e=B1e.Provider;var V1e=Object.defineProperty,vW=Object.getOwnPropertySymbols,j1e=Object.prototype.hasOwnProperty,H1e=Object.prototype.propertyIsEnumerable,bW=(e,t,n)=>t in e?V1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JK=(e,t)=>{for(var n in t||(t={}))j1e.call(t,n)&&bW(e,n,t[n]);if(vW)for(var n of vW(t))H1e.call(t,n)&&bW(e,n,t[n]);return e};function U1e(e,t){const n=ke({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?ke({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?ke({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;if(!e.fixed)return{padding:n};const a=Ko(r),s=Ko(i);return JK({minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n})`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n})`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n})`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n})`},a===s?{[`@media (max-width: ${Xc(a-1)})`]:{paddingLeft:n,paddingRight:n}}:{[`@media (max-width: ${Xc(a-1)})`]:{paddingLeft:n},[`@media (max-width: ${Xc(s-1)})`]:{paddingRight:n}})}var G1e=tt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:JK({flex:1,width:"100vw",boxSizing:"border-box"},U1e(t,e))}));const q1e=G1e;var K1e=Object.defineProperty,CS=Object.getOwnPropertySymbols,YK=Object.prototype.hasOwnProperty,QK=Object.prototype.propertyIsEnumerable,wW=(e,t,n)=>t in e?K1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z1e=(e,t)=>{for(var n in t||(t={}))YK.call(t,n)&&wW(e,n,t[n]);if(CS)for(var n of CS(t))QK.call(t,n)&&wW(e,n,t[n]);return e},X1e=(e,t)=>{var n={};for(var r in e)YK.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CS)for(var r of CS(e))t.indexOf(r)<0&&QK.call(e,r)&&(n[r]=e[r]);return n};const J1e={fixed:!0,padding:"md"},ck=I.exports.forwardRef((e,t)=>{const n=Ue("AppShell",J1e,e),{children:r,navbar:i,header:a,footer:s,aside:o,fixed:l,zIndex:u,padding:c,navbarOffsetBreakpoint:d,asideOffsetBreakpoint:p,className:h,styles:m,classNames:g,unstyled:y,hidden:v,layout:b,variant:_}=n,k=X1e(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden","layout","variant"]),{classes:S,cx:$}=q1e({padding:c,fixed:l,navbarOffsetBreakpoint:d,asideOffsetBreakpoint:p},{styles:m,classNames:g,unstyled:y,name:"AppShell",variant:_});return v?x(Fe,{children:r}):x(W1e,{value:{fixed:l,zIndex:u,layout:b},children:B(vt,{...Z1e({className:$(S.root,h),ref:t},k),children:[a,B("div",{className:S.body,children:[i,x("main",{className:S.main,children:r}),o]}),s]})})});ck.displayName="@mantine/core/AppShell";const n_={xs:G(1),sm:G(2),md:G(3),lg:G(4),xl:G(5)};function r_(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var Y1e=tt((e,{color:t},{size:n,variant:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:G(1),borderTop:`${ke({size:n,sizes:n_})} ${r} ${r_(e,t)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${ke({size:n,sizes:n_})} ${r} ${r_(e,t)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:t==="dark"?e.colors.dark[1]:e.fn.themeColor(t,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:G(ke({size:n,sizes:n_})),borderTopColor:r_(e,t),borderTopStyle:r,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:G(ke({size:n,sizes:n_})),borderLeftColor:r_(e,t),borderLeftStyle:r}}));const Q1e=Y1e;var ewe=Object.defineProperty,twe=Object.defineProperties,nwe=Object.getOwnPropertyDescriptors,IS=Object.getOwnPropertySymbols,eZ=Object.prototype.hasOwnProperty,tZ=Object.prototype.propertyIsEnumerable,xW=(e,t,n)=>t in e?ewe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_W=(e,t)=>{for(var n in t||(t={}))eZ.call(t,n)&&xW(e,n,t[n]);if(IS)for(var n of IS(t))tZ.call(t,n)&&xW(e,n,t[n]);return e},rwe=(e,t)=>twe(e,nwe(t)),iwe=(e,t)=>{var n={};for(var r in e)eZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IS)for(var r of IS(e))t.indexOf(r)<0&&tZ.call(e,r)&&(n[r]=e[r]);return n};const awe={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},Fs=I.exports.forwardRef((e,t)=>{const n=Ue("Divider",awe,e),{className:r,color:i,orientation:a,size:s,label:o,labelPosition:l,labelProps:u,variant:c,styles:d,classNames:p,unstyled:h}=n,m=iwe(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:g,cx:y}=Q1e({color:i},{classNames:p,styles:d,unstyled:h,name:"Divider",variant:c,size:s}),v=a==="vertical",b=a==="horizontal",_=!!o&&b,k=!(u!=null&&u.color);return x(vt,{..._W({ref:t,className:y(g.root,{[g.vertical]:v,[g.horizontal]:b,[g.withLabel]:_},r),role:"separator"},m),children:_&&x(Te,{...rwe(_W({},u),{size:(u==null?void 0:u.size)||"xs",mt:G(2),className:y(g.label,g[l],{[g.labelDefaultStyles]:k})}),children:o})})});Fs.displayName="@mantine/core/Divider";var swe=Object.defineProperty,owe=Object.defineProperties,lwe=Object.getOwnPropertyDescriptors,kW=Object.getOwnPropertySymbols,uwe=Object.prototype.hasOwnProperty,cwe=Object.prototype.propertyIsEnumerable,SW=(e,t,n)=>t in e?swe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CW=(e,t)=>{for(var n in t||(t={}))uwe.call(t,n)&&SW(e,n,t[n]);if(kW)for(var n of kW(t))cwe.call(t,n)&&SW(e,n,t[n]);return e},dwe=(e,t)=>owe(e,lwe(t)),pwe=tt((e,t,{size:n})=>({item:dwe(CW({},e.fn.fontStyles()),{boxSizing:"border-box",wordBreak:"break-all",textAlign:"left",width:"100%",padding:`calc(${ke({size:n,sizes:e.spacing})} / 1.5) ${ke({size:n,sizes:e.spacing})}`,cursor:"pointer",fontSize:ke({size:n,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.fn.radius(),"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":CW({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:`calc(${ke({size:n,sizes:e.spacing})} / 2)`,paddingBottom:`calc(${ke({size:n,sizes:e.spacing})} / 2)`,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`calc(${ke({size:n,sizes:e.spacing})} / 1.5) ${ke({size:n,sizes:e.spacing})}`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const hwe=pwe;var fwe=Object.defineProperty,IW=Object.getOwnPropertySymbols,mwe=Object.prototype.hasOwnProperty,gwe=Object.prototype.propertyIsEnumerable,$W=(e,t,n)=>t in e?fwe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ywe=(e,t)=>{for(var n in t||(t={}))mwe.call(t,n)&&$W(e,n,t[n]);if(IW)for(var n of IW(t))gwe.call(t,n)&&$W(e,n,t[n]);return e};function CR({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:a,__staticSelector:s,onItemHover:o,onItemSelect:l,itemsRefs:u,itemComponent:c,size:d,nothingFound:p,creatable:h,createLabel:m,unstyled:g,variant:y}){const{classes:v}=hwe(null,{classNames:n,styles:r,unstyled:g,name:s,variant:y,size:d}),b=[],_=[];let k=null;const S=(N,P)=>{const D=typeof i=="function"?i(N.value):!1;return x(c,{...ywe({key:N.value,className:v.item,"data-disabled":N.disabled||void 0,"data-hovered":!N.disabled&&t===P||void 0,"data-selected":!N.disabled&&D||void 0,selected:D,onMouseEnter:()=>o(P),id:`${a}-${P}`,role:"option",tabIndex:-1,"aria-selected":t===P,ref:O=>{u&&u.current&&(u.current[N.value]=O)},onMouseDown:N.disabled?null:O=>{O.preventDefault(),l(N)},disabled:N.disabled,variant:y},N)})};let $=null;if(e.forEach((N,P)=>{N.creatable?k=P:N.group?($!==N.group&&($=N.group,_.push(x("div",{className:v.separator,children:x(Fs,{classNames:{label:v.separatorLabel},label:N.group})},`__mantine-divider-${P}`))),_.push(S(N,P))):b.push(S(N,P))}),h){const N=e[k];b.push(x("div",{className:v.item,"data-hovered":t===k||void 0,onMouseEnter:()=>o(k),onMouseDown:P=>{P.preventDefault(),l(N)},tabIndex:-1,ref:P=>{u&&u.current&&(u.current[N.value]=P)},children:m},Lp()))}return _.length>0&&b.length>0&&b.unshift(x("div",{className:v.separator,children:x(Fs,{})},"empty-group-separator")),_.length>0||b.length>0?B(Fe,{children:[_,b]}):x(Te,{size:d,unstyled:g,className:v.nothingFound,children:p})}CR.displayName="@mantine/core/SelectItems";var vwe=Object.defineProperty,$S=Object.getOwnPropertySymbols,nZ=Object.prototype.hasOwnProperty,rZ=Object.prototype.propertyIsEnumerable,TW=(e,t,n)=>t in e?vwe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bwe=(e,t)=>{for(var n in t||(t={}))nZ.call(t,n)&&TW(e,n,t[n]);if($S)for(var n of $S(t))rZ.call(t,n)&&TW(e,n,t[n]);return e},wwe=(e,t)=>{var n={};for(var r in e)nZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$S)for(var r of $S(e))t.indexOf(r)<0&&rZ.call(e,r)&&(n[r]=e[r]);return n};const IR=I.exports.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,a=wwe(n,["label","value"]);return x("div",{...bwe({ref:t},a),children:r||i})});IR.displayName="@mantine/core/DefaultItem";function xwe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function iZ(...e){return t=>e.forEach(n=>xwe(n,t))}function Mh(...e){return I.exports.useCallback(iZ(...e),e)}const aZ=I.exports.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.exports.Children.toArray(n),a=i.find(kwe);if(a){const s=a.props.children,o=i.map(l=>l===a?I.exports.Children.count(s)>1?I.exports.Children.only(null):I.exports.isValidElement(s)?s.props.children:null:l);return I.exports.createElement(hP,Zn({},r,{ref:t}),I.exports.isValidElement(s)?I.exports.cloneElement(s,void 0,o):null)}return I.exports.createElement(hP,Zn({},r,{ref:t}),n)});aZ.displayName="Slot";const hP=I.exports.forwardRef((e,t)=>{const{children:n,...r}=e;return I.exports.isValidElement(n)?I.exports.cloneElement(n,{...Swe(r,n.props),ref:iZ(t,n.ref)}):I.exports.Children.count(n)>1?I.exports.Children.only(null):null});hP.displayName="SlotClone";const _we=({children:e})=>I.exports.createElement(I.exports.Fragment,null,e);function kwe(e){return I.exports.isValidElement(e)&&e.type===_we}function Swe(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{a(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}const Cwe=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],J1=Cwe.reduce((e,t)=>{const n=I.exports.forwardRef((r,i)=>{const{asChild:a,...s}=r,o=a?aZ:t;return I.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.exports.createElement(o,Zn({},s,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),fP=Boolean(globalThis==null?void 0:globalThis.document)?I.exports.useLayoutEffect:()=>{};function Iwe(e,t){return I.exports.useReducer((n,r)=>{const i=t[n][r];return i!=null?i:n},e)}const Y1=e=>{const{present:t,children:n}=e,r=$we(t),i=typeof n=="function"?n({present:r.isPresent}):I.exports.Children.only(n),a=Mh(r.ref,i.ref);return typeof n=="function"||r.isPresent?I.exports.cloneElement(i,{ref:a}):null};Y1.displayName="Presence";function $we(e){const[t,n]=I.exports.useState(),r=I.exports.useRef({}),i=I.exports.useRef(e),a=I.exports.useRef("none"),s=e?"mounted":"unmounted",[o,l]=Iwe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.exports.useEffect(()=>{const u=i_(r.current);a.current=o==="mounted"?u:"none"},[o]),fP(()=>{const u=r.current,c=i.current;if(c!==e){const p=a.current,h=i_(u);e?l("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(c&&p!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,l]),fP(()=>{if(t){const u=d=>{const h=i_(r.current).includes(d.animationName);d.target===t&&h&&Kl.exports.flushSync(()=>l("ANIMATION_END"))},c=d=>{d.target===t&&(a.current=i_(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:I.exports.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function i_(e){return(e==null?void 0:e.animationName)||"none"}function Twe(e,t=[]){let n=[];function r(a,s){const o=I.exports.createContext(s),l=n.length;n=[...n,s];function u(d){const{scope:p,children:h,...m}=d,g=(p==null?void 0:p[e][l])||o,y=I.exports.useMemo(()=>m,Object.values(m));return I.exports.createElement(g.Provider,{value:y},h)}function c(d,p){const h=(p==null?void 0:p[e][l])||o,m=I.exports.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,c]}const i=()=>{const a=n.map(s=>I.exports.createContext(s));return function(o){const l=(o==null?void 0:o[e])||a;return I.exports.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return i.scopeName=e,[r,Nwe(i,...t)]}function Nwe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const d=l(a)[`__scope${u}`];return{...o,...d}},{});return I.exports.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function gp(e){const t=I.exports.useRef(e);return I.exports.useEffect(()=>{t.current=e}),I.exports.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const Ewe=I.exports.createContext(void 0);function Owe(e){const t=I.exports.useContext(Ewe);return e||t||"ltr"}function Pwe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Fp(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Mwe(e,t){return I.exports.useReducer((n,r)=>{const i=t[n][r];return i!=null?i:n},e)}const sZ="ScrollArea",[oZ,OTt]=Twe(sZ),[Awe,yo]=oZ(sZ),Rwe=I.exports.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...s}=e,[o,l]=I.exports.useState(null),[u,c]=I.exports.useState(null),[d,p]=I.exports.useState(null),[h,m]=I.exports.useState(null),[g,y]=I.exports.useState(null),[v,b]=I.exports.useState(0),[_,k]=I.exports.useState(0),[S,$]=I.exports.useState(!1),[N,P]=I.exports.useState(!1),D=Mh(t,F=>l(F)),O=Owe(i);return I.exports.createElement(Awe,{scope:n,type:r,dir:O,scrollHideDelay:a,scrollArea:o,viewport:u,onViewportChange:c,content:d,onContentChange:p,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:$,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:N,onScrollbarYEnabledChange:P,onCornerWidthChange:b,onCornerHeightChange:k},I.exports.createElement(J1.div,Zn({dir:O},s,{ref:D,style:{position:"relative",["--radix-scroll-area-corner-width"]:v+"px",["--radix-scroll-area-corner-height"]:_+"px",...e.style}})))}),Dwe="ScrollAreaViewport",Lwe=I.exports.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,a=yo(Dwe,n),s=I.exports.useRef(null),o=Mh(t,s,a.onViewportChange);return I.exports.createElement(I.exports.Fragment,null,I.exports.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),I.exports.createElement(J1.div,Zn({"data-radix-scroll-area-viewport":""},i,{ref:o,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style}}),I.exports.createElement("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Hu="ScrollAreaScrollbar",Fwe=I.exports.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yo(Hu,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=i,o=e.orientation==="horizontal";return I.exports.useEffect(()=>(o?a(!0):s(!0),()=>{o?a(!1):s(!1)}),[o,a,s]),i.type==="hover"?I.exports.createElement(zwe,Zn({},r,{ref:t,forceMount:n})):i.type==="scroll"?I.exports.createElement(Bwe,Zn({},r,{ref:t,forceMount:n})):i.type==="auto"?I.exports.createElement(lZ,Zn({},r,{ref:t,forceMount:n})):i.type==="always"?I.exports.createElement($R,Zn({},r,{ref:t})):null}),zwe=I.exports.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yo(Hu,e.__scopeScrollArea),[a,s]=I.exports.useState(!1);return I.exports.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},c=()=>{l=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),I.exports.createElement(Y1,{present:n||a},I.exports.createElement(lZ,Zn({"data-state":a?"visible":"hidden"},r,{ref:t})))}),Bwe=I.exports.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yo(Hu,e.__scopeScrollArea),a=e.orientation==="horizontal",s=Z2(()=>l("SCROLL_END"),100),[o,l]=Mwe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return I.exports.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay,l]),I.exports.useEffect(()=>{const u=i.viewport,c=a?"scrollLeft":"scrollTop";if(u){let d=u[c];const p=()=>{const h=u[c];d!==h&&(l("SCROLL"),s()),d=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[i.viewport,a,l,s]),I.exports.createElement(Y1,{present:n||o!=="hidden"},I.exports.createElement($R,Zn({"data-state":o==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:Fp(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Fp(e.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),lZ=I.exports.forwardRef((e,t)=>{const n=yo(Hu,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,s]=I.exports.useState(!1),o=e.orientation==="horizontal",l=Z2(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:c)}},10);return Zg(n.viewport,l),Zg(n.content,l),I.exports.createElement(Y1,{present:r||a},I.exports.createElement($R,Zn({"data-state":a?"visible":"hidden"},i,{ref:t})))}),$R=I.exports.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=yo(Hu,e.__scopeScrollArea),a=I.exports.useRef(null),s=I.exports.useRef(0),[o,l]=I.exports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=pZ(o.viewport,o.content),c={...r,sizes:o,onSizesChange:l,hasThumb:Boolean(u>0&&u<1),onThumbChange:p=>a.current=p,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:p=>s.current=p};function d(p,h){return Kwe(p,s.current,o,h)}return n==="horizontal"?I.exports.createElement(Wwe,Zn({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,h=NW(p,o,i.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=d(p,i.dir))}})):n==="vertical"?I.exports.createElement(Vwe,Zn({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,h=NW(p,o);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=d(p))}})):null}),Wwe=I.exports.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=yo(Hu,e.__scopeScrollArea),[s,o]=I.exports.useState(),l=I.exports.useRef(null),u=Mh(t,l,a.onScrollbarXChange);return I.exports.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),I.exports.createElement(cZ,Zn({"data-orientation":"horizontal"},i,{ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,["--radix-scroll-area-thumb-width"]:K2(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,d)=>{if(a.viewport){const p=a.viewport.scrollLeft+c.deltaX;e.onWheelScroll(p),fZ(p,d)&&c.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:TS(s.paddingLeft),paddingEnd:TS(s.paddingRight)}})}}))}),Vwe=I.exports.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=yo(Hu,e.__scopeScrollArea),[s,o]=I.exports.useState(),l=I.exports.useRef(null),u=Mh(t,l,a.onScrollbarYChange);return I.exports.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),I.exports.createElement(cZ,Zn({"data-orientation":"vertical"},i,{ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)",["--radix-scroll-area-thumb-height"]:K2(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,d)=>{if(a.viewport){const p=a.viewport.scrollTop+c.deltaY;e.onWheelScroll(p),fZ(p,d)&&c.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:TS(s.paddingTop),paddingEnd:TS(s.paddingBottom)}})}}))}),[jwe,uZ]=oZ(Hu),cZ=I.exports.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:c,onResize:d,...p}=e,h=yo(Hu,n),[m,g]=I.exports.useState(null),y=Mh(t,D=>g(D)),v=I.exports.useRef(null),b=I.exports.useRef(""),_=h.viewport,k=r.content-r.viewport,S=gp(c),$=gp(l),N=Z2(d,10);function P(D){if(v.current){const O=D.clientX-v.current.left,F=D.clientY-v.current.top;u({x:O,y:F})}}return I.exports.useEffect(()=>{const D=O=>{const F=O.target;(m==null?void 0:m.contains(F))&&S(O,k)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[_,m,k,S]),I.exports.useEffect($,[r,$]),Zg(m,N),Zg(h.content,N),I.exports.createElement(jwe,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:gp(a),onThumbPointerUp:gp(s),onThumbPositionChange:$,onThumbPointerDown:gp(o)},I.exports.createElement(J1.div,Zn({},p,{ref:y,style:{position:"absolute",...p.style},onPointerDown:Fp(e.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),v.current=m.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",P(D))}),onPointerMove:Fp(e.onPointerMove,P),onPointerUp:Fp(e.onPointerUp,D=>{const O=D.target;O.hasPointerCapture(D.pointerId)&&O.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=b.current,v.current=null})})))}),mP="ScrollAreaThumb",Hwe=I.exports.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=uZ(mP,e.__scopeScrollArea);return I.exports.createElement(Y1,{present:n||i.hasThumb},I.exports.createElement(Uwe,Zn({ref:t},r)))}),Uwe=I.exports.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=yo(mP,n),s=uZ(mP,n),{onThumbPositionChange:o}=s,l=Mh(t,d=>s.onThumbChange(d)),u=I.exports.useRef(),c=Z2(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.exports.useEffect(()=>{const d=a.viewport;if(d){const p=()=>{if(c(),!u.current){const h=Zwe(d,o);u.current=h,o()}};return o(),d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[a.viewport,c,o]),I.exports.createElement(J1.div,Zn({"data-state":s.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fp(e.onPointerDownCapture,d=>{const h=d.target.getBoundingClientRect(),m=d.clientX-h.left,g=d.clientY-h.top;s.onThumbPointerDown({x:m,y:g})}),onPointerUp:Fp(e.onPointerUp,s.onThumbPointerUp)}))}),dZ="ScrollAreaCorner",Gwe=I.exports.forwardRef((e,t)=>{const n=yo(dZ,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?I.exports.createElement(qwe,Zn({},e,{ref:t})):null}),qwe=I.exports.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=yo(dZ,n),[a,s]=I.exports.useState(0),[o,l]=I.exports.useState(0),u=Boolean(a&&o);return Zg(i.scrollbarX,()=>{var c;const d=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),Zg(i.scrollbarY,()=>{var c;const d=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(d),s(d)}),u?I.exports.createElement(J1.div,Zn({},r,{ref:t,style:{width:a,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function TS(e){return e?parseInt(e,10):0}function pZ(e,t){const n=e/t;return isNaN(n)?0:n}function K2(e){const t=pZ(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Kwe(e,t,n,r="ltr"){const i=K2(n),a=i/2,s=t||a,o=i-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return hZ([l,u],d)(e)}function NW(e,t,n="ltr"){const r=K2(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,s=t.content-t.viewport,o=a-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Pwe(e,l);return hZ([0,s],[0,o])(u)}function hZ(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function fZ(e,t){return e>0&&e<t}const Zwe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},s=n.left!==a.left,o=n.top!==a.top;(s||o)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Z2(e,t){const n=gp(e),r=I.exports.useRef(0);return I.exports.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.exports.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Zg(e,t){const n=gp(t);fP(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Xwe=Rwe,Jwe=Lwe,EW=Fwe,OW=Hwe,Ywe=Gwe;var Qwe=tt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i})=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?G(t):void 0,paddingBottom:n?G(t):void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:`calc(${G(t)}  / 5)`,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${Wo("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:G(t)},'&[data-orientation="horizontal"]':{flexDirection:"column",height:G(t)},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:Wo("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:G(t),position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,overflow:"hidden","&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:G(44),minHeight:G(44)}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const exe=Qwe;var txe=Object.defineProperty,nxe=Object.defineProperties,rxe=Object.getOwnPropertyDescriptors,NS=Object.getOwnPropertySymbols,mZ=Object.prototype.hasOwnProperty,gZ=Object.prototype.propertyIsEnumerable,PW=(e,t,n)=>t in e?txe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gP=(e,t)=>{for(var n in t||(t={}))mZ.call(t,n)&&PW(e,n,t[n]);if(NS)for(var n of NS(t))gZ.call(t,n)&&PW(e,n,t[n]);return e},yZ=(e,t)=>nxe(e,rxe(t)),vZ=(e,t)=>{var n={};for(var r in e)mZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NS)for(var r of NS(e))t.indexOf(r)<0&&gZ.call(e,r)&&(n[r]=e[r]);return n};const bZ={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},X2=I.exports.forwardRef((e,t)=>{const n=Ue("ScrollArea",bZ,e),{children:r,className:i,classNames:a,styles:s,scrollbarSize:o,scrollHideDelay:l,type:u,dir:c,offsetScrollbars:d,viewportRef:p,onScrollPositionChange:h,unstyled:m,variant:g,viewportProps:y}=n,v=vZ(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","variant","viewportProps"]),[b,_]=I.exports.useState(!1),k=Za(),{classes:S,cx:$}=exe({scrollbarSize:o,offsetScrollbars:d,scrollbarHovered:b,hidden:u==="never"},{name:"ScrollArea",classNames:a,styles:s,unstyled:m,variant:g});return x(Xwe,{type:u==="never"?"always":u,scrollHideDelay:l,dir:c||k.dir,ref:t,asChild:!0,children:B(vt,{...gP({className:$(S.root,i)},v),children:[x(Jwe,{...yZ(gP({},y),{className:S.viewport,ref:p,onScroll:typeof h=="function"?({currentTarget:N})=>h({x:N.scrollLeft,y:N.scrollTop}):void 0}),children:r}),x(EW,{orientation:"horizontal",className:S.scrollbar,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:x(OW,{className:S.thumb})}),x(EW,{orientation:"vertical",className:S.scrollbar,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:x(OW,{className:S.thumb})}),x(Ywe,{className:S.corner})]})})}),wZ=I.exports.forwardRef((e,t)=>{const n=Ue("ScrollAreaAutosize",bZ,e),{children:r,classNames:i,styles:a,scrollbarSize:s,scrollHideDelay:o,type:l,dir:u,offsetScrollbars:c,viewportRef:d,onScrollPositionChange:p,unstyled:h,sx:m,variant:g,viewportProps:y}=n,v=vZ(n,["children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx","variant","viewportProps"]);return kr.createElement(vt,yZ(gP({},v),{ref:t,sx:[{display:"flex"},...pR(m)]}),kr.createElement(vt,{sx:{display:"flex",flexDirection:"column",flex:1}},kr.createElement(X2,{classNames:i,styles:a,scrollHideDelay:o,scrollbarSize:s,type:l,dir:u,offsetScrollbars:c,viewportRef:d,onScrollPositionChange:p,unstyled:h,variant:g,viewportProps:y},r)))});wZ.displayName="@mantine/core/ScrollAreaAutosize";X2.displayName="@mantine/core/ScrollArea";X2.Autosize=wZ;const Mn=X2;var ixe=Object.defineProperty,axe=Object.defineProperties,sxe=Object.getOwnPropertyDescriptors,ES=Object.getOwnPropertySymbols,xZ=Object.prototype.hasOwnProperty,_Z=Object.prototype.propertyIsEnumerable,MW=(e,t,n)=>t in e?ixe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AW=(e,t)=>{for(var n in t||(t={}))xZ.call(t,n)&&MW(e,n,t[n]);if(ES)for(var n of ES(t))_Z.call(t,n)&&MW(e,n,t[n]);return e},oxe=(e,t)=>axe(e,sxe(t)),lxe=(e,t)=>{var n={};for(var r in e)xZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ES)for(var r of ES(e))t.indexOf(r)<0&&_Z.call(e,r)&&(n[r]=e[r]);return n};const J2=I.exports.forwardRef((e,t)=>{var n=e,{style:r}=n,i=lxe(n,["style"]);return x(Mn,{...oxe(AW({},i),{style:AW({width:"100%"},r),viewportProps:{tabIndex:-1},viewportRef:t}),children:i.children})});J2.displayName="@mantine/core/SelectScrollArea";var uxe=tt(()=>({dropdown:{},itemsWrapper:{padding:G(4),display:"flex",width:"100%",boxSizing:"border-box"}}));const cxe=uxe;function Dy(e){return e.split("-")[1]}function TR(e){return e==="y"?"height":"width"}function Xo(e){return e.split("-")[0]}function Nd(e){return["top","bottom"].includes(Xo(e))?"x":"y"}function RW(e,t,n){let{reference:r,floating:i}=e;const a=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,o=Nd(t),l=TR(o),u=r[l]/2-i[l]/2,c=Xo(t),d=o==="x";let p;switch(c){case"top":p={x:a,y:r.y-i.height};break;case"bottom":p={x:a,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:s};break;case"left":p={x:r.x-i.width,y:s};break;default:p={x:r.x,y:r.y}}switch(Dy(t)){case"start":p[o]-=u*(n&&d?-1:1);break;case"end":p[o]+=u*(n&&d?-1:1);break}return p}const dxe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=RW(u,r,l),p=r,h={},m=0;for(let g=0;g<o.length;g++){const{name:y,fn:v}=o[g],{x:b,y:_,data:k,reset:S}=await v({x:c,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:e,floating:t}});if(c=b!=null?b:c,d=_!=null?_:d,h={...h,[y]:{...h[y],...k}},S&&m<=50){m++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:d}=RW(u,p,l)),g=-1;continue}}return{x:c,y:d,placement:p,strategy:i,middlewareData:h}};function Mu(e,t){return typeof e=="function"?e(t):e}function pxe(e){return{top:0,right:0,bottom:0,left:0,...e}}function NR(e){return typeof e!="number"?pxe(e):{top:e,right:e,bottom:e,left:e}}function Xg(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function ER(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=Mu(t,e),m=NR(h),y=o[p?d==="floating"?"reference":"floating":d],v=Xg(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),b=d==="floating"?{...s.floating,x:r,y:i}:s.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),k=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Xg(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:_,strategy:l}):b);return{top:(v.top-S.top+m.top)/k.y,bottom:(S.bottom-v.bottom+m.bottom)/k.y,left:(v.left-S.left+m.left)/k.x,right:(S.right-v.right+m.right)/k.x}}const od=Math.min,_l=Math.max;function yP(e,t,n){return _l(e,od(t,n))}const DW=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o}=t,{element:l,padding:u=0}=Mu(e,t)||{};if(l==null)return{};const c=NR(u),d={x:n,y:r},p=Nd(i),h=TR(p),m=await s.getDimensions(l),g=p==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=a.reference[h]+a.reference[p]-d[p]-a.floating[h],k=d[p]-a.reference[p],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let $=S?S[b]:0;(!$||!await(s.isElement==null?void 0:s.isElement(S)))&&($=o.floating[b]||a.floating[h]);const N=_/2-k/2,P=$/2-m[h]/2-1,D=od(c[y],P),O=od(c[v],P),F=D,E=$-m[h]-O,z=$/2-m[h]/2+N,q=yP(F,z,E),Z=Dy(i)!=null&&z!=q&&a.reference[h]/2-(z<F?D:O)-m[h]/2<0?z<F?F-z:E-z:0;return{[p]:d[p]-Z,data:{[p]:q,centerOffset:z-q+Z}}}}),hxe={left:"right",right:"left",bottom:"top",top:"bottom"};function OS(e){return e.replace(/left|right|bottom|top/g,t=>hxe[t])}function fxe(e,t,n){n===void 0&&(n=!1);const r=Dy(e),i=Nd(e),a=TR(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=OS(s)),{main:s,cross:OS(s)}}const mxe={start:"end",end:"start"};function vP(e){return e.replace(/start|end/g,t=>mxe[t])}function gxe(e){const t=OS(e);return[vP(e),t,vP(t)]}function yxe(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:s;default:return[]}}function vxe(e,t,n,r){const i=Dy(e);let a=yxe(Xo(e),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),t&&(a=a.concat(a.map(vP)))),a}const kZ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:a,initialPlacement:s,platform:o,elements:l}=t,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...g}=Mu(e,t),y=Xo(r),v=Xo(s)===s,b=await(o.isRTL==null?void 0:o.isRTL(l.floating)),_=d||(v||!m?[OS(s)]:gxe(s));!d&&h!=="none"&&_.push(...vxe(s,m,h,b));const k=[s,..._],S=await ER(t,g),$=[];let N=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&$.push(S[y]),c){const{main:F,cross:E}=fxe(r,a,b);$.push(S[F],S[E])}if(N=[...N,{placement:r,overflows:$}],!$.every(F=>F<=0)){var P,D;const F=(((P=i.flip)==null?void 0:P.index)||0)+1,E=k[F];if(E)return{data:{index:F,overflows:N},reset:{placement:E}};let z=(D=N.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:D.placement;if(!z)switch(p){case"bestFit":{var O;const q=(O=N.map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,te)=>Z+te,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:O[0];q&&(z=q);break}case"initialPlacement":z=s;break}if(r!==z)return{reset:{placement:z}}}return{}}}};function SZ(e){const t=od(...e.map(a=>a.left)),n=od(...e.map(a=>a.top)),r=_l(...e.map(a=>a.right)),i=_l(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:i-n}}function bxe(e){const t=e.slice().sort((i,a)=>i.y-a.y),n=[];let r=null;for(let i=0;i<t.length;i++){const a=t[i];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(i=>Xg(SZ(i)))}const CZ=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:a,strategy:s}=t,{padding:o=2,x:l,y:u}=Mu(e,t),c=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),d=bxe(c),p=Xg(SZ(c)),h=NR(o);function m(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(y=>l>y.left-h.left&&l<y.right+h.right&&u>y.top-h.top&&u<y.bottom+h.bottom)||p;if(d.length>=2){if(Nd(n)==="x"){const O=d[0],F=d[d.length-1],E=Xo(n)==="top",z=O.top,q=F.bottom,K=E?O.left:F.left,Z=E?O.right:F.right,te=Z-K,V=q-z;return{top:z,bottom:q,left:K,right:Z,width:te,height:V,x:K,y:z}}const y=Xo(n)==="left",v=_l(...d.map(O=>O.right)),b=od(...d.map(O=>O.left)),_=d.filter(O=>y?O.left===b:O.right===v),k=_[0].top,S=_[_.length-1].bottom,$=b,N=v,P=N-$,D=S-k;return{top:k,bottom:S,left:$,right:N,width:P,height:D,x:$,y:k}}return p}const g=await a.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:s});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};async function wxe(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Xo(n),o=Dy(n),l=Nd(n)==="x",u=["left","top"].includes(s)?-1:1,c=a&&l?-1:1,d=Mu(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),l?{x:h*c,y:p*u}:{x:p*u,y:h*c}}const IZ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await wxe(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function $Z(e){return e==="x"?"y":"x"}const OR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...l}=Mu(e,t),u={x:n,y:r},c=await ER(t,l),d=Nd(Xo(i)),p=$Z(d);let h=u[d],m=u[p];if(a){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[y],_=h-c[v];h=yP(b,h,_)}if(s){const y=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=m+c[y],_=m-c[v];m=yP(b,m,_)}const g=o.fn({...t,[d]:h,[p]:m});return{...g,data:{x:g.x-n,y:g.y-r}}}}},xxe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Mu(e,t),c={x:n,y:r},d=Nd(i),p=$Z(d);let h=c[d],m=c[p];const g=Mu(o,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=d==="y"?"height":"width",k=a.reference[d]-a.floating[_]+y.mainAxis,S=a.reference[d]+a.reference[_]-y.mainAxis;h<k?h=k:h>S&&(h=S)}if(u){var v,b;const _=d==="y"?"width":"height",k=["top","left"].includes(Xo(i)),S=a.reference[p]-a.floating[_]+(k&&((v=s.offset)==null?void 0:v[p])||0)+(k?0:y.crossAxis),$=a.reference[p]+a.reference[_]+(k?0:((b=s.offset)==null?void 0:b[p])||0)-(k?y.crossAxis:0);m<S?m=S:m>$&&(m=$)}return{[d]:h,[p]:m}}}},_xe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:a}=t,{apply:s=()=>{},...o}=Mu(e,t),l=await ER(t,o),u=Xo(n),c=Dy(n),p=Nd(n)==="x",{width:h,height:m}=r.floating;let g,y;u==="top"||u==="bottom"?(g=u,y=c===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=u,g=c==="end"?"top":"bottom");const v=m-l[g],b=h-l[y],_=!t.middlewareData.shift;let k=v,S=b;if(p){const N=h-l.left-l.right;S=c||_?od(b,N):N}else{const N=m-l.top-l.bottom;k=c||_?od(v,N):N}if(_&&!c){const N=_l(l.left,0),P=_l(l.right,0),D=_l(l.top,0),O=_l(l.bottom,0);p?S=h-2*(N!==0||P!==0?N+P:_l(l.left,l.right)):k=m-2*(D!==0||O!==0?D+O:_l(l.top,l.bottom))}await s({...t,availableWidth:S,availableHeight:k});const $=await i.getDimensions(a.floating);return h!==$.width||m!==$.height?{reset:{rects:!0}}:{}}}};function uo(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Jo(e){return uo(e).getComputedStyle(e)}function TZ(e){return e instanceof uo(e).Node}function ld(e){return TZ(e)?(e.nodeName||"").toLowerCase():"#document"}function Yo(e){return e instanceof uo(e).HTMLElement}function Au(e){return e instanceof uo(e).Element}function LW(e){return typeof ShadowRoot>"u"?!1:e instanceof uo(e).ShadowRoot||e instanceof ShadowRoot}function Q1(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Jo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function kxe(e){return["table","td","th"].includes(ld(e))}function PR(e){const t=MR(),n=Jo(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function MR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Y2(e){return["html","body","#document"].includes(ld(e))}const bP=Math.min,$g=Math.max,PS=Math.round,a_=Math.floor,nh=e=>({x:e,y:e});function NZ(e){const t=Jo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Yo(e),a=i?e.offsetWidth:n,s=i?e.offsetHeight:r,o=PS(n)!==a||PS(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function AR(e){return Au(e)?e:e.contextElement}function Tg(e){const t=AR(e);if(!Yo(t))return nh(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=NZ(t);let s=(a?PS(n.width):n.width)/r,o=(a?PS(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const FW=nh(0);function EZ(e,t,n){var r,i;if(t===void 0&&(t=!0),!MR())return FW;const a=e?uo(e):window;return!n||t&&n!==a?FW:{x:((r=a.visualViewport)==null?void 0:r.offsetLeft)||0,y:((i=a.visualViewport)==null?void 0:i.offsetTop)||0}}function rh(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=AR(e);let s=nh(1);t&&(r?Au(r)&&(s=Tg(r)):s=Tg(e));const o=EZ(a,n,r);let l=(i.left+o.x)/s.x,u=(i.top+o.y)/s.y,c=i.width/s.x,d=i.height/s.y;if(a){const p=uo(a),h=r&&Au(r)?uo(r):r;let m=p.frameElement;for(;m&&r&&h!==p;){const g=Tg(m),y=m.getBoundingClientRect(),v=getComputedStyle(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=b,u+=_,m=uo(m).frameElement}}return Xg({width:c,height:d,x:l,y:u})}function Uu(e){return((TZ(e)?e.ownerDocument:e.document)||window.document).documentElement}function Q2(e){return Au(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Sxe(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Yo(n),a=Uu(n);if(n===a)return t;let s={scrollLeft:0,scrollTop:0},o=nh(1);const l=nh(0);if((i||!i&&r!=="fixed")&&((ld(n)!=="body"||Q1(a))&&(s=Q2(n)),Yo(n))){const u=rh(n);o=Tg(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:t.width*o.x,height:t.height*o.y,x:t.x*o.x-s.scrollLeft*o.x+l.x,y:t.y*o.y-s.scrollTop*o.y+l.y}}function OZ(e){return rh(Uu(e)).left+Q2(e).scrollLeft}function Cxe(e){const t=Uu(e),n=Q2(e),r=e.ownerDocument.body,i=$g(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=$g(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+OZ(e);const o=-n.scrollTop;return Jo(r).direction==="rtl"&&(s+=$g(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function Jg(e){if(ld(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LW(e)&&e.host||Uu(e);return LW(t)?t.host:t}function PZ(e){const t=Jg(e);return Y2(t)?e.ownerDocument?e.ownerDocument.body:e.body:Yo(t)&&Q1(t)?t:PZ(t)}function Jc(e,t){var n;t===void 0&&(t=[]);const r=PZ(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=uo(r);return i?t.concat(a,a.visualViewport||[],Q1(r)?r:[]):t.concat(r,Jc(r))}function Ixe(e,t){const n=uo(e),r=Uu(e),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const u=MR();(!u||u&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}function $xe(e,t){const n=rh(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Yo(e)?Tg(e):nh(1),s=e.clientWidth*a.x,o=e.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:s,height:o,x:l,y:u}}function zW(e,t,n){let r;if(t==="viewport")r=Ixe(e,n);else if(t==="document")r=Cxe(Uu(e));else if(Au(t))r=$xe(t,n);else{const i=EZ(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Xg(r)}function MZ(e,t){const n=Jg(e);return n===t||!Au(n)||Y2(n)?!1:Jo(n).position==="fixed"||MZ(n,t)}function Txe(e,t){const n=t.get(e);if(n)return n;let r=Jc(e).filter(o=>Au(o)&&ld(o)!=="body"),i=null;const a=Jo(e).position==="fixed";let s=a?Jg(e):e;for(;Au(s)&&!Y2(s);){const o=Jo(s),l=PR(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Q1(s)&&!l&&MZ(e,s))?r=r.filter(c=>c!==s):i=o,s=Jg(s)}return t.set(e,r),r}function Nxe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Txe(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,c)=>{const d=zW(t,c,i);return u.top=$g(d.top,u.top),u.right=bP(d.right,u.right),u.bottom=bP(d.bottom,u.bottom),u.left=$g(d.left,u.left),u},zW(t,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Exe(e){return NZ(e)}function BW(e,t){return!Yo(e)||Jo(e).position==="fixed"?null:t?t(e):e.offsetParent}function Oxe(e){let t=Jg(e);for(;Yo(t)&&!Y2(t);){if(PR(t))return t;t=Jg(t)}return null}function WW(e,t){const n=uo(e);if(!Yo(e))return n;let r=BW(e,t);for(;r&&kxe(r)&&Jo(r).position==="static";)r=BW(r,t);return r&&(ld(r)==="html"||ld(r)==="body"&&Jo(r).position==="static"&&!PR(r))?n:r||Oxe(e)||n}function Pxe(e,t,n){const r=Yo(t),i=Uu(t),a=n==="fixed",s=rh(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=nh(0);if(r||!r&&!a)if((ld(t)!=="body"||Q1(i))&&(o=Q2(t)),Yo(t)){const u=rh(t,!0,a,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=OZ(i));return{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}const Mxe={getClippingRect:Nxe,convertOffsetParentRelativeRectToViewportRelativeRect:Sxe,isElement:Au,getDimensions:Exe,getOffsetParent:WW,getDocumentElement:Uu,getScale:Tg,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||WW,a=this.getDimensions;return{reference:Pxe(t,await i(n),r),floating:{x:0,y:0,...await a(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Jo(e).direction==="rtl"};function Axe(e,t){let n=null,r;const i=Uu(e);function a(){clearTimeout(r),n&&n.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const{left:u,top:c,width:d,height:p}=e.getBoundingClientRect();if(o||t(),!d||!p)return;const h=a_(c),m=a_(i.clientWidth-(u+d)),g=a_(i.clientHeight-(c+p)),y=a_(u),b={rootMargin:-h+"px "+-m+"px "+-g+"px "+-y+"px",threshold:$g(0,bP(1,l))||1};let _=!0;function k(S){const $=S[0].intersectionRatio;if($!==l){if(!_)return s();$?s(!1,$):r=setTimeout(()=>{s(!1,1e-7)},100)}_=!1}try{n=new IntersectionObserver(k,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(e)}return s(!0),a}function Rxe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=AR(e),c=i||a?[...u?Jc(u):[],...Jc(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const d=u&&o?Axe(u,n):null;let p=-1,h=null;s&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{h&&h.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let m,g=l?rh(e):null;l&&y();function y(){const v=rh(e);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{c.forEach(v=>{i&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const Dxe=(e,t,n)=>{const r=new Map,i={platform:Mxe,...n},a={...i.platform,_c:r};return dxe(e,t,{...i,platform:a})},AZ=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?DW({element:t.current,padding:n}).fn(i):{}:t?DW({element:t,padding:n}).fn(i):{}}}};var dk=typeof document<"u"?I.exports.useLayoutEffect:I.exports.useEffect;function MS(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!MS(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!MS(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function VW(e){const t=I.exports.useRef(e);return dk(()=>{t.current=e}),t}function Lxe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:a,open:s}=e,[o,l]=I.exports.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,c]=I.exports.useState(r);MS(u,r)||c(r);const d=I.exports.useRef(null),p=I.exports.useRef(null),h=I.exports.useRef(o),m=VW(a),g=VW(i),[y,v]=I.exports.useState(null),[b,_]=I.exports.useState(null),k=I.exports.useCallback(O=>{d.current!==O&&(d.current=O,v(O))},[]),S=I.exports.useCallback(O=>{p.current!==O&&(p.current=O,_(O))},[]),$=I.exports.useCallback(()=>{if(!d.current||!p.current)return;const O={placement:t,strategy:n,middleware:u};g.current&&(O.platform=g.current),Dxe(d.current,p.current,O).then(F=>{const E={...F,isPositioned:!0};N.current&&!MS(h.current,E)&&(h.current=E,Kl.exports.flushSync(()=>{l(E)}))})},[u,t,n,g]);dk(()=>{s===!1&&h.current.isPositioned&&(h.current.isPositioned=!1,l(O=>({...O,isPositioned:!1})))},[s]);const N=I.exports.useRef(!1);dk(()=>(N.current=!0,()=>{N.current=!1}),[]),dk(()=>{if(y&&b){if(m.current)return m.current(y,b,$);$()}},[y,b,$,m]);const P=I.exports.useMemo(()=>({reference:d,floating:p,setReference:k,setFloating:S}),[k,S]),D=I.exports.useMemo(()=>({reference:y,floating:b}),[y,b]);return I.exports.useMemo(()=>({...o,update:$,refs:P,elements:D,reference:k,floating:S}),[o,$,P,D,k,S])}var Yg=typeof document<"u"?I.exports.useLayoutEffect:I.exports.useEffect;let ZN=!1,Fxe=0;const jW=()=>"floating-ui-"+Fxe++;function zxe(){const[e,t]=I.exports.useState(()=>ZN?jW():void 0);return Yg(()=>{e==null&&t(jW())},[]),I.exports.useEffect(()=>{ZN||(ZN=!0)},[]),e}const Bxe=Xp["useId".toString()],HW=Bxe||zxe;function Wxe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const Vxe=I.exports.createContext(null),jxe=I.exports.createContext(null),RZ=()=>{var e;return((e=I.exports.useContext(Vxe))==null?void 0:e.id)||null},RR=()=>I.exports.useContext(jxe);function Ac(e){return(e==null?void 0:e.ownerDocument)||document}function Hxe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Uxe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function DR(e){return Ac(e).defaultView||window}function El(e){return e?e instanceof DR(e).Element:!1}function DZ(e){return e?e instanceof DR(e).HTMLElement:!1}function Gxe(e){if(typeof ShadowRoot>"u")return!1;const t=DR(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function qxe(e){if(e.mozInputSource===0&&e.isTrusted)return!0;const t=/Android/i;return(t.test(Hxe())||t.test(Uxe()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Kxe(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function LZ(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function UW(e){const t=I.exports.useRef(e);return Yg(()=>{t.current=e}),t}const GW="data-floating-ui-safe-polygon";function pk(e,t,n){return n&&!LZ(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}const Zxe=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:a=!1,restMs:s=0,move:o=!0}=t===void 0?{}:t;const{open:l,onOpenChange:u,dataRef:c,events:d,elements:{domReference:p,floating:h},refs:m}=e,g=RR(),y=RZ(),v=UW(i),b=UW(r),_=I.exports.useRef(),k=I.exports.useRef(),S=I.exports.useRef(),$=I.exports.useRef(),N=I.exports.useRef(!0),P=I.exports.useRef(!1),D=I.exports.useRef(()=>{}),O=I.exports.useCallback(()=>{var q;const K=(q=c.current.openEvent)==null?void 0:q.type;return(K==null?void 0:K.includes("mouse"))&&K!=="mousedown"},[c]);I.exports.useEffect(()=>{if(!n)return;function q(){clearTimeout(k.current),clearTimeout($.current),N.current=!0}return d.on("dismiss",q),()=>{d.off("dismiss",q)}},[n,d]),I.exports.useEffect(()=>{if(!n||!v.current||!l)return;function q(){O()&&u(!1)}const K=Ac(h).documentElement;return K.addEventListener("mouseleave",q),()=>{K.removeEventListener("mouseleave",q)}},[h,l,u,n,v,c,O]);const F=I.exports.useCallback(function(q){q===void 0&&(q=!0);const K=pk(b.current,"close",_.current);K&&!S.current?(clearTimeout(k.current),k.current=setTimeout(()=>u(!1),K)):q&&(clearTimeout(k.current),u(!1))},[b,u]),E=I.exports.useCallback(()=>{D.current(),S.current=void 0},[]),z=I.exports.useCallback(()=>{if(P.current){const q=Ac(m.floating.current).body;q.style.pointerEvents="",q.removeAttribute(GW),P.current=!1}},[m]);return I.exports.useEffect(()=>{if(!n)return;function q(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function K(V){if(clearTimeout(k.current),N.current=!1,a&&!LZ(_.current)||s>0&&pk(b.current,"open")===0)return;c.current.openEvent=V;const ee=pk(b.current,"open",_.current);ee?k.current=setTimeout(()=>{u(!0)},ee):u(!0)}function Z(V){if(q())return;D.current();const ee=Ac(h);if(clearTimeout($.current),v.current){l||clearTimeout(k.current),S.current=v.current({...e,tree:g,x:V.clientX,y:V.clientY,onClose(){z(),E(),F()}});const Y=S.current;ee.addEventListener("mousemove",Y),D.current=()=>{ee.removeEventListener("mousemove",Y)};return}F()}function te(V){q()||v.current==null||v.current({...e,tree:g,x:V.clientX,y:V.clientY,onClose(){z(),E(),F()}})(V)}if(El(p)){const V=p;return l&&V.addEventListener("mouseleave",te),h==null||h.addEventListener("mouseleave",te),o&&V.addEventListener("mousemove",K,{once:!0}),V.addEventListener("mouseenter",K),V.addEventListener("mouseleave",Z),()=>{l&&V.removeEventListener("mouseleave",te),h==null||h.removeEventListener("mouseleave",te),o&&V.removeEventListener("mousemove",K),V.removeEventListener("mouseenter",K),V.removeEventListener("mouseleave",Z)}}},[p,h,n,e,a,s,o,F,E,z,u,l,g,b,v,c]),Yg(()=>{var q;if(!!n&&l&&(q=v.current)!=null&&q.__options.blockPointerEvents&&O()){const te=Ac(h).body;if(te.setAttribute(GW,""),te.style.pointerEvents="none",P.current=!0,El(p)&&h){var K,Z;const V=p,ee=g==null||(K=g.nodesRef.current.find(Y=>Y.id===y))==null||(Z=K.context)==null?void 0:Z.elements.floating;return ee&&(ee.style.pointerEvents=""),V.style.pointerEvents="auto",h.style.pointerEvents="auto",()=>{V.style.pointerEvents="",h.style.pointerEvents=""}}}},[n,l,y,h,p,g,v,c,O]),Yg(()=>{l||(_.current=void 0,E(),z())},[l,E,z]),I.exports.useEffect(()=>()=>{E(),clearTimeout(k.current),clearTimeout($.current),z()},[n,E,z]),I.exports.useMemo(()=>{if(!n)return{};function q(K){_.current=K.pointerType}return{reference:{onPointerDown:q,onPointerEnter:q,onMouseMove(){l||s===0||(clearTimeout($.current),$.current=setTimeout(()=>{N.current||u(!0)},s))}},floating:{onMouseEnter(){clearTimeout(k.current)},onMouseLeave(){d.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),F(!1)}}}},[d,n,s,l,u,F])},FZ=I.exports.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),zZ=()=>I.exports.useContext(FZ),Xxe=e=>{let{children:t,delay:n,timeoutMs:r=0}=e;const[i,a]=I.exports.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=I.exports.useRef(null),o=I.exports.useCallback(l=>{a({currentId:l})},[]);return Yg(()=>{i.currentId?s.current===null?s.current=i.currentId:a({isInstantPhase:!0}):(a({isInstantPhase:!1}),s.current=null)},[i.currentId]),x(FZ.Provider,{value:I.exports.useMemo(()=>({...i,setState:a,setCurrentId:o}),[i,a,o]),children:t})},Jxe=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:a,setCurrentId:s,initialDelay:o,setState:l,timeoutMs:u}=zZ();I.exports.useEffect(()=>{a&&(l({delay:{open:1,close:pk(o,"close")}}),a!==i&&r(!1))},[i,r,l,a,o]),I.exports.useEffect(()=>{function c(){r(!1),l({delay:o,currentId:null})}if(!n&&a===i)if(u){const d=window.setTimeout(c,u);return()=>{clearTimeout(d)}}else c()},[n,l,a,i,r,o,u]),I.exports.useEffect(()=>{n&&s(i)},[n,s,i])};function Yxe(e){let t=e.activeElement;for(;((n=t)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;t=t.shadowRoot.activeElement}return t}function qW(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Gxe(n)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}function XN(e,t){let n=e.filter(i=>{var a;return i.parentId===t&&((a=i.context)==null?void 0:a.open)})||[],r=n;for(;r.length;)r=e.filter(i=>{var a;return(a=r)==null?void 0:a.some(s=>{var o;return i.parentId===s.id&&((o=i.context)==null?void 0:o.open)})})||[],n=n.concat(r);return n}function Qxe(e){return"composedPath"in e?e.composedPath()[0]:e.target}const e_e=Xp["useInsertionEffect".toString()],t_e=e_e||(e=>e());function BZ(e){const t=I.exports.useRef(()=>{});return t_e(()=>{t.current=e}),I.exports.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function hk(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const n_e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},r_e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},i_e=function(e){var t,n;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(n=e.outsidePress)!=null?n:!0}},a_e=function(e,t){let{open:n,onOpenChange:r,events:i,nodeId:a,elements:{reference:s,domReference:o,floating:l},dataRef:u}=e,{enabled:c=!0,escapeKey:d=!0,outsidePress:p=!0,outsidePressEvent:h="pointerdown",referencePress:m=!1,referencePressEvent:g="pointerdown",ancestorScroll:y=!1,bubbles:v=!0}=t===void 0?{}:t;const b=RR(),_=RZ()!=null,k=BZ(typeof p=="function"?p:()=>!1),S=typeof p=="function"?k:p,$=I.exports.useRef(!1),{escapeKeyBubbles:N,outsidePressBubbles:P}=i_e(v);return I.exports.useEffect(()=>{if(!n||!c)return;u.current.__escapeKeyBubbles=N,u.current.__outsidePressBubbles=P;function D(q){if(q.key==="Escape"){const K=b?XN(b.nodesRef.current,a):[];if(K.length>0){let Z=!0;if(K.forEach(te=>{var V;if((V=te.context)!=null&&V.open&&!te.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1)}}function O(q){const K=$.current;if($.current=!1,K||typeof S=="function"&&!S(q))return;const Z=Qxe(q);if(DZ(Z)&&l){const ee=l.ownerDocument.defaultView||window,Y=Z.scrollWidth>Z.clientWidth,Q=Z.scrollHeight>Z.clientHeight;let oe=Q&&q.offsetX>Z.clientWidth;if(Q&&ee.getComputedStyle(Z).direction==="rtl"&&(oe=q.offsetX<=Z.offsetWidth-Z.clientWidth),oe||Y&&q.offsetY>Z.clientHeight)return}const te=b&&XN(b.nodesRef.current,a).some(ee=>{var Y;return hk(q,(Y=ee.context)==null?void 0:Y.elements.floating)});if(hk(q,l)||hk(q,o)||te)return;const V=b?XN(b.nodesRef.current,a):[];if(V.length>0){let ee=!0;if(V.forEach(Y=>{var Q;if((Q=Y.context)!=null&&Q.open&&!Y.context.dataRef.current.__outsidePressBubbles){ee=!1;return}}),!ee)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:qxe(q)||Kxe(q)}}),r(!1)}function F(){r(!1)}const E=Ac(l);d&&E.addEventListener("keydown",D),S&&E.addEventListener(h,O);let z=[];return y&&(El(o)&&(z=Jc(o)),El(l)&&(z=z.concat(Jc(l))),!El(s)&&s&&s.contextElement&&(z=z.concat(Jc(s.contextElement)))),z=z.filter(q=>{var K;return q!==((K=E.defaultView)==null?void 0:K.visualViewport)}),z.forEach(q=>{q.addEventListener("scroll",F,{passive:!0})}),()=>{d&&E.removeEventListener("keydown",D),S&&E.removeEventListener(h,O),z.forEach(q=>{q.removeEventListener("scroll",F)})}},[u,l,o,s,d,S,h,i,b,a,n,r,y,c,N,P,_]),I.exports.useEffect(()=>{$.current=!1},[S,h]),I.exports.useMemo(()=>c?{reference:{[n_e[g]]:()=>{m&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1))}},floating:{[r_e[h]]:()=>{$.current=!0}}}:{},[c,i,m,h,g,r])},s_e=function(e,t){let{open:n,onOpenChange:r,dataRef:i,events:a,refs:s,elements:{floating:o,domReference:l}}=e,{enabled:u=!0,keyboardOnly:c=!0}=t===void 0?{}:t;const d=I.exports.useRef(""),p=I.exports.useRef(!1),h=I.exports.useRef();return I.exports.useEffect(()=>{if(!u)return;const g=Ac(o).defaultView||window;function y(){!n&&DZ(l)&&l===Yxe(Ac(l))&&(p.current=!0)}return g.addEventListener("blur",y),()=>{g.removeEventListener("blur",y)}},[o,l,n,u]),I.exports.useEffect(()=>{if(!u)return;function m(g){(g.type==="referencePress"||g.type==="escapeKey")&&(p.current=!0)}return a.on("dismiss",m),()=>{a.off("dismiss",m)}},[a,u]),I.exports.useEffect(()=>()=>{clearTimeout(h.current)},[]),I.exports.useMemo(()=>u?{reference:{onPointerDown(m){let{pointerType:g}=m;d.current=g,p.current=!!(g&&c)},onMouseLeave(){p.current=!1},onFocus(m){var g;p.current||m.type==="focus"&&((g=i.current.openEvent)==null?void 0:g.type)==="mousedown"&&i.current.openEvent&&hk(i.current.openEvent,l)||(i.current.openEvent=m.nativeEvent,r(!0))},onBlur(m){p.current=!1;const g=m.relatedTarget,y=El(g)&&g.hasAttribute("data-floating-ui-focus-guard")&&g.getAttribute("data-type")==="outside";h.current=setTimeout(()=>{qW(s.floating.current,g)||qW(l,g)||y||r(!1)})}}}:{},[u,c,l,s,i,r])},o_e=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const a=HW(),s=HW();return I.exports.useMemo(()=>{const o={id:a,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?a:void 0},floating:o}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?a:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:s}},floating:{...o,...i==="menu"&&{"aria-labelledby":s}}}:{}},[r,i,n,a,s])};function LR(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,i=Lxe(e),a=RR(),s=I.exports.useRef(null),o=I.exports.useRef({}),l=I.exports.useState(()=>Wxe())[0],[u,c]=I.exports.useState(null),d=I.exports.useCallback(v=>{const b=El(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),contextElement:v}:v;i.refs.setReference(b)},[i.refs]),p=I.exports.useCallback(v=>{(El(v)||v===null)&&(s.current=v,c(v)),(El(i.refs.reference.current)||i.refs.reference.current===null||v!==null&&!El(v))&&i.refs.setReference(v)},[i.refs]),h=I.exports.useMemo(()=>({...i.refs,setReference:p,setPositionReference:d,domReference:s}),[i.refs,p,d]),m=I.exports.useMemo(()=>({...i.elements,domReference:u}),[i.elements,u]),g=BZ(n),y=I.exports.useMemo(()=>({...i,refs:h,elements:m,dataRef:o,nodeId:r,events:l,open:t,onOpenChange:g}),[i,r,l,t,g,h,m]);return Yg(()=>{const v=a==null?void 0:a.nodesRef.current.find(b=>b.id===r);v&&(v.context=y)}),I.exports.useMemo(()=>({...i,context:y,refs:h,reference:p,positionReference:d}),[i,h,y,p,d])}function JN(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,a)=>(a&&Object.entries(a).forEach(s=>{let[o,l]=s;if(o.indexOf("on")===0){if(r.has(o)||r.set(o,[]),typeof l=="function"){var u;(u=r.get(o))==null||u.push(l),i[o]=function(){for(var c,d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];(c=r.get(o))==null||c.forEach(m=>m(...p))}}}else i[o]=l}),i),{})}}const l_e=function(e){e===void 0&&(e=[]);const t=e,n=I.exports.useCallback(a=>JN(a,e,"reference"),t),r=I.exports.useCallback(a=>JN(a,e,"floating"),t),i=I.exports.useCallback(a=>JN(a,e,"item"),e.map(a=>a==null?void 0:a.item));return I.exports.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function WZ({opened:e,floating:t,position:n,positionDependencies:r}){const[i,a]=I.exports.useState(0);I.exports.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Rxe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Mi(()=>{t.update()},r),Mi(()=>{a(s=>s+1)},[e])}function u_e(e){const t=[IZ(e.offset)];return e.middlewares.shift&&t.push(OR({limiter:xxe()})),e.middlewares.flip&&t.push(kZ()),e.middlewares.inline&&t.push(CZ()),t.push(AZ({element:e.arrowRef,padding:e.arrowOffset})),t}function c_e(e){const[t,n]=Zo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var s;(s=e.onClose)==null||s.call(e),n(!1)},i=()=>{var s,o;t?((s=e.onClose)==null||s.call(e),n(!1)):((o=e.onOpen)==null||o.call(e),n(!0))},a=LR({placement:e.position,middleware:[...u_e(e),...e.width==="target"?[_xe({apply({rects:s}){var o,l;Object.assign((l=(o=a.refs.floating.current)==null?void 0:o.style)!=null?l:{},{width:`${s.reference.width}px`})}})]:[]]});return WZ({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies,floating:a}),Mi(()=>{var s;(s=e.onPositionChange)==null||s.call(e,a.placement)},[a.placement]),Mi(()=>{var s,o;e.opened?(o=e.onOpen)==null||o.call(e):(s=e.onClose)==null||s.call(e)},[e.opened]),{floating:a,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const VZ={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported"},[d_e,jZ]=Ay(VZ.context);var p_e=Object.defineProperty,h_e=Object.defineProperties,f_e=Object.getOwnPropertyDescriptors,AS=Object.getOwnPropertySymbols,HZ=Object.prototype.hasOwnProperty,UZ=Object.prototype.propertyIsEnumerable,KW=(e,t,n)=>t in e?p_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s_=(e,t)=>{for(var n in t||(t={}))HZ.call(t,n)&&KW(e,n,t[n]);if(AS)for(var n of AS(t))UZ.call(t,n)&&KW(e,n,t[n]);return e},m_e=(e,t)=>h_e(e,f_e(t)),g_e=(e,t)=>{var n={};for(var r in e)HZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AS)for(var r of AS(e))t.indexOf(r)<0&&UZ.call(e,r)&&(n[r]=e[r]);return n};const y_e={refProp:"ref",popupType:"dialog",shouldOverrideDefaultTargetId:!0},GZ=I.exports.forwardRef((e,t)=>{const n=Ue("PopoverTarget",y_e,e),{children:r,refProp:i,popupType:a,shouldOverrideDefaultTargetId:s}=n,o=g_e(n,["children","refProp","popupType","shouldOverrideDefaultTargetId"]);if(!U1(r))throw new Error(VZ.children);const l=o,u=jZ(),c=ju(u.reference,r.ref,t),d=u.withRoles?{"aria-haspopup":a,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:s?u.getTargetId():r.props.id}:{};return I.exports.cloneElement(r,s_(m_e(s_(s_(s_({},l),d),u.targetProps),{className:Dq(u.targetProps.className,l.className,r.props.className),[i]:c}),u.controlled?null:{onClick:u.onToggle}))});GZ.displayName="@mantine/core/PopoverTarget";var v_e=tt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm} ${e.spacing.md}`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const b_e=v_e;var w_e=Object.defineProperty,ZW=Object.getOwnPropertySymbols,x_e=Object.prototype.hasOwnProperty,__e=Object.prototype.propertyIsEnumerable,XW=(e,t,n)=>t in e?w_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lm=(e,t)=>{for(var n in t||(t={}))x_e.call(t,n)&&XW(e,n,t[n]);if(ZW)for(var n of ZW(t))__e.call(t,n)&&XW(e,n,t[n]);return e};const JW={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function k_e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Jx?Lm(Lm(Lm({transitionProperty:Jx[e].transitionProperty},i),Jx[e].common),Jx[e][JW[t]]):null:Lm(Lm(Lm({transitionProperty:e.transitionProperty},i),e.common),e[JW[t]])}function S_e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:a,onEntered:s,onExited:o}){const l=Za(),u=K1(),c=l.respectReducedMotion?u:!1,[d,p]=I.exports.useState(c?0:e),[h,m]=I.exports.useState(r?"entered":"exited"),g=I.exports.useRef(-1),y=v=>{const b=v?i:a,_=v?s:o;m(v?"pre-entering":"pre-exiting"),window.clearTimeout(g.current);const k=c?0:v?e:t;if(p(k),k===0)typeof b=="function"&&b(),typeof _=="function"&&_(),m(v?"entered":"exited");else{const S=window.setTimeout(()=>{typeof b=="function"&&b(),m(v?"entering":"exiting")},10);g.current=window.setTimeout(()=>{window.clearTimeout(S),typeof _=="function"&&_(),m(v?"entered":"exited")},k)}};return Mi(()=>{y(r)},[r]),I.exports.useEffect(()=>()=>window.clearTimeout(g.current),[]),{transitionDuration:d,transitionStatus:h,transitionTimingFunction:n||l.transitionTimingFunction}}function ku({keepMounted:e,transition:t,duration:n=250,exitDuration:r=n,mounted:i,children:a,timingFunction:s,onExit:o,onEntered:l,onEnter:u,onExited:c}){const{transitionDuration:d,transitionStatus:p,transitionTimingFunction:h}=S_e({mounted:i,exitDuration:r,duration:n,timingFunction:s,onExit:o,onEntered:l,onEnter:u,onExited:c});return d===0?i?x(Fe,{children:a({})}):e?a({display:"none"}):null:p==="exited"?e?a({display:"none"}):null:x(Fe,{children:a(k_e({transition:t,duration:d,state:p,timingFunction:h}))})}ku.displayName="@mantine/core/Transition";function FR({children:e,active:t=!0,refProp:n="ref"}){const r=B0e(t),i=ju(r,e==null?void 0:e.ref);return U1(e)?I.exports.cloneElement(e,{[n]:i}):e}FR.displayName="@mantine/core/FocusTrap";var C_e=Object.defineProperty,I_e=Object.defineProperties,$_e=Object.getOwnPropertyDescriptors,YW=Object.getOwnPropertySymbols,T_e=Object.prototype.hasOwnProperty,N_e=Object.prototype.propertyIsEnumerable,QW=(e,t,n)=>t in e?C_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dc=(e,t)=>{for(var n in t||(t={}))T_e.call(t,n)&&QW(e,n,t[n]);if(YW)for(var n of YW(t))N_e.call(t,n)&&QW(e,n,t[n]);return e},o_=(e,t)=>I_e(e,$_e(t));function eV(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function tV(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const E_e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function O_e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:a,arrowY:s,dir:o}){const[l,u="center"]=e.split("-"),c={width:G(t),height:G(t),transform:"rotate(45deg)",position:"absolute",[E_e[l]]:G(r)},d=G(-t/2);return l==="left"?o_(dc(dc({},c),eV(u,s,n,i)),{right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}):l==="right"?o_(dc(dc({},c),eV(u,s,n,i)),{left:d,borderRightColor:"transparent",borderTopColor:"transparent"}):l==="top"?o_(dc(dc({},c),tV(u,a,n,i,o)),{bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}):l==="bottom"?o_(dc(dc({},c),tV(u,a,n,i,o)),{top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}):{}}var P_e=Object.defineProperty,M_e=Object.defineProperties,A_e=Object.getOwnPropertyDescriptors,RS=Object.getOwnPropertySymbols,qZ=Object.prototype.hasOwnProperty,KZ=Object.prototype.propertyIsEnumerable,nV=(e,t,n)=>t in e?P_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R_e=(e,t)=>{for(var n in t||(t={}))qZ.call(t,n)&&nV(e,n,t[n]);if(RS)for(var n of RS(t))KZ.call(t,n)&&nV(e,n,t[n]);return e},D_e=(e,t)=>M_e(e,A_e(t)),L_e=(e,t)=>{var n={};for(var r in e)qZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RS)for(var r of RS(e))t.indexOf(r)<0&&KZ.call(e,r)&&(n[r]=e[r]);return n};const zR=I.exports.forwardRef((e,t)=>{var n=e,{position:r,arrowSize:i,arrowOffset:a,arrowRadius:s,arrowPosition:o,visible:l,arrowX:u,arrowY:c}=n,d=L_e(n,["position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY"]);const p=Za();return l?x("div",{...D_e(R_e({},d),{ref:t,style:O_e({position:r,arrowSize:i,arrowOffset:a,arrowRadius:s,arrowPosition:o,dir:p.dir,arrowX:u,arrowY:c})})}):null});zR.displayName="@mantine/core/FloatingArrow";var F_e=Object.defineProperty,z_e=Object.defineProperties,B_e=Object.getOwnPropertyDescriptors,DS=Object.getOwnPropertySymbols,ZZ=Object.prototype.hasOwnProperty,XZ=Object.prototype.propertyIsEnumerable,rV=(e,t,n)=>t in e?F_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fm=(e,t)=>{for(var n in t||(t={}))ZZ.call(t,n)&&rV(e,n,t[n]);if(DS)for(var n of DS(t))XZ.call(t,n)&&rV(e,n,t[n]);return e},l_=(e,t)=>z_e(e,B_e(t)),W_e=(e,t)=>{var n={};for(var r in e)ZZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DS)for(var r of DS(e))t.indexOf(r)<0&&XZ.call(e,r)&&(n[r]=e[r]);return n};const V_e={};function JZ(e){var t;const n=Ue("PopoverDropdown",V_e,e),{style:r,className:i,children:a,onKeyDownCapture:s}=n,o=W_e(n,["style","className","children","onKeyDownCapture"]),l=jZ(),{classes:u,cx:c}=b_e({radius:l.radius,shadow:l.shadow},{name:l.__staticSelector,classNames:l.classNames,styles:l.styles,unstyled:l.unstyled,variant:l.variant}),d=uK({opened:l.opened,shouldReturnFocus:l.returnFocus}),p=l.withRoles?{"aria-labelledby":l.getTargetId(),id:l.getDropdownId(),role:"dialog"}:{};return l.disabled?null:x(X1,{...l_(Fm({},l.portalProps),{withinPortal:l.withinPortal}),children:x(ku,{...l_(Fm({mounted:l.opened},l.transitionProps),{transition:l.transitionProps.transition||"fade",duration:(t=l.transitionProps.duration)!=null?t:150,keepMounted:l.keepMounted,exitDuration:typeof l.transitionProps.exitDuration=="number"?l.transitionProps.exitDuration:l.transitionProps.duration}),children:h=>{var m,g;return x(FR,{active:l.trapFocus,children:B(vt,{...Fm(l_(Fm({},p),{tabIndex:-1,ref:l.floating,style:l_(Fm(Fm({},r),h),{zIndex:l.zIndex,top:(m=l.y)!=null?m:0,left:(g=l.x)!=null?g:0,width:l.width==="target"?void 0:G(l.width)}),className:c(u.dropdown,i),onKeyDownCapture:fye(l.onClose,{active:l.closeOnEscape,onTrigger:d,onKeyDown:s}),"data-position":l.placement}),o),children:[a,x(zR,{ref:l.arrowRef,arrowX:l.arrowX,arrowY:l.arrowY,visible:l.withArrow,position:l.placement,arrowSize:l.arrowSize,arrowRadius:l.arrowRadius,arrowOffset:l.arrowOffset,arrowPosition:l.arrowPosition,className:u.arrow})]})})}})})}JZ.displayName="@mantine/core/PopoverDropdown";function YZ(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var iV=Object.getOwnPropertySymbols,j_e=Object.prototype.hasOwnProperty,H_e=Object.prototype.propertyIsEnumerable,U_e=(e,t)=>{var n={};for(var r in e)j_e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iV)for(var r of iV(e))t.indexOf(r)<0&&H_e.call(e,r)&&(n[r]=e[r]);return n};const G_e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Wu("popover"),__staticSelector:"Popover",width:"max-content"};function La(e){var t,n,r,i,a,s;const o=I.exports.useRef(null),l=Ue("Popover",G_e,e),{children:u,position:c,offset:d,onPositionChange:p,positionDependencies:h,opened:m,transitionProps:g,width:y,middlewares:v,withArrow:b,arrowSize:_,arrowOffset:k,arrowRadius:S,arrowPosition:$,unstyled:N,classNames:P,styles:D,closeOnClickOutside:O,withinPortal:F,portalProps:E,closeOnEscape:z,clickOutsideEvents:q,trapFocus:K,onClose:Z,onOpen:te,onChange:V,zIndex:ee,radius:Y,shadow:Q,id:oe,defaultOpened:pe,__staticSelector:he,withRoles:ge,disabled:_e,returnFocus:Ne,variant:Se,keepMounted:Re}=l,Ke=U_e(l,["children","position","offset","onPositionChange","positionDependencies","opened","transitionProps","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","portalProps","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","__staticSelector","withRoles","disabled","returnFocus","variant","keepMounted"]),[it,Xe]=I.exports.useState(null),[at,He]=I.exports.useState(null),_t=Vu(oe),mt=Za(),ht=c_e({middlewares:v,width:y,position:YZ(mt.dir,c),offset:typeof d=="number"?d+(b?_/2:0):d,arrowRef:o,arrowOffset:k,onPositionChange:p,positionDependencies:h,opened:m,defaultOpened:pe,onChange:V,onOpen:te,onClose:Z});E0e(()=>ht.opened&&O&&ht.onClose(),q,[it,at]);const Lt=I.exports.useCallback(kt=>{Xe(kt),ht.floating.reference(kt)},[ht.floating.reference]),Un=I.exports.useCallback(kt=>{He(kt),ht.floating.floating(kt)},[ht.floating.floating]);return x(d_e,{value:{returnFocus:Ne,disabled:_e,controlled:ht.controlled,reference:Lt,floating:Un,x:ht.floating.x,y:ht.floating.y,arrowX:(r=(n=(t=ht.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(s=(a=(i=ht.floating)==null?void 0:i.middlewareData)==null?void 0:a.arrow)==null?void 0:s.y,opened:ht.opened,arrowRef:o,transitionProps:g,width:y,withArrow:b,arrowSize:_,arrowOffset:k,arrowRadius:S,arrowPosition:$,placement:ht.floating.placement,trapFocus:K,withinPortal:F,portalProps:E,zIndex:ee,radius:Y,shadow:Q,closeOnEscape:z,onClose:ht.onClose,onToggle:ht.onToggle,getTargetId:()=>`${_t}-target`,getDropdownId:()=>`${_t}-dropdown`,withRoles:ge,targetProps:Ke,__staticSelector:he,classNames:P,styles:D,unstyled:N,variant:Se,keepMounted:Re},children:u})}La.Target=GZ;La.Dropdown=JZ;La.displayName="@mantine/core/Popover";var q_e=Object.defineProperty,LS=Object.getOwnPropertySymbols,QZ=Object.prototype.hasOwnProperty,eX=Object.prototype.propertyIsEnumerable,aV=(e,t,n)=>t in e?q_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K_e=(e,t)=>{for(var n in t||(t={}))QZ.call(t,n)&&aV(e,n,t[n]);if(LS)for(var n of LS(t))eX.call(t,n)&&aV(e,n,t[n]);return e},Z_e=(e,t)=>{var n={};for(var r in e)QZ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LS)for(var r of LS(e))t.indexOf(r)<0&&eX.call(e,r)&&(n[r]=e[r]);return n};function X_e(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:a="column",id:s,innerRef:o,__staticSelector:l,styles:u,classNames:c,unstyled:d}=t,p=Z_e(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=cxe(null,{name:l,styles:u,classNames:c,unstyled:d});return x(La.Dropdown,{...K_e({p:0,onMouseDown:m=>m.preventDefault()},p),children:x("div",{style:{maxHeight:G(i),display:"flex"},children:x(vt,{component:r||"div",id:`${s}-items`,"aria-labelledby":`${s}-label`,role:"listbox",onMouseDown:m=>m.preventDefault(),style:{flex:1,overflowY:r!==J2?"auto":void 0},"data-combobox-popover":!0,tabIndex:-1,ref:o,children:x("div",{className:h.itemsWrapper,style:{flexDirection:a},children:n})})})})}function Yc({opened:e,transitionProps:t={transition:"fade",duration:0},shadow:n,withinPortal:r,portalProps:i,children:a,__staticSelector:s,onDirectionChange:o,switchDirectionOnFlip:l,zIndex:u,dropdownPosition:c,positionDependencies:d=[],classNames:p,styles:h,unstyled:m,readOnly:g,variant:y}){return x(La,{unstyled:m,classNames:p,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:d,zIndex:u,__staticSelector:s,withinPortal:r,portalProps:i,transitionProps:t,shadow:n,disabled:g,onPositionChange:v=>l&&(o==null?void 0:o(v==="top"?"column-reverse":"column")),variant:y,children:a})}Yc.Target=La.Target;Yc.Dropdown=X_e;var J_e=Object.defineProperty,Y_e=Object.defineProperties,Q_e=Object.getOwnPropertyDescriptors,FS=Object.getOwnPropertySymbols,tX=Object.prototype.hasOwnProperty,nX=Object.prototype.propertyIsEnumerable,sV=(e,t,n)=>t in e?J_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u_=(e,t)=>{for(var n in t||(t={}))tX.call(t,n)&&sV(e,n,t[n]);if(FS)for(var n of FS(t))nX.call(t,n)&&sV(e,n,t[n]);return e},eke=(e,t)=>Y_e(e,Q_e(t)),tke=(e,t)=>{var n={};for(var r in e)tX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FS)for(var r of FS(e))t.indexOf(r)<0&&nX.call(e,r)&&(n[r]=e[r]);return n};function rX(e,t,n){const r=Ue(e,t,n),{label:i,description:a,error:s,required:o,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:p,sx:h,errorProps:m,labelProps:g,descriptionProps:y,wrapperProps:v,id:b,size:_,style:k,inputContainer:S,inputWrapperOrder:$,withAsterisk:N,variant:P}=r,D=tke(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk","variant"]),O=Vu(b),{systemStyles:F,rest:E}=Td(D),z=u_({label:i,description:a,error:s,required:o,classNames:l,className:c,__staticSelector:p,sx:h,errorProps:m,labelProps:g,descriptionProps:y,unstyled:d,styles:u,id:O,size:_,style:k,inputContainer:S,inputWrapperOrder:$,withAsterisk:N,variant:P},v);return eke(u_({},E),{classNames:l,styles:u,unstyled:d,wrapperProps:u_(u_({},z),F),inputProps:{required:o,classNames:l,styles:u,unstyled:d,id:O,size:_,__staticSelector:p,error:s,variant:P}})}var nke=tt((e,t,{size:n})=>({label:{display:"inline-block",fontSize:ke({size:n,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const rke=nke;var ike=Object.defineProperty,zS=Object.getOwnPropertySymbols,iX=Object.prototype.hasOwnProperty,aX=Object.prototype.propertyIsEnumerable,oV=(e,t,n)=>t in e?ike(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ake=(e,t)=>{for(var n in t||(t={}))iX.call(t,n)&&oV(e,n,t[n]);if(zS)for(var n of zS(t))aX.call(t,n)&&oV(e,n,t[n]);return e},ske=(e,t)=>{var n={};for(var r in e)iX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zS)for(var r of zS(e))t.indexOf(r)<0&&aX.call(e,r)&&(n[r]=e[r]);return n};const oke={labelElement:"label",size:"sm"},BR=I.exports.forwardRef((e,t)=>{const n=Ue("InputLabel",oke,e),{labelElement:r,children:i,required:a,size:s,classNames:o,styles:l,unstyled:u,className:c,htmlFor:d,__staticSelector:p,variant:h,onMouseDown:m}=n,g=ske(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector","variant","onMouseDown"]),{classes:y,cx:v}=rke(null,{name:["InputWrapper",p],classNames:o,styles:l,unstyled:u,variant:h,size:s});return B(vt,{...ake({component:r,ref:t,className:v(y.label,c),htmlFor:r==="label"?d:void 0,onMouseDown:b=>{m==null||m(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault()}},g),children:[i,a&&x("span",{className:y.required,"aria-hidden":!0,children:" *"})]})});BR.displayName="@mantine/core/InputLabel";var lke=tt((e,t,{size:n})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:`calc(${ke({size:n,sizes:e.fontSizes})} - ${G(2)})`,lineHeight:1.2,display:"block"}}));const uke=lke;var cke=Object.defineProperty,BS=Object.getOwnPropertySymbols,sX=Object.prototype.hasOwnProperty,oX=Object.prototype.propertyIsEnumerable,lV=(e,t,n)=>t in e?cke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dke=(e,t)=>{for(var n in t||(t={}))sX.call(t,n)&&lV(e,n,t[n]);if(BS)for(var n of BS(t))oX.call(t,n)&&lV(e,n,t[n]);return e},pke=(e,t)=>{var n={};for(var r in e)sX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BS)for(var r of BS(e))t.indexOf(r)<0&&oX.call(e,r)&&(n[r]=e[r]);return n};const hke={size:"sm"},WR=I.exports.forwardRef((e,t)=>{const n=Ue("InputError",hke,e),{children:r,className:i,classNames:a,styles:s,unstyled:o,size:l,__staticSelector:u,variant:c}=n,d=pke(n,["children","className","classNames","styles","unstyled","size","__staticSelector","variant"]),{classes:p,cx:h}=uke(null,{name:["InputWrapper",u],classNames:a,styles:s,unstyled:o,variant:c,size:l});return x(Te,{...dke({className:h(p.error,i),ref:t},d),children:r})});WR.displayName="@mantine/core/InputError";var fke=tt((e,t,{size:n})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:`calc(${ke({size:n,sizes:e.fontSizes})} - ${G(2)})`,lineHeight:1.2,display:"block"}}));const mke=fke;var gke=Object.defineProperty,WS=Object.getOwnPropertySymbols,lX=Object.prototype.hasOwnProperty,uX=Object.prototype.propertyIsEnumerable,uV=(e,t,n)=>t in e?gke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yke=(e,t)=>{for(var n in t||(t={}))lX.call(t,n)&&uV(e,n,t[n]);if(WS)for(var n of WS(t))uX.call(t,n)&&uV(e,n,t[n]);return e},vke=(e,t)=>{var n={};for(var r in e)lX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WS)for(var r of WS(e))t.indexOf(r)<0&&uX.call(e,r)&&(n[r]=e[r]);return n};const bke={size:"sm"},VR=I.exports.forwardRef((e,t)=>{const n=Ue("InputDescription",bke,e),{children:r,className:i,classNames:a,styles:s,unstyled:o,size:l,__staticSelector:u,variant:c}=n,d=vke(n,["children","className","classNames","styles","unstyled","size","__staticSelector","variant"]),{classes:p,cx:h}=mke(null,{name:["InputWrapper",u],classNames:a,styles:s,unstyled:o,variant:c,size:l});return x(Te,{...yke({color:"dimmed",className:h(p.description,i),ref:t,unstyled:o},d),children:r})});VR.displayName="@mantine/core/InputDescription";const cX=I.exports.createContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0}),wke=cX.Provider,xke=()=>I.exports.useContext(cX);function _ke(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e[r-1],a=e[r+1];return{offsetBottom:t&&a==="description"||n&&a==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var kke=Object.defineProperty,Ske=Object.defineProperties,Cke=Object.getOwnPropertyDescriptors,cV=Object.getOwnPropertySymbols,Ike=Object.prototype.hasOwnProperty,$ke=Object.prototype.propertyIsEnumerable,dV=(e,t,n)=>t in e?kke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tke=(e,t)=>{for(var n in t||(t={}))Ike.call(t,n)&&dV(e,n,t[n]);if(cV)for(var n of cV(t))$ke.call(t,n)&&dV(e,n,t[n]);return e},Nke=(e,t)=>Ske(e,Cke(t)),Eke=tt(e=>({root:Nke(Tke({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const Oke=Eke;var Pke=Object.defineProperty,Mke=Object.defineProperties,Ake=Object.getOwnPropertyDescriptors,VS=Object.getOwnPropertySymbols,dX=Object.prototype.hasOwnProperty,pX=Object.prototype.propertyIsEnumerable,pV=(e,t,n)=>t in e?Pke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pc=(e,t)=>{for(var n in t||(t={}))dX.call(t,n)&&pV(e,n,t[n]);if(VS)for(var n of VS(t))pX.call(t,n)&&pV(e,n,t[n]);return e},hV=(e,t)=>Mke(e,Ake(t)),Rke=(e,t)=>{var n={};for(var r in e)dX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VS)for(var r of VS(e))t.indexOf(r)<0&&pX.call(e,r)&&(n[r]=e[r]);return n};const Dke={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},hX=I.exports.forwardRef((e,t)=>{const n=Ue("InputWrapper",Dke,e),{className:r,label:i,children:a,required:s,id:o,error:l,description:u,labelElement:c,labelProps:d,descriptionProps:p,errorProps:h,classNames:m,styles:g,size:y,inputContainer:v,__staticSelector:b,unstyled:_,inputWrapperOrder:k,withAsterisk:S,variant:$}=n,N=Rke(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk","variant"]),{classes:P,cx:D}=Oke(null,{classNames:m,styles:g,name:["InputWrapper",b],unstyled:_,variant:$,size:y}),O={classNames:m,styles:g,unstyled:_,size:y,variant:$,__staticSelector:b},F=typeof S=="boolean"?S:s,E=o?`${o}-error`:h==null?void 0:h.id,z=o?`${o}-description`:p==null?void 0:p.id,K=`${!!l&&typeof l!="boolean"?E:""} ${u?z:""}`,Z=K.trim().length>0?K.trim():void 0,te=i&&x(BR,{...pc(pc({key:"label",labelElement:c,id:o?`${o}-label`:void 0,htmlFor:o,required:F},O),d),children:i}),V=u&&x(VR,{...hV(pc(pc({key:"description"},p),O),{size:(p==null?void 0:p.size)||O.size,id:(p==null?void 0:p.id)||z}),children:u}),ee=x(I.exports.Fragment,{children:v(a)},"input"),Y=typeof l!="boolean"&&l&&x(WR,{...hV(pc(pc({},h),O),{size:(h==null?void 0:h.size)||O.size,key:"error",id:(h==null?void 0:h.id)||E}),children:l}),Q=k.map(oe=>{switch(oe){case"label":return te;case"input":return ee;case"description":return V;case"error":return Y;default:return null}});return x(wke,{value:pc({describedBy:Z},_ke(k,{hasDescription:!!V,hasError:!!Y})),children:x(vt,{...pc({className:D(P.root,r),ref:t},N),children:Q})})});hX.displayName="@mantine/core/InputWrapper";var Lke=Object.defineProperty,jS=Object.getOwnPropertySymbols,fX=Object.prototype.hasOwnProperty,mX=Object.prototype.propertyIsEnumerable,fV=(e,t,n)=>t in e?Lke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fke=(e,t)=>{for(var n in t||(t={}))fX.call(t,n)&&fV(e,n,t[n]);if(jS)for(var n of jS(t))mX.call(t,n)&&fV(e,n,t[n]);return e},zke=(e,t)=>{var n={};for(var r in e)fX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jS)for(var r of jS(e))t.indexOf(r)<0&&mX.call(e,r)&&(n[r]=e[r]);return n};const Bke={},gX=I.exports.forwardRef((e,t)=>{const n=Ue("InputPlaceholder",Bke,e),{sx:r}=n,i=zke(n,["sx"]);return x(vt,{...Fke({component:"span",sx:[a=>a.fn.placeholderStyles(),...pR(r)],ref:t},i)})});gX.displayName="@mantine/core/InputPlaceholder";var Wke=Object.defineProperty,Vke=Object.defineProperties,jke=Object.getOwnPropertyDescriptors,mV=Object.getOwnPropertySymbols,Hke=Object.prototype.hasOwnProperty,Uke=Object.prototype.propertyIsEnumerable,gV=(e,t,n)=>t in e?Wke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c_=(e,t)=>{for(var n in t||(t={}))Hke.call(t,n)&&gV(e,n,t[n]);if(mV)for(var n of mV(t))Uke.call(t,n)&&gV(e,n,t[n]);return e},YN=(e,t)=>Vke(e,jke(t));const Gi={xs:G(30),sm:G(36),md:G(42),lg:G(50),xl:G(60)},Gke=["default","filled","unstyled"];function qke({theme:e,variant:t}){return Gke.includes(t)?t==="default"?{border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:`${G(1)} solid transparent`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:G(28),outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}:null}var Kke=tt((e,{multiline:t,radius:n,invalid:r,rightSectionWidth:i,withRightSection:a,iconWidth:s,offsetBottom:o,offsetTop:l,pointer:u},{variant:c,size:d})=>{const p=e.fn.variant({variant:"filled",color:"red"}).background,h=c==="default"||c==="filled"?{minHeight:ke({size:d,sizes:Gi}),paddingLeft:`calc(${ke({size:d,sizes:Gi})}  / 3)`,paddingRight:a?i||ke({size:d,sizes:Gi}):`calc(${ke({size:d,sizes:Gi})}  / 3)`,borderRadius:e.fn.radius(n)}:c==="unstyled"&&a?{paddingRight:i||ke({size:d,sizes:Gi})}:null;return{wrapper:{position:"relative",marginTop:l?`calc(${e.spacing.xs} / 2)`:void 0,marginBottom:o?`calc(${e.spacing.xs} / 2)`:void 0,"&:has(input:disabled)":{"& .mantine-Input-rightSection":{display:"none"}}},input:YN(c_(c_(YN(c_({},e.fn.fontStyles()),{height:t?c==="unstyled"?void 0:"auto":ke({size:d,sizes:Gi}),WebkitTapHighlightColor:"transparent",lineHeight:t?e.lineHeight:`calc(${ke({size:d,sizes:Gi})} - ${G(2)})`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:ke({size:d,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:u?"pointer":void 0}),qke({theme:e,variant:c})),h),{"&:disabled, &[data-disabled]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed",pointerEvents:"none","&::placeholder":{color:e.colors.dark[2]}},"&[data-invalid]":{color:p,borderColor:p,"&::placeholder":{opacity:1,color:p}},"&[data-with-icon]":{paddingLeft:typeof s=="number"?G(s):ke({size:d,sizes:Gi})},"&::placeholder":YN(c_({},e.fn.placeholderStyles()),{opacity:1}),"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:s?G(s):ke({size:d,sizes:Gi}),color:r?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:i||ke({size:d,sizes:Gi})}}});const Zke=Kke;var Xke=Object.defineProperty,Jke=Object.defineProperties,Yke=Object.getOwnPropertyDescriptors,HS=Object.getOwnPropertySymbols,yX=Object.prototype.hasOwnProperty,vX=Object.prototype.propertyIsEnumerable,yV=(e,t,n)=>t in e?Xke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d_=(e,t)=>{for(var n in t||(t={}))yX.call(t,n)&&yV(e,n,t[n]);if(HS)for(var n of HS(t))vX.call(t,n)&&yV(e,n,t[n]);return e},vV=(e,t)=>Jke(e,Yke(t)),Qke=(e,t)=>{var n={};for(var r in e)yX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HS)for(var r of HS(e))t.indexOf(r)<0&&vX.call(e,r)&&(n[r]=e[r]);return n};const eSe={size:"sm",variant:"default"},Ah=I.exports.forwardRef((e,t)=>{const n=Ue("Input",eSe,e),{className:r,error:i,required:a,disabled:s,variant:o,icon:l,style:u,rightSectionWidth:c,iconWidth:d,rightSection:p,rightSectionProps:h,radius:m,size:g,wrapperProps:y,classNames:v,styles:b,__staticSelector:_,multiline:k,sx:S,unstyled:$,pointer:N}=n,P=Qke(n,["className","error","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:D,offsetTop:O,describedBy:F}=xke(),{classes:E,cx:z}=Zke({radius:m,multiline:k,invalid:!!i,rightSectionWidth:c?G(c):void 0,iconWidth:d,withRightSection:!!p,offsetBottom:D,offsetTop:O,pointer:N},{classNames:v,styles:b,name:["Input",_],unstyled:$,variant:o,size:g}),{systemStyles:q,rest:K}=Td(P);return B(vt,{...d_(d_({className:z(E.wrapper,r),sx:S,style:u},q),y),children:[l&&x("div",{className:E.icon,children:l}),x(vt,{...vV(d_({component:"input"},K),{ref:t,required:a,"aria-invalid":!!i,"aria-describedby":F,disabled:s,"data-disabled":s||void 0,"data-with-icon":!!l||void 0,"data-invalid":!!i||void 0,className:E.input})}),p&&x("div",{...vV(d_({},h),{className:E.rightSection}),children:p})]})});Ah.displayName="@mantine/core/Input";Ah.Wrapper=hX;Ah.Label=BR;Ah.Description=VR;Ah.Error=WR;Ah.Placeholder=gX;const Rs=Ah;var tSe=Object.defineProperty,US=Object.getOwnPropertySymbols,bX=Object.prototype.hasOwnProperty,wX=Object.prototype.propertyIsEnumerable,bV=(e,t,n)=>t in e?tSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nSe=(e,t)=>{for(var n in t||(t={}))bX.call(t,n)&&bV(e,n,t[n]);if(US)for(var n of US(t))wX.call(t,n)&&bV(e,n,t[n]);return e},rSe=(e,t)=>{var n={};for(var r in e)bX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&US)for(var r of US(e))t.indexOf(r)<0&&wX.call(e,r)&&(n[r]=e[r]);return n};function iSe(e){const t=e,{style:n}=t,r=rSe(t,["style"]);return x("svg",{...nSe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n},r),children:x("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var aSe=Object.defineProperty,sSe=Object.defineProperties,oSe=Object.getOwnPropertyDescriptors,wV=Object.getOwnPropertySymbols,lSe=Object.prototype.hasOwnProperty,uSe=Object.prototype.propertyIsEnumerable,xV=(e,t,n)=>t in e?aSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cSe=(e,t)=>{for(var n in t||(t={}))lSe.call(t,n)&&xV(e,n,t[n]);if(wV)for(var n of wV(t))uSe.call(t,n)&&xV(e,n,t[n]);return e},dSe=(e,t)=>sSe(e,oSe(t));const xX=I.exports.createContext(null);function pSe({spacing:e,children:t}){return x(xX.Provider,{value:{spacing:e},children:t})}function hSe(){const e=I.exports.useContext(xX);return e?dSe(cSe({},e),{withinGroup:!0}):{spacing:null,withinGroup:!1}}var fSe=tt((e,{spacing:t})=>({root:{display:"flex",paddingLeft:ke({size:t,sizes:e.spacing})}}));const mSe=fSe;var gSe=Object.defineProperty,GS=Object.getOwnPropertySymbols,_X=Object.prototype.hasOwnProperty,kX=Object.prototype.propertyIsEnumerable,_V=(e,t,n)=>t in e?gSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ySe=(e,t)=>{for(var n in t||(t={}))_X.call(t,n)&&_V(e,n,t[n]);if(GS)for(var n of GS(t))kX.call(t,n)&&_V(e,n,t[n]);return e},vSe=(e,t)=>{var n={};for(var r in e)_X.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GS)for(var r of GS(e))t.indexOf(r)<0&&kX.call(e,r)&&(n[r]=e[r]);return n};const bSe={},SX=I.exports.forwardRef((e,t)=>{const n=Ue("AvatarGroup",bSe,e),{children:r,spacing:i="sm",unstyled:a,className:s,variant:o}=n,l=vSe(n,["children","spacing","unstyled","className","variant"]),{classes:u,cx:c}=mSe({spacing:i},{name:"AvatarGroup",unstyled:a,variant:o});return x(pSe,{spacing:i,children:x(vt,{...ySe({ref:t,className:c(u.root,s)},l),children:r})})});SX.displayName="@mantine/core/AvatarGroup";var wSe=Object.defineProperty,xSe=Object.defineProperties,_Se=Object.getOwnPropertyDescriptors,kV=Object.getOwnPropertySymbols,kSe=Object.prototype.hasOwnProperty,SSe=Object.prototype.propertyIsEnumerable,SV=(e,t,n)=>t in e?wSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H0=(e,t)=>{for(var n in t||(t={}))kSe.call(t,n)&&SV(e,n,t[n]);if(kV)for(var n of kV(t))SSe.call(t,n)&&SV(e,n,t[n]);return e},CV=(e,t)=>xSe(e,_Se(t));const CSe=["filled","light","gradient","outline"],p_={xs:G(16),sm:G(26),md:G(38),lg:G(56),xl:G(84)};function ISe({withinGroup:e,spacing:t,theme:n}){return e?{marginLeft:`calc(${ke({size:t,sizes:n.spacing})} * -1)`,backgroundColor:`${n.colorScheme==="dark"?n.colors.dark[7]:n.white}`,border:`${G(2)} solid ${n.colorScheme==="dark"?n.colors.dark[7]:n.white}`}:null}function $Se({theme:e,variant:t,color:n,gradient:r}){const i=e.fn.variant({variant:t,color:n,gradient:r});return CSe.includes(t)?{placeholder:{color:i.color,backgroundColor:i.background,backgroundImage:t==="gradient"?i.background:void 0,border:`${G(t==="gradient"?0:1)} solid ${i.border}`},placeholderIcon:{color:i.color}}:{}}var TSe=tt((e,{radius:t,withinGroup:n,spacing:r,color:i,gradient:a},{variant:s,size:o})=>{const l=$Se({theme:e,color:i,gradient:a,variant:s});return{root:H0(CV(H0({},e.fn.focusStyles()),{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",display:"block",userSelect:"none",overflow:"hidden",borderRadius:e.fn.radius(t),textDecoration:"none",border:0,backgroundColor:"transparent",padding:0,width:ke({size:o,sizes:p_}),minWidth:ke({size:o,sizes:p_}),height:ke({size:o,sizes:p_})}),ISe({withinGroup:n,spacing:r,theme:e})),image:{objectFit:"cover",width:"100%",height:"100%",display:"block"},placeholder:H0(CV(H0({},e.fn.fontStyles()),{fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",userSelect:"none",borderRadius:e.fn.radius(t),fontSize:`calc(${ke({size:o,sizes:p_})} / 2.5)`}),l.placeholder),placeholderIcon:H0({width:"70%",height:"70%"},l.placeholderIcon)}});const NSe=TSe;var ESe=Object.defineProperty,OSe=Object.defineProperties,PSe=Object.getOwnPropertyDescriptors,qS=Object.getOwnPropertySymbols,CX=Object.prototype.hasOwnProperty,IX=Object.prototype.propertyIsEnumerable,IV=(e,t,n)=>t in e?ESe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$V=(e,t)=>{for(var n in t||(t={}))CX.call(t,n)&&IV(e,n,t[n]);if(qS)for(var n of qS(t))IX.call(t,n)&&IV(e,n,t[n]);return e},MSe=(e,t)=>OSe(e,PSe(t)),ASe=(e,t)=>{var n={};for(var r in e)CX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qS)for(var r of qS(e))t.indexOf(r)<0&&IX.call(e,r)&&(n[r]=e[r]);return n};const RSe={size:"md",color:"gray",variant:"light"},jR=I.exports.forwardRef((e,t)=>{const n=Ue("Avatar",RSe,e),{className:r,size:i,src:a,alt:s,radius:o,children:l,color:u,variant:c,gradient:d,classNames:p,styles:h,imageProps:m,unstyled:g}=n,y=ASe(n,["className","size","src","alt","radius","children","color","variant","gradient","classNames","styles","imageProps","unstyled"]),v=hSe(),[b,_]=I.exports.useState(!a),{classes:k,cx:S}=NSe({color:u,radius:o,withinGroup:v.withinGroup,spacing:v.spacing,gradient:d},{classNames:p,styles:h,unstyled:g,name:"Avatar",variant:c,size:i});return I.exports.useEffect(()=>{_(!a)},[a]),x(vt,{...$V({component:"div",className:S(k.root,r),ref:t},y),children:b?x("div",{className:k.placeholder,title:s,children:l||x(iSe,{className:k.placeholderIcon})}):x("img",{...MSe($V({},m),{className:k.image,src:a,alt:s,onError:()=>_(!0)})})})});jR.displayName="@mantine/core/Avatar";jR.Group=SX;const Yn=jR;var DSe=Object.defineProperty,LSe=Object.defineProperties,FSe=Object.getOwnPropertyDescriptors,TV=Object.getOwnPropertySymbols,zSe=Object.prototype.hasOwnProperty,BSe=Object.prototype.propertyIsEnumerable,NV=(e,t,n)=>t in e?DSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QN=(e,t)=>{for(var n in t||(t={}))zSe.call(t,n)&&NV(e,n,t[n]);if(TV)for(var n of TV(t))BSe.call(t,n)&&NV(e,n,t[n]);return e},WSe=(e,t)=>LSe(e,FSe(t));const VSe=["light","filled","outline","dot","gradient"],eE={xs:{fontSize:G(9),height:G(16)},sm:{fontSize:G(10),height:G(18)},md:{fontSize:G(11),height:G(20)},lg:{fontSize:G(13),height:G(26)},xl:{fontSize:G(16),height:G(32)}},jSe={xs:G(4),sm:G(4),md:G(6),lg:G(8),xl:G(10)};function HSe({theme:e,variant:t,color:n,size:r,gradient:i}){if(!VSe.includes(t))return null;if(t==="dot"){const s=ke({size:r,sizes:jSe});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:`calc(${ke({size:r,sizes:e.spacing})} / 1.5 - ${s} / 2)`,"&::before":{content:'""',display:"block",width:s,height:s,borderRadius:s,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:s}}}const a=e.fn.variant({color:n,variant:t,gradient:i});return{background:a.background,color:a.color,border:`${G(t==="gradient"?0:1)} solid ${a.border}`}}var USe=tt((e,{color:t,radius:n,gradient:r,fullWidth:i},{variant:a,size:s})=>{const{fontSize:o,height:l}=s in eE?eE[s]:eE.md;return{leftSection:{marginRight:`calc(${e.spacing.xs} / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs} / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:QN(WSe(QN(QN({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:o,height:l,WebkitTapHighlightColor:"transparent",lineHeight:`calc(${l} - ${G(2)})`,textDecoration:"none",padding:`0 calc(${ke({size:s,sizes:e.spacing})} / 1.5)`,boxSizing:"border-box",display:i?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:i?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(n),fontWeight:700,letterSpacing:G(.25),cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),HSe({theme:e,variant:a,color:t,size:s,gradient:r}))}});const GSe=USe;var qSe=Object.defineProperty,KS=Object.getOwnPropertySymbols,$X=Object.prototype.hasOwnProperty,TX=Object.prototype.propertyIsEnumerable,EV=(e,t,n)=>t in e?qSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KSe=(e,t)=>{for(var n in t||(t={}))$X.call(t,n)&&EV(e,n,t[n]);if(KS)for(var n of KS(t))TX.call(t,n)&&EV(e,n,t[n]);return e},ZSe=(e,t)=>{var n={};for(var r in e)$X.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KS)for(var r of KS(e))t.indexOf(r)<0&&TX.call(e,r)&&(n[r]=e[r]);return n};const XSe={variant:"light",size:"md",radius:"xl"},NX=I.exports.forwardRef((e,t)=>{const n=Ue("Badge",XSe,e),{className:r,color:i,variant:a,fullWidth:s,children:o,size:l,leftSection:u,rightSection:c,radius:d,gradient:p,classNames:h,styles:m,unstyled:g}=n,y=ZSe(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:v,cx:b}=GSe({fullWidth:s,color:i,radius:d,gradient:p},{classNames:h,styles:m,name:"Badge",unstyled:g,variant:a,size:l});return B(vt,{...KSe({className:b(v.root,r),ref:t},y),children:[u&&x("span",{className:v.leftSection,children:u}),x("span",{className:v.inner,children:o}),c&&x("span",{className:v.rightSection,children:c})]})});NX.displayName="@mantine/core/Badge";const xt=NX;var JSe=tt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type:not(:last-of-type)":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:`calc(${G(n)} / 2)`},"&:last-of-type:not(:first-of-type)":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:`calc(${G(n)} / 2)`},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:`calc(${G(n)} / 2)`,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:`calc(${G(n)} / 2)`},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:`calc(${n} * -1)`,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const YSe=JSe;var QSe=Object.defineProperty,ZS=Object.getOwnPropertySymbols,EX=Object.prototype.hasOwnProperty,OX=Object.prototype.propertyIsEnumerable,OV=(e,t,n)=>t in e?QSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eCe=(e,t)=>{for(var n in t||(t={}))EX.call(t,n)&&OV(e,n,t[n]);if(ZS)for(var n of ZS(t))OX.call(t,n)&&OV(e,n,t[n]);return e},tCe=(e,t)=>{var n={};for(var r in e)EX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZS)for(var r of ZS(e))t.indexOf(r)<0&&OX.call(e,r)&&(n[r]=e[r]);return n};const nCe={orientation:"horizontal",buttonBorderWidth:1},PX=I.exports.forwardRef((e,t)=>{const n=Ue("ButtonGroup",nCe,e),{className:r,orientation:i,buttonBorderWidth:a,unstyled:s}=n,o=tCe(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:l,cx:u}=YSe({orientation:i,buttonBorderWidth:a},{name:"ButtonGroup",unstyled:s});return x(vt,{...eCe({className:u(l.root,r),ref:t},o)})});PX.displayName="@mantine/core/ButtonGroup";var rCe=Object.defineProperty,iCe=Object.defineProperties,aCe=Object.getOwnPropertyDescriptors,PV=Object.getOwnPropertySymbols,sCe=Object.prototype.hasOwnProperty,oCe=Object.prototype.propertyIsEnumerable,MV=(e,t,n)=>t in e?rCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mu=(e,t)=>{for(var n in t||(t={}))sCe.call(t,n)&&MV(e,n,t[n]);if(PV)for(var n of PV(t))oCe.call(t,n)&&MV(e,n,t[n]);return e},fk=(e,t)=>iCe(e,aCe(t));const lCe=["filled","outline","light","white","default","subtle","gradient"],wP={xs:{height:Gi.xs,paddingLeft:G(14),paddingRight:G(14)},sm:{height:Gi.sm,paddingLeft:G(18),paddingRight:G(18)},md:{height:Gi.md,paddingLeft:G(22),paddingRight:G(22)},lg:{height:Gi.lg,paddingLeft:G(26),paddingRight:G(26)},xl:{height:Gi.xl,paddingLeft:G(32),paddingRight:G(32)},"compact-xs":{height:G(22),paddingLeft:G(7),paddingRight:G(7)},"compact-sm":{height:G(26),paddingLeft:G(8),paddingRight:G(8)},"compact-md":{height:G(30),paddingLeft:G(10),paddingRight:G(10)},"compact-lg":{height:G(34),paddingLeft:G(12),paddingRight:G(12)},"compact-xl":{height:G(40),paddingLeft:G(14),paddingRight:G(14)}};function uCe({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return wP[`compact-${t}`];const i=wP[t];return i?fk(mu({},i),{paddingLeft:n?`calc(${i.paddingLeft}  / 1.5)`:i.paddingLeft,paddingRight:r?`calc(${i.paddingRight}  / 1.5)`:i.paddingRight}):{}}const cCe=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function dCe({variant:e,theme:t,color:n,gradient:r}){if(!lCe.includes(e))return null;const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?mu({border:0,backgroundImage:i.background,color:i.color},t.fn.hover({backgroundSize:"200%"})):mu({border:`${G(1)} solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var pCe=tt((e,{radius:t,fullWidth:n,compact:r,withLeftIcon:i,withRightIcon:a,color:s,gradient:o},{variant:l,size:u})=>({root:fk(mu(fk(mu(mu(mu(mu({},uCe({compact:r,size:u,withLeftIcon:i,withRightIcon:a})),e.fn.fontStyles()),e.fn.focusStyles()),cCe(n)),{borderRadius:e.fn.radius(t),fontWeight:600,position:"relative",lineHeight:1,fontSize:ke({size:u,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),dCe({variant:l,theme:e,color:s,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":fk(mu({content:'""'},e.fn.cover(G(-1))),{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(t),cursor:"not-allowed"})}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:e.spacing.xs},rightIcon:{marginLeft:e.spacing.xs},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const hCe=pCe;var fCe=Object.defineProperty,XS=Object.getOwnPropertySymbols,MX=Object.prototype.hasOwnProperty,AX=Object.prototype.propertyIsEnumerable,AV=(e,t,n)=>t in e?fCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RV=(e,t)=>{for(var n in t||(t={}))MX.call(t,n)&&AV(e,n,t[n]);if(XS)for(var n of XS(t))AX.call(t,n)&&AV(e,n,t[n]);return e},mCe=(e,t)=>{var n={};for(var r in e)MX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XS)for(var r of XS(e))t.indexOf(r)<0&&AX.call(e,r)&&(n[r]=e[r]);return n};const gCe={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},HR=I.exports.forwardRef((e,t)=>{const n=Ue("Button",gCe,e),{className:r,size:i,color:a,type:s,disabled:o,children:l,leftIcon:u,rightIcon:c,fullWidth:d,variant:p,radius:h,uppercase:m,compact:g,loading:y,loaderPosition:v,loaderProps:b,gradient:_,classNames:k,styles:S,unstyled:$}=n,N=mCe(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:P,cx:D,theme:O}=hCe({radius:h,color:a,fullWidth:d,compact:g,gradient:_,withLeftIcon:!!u,withRightIcon:!!c},{name:"Button",unstyled:$,classNames:k,styles:S,variant:p,size:i}),F=O.fn.variant({color:a,variant:p}),E=x(G2,{...RV({color:F.color,size:`calc(${ke({size:i,sizes:wP}).height} / 2)`},b)});return x(Z1,{...RV({className:D(P.root,r),type:s,disabled:o,"data-button":!0,"data-disabled":o||void 0,"data-loading":y||void 0,ref:t,unstyled:$},N),children:B("div",{className:P.inner,children:[(u||y&&v==="left")&&x("span",{className:D(P.icon,P.leftIcon),children:y&&v==="left"?E:u}),y&&v==="center"&&x("span",{className:P.centerLoader,children:E}),x("span",{className:P.label,style:{textTransform:m?"uppercase":void 0},children:l}),(c||y&&v==="right")&&x("span",{className:D(P.icon,P.rightIcon),children:y&&v==="right"?E:c})]})})});HR.displayName="@mantine/core/Button";HR.Group=PX;const Ct=HR;var yCe=tt((e,{radius:t,shadow:n})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none","&[data-with-border]":{border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`}}}));const vCe=yCe;var bCe=Object.defineProperty,JS=Object.getOwnPropertySymbols,RX=Object.prototype.hasOwnProperty,DX=Object.prototype.propertyIsEnumerable,DV=(e,t,n)=>t in e?bCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wCe=(e,t)=>{for(var n in t||(t={}))RX.call(t,n)&&DV(e,n,t[n]);if(JS)for(var n of JS(t))DX.call(t,n)&&DV(e,n,t[n]);return e},xCe=(e,t)=>{var n={};for(var r in e)RX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JS)for(var r of JS(e))t.indexOf(r)<0&&DX.call(e,r)&&(n[r]=e[r]);return n};const _Ce={},LX=I.exports.forwardRef((e,t)=>{const n=Ue("Paper",_Ce,e),{className:r,children:i,radius:a,withBorder:s,shadow:o,unstyled:l,variant:u}=n,c=xCe(n,["className","children","radius","withBorder","shadow","unstyled","variant"]),{classes:d,cx:p}=vCe({radius:a,shadow:o},{name:"Paper",unstyled:l,variant:u});return x(vt,{...wCe({className:p(d.root,r),"data-with-border":s||void 0,ref:t},c),children:i})});LX.displayName="@mantine/core/Paper";const Bt=LX;var kCe=tt((e,{inline:t})=>({root:{display:t?"inline-flex":"flex",alignItems:"center",justifyContent:"center"}}));const SCe=kCe;var CCe=Object.defineProperty,YS=Object.getOwnPropertySymbols,FX=Object.prototype.hasOwnProperty,zX=Object.prototype.propertyIsEnumerable,LV=(e,t,n)=>t in e?CCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ICe=(e,t)=>{for(var n in t||(t={}))FX.call(t,n)&&LV(e,n,t[n]);if(YS)for(var n of YS(t))zX.call(t,n)&&LV(e,n,t[n]);return e},$Ce=(e,t)=>{var n={};for(var r in e)FX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YS)for(var r of YS(e))t.indexOf(r)<0&&zX.call(e,r)&&(n[r]=e[r]);return n};const BX=I.exports.forwardRef((e,t)=>{const n=Ue("Center",{},e),{inline:r,className:i,unstyled:a,variant:s}=n,o=$Ce(n,["inline","className","unstyled","variant"]),{classes:l,cx:u}=SCe({inline:r},{name:"Center",unstyled:a,variant:s});return x(vt,{...ICe({ref:t,className:u(l.root,i)},o)})});BX.displayName="@mantine/core/Center";const UR=BX,WX=I.exports.createContext(null),TCe=WX.Provider,NCe=()=>I.exports.useContext(WX);var ECe=Object.defineProperty,QS=Object.getOwnPropertySymbols,VX=Object.prototype.hasOwnProperty,jX=Object.prototype.propertyIsEnumerable,FV=(e,t,n)=>t in e?ECe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zV=(e,t)=>{for(var n in t||(t={}))VX.call(t,n)&&FV(e,n,t[n]);if(QS)for(var n of QS(t))jX.call(t,n)&&FV(e,n,t[n]);return e},OCe=(e,t)=>{var n={};for(var r in e)VX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QS)for(var r of QS(e))t.indexOf(r)<0&&jX.call(e,r)&&(n[r]=e[r]);return n};const PCe={size:"sm"},HX=I.exports.forwardRef((e,t)=>{const n=Ue("CheckboxGroup",PCe,e),{children:r,value:i,defaultValue:a,onChange:s,size:o,wrapperProps:l}=n,u=OCe(n,["children","value","defaultValue","onChange","size","wrapperProps"]),[c,d]=Zo({value:i,defaultValue:a,finalValue:[],onChange:s});return x(TCe,{value:{value:c,onChange:h=>{const m=h.currentTarget.value;d(c.includes(m)?c.filter(g=>g!==m):[...c,m])},size:o},children:x(Rs.Wrapper,{...zV(zV({labelElement:"div",size:o,__staticSelector:"CheckboxGroup",ref:t},l),u),children:r})})});HX.displayName="@mantine/core/CheckboxGroup";var MCe=Object.defineProperty,eC=Object.getOwnPropertySymbols,UX=Object.prototype.hasOwnProperty,GX=Object.prototype.propertyIsEnumerable,BV=(e,t,n)=>t in e?MCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tC=(e,t)=>{for(var n in t||(t={}))UX.call(t,n)&&BV(e,n,t[n]);if(eC)for(var n of eC(t))GX.call(t,n)&&BV(e,n,t[n]);return e},qX=(e,t)=>{var n={};for(var r in e)UX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eC)for(var r of eC(e))t.indexOf(r)<0&&GX.call(e,r)&&(n[r]=e[r]);return n};function ACe(e){const t=e,{width:n,height:r,style:i}=t,a=qX(t,["width","height","style"]);return x("svg",{...tC({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:tC({width:n,height:r},i)},a),children:x("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function RCe(e){var t=e,{indeterminate:n}=t,r=qX(t,["indeterminate"]);return n?x("svg",{...tC({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),children:x("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):x(ACe,{...tC({},r)})}var DCe=Object.defineProperty,LCe=Object.defineProperties,FCe=Object.getOwnPropertyDescriptors,WV=Object.getOwnPropertySymbols,zCe=Object.prototype.hasOwnProperty,BCe=Object.prototype.propertyIsEnumerable,VV=(e,t,n)=>t in e?DCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jV=(e,t)=>{for(var n in t||(t={}))zCe.call(t,n)&&VV(e,n,t[n]);if(WV)for(var n of WV(t))BCe.call(t,n)&&VV(e,n,t[n]);return e},HV=(e,t)=>LCe(e,FCe(t));const WCe={xs:G(16),sm:G(20),md:G(24),lg:G(30),xl:G(36)};var VCe=tt((e,{radius:t,color:n,transitionDuration:r,labelPosition:i,error:a,indeterminate:s},{size:o})=>{const l=ke({size:o,sizes:WCe}),u=e.fn.variant({variant:"filled",color:n});return{icon:HV(jV({},e.fn.cover()),{ref:Wo("icon"),color:s?"inherit":e.white,transform:s?"none":`translateY(${G(5)}) scale(0.5)`,opacity:s?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${r}ms`,pointerEvents:"none",width:"60%",position:"absolute",zIndex:1,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}),inner:{position:"relative",width:l,height:l,order:i==="left"?2:1},input:HV(jV({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`${G(1)} solid ${a?e.fn.variant({variant:"filled",color:"red"}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(t),padding:0,display:"block",margin:0,transition:`border-color ${r}ms ease, background-color ${r}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:u.background,borderColor:u.background,[`& + .${Wo("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",pointerEvents:"none",[`& + .${Wo("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const jCe=VCe;var HCe=Object.defineProperty,UCe=Object.defineProperties,GCe=Object.getOwnPropertyDescriptors,UV=Object.getOwnPropertySymbols,qCe=Object.prototype.hasOwnProperty,KCe=Object.prototype.propertyIsEnumerable,GV=(e,t,n)=>t in e?HCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZCe=(e,t)=>{for(var n in t||(t={}))qCe.call(t,n)&&GV(e,n,t[n]);if(UV)for(var n of UV(t))KCe.call(t,n)&&GV(e,n,t[n]);return e},XCe=(e,t)=>UCe(e,GCe(t));const tE={xs:G(16),sm:G(20),md:G(24),lg:G(30),xl:G(36)};var JCe=tt((e,{labelPosition:t},{size:n})=>({root:{},body:{display:"flex","&:has(input:disabled) label":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}},labelWrapper:XCe(ZCe({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:n in tE?ke({size:n,sizes:e.fontSizes}):void 0,lineHeight:n in tE?ke({size:n,sizes:tE}):void 0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs} / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs} / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&:disabled, &[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const YCe=JCe;var QCe=Object.defineProperty,nC=Object.getOwnPropertySymbols,KX=Object.prototype.hasOwnProperty,ZX=Object.prototype.propertyIsEnumerable,qV=(e,t,n)=>t in e?QCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eIe=(e,t)=>{for(var n in t||(t={}))KX.call(t,n)&&qV(e,n,t[n]);if(nC)for(var n of nC(t))ZX.call(t,n)&&qV(e,n,t[n]);return e},tIe=(e,t)=>{var n={};for(var r in e)KX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nC)for(var r of nC(e))t.indexOf(r)<0&&ZX.call(e,r)&&(n[r]=e[r]);return n};const GR=I.exports.forwardRef((e,t)=>{var n=e,{__staticSelector:r,className:i,classNames:a,styles:s,unstyled:o,children:l,label:u,description:c,id:d,disabled:p,error:h,size:m,labelPosition:g,variant:y}=n,v=tIe(n,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition","variant"]);const{classes:b,cx:_}=YCe({labelPosition:g},{name:r,styles:s,classNames:a,unstyled:o,variant:y,size:m});return x(vt,{...eIe({className:_(b.root,i),ref:t},v),children:B("div",{className:_(b.body),children:[l,B("div",{className:b.labelWrapper,children:[u!=null&&x("label",{className:b.label,"data-disabled":p||void 0,htmlFor:d,children:u}),c&&x(Rs.Description,{className:b.description,children:c}),h&&h!=="boolean"&&x(Rs.Error,{className:b.error,children:h})]})]})})});GR.displayName="@mantine/core/InlineInput";var nIe=Object.defineProperty,rC=Object.getOwnPropertySymbols,XX=Object.prototype.hasOwnProperty,JX=Object.prototype.propertyIsEnumerable,KV=(e,t,n)=>t in e?nIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h_=(e,t)=>{for(var n in t||(t={}))XX.call(t,n)&&KV(e,n,t[n]);if(rC)for(var n of rC(t))JX.call(t,n)&&KV(e,n,t[n]);return e},rIe=(e,t)=>{var n={};for(var r in e)XX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rC)for(var r of rC(e))t.indexOf(r)<0&&JX.call(e,r)&&(n[r]=e[r]);return n};const iIe={size:"sm",transitionDuration:100,icon:RCe,labelPosition:"right"},Qg=I.exports.forwardRef((e,t)=>{const n=Ue("Checkbox",iIe,e),{className:r,style:i,sx:a,checked:s,disabled:o,color:l,label:u,indeterminate:c,id:d,size:p,radius:h,wrapperProps:m,children:g,classNames:y,styles:v,transitionDuration:b,icon:_,unstyled:k,labelPosition:S,description:$,error:N,variant:P}=n,D=rIe(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error","variant"]),O=NCe(),F=Vu(d),{systemStyles:E,rest:z}=Td(D),{classes:q}=jCe({radius:h,color:l,transitionDuration:b,labelPosition:S,error:!!N,indeterminate:c},{name:"Checkbox",classNames:y,styles:v,unstyled:k,variant:P,size:(O==null?void 0:O.size)||p}),K=O?{checked:O.value.includes(z.value),onChange:O.onChange}:{};return x(GR,{...h_(h_({className:r,sx:a,style:i,id:F,size:(O==null?void 0:O.size)||p,labelPosition:S,label:u,description:$,error:N,disabled:o,__staticSelector:"Checkbox",classNames:y,styles:v,unstyled:k,"data-checked":K.checked||void 0,variant:P},E),m),children:B("div",{className:q.inner,children:[x("input",{...h_(h_({id:F,ref:t,type:"checkbox",className:q.input,checked:s,disabled:o},z),K)}),x(_,{indeterminate:c,className:q.icon})]})})});Qg.displayName="@mantine/core/Checkbox";Qg.Group=HX;var aIe=Object.defineProperty,sIe=Object.defineProperties,oIe=Object.getOwnPropertyDescriptors,ZV=Object.getOwnPropertySymbols,lIe=Object.prototype.hasOwnProperty,uIe=Object.prototype.propertyIsEnumerable,XV=(e,t,n)=>t in e?aIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JV=(e,t)=>{for(var n in t||(t={}))lIe.call(t,n)&&XV(e,n,t[n]);if(ZV)for(var n of ZV(t))uIe.call(t,n)&&XV(e,n,t[n]);return e},YV=(e,t)=>sIe(e,oIe(t)),cIe=tt((e,{radius:t},{size:n})=>{const r=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{root:YV(JV({},e.fn.focusStyles()),{width:G(n),height:G(n),WebkitTapHighlightColor:"transparent",border:0,borderRadius:e.fn.radius(t),appearance:"none",WebkitAppearance:"none",padding:0,position:"relative",overflow:"hidden"}),overlay:YV(JV({},e.fn.cover()),{position:"absolute",borderRadius:e.fn.radius(t)}),children:{display:"inline-flex",justifyContent:"center",alignItems:"center"},shadowOverlay:{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${G(1)} inset, rgb(0, 0, 0, .15) 0 0 ${G(4)} inset`,zIndex:1},alphaOverlay:{backgroundImage:`linear-gradient(45deg, ${r} 25%, transparent 25%), linear-gradient(-45deg, ${r} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${r} 75%), linear-gradient(-45deg, ${e.colorScheme==="dark"?e.colors.dark[7]:e.white} 75%, ${r} 75%)`,backgroundSize:`${G(8)} ${G(8)}`,backgroundPosition:`0 0, 0 ${G(4)}, ${G(4)} -${G(4)}, -${G(4)} 0`}}});const dIe=cIe;var pIe=Object.defineProperty,iC=Object.getOwnPropertySymbols,YX=Object.prototype.hasOwnProperty,QX=Object.prototype.propertyIsEnumerable,QV=(e,t,n)=>t in e?pIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hIe=(e,t)=>{for(var n in t||(t={}))YX.call(t,n)&&QV(e,n,t[n]);if(iC)for(var n of iC(t))QX.call(t,n)&&QV(e,n,t[n]);return e},fIe=(e,t)=>{var n={};for(var r in e)YX.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iC)for(var r of iC(e))t.indexOf(r)<0&&QX.call(e,r)&&(n[r]=e[r]);return n};const mIe={size:G(25),radius:G(25),withShadow:!0},eJ=I.exports.forwardRef((e,t)=>{const n=Ue("ColorSwatch",mIe,e),{color:r,size:i,radius:a,className:s,children:o,classNames:l,styles:u,unstyled:c,withShadow:d,variant:p}=n,h=fIe(n,["color","size","radius","className","children","classNames","styles","unstyled","withShadow","variant"]),{classes:m,cx:g}=dIe({radius:a},{classNames:l,styles:u,unstyled:c,name:"ColorSwatch",size:i,variant:p});return B(vt,{...hIe({className:g(m.root,s),ref:t},h),children:[x("div",{className:g(m.alphaOverlay,m.overlay)}),d&&x("div",{className:g(m.shadowOverlay,m.overlay)}),x("div",{className:m.overlay,style:{backgroundColor:r}}),x("div",{className:g(m.children,m.overlay),children:o})]})});eJ.displayName="@mantine/core/ColorSwatch";const c1=eJ,Tl={xs:G(8),sm:G(12),md:G(16),lg:G(20),xl:G(22)};var gIe=tt((e,t,{size:n})=>{const r=ke({size:n,sizes:Tl});return{thumb:{overflow:"hidden",boxSizing:"border-box",position:"absolute",boxShadow:`0 0 ${G(1)} rgba(0, 0, 0, .6)`,border:`${G(2)} solid ${e.white}`,backgroundColor:"transparent",width:r,height:r,borderRadius:r}}});const yIe=gIe;var vIe=Object.defineProperty,e6=Object.getOwnPropertySymbols,bIe=Object.prototype.hasOwnProperty,wIe=Object.prototype.propertyIsEnumerable,t6=(e,t,n)=>t in e?vIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xIe=(e,t)=>{for(var n in t||(t={}))bIe.call(t,n)&&t6(e,n,t[n]);if(e6)for(var n of e6(t))wIe.call(t,n)&&t6(e,n,t[n]);return e};function qR({position:e,className:t,styles:n,classNames:r,style:i,size:a,__staticSelector:s,unstyled:o,variant:l}){const{classes:u,cx:c}=yIe(null,{classNames:r,styles:n,name:s,unstyled:o,size:a,variant:l});return x("div",{className:c(u.thumb,t),style:xIe({left:`calc(${e.x*100}% - ${Tl[a]} / 2)`,top:`calc(${e.y*100}% - ${Tl[a]} / 2)`},i)})}qR.displayName="@mantine/core/Thumb";var _Ie=Object.defineProperty,n6=Object.getOwnPropertySymbols,kIe=Object.prototype.hasOwnProperty,SIe=Object.prototype.propertyIsEnumerable,r6=(e,t,n)=>t in e?_Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i6=(e,t)=>{for(var n in t||(t={}))kIe.call(t,n)&&r6(e,n,t[n]);if(n6)for(var n of n6(t))SIe.call(t,n)&&r6(e,n,t[n]);return e},CIe=tt((e,t,{size:n})=>({sliderThumb:{ref:Wo("sliderThumb")},slider:{position:"relative",height:`calc(${ke({size:n,sizes:Tl})} + ${G(2)})`,boxSizing:"border-box",marginLeft:`calc(${ke({size:n,sizes:Tl})} / 2)`,marginRight:`calc(${ke({size:n,sizes:Tl})} / 2)`,outline:0,[`&:focus .${Wo("sliderThumb")}`]:i6({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${Wo("sliderThumb")}`]:i6({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},sliderOverlay:{position:"absolute",boxSizing:"border-box",top:0,bottom:0,left:`calc(${ke({size:n,sizes:Tl})} * -1 / 2 - ${G(1)})`,right:`calc(${ke({size:n,sizes:Tl})} * -1 / 2 - ${G(1)})`,borderRadius:1e3}}));const IIe=CIe;var $Ie=Object.defineProperty,TIe=Object.defineProperties,NIe=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertySymbols,tJ=Object.prototype.hasOwnProperty,nJ=Object.prototype.propertyIsEnumerable,a6=(e,t,n)=>t in e?$Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EIe=(e,t)=>{for(var n in t||(t={}))tJ.call(t,n)&&a6(e,n,t[n]);if(aC)for(var n of aC(t))nJ.call(t,n)&&a6(e,n,t[n]);return e},OIe=(e,t)=>TIe(e,NIe(t)),PIe=(e,t)=>{var n={};for(var r in e)tJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aC)for(var r of aC(e))t.indexOf(r)<0&&nJ.call(e,r)&&(n[r]=e[r]);return n};const KR=I.exports.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:a,maxValue:s,round:o,size:l="md",thumbColor:u="transparent",__staticSelector:c="ColorSlider",focusable:d=!0,overlays:p,classNames:h,styles:m,className:g,unstyled:y,variant:v}=n,b=PIe(n,["value","onChange","onChangeEnd","maxValue","round","size","thumbColor","__staticSelector","focusable","overlays","classNames","styles","className","unstyled","variant"]);const{classes:_,cx:k}=IIe(null,{classNames:h,styles:m,name:c,unstyled:y,variant:v,size:l}),[S,$]=I.exports.useState({y:0,x:r/s}),N=I.exports.useRef(S),P=z=>o?Math.round(z*s):z*s,{ref:D}=kR(({x:z,y:q})=>{N.current={x:z,y:q},i(P(z))},{onScrubEnd:()=>{const{x:z}=N.current;a(P(z))}});Mi(()=>{$({y:0,x:r/s})},[r]);const O=(z,q)=>{z.preventDefault();const K=mK(q);i(P(K.x)),a(P(K.x))},F=z=>{switch(z.key){case"ArrowRight":{O(z,{x:S.x+.05,y:S.y});break}case"ArrowLeft":{O(z,{x:S.x-.05,y:S.y});break}}},E=p.map((z,q)=>x("div",{className:_.sliderOverlay,style:z},q));return B(vt,{...OIe(EIe({},b),{ref:ju(D,t),className:k(_.slider,g),role:"slider","aria-valuenow":r,"aria-valuemax":s,"aria-valuemin":0,tabIndex:d?0:-1,onKeyDown:F}),children:[E,x(qR,{__staticSelector:c,classNames:h,styles:m,position:S,style:{top:G(1),backgroundColor:u},className:_.sliderThumb,size:l})]})});KR.displayName="@mantine/core/ColorSlider";var MIe=Object.defineProperty,AIe=Object.defineProperties,RIe=Object.getOwnPropertyDescriptors,sC=Object.getOwnPropertySymbols,rJ=Object.prototype.hasOwnProperty,iJ=Object.prototype.propertyIsEnumerable,s6=(e,t,n)=>t in e?MIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DIe=(e,t)=>{for(var n in t||(t={}))rJ.call(t,n)&&s6(e,n,t[n]);if(sC)for(var n of sC(t))iJ.call(t,n)&&s6(e,n,t[n]);return e},LIe=(e,t)=>AIe(e,RIe(t)),FIe=(e,t)=>{var n={};for(var r in e)rJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sC)for(var r of sC(e))t.indexOf(r)<0&&iJ.call(e,r)&&(n[r]=e[r]);return n};const zIe={},aJ=I.exports.forwardRef((e,t)=>{const n=Ue("HueSlider",zIe,e),{value:r,onChange:i,onChangeEnd:a,__staticSelector:s}=n,o=FIe(n,["value","onChange","onChangeEnd","__staticSelector"]);return x(KR,{...LIe(DIe({},o),{ref:t,value:r,onChange:i,onChangeEnd:a,maxValue:360,thumbColor:`hsl(${r}, 100%, 50%)`,round:!0,__staticSelector:s||"HueSlider",overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${G(1)} inset, rgb(0, 0, 0, .15) 0 0 ${G(4)} inset`}]})})});aJ.displayName="@mantine/core/HueSlider";var BIe=Object.defineProperty,WIe=Object.defineProperties,VIe=Object.getOwnPropertyDescriptors,o6=Object.getOwnPropertySymbols,jIe=Object.prototype.hasOwnProperty,HIe=Object.prototype.propertyIsEnumerable,l6=(e,t,n)=>t in e?BIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u6=(e,t)=>{for(var n in t||(t={}))jIe.call(t,n)&&l6(e,n,t[n]);if(o6)for(var n of o6(t))HIe.call(t,n)&&l6(e,n,t[n]);return e},c6=(e,t)=>WIe(e,VIe(t));function so(e,t=0,n=10**t){return Math.round(n*e)/n}function UIe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const GIe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function qIe(e,t="deg"){return Number(e)*(GIe[t]||1)}const KIe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function d6(e){const t=KIe.exec(e);return t?UIe({h:qIe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function xP({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),a=i-Math.min(e,t,n),s=a?i===e?(t-n)/a:i===t?2+(n-e)/a:4+(e-t)/a:0;return{h:so(60*(s<0?s+6:s),3),s:so(i?a/i*100:0,3),v:so(i/255*100,3),a:r}}function _P(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?xP({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):xP({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function ZIe(e){const t=e[0]==="#"?e.slice(1):e,n=s=>so(parseInt(s,16)/255,3);if(t.length===4){const s=t.slice(0,3),o=n(t[3]+t[3]);return c6(u6({},_P(s)),{a:o})}const r=t.slice(0,6),i=n(t.slice(6,8));return c6(u6({},_P(r)),{a:i})}const XIe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function p6(e){const t=XIe.exec(e);return t?xP({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const sJ={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},JIe={hex:_P,hexa:ZIe,rgb:p6,rgba:p6,hsl:d6,hsla:d6};function YIe(e){for(const[,t]of Object.entries(sJ))if(t.test(e))return!0;return!1}function f_(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(sJ))if(r.test(t))return JIe[n](t);return{h:0,s:0,v:0,a:1}}var QIe=Object.defineProperty,e2e=Object.defineProperties,t2e=Object.getOwnPropertyDescriptors,oC=Object.getOwnPropertySymbols,oJ=Object.prototype.hasOwnProperty,lJ=Object.prototype.propertyIsEnumerable,h6=(e,t,n)=>t in e?QIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n2e=(e,t)=>{for(var n in t||(t={}))oJ.call(t,n)&&h6(e,n,t[n]);if(oC)for(var n of oC(t))lJ.call(t,n)&&h6(e,n,t[n]);return e},r2e=(e,t)=>e2e(e,t2e(t)),i2e=(e,t)=>{var n={};for(var r in e)oJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oC)for(var r of oC(e))t.indexOf(r)<0&&lJ.call(e,r)&&(n[r]=e[r]);return n};const a2e={},uJ=I.exports.forwardRef((e,t)=>{const n=Ue("AlphaSlider",a2e,e),{value:r,onChange:i,onChangeEnd:a,color:s,__staticSelector:o}=n,l=i2e(n,["value","onChange","onChangeEnd","color","__staticSelector"]),u=Za(),c=u.colorScheme==="dark"?u.colors.dark[4]:u.colors.gray[3];return x(KR,{...r2e(n2e({},l),{ref:t,value:r,onChange:d=>i(so(d,2)),onChangeEnd:d=>a(so(d,2)),maxValue:1,round:!1,__staticSelector:o||"AlphaSlider",overlays:[{backgroundImage:`linear-gradient(45deg, ${c} 25%, transparent 25%), linear-gradient(-45deg, ${c} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${c} 75%), linear-gradient(-45deg, ${u.colorScheme==="dark"?u.colors.dark[7]:u.white} 75%, ${c} 75%)`,backgroundSize:`${G(8)} ${G(8)}`,backgroundPosition:`0 0, 0 ${G(4)}, ${G(4)} -${G(4)}, -${G(4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${G(1)} inset, rgb(0, 0, 0, .15) 0 0 ${G(4)} inset`}]})})});uJ.displayName="@mantine/core/AlphaSlider";var s2e=Object.defineProperty,f6=Object.getOwnPropertySymbols,o2e=Object.prototype.hasOwnProperty,l2e=Object.prototype.propertyIsEnumerable,m6=(e,t,n)=>t in e?s2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nE=(e,t)=>{for(var n in t||(t={}))o2e.call(t,n)&&m6(e,n,t[n]);if(f6)for(var n of f6(t))l2e.call(t,n)&&m6(e,n,t[n]);return e};const u2e={xs:G(100),sm:G(110),md:G(120),lg:G(140),xl:G(160)};var c2e=tt((e,t,{size:n})=>({saturationThumb:{ref:Wo("saturationThumb")},saturation:{boxSizing:"border-box",position:"relative",height:ke({size:n,sizes:u2e}),borderRadius:e.radius.sm,margin:`calc(${ke({size:n,sizes:Tl})} / 2)`,WebkitTapHighlightColor:"transparent",[`&:focus .${Wo("saturationThumb")}`]:nE({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${Wo("saturationThumb")}`]:nE({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},saturationOverlay:nE({boxSizing:"border-box",borderRadius:e.radius.sm},e.fn.cover(`calc(${ke({size:n,sizes:Tl})} * -1 / 2 - ${G(1)})`))}));const d2e=c2e;function cJ({h:e,s:t,v:n,a:r}){const i=e/360*6,a=t/100,s=n/100,o=Math.floor(i),l=s*(1-a),u=s*(1-(i-o)*a),c=s*(1-(1-i+o)*a),d=o%6;return{r:so([s,u,l,l,c,s][d]*255),g:so([c,s,s,u,l,l][d]*255),b:so([l,l,c,s,s,u][d]*255),a:so(r,2)}}function g6(e,t){const{r:n,g:r,b:i,a}=cJ(e);return t?`rgba(${n}, ${r}, ${i}, ${so(a,2)})`:`rgb(${n}, ${r}, ${i})`}function y6({h:e,s:t,v:n,a:r},i){const a=(200-t)*n/100,s={h:Math.round(e),s:Math.round(a>0&&a<200?t*n/100/(a<=100?a:200-a)*100:0),l:Math.round(a/2)};return i?`hsla(${s.h}, ${s.s}%, ${s.l}%, ${so(r,2)})`:`hsl(${s.h}, ${s.s}%, ${s.l}%)`}function mk(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function dJ(e){const{r:t,g:n,b:r}=cJ(e);return`#${mk(t)}${mk(n)}${mk(r)}`}function p2e(e){const t=Math.round(e.a*255);return`${dJ(e)}${mk(t)}`}const rE={hex:dJ,hexa:e=>p2e(e),rgb:e=>g6(e,!1),rgba:e=>g6(e,!0),hsl:e=>y6(e,!1),hsla:e=>y6(e,!0)};function mc(e,t){return t?e in rE?rE[e](t):rE.hex(t):"#000000"}function pJ({value:e,onChange:t,onChangeEnd:n,focusable:r=!0,__staticSelector:i="saturation",size:a,color:s,saturationLabel:o,classNames:l,styles:u,unstyled:c,variant:d}){const{classes:p}=d2e(null,{classNames:l,styles:u,name:i,unstyled:c,variant:d,size:a}),[h,m]=I.exports.useState({x:e.s/100,y:1-e.v/100}),g=I.exports.useRef(h),{ref:y}=kR(({x:_,y:k})=>{g.current={x:_,y:k},t({s:Math.round(_*100),v:Math.round((1-k)*100)})},{onScrubEnd:()=>{const{x:_,y:k}=g.current;n({s:Math.round(_*100),v:Math.round((1-k)*100)})}});I.exports.useEffect(()=>{m({x:e.s/100,y:1-e.v/100})},[e.s,e.v]);const v=(_,k)=>{_.preventDefault();const S=mK(k);t({s:Math.round(S.x*100),v:Math.round((1-S.y)*100)}),n({s:Math.round(S.x*100),v:Math.round((1-S.y)*100)})},b=_=>{switch(_.key){case"ArrowUp":{v(_,{y:h.y-.05,x:h.x});break}case"ArrowDown":{v(_,{y:h.y+.05,x:h.x});break}case"ArrowRight":{v(_,{x:h.x+.05,y:h.y});break}case"ArrowLeft":{v(_,{x:h.x-.05,y:h.y});break}}};return B("div",{className:p.saturation,ref:y,role:"slider","aria-label":o,"aria-valuenow":h.x,"aria-valuetext":mc("rgba",e),tabIndex:r?0:-1,onKeyDown:b,children:[x("div",{className:p.saturationOverlay,style:{backgroundColor:`hsl(${e.h}, 100%, 50%)`}}),x("div",{className:p.saturationOverlay,style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}}),x("div",{className:p.saturationOverlay,style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}}),x(qR,{__staticSelector:i,classNames:l,styles:u,position:h,className:p.saturationThumb,style:{backgroundColor:s},size:a})]})}pJ.displayName="@mantine/core/Saturation";var h2e=tt((e,{swatchesPerRow:t})=>({swatch:{width:`calc(${100/t}% - ${G(4)})`,height:0,paddingBottom:`calc(${100/t}% - ${G(4)})`,margin:G(2),boxSizing:"content-box"},swatches:{boxSizing:"border-box",marginLeft:G(-2),marginRight:G(-2),display:"flex",flexWrap:"wrap"}}));const f2e=h2e;var m2e=Object.defineProperty,lC=Object.getOwnPropertySymbols,hJ=Object.prototype.hasOwnProperty,fJ=Object.prototype.propertyIsEnumerable,v6=(e,t,n)=>t in e?m2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g2e=(e,t)=>{for(var n in t||(t={}))hJ.call(t,n)&&v6(e,n,t[n]);if(lC)for(var n of lC(t))fJ.call(t,n)&&v6(e,n,t[n]);return e},y2e=(e,t)=>{var n={};for(var r in e)hJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lC)for(var r of lC(e))t.indexOf(r)<0&&fJ.call(e,r)&&(n[r]=e[r]);return n};function mJ(e){var t=e,{data:n,swatchesPerRow:r=10,focusable:i=!0,classNames:a,styles:s,__staticSelector:o="color-picker",unstyled:l,setValue:u,onChangeEnd:c,variant:d,size:p}=t,h=y2e(t,["data","swatchesPerRow","focusable","classNames","styles","__staticSelector","unstyled","setValue","onChangeEnd","variant","size"]);const{classes:m}=f2e({swatchesPerRow:r},{classNames:a,styles:s,name:o,unstyled:l,variant:d,size:p}),g=n.map((y,v)=>x(c1,{className:m.swatch,component:"button",type:"button",color:y,radius:"sm",onClick:()=>{u(y),c==null||c(y)},style:{cursor:"pointer"},"aria-label":y,tabIndex:i?0:-1},v));return x("div",{...g2e({className:m.swatches},h),children:g})}mJ.displayName="@mantine/core/Swatches";const v2e={xs:G(180),sm:G(200),md:G(240),lg:G(280),xl:G(320)};var b2e=tt((e,{fullWidth:t},{size:n})=>({preview:{},wrapper:{boxSizing:"border-box",width:t?"100%":ke({size:n,sizes:v2e}),padding:G(1)},body:{display:"flex",boxSizing:"border-box",paddingTop:`calc(${ke({size:n,sizes:e.spacing})} / 2)`},sliders:{flex:1,boxSizing:"border-box","&:not(:only-child)":{marginRight:e.spacing.xs}},slider:{boxSizing:"border-box","& + &":{marginTop:G(5)}},swatch:{cursor:"pointer"}}));const w2e=b2e;var x2e=Object.defineProperty,_2e=Object.defineProperties,k2e=Object.getOwnPropertyDescriptors,uC=Object.getOwnPropertySymbols,gJ=Object.prototype.hasOwnProperty,yJ=Object.prototype.propertyIsEnumerable,b6=(e,t,n)=>t in e?x2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zm=(e,t)=>{for(var n in t||(t={}))gJ.call(t,n)&&b6(e,n,t[n]);if(uC)for(var n of uC(t))yJ.call(t,n)&&b6(e,n,t[n]);return e},iE=(e,t)=>_2e(e,k2e(t)),S2e=(e,t)=>{var n={};for(var r in e)gJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uC)for(var r of uC(e))t.indexOf(r)<0&&yJ.call(e,r)&&(n[r]=e[r]);return n};const C2e={xs:26,sm:34,md:42,lg:50,xl:54},I2e={swatchesPerRow:10,size:"sm",withPicker:!0,focusable:!0,__staticSelector:"ColorPicker"},ZR=I.exports.forwardRef((e,t)=>{const n=Ue("ColorPicker",I2e,e),{value:r,defaultValue:i,onChange:a,onChangeEnd:s,format:o,swatches:l,swatchesPerRow:u,size:c,withPicker:d,fullWidth:p,focusable:h,__staticSelector:m,saturationLabel:g,hueLabel:y,alphaLabel:v,className:b,styles:_,classNames:k,unstyled:S,onColorSwatchClick:$,variant:N}=n,P=S2e(n,["value","defaultValue","onChange","onChangeEnd","format","swatches","swatchesPerRow","size","withPicker","fullWidth","focusable","__staticSelector","saturationLabel","hueLabel","alphaLabel","className","styles","classNames","unstyled","onColorSwatchClick","variant"]),{classes:D,cx:O}=w2e({fullWidth:p},{classNames:k,styles:_,name:m,unstyled:S,variant:N,size:c}),F=I.exports.useRef(o),E=I.exports.useRef(null),z=I.exports.useRef(!0),q=o==="hexa"||o==="rgba"||o==="hsla",[K,Z,te]=Zo({value:r,defaultValue:i,finalValue:"#FFFFFF",onChange:a}),[V,ee]=I.exports.useState(f_(K)),Y=Q=>{z.current=!1,ee(oe=>{const pe=zm(zm({},oe),Q);return E.current=mc(F.current,pe),pe}),Z(E.current),setTimeout(()=>{z.current=!0},0)};return Mi(()=>{YIe(r)&&z.current&&(ee(f_(r)),z.current=!0)},[r]),Mi(()=>{F.current=o,Z(mc(o,V))},[o]),B(vt,{...zm({className:O(D.wrapper,b),ref:t},P),children:[d&&B(Fe,{children:[x(pJ,{value:V,onChange:Y,onChangeEnd:({s:Q,v:oe})=>s==null?void 0:s(mc(F.current,iE(zm({},V),{s:Q,v:oe}))),color:K,styles:_,classNames:k,size:c,focusable:h,saturationLabel:g,__staticSelector:m}),B("div",{className:D.body,children:[B("div",{className:D.sliders,children:[x(aJ,{value:V.h,onChange:Q=>Y({h:Q}),onChangeEnd:Q=>s==null?void 0:s(mc(F.current,iE(zm({},V),{h:Q}))),size:c,styles:_,classNames:k,focusable:h,"aria-label":y,__staticSelector:m}),q&&x(uJ,{value:V.a,onChange:Q=>Y({a:Q}),onChangeEnd:Q=>{s==null||s(mc(F.current,iE(zm({},V),{a:Q})))},size:c,color:mc("hex",V),style:{marginTop:G(6)},styles:_,classNames:k,focusable:h,"aria-label":v,__staticSelector:m})]}),q&&x(c1,{color:K,radius:"sm",size:ke({size:c,sizes:C2e}),className:D.preview})]})]}),Array.isArray(l)&&x(mJ,{data:l,style:{marginTop:G(5)},swatchesPerRow:u,focusable:h,classNames:k,styles:_,__staticSelector:m,setValue:Z,onChangeEnd:Q=>{const oe=mc(o,f_(Q));$==null||$(oe),s==null||s(oe),te||ee(f_(Q))}})]})});ZR.displayName="@mantine/core/ColorPicker";const[$2e,Ly]=Ay("ModalBase component was not found in tree");var T2e=tt(()=>({close:{marginLeft:"auto",marginRight:0}}));const N2e=T2e;var E2e=Object.defineProperty,cC=Object.getOwnPropertySymbols,vJ=Object.prototype.hasOwnProperty,bJ=Object.prototype.propertyIsEnumerable,w6=(e,t,n)=>t in e?E2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O2e=(e,t)=>{for(var n in t||(t={}))vJ.call(t,n)&&w6(e,n,t[n]);if(cC)for(var n of cC(t))bJ.call(t,n)&&w6(e,n,t[n]);return e},P2e=(e,t)=>{var n={};for(var r in e)vJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cC)for(var r of cC(e))t.indexOf(r)<0&&bJ.call(e,r)&&(n[r]=e[r]);return n};const M2e={size:"sm"},A2e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}CloseButton`,M2e,e),{className:i}=r,a=P2e(r,["className"]),{classes:s,cx:o}=N2e(null,n.stylesApi);return x(q2,{...O2e({className:o(s.close,i),ref:t,onClick:n.onClose},a)})});var R2e=tt(()=>({overlay:{}}));const D2e=R2e;var L2e=Object.defineProperty,F2e=Object.defineProperties,z2e=Object.getOwnPropertyDescriptors,x6=Object.getOwnPropertySymbols,B2e=Object.prototype.hasOwnProperty,W2e=Object.prototype.propertyIsEnumerable,_6=(e,t,n)=>t in e?L2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V2e=(e,t)=>{for(var n in t||(t={}))B2e.call(t,n)&&_6(e,n,t[n]);if(x6)for(var n of x6(t))W2e.call(t,n)&&_6(e,n,t[n]);return e},j2e=(e,t)=>F2e(e,z2e(t)),H2e=tt((e,{color:t,opacity:n,blur:r,radius:i,gradient:a,fixed:s,zIndex:o})=>({root:j2e(V2e({},e.fn.cover(0)),{position:s?"fixed":"absolute",backgroundColor:a?void 0:e.fn.rgba(t,n),backgroundImage:a,backdropFilter:r?`blur(${G(r)})`:void 0,borderRadius:e.fn.radius(i),zIndex:o,"&[data-center]":{display:"flex",alignItems:"center",justifyContent:"center"}})}));const U2e=H2e;var G2e=Object.defineProperty,dC=Object.getOwnPropertySymbols,wJ=Object.prototype.hasOwnProperty,xJ=Object.prototype.propertyIsEnumerable,k6=(e,t,n)=>t in e?G2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q2e=(e,t)=>{for(var n in t||(t={}))wJ.call(t,n)&&k6(e,n,t[n]);if(dC)for(var n of dC(t))xJ.call(t,n)&&k6(e,n,t[n]);return e},K2e=(e,t)=>{var n={};for(var r in e)wJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dC)for(var r of dC(e))t.indexOf(r)<0&&xJ.call(e,r)&&(n[r]=e[r]);return n};const Z2e={opacity:.6,color:"#000",zIndex:Wu("modal"),radius:0},_J=I.exports.forwardRef((e,t)=>{const n=Ue("Overlay",Z2e,e),{variant:r,opacity:i,color:a,blur:s,gradient:o,zIndex:l,radius:u,children:c,className:d,classNames:p,styles:h,unstyled:m,center:g,fixed:y}=n,v=K2e(n,["variant","opacity","color","blur","gradient","zIndex","radius","children","className","classNames","styles","unstyled","center","fixed"]),{classes:b,cx:_}=U2e({color:a,opacity:i,blur:s,radius:u,gradient:o,fixed:y,zIndex:l},{name:"Overlay",classNames:p,styles:h,unstyled:m,variant:r});return x(vt,{...q2e({ref:t,className:_(b.root,d),"data-center":g||void 0},v),children:c})});_J.displayName="@mantine/core/Overlay";const X2e=_J;var J2e=Object.defineProperty,Y2e=Object.defineProperties,Q2e=Object.getOwnPropertyDescriptors,pC=Object.getOwnPropertySymbols,kJ=Object.prototype.hasOwnProperty,SJ=Object.prototype.propertyIsEnumerable,S6=(e,t,n)=>t in e?J2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U0=(e,t)=>{for(var n in t||(t={}))kJ.call(t,n)&&S6(e,n,t[n]);if(pC)for(var n of pC(t))SJ.call(t,n)&&S6(e,n,t[n]);return e},e$e=(e,t)=>Y2e(e,Q2e(t)),t$e=(e,t)=>{var n={};for(var r in e)kJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pC)for(var r of pC(e))t.indexOf(r)<0&&SJ.call(e,r)&&(n[r]=e[r]);return n};const n$e={},r$e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}Overlay`,n$e,e),{onClick:i,transitionProps:a,style:s,className:o}=r,l=t$e(r,["onClick","transitionProps","style","className"]),{classes:u,cx:c}=D2e(null,n.stylesApi),d=p=>{i==null||i(p),n.closeOnClickOutside&&n.onClose()};return x(ku,{...e$e(U0(U0({mounted:n.opened},n.transitionProps),a),{transition:"fade"}),children:p=>x(X2e,{...U0({ref:t,onClick:d,fixed:!0,style:U0(U0({},s),p),className:c(u.overlay,o),zIndex:n.zIndex},l)})})});var i$e=tt((e,{zIndex:t})=>({inner:{position:"fixed",width:"100%",top:0,bottom:0,maxHeight:"100%",zIndex:t,pointerEvents:"none"},content:{pointerEvents:"all"}}));const a$e=i$e;var s$e=Object.defineProperty,hC=Object.getOwnPropertySymbols,CJ=Object.prototype.hasOwnProperty,IJ=Object.prototype.propertyIsEnumerable,C6=(e,t,n)=>t in e?s$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G0=(e,t)=>{for(var n in t||(t={}))CJ.call(t,n)&&C6(e,n,t[n]);if(hC)for(var n of hC(t))IJ.call(t,n)&&C6(e,n,t[n]);return e},o$e=(e,t)=>{var n={};for(var r in e)CJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hC)for(var r of hC(e))t.indexOf(r)<0&&IJ.call(e,r)&&(n[r]=e[r]);return n};const l$e={},u$e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}Content`,l$e,e),{className:i,transitionProps:a,style:s,onKeyDown:o}=r,l=o$e(r,["className","transitionProps","style","onKeyDown"]),{classes:u,cx:c}=a$e({zIndex:n.zIndex},n.stylesApi),d=p=>{var h;((h=p.target)==null?void 0:h.getAttribute("data-mantine-stop-propagation"))!=="true"&&p.key==="Escape"&&n.closeOnEscape&&n.onClose(),o==null||o(p)};return x(ku,{...G0(G0({mounted:n.opened,transition:"pop"},n.transitionProps),a),children:p=>x("div",{className:c(u.inner),children:x(FR,{active:n.opened&&n.trapFocus,children:x(Bt,{...G0({component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":n.bodyMounted?n.getBodyId():void 0,"aria-labelledby":n.titleMounted?n.getTitleId():void 0,onKeyDown:d,ref:t,className:c(u.content,i),style:G0(G0({},s),p),shadow:n.shadow},l),children:l.children})})})})});var c$e=tt((e,{padding:t})=>{const n=ke({size:t,sizes:e.spacing});return{header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:n,paddingRight:`calc(${n} - ${G(5)})`,position:"sticky",top:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,zIndex:1e3}}});const d$e=c$e;var p$e=Object.defineProperty,fC=Object.getOwnPropertySymbols,$J=Object.prototype.hasOwnProperty,TJ=Object.prototype.propertyIsEnumerable,I6=(e,t,n)=>t in e?p$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h$e=(e,t)=>{for(var n in t||(t={}))$J.call(t,n)&&I6(e,n,t[n]);if(fC)for(var n of fC(t))TJ.call(t,n)&&I6(e,n,t[n]);return e},f$e=(e,t)=>{var n={};for(var r in e)$J.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fC)for(var r of fC(e))t.indexOf(r)<0&&TJ.call(e,r)&&(n[r]=e[r]);return n};const m$e={},g$e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}Header`,m$e,e),{className:i}=r,a=f$e(r,["className"]),{classes:s,cx:o}=d$e({padding:n.padding},n.stylesApi);return x(vt,{...h$e({ref:t,className:o(s.header,i)},a)})});var y$e=tt(e=>({title:{lineHeight:1,padding:0,margin:0,fontWeight:400,fontSize:e.fontSizes.md}}));const v$e=y$e;var b$e=Object.defineProperty,mC=Object.getOwnPropertySymbols,NJ=Object.prototype.hasOwnProperty,EJ=Object.prototype.propertyIsEnumerable,$6=(e,t,n)=>t in e?b$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w$e=(e,t)=>{for(var n in t||(t={}))NJ.call(t,n)&&$6(e,n,t[n]);if(mC)for(var n of mC(t))EJ.call(t,n)&&$6(e,n,t[n]);return e},x$e=(e,t)=>{var n={};for(var r in e)NJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mC)for(var r of mC(e))t.indexOf(r)<0&&EJ.call(e,r)&&(n[r]=e[r]);return n};const _$e={},k$e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}Title`,_$e,e),{className:i}=r,a=x$e(r,["className"]),{classes:s,cx:o}=v$e(null,n.stylesApi);return I.exports.useEffect(()=>(n.setTitleMounted(!0),()=>n.setTitleMounted(!1)),[]),x(vt,{...w$e({component:"h2",id:n.getTitleId(),className:o(s.title,i),ref:t},a)})});var S$e=tt((e,{padding:t})=>({body:{padding:ke({size:t,sizes:e.spacing}),"&:not(:only-child)":{paddingTop:0}}}));const C$e=S$e;var I$e=Object.defineProperty,gC=Object.getOwnPropertySymbols,OJ=Object.prototype.hasOwnProperty,PJ=Object.prototype.propertyIsEnumerable,T6=(e,t,n)=>t in e?I$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$$e=(e,t)=>{for(var n in t||(t={}))OJ.call(t,n)&&T6(e,n,t[n]);if(gC)for(var n of gC(t))PJ.call(t,n)&&T6(e,n,t[n]);return e},T$e=(e,t)=>{var n={};for(var r in e)OJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gC)for(var r of gC(e))t.indexOf(r)<0&&PJ.call(e,r)&&(n[r]=e[r]);return n};const N$e={},E$e=I.exports.forwardRef((e,t)=>{const n=Ly(),r=Ue(`${n.__staticSelector}Body`,N$e,e),{className:i}=r,a=T$e(r,["className"]),{classes:s,cx:o}=C$e({padding:n.padding},n.stylesApi);return I.exports.useEffect(()=>(n.setBodyMounted(!0),()=>n.setBodyMounted(!1)),[]),x(vt,{...$$e({id:n.getBodyId(),className:o(s.body,i),ref:t},a)})});function O$e({children:e}){return x(Fe,{children:e})}function P$e({opened:e,transitionDuration:t}){const[n,r]=I.exports.useState(e),i=I.exports.useRef(),s=K1()?0:t;return I.exports.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):s===0?r(!1):i.current=window.setTimeout(()=>r(!1),s),()=>window.clearTimeout(i.current)),[e,s]),n}var M$e=tt(()=>({root:{}}));const A$e=M$e;var R$e=Object.defineProperty,D$e=Object.defineProperties,L$e=Object.getOwnPropertyDescriptors,yC=Object.getOwnPropertySymbols,MJ=Object.prototype.hasOwnProperty,AJ=Object.prototype.propertyIsEnumerable,N6=(e,t,n)=>t in e?R$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aE=(e,t)=>{for(var n in t||(t={}))MJ.call(t,n)&&N6(e,n,t[n]);if(yC)for(var n of yC(t))AJ.call(t,n)&&N6(e,n,t[n]);return e},E6=(e,t)=>D$e(e,L$e(t)),F$e=(e,t)=>{var n={};for(var r in e)MJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yC)for(var r of yC(e))t.indexOf(r)<0&&AJ.call(e,r)&&(n[r]=e[r]);return n};const XR={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Wu("modal"),padding:"md",size:"md",shadow:"xl"};function Fr(e){const t=Ue("ModalBase",XR,e),{opened:n,onClose:r,children:i,closeOnClickOutside:a,__staticSelector:s,transitionProps:o,withinPortal:l,portalProps:u,keepMounted:c,target:d,zIndex:p,lockScroll:h,trapFocus:m,closeOnEscape:g,returnFocus:y,padding:v,shadow:b,id:_,size:k,variant:S,classNames:$,unstyled:N,styles:P,className:D}=t,O=F$e(t,["opened","onClose","children","closeOnClickOutside","__staticSelector","transitionProps","withinPortal","portalProps","keepMounted","target","zIndex","lockScroll","trapFocus","closeOnEscape","returnFocus","padding","shadow","id","size","variant","classNames","unstyled","styles","className"]),{classes:F,cx:E}=A$e(null,{name:s,classNames:$,styles:P,unstyled:N,variant:S,size:k}),z=Vu(_),[q,K]=I.exports.useState(!1),[Z,te]=I.exports.useState(!1),V=typeof(o==null?void 0:o.duration)=="number"?o==null?void 0:o.duration:200,ee=P$e({opened:n,transitionDuration:V});return cS("keydown",Y=>{!m&&Y.key==="Escape"&&g&&r()}),uK({opened:n,shouldReturnFocus:m&&y}),x(X1,{...E6(aE({},u),{withinPortal:l,target:d}),children:x($2e,{value:{__staticSelector:s,opened:n,onClose:r,closeOnClickOutside:a,transitionProps:E6(aE({},o),{duration:V,keepMounted:c}),zIndex:p,padding:v,id:z,getTitleId:()=>`${z}-title`,getBodyId:()=>`${z}-body`,titleMounted:q,bodyMounted:Z,setTitleMounted:K,setBodyMounted:te,trapFocus:m,closeOnEscape:g,shadow:b,stylesApi:{name:s,size:k,variant:S,classNames:$,styles:P,unstyled:N}},children:x(lye,{enabled:ee&&h,children:x(vt,{...aE({className:E(F.root,D)},O),children:i})})})})}Fr.CloseButton=A2e;Fr.Overlay=r$e;Fr.Content=u$e;Fr.Header=g$e;Fr.Title=k$e;Fr.Body=E$e;Fr.NativeScrollArea=O$e;function z$e(e){return I.exports.Children.toArray(e).filter(Boolean)}const RJ={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var B$e=tt((e,{spacing:t,position:n,noWrap:r,grow:i,align:a,count:s})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:a||"center",flexWrap:r?"nowrap":"wrap",justifyContent:RJ[n],gap:ke({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/s}% - (${G(ke({size:t,sizes:e.spacing}))} - ${ke({size:t,sizes:e.spacing})} / ${s}))`:void 0,flexGrow:i?1:0}}}));const W$e=B$e;var V$e=Object.defineProperty,vC=Object.getOwnPropertySymbols,DJ=Object.prototype.hasOwnProperty,LJ=Object.prototype.propertyIsEnumerable,O6=(e,t,n)=>t in e?V$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j$e=(e,t)=>{for(var n in t||(t={}))DJ.call(t,n)&&O6(e,n,t[n]);if(vC)for(var n of vC(t))LJ.call(t,n)&&O6(e,n,t[n]);return e},H$e=(e,t)=>{var n={};for(var r in e)DJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vC)for(var r of vC(e))t.indexOf(r)<0&&LJ.call(e,r)&&(n[r]=e[r]);return n};const U$e={position:"left",spacing:"md"},me=I.exports.forwardRef((e,t)=>{const n=Ue("Group",U$e,e),{className:r,position:i,align:a,children:s,noWrap:o,grow:l,spacing:u,unstyled:c,variant:d}=n,p=H$e(n,["className","position","align","children","noWrap","grow","spacing","unstyled","variant"]),h=z$e(s),{classes:m,cx:g}=W$e({align:a,grow:l,noWrap:o,spacing:u,position:i,count:h.length},{unstyled:c,name:"Group",variant:d});return x(vt,{...j$e({className:g(m.root,r),ref:t},p),children:h})});me.displayName="@mantine/core/Group";const FJ={context:"HoverCard component was not found in the tree",children:"HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported"},[G$e,zJ]=Ay(FJ.context);var q$e=Object.defineProperty,bC=Object.getOwnPropertySymbols,BJ=Object.prototype.hasOwnProperty,WJ=Object.prototype.propertyIsEnumerable,P6=(e,t,n)=>t in e?q$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K$e=(e,t)=>{for(var n in t||(t={}))BJ.call(t,n)&&P6(e,n,t[n]);if(bC)for(var n of bC(t))WJ.call(t,n)&&P6(e,n,t[n]);return e},Z$e=(e,t)=>{var n={};for(var r in e)BJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bC)for(var r of bC(e))t.indexOf(r)<0&&WJ.call(e,r)&&(n[r]=e[r]);return n};const X$e={};function VJ(e){const t=Ue("HoverCardDropdown",X$e,e),{children:n,onMouseEnter:r,onMouseLeave:i}=t,a=Z$e(t,["children","onMouseEnter","onMouseLeave"]),s=zJ(),o=oS(r,s.openDropdown),l=oS(i,s.closeDropdown);return x(La.Dropdown,{...K$e({onMouseEnter:o,onMouseLeave:l},a),children:n})}VJ.displayName="@mantine/core/HoverCardDropdown";var J$e=Object.defineProperty,wC=Object.getOwnPropertySymbols,jJ=Object.prototype.hasOwnProperty,HJ=Object.prototype.propertyIsEnumerable,M6=(e,t,n)=>t in e?J$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y$e=(e,t)=>{for(var n in t||(t={}))jJ.call(t,n)&&M6(e,n,t[n]);if(wC)for(var n of wC(t))HJ.call(t,n)&&M6(e,n,t[n]);return e},Q$e=(e,t)=>{var n={};for(var r in e)jJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wC)for(var r of wC(e))t.indexOf(r)<0&&HJ.call(e,r)&&(n[r]=e[r]);return n};const eTe={refProp:"ref"},UJ=I.exports.forwardRef((e,t)=>{const n=Ue("HoverCardTarget",eTe,e),{children:r,refProp:i}=n,a=Q$e(n,["children","refProp"]);if(!U1(r))throw new Error(FJ.children);const s=zJ(),o=oS(r.props.onMouseEnter,s.openDropdown),l=oS(r.props.onMouseLeave,s.closeDropdown);return x(La.Target,{...Y$e({refProp:i,ref:t},a),children:I.exports.cloneElement(r,{onMouseEnter:o,onMouseLeave:l})})});UJ.displayName="@mantine/core/HoverCardTarget";function tTe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.exports.useRef(-1),a=I.exports.useRef(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(a.current)},o=()=>{s(),n===0?e():i.current=window.setTimeout(e,n)},l=()=>{s(),r===0?t():a.current=window.setTimeout(t,r)};return I.exports.useEffect(()=>s,[]),{openDropdown:o,closeDropdown:l}}var nTe=Object.defineProperty,xC=Object.getOwnPropertySymbols,GJ=Object.prototype.hasOwnProperty,qJ=Object.prototype.propertyIsEnumerable,A6=(e,t,n)=>t in e?nTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rTe=(e,t)=>{for(var n in t||(t={}))GJ.call(t,n)&&A6(e,n,t[n]);if(xC)for(var n of xC(t))qJ.call(t,n)&&A6(e,n,t[n]);return e},iTe=(e,t)=>{var n={};for(var r in e)GJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xC)for(var r of xC(e))t.indexOf(r)<0&&qJ.call(e,r)&&(n[r]=e[r]);return n};const aTe={openDelay:0,closeDelay:150,initiallyOpened:!1};function Ng(e){const t=Ue("HoverCard",aTe,e),{children:n,onOpen:r,onClose:i,openDelay:a,closeDelay:s,initiallyOpened:o}=t,l=iTe(t,["children","onOpen","onClose","openDelay","closeDelay","initiallyOpened"]),[u,{open:c,close:d}]=Tr(o,{onClose:i,onOpen:r}),{openDropdown:p,closeDropdown:h}=tTe({open:c,close:d,openDelay:a,closeDelay:s});return x(G$e,{value:{openDropdown:p,closeDropdown:h},children:x(La,{...rTe({opened:u,__staticSelector:"HoverCard"},l),children:n})})}Ng.displayName="@mantine/core/HoverCard";Ng.Target=UJ;Ng.Dropdown=VJ;var sTe=Object.defineProperty,_C=Object.getOwnPropertySymbols,KJ=Object.prototype.hasOwnProperty,ZJ=Object.prototype.propertyIsEnumerable,R6=(e,t,n)=>t in e?sTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D6=(e,t)=>{for(var n in t||(t={}))KJ.call(t,n)&&R6(e,n,t[n]);if(_C)for(var n of _C(t))ZJ.call(t,n)&&R6(e,n,t[n]);return e},oTe=(e,t)=>{var n={};for(var r in e)KJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_C)for(var r of _C(e))t.indexOf(r)<0&&ZJ.call(e,r)&&(n[r]=e[r]);return n};function lTe(e){const t=e,{width:n,height:r,style:i}=t,a=oTe(t,["width","height","style"]);return x("svg",{...D6({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:D6({width:n,height:r},i)},a),children:x("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var uTe=Object.defineProperty,cTe=Object.defineProperties,dTe=Object.getOwnPropertyDescriptors,L6=Object.getOwnPropertySymbols,pTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,F6=(e,t,n)=>t in e?uTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,z6=(e,t)=>{for(var n in t||(t={}))pTe.call(t,n)&&F6(e,n,t[n]);if(L6)for(var n of L6(t))hTe.call(t,n)&&F6(e,n,t[n]);return e},B6=(e,t)=>cTe(e,dTe(t)),fTe=tt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:B6(z6({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.radius(t)}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:B6(z6({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.radius(t)})}));const mTe=fTe;var gTe=Object.defineProperty,yTe=Object.defineProperties,vTe=Object.getOwnPropertyDescriptors,kC=Object.getOwnPropertySymbols,XJ=Object.prototype.hasOwnProperty,JJ=Object.prototype.propertyIsEnumerable,W6=(e,t,n)=>t in e?gTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q0=(e,t)=>{for(var n in t||(t={}))XJ.call(t,n)&&W6(e,n,t[n]);if(kC)for(var n of kC(t))JJ.call(t,n)&&W6(e,n,t[n]);return e},bTe=(e,t)=>yTe(e,vTe(t)),wTe=(e,t)=>{var n={};for(var r in e)XJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kC)for(var r of kC(e))t.indexOf(r)<0&&JJ.call(e,r)&&(n[r]=e[r]);return n};const xTe={fit:"cover",width:"100%",height:"auto",radius:0},ws=I.exports.forwardRef((e,t)=>{const n=Ue("Image",xTe,e),{className:r,alt:i,src:a,fit:s,width:o,height:l,radius:u,imageProps:c,withPlaceholder:d,placeholder:p,imageRef:h,classNames:m,styles:g,caption:y,unstyled:v,style:b,variant:_}=n,k=wTe(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style","variant"]),{classes:S,cx:$}=mTe({radius:u},{classNames:m,styles:g,unstyled:v,name:"Image",variant:_}),[N,P]=I.exports.useState(!a),D=d&&N;return Mi(()=>{P(!a)},[a]),x(vt,{...q0({className:$(S.root,r),style:q0({width:G(o)},b),ref:t},k),children:B("figure",{className:S.figure,children:[B("div",{className:S.imageWrapper,children:[x("img",{...bTe(q0({src:a,alt:i,ref:h},c),{className:$(S.image,c==null?void 0:c.className),onError:O=>{P(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(O)},style:q0(q0({objectFit:s,width:G(o),height:G(l)},D&&{overflow:"hidden"}),c==null?void 0:c.style)})}),D&&x("div",{className:S.placeholder,title:i,children:p||x("div",{children:x(lTe,{width:G(40),height:G(40)})})})]}),!!y&&x(Te,{component:"figcaption",size:"sm",align:"center",className:S.caption,children:y})]})})});ws.displayName="@mantine/core/Image";function JR(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var _Te=I.exports.useLayoutEffect,kTe=function(t){var n=I.exports.useRef(t);return _Te(function(){n.current=t}),n},V6=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},STe=function(t,n){var r=I.exports.useRef();return I.exports.useCallback(function(i){t.current=i,r.current&&V6(r.current,null),r.current=n,n&&V6(n,i)},[n])},j6={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},H6=function(t){Object.keys(j6).forEach(function(n){t.style.setProperty(n,j6[n],"important")})},Cs=null,CTe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function ITe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Cs||(Cs=document.createElement("textarea"),Cs.setAttribute("tabindex","-1"),Cs.setAttribute("aria-hidden","true"),H6(Cs)),Cs.parentNode===null&&document.body.appendChild(Cs);var i=e.paddingSize,a=e.borderSize,s=e.sizingStyle,o=s.boxSizing;Object.keys(s).forEach(function(p){var h=p;Cs.style[h]=s[h]}),H6(Cs),Cs.value=t;var l=CTe(Cs,e);Cs.value="x";var u=Cs.scrollHeight-i,c=u*n;o==="border-box"&&(c=c+i+a),l=Math.max(c,l);var d=u*r;return o==="border-box"&&(d=d+i+a),l=Math.min(d,l),[l,u]}var U6=function(){},$Te=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},TTe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],NTe=!!document.documentElement.currentStyle,ETe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=$Te(TTe,n),i=r.boxSizing;if(i==="")return null;NTe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:s}},OTe=function(t){var n=kTe(t);I.exports.useLayoutEffect(function(){var r=function(a){n.current(a)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},PTe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,a=t.minRows,s=t.onChange,o=s===void 0?U6:s,l=t.onHeightChange,u=l===void 0?U6:l,c=JR(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),d=c.value!==void 0,p=I.exports.useRef(null),h=STe(p,n),m=I.exports.useRef(0),g=I.exports.useRef(),y=function(){var _=p.current,k=r&&g.current?g.current:ETe(_);if(!!k){g.current=k;var S=ITe(k,_.value||_.placeholder||"x",a,i),$=S[0],N=S[1];m.current!==$&&(m.current=$,_.style.setProperty("height",$+"px","important"),u($,{rowHeight:N}))}},v=function(_){d||y(),o(_)};return I.exports.useLayoutEffect(y),OTe(y),I.exports.createElement("textarea",Zn({},c,{onChange:v,ref:h}))},MTe=I.exports.forwardRef(PTe);const ATe=MTe;var RTe=tt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const DTe=RTe;var LTe=Object.defineProperty,FTe=Object.defineProperties,zTe=Object.getOwnPropertyDescriptors,SC=Object.getOwnPropertySymbols,YJ=Object.prototype.hasOwnProperty,QJ=Object.prototype.propertyIsEnumerable,G6=(e,t,n)=>t in e?LTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bm=(e,t)=>{for(var n in t||(t={}))YJ.call(t,n)&&G6(e,n,t[n]);if(SC)for(var n of SC(t))QJ.call(t,n)&&G6(e,n,t[n]);return e},sE=(e,t)=>FTe(e,zTe(t)),BTe=(e,t)=>{var n={};for(var r in e)YJ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SC)for(var r of SC(e))t.indexOf(r)<0&&QJ.call(e,r)&&(n[r]=e[r]);return n};const WTe={autosize:!1,size:"sm",__staticSelector:"Textarea"},xs=I.exports.forwardRef((e,t)=>{const n=Ue("Textarea",WTe,e),{autosize:r,maxRows:i,minRows:a,label:s,error:o,description:l,id:u,className:c,required:d,style:p,wrapperProps:h,classNames:m,styles:g,size:y,__staticSelector:v,sx:b,errorProps:_,descriptionProps:k,labelProps:S,inputWrapperOrder:$,inputContainer:N,unstyled:P,withAsterisk:D,variant:O}=n,F=BTe(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk","variant"]),E=Vu(u),{classes:z,cx:q}=DTe(),{systemStyles:K,rest:Z}=Td(F),te=Bm({required:d,ref:t,error:o,id:E,classNames:sE(Bm({},m),{input:q(z.input,m==null?void 0:m.input)}),styles:g,__staticSelector:v,size:y,multiline:!0,unstyled:P,variant:O},Z);return x(Rs.Wrapper,{...Bm(Bm({label:s,error:o,id:E,description:l,required:d,style:p,className:c,classNames:m,styles:g,size:y,__staticSelector:v,sx:b,errorProps:_,labelProps:S,descriptionProps:k,inputContainer:N,inputWrapperOrder:$,unstyled:P,withAsterisk:D,variant:O},K),h),children:r?x(Rs,{...sE(Bm({},te),{component:ATe,maxRows:i,minRows:a})}):x(Rs,{...sE(Bm({},te),{component:"textarea",rows:a})})})});xs.displayName="@mantine/core/Textarea";const[VTe,jTe]=Ay("Modal component was not found in tree"),HTe={xs:G(320),sm:G(380),md:G(440),lg:G(620),xl:G(780)};var UTe=tt((e,{yOffset:t,xOffset:n,centered:r,fullScreen:i},{size:a})=>({content:{flex:i?"0 0 100%":`0 0 ${ke({size:a,sizes:HTe})}`,maxWidth:"100%",maxHeight:i?void 0:`calc(100dvh - (${G(t)} * 2))`,height:i?"100vh":void 0,borderRadius:i?0:void 0,overflowY:"auto"},inner:{paddingTop:i?0:t,paddingBottom:i?0:t,paddingLeft:i?0:n,paddingRight:i?0:n,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"}}));const GTe=UTe;var qTe=Object.defineProperty,KTe=Object.defineProperties,ZTe=Object.getOwnPropertyDescriptors,CC=Object.getOwnPropertySymbols,eY=Object.prototype.hasOwnProperty,tY=Object.prototype.propertyIsEnumerable,q6=(e,t,n)=>t in e?qTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kP=(e,t)=>{for(var n in t||(t={}))eY.call(t,n)&&q6(e,n,t[n]);if(CC)for(var n of CC(t))tY.call(t,n)&&q6(e,n,t[n]);return e},nY=(e,t)=>KTe(e,ZTe(t)),XTe=(e,t)=>{var n={};for(var r in e)eY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CC)for(var r of CC(e))t.indexOf(r)<0&&tY.call(e,r)&&(n[r]=e[r]);return n};const JTe=nY(kP({},XR),{yOffset:"5dvh",xOffset:"5vw"});function rY(e){const t=Ue("ModalRoot",JTe,e),{classNames:n,variant:r,size:i,yOffset:a,xOffset:s,scrollAreaComponent:o,radius:l,centered:u,fullScreen:c}=t,d=XTe(t,["classNames","variant","size","yOffset","xOffset","scrollAreaComponent","radius","centered","fullScreen"]),{classes:p,cx:h}=GTe({yOffset:a,xOffset:s,centered:u,fullScreen:c},{name:"Modal",variant:r,size:i});return x(VTe,{value:{yOffset:a,scrollAreaComponent:o,radius:l},children:x(Fr,{...kP({__staticSelector:"Modal",size:i,variant:r,classNames:nY(kP({},n),{content:h(p.content,n==null?void 0:n.content),inner:h(p.inner,n==null?void 0:n.inner)})},d)})})}var YTe=Object.defineProperty,IC=Object.getOwnPropertySymbols,iY=Object.prototype.hasOwnProperty,aY=Object.prototype.propertyIsEnumerable,K6=(e,t,n)=>t in e?YTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QTe=(e,t)=>{for(var n in t||(t={}))iY.call(t,n)&&K6(e,n,t[n]);if(IC)for(var n of IC(t))aY.call(t,n)&&K6(e,n,t[n]);return e},eNe=(e,t)=>{var n={};for(var r in e)iY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IC)for(var r of IC(e))t.indexOf(r)<0&&aY.call(e,r)&&(n[r]=e[r]);return n};const tNe={shadow:"xl"},sY=I.exports.forwardRef((e,t)=>{const n=Ue("ModalContent",tNe,e),{children:r,scrollAreaComponent:i}=n,a=eNe(n,["children","scrollAreaComponent"]),s=jTe(),o=i||s.scrollAreaComponent||Fr.NativeScrollArea;return x(Fr.Content,{...QTe({ref:t,radius:s.radius},a),children:x(o,{style:{maxHeight:`calc(100dvh - (${G(s.yOffset)} * 2))`},children:r})})});var nNe=Object.defineProperty,rNe=Object.defineProperties,iNe=Object.getOwnPropertyDescriptors,$C=Object.getOwnPropertySymbols,oY=Object.prototype.hasOwnProperty,lY=Object.prototype.propertyIsEnumerable,Z6=(e,t,n)=>t in e?nNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gk=(e,t)=>{for(var n in t||(t={}))oY.call(t,n)&&Z6(e,n,t[n]);if($C)for(var n of $C(t))lY.call(t,n)&&Z6(e,n,t[n]);return e},aNe=(e,t)=>rNe(e,iNe(t)),sNe=(e,t)=>{var n={};for(var r in e)oY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$C)for(var r of $C(e))t.indexOf(r)<0&&lY.call(e,r)&&(n[r]=e[r]);return n};const oNe=aNe(gk({},XR),{transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0});function nr(e){const t=Ue("Modal",oNe,e),{title:n,withOverlay:r,overlayProps:i,withCloseButton:a,closeButtonProps:s,children:o}=t,l=sNe(t,["title","withOverlay","overlayProps","withCloseButton","closeButtonProps","children"]),u=!!n||a;return B(rY,{...gk({},l),children:[r&&x(Fr.Overlay,{...gk({},i)}),B(sY,{children:[u&&B(Fr.Header,{children:[n&&x(Fr.Title,{children:n}),a&&x(Fr.CloseButton,{...gk({},s)})]}),x(Fr.Body,{children:o})]})]})}nr.Root=rY;nr.CloseButton=Fr.CloseButton;nr.Overlay=Fr.Overlay;nr.Content=sY;nr.Header=Fr.Header;nr.Title=Fr.Title;nr.Body=Fr.Body;nr.NativeScrollArea=Fr.NativeScrollArea;const uY={xs:G(16),sm:G(22),md:G(26),lg:G(30),xl:G(36)},lNe={xs:G(10),sm:G(12),md:G(14),lg:G(16),xl:G(18)};var uNe=tt((e,{disabled:t,radius:n,readOnly:r},{size:i,variant:a})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:t?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:a==="filled"?e.white:e.colors.gray[1],color:t?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:ke({size:i,sizes:uY}),paddingLeft:`calc(${ke({size:i,sizes:e.spacing})} / 1.5)`,paddingRight:t||r?ke({size:i,sizes:e.spacing}):0,fontWeight:500,fontSize:ke({size:i,sizes:lNe}),borderRadius:ke({size:n,sizes:e.radius}),cursor:t?"not-allowed":"default",userSelect:"none",maxWidth:`calc(100% - ${G(10)})`},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:`calc(${ke({size:i,sizes:e.spacing})} / 6)`},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const cNe=uNe;var dNe=Object.defineProperty,TC=Object.getOwnPropertySymbols,cY=Object.prototype.hasOwnProperty,dY=Object.prototype.propertyIsEnumerable,X6=(e,t,n)=>t in e?dNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pNe=(e,t)=>{for(var n in t||(t={}))cY.call(t,n)&&X6(e,n,t[n]);if(TC)for(var n of TC(t))dY.call(t,n)&&X6(e,n,t[n]);return e},hNe=(e,t)=>{var n={};for(var r in e)cY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TC)for(var r of TC(e))t.indexOf(r)<0&&dY.call(e,r)&&(n[r]=e[r]);return n};const fNe={xs:16,sm:22,md:24,lg:26,xl:30};function pY(e){var t=e,{label:n,classNames:r,styles:i,className:a,onRemove:s,disabled:o,readOnly:l,size:u,radius:c="sm",variant:d,unstyled:p}=t,h=hNe(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant","unstyled"]);const{classes:m,cx:g}=cNe({disabled:o,readOnly:l,radius:c},{name:"MultiSelect",classNames:r,styles:i,unstyled:p,size:u,variant:d});return B("div",{...pNe({className:g(m.defaultValue,a)},h),children:[x("span",{className:m.defaultValueLabel,children:n}),!o&&!l&&x(q2,{"aria-hidden":!0,onMouseDown:s,size:fNe[u],radius:2,color:"blue",variant:"transparent",iconSize:"70%",className:m.defaultValueRemove,tabIndex:-1,unstyled:p})]})}pY.displayName="@mantine/core/MultiSelect/DefaultValue";function mNe({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:a,disableSelectedItemFiltering:s}){if(!t&&a.length===0)return e;if(!t){const l=[];for(let u=0;u<e.length;u+=1)(!!s||!a.some(c=>c===e[u].value&&!e[u].disabled))&&l.push(e[u]);return l}const o=[];for(let l=0;l<e.length&&(i(r,!s&&a.some(u=>u===e[l].value&&!e[l].disabled),e[l])&&o.push(e[l]),!(o.length>=n));l+=1);return o}var gNe=Object.defineProperty,NC=Object.getOwnPropertySymbols,hY=Object.prototype.hasOwnProperty,fY=Object.prototype.propertyIsEnumerable,J6=(e,t,n)=>t in e?gNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y6=(e,t)=>{for(var n in t||(t={}))hY.call(t,n)&&J6(e,n,t[n]);if(NC)for(var n of NC(t))fY.call(t,n)&&J6(e,n,t[n]);return e},yNe=(e,t)=>{var n={};for(var r in e)hY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NC)for(var r of NC(e))t.indexOf(r)<0&&fY.call(e,r)&&(n[r]=e[r]);return n};const vNe={xs:G(14),sm:G(18),md:G(20),lg:G(24),xl:G(28)};function bNe(e){var t=e,{size:n,error:r,style:i}=t,a=yNe(t,["size","error","style"]);const s=Za(),o=ke({size:n,sizes:vNe});return x("svg",{...Y6({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Y6({color:r?s.colors.red[6]:s.colors.gray[6],width:o,height:o},i),"data-chevron":!0},a),children:x("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var wNe=Object.defineProperty,xNe=Object.defineProperties,_Ne=Object.getOwnPropertyDescriptors,Q6=Object.getOwnPropertySymbols,kNe=Object.prototype.hasOwnProperty,SNe=Object.prototype.propertyIsEnumerable,ej=(e,t,n)=>t in e?wNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CNe=(e,t)=>{for(var n in t||(t={}))kNe.call(t,n)&&ej(e,n,t[n]);if(Q6)for(var n of Q6(t))SNe.call(t,n)&&ej(e,n,t[n]);return e},INe=(e,t)=>xNe(e,_Ne(t));function mY({shouldClear:e,clearButtonProps:t,onClear:n,size:r,error:i}){return e?x(q2,{...INe(CNe({},t),{variant:"transparent",onClick:n,size:r,onMouseDown:a=>a.preventDefault()})}):x(bNe,{error:i,size:r})}mY.displayName="@mantine/core/SelectRightSection";var $Ne=Object.defineProperty,TNe=Object.defineProperties,NNe=Object.getOwnPropertyDescriptors,EC=Object.getOwnPropertySymbols,gY=Object.prototype.hasOwnProperty,yY=Object.prototype.propertyIsEnumerable,tj=(e,t,n)=>t in e?$Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oE=(e,t)=>{for(var n in t||(t={}))gY.call(t,n)&&tj(e,n,t[n]);if(EC)for(var n of EC(t))yY.call(t,n)&&tj(e,n,t[n]);return e},nj=(e,t)=>TNe(e,NNe(t)),ENe=(e,t)=>{var n={};for(var r in e)gY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EC)for(var r of EC(e))t.indexOf(r)<0&&yY.call(e,r)&&(n[r]=e[r]);return n};function vY(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:a}=t,s=ENe(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const o=typeof n=="function"?n(a):n;return{rightSection:!s.readOnly&&!(s.disabled&&s.shouldClear)&&x(mY,{...oE({},s)}),styles:nj(oE({},o),{rightSection:nj(oE({},o==null?void 0:o.rightSection),{pointerEvents:s.shouldClear?void 0:"none"})})}}var ONe=Object.defineProperty,PNe=Object.defineProperties,MNe=Object.getOwnPropertyDescriptors,rj=Object.getOwnPropertySymbols,ANe=Object.prototype.hasOwnProperty,RNe=Object.prototype.propertyIsEnumerable,ij=(e,t,n)=>t in e?ONe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DNe=(e,t)=>{for(var n in t||(t={}))ANe.call(t,n)&&ij(e,n,t[n]);if(rj)for(var n of rj(t))RNe.call(t,n)&&ij(e,n,t[n]);return e},LNe=(e,t)=>PNe(e,MNe(t)),FNe=tt((e,{invalid:t},{size:n})=>({wrapper:{position:"relative","&:has(input:disabled)":{cursor:"not-allowed",pointerEvents:"none","& .mantine-MultiSelect-input":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,"&::placeholder":{color:e.colors.dark[2]}},"& .mantine-MultiSelect-defaultValue":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3],color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]}}},values:{minHeight:`calc(${ke({size:n,sizes:Gi})} - ${G(2)})`,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(-${e.spacing.xs} / 2)`,boxSizing:"border-box","&[data-clearable]":{marginRight:ke({size:n,sizes:Gi})}},value:{margin:`calc(${e.spacing.xs} / 2 - ${G(2)}) calc(${e.spacing.xs} / 2)`},searchInput:LNe(DNe({},e.fn.fontStyles()),{flex:1,minWidth:G(60),backgroundColor:"transparent",border:0,outline:0,fontSize:ke({size:n,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs} / 2)`,appearance:"none",color:"inherit",maxHeight:ke({size:n,sizes:uY}),"&::placeholder":{opacity:1,color:t?e.colors.red[e.fn.primaryShade()]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed",pointerEvents:"none"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{flex:0,width:0,minWidth:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed",pointerEvents:"none"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed",pointerEvents:"none"}}}));const zNe=FNe;var BNe=Object.defineProperty,WNe=Object.defineProperties,VNe=Object.getOwnPropertyDescriptors,OC=Object.getOwnPropertySymbols,bY=Object.prototype.hasOwnProperty,wY=Object.prototype.propertyIsEnumerable,aj=(e,t,n)=>t in e?BNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wm=(e,t)=>{for(var n in t||(t={}))bY.call(t,n)&&aj(e,n,t[n]);if(OC)for(var n of OC(t))wY.call(t,n)&&aj(e,n,t[n]);return e},sj=(e,t)=>WNe(e,VNe(t)),jNe=(e,t)=>{var n={};for(var r in e)bY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OC)for(var r of OC(e))t.indexOf(r)<0&&wY.call(e,r)&&(n[r]=e[r]);return n};function HNe(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function UNe(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function oj(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=t.map(r=>typeof r=="object"?r.value:r);return e.filter(r=>n.includes(r))}const GNe={size:"sm",valueComponent:pY,itemComponent:IR,transitionProps:{transition:"fade",duration:0},maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:HNe,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:UNe,switchDirectionOnFlip:!1,zIndex:Wu("popover"),selectOnBlur:!1,positionDependencies:[],dropdownPosition:"flip"},Ru=I.exports.forwardRef((e,t)=>{const n=Ue("MultiSelect",GNe,e),{className:r,style:i,required:a,label:s,description:o,size:l,error:u,classNames:c,styles:d,wrapperProps:p,value:h,defaultValue:m,data:g,onChange:y,valueComponent:v,itemComponent:b,id:_,transitionProps:k,maxDropdownHeight:S,shadow:$,nothingFound:N,onFocus:P,onBlur:D,searchable:O,placeholder:F,filter:E,limit:z,clearSearchOnChange:q,clearable:K,clearSearchOnBlur:Z,variant:te,onSearchChange:V,searchValue:ee,disabled:Y,initiallyOpened:Q,radius:oe,icon:pe,rightSection:he,rightSectionWidth:ge,creatable:_e,getCreateLabel:Ne,shouldCreate:Se,onCreate:Re,sx:Ke,dropdownComponent:it,onDropdownClose:Xe,onDropdownOpen:at,maxSelectedValues:He,withinPortal:_t,portalProps:mt,switchDirectionOnFlip:ht,zIndex:Lt,selectOnBlur:Un,name:kt,dropdownPosition:bn,errorProps:tn,labelProps:Mt,descriptionProps:sr,form:Rn,positionDependencies:wn,onKeyDown:un,unstyled:cn,inputContainer:Er,inputWrapperOrder:ki,readOnly:Qn,withAsterisk:Ta,clearButtonProps:yn,hoverOnSearchChange:Ge,disableSelectedItemFiltering:rt}=n,Si=jNe(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transitionProps","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","portalProps","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk","clearButtonProps","hoverOnSearchChange","disableSelectedItemFiltering"]),{classes:Dn,cx:qn,theme:ai}=zNe({invalid:!!u},{name:"MultiSelect",classNames:c,styles:d,unstyled:cn,size:l,variant:te}),{systemStyles:Ur,rest:hr}=Td(Si),wr=I.exports.useRef(),si=I.exports.useRef({}),xn=Vu(_),[_n,ve]=I.exports.useState(Q),[Ie,Je]=I.exports.useState(-1),[J,At]=I.exports.useState("column"),[Ft,St]=Zo({value:ee,defaultValue:"",finalValue:void 0,onChange:V}),[bt,Jt]=I.exports.useState(!1),{scrollIntoView:Be,targetRef:oi,scrollableRef:ko}=gK({duration:0,offset:5,cancelable:!1,isList:!0}),Ss=_e&&typeof Ne=="function";let nt=null;const Nt=g.map(yt=>typeof yt=="string"?{label:yt,value:yt}:yt),Ln=Mq({data:Nt}),[Et,So]=Zo({value:oj(h,g),defaultValue:oj(m,g),finalValue:[],onChange:y}),Bi=I.exports.useRef(!!He&&He<Et.length),Sm=yt=>{if(!Qn){const kn=Et.filter(Gr=>Gr!==yt);So(kn),!!He&&kn.length<He&&(Bi.current=!1)}},g0=yt=>{St(yt.currentTarget.value),!Y&&!Bi.current&&O&&ve(!0)},y0=yt=>{typeof P=="function"&&P(yt),!Y&&!Bi.current&&O&&ve(!0)},er=mNe({data:Ln,searchable:O,searchValue:Ft,limit:z,filter:E,value:Et,disableSelectedItemFiltering:rt});Ss&&Se(Ft,Ln)&&(nt=Ne(Ft),er.push({label:Ft,value:Ft,creatable:!0}));const Co=Math.min(Ie,er.length-1),eu=(yt,kn,Gr)=>{let Wt=yt;for(;Gr(Wt);)if(Wt=kn(Wt),!er[Wt].disabled)return Wt;return yt};Mi(()=>{Je(Ge&&Ft?0:-1)},[Ft,Ge]),Mi(()=>{!Y&&Et.length>g.length&&ve(!1),!!He&&Et.length<He&&(Bi.current=!1),!!He&&Et.length>=He&&(Bi.current=!0,ve(!1))},[Et]);const tu=yt=>{if(!Qn)if(q&&St(""),Et.includes(yt.value))Sm(yt.value);else{if(yt.creatable&&typeof Re=="function"){const kn=Re(yt.value);typeof kn<"u"&&kn!==null&&So(typeof kn=="string"?[...Et,kn]:[...Et,kn.value])}else So([...Et,yt.value]);Et.length===He-1&&(Bi.current=!0,ve(!1)),er.length===1&&ve(!1)}},v0=yt=>{typeof D=="function"&&D(yt),Un&&er[Co]&&_n&&tu(er[Co]),Z&&St(""),ve(!1)},Yd=yt=>{if(bt||(un==null||un(yt),Qn)||yt.key!=="Backspace"&&!!He&&Bi.current)return;const kn=J==="column",Gr=()=>{Je(fn=>{var Vi;const Na=eu(fn,ia=>ia+1,ia=>ia<er.length-1);return _n&&(oi.current=si.current[(Vi=er[Na])==null?void 0:Vi.value],Be({alignment:kn?"end":"start"})),Na})},Wt=()=>{Je(fn=>{var Vi;const Na=eu(fn,ia=>ia-1,ia=>ia>0);return _n&&(oi.current=si.current[(Vi=er[Na])==null?void 0:Vi.value],Be({alignment:kn?"start":"end"})),Na})};switch(yt.key){case"ArrowUp":{yt.preventDefault(),ve(!0),kn?Wt():Gr();break}case"ArrowDown":{yt.preventDefault(),ve(!0),kn?Gr():Wt();break}case"Enter":{yt.preventDefault(),er[Co]&&_n?tu(er[Co]):ve(!0);break}case" ":{O||(yt.preventDefault(),er[Co]&&_n?tu(er[Co]):ve(!0));break}case"Backspace":{Et.length>0&&Ft.length===0&&(So(Et.slice(0,-1)),ve(!0),He&&(Bi.current=!1));break}case"Home":{if(!O){yt.preventDefault(),_n||ve(!0);const fn=er.findIndex(Vi=>!Vi.disabled);Je(fn),Be({alignment:kn?"end":"start"})}break}case"End":{if(!O){yt.preventDefault(),_n||ve(!0);const fn=er.map(Vi=>!!Vi.disabled).lastIndexOf(!1);Je(fn),Be({alignment:kn?"end":"start"})}break}case"Escape":ve(!1)}},b0=Et.map(yt=>{let kn=Ln.find(Gr=>Gr.value===yt&&!Gr.disabled);return!kn&&Ss&&(kn={value:yt,label:yt}),kn}).filter(yt=>!!yt).map((yt,kn)=>x(v,{...sj(Wm({},yt),{variant:te,disabled:Y,className:Dn.value,readOnly:Qn,onRemove:Gr=>{Gr.preventDefault(),Gr.stopPropagation(),Sm(yt.value)},key:yt.value,size:l,styles:d,classNames:c,radius:oe,index:kn})})),w0=yt=>Et.includes(yt),Qd=()=>{var yt;St(""),So([]),(yt=wr.current)==null||yt.focus(),He&&(Bi.current=!1)},Wi=!Qn&&(er.length>0?_n:_n&&!!N);return Mi(()=>{const yt=Wi?at:Xe;typeof yt=="function"&&yt()},[Wi]),x(Rs.Wrapper,{...Wm(Wm({required:a,id:xn,label:s,error:u,description:o,size:l,className:r,style:i,classNames:c,styles:d,__staticSelector:"MultiSelect",sx:Ke,errorProps:tn,descriptionProps:sr,labelProps:Mt,inputContainer:Er,inputWrapperOrder:ki,unstyled:cn,withAsterisk:Ta,variant:te},Ur),p),children:B(Yc,{opened:Wi,transitionProps:k,shadow:"sm",withinPortal:_t,portalProps:mt,__staticSelector:"MultiSelect",onDirectionChange:At,switchDirectionOnFlip:ht,zIndex:Lt,dropdownPosition:bn,positionDependencies:[...wn,Ft],classNames:c,styles:d,unstyled:cn,variant:te,children:[x(Yc.Target,{children:B("div",{className:Dn.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":_n&&Wi?`${xn}-items`:null,"aria-controls":xn,"aria-expanded":_n,onMouseLeave:()=>Je(-1),tabIndex:-1,children:[x("input",{type:"hidden",name:kt,value:Et.join(","),form:Rn,disabled:Y}),x(Rs,{...Wm({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:l,variant:te,disabled:Y,error:u,required:a,radius:oe,icon:pe,unstyled:cn,onMouseDown:yt=>{var kn;yt.preventDefault(),!Y&&!Bi.current&&ve(!_n),(kn=wr.current)==null||kn.focus()},classNames:sj(Wm({},c),{input:qn({[Dn.input]:!O},c==null?void 0:c.input)})},vY({theme:ai,rightSection:he,rightSectionWidth:ge,styles:d,size:l,shouldClear:K&&Et.length>0,onClear:Qd,error:u,disabled:Y,clearButtonProps:yn,readOnly:Qn})),children:B("div",{className:Dn.values,"data-clearable":K||void 0,children:[b0,x("input",{...Wm({ref:ju(t,wr),type:"search",id:xn,className:qn(Dn.searchInput,{[Dn.searchInputPointer]:!O,[Dn.searchInputInputHidden]:!_n&&Et.length>0||!O&&Et.length>0,[Dn.searchInputEmpty]:Et.length===0}),onKeyDown:Yd,value:Ft,onChange:g0,onFocus:y0,onBlur:v0,readOnly:!O||Bi.current||Qn,placeholder:Et.length===0?F:void 0,disabled:Y,"data-mantine-stop-propagation":_n,autoComplete:"off",onCompositionStart:()=>Jt(!0),onCompositionEnd:()=>Jt(!1)},hr)})]})})]})}),x(Yc.Dropdown,{component:it||J2,maxHeight:S,direction:J,id:xn,innerRef:ko,__staticSelector:"MultiSelect",classNames:c,styles:d,children:x(CR,{data:er,hovered:Co,classNames:c,styles:d,uuid:xn,__staticSelector:"MultiSelect",onItemHover:Je,onItemSelect:tu,itemsRefs:si,itemComponent:b,size:l,nothingFound:N,isItemSelected:w0,creatable:_e&&!!nt,createLabel:nt,unstyled:cn,variant:te})})]})})});Ru.displayName="@mantine/core/MultiSelect";var qNe=tt((e,{color:t,radius:n,withTitle:r})=>{const i=e.fn.radius(n),a=e.fn.variant({variant:"filled",color:t});return{closeButton:e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]}),icon:{boxSizing:"border-box",marginRight:e.spacing.md,width:G(28),height:G(28),borderRadius:G(28),display:"flex",flex:"none",alignItems:"center",justifyContent:"center",backgroundColor:a.background,color:e.white},root:{overflow:"hidden",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",paddingLeft:G(22),paddingRight:e.spacing.xs,paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs,borderRadius:i,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,boxShadow:e.shadows.lg,"&::before":{content:'""',display:"block",position:"absolute",width:G(6),top:i,bottom:i,left:G(4),borderRadius:i,backgroundColor:a.background},"&[data-with-icon]":{paddingLeft:e.spacing.xs,"&::before":{display:"none"}},"&[data-with-border]":{border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`}},body:{flex:1,overflow:"hidden",marginRight:e.spacing.xs},loader:{marginRight:e.spacing.md},title:{lineHeight:1.4,marginBottom:G(2),overflow:"hidden",textOverflow:"ellipsis",color:e.colorScheme==="dark"?e.white:e.colors.gray[9]},description:{color:r?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis"}}});const KNe=qNe;var ZNe=Object.defineProperty,XNe=Object.defineProperties,JNe=Object.getOwnPropertyDescriptors,PC=Object.getOwnPropertySymbols,xY=Object.prototype.hasOwnProperty,_Y=Object.prototype.propertyIsEnumerable,lj=(e,t,n)=>t in e?ZNe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uj=(e,t)=>{for(var n in t||(t={}))xY.call(t,n)&&lj(e,n,t[n]);if(PC)for(var n of PC(t))_Y.call(t,n)&&lj(e,n,t[n]);return e},YNe=(e,t)=>XNe(e,JNe(t)),QNe=(e,t)=>{var n={};for(var r in e)xY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PC)for(var r of PC(e))t.indexOf(r)<0&&_Y.call(e,r)&&(n[r]=e[r]);return n};const eEe={withCloseButton:!0},kY=I.exports.forwardRef((e,t)=>{const n=Ue("Notification",eEe,e),{className:r,color:i,radius:a,loading:s,withCloseButton:o,withBorder:l,title:u,icon:c,children:d,onClose:p,closeButtonProps:h,classNames:m,styles:g,unstyled:y,variant:v}=n,b=QNe(n,["className","color","radius","loading","withCloseButton","withBorder","title","icon","children","onClose","closeButtonProps","classNames","styles","unstyled","variant"]),{classes:_,cx:k}=KNe({color:i,radius:a,withTitle:!!u},{name:"Notification",classNames:m,styles:g,unstyled:y,variant:v});return B(vt,{...uj({className:k(_.root,r),"data-with-icon":!!c||s||void 0,"data-with-border":l||void 0,role:"alert",ref:t},b),children:[c&&!s&&x("div",{className:_.icon,children:c}),s&&x(G2,{size:28,color:i,className:_.loader}),B("div",{className:_.body,children:[u&&x(Te,{className:_.title,size:"sm",weight:500,children:u}),x(Te,{color:"dimmed",className:_.description,size:"sm",children:d})]}),o&&x(q2,{...YNe(uj({iconSize:16,color:"gray"},h),{onClick:p,className:_.closeButton})})]})});kY.displayName="@mantine/core/Notification";const tEe=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function cj({direction:e,size:t}){return x("svg",{style:{width:G(t),height:G(t),transform:e==="up"?"rotate(180deg)":void 0},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:x("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const SY={xs:G(20),sm:G(24),md:G(30),lg:G(34),xl:G(36)};var nEe=tt((e,{radius:t},{size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:`calc(100% - ${G(2)})`,margin:G(1),overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:ke({size:n,sizes:SY}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:G(1),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const rEe=nEe;var iEe=Object.defineProperty,aEe=Object.defineProperties,sEe=Object.getOwnPropertyDescriptors,MC=Object.getOwnPropertySymbols,CY=Object.prototype.hasOwnProperty,IY=Object.prototype.propertyIsEnumerable,dj=(e,t,n)=>t in e?iEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lE=(e,t)=>{for(var n in t||(t={}))CY.call(t,n)&&dj(e,n,t[n]);if(MC)for(var n of MC(t))IY.call(t,n)&&dj(e,n,t[n]);return e},oEe=(e,t)=>aEe(e,sEe(t)),lEe=(e,t)=>{var n={};for(var r in e)CY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MC)for(var r of MC(e))t.indexOf(r)<0&&IY.call(e,r)&&(n[r]=e[r]);return n};const uEe={type:"text",size:"sm",__staticSelector:"TextInput"},Ze=I.exports.forwardRef((e,t)=>{const n=rX("TextInput",uEe,e),{inputProps:r,wrapperProps:i}=n,a=lEe(n,["inputProps","wrapperProps"]);return x(Rs.Wrapper,{...lE({},i),children:x(Rs,{...oEe(lE(lE({},r),a),{ref:t})})})});Ze.displayName="@mantine/core/TextInput";var cEe=Object.defineProperty,dEe=Object.defineProperties,pEe=Object.getOwnPropertyDescriptors,AC=Object.getOwnPropertySymbols,$Y=Object.prototype.hasOwnProperty,TY=Object.prototype.propertyIsEnumerable,pj=(e,t,n)=>t in e?cEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hEe=(e,t)=>{for(var n in t||(t={}))$Y.call(t,n)&&pj(e,n,t[n]);if(AC)for(var n of AC(t))TY.call(t,n)&&pj(e,n,t[n]);return e},fEe=(e,t)=>dEe(e,pEe(t)),mEe=(e,t)=>{var n={};for(var r in e)$Y.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AC)for(var r of AC(e))t.indexOf(r)<0&&TY.call(e,r)&&(n[r]=e[r]);return n};const gEe=e=>e||"",yEe=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);return Number.isNaN(n)?"":e},hj={xs:G(10),sm:G(14),md:G(16),lg:G(18),xl:G(20)},vEe={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,decimalSeparator:".",formatter:gEe,parser:yEe,type:"text"},du=I.exports.forwardRef((e,t)=>{const n=Ue("NumberInput",vEe,e),{readOnly:r,disabled:i,value:a,onChange:s,decimalSeparator:o,thousandsSeparator:l,min:u,max:c,startValue:d,step:p,stepHoldInterval:h,stepHoldDelay:m,onFocus:g,onBlur:y,onKeyDown:v,onKeyUp:b,hideControls:_,radius:k,variant:S,precision:$,removeTrailingZeros:N,defaultValue:P,noClampOnBlur:D,handlersRef:O,classNames:F,styles:E,size:z,rightSection:q,rightSectionWidth:K,formatter:Z,parser:te,inputMode:V,unstyled:ee,type:Y}=n,Q=mEe(n,["readOnly","disabled","value","onChange","decimalSeparator","thousandsSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onFocus","onBlur","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:oe,cx:pe}=rEe({radius:k},{classNames:F,styles:E,unstyled:ee,name:"NumberInput",variant:S,size:z}),he=Ge=>{if(Ge==="")return"";let rt=Ge.toFixed($);return N&&$>0&&(rt=rt.replace(new RegExp(`[0]{0,${$}}$`),""),rt.endsWith(".")&&(rt=rt.slice(0,-1))),rt},ge=Ge=>{let rt=Ge;return o&&(rt=rt.replace(".",o)),Z(rt)},_e=Ge=>{let rt=Ge;return o&&(rt=rt.replaceAll(l,"").replace(o,".")),te(rt)},Ne=Ge=>ge(he(Ge)),[Se,Re]=I.exports.useState(typeof a=="number"?a:typeof P=="number"?P:""),[Ke,it]=I.exports.useState(()=>Ne(Se)),Xe=I.exports.useRef(),[at,He]=I.exports.useState(!1),_t=(Ge,rt)=>{if(!at||rt){const Si=Ne(Ge);Si!==Ke&&it(Si)}Ge!==Se&&Re(Ge)},mt=typeof u=="number"?u:-1/0,ht=typeof c=="number"?c:1/0,Lt=I.exports.useRef();Lt.current=()=>{var Ge;let rt;Se===""?rt=(Ge=d!=null?d:u)!=null?Ge:0:rt=parseFloat(he(Fl(Se+p,mt,ht))),_t(rt,!0),s==null||s(rt)};const Un=I.exports.useRef();Un.current=()=>{var Ge;let rt;Se===""?rt=(Ge=d!=null?d:u)!=null?Ge:0:rt=parseFloat(he(Fl(Se-p,mt,ht))),_t(rt,!0),s==null||s(rt)},hK(O,{increment:Lt.current,decrement:Un.current}),I.exports.useEffect(()=>{at||_t(a===void 0?Se:a,!0)},[a,at]);const kt=m!==void 0&&h!==void 0,bn=I.exports.useRef(null),tn=I.exports.useRef(0),Mt=()=>{bn.current&&window.clearTimeout(bn.current),bn.current=null,tn.current=0},sr=Ge=>{Ge?Lt.current():Un.current(),tn.current+=1},Rn=Ge=>{if(sr(Ge),kt){const rt=typeof h=="number"?h:h(tn.current);bn.current=window.setTimeout(()=>Rn(Ge),rt)}},wn=(Ge,rt)=>{Ge.preventDefault(),Xe.current.focus(),sr(rt),kt&&(bn.current=window.setTimeout(()=>Rn(rt),m))};I.exports.useEffect(()=>(Mt(),Mt),[]);const un=B("div",{className:oe.rightSection,children:[x("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:Se>=c,className:pe(oe.control,oe.controlUp),onPointerDown:Ge=>{wn(Ge,!0)},onPointerUp:Mt,onPointerLeave:Mt,children:x(cj,{size:ke({size:z,sizes:hj}),direction:"up"})}),x("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:Se<=u,className:pe(oe.control,oe.controlDown),onPointerDown:Ge=>{wn(Ge,!1)},onPointerUp:Mt,onPointerLeave:Mt,children:x(cj,{size:ke({size:z,sizes:hj}),direction:"down"})})]}),cn=Ge=>{let rt=Ge;(rt[0]===`${o}`||rt[0]===".")&&(rt=`0${rt}`);const Si=parseFloat(he(parseFloat(_e(rt)))),Dn=D?Si:Fl(Si,mt,ht),qn=Number.isNaN(Dn)?"":Dn,ai=Se!==qn;it(Ge),_t(qn),ai&&(s==null||s(qn))},Er=Ge=>{Ge.nativeEvent.isComposing||cn(Ge.target.value)},ki=Ge=>{He(!0),g==null||g(Ge)},Qn=Ge=>{He(!1),y==null||y(Ge)},Ta=Ge=>{if(typeof v=="function"&&v(Ge),Ge.repeat&&kt&&(Ge.key==="ArrowUp"||Ge.key==="ArrowDown")){Ge.preventDefault();return}r||(Ge.key==="ArrowUp"?wn(Ge,!0):Ge.key==="ArrowDown"&&wn(Ge,!1))},yn=Ge=>{typeof b=="function"&&b(Ge),(Ge.key==="ArrowUp"||Ge.key==="ArrowDown")&&Mt()};return x(Ze,{...fEe(hEe({},Q),{type:Y,variant:S,value:Ke,disabled:i,readOnly:r,ref:ju(Xe,t),onChange:Er,onFocus:ki,onBlur:Qn,onKeyDown:Ta,onKeyUp:yn,rightSection:q||(i||r||_||S==="unstyled"?null:un),rightSectionWidth:K!=null?K:`calc(${ke({size:z,sizes:SY})} + ${G(1)})`,radius:k,max:c,min:u,step:p,size:z,styles:E,classNames:F,inputMode:V||tEe(p,$,X0e()),__staticSelector:"NumberInput",unstyled:ee})})});du.displayName="@mantine/core/NumberInput";const NY=I.exports.createContext(!1),bEe=NY.Provider,wEe=()=>I.exports.useContext(NY);function EY({children:e,openDelay:t=0,closeDelay:n=0}){return x(bEe,{value:!0,children:x(Xxe,{delay:{open:t,close:n},children:e})})}EY.displayName="@mantine/core/TooltipGroup";var xEe=Object.defineProperty,_Ee=Object.defineProperties,kEe=Object.getOwnPropertyDescriptors,fj=Object.getOwnPropertySymbols,SEe=Object.prototype.hasOwnProperty,CEe=Object.prototype.propertyIsEnumerable,mj=(e,t,n)=>t in e?xEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gj=(e,t)=>{for(var n in t||(t={}))SEe.call(t,n)&&mj(e,n,t[n]);if(fj)for(var n of fj(t))CEe.call(t,n)&&mj(e,n,t[n]);return e},IEe=(e,t)=>_Ee(e,kEe(t));function $Ee(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.gray[2]:e.colors.gray[9],color:e.colorScheme==="dark"?e.black:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var TEe=tt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:IEe(gj(gj({},e.fn.fontStyles()),$Ee(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs} / 2) ${e.spacing.xs}`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const OY=TEe,PY={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function NEe({offset:e,position:t}){const[n,r]=I.exports.useState(!1),i=I.exports.useRef(),{x:a,y:s,reference:o,floating:l,refs:u,update:c,placement:d}=LR({placement:t,middleware:[OR({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,m=I.exports.useCallback(({clientX:g,clientY:y})=>{o({getBoundingClientRect(){return{width:0,height:0,x:g,y,left:g+p,top:y+h,right:g,bottom:y}}})},[o]);return I.exports.useEffect(()=>{if(u.floating.current){const g=i.current;g.addEventListener("mousemove",m);const y=Jc(u.floating.current);return y.forEach(v=>{v.addEventListener("scroll",c)}),()=>{g.removeEventListener("mousemove",m),y.forEach(v=>{v.removeEventListener("scroll",c)})}}},[o,u.floating.current,c,m,n]),{handleMouseMove:m,x:a,y:s,opened:n,setOpened:r,boundaryRef:i,floating:l}}var EEe=Object.defineProperty,OEe=Object.defineProperties,PEe=Object.getOwnPropertyDescriptors,RC=Object.getOwnPropertySymbols,MY=Object.prototype.hasOwnProperty,AY=Object.prototype.propertyIsEnumerable,yj=(e,t,n)=>t in e?EEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m_=(e,t)=>{for(var n in t||(t={}))MY.call(t,n)&&yj(e,n,t[n]);if(RC)for(var n of RC(t))AY.call(t,n)&&yj(e,n,t[n]);return e},g_=(e,t)=>OEe(e,PEe(t)),MEe=(e,t)=>{var n={};for(var r in e)MY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RC)for(var r of RC(e))t.indexOf(r)<0&&AY.call(e,r)&&(n[r]=e[r]);return n};const AEe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Wu("popover")};function RY(e){var t;const n=Ue("TooltipFloating",AEe,e),{children:r,refProp:i,withinPortal:a,portalProps:s,style:o,className:l,classNames:u,styles:c,unstyled:d,radius:p,color:h,label:m,offset:g,position:y,multiline:v,width:b,zIndex:_,disabled:k,variant:S}=n,$=MEe(n,["children","refProp","withinPortal","portalProps","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled","variant"]),{handleMouseMove:N,x:P,y:D,opened:O,boundaryRef:F,floating:E,setOpened:z}=NEe({offset:g,position:y}),{classes:q,cx:K}=OY({radius:p,color:h,multiline:v,width:b},{name:"TooltipFloating",classNames:u,styles:c,unstyled:d,variant:S});if(!U1(r))throw new Error(PY.children);const Z=ju(F,r.ref),te=ee=>{var Y,Q;(Q=(Y=r.props).onMouseEnter)==null||Q.call(Y,ee),N(ee),z(!0)},V=ee=>{var Y,Q;(Q=(Y=r.props).onMouseLeave)==null||Q.call(Y,ee),z(!1)};return B(Fe,{children:[x(X1,{...g_(m_({},s),{withinPortal:a}),children:x(vt,{...g_(m_({},$),{ref:E,className:K(q.tooltip,l),style:g_(m_({},o),{zIndex:_,display:!k&&O?"block":"none",top:D!=null?D:"",left:(t=Math.round(P))!=null?t:""})}),children:m})}),I.exports.cloneElement(r,g_(m_({},r.props),{[i]:Z,onMouseEnter:te,onMouseLeave:V}))]})}RY.displayName="@mantine/core/TooltipFloating";function REe(e){const[t,n]=I.exports.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,a=wEe(),s=Vu(),{delay:o,currentId:l,setCurrentId:u}=zZ(),c=I.exports.useCallback(P=>{n(P),P&&u(s)},[u,s]),{x:d,y:p,reference:h,floating:m,context:g,refs:y,update:v,placement:b,middlewareData:{arrow:{x:_,y:k}={}}}=LR({placement:e.position,open:i,onOpenChange:c,middleware:[IZ(e.offset),OR({padding:8}),kZ(),AZ({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[CZ()]:[]]}),{getReferenceProps:S,getFloatingProps:$}=l_e([Zxe(g,{enabled:e.events.hover,delay:a?o:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),s_e(g,{enabled:e.events.focus,keyboardOnly:!0}),o_e(g,{role:"tooltip"}),a_e(g,{enabled:typeof e.opened===void 0}),Jxe(g,{id:s})]);return WZ({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:y,update:v}}),Mi(()=>{var P;(P=e.onPositionChange)==null||P.call(e,b)},[b]),{x:d,y:p,arrowX:_,arrowY:k,reference:h,floating:m,getFloatingProps:$,getReferenceProps:S,isGroupPhase:i&&l&&l!==s,opened:i,placement:b}}var DEe=Object.defineProperty,LEe=Object.defineProperties,FEe=Object.getOwnPropertyDescriptors,DC=Object.getOwnPropertySymbols,DY=Object.prototype.hasOwnProperty,LY=Object.prototype.propertyIsEnumerable,vj=(e,t,n)=>t in e?DEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ap=(e,t)=>{for(var n in t||(t={}))DY.call(t,n)&&vj(e,n,t[n]);if(DC)for(var n of DC(t))LY.call(t,n)&&vj(e,n,t[n]);return e},uE=(e,t)=>LEe(e,FEe(t)),zEe=(e,t)=>{var n={};for(var r in e)DY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DC)for(var r of DC(e))t.indexOf(r)<0&&LY.call(e,r)&&(n[r]=e[r]);return n};const BEe={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Wu("popover"),positionDependencies:[]},e$=I.exports.forwardRef((e,t)=>{var n;const r=I.exports.useRef(null),i=Ue("Tooltip",BEe,e),{children:a,position:s,refProp:o,label:l,openDelay:u,closeDelay:c,onPositionChange:d,opened:p,withinPortal:h,portalProps:m,radius:g,color:y,classNames:v,styles:b,unstyled:_,style:k,className:S,withArrow:$,arrowSize:N,arrowOffset:P,arrowRadius:D,arrowPosition:O,offset:F,transitionProps:E,multiline:z,width:q,events:K,zIndex:Z,disabled:te,positionDependencies:V,onClick:ee,onMouseEnter:Y,onMouseLeave:Q,inline:oe,variant:pe,keepMounted:he}=i,ge=zEe(i,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","portalProps","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","offset","transitionProps","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline","variant","keepMounted"]),{classes:_e,cx:Ne,theme:Se}=OY({radius:g,color:y,width:q,multiline:z},{name:"Tooltip",classNames:v,styles:b,unstyled:_,variant:pe}),Re=REe({position:YZ(Se.dir,s),closeDelay:c,openDelay:u,onPositionChange:d,opened:p,events:K,arrowRef:r,arrowOffset:P,offset:F+($?N/2:0),positionDependencies:[...V,a],inline:oe});if(!U1(a))throw new Error(PY.children);const Ke=ju(Re.reference,a.ref,t);return B(Fe,{children:[x(X1,{...uE(ap({},m),{withinPortal:h}),children:x(ku,{...uE(ap({keepMounted:he,mounted:!te&&Re.opened},E),{transition:E.transition||"fade",duration:Re.isGroupPhase?10:(n=E.duration)!=null?n:100}),children:it=>{var Xe,at;return B(vt,{...ap(ap({},ge),Re.getFloatingProps({ref:Re.floating,className:_e.tooltip,style:uE(ap(ap({},k),it),{zIndex:Z,top:(Xe=Re.y)!=null?Xe:0,left:(at=Re.x)!=null?at:0})})),children:[l,x(zR,{ref:r,arrowX:Re.arrowX,arrowY:Re.arrowY,visible:$,position:Re.placement,arrowSize:N,arrowOffset:P,arrowRadius:D,arrowPosition:O,className:_e.arrow})]})}})}),I.exports.cloneElement(a,Re.getReferenceProps(ap({onClick:ee,onMouseEnter:Y,onMouseLeave:Q,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:Ke,className:Ne(S,a.props.className)},a.props)))]})});e$.Group=EY;e$.Floating=RY;e$.displayName="@mantine/core/Tooltip";const is=e$;function WEe({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:a,filterDataOnExactSearchMatch:s}){if(!t)return e;const o=a!=null&&e.find(u=>u.value===a)||null;if(o&&!s&&(o==null?void 0:o.label)===r){if(n){if(n>=e.length)return e;const u=e.indexOf(o),c=u+n,d=c-e.length;return d>0?e.slice(u-d):e.slice(u,c)}return e}const l=[];for(let u=0;u<e.length&&(i(r,e[u])&&l.push(e[u]),!(l.length>=n));u+=1);return l}var VEe=tt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const jEe=VEe;var HEe=Object.defineProperty,UEe=Object.defineProperties,GEe=Object.getOwnPropertyDescriptors,LC=Object.getOwnPropertySymbols,FY=Object.prototype.hasOwnProperty,zY=Object.prototype.propertyIsEnumerable,bj=(e,t,n)=>t in e?HEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K0=(e,t)=>{for(var n in t||(t={}))FY.call(t,n)&&bj(e,n,t[n]);if(LC)for(var n of LC(t))zY.call(t,n)&&bj(e,n,t[n]);return e},cE=(e,t)=>UEe(e,GEe(t)),qEe=(e,t)=>{var n={};for(var r in e)FY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LC)for(var r of LC(e))t.indexOf(r)<0&&zY.call(e,r)&&(n[r]=e[r]);return n};function KEe(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function ZEe(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const XEe={required:!1,size:"sm",shadow:"sm",itemComponent:IR,transitionProps:{transition:"fade",duration:0},initiallyOpened:!1,filter:KEe,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:ZEe,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Wu("popover"),positionDependencies:[],dropdownPosition:"flip"},YR=I.exports.forwardRef((e,t)=>{const n=rX("Select",XEe,e),{inputProps:r,wrapperProps:i,shadow:a,data:s,value:o,defaultValue:l,onChange:u,itemComponent:c,onKeyDown:d,onBlur:p,onFocus:h,transitionProps:m,initiallyOpened:g,unstyled:y,classNames:v,styles:b,filter:_,maxDropdownHeight:k,searchable:S,clearable:$,nothingFound:N,limit:P,disabled:D,onSearchChange:O,searchValue:F,rightSection:E,rightSectionWidth:z,creatable:q,getCreateLabel:K,shouldCreate:Z,selectOnBlur:te,onCreate:V,dropdownComponent:ee,onDropdownClose:Y,onDropdownOpen:Q,withinPortal:oe,portalProps:pe,switchDirectionOnFlip:he,zIndex:ge,name:_e,dropdownPosition:Ne,allowDeselect:Se,placeholder:Re,filterDataOnExactSearchMatch:Ke,form:it,positionDependencies:Xe,readOnly:at,clearButtonProps:He,hoverOnSearchChange:_t}=n,mt=qEe(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transitionProps","initiallyOpened","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","portalProps","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","form","positionDependencies","readOnly","clearButtonProps","hoverOnSearchChange"]),{classes:ht,cx:Lt,theme:Un}=jEe(),[kt,bn]=I.exports.useState(g),[tn,Mt]=I.exports.useState(-1),sr=I.exports.useRef(),Rn=I.exports.useRef({}),[wn,un]=I.exports.useState("column"),cn=wn==="column",{scrollIntoView:Er,targetRef:ki,scrollableRef:Qn}=gK({duration:0,offset:5,cancelable:!1,isList:!0}),Ta=Se===void 0?$:Se,yn=nt=>{if(kt!==nt){bn(nt);const Nt=nt?Q:Y;typeof Nt=="function"&&Nt()}},Ge=q&&typeof K=="function";let rt=null;const Si=s.map(nt=>typeof nt=="string"?{label:nt,value:nt}:nt),Dn=Mq({data:Si}),[qn,ai,Ur]=Zo({value:o,defaultValue:l,finalValue:null,onChange:u}),hr=Dn.find(nt=>nt.value===qn),[wr,si]=Zo({value:F,defaultValue:(hr==null?void 0:hr.label)||"",finalValue:void 0,onChange:O}),xn=nt=>{si(nt),S&&typeof O=="function"&&O(nt)},_n=()=>{var nt;at||(ai(null),Ur||xn(""),(nt=sr.current)==null||nt.focus())};I.exports.useEffect(()=>{const nt=Dn.find(Nt=>Nt.value===qn);nt?xn(nt.label):(!Ge||!qn)&&xn("")},[qn]),I.exports.useEffect(()=>{hr&&(!S||!kt)&&xn(hr.label)},[hr==null?void 0:hr.label]);const ve=nt=>{if(!at)if(Ta&&(hr==null?void 0:hr.value)===nt.value)ai(null),yn(!1);else{if(nt.creatable&&typeof V=="function"){const Nt=V(nt.value);typeof Nt<"u"&&Nt!==null&&ai(typeof Nt=="string"?Nt:Nt.value)}else ai(nt.value);Ur||xn(nt.label),Mt(-1),yn(!1),sr.current.focus()}},Ie=WEe({data:Dn,searchable:S,limit:P,searchValue:wr,filter:_,filterDataOnExactSearchMatch:Ke,value:qn});Ge&&Z(wr,Ie)&&(rt=K(wr),Ie.push({label:wr,value:wr,creatable:!0}));const Je=(nt,Nt,Ln)=>{let Et=nt;for(;Ln(Et);)if(Et=Nt(Et),!Ie[Et].disabled)return Et;return nt};Mi(()=>{Mt(_t&&wr?0:-1)},[wr,_t]);const J=qn?Ie.findIndex(nt=>nt.value===qn):0,At=!at&&(Ie.length>0?kt:kt&&!!N),Ft=()=>{Mt(nt=>{var Nt;const Ln=Je(nt,Et=>Et-1,Et=>Et>0);return ki.current=Rn.current[(Nt=Ie[Ln])==null?void 0:Nt.value],At&&Er({alignment:cn?"start":"end"}),Ln})},St=()=>{Mt(nt=>{var Nt;const Ln=Je(nt,Et=>Et+1,Et=>Et<Ie.length-1);return ki.current=Rn.current[(Nt=Ie[Ln])==null?void 0:Nt.value],At&&Er({alignment:cn?"end":"start"}),Ln})},bt=()=>window.setTimeout(()=>{var nt;ki.current=Rn.current[(nt=Ie[J])==null?void 0:nt.value],Er({alignment:cn?"end":"start"})},50);Mi(()=>{At&&bt()},[At]);const Jt=nt=>{switch(typeof d=="function"&&d(nt),nt.key){case"ArrowUp":{nt.preventDefault(),kt?cn?Ft():St():(Mt(J),yn(!0),bt());break}case"ArrowDown":{nt.preventDefault(),kt?cn?St():Ft():(Mt(J),yn(!0),bt());break}case"Home":{if(!S){nt.preventDefault(),kt||yn(!0);const Nt=Ie.findIndex(Ln=>!Ln.disabled);Mt(Nt),At&&Er({alignment:cn?"end":"start"})}break}case"End":{if(!S){nt.preventDefault(),kt||yn(!0);const Nt=Ie.map(Ln=>!!Ln.disabled).lastIndexOf(!1);Mt(Nt),At&&Er({alignment:cn?"end":"start"})}break}case"Escape":{nt.preventDefault(),yn(!1),Mt(-1);break}case" ":{S||(nt.preventDefault(),Ie[tn]&&kt?ve(Ie[tn]):(yn(!0),Mt(J),bt()));break}case"Enter":S||nt.preventDefault(),Ie[tn]&&kt&&(nt.preventDefault(),ve(Ie[tn]))}},Be=nt=>{typeof p=="function"&&p(nt);const Nt=Dn.find(Ln=>Ln.value===qn);te&&Ie[tn]&&kt&&ve(Ie[tn]),xn((Nt==null?void 0:Nt.label)||""),yn(!1)},oi=nt=>{typeof h=="function"&&h(nt),S&&yn(!0)},ko=nt=>{at||(xn(nt.currentTarget.value),$&&nt.currentTarget.value===""&&ai(null),Mt(-1),yn(!0))},Ss=()=>{at||(yn(!kt),qn&&!kt&&Mt(J))};return x(Rs.Wrapper,{...cE(K0({},i),{__staticSelector:"Select"}),children:B(Yc,{opened:At,transitionProps:m,shadow:a,withinPortal:oe,portalProps:pe,__staticSelector:"Select",onDirectionChange:un,switchDirectionOnFlip:he,zIndex:ge,dropdownPosition:Ne,positionDependencies:[...Xe,wr],classNames:v,styles:b,unstyled:y,variant:r.variant,children:[x(Yc.Target,{children:B("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":At?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":At,onMouseLeave:()=>Mt(-1),tabIndex:-1,children:[x("input",{type:"hidden",name:_e,value:qn||"",form:it,disabled:D}),x(Rs,{...K0(cE(K0(K0({autoComplete:"off",type:"search"},r),mt),{ref:ju(t,sr),onKeyDown:Jt,__staticSelector:"Select",value:wr,placeholder:Re,onChange:ko,"aria-autocomplete":"list","aria-controls":At?`${r.id}-items`:null,"aria-activedescendant":tn>=0?`${r.id}-${tn}`:null,onMouseDown:Ss,onBlur:Be,onFocus:oi,readOnly:!S||at,disabled:D,"data-mantine-stop-propagation":At,name:null,classNames:cE(K0({},v),{input:Lt({[ht.input]:!S},v==null?void 0:v.input)})}),vY({theme:Un,rightSection:E,rightSectionWidth:z,styles:b,size:r.size,shouldClear:$&&!!hr,onClear:_n,error:i.error,clearButtonProps:He,disabled:D,readOnly:at}))})]})}),x(Yc.Dropdown,{component:ee||J2,maxHeight:k,direction:wn,id:r.id,innerRef:Qn,__staticSelector:"Select",classNames:v,styles:b,children:x(CR,{data:Ie,hovered:tn,classNames:v,styles:b,isItemSelected:nt=>nt===qn,uuid:r.id,__staticSelector:"Select",onItemHover:Mt,onItemSelect:ve,itemsRefs:Rn,itemComponent:c,size:r.size,nothingFound:N,creatable:Ge&&!!rt,createLabel:rt,"aria-label":i.label,unstyled:y,variant:r.variant})})]})})});YR.displayName="@mantine/core/Select";function JEe(e,t){if(t.length===0)return t;const n="maxWidth"in t[0]?"maxWidth":"minWidth",r=[...t].sort((i,a)=>Ko(ke({size:a[n],sizes:e.breakpoints}))-Ko(ke({size:i[n],sizes:e.breakpoints})));return n==="minWidth"?r.reverse():r}var YEe=Object.defineProperty,wj=Object.getOwnPropertySymbols,QEe=Object.prototype.hasOwnProperty,eOe=Object.prototype.propertyIsEnumerable,xj=(e,t,n)=>t in e?YEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tOe=(e,t)=>{for(var n in t||(t={}))QEe.call(t,n)&&xj(e,n,t[n]);if(wj)for(var n of wj(t))eOe.call(t,n)&&xj(e,n,t[n]);return e},nOe=tt((e,{spacing:t,breakpoints:n,cols:r,verticalSpacing:i})=>{const a=i!=null,s=JEe(e,n).reduce((o,l)=>{var u,c;const d="maxWidth"in l?"max-width":"min-width",p=ke({size:d==="max-width"?l.maxWidth:l.minWidth,sizes:e.breakpoints,units:"em"}),h=Ko(p)-(d==="max-width"?1:0);return o[`@media (${d}: ${Xc(h)})`]={gridTemplateColumns:`repeat(${l.cols}, minmax(0, 1fr))`,gap:`${ke({size:(u=l.verticalSpacing)!=null?u:a?i:t,sizes:e.spacing})} ${ke({size:(c=l.spacing)!=null?c:t,sizes:e.spacing})}`},o},{});return{root:tOe({boxSizing:"border-box",display:"grid",gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`,gap:`${ke({size:a?i:t,sizes:e.spacing})} ${ke({size:t,sizes:e.spacing})}`},s)}});const rOe=nOe;var iOe=Object.defineProperty,FC=Object.getOwnPropertySymbols,BY=Object.prototype.hasOwnProperty,WY=Object.prototype.propertyIsEnumerable,_j=(e,t,n)=>t in e?iOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aOe=(e,t)=>{for(var n in t||(t={}))BY.call(t,n)&&_j(e,n,t[n]);if(FC)for(var n of FC(t))WY.call(t,n)&&_j(e,n,t[n]);return e},sOe=(e,t)=>{var n={};for(var r in e)BY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FC)for(var r of FC(e))t.indexOf(r)<0&&WY.call(e,r)&&(n[r]=e[r]);return n};const oOe={breakpoints:[],cols:1,spacing:"md"},VY=I.exports.forwardRef((e,t)=>{const n=Ue("SimpleGrid",oOe,e),{className:r,breakpoints:i,cols:a,spacing:s,verticalSpacing:o,children:l,unstyled:u,variant:c}=n,d=sOe(n,["className","breakpoints","cols","spacing","verticalSpacing","children","unstyled","variant"]),{classes:p,cx:h}=rOe({breakpoints:i,cols:a,spacing:s,verticalSpacing:o},{name:"SimpleGrid",unstyled:u,variant:c});return x(vt,{...aOe({className:h(p.root,r),ref:t},d),children:l})});VY.displayName="@mantine/core/SimpleGrid";function jY({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function lOe({value:e,containerWidth:t,min:n,max:r,step:i,precision:a}){const o=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(o!==0?Math.round(o/i)*i:0)+n,u=Math.max(l,n);return a!==void 0?Number(u.toFixed(a)):u}var uOe=Object.defineProperty,cOe=Object.defineProperties,dOe=Object.getOwnPropertyDescriptors,kj=Object.getOwnPropertySymbols,pOe=Object.prototype.hasOwnProperty,hOe=Object.prototype.propertyIsEnumerable,Sj=(e,t,n)=>t in e?uOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fOe=(e,t)=>{for(var n in t||(t={}))pOe.call(t,n)&&Sj(e,n,t[n]);if(kj)for(var n of kj(t))hOe.call(t,n)&&Sj(e,n,t[n]);return e},mOe=(e,t)=>cOe(e,dOe(t));const da={xs:G(4),sm:G(6),md:G(8),lg:G(10),xl:G(12)};var gOe=tt(e=>({root:mOe(fOe({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,display:"flex",flexDirection:"column",alignItems:"center",touchAction:"none",position:"relative"})}));const yOe=gOe;var vOe=Object.defineProperty,bOe=Object.defineProperties,wOe=Object.getOwnPropertyDescriptors,Cj=Object.getOwnPropertySymbols,xOe=Object.prototype.hasOwnProperty,_Oe=Object.prototype.propertyIsEnumerable,Ij=(e,t,n)=>t in e?vOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kOe=(e,t)=>{for(var n in t||(t={}))xOe.call(t,n)&&Ij(e,n,t[n]);if(Cj)for(var n of Cj(t))_Oe.call(t,n)&&Ij(e,n,t[n]);return e},SOe=(e,t)=>bOe(e,wOe(t)),COe=tt((e,{color:t,disabled:n,thumbSize:r},{size:i})=>({label:{position:"absolute",top:G(-36),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs} / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:SOe(kOe({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:n?"none":"flex",height:r?G(r):`calc(${ke({sizes:da,size:i})} * 2)`,width:r?G(r):`calc(${ke({sizes:da,size:i})} * 2)`,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`${G(4)} solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const IOe=COe,HY=I.exports.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:a,onMouseDown:s,onKeyDownCapture:o,color:l,classNames:u,styles:c,size:d,labelTransition:p,labelTransitionDuration:h,labelTransitionTimingFunction:m,labelAlwaysOn:g,thumbLabel:y,onFocus:v,onBlur:b,showLabelOnHover:_,isHovered:k,children:S=null,disabled:$,unstyled:N,thumbSize:P,variant:D},O)=>{const{classes:F,cx:E,theme:z}=IOe({color:l,disabled:$,thumbSize:P},{name:"Slider",classNames:u,styles:c,unstyled:N,variant:D,size:d}),[q,K]=I.exports.useState(!1),Z=g||a||q||_&&k;return B(vt,{tabIndex:0,role:"slider","aria-label":y,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:O,className:E(F.thumb,{[F.dragging]:a}),onFocus:()=>{K(!0),typeof v=="function"&&v()},onBlur:()=>{K(!1),typeof b=="function"&&b()},onTouchStart:s,onMouseDown:s,onKeyDownCapture:o,onClick:te=>te.stopPropagation(),style:{[z.dir==="rtl"?"right":"left"]:`${r}%`},children:[S,x(ku,{mounted:i!=null&&Z,duration:h,transition:p,timingFunction:m||z.transitionTimingFunction,children:te=>x("div",{style:te,className:F.label,children:i})})]})});HY.displayName="@mantine/core/SliderThumb";function $Oe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var TOe=tt((e,{color:t,disabled:n,thumbSize:r},{size:i})=>({marksContainer:{position:"absolute",right:r?G(r/2):ke({sizes:da,size:i}),left:r?G(r/2):ke({sizes:da,size:i}),"&:has(~ input:disabled)":{"& .mantine-Slider-markFilled":{border:`${G(2)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,borderColor:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}},markWrapper:{position:"absolute",top:`calc(${G(ke({sizes:da,size:i}))} / 2)`,zIndex:2,height:0},mark:{boxSizing:"border-box",border:`${G(2)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:ke({sizes:da,size:i}),width:ke({sizes:da,size:i}),borderRadius:1e3,transform:`translateX(calc(-${ke({sizes:da,size:i})} / 2))`,backgroundColor:e.white,pointerEvents:"none"},markFilled:{borderColor:n?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:t}).background},markLabel:{transform:`translate(-50%, calc(${e.spacing.xs} / 2))`,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],whiteSpace:"nowrap",cursor:"pointer",userSelect:"none"}}));const NOe=TOe;function UY({marks:e,color:t,size:n,thumbSize:r,min:i,max:a,value:s,classNames:o,styles:l,offset:u,onChange:c,disabled:d,unstyled:p,inverted:h,variant:m}){const{classes:g,cx:y}=NOe({color:t,disabled:d,thumbSize:r},{name:"Slider",classNames:o,styles:l,unstyled:p,variant:m,size:n}),v=e.map((b,_)=>B(vt,{className:g.markWrapper,sx:{left:`${jY({value:b.value,min:i,max:a})}%`},children:[x("div",{className:y(g.mark,{[g.markFilled]:$Oe({mark:b,value:s,offset:u,inverted:h})})}),b.label&&x("div",{className:g.markLabel,onMouseDown:k=>{k.stopPropagation(),!d&&c(b.value)},onTouchStart:k=>{k.stopPropagation(),!d&&c(b.value)},children:b.label})]},_));return x("div",{className:g.marksContainer,children:v})}UY.displayName="@mantine/core/SliderMarks";var EOe=tt((e,{radius:t,color:n,disabled:r,inverted:i,thumbSize:a},{size:s})=>({trackContainer:{display:"flex",alignItems:"center",width:"100%",height:`calc(${ke({sizes:da,size:s})} * 2)`,cursor:"pointer","&:has(~ input:disabled)":{"&":{pointerEvents:"none"},"& .mantine-Slider-thumb":{display:"none"},"& .mantine-Slider-track::before":{content:'""',backgroundColor:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]},"& .mantine-Slider-bar":{backgroundColor:i?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}},track:{position:"relative",height:ke({sizes:da,size:s}),width:"100%",marginRight:a?G(a/2):ke({size:s,sizes:da}),marginLeft:a?G(a/2):ke({size:s,sizes:da}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.radius(t),right:`calc(${a?G(a/2):ke({size:s,sizes:da})} * -1)`,left:`calc(${a?G(a/2):ke({size:s,sizes:da})} * -1)`,backgroundColor:i?r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:i?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background,borderRadius:e.fn.radius(t)}}));const OOe=EOe;var POe=Object.defineProperty,MOe=Object.defineProperties,AOe=Object.getOwnPropertyDescriptors,zC=Object.getOwnPropertySymbols,GY=Object.prototype.hasOwnProperty,qY=Object.prototype.propertyIsEnumerable,$j=(e,t,n)=>t in e?POe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tj=(e,t)=>{for(var n in t||(t={}))GY.call(t,n)&&$j(e,n,t[n]);if(zC)for(var n of zC(t))qY.call(t,n)&&$j(e,n,t[n]);return e},ROe=(e,t)=>MOe(e,AOe(t)),DOe=(e,t)=>{var n={};for(var r in e)GY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zC)for(var r of zC(e))t.indexOf(r)<0&&qY.call(e,r)&&(n[r]=e[r]);return n};function KY(e){var t=e,{filled:n,size:r,thumbSize:i,color:a,classNames:s,styles:o,radius:l,children:u,offset:c,disabled:d,marksOffset:p,unstyled:h,inverted:m,variant:g,containerProps:y}=t,v=DOe(t,["filled","size","thumbSize","color","classNames","styles","radius","children","offset","disabled","marksOffset","unstyled","inverted","variant","containerProps"]);const{classes:b}=OOe({color:a,radius:l,disabled:d,inverted:m,thumbSize:i},{name:"Slider",classNames:s,styles:o,unstyled:h,variant:g,size:r});return B(Fe,{children:[x("div",{...Tj({className:b.trackContainer},y),children:B("div",{className:b.track,children:[x(vt,{className:b.bar,sx:{left:`calc(${c}% - ${i?G(i/2):ke({size:r,sizes:da})})`,width:`calc(${n}% + 2 * ${i?G(i/2):ke({size:r,sizes:da})})`}}),u]})}),x(UY,{...ROe(Tj({},v),{size:r,thumbSize:i,color:a,offset:p,classNames:s,styles:o,disabled:d,unstyled:h,inverted:m,variant:g})})]})}KY.displayName="@mantine/core/SliderTrack";var LOe=Object.defineProperty,FOe=Object.defineProperties,zOe=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,ZY=Object.prototype.hasOwnProperty,XY=Object.prototype.propertyIsEnumerable,Nj=(e,t,n)=>t in e?LOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BOe=(e,t)=>{for(var n in t||(t={}))ZY.call(t,n)&&Nj(e,n,t[n]);if(BC)for(var n of BC(t))XY.call(t,n)&&Nj(e,n,t[n]);return e},WOe=(e,t)=>FOe(e,zOe(t)),VOe=(e,t)=>{var n={};for(var r in e)ZY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BC)for(var r of BC(e))t.indexOf(r)<0&&XY.call(e,r)&&(n[r]=e[r]);return n};const JY=I.exports.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:a,styles:s,disabled:o,unstyled:l,variant:u}=n,c=VOe(n,["className","size","classNames","styles","disabled","unstyled","variant"]);const{classes:d,cx:p}=yOe(null,{name:"Slider",classNames:a,styles:s,unstyled:l,variant:u,size:i});return x(vt,{...WOe(BOe({},c),{tabIndex:-1,className:p(d.root,r),ref:t})})});JY.displayName="@mantine/core/SliderRoot";function y_(e,t){return parseFloat(e.toFixed(t))}function jOe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var HOe=Object.defineProperty,UOe=Object.defineProperties,GOe=Object.getOwnPropertyDescriptors,WC=Object.getOwnPropertySymbols,YY=Object.prototype.hasOwnProperty,QY=Object.prototype.propertyIsEnumerable,Ej=(e,t,n)=>t in e?HOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qOe=(e,t)=>{for(var n in t||(t={}))YY.call(t,n)&&Ej(e,n,t[n]);if(WC)for(var n of WC(t))QY.call(t,n)&&Ej(e,n,t[n]);return e},KOe=(e,t)=>UOe(e,GOe(t)),ZOe=(e,t)=>{var n={};for(var r in e)YY.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WC)for(var r of WC(e))t.indexOf(r)<0&&QY.call(e,r)&&(n[r]=e[r]);return n};const XOe={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},VC=I.exports.forwardRef((e,t)=>{const n=Ue("Slider",XOe,e),{classNames:r,styles:i,color:a,value:s,onChange:o,onChangeEnd:l,size:u,radius:c,min:d,max:p,step:h,precision:m,defaultValue:g,name:y,marks:v,label:b,labelTransition:_,labelTransitionDuration:k,labelTransitionTimingFunction:S,labelAlwaysOn:$,thumbLabel:N,showLabelOnHover:P,thumbChildren:D,disabled:O,unstyled:F,thumbSize:E,scale:z,inverted:q,variant:K}=n,Z=ZOe(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted","variant"]),te=m!=null?m:jOe(h),V=Za(),[ee,Y]=I.exports.useState(!1),[Q,oe]=Zo({value:typeof s=="number"?Fl(s,d,p):s,defaultValue:typeof g=="number"?Fl(g,d,p):g,finalValue:Fl(0,d,p),onChange:o}),pe=I.exports.useRef(Q),he=I.exports.useRef(),ge=I.exports.useRef(),_e=jY({value:Q,min:d,max:p}),Ne=z(Q),Se=typeof b=="function"?b(Ne):b,Re=I.exports.useCallback(({x:at})=>{if(!O){const He=lOe({value:at,min:d,max:p,step:h,precision:te});oe(He),pe.current=He}},[O,d,p,h,te,oe]),{ref:Ke,active:it}=kR(Re,{onScrubEnd:()=>l==null?void 0:l(pe.current)},V.dir),Xe=at=>{if(!O)switch(at.key){case"ArrowUp":{at.preventDefault(),ge.current.focus();const He=y_(Math.min(Math.max(Q+h,d),p),te);l==null||l(He),oe(He);break}case"ArrowRight":{at.preventDefault(),ge.current.focus();const He=y_(Math.min(Math.max(V.dir==="rtl"?Q-h:Q+h,d),p),te);l==null||l(He),oe(He);break}case"ArrowDown":{at.preventDefault(),ge.current.focus();const He=y_(Math.min(Math.max(Q-h,d),p),te);l==null||l(He),oe(He);break}case"ArrowLeft":{at.preventDefault(),ge.current.focus();const He=y_(Math.min(Math.max(V.dir==="rtl"?Q+h:Q-h,d),p),te);l==null||l(He),oe(He);break}case"Home":{at.preventDefault(),ge.current.focus(),l==null||l(d),oe(d);break}case"End":{at.preventDefault(),ge.current.focus(),l==null||l(p),oe(p);break}}};return B(JY,{...KOe(qOe({},Z),{ref:ju(t,he),onKeyDownCapture:Xe,onMouseDownCapture:()=>{var at;return(at=he.current)==null?void 0:at.focus()},size:u,classNames:r,styles:i,disabled:O,unstyled:F,variant:K}),children:[x(KY,{inverted:q,offset:0,filled:_e,marks:v,size:u,thumbSize:E,radius:c,color:a,min:d,max:p,value:Ne,onChange:oe,classNames:r,styles:i,disabled:O,unstyled:F,variant:K,containerProps:{ref:Ke,onMouseEnter:P?()=>Y(!0):void 0,onMouseLeave:P?()=>Y(!1):void 0},children:x(HY,{max:p,min:d,value:Ne,position:_e,dragging:it,color:a,size:u,label:Se,ref:ge,labelTransition:_,labelTransitionDuration:k,labelTransitionTimingFunction:S,labelAlwaysOn:$,classNames:r,styles:i,thumbLabel:N,showLabelOnHover:P,isHovered:ee,disabled:O,unstyled:F,thumbSize:E,variant:K,children:D})}),x("input",{type:"hidden",name:y,value:Ne})]})});VC.displayName="@mantine/core/Slider";var JOe=tt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:ke({size:t,sizes:e.spacing})}}));const YOe=JOe;var QOe=Object.defineProperty,jC=Object.getOwnPropertySymbols,eQ=Object.prototype.hasOwnProperty,tQ=Object.prototype.propertyIsEnumerable,Oj=(e,t,n)=>t in e?QOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ePe=(e,t)=>{for(var n in t||(t={}))eQ.call(t,n)&&Oj(e,n,t[n]);if(jC)for(var n of jC(t))tQ.call(t,n)&&Oj(e,n,t[n]);return e},tPe=(e,t)=>{var n={};for(var r in e)eQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jC)for(var r of jC(e))t.indexOf(r)<0&&tQ.call(e,r)&&(n[r]=e[r]);return n};const nPe={spacing:"md",align:"stretch",justify:"flex-start"},Ce=I.exports.forwardRef((e,t)=>{const n=Ue("Stack",nPe,e),{spacing:r,className:i,align:a,justify:s,unstyled:o,variant:l}=n,u=tPe(n,["spacing","className","align","justify","unstyled","variant"]),{classes:c,cx:d}=YOe({spacing:r,align:a,justify:s},{name:"Stack",unstyled:o,variant:l});return x(vt,{...ePe({className:d(c.root,i),ref:t},u)})});Ce.displayName="@mantine/core/Stack";const nQ=I.exports.createContext(null),rPe=nQ.Provider,iPe=()=>I.exports.useContext(nQ);var aPe=Object.defineProperty,HC=Object.getOwnPropertySymbols,rQ=Object.prototype.hasOwnProperty,iQ=Object.prototype.propertyIsEnumerable,Pj=(e,t,n)=>t in e?aPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mj=(e,t)=>{for(var n in t||(t={}))rQ.call(t,n)&&Pj(e,n,t[n]);if(HC)for(var n of HC(t))iQ.call(t,n)&&Pj(e,n,t[n]);return e},sPe=(e,t)=>{var n={};for(var r in e)rQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HC)for(var r of HC(e))t.indexOf(r)<0&&iQ.call(e,r)&&(n[r]=e[r]);return n};const oPe={size:"sm"},aQ=I.exports.forwardRef((e,t)=>{const n=Ue("SwitchGroup",oPe,e),{children:r,value:i,defaultValue:a,onChange:s,size:o,wrapperProps:l}=n,u=sPe(n,["children","value","defaultValue","onChange","size","wrapperProps"]),[c,d]=Zo({value:i,defaultValue:a,finalValue:[],onChange:s});return x(rPe,{value:{value:c,onChange:h=>{const m=h.currentTarget.value;d(c.includes(m)?c.filter(g=>g!==m):[...c,m])},size:o},children:x(Rs.Wrapper,{...Mj(Mj({labelElement:"div",size:o,__staticSelector:"SwitchGroup",ref:t},l),u),children:r})})});aQ.displayName="@mantine/core/SwitchGroup";var lPe=Object.defineProperty,uPe=Object.defineProperties,cPe=Object.getOwnPropertyDescriptors,Aj=Object.getOwnPropertySymbols,dPe=Object.prototype.hasOwnProperty,pPe=Object.prototype.propertyIsEnumerable,Rj=(e,t,n)=>t in e?lPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hPe=(e,t)=>{for(var n in t||(t={}))dPe.call(t,n)&&Rj(e,n,t[n]);if(Aj)for(var n of Aj(t))pPe.call(t,n)&&Rj(e,n,t[n]);return e},fPe=(e,t)=>uPe(e,cPe(t));const mPe={xs:G(16),sm:G(20),md:G(24),lg:G(30),xl:G(36)},gPe={xs:G(32),sm:G(38),md:G(46),lg:G(56),xl:G(72)},yPe={xs:G(12),sm:G(14),md:G(18),lg:G(22),xl:G(28)},vPe={xs:G(5),sm:G(6),md:G(7),lg:G(9),xl:G(11)},bPe={xs:G(4),sm:G(5),md:G(6),lg:G(8),xl:G(10)};var wPe=tt((e,{radius:t,color:n,labelPosition:r,error:i},{size:a})=>{const s=ke({size:a,sizes:yPe}),o=ke({size:t,sizes:e.radius}),l=e.fn.variant({variant:"filled",color:n}),u=ke({size:a,sizes:gPe}),c=G(a==="xs"?1:2),d=e.fn.variant({variant:"filled",color:"red"}).background;return{root:{position:"relative"},input:{height:0,width:0,overflow:"hidden",whiteSpace:"nowrap",padding:0,WebkitClipPath:"inset(50%)",clipPath:"inset(50%)",position:"absolute"},track:fPe(hPe({},e.fn.focusStyles("input:focus + &")),{cursor:e.cursorType,overflow:"hidden",WebkitTapHighlightColor:"transparent",position:"relative",borderRadius:o,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[2],border:`${G(1)} solid ${i?d:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,height:ke({size:a,sizes:mPe}),minWidth:u,margin:0,transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:"150ms",boxSizing:"border-box",appearance:"none",display:"flex",alignItems:"center",fontSize:ke({size:a,sizes:vPe}),fontWeight:600,order:r==="left"?2:1,userSelect:"none",zIndex:0,lineHeight:0,color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[6],transition:`color 150ms ${e.transitionTimingFunction}`,"input:checked + &":{backgroundColor:l.background,borderColor:l.background,color:e.white,transition:`color 150ms ${e.transitionTimingFunction}`},"input:disabled + &":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],cursor:"not-allowed",pointerEvents:"none"}}),thumb:{position:"absolute",zIndex:1,borderRadius:o,boxSizing:"border-box",display:"flex",backgroundColor:e.white,height:s,width:s,border:`${G(1)} solid ${e.colorScheme==="dark"?e.white:e.colors.gray[3]}`,left:c,transition:`left 150ms ${e.transitionTimingFunction}`,"& > *":{margin:"auto"},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":""},"input:checked + * > &":{left:`calc(100% - ${s} - ${c})`,borderColor:e.white},"input:disabled + * > &":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],backgroundColor:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[0]}},trackLabel:{height:"100%",display:"grid",placeContent:"center",minWidth:`calc(${u} - ${s})`,paddingInline:ke({size:a,sizes:bPe}),marginLeft:`calc(${s} + ${c})`,transition:`margin 150ms ${e.transitionTimingFunction}`,"input:checked + * > &":{marginLeft:0,marginRight:`calc(${s} + ${c})`}}}});const xPe=wPe;var _Pe=Object.defineProperty,kPe=Object.defineProperties,SPe=Object.getOwnPropertyDescriptors,UC=Object.getOwnPropertySymbols,sQ=Object.prototype.hasOwnProperty,oQ=Object.prototype.propertyIsEnumerable,Dj=(e,t,n)=>t in e?_Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dE=(e,t)=>{for(var n in t||(t={}))sQ.call(t,n)&&Dj(e,n,t[n]);if(UC)for(var n of UC(t))oQ.call(t,n)&&Dj(e,n,t[n]);return e},CPe=(e,t)=>kPe(e,SPe(t)),IPe=(e,t)=>{var n={};for(var r in e)sQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UC)for(var r of UC(e))t.indexOf(r)<0&&oQ.call(e,r)&&(n[r]=e[r]);return n};const $Pe={offLabel:"",onLabel:"",size:"sm",radius:"xl",error:!1},Eg=I.exports.forwardRef((e,t)=>{var n;const r=Ue("Switch",$Pe,e),{className:i,color:a,label:s,offLabel:o,onLabel:l,id:u,style:c,size:d,radius:p,wrapperProps:h,children:m,unstyled:g,styles:y,classNames:v,thumbIcon:b,sx:_,checked:k,defaultChecked:S,onChange:$,labelPosition:N,description:P,error:D,disabled:O,variant:F}=r,E=IPe(r,["className","color","label","offLabel","onLabel","id","style","size","radius","wrapperProps","children","unstyled","styles","classNames","thumbIcon","sx","checked","defaultChecked","onChange","labelPosition","description","error","disabled","variant"]),z=iPe(),q=(z==null?void 0:z.size)||d,{classes:K,cx:Z}=xPe({color:a,radius:p,labelPosition:N,error:!!D},{name:"Switch",classNames:v,styles:y,unstyled:g,size:q,variant:F}),{systemStyles:te,rest:V}=Td(E),ee=Vu(u),Y=z?{checked:z.value.includes(V.value),onChange:z.onChange}:{},[Q,oe]=Zo({value:(n=Y.checked)!=null?n:k,defaultValue:S,finalValue:!1});return B(GR,{...dE(dE({className:Z(i,K.root),sx:_,style:c,id:ee,size:(z==null?void 0:z.size)||d,labelPosition:N,label:s,description:P,error:D,disabled:O,__staticSelector:"Switch",classNames:v,styles:y,unstyled:g,"data-checked":Y.checked||void 0,variant:F},te),h),children:[x("input",{...CPe(dE({},V),{disabled:O,checked:Q,onChange:pe=>{z?Y.onChange(pe):$==null||$(pe),oe(pe.currentTarget.checked)},id:ee,ref:t,type:"checkbox",className:K.input})}),B("label",{htmlFor:ee,className:K.track,children:[x("div",{className:K.thumb,children:b}),x("div",{className:K.trackLabel,children:Q?l:o})]})]})});Eg.displayName="@mantine/core/Switch";Eg.Group=aQ;var TPe=Object.defineProperty,NPe=Object.defineProperties,EPe=Object.getOwnPropertyDescriptors,Lj=Object.getOwnPropertySymbols,OPe=Object.prototype.hasOwnProperty,PPe=Object.prototype.propertyIsEnumerable,Fj=(e,t,n)=>t in e?TPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MPe=(e,t)=>{for(var n in t||(t={}))OPe.call(t,n)&&Fj(e,n,t[n]);if(Lj)for(var n of Lj(t))PPe.call(t,n)&&Fj(e,n,t[n]);return e},APe=(e,t)=>NPe(e,EPe(t)),RPe=tt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:a,withColumnBorders:s})=>{const o=`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:APe(MPe({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:a?o:void 0,"& > caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& > thead > tr > th, & > tfoot > tr > th, & > tbody > tr > th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:ke({size:i,sizes:e.fontSizes}),padding:`${ke({size:r,sizes:e.spacing})} ${ke({size:n,sizes:e.spacing})}`},"& > thead > tr > th":{borderBottom:o},"& > tfoot > tr > th, & > tbody > tr > th":{borderTop:o},"& > tbody > tr > td":{padding:`${ke({size:r,sizes:e.spacing})} ${ke({size:n,sizes:e.spacing})}`,borderTop:o,fontSize:ke({size:i,sizes:e.fontSizes})},"& > tbody > tr:first-of-type > td, & > tbody > tr:first-of-type > th":{borderTop:"none"},"& > thead > tr > th, & > tbody > tr > td":{borderRight:s?o:"none","&:last-of-type":{borderRight:"none",borderLeft:s?o:"none"}},"& > tbody > tr > th":{borderRight:s?o:"none"},"&[data-striped] > tbody > tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] > tbody > tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const DPe=RPe;var LPe=Object.defineProperty,FPe=Object.defineProperties,zPe=Object.getOwnPropertyDescriptors,GC=Object.getOwnPropertySymbols,lQ=Object.prototype.hasOwnProperty,uQ=Object.prototype.propertyIsEnumerable,zj=(e,t,n)=>t in e?LPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BPe=(e,t)=>{for(var n in t||(t={}))lQ.call(t,n)&&zj(e,n,t[n]);if(GC)for(var n of GC(t))uQ.call(t,n)&&zj(e,n,t[n]);return e},WPe=(e,t)=>FPe(e,zPe(t)),VPe=(e,t)=>{var n={};for(var r in e)lQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GC)for(var r of GC(e))t.indexOf(r)<0&&uQ.call(e,r)&&(n[r]=e[r]);return n};const jPe={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},cQ=I.exports.forwardRef((e,t)=>{const n=Ue("Table",jPe,e),{className:r,children:i,striped:a,highlightOnHover:s,captionSide:o,horizontalSpacing:l,verticalSpacing:u,fontSize:c,unstyled:d,withBorder:p,withColumnBorders:h,variant:m}=n,g=VPe(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders","variant"]),{classes:y,cx:v}=DPe({captionSide:o,verticalSpacing:u,horizontalSpacing:l,fontSize:c,withBorder:p,withColumnBorders:h},{unstyled:d,name:"Table",variant:m});return x(vt,{...WPe(BPe({},g),{component:"table",ref:t,className:v(y.root,r),"data-striped":a||void 0,"data-hover":s||void 0}),children:i})});cQ.displayName="@mantine/core/Table";const SP={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[HPe,QR]=Ay(SP.context);var UPe=Object.defineProperty,Bj=Object.getOwnPropertySymbols,GPe=Object.prototype.hasOwnProperty,qPe=Object.prototype.propertyIsEnumerable,Wj=(e,t,n)=>t in e?UPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KPe=(e,t)=>{for(var n in t||(t={}))GPe.call(t,n)&&Wj(e,n,t[n]);if(Bj)for(var n of Bj(t))qPe.call(t,n)&&Wj(e,n,t[n]);return e};function ZPe({orientation:e,inverted:t,placement:n},r,i){const a=e==="vertical";return i==="default"?{[a?n==="left"?"borderRight":"borderLeft":t?"borderTop":"borderBottom"]:`${G(2)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`}:i==="outline"?{[a?n==="left"?"borderRight":"borderLeft":t?"borderTop":"borderBottom"]:`${G(1)} solid ${r.colorScheme==="dark"?r.colors.dark[4]:r.colors.gray[3]}`}:i==="pills"?{gap:`calc(${r.spacing.sm} / 2)`}:{}}var XPe=tt((e,t,{variant:n})=>{const r=t.orientation==="vertical";return{tabsList:KPe({display:"flex",flexWrap:"wrap",flexDirection:r?"column":"row",justifyContent:RJ[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},ZPe(t,e,n))}});const JPe=XPe;var YPe=Object.defineProperty,QPe=Object.defineProperties,eMe=Object.getOwnPropertyDescriptors,qC=Object.getOwnPropertySymbols,dQ=Object.prototype.hasOwnProperty,pQ=Object.prototype.propertyIsEnumerable,Vj=(e,t,n)=>t in e?YPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tMe=(e,t)=>{for(var n in t||(t={}))dQ.call(t,n)&&Vj(e,n,t[n]);if(qC)for(var n of qC(t))pQ.call(t,n)&&Vj(e,n,t[n]);return e},nMe=(e,t)=>QPe(e,eMe(t)),rMe=(e,t)=>{var n={};for(var r in e)dQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qC)for(var r of qC(e))t.indexOf(r)<0&&pQ.call(e,r)&&(n[r]=e[r]);return n};const iMe={grow:!1,position:"left"},hQ=I.exports.forwardRef((e,t)=>{const n=Ue("TabsList",iMe,e),{children:r,className:i,grow:a,position:s}=n,o=rMe(n,["children","className","grow","position"]),{orientation:l,variant:u,color:c,radius:d,inverted:p,placement:h,classNames:m,styles:g,unstyled:y}=QR(),{classes:v,cx:b}=JPe({orientation:l,grow:a,color:c,position:s,radius:d,inverted:p,placement:h},{name:"Tabs",unstyled:y,classNames:m,styles:g,variant:u});return x(vt,{...nMe(tMe({},o),{className:b(v.tabsList,i),ref:t,role:"tablist","aria-orientation":l}),children:r})});hQ.displayName="@mantine/core/TabsList";var aMe=tt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}}));const sMe=aMe;var oMe=Object.defineProperty,lMe=Object.defineProperties,uMe=Object.getOwnPropertyDescriptors,KC=Object.getOwnPropertySymbols,fQ=Object.prototype.hasOwnProperty,mQ=Object.prototype.propertyIsEnumerable,jj=(e,t,n)=>t in e?oMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cMe=(e,t)=>{for(var n in t||(t={}))fQ.call(t,n)&&jj(e,n,t[n]);if(KC)for(var n of KC(t))mQ.call(t,n)&&jj(e,n,t[n]);return e},dMe=(e,t)=>lMe(e,uMe(t)),pMe=(e,t)=>{var n={};for(var r in e)fQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KC)for(var r of KC(e))t.indexOf(r)<0&&mQ.call(e,r)&&(n[r]=e[r]);return n};const hMe={},gQ=I.exports.forwardRef((e,t)=>{const n=Ue("TabsPanel",hMe,e),{value:r,children:i,sx:a,className:s}=n,o=pMe(n,["value","children","sx","className"]),l=QR(),{classes:u,cx:c}=sMe({orientation:l.orientation,color:l.color,radius:l.radius,inverted:l.inverted,placement:l.placement},{name:"Tabs",unstyled:l.unstyled,classNames:l.classNames,styles:l.styles,variant:l.variant}),d=l.getPanelId(r),p=l.value===r,h=l.keepMounted||p?i:null;return I.exports.useEffect(()=>(l.setMountedPanelIds(m=>[...m,d]),l.setMountedPanelIds(m=>m.filter(g=>g!==d))),[d]),x(vt,{...dMe(cMe({},o),{ref:t,sx:[{display:p?void 0:"none"},...pR(a)],className:c(u.panel,s),role:"tabpanel",id:d,"aria-labelledby":l.getTabId(r)}),children:h})});gQ.displayName="@mantine/core/TabsPanel";var fMe=Object.defineProperty,mMe=Object.defineProperties,gMe=Object.getOwnPropertyDescriptors,Hj=Object.getOwnPropertySymbols,yMe=Object.prototype.hasOwnProperty,vMe=Object.prototype.propertyIsEnumerable,Uj=(e,t,n)=>t in e?fMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mg=(e,t)=>{for(var n in t||(t={}))yMe.call(t,n)&&Uj(e,n,t[n]);if(Hj)for(var n of Hj(t))vMe.call(t,n)&&Uj(e,n,t[n]);return e},Gj=(e,t)=>mMe(e,gMe(t));function bMe(e,{orientation:t,color:n,radius:r,inverted:i,placement:a},s){const o=t==="vertical",l=e.fn.variant({color:n,variant:"filled"}),u=G(e.fn.radius(r)),c=t==="vertical"?a==="left"?`${u} 0 0 ${u}`:` 0 ${u} ${u} 0`:i?`0 0 ${u} ${u}`:`${u} ${u} 0 0`;return s==="default"?Gj(mg({[o?a==="left"?"borderRight":"borderLeft":i?"borderTop":"borderBottom"]:`${G(2)} solid transparent`,[o?a==="left"?"marginRight":"marginLeft":i?"marginTop":"marginBottom"]:G(-2),borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":mg({borderColor:l.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:l.background}))}):s==="outline"?{borderRadius:c,border:`${G(1)} solid transparent`,[o?a==="left"?"borderRight":"borderLeft":i?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:o?0:i?"unset":G(-1),top:o?0:i?G(-1):"unset",[o?"width":"height"]:G(1),right:o?a==="left"?G(-1):"unset":0,left:o?a==="left"?"unset":G(-1):0}}}:s==="pills"?Gj(mg({borderRadius:e.fn.radius(r)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":mg({backgroundColor:l.background,color:e.white},e.fn.hover({backgroundColor:l.background}))}):{}}var wMe=tt((e,t,{variant:n})=>({tabLabel:{},tab:mg({position:"relative",padding:`${e.spacing.xs} ${e.spacing.md}`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":mg({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},bMe(e,t,n)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:G(7)}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:G(7)}}}));const xMe=wMe;var _Me=Object.defineProperty,kMe=Object.defineProperties,SMe=Object.getOwnPropertyDescriptors,ZC=Object.getOwnPropertySymbols,yQ=Object.prototype.hasOwnProperty,vQ=Object.prototype.propertyIsEnumerable,qj=(e,t,n)=>t in e?_Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CMe=(e,t)=>{for(var n in t||(t={}))yQ.call(t,n)&&qj(e,n,t[n]);if(ZC)for(var n of ZC(t))vQ.call(t,n)&&qj(e,n,t[n]);return e},IMe=(e,t)=>kMe(e,SMe(t)),$Me=(e,t)=>{var n={};for(var r in e)yQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZC)for(var r of ZC(e))t.indexOf(r)<0&&vQ.call(e,r)&&(n[r]=e[r]);return n};const TMe={},bQ=I.exports.forwardRef((e,t)=>{const n=Ue("TabsTab",TMe,e),{value:r,children:i,onKeyDown:a,onClick:s,className:o,icon:l,rightSection:u,color:c}=n,d=$Me(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]),p=QR(),h=!!l,m=!!u,{theme:g,classes:y,cx:v}=xMe({withIcon:h||m&&!i,withRightSection:m||h&&!i,orientation:p.orientation,color:c||p.color,radius:p.radius,inverted:p.inverted,placement:p.placement},{name:"Tabs",unstyled:p.unstyled,classNames:p.classNames,styles:p.styles,variant:p.variant}),b=r===p.value,_=p.getPanelId(r),k=p.mountedPanelIds.includes(r)?_:void 0,S=$=>{p.onTabChange(p.allowTabDeactivation&&r===p.value?null:r),s==null||s($)};return B(Z1,{...IMe(CMe({},d),{unstyled:p.unstyled,className:v(y.tab,o),"data-active":b||void 0,ref:t,type:"button",role:"tab",id:p.getTabId(r),"aria-selected":b,tabIndex:b||p.value===null?0:-1,"aria-controls":k,onClick:S,onKeyDown:pye({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:p.activateTabWithKeyboard,loop:p.loop,dir:g.dir,orientation:p.orientation,onKeyDown:a})}),children:[l&&x("span",{className:y.tabIcon,children:l}),i&&x("span",{className:y.tabLabel,children:i}),u&&x("span",{className:y.tabRightSection,children:u})]})});bQ.displayName="@mantine/core/Tab";function wQ({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:a,id:s,activateTabWithKeyboard:o,allowTabDeactivation:l,variant:u,color:c,radius:d,inverted:p,placement:h,keepMounted:m=!0,classNames:g,styles:y,unstyled:v}){const b=Vu(s),[_,k]=I.exports.useState([]),[S,$]=Zo({value:t,defaultValue:e,finalValue:null,onChange:n});return x(HPe,{value:{placement:h,value:S,orientation:r,id:b,loop:a,activateTabWithKeyboard:o,getTabId:o5(`${b}-tab`,SP.value),getPanelId:o5(`${b}-panel`,SP.value),onTabChange:$,setMountedPanelIds:k,mountedPanelIds:_,allowTabDeactivation:l,variant:u,color:c,radius:d,inverted:p,keepMounted:m,classNames:g,styles:y,unstyled:v},children:i})}wQ.displayName="@mantine/core/TabsProvider";var NMe=tt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}}));const EMe=NMe;var OMe=Object.defineProperty,PMe=Object.defineProperties,MMe=Object.getOwnPropertyDescriptors,XC=Object.getOwnPropertySymbols,xQ=Object.prototype.hasOwnProperty,_Q=Object.prototype.propertyIsEnumerable,Kj=(e,t,n)=>t in e?OMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AMe=(e,t)=>{for(var n in t||(t={}))xQ.call(t,n)&&Kj(e,n,t[n]);if(XC)for(var n of XC(t))_Q.call(t,n)&&Kj(e,n,t[n]);return e},RMe=(e,t)=>PMe(e,MMe(t)),DMe=(e,t)=>{var n={};for(var r in e)xQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XC)for(var r of XC(e))t.indexOf(r)<0&&_Q.call(e,r)&&(n[r]=e[r]);return n};const LMe={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},bi=I.exports.forwardRef((e,t)=>{const n=Ue("Tabs",LMe,e),{defaultValue:r,value:i,orientation:a,loop:s,activateTabWithKeyboard:o,allowTabDeactivation:l,children:u,id:c,onTabChange:d,variant:p,color:h,className:m,unstyled:g,classNames:y,styles:v,radius:b,inverted:_,keepMounted:k,placement:S}=n,$=DMe(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:N,cx:P}=EMe({orientation:a,color:h,radius:b,inverted:_,placement:S},{unstyled:g,name:"Tabs",classNames:y,styles:v,variant:p});return x(wQ,{activateTabWithKeyboard:o,defaultValue:r,orientation:a,onTabChange:d,value:i,id:c,loop:s,allowTabDeactivation:l,color:h,variant:p,radius:b,inverted:_,keepMounted:k,placement:S,classNames:y,styles:v,unstyled:g,children:x(vt,{...RMe(AMe({},$),{className:P(N.root,m),id:c,ref:t}),children:u})})});bi.List=hQ;bi.Tab=bQ;bi.Panel=gQ;bi.displayName="@mantine/core/Tabs";var FMe=Object.defineProperty,zMe=Object.defineProperties,BMe=Object.getOwnPropertyDescriptors,Zj=Object.getOwnPropertySymbols,WMe=Object.prototype.hasOwnProperty,VMe=Object.prototype.propertyIsEnumerable,Xj=(e,t,n)=>t in e?FMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jMe=(e,t)=>{for(var n in t||(t={}))WMe.call(t,n)&&Xj(e,n,t[n]);if(Zj)for(var n of Zj(t))VMe.call(t,n)&&Xj(e,n,t[n]);return e},HMe=(e,t)=>zMe(e,BMe(t));function UMe(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:G(e):n.headings.sizes[t].fontSize}function GMe(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var qMe=tt((e,{element:t,weight:n,inline:r},{size:i})=>({root:HMe(jMe({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:UMe(i,t,e),lineHeight:r?1:GMe(i,t,e),margin:0})}));const KMe=qMe;var ZMe=Object.defineProperty,JC=Object.getOwnPropertySymbols,kQ=Object.prototype.hasOwnProperty,SQ=Object.prototype.propertyIsEnumerable,Jj=(e,t,n)=>t in e?ZMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XMe=(e,t)=>{for(var n in t||(t={}))kQ.call(t,n)&&Jj(e,n,t[n]);if(JC)for(var n of JC(t))SQ.call(t,n)&&Jj(e,n,t[n]);return e},JMe=(e,t)=>{var n={};for(var r in e)kQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JC)for(var r of JC(e))t.indexOf(r)<0&&SQ.call(e,r)&&(n[r]=e[r]);return n};const YMe={order:1},t$=I.exports.forwardRef((e,t)=>{const n=Ue("Title",YMe,e),{className:r,order:i,children:a,unstyled:s,size:o,weight:l,inline:u,variant:c}=n,d=JMe(n,["className","order","children","unstyled","size","weight","inline","variant"]),{classes:p,cx:h}=KMe({element:`h${i}`,weight:l,inline:u},{name:"Title",unstyled:s,variant:c,size:o});return[1,2,3,4,5,6].includes(i)?x(Te,{...XMe({variant:c,component:`h${i}`,ref:t,className:h(p.root,r)},d),children:a}):null});t$.displayName="@mantine/core/Title";var QMe=Object.defineProperty,eAe=Object.defineProperties,tAe=Object.getOwnPropertyDescriptors,Yj=Object.getOwnPropertySymbols,nAe=Object.prototype.hasOwnProperty,rAe=Object.prototype.propertyIsEnumerable,Qj=(e,t,n)=>t in e?QMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v_=(e,t)=>{for(var n in t||(t={}))nAe.call(t,n)&&Qj(e,n,t[n]);if(Yj)for(var n of Yj(t))rAe.call(t,n)&&Qj(e,n,t[n]);return e},b_=(e,t)=>eAe(e,tAe(t)),iAe=tt(e=>{const t=mye(e.headings.sizes).reduce((n,r)=>{const i=e.headings.sizes[r];return n[`& ${r}`]=b_(v_({fontFamily:e.headings.fontFamily,fontWeight:i.fontWeight||e.headings.fontWeight,marginTop:typeof i.lineHeight=="number"?`calc(${e.spacing.xl} * ${i.lineHeight})`:e.spacing.xl,marginBottom:e.spacing.sm},i),{[e.fn.smallerThan("sm")]:{fontSize:`calc(${G(i.fontSize)} / 1.3)`}}),n},{});return{root:b_(v_(b_(v_({},e.fn.fontStyles()),{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,fontSize:e.fontSizes.md,[e.fn.smallerThan("sm")]:{fontSize:e.fontSizes.sm}}),t),{"& img":{maxWidth:"100%",marginBottom:e.spacing.xs},"& p":{marginTop:0,marginBottom:e.spacing.lg},"& mark":{backgroundColor:e.fn.themeColor("yellow",e.colorScheme==="dark"?5:2),color:e.colorScheme==="dark"?e.colors.dark[9]:"inherit"},"& hr":{marginTop:e.spacing.md,marginBottom:e.spacing.sm,borderBottom:0,borderLeft:0,borderRight:0,borderTop:`${G(1)} dashed ${e.colors.gray[e.colorScheme==="dark"?4:6]}`},"& a":b_(v_({},e.fn.focusStyles()),{color:e.colors[e.primaryColor][e.colorScheme==="dark"?4:6],textDecoration:"none","&:hover":{textDecoration:"underline"}}),"& pre":{padding:e.spacing.xs,lineHeight:e.lineHeight,margin:0,marginTop:e.spacing.md,marginBottom:e.spacing.md,overflowX:"auto",fontFamily:e.fontFamilyMonospace,fontSize:e.fontSizes.sm,borderRadius:e.radius.sm,backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],"& code":{backgroundColor:"transparent",padding:0,borderRadius:0,color:"inherit",border:0}},"& code":{lineHeight:e.lineHeight,padding:`${G(1)} ${G(5)}`,borderRadius:e.radius.sm,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[9]:e.colors.gray[0],fontFamily:e.fontFamilyMonospace,fontSize:e.fontSizes.xs,border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[9]:e.colors.gray[3]}`},"& ul, & ol":{marginBottom:e.spacing.md,paddingLeft:38,"& li":{marginTop:e.spacing.xs}},"& table":{width:"100%",borderCollapse:"collapse",captionSide:"bottom",marginBottom:e.spacing.md,"& caption":{marginTop:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:14,padding:`${G(7)} ${G(10)}`},"& thead th":{borderBottom:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`},"& tfoot th":{borderTop:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`},"& td":{padding:`${G(7)} ${G(10)}`,borderBottom:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,fontSize:14},"& tr:last-of-type td":{borderBottom:"none"}},"& blockquote":{fontSize:e.fontSizes.lg,lineHeight:e.lineHeight,margin:`${e.spacing.md} 0`,borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm,padding:`${e.spacing.md} ${e.spacing.lg}`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderLeft:`${G(6)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,"& cite":{display:"block",fontSize:e.fontSizes.sm,marginTop:e.spacing.xs,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],overflow:"hidden",textOverflow:"ellipsis"}}})}});const aAe=iAe;var sAe=Object.defineProperty,YC=Object.getOwnPropertySymbols,CQ=Object.prototype.hasOwnProperty,IQ=Object.prototype.propertyIsEnumerable,eH=(e,t,n)=>t in e?sAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oAe=(e,t)=>{for(var n in t||(t={}))CQ.call(t,n)&&eH(e,n,t[n]);if(YC)for(var n of YC(t))IQ.call(t,n)&&eH(e,n,t[n]);return e},lAe=(e,t)=>{var n={};for(var r in e)CQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YC)for(var r of YC(e))t.indexOf(r)<0&&IQ.call(e,r)&&(n[r]=e[r]);return n};const $Q=I.exports.forwardRef((e,t)=>{const n=Ue("TypographyStylesProvider",{},e),{className:r,unstyled:i,variant:a}=n,s=lAe(n,["className","unstyled","variant"]),{classes:o,cx:l}=aAe(null,{name:"TypographyStylesProvider",unstyled:i,variant:a});return x(vt,{...oAe({className:l(o.root,r),ref:t},s)})});$Q.displayName="@mantine/core/TypographyStylesProvider";const eD=()=>!window.invokeNative,uAe=()=>{},wt=(e,t)=>{const n=I.exports.useRef(uAe);I.exports.useEffect(()=>{n.current=t},[t]),I.exports.useEffect(()=>{const r=i=>{const{action:a,data:s}=i.data;n.current&&a===e&&n.current(s)};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[e])};async function Ee(e,t,n){const r={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};if(eD()&&n)return n;const i=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${i}/${e}`,r)).json()}const TQ=I.exports.createContext(null),cAe=({children:e})=>{const[t,n]=I.exports.useState(!1),[r,i]=I.exports.useState("");return wt("setVisible",a=>{i(a.page),n(a.visible)}),I.exports.useEffect(()=>{if(!t)return;const a=s=>{["Escape"].includes(s.code)&&(eD()?n(!t):Ee("hideUI"))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t]),x(TQ.Provider,{value:{visible:t,page:r,setVisible:n},children:x("div",{style:{visibility:t?"visible":"hidden",height:"100%"},children:e})})},dAe=()=>I.exports.useContext(TQ),tH=e=>{let t;const n=new Set,r=(c,d)=>{const p=typeof c=="function"?c(t):c;if(!Object.is(p,t)){const h=t;t=(d!=null?d:typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(m=>m(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}},u=t=e(r,i,l);return l},pAe=e=>e?tH(e):tH;var NQ={exports:{}},EQ={},OQ={exports:{}},PQ={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=I.exports;function hAe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fAe=typeof Object.is=="function"?Object.is:hAe,mAe=ey.useState,gAe=ey.useEffect,yAe=ey.useLayoutEffect,vAe=ey.useDebugValue;function bAe(e,t){var n=t(),r=mAe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return yAe(function(){i.value=n,i.getSnapshot=t,pE(i)&&a({inst:i})},[e,n,t]),gAe(function(){return pE(i)&&a({inst:i}),e(function(){pE(i)&&a({inst:i})})},[e]),vAe(n),n}function pE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fAe(e,n)}catch{return!0}}function wAe(e,t){return t()}var xAe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wAe:bAe;PQ.useSyncExternalStore=ey.useSyncExternalStore!==void 0?ey.useSyncExternalStore:xAe;(function(e){e.exports=PQ})(OQ);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n$=I.exports,_Ae=OQ.exports;function kAe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var SAe=typeof Object.is=="function"?Object.is:kAe,CAe=_Ae.useSyncExternalStore,IAe=n$.useRef,$Ae=n$.useEffect,TAe=n$.useMemo,NAe=n$.useDebugValue;EQ.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=IAe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=TAe(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var m=s.value;if(i(m,h))return d=m}return d=h}if(m=d,SAe(c,h))return m;var g=r(h);return i!==void 0&&i(m,g)?m:(c=h,d=g)}var u=!1,c,d,p=n===void 0?null:n;return[function(){return l(t())},p===null?void 0:function(){return l(p())}]},[t,n,r,i]);var o=CAe(e,a[0],a[1]);return $Ae(function(){s.hasValue=!0,s.value=o},[o]),NAe(o),o};(function(e){e.exports=EQ})(NQ);const EAe=yA(NQ.exports),{useDebugValue:OAe}=kr,{useSyncExternalStoreWithSelector:PAe}=EAe;const MAe=e=>e;function AAe(e,t=MAe,n){const r=PAe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return OAe(r),r}const nH=e=>{const t=typeof e=="function"?pAe(e):e,n=(r,i)=>AAe(t,r,i);return Object.assign(n,t),n},Nr=e=>e?nH(e):nH;var tD=e=>Nr(e);const Zt=Nr(e=>({loading:!0,copiedCharges:[],identifier:"",playerJob:"",playerGrade:0,isBoss:!1,name:"",phoneNumber:"",sidebarOrder:["warrants","bolos","tags","owners","paramedics","patients","officers","criminals","suspects","civilians","employees","vehicles","licenses","properties","jobs","weapons","evidence","charges","linkedIncidents","linkedReports","linkedPoliceReports","linkedProfiles","photos"],policePages:["home","profiles","vehicles","properties","businesses","incidents","reports","trainingReports","policeReports","evidence","weapons","map","charges","legislation","employees"],emsPages:["home","profiles","reports","trainingReports","map","employees"],citizenPages:["profiles","charges","legislation"],dateFormat:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},lastEmployeeIdentifier:void 0,showIdentifiers:!0,setDateFormat:t=>e({dateFormat:t}),setPolicePages:t=>e({policePages:t}),setEMSPages:t=>e({emsPages:t}),setCitizenPages:t=>e({citizenPages:t}),setSidebarOrder:t=>e({sidebarOrder:t}),setName:t=>e({name:t}),setPhoneNumber:t=>e({phoneNumber:t}),setIdentifier:t=>e({identifier:t}),setPlayerJob:t=>e({playerJob:t}),setPlayerGrade:t=>e({playerGrade:t}),setIsBoss:t=>e({isBoss:t}),setLoading:t=>e({loading:t}),setCopiedCharges:t=>e({copiedCharges:t}),setLastEmployeeIdentifier:t=>e({lastEmployeeIdentifier:t}),setImages:t=>e({images:t}),setShowIdentifiers:t=>e({showIdentifiers:t})})),j={};String.prototype.format=function(...e){let t=this;for(let n=0;n<e.length;n++)t=t.replace("%s",e[n]);return t};function rH(e){for(const t in j)j[t]=t;for(const[t,n]of Object.entries(e))j[t]=n}const Us=Nr(e=>({profiles:[],addProfile:t=>e(n=>({profiles:[...n.profiles,t]})),updateProfile:(t,n)=>e(r=>({profiles:r.profiles.map(a=>{if(a.identifier===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setProfiles:t=>e({profiles:t}),toggleWarrant:(t,n)=>e(r=>({profiles:r.profiles.map(a=>{var s;if(a.identifier===t){const o={...a},l=((s=o.sideBarData)==null?void 0:s.warrants)||[],u=l.some(c=>c.incidentId===n.incidentId);return o.sideBarData={...o.sideBarData,warrants:u?l.filter(c=>c.incidentId!==n.incidentId):[...l,n]},o}return a})}))})),Rh=Nr(e=>({vehicles:[],addVehicle:t=>e(n=>({vehicles:[...n.vehicles,t]})),updateVehicle:(t,n)=>e(r=>{const i=r.vehicles.map(a=>{if(a.plate===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a});return{...r,vehicles:i}}),setVehicles:t=>e({vehicles:t}),toggleBOLO:(t,n)=>e(r=>({vehicles:r.vehicles.map(a=>{var s;if(a.plate===t){const o={...a},l=((s=o.sideBarData)==null?void 0:s.bolos)||[],u=l.some(c=>c.id===n.id);return o.sideBarData={...o.sideBarData,bolos:u?l.filter(c=>c.id!==n.id):[...l,n]},o}return a})}))})),nD=Nr(e=>({businesses:[],addBusiness:t=>e(n=>({businesses:[...n.businesses,t]})),updateBusiness:(t,n)=>e(r=>{const i=r.businesses.map(a=>{if(a.name===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a});return{...r,businesses:i}}),setBusinesses:t=>e({businesses:t})})),r$=Nr(e=>({properties:[],addProperty:t=>e(n=>({properties:[...n.properties,t]})),updateProperty:(t,n)=>e(r=>{const i=r.properties.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a});return{...r,properties:i}}),setProperties:t=>e({properties:t})})),Ed=Nr(e=>({incidents:[],addIncident:t=>e(n=>({incidents:[...n.incidents.filter(i=>i.id!==t.id),t]})),removeIncident:t=>e(n=>({incidents:n.incidents.filter(i=>i.id!==t)})),updateIncident:(t,n)=>e(r=>({incidents:r.incidents.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),updateCriminalFine:(t,n,r)=>e(i=>{const a=i.incidents.map(o=>{if(o.id===t){let l={...o};return l.sideBarData.criminals?(l.sideBarData.criminals=l.sideBarData.criminals.map(u=>(u.identifier===n&&(u.fine=r),u)),l):o}return o}),s=a.find(o=>o.id===t);return{incidents:a,updatedIncident:s}}),updateCriminalSentence:(t,n,r)=>e(i=>{const a=i.incidents.map(o=>{if(o.id===t){let l={...o};return l.sideBarData.criminals?(l.sideBarData.criminals=l.sideBarData.criminals.map(u=>(u.identifier===n&&(u.sentence=r),u)),l):o}return o}),s=a.find(o=>o.id===t);return{incidents:a,updatedIncident:s}}),updateCriminalPoints:(t,n,r)=>e(i=>{const a=i.incidents.map(o=>{if(o.id===t){let l={...o};return l.sideBarData.criminals?(l.sideBarData.criminals=l.sideBarData.criminals.map(u=>(u.identifier===n&&(u.points=r),u)),l):o}return o}),s=a.find(o=>o.id===t);return{incidents:a,updatedIncident:s}}),updateCharges:(t,n,r)=>e(i=>{const a=i.incidents.map(o=>{if(o.id===t){let l={...o};return l.sideBarData.criminals?(l.sideBarData.criminals=l.sideBarData.criminals.map(u=>(u.identifier===n&&(u.charges=r),u)),l):o}return o}),s=a.find(o=>o.id===t);return{incidents:a,updatedIncident:s}}),removeChargeWithId:(t,n,r)=>e(i=>({incidents:i.incidents.map(s=>{var o;return s.id===t?{...s,sideBarData:{...s.sideBarData,criminals:(o=s.sideBarData.criminals)==null?void 0:o.map(u=>{var c;if(u.identifier===n){const d=(c=u.charges)==null?void 0:c.map(p=>{if(p.id===r){const h=p.amount-1;return h>0?{...p,amount:h}:null}return p}).filter(p=>p!==null);return{...u,charges:d}}return u})}}:s})})),setIncidents:t=>e({incidents:t})})),Gu=Nr(e=>({reports:[],addReport:t=>e(n=>({reports:[...n.reports,t]})),updateReport:(t,n)=>e(r=>({reports:r.reports.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setReports:t=>e({reports:t}),removeReport:t=>e(n=>({reports:n.reports.filter(r=>r.id!==t)}))})),d1=Nr(e=>({policeReports:[],addPoliceReport:t=>e(n=>({policeReports:[...n.policeReports,t]})),updatePoliceReport:(t,n)=>e(r=>({policeReports:r.policeReports.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setPoliceReports:t=>e({policeReports:t}),removePoliceReport:t=>e(n=>({policeReports:n.policeReports.filter(r=>r.id!==t)}))})),ew=Nr(e=>({trainingReports:[],addTrainingReport:t=>e(n=>({trainingReports:[...n.trainingReports,t]})),updateTrainingReport:(t,n)=>e(r=>({trainingReports:r.trainingReports.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setTrainingReports:t=>e({trainingReports:t}),removeTrainingReport:t=>e(n=>({trainingReports:n.trainingReports.filter(r=>r.id!==t)}))})),tw=Nr(e=>({evidence:[],addEvidence:t=>e(n=>({evidence:[...n.evidence,t]})),updateEvidence:(t,n)=>e(r=>({evidence:r.evidence.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setEvidence:t=>e({evidence:t}),removeEvidence:t=>e(n=>({evidence:n.evidence.filter(r=>r.id!==t)}))})),i$=Nr(e=>({charges:[],addCharge:t=>e(n=>({charges:[...n.charges,t]})),updateCharge:(t,n)=>e(r=>({charges:r.charges.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setCharges:t=>e({charges:t}),removeCharge:t=>e(n=>({charges:n.charges.filter(r=>r.id!==t)}))})),Qo=Nr(e=>({employees:[],licenses:[],status:[],minTrainingReportGrade:0,maxTraineeGrade:0,setMinTrainingReportGrade:t=>e({minTrainingReportGrade:t}),setMaxTraineeGrade:t=>e({maxTraineeGrade:t}),setEmployeeLicenses:t=>e({licenses:t}),setStatus:t=>e({status:t}),addEmployee:t=>e(n=>{const r=n.employees.findIndex(i=>i.identifier===t.identifier);return r!==-1?{employees:n.employees.map((a,s)=>s===r?t:a)}:{employees:[...n.employees,t]}}),updateEmployee:(t,n)=>e(r=>({employees:r.employees.map(a=>{if(a.identifier===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setEmployees:t=>e({employees:t})})),nw=Nr(e=>({weapons:[],addWeapon:t=>e(n=>({weapons:[...n.weapons,t]})),updateWeapon:(t,n)=>e(r=>({weapons:r.weapons.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setWeapons:t=>e({weapons:t}),removeWeapon:t=>e(n=>({weapons:n.weapons.filter(r=>r.id!==t)}))})),rD=Nr(e=>({players:[],addPlayer:t=>e(n=>({players:[...n.players,t]})),setPlayers:t=>e({players:t})})),Fy=Nr(e=>({tags:[],addTag:t=>e(n=>({tags:[...n.tags,{name:t.name,color:t.color,minGrade:t.minGrade,grades:t.grades}]})),setTags:t=>e({tags:t})})),iD=Nr(e=>({messages:[],addMessage:t=>e(n=>({messages:[...n.messages,t]})),setMessages:t=>e({messages:t})})),aD=Nr(e=>({announcements:[],addAnnouncement:t=>e(n=>({announcements:[...n.announcements,t]})),setAnnouncements:t=>e({announcements:t}),togglePin:(t,n)=>e(r=>({announcements:r.announcements.map(i=>i.id===t?{...i,pinned:n}:i)})),removeAnnouncement:t=>e(n=>({announcements:n.announcements.filter(r=>r.id!==t)}))})),sD=Nr(e=>({calls:[],addCall:t=>e(n=>({calls:[...n.calls,t]})),removeCall:t=>e(n=>({calls:n.calls.filter(r=>r.id!==t)})),setCalls:t=>e({calls:t})}));function RAe(){const{name:e,phoneNumber:t}=Zt(),[n,r]=I.exports.useState(""),[i,a]=I.exports.useState(!1),[s,o]=I.exports.useState(""),[l,u]=I.exports.useState(!1),c=()=>{!n||!s||(Ee("createPoliceReport",{title:n,content:s,hideName:i,hidePhoneNumber:l}),Ee("hideUI"))};return x(nr,{title:j.police_report,opened:!0,centered:!0,onClose:()=>Ee("hideUI"),children:B(Ce,{spacing:20,children:[B(Ce,{spacing:10,children:[x(Ze,{label:j.report_name,placeholder:j.report_name,value:e,readOnly:!0,disabled:i}),x(Qg,{label:j.hide_name,checked:i,onChange:d=>a(d.currentTarget.checked)})]}),B(Ce,{spacing:10,children:[x(Ze,{label:j.phone_number,placeholder:j.phone_number,value:t,readOnly:!0,disabled:l}),x(Qg,{label:j.hide_phone_number,checked:l,onChange:d=>u(d.currentTarget.checked)})]}),x(Ze,{label:j.title,placeholder:j.title,required:!0,value:n,onChange:d=>r(d.currentTarget.value)}),x(xs,{label:j.content,placeholder:j.content,required:!0,value:s,onChange:d=>o(d.currentTarget.value)}),x(me,{position:"right",children:x(Ct,{onClick:c,children:j.confirm})})]})})}var gc={exports:{}},DAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LAe=DAe,FAe=LAe;function MQ(){}function AQ(){}AQ.resetWarningCache=MQ;var zAe=function(){function e(r,i,a,s,o,l){if(l!==FAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:AQ,resetWarningCache:MQ};return n.PropTypes=n,n};gc.exports=zAe();var BAe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},WAe=Object.defineProperty,VAe=Object.defineProperties,jAe=Object.getOwnPropertyDescriptors,QC=Object.getOwnPropertySymbols,RQ=Object.prototype.hasOwnProperty,DQ=Object.prototype.propertyIsEnumerable,iH=(e,t,n)=>t in e?WAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aH=(e,t)=>{for(var n in t||(t={}))RQ.call(t,n)&&iH(e,n,t[n]);if(QC)for(var n of QC(t))DQ.call(t,n)&&iH(e,n,t[n]);return e},HAe=(e,t)=>VAe(e,jAe(t)),UAe=(e,t)=>{var n={};for(var r in e)RQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QC)for(var r of QC(e))t.indexOf(r)<0&&DQ.call(e,r)&&(n[r]=e[r]);return n},ut=(e,t,n)=>{const r=I.exports.forwardRef((i,a)=>{var s=i,{color:o="currentColor",size:l=24,stroke:u=2,children:c}=s,d=UAe(s,["color","size","stroke","children"]);return I.exports.createElement("svg",aH(HAe(aH({ref:a},BAe),{width:l,height:l,stroke:o,strokeWidth:u,className:`tabler-icon tabler-icon-${e}`}),d),[...n.map(([p,h])=>I.exports.createElement(p,h)),...c||[]])});return r.propTypes={color:gc.exports.string,size:gc.exports.oneOfType([gc.exports.string,gc.exports.number]),stroke:gc.exports.oneOfType([gc.exports.string,gc.exports.number])},r.displayName=`${t}`,r},GAe=ut("alert-triangle","IconAlertTriangle",[["path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 17h.01",key:"svg-2"}]]),qAe=ut("align-center","IconAlignCenter",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M8 12l8 0",key:"svg-1"}],["path",{d:"M6 18l12 0",key:"svg-2"}]]),KAe=ut("align-justified","IconAlignJustified",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l12 0",key:"svg-2"}]]),ZAe=ut("align-left","IconAlignLeft",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l10 0",key:"svg-1"}],["path",{d:"M4 18l14 0",key:"svg-2"}]]),XAe=ut("align-right","IconAlignRight",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M10 12l10 0",key:"svg-1"}],["path",{d:"M6 18l14 0",key:"svg-2"}]]),_s=ut("arrow-back","IconArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]]),JAe=ut("blockquote","IconBlockquote",[["path",{d:"M6 15h15",key:"svg-0"}],["path",{d:"M21 19h-15",key:"svg-1"}],["path",{d:"M15 11h6",key:"svg-2"}],["path",{d:"M21 7h-6",key:"svg-3"}],["path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-4"}],["path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2",key:"svg-5"}]]),YAe=ut("bold","IconBold",[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]]),QAe=ut("businessplan","IconBusinessplan",[["path",{d:"M16 6m-5 0a5 3 0 1 0 10 0a5 3 0 1 0 -10 0",key:"svg-0"}],["path",{d:"M11 6v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4",key:"svg-1"}],["path",{d:"M11 10v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4",key:"svg-2"}],["path",{d:"M11 14v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4",key:"svg-3"}],["path",{d:"M7 9h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5",key:"svg-4"}],["path",{d:"M5 15v1m0 -8v1",key:"svg-5"}]]),Zl=ut("camera","IconCamera",[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),LQ=ut("car","IconCar",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5",key:"svg-2"}]]),eRe=ut("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),tRe=ut("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),nRe=ut("chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),FQ=ut("circle-off","IconCircleOff",[["path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]),rRe=ut("clear-formatting","IconClearFormatting",[["path",{d:"M17 15l4 4m0 -4l-4 4",key:"svg-0"}],["path",{d:"M7 6v-1h11v1",key:"svg-1"}],["path",{d:"M7 19l4 0",key:"svg-2"}],["path",{d:"M13 5l-4 14",key:"svg-3"}]]),iRe=ut("clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]),zQ=ut("code","IconCode",[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]]),aRe=ut("color-picker","IconColorPicker",[["path",{d:"M11 7l6 6",key:"svg-0"}],["path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z",key:"svg-1"}]]),sRe=ut("copy","IconCopy",[["path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2",key:"svg-1"}]]),Gs=ut("device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]),oRe=ut("external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]),lRe=ut("face-id","IconFaceId",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}],["path",{d:"M9 10l.01 0",key:"svg-4"}],["path",{d:"M15 10l.01 0",key:"svg-5"}],["path",{d:"M9.5 15a3.5 3.5 0 0 0 5 0",key:"svg-6"}]]),eI=ut("file-invoice","IconFileInvoice",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 7l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M13 17l2 0",key:"svg-4"}]]),uRe=ut("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),BQ=ut("gavel","IconGavel",[["path",{d:"M13 10l7.383 7.418c.823 .82 .823 2.148 0 2.967a2.11 2.11 0 0 1 -2.976 0l-7.407 -7.385",key:"svg-0"}],["path",{d:"M6 9l4 4",key:"svg-1"}],["path",{d:"M13 10l-4 -4",key:"svg-2"}],["path",{d:"M3 21h7",key:"svg-3"}],["path",{d:"M6.793 15.793l-3.586 -3.586a1 1 0 0 1 0 -1.414l2.293 -2.293l.5 .5l3 -3l-.5 -.5l2.293 -2.293a1 1 0 0 1 1.414 0l3.586 3.586a1 1 0 0 1 0 1.414l-2.293 2.293l-.5 -.5l-3 3l.5 .5l-2.293 2.293a1 1 0 0 1 -1.414 0z",key:"svg-4"}]]),cRe=ut("gender-male","IconGenderMale",[["path",{d:"M10 14m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-0"}],["path",{d:"M19 5l-5.4 5.4",key:"svg-1"}],["path",{d:"M19 5h-5",key:"svg-2"}],["path",{d:"M19 5v5",key:"svg-3"}]]),dRe=ut("h-1","IconH1",[["path",{d:"M19 18v-8l-2 2",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]),pRe=ut("h-2","IconH2",[["path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]),hRe=ut("h-3","IconH3",[["path",{d:"M19 14a2 2 0 1 0 -2 -2",key:"svg-0"}],["path",{d:"M17 16a2 2 0 1 0 2 -2",key:"svg-1"}],["path",{d:"M4 6v12",key:"svg-2"}],["path",{d:"M12 6v12",key:"svg-3"}],["path",{d:"M11 18h2",key:"svg-4"}],["path",{d:"M3 18h2",key:"svg-5"}],["path",{d:"M4 12h8",key:"svg-6"}],["path",{d:"M3 6h2",key:"svg-7"}],["path",{d:"M11 6h2",key:"svg-8"}]]),fRe=ut("h-4","IconH4",[["path",{d:"M20 18v-8l-4 6h5",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]),mRe=ut("h-5","IconH5",[["path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4",key:"svg-0"}],["path",{d:"M4 6v12",key:"svg-1"}],["path",{d:"M12 6v12",key:"svg-2"}],["path",{d:"M11 18h2",key:"svg-3"}],["path",{d:"M3 18h2",key:"svg-4"}],["path",{d:"M4 12h8",key:"svg-5"}],["path",{d:"M3 6h2",key:"svg-6"}],["path",{d:"M11 6h2",key:"svg-7"}]]),gRe=ut("h-6","IconH6",[["path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z",key:"svg-0"}],["path",{d:"M21 12a2 2 0 1 0 -4 0v4",key:"svg-1"}],["path",{d:"M4 6v12",key:"svg-2"}],["path",{d:"M12 6v12",key:"svg-3"}],["path",{d:"M11 18h2",key:"svg-4"}],["path",{d:"M3 18h2",key:"svg-5"}],["path",{d:"M4 12h8",key:"svg-6"}],["path",{d:"M3 6h2",key:"svg-7"}],["path",{d:"M11 6h2",key:"svg-8"}]]),yRe=ut("highlight","IconHighlight",[["path",{d:"M3 19h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M12.5 5.5l4 4",key:"svg-1"}],["path",{d:"M4.5 13.5l4 4",key:"svg-2"}],["path",{d:"M21 15v4h-8l4 -4z",key:"svg-3"}]]),CP=ut("home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]),vRe=ut("italic","IconItalic",[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]]),bRe=ut("line-dashed","IconLineDashed",[["path",{d:"M5 12h2",key:"svg-0"}],["path",{d:"M17 12h2",key:"svg-1"}],["path",{d:"M11 12h2",key:"svg-2"}]]),wRe=ut("link","IconLink",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]),xRe=ut("list-numbers","IconListNumbers",[["path",{d:"M11 6h9",key:"svg-0"}],["path",{d:"M11 12h9",key:"svg-1"}],["path",{d:"M12 18h8",key:"svg-2"}],["path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4",key:"svg-3"}],["path",{d:"M6 10v-6l-2 2",key:"svg-4"}]]),_Re=ut("list","IconList",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]]),kRe=ut("location","IconLocation",[["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-0"}]]),SRe=ut("map-2","IconMap2",[["path",{d:"M12 18.5l-3 -1.5l-6 3v-13l6 -3l6 3l6 -3v7.5",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v5.5",key:"svg-2"}],["path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z",key:"svg-3"}],["path",{d:"M19 18v.01",key:"svg-4"}]]),WQ=ut("map","IconMap",[["path",{d:"M3 7l6 -3l6 3l6 -3l0 13l-6 3l-6 -3l-6 3l0 -13",key:"svg-0"}],["path",{d:"M9 4l0 13",key:"svg-1"}],["path",{d:"M15 7l0 13",key:"svg-2"}]]),CRe=ut("message-report","IconMessageReport",[["path",{d:"M4 21v-13a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-9l-4 4",key:"svg-0"}],["path",{d:"M12 8l0 3",key:"svg-1"}],["path",{d:"M12 14l0 .01",key:"svg-2"}]]),IRe=ut("microscope","IconMicroscope",[["path",{d:"M5 21h14",key:"svg-0"}],["path",{d:"M6 18h2",key:"svg-1"}],["path",{d:"M7 18v3",key:"svg-2"}],["path",{d:"M9 11l3 3l6 -6l-3 -3z",key:"svg-3"}],["path",{d:"M10.5 12.5l-1.5 1.5",key:"svg-4"}],["path",{d:"M17 3l3 3",key:"svg-5"}],["path",{d:"M12 21a6 6 0 0 0 3.715 -10.712",key:"svg-6"}]]),VQ=ut("notebook","IconNotebook",[["path",{d:"M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18",key:"svg-0"}],["path",{d:"M13 8l2 0",key:"svg-1"}],["path",{d:"M13 12l2 0",key:"svg-2"}]]),$Re=ut("palette","IconPalette",[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]]),TRe=ut("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]),jQ=ut("pin","IconPin",[["path",{d:"M15 4.5l-4 4l-4 1.5l-1.5 1.5l7 7l1.5 -1.5l1.5 -4l4 -4",key:"svg-0"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-1"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-2"}]]),zy=ut("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),NRe=ut("prison","IconPrison",[["path",{d:"M18 4v16",key:"svg-0"}],["path",{d:"M14 4v16",key:"svg-1"}],["path",{d:"M6 4v5",key:"svg-2"}],["path",{d:"M6 15v5",key:"svg-3"}],["path",{d:"M10 4v5",key:"svg-4"}],["path",{d:"M11 9h-6v6h6z",key:"svg-5"}],["path",{d:"M10 15v5",key:"svg-6"}],["path",{d:"M8 12h-.01",key:"svg-7"}]]),HQ=ut("report-analytics","IconReportAnalytics",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 17v-5",key:"svg-2"}],["path",{d:"M12 17v-1",key:"svg-3"}],["path",{d:"M15 17v-3",key:"svg-4"}]]),a$=ut("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),s$=ut("send","IconSend",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]),ERe=ut("strikethrough","IconStrikethrough",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5",key:"svg-1"}]]),ORe=ut("subscript","IconSubscript",[["path",{d:"M5 7l8 10m-8 0l8 -10",key:"svg-0"}],["path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2",key:"svg-1"}]]),PRe=ut("superscript","IconSuperscript",[["path",{d:"M5 7l8 10m-8 0l8 -10",key:"svg-0"}],["path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2",key:"svg-1"}]]),MRe=ut("swords","IconSwords",[["path",{d:"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z",key:"svg-0"}],["path",{d:"M5 13l6 6",key:"svg-1"}],["path",{d:"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365",key:"svg-2"}],["path",{d:"M10 5.5l-2 -2.5h-5v5l3 2.5",key:"svg-3"}]]),vo=ut("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),ARe=ut("underline","IconUnderline",[["path",{d:"M7 5v5a5 5 0 0 0 10 0v-5",key:"svg-0"}],["path",{d:"M5 19h14",key:"svg-1"}]]),RRe=ut("unlink","IconUnlink",[["path",{d:"M17 22v-2",key:"svg-0"}],["path",{d:"M9 15l6 -6",key:"svg-1"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-2"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-3"}],["path",{d:"M20 17h2",key:"svg-4"}],["path",{d:"M2 7h2",key:"svg-5"}],["path",{d:"M7 2v2",key:"svg-6"}]]),oD=ut("user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),UQ=ut("users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]),pi=ut("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]),DRe=ut("zoom-exclamation","IconZoomExclamation",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M10 13v.01",key:"svg-2"}],["path",{d:"M10 7v3",key:"svg-3"}]]);function LRe(){const{messages:e}=iD(),[t,n]=I.exports.useState(""),r=I.exports.useRef(null),{employees:i}=Qo(),a=()=>{t.trim()!==""&&(Ee("addChatMessage",t),n(""))};return I.exports.useEffect(()=>{r.current&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})},[e]),x(Bt,{w:450,h:"100%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.chat}),x(Bt,{h:"72vh",p:20,bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-end",spacing:10,children:[x(Mn,{h:"100%",scrollbarSize:0,viewportRef:r,children:x(Ce,{justify:"flex-end",spacing:15,h:"100%",children:!e||e.length===0&&x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"30vh",children:j.no_messages_yet})||x(Fe,{children:e.map((s,o)=>{const l=i.find(u=>u.identifier===s.from);return B(Ce,{w:"100%",spacing:1,children:[B(me,{spacing:8,sx:{alignItems:"end"},children:[x(Yn,{src:l==null?void 0:l.image,size:28,radius:"md"}),x(Te,{fw:650,size:15,children:l==null?void 0:l.name}),x(Te,{fw:400,size:10,color:"gray.6",children:new Date(s.timestamp*1e3).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),x(Te,{size:13,style:{wordBreak:"break-all"},children:s.message})]},o)})})})}),x(me,{align:"center",w:"100%",children:x(Ze,{w:"100%",placeholder:j.write,value:t,onChange:s=>n(s.target.value),onKeyDown:s=>{s.key==="Enter"&&a()},rightSection:x(Le,{variant:"subtle",color:"blue",onClick:a,children:x(s$,{size:20})})})})]})})]})})}function FRe(){const{announcements:e}=aD(),{isBoss:t,dateFormat:n}=Zt(),[r,i]=I.exports.useState(""),a=I.exports.useRef(null),s=()=>{if(r.trim()!==""){const c=r.replace(/\n/g,"<br>");Ee("createAnnouncement",c),i("")}},o=I.exports.useCallback(c=>{const d=e.find(p=>p.id===c);d&&Ee("toggleAnnouncementPin",{id:c,pinned:!d.pinned,page:"police"})},[e]),l=I.exports.useCallback(c=>{Ee("removeAnnouncement",{id:c,page:"police"})},[]),u=[...e].sort((c,d)=>c.pinned&&!d.pinned?-1:!c.pinned&&d.pinned?1:new Date(d.date).getTime()-new Date(c.date).getTime());return x(Bt,{w:450,h:"100%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.announcements}),x(Bt,{h:"72vh",p:20,bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-end",spacing:10,children:[x(Mn,{h:"100%",scrollbarSize:0,viewportRef:a,children:x(Ce,{justify:"flex-end",spacing:15,h:"100%",children:!u||u.length===0?x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"30vh",children:j.no_announcements_yet}):x(Fe,{children:u.map((c,d)=>B(Ce,{w:"100%",spacing:1,children:[B(me,{spacing:8,sx:{alignItems:"end"},children:[t&&B(Fe,{children:[x(Le,{variant:"light",color:"red",onClick:()=>l(c.id),children:x(vo,{size:20})}),x(Le,{variant:c.pinned?"filled":"light",color:"blue",onClick:()=>o(c.id),children:x(jQ,{size:20})})]}),x(Yn,{size:28,radius:"md"}),x(Te,{fw:650,size:15,children:c.creator}),x(Te,{fw:400,size:10,color:"gray.6",children:new Date(c.date*1e3).toLocaleString([],n||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),x(Te,{size:13,style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:c.message.replace(/\n/g,"<br>")}}),x(Fs,{mt:15,w:"80%",ml:"10%",color:"dark.5"})]},d))})})}),x(me,{align:"center",w:"100%",children:x(xs,{w:"100%",placeholder:j.write,rightSection:x(Le,{variant:"subtle",color:"blue",onClick:s,children:x(s$,{size:20})}),disabled:!t,autosize:!0,rows:2,minRows:1,maxRows:4,value:r,onChange:c=>i(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),s())}})})]})})]})})}let Du=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const gn=tD((e,t)=>({tabs:[],initialTab:null,activeTab:null,setInitialTab:n=>e({initialTab:n}),setTabs:n=>e({tabs:n}),addTab:n=>{if(!t().initialTab&&!n)return;const i=Du();e(a=>{var s;return{tabs:[...a.tabs,{id:i,title:(n==null?void 0:n.title)||((s=a.initialTab)==null?void 0:s.title)||"",component:(n==null?void 0:n.component)||a.initialTab&&a.initialTab.component}],activeTab:i}})},removeTab:n=>{const r=t();if(!!r.initialTab){if(r.tabs.length===1){r.updateTab({title:r.initialTab.title,component:r.initialTab.component});return}e(i=>{const a=i.tabs.filter(o=>o.id!==n),s=i.activeTab===n&&a.length>0?a[0].id:i.activeTab;return{tabs:a,activeTab:s}})}},setActiveTab:n=>e({activeTab:n}),updateTab:n=>{const r=Du();e(i=>({tabs:i.tabs.map(a=>a.id===i.activeTab?{...n,id:r}:a),activeTab:r}))}}));function zRe(e,t,n){var r=this,i=I.exports.useRef(null),a=I.exports.useRef(0),s=I.exports.useRef(null),o=I.exports.useRef([]),l=I.exports.useRef(),u=I.exports.useRef(),c=I.exports.useRef(e),d=I.exports.useRef(!0);c.current=e;var p=typeof window<"u",h=!t&&t!==0&&p;if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0;var m=!!(n=n||{}).leading,g=!("trailing"in n)||!!n.trailing,y="maxWait"in n,v="debounceOnServer"in n&&!!n.debounceOnServer,b=y?Math.max(+n.maxWait||0,t):null;I.exports.useEffect(function(){return d.current=!0,function(){d.current=!1}},[]);var _=I.exports.useMemo(function(){var k=function(O){var F=o.current,E=l.current;return o.current=l.current=null,a.current=O,u.current=c.current.apply(E,F)},S=function(O,F){h&&cancelAnimationFrame(s.current),s.current=h?requestAnimationFrame(O):setTimeout(O,F)},$=function(O){if(!d.current)return!1;var F=O-i.current;return!i.current||F>=t||F<0||y&&O-a.current>=b},N=function(O){return s.current=null,g&&o.current?k(O):(o.current=l.current=null,u.current)},P=function O(){var F=Date.now();if($(F))return N(F);if(d.current){var E=t-(F-i.current),z=y?Math.min(E,b-(F-a.current)):E;S(O,z)}},D=function(){if(p||v){var O=Date.now(),F=$(O);if(o.current=[].slice.call(arguments),l.current=r,i.current=O,F){if(!s.current&&d.current)return a.current=i.current,S(P,t),m?k(i.current):u.current;if(y)return S(P,t),k(i.current)}return s.current||S(P,t),u.current}};return D.cancel=function(){s.current&&(h?cancelAnimationFrame(s.current):clearTimeout(s.current)),a.current=0,o.current=i.current=l.current=s.current=null},D.isPending=function(){return!!s.current},D.flush=function(){return s.current?N(Date.now()):u.current},D},[m,y,t,b,g,h,p,v]);return _}function BRe(e,t){return e===t}function WRe(e,t){return t}function Kt(e,t,n){var r=n&&n.equalityFn||BRe,i=I.exports.useReducer(WRe,e),a=i[0],s=i[1],o=zRe(I.exports.useCallback(function(u){return s(u)},[s]),t,n),l=I.exports.useRef(e);return r(l.current,e)||(o(e),l.current=e),[a,o]}function IP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $P(e,t){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$P(e,t)}function lD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$P(e,t)}var sH=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function VRe(e,t){return!!(e===t||sH(e)&&sH(t))}function jRe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!VRe(e[n],t[n]))return!1;return!0}function hE(e,t){t===void 0&&(t=jRe);var n,r=[],i,a=!1;function s(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return a&&n===this&&t(o,r)||(i=e.apply(this,o),a=!0,n=this,r=o),i}return s}var HRe=typeof performance=="object"&&typeof performance.now=="function",oH=HRe?function(){return performance.now()}:function(){return Date.now()};function lH(e){cancelAnimationFrame(e.id)}function URe(e,t){var n=oH();function r(){oH()-n>=t?e.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var fE=-1;function uH(e){if(e===void 0&&(e=!1),fE===-1||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),fE=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return fE}var Vm=null;function cH(e){if(e===void 0&&(e=!1),Vm===null||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Vm="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?Vm="negative":Vm="positive-ascending"),document.body.removeChild(t),Vm}return Vm}var GRe=150,qRe=function(t,n){return t};function KRe(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,i=e.getItemSize,a=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,o=e.getStopIndexForStartIndex,l=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,c=e.validateProps;return t=function(d){lD(p,d);function p(m){var g;return g=d.call(this,m)||this,g._instanceProps=l(g.props,IP(g)),g._outerRef=void 0,g._resetIsScrollingTimeoutId=null,g.state={instance:IP(g),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof g.props.initialScrollOffset=="number"?g.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},g._callOnItemsRendered=void 0,g._callOnItemsRendered=hE(function(y,v,b,_){return g.props.onItemsRendered({overscanStartIndex:y,overscanStopIndex:v,visibleStartIndex:b,visibleStopIndex:_})}),g._callOnScroll=void 0,g._callOnScroll=hE(function(y,v,b){return g.props.onScroll({scrollDirection:y,scrollOffset:v,scrollUpdateWasRequested:b})}),g._getItemStyle=void 0,g._getItemStyle=function(y){var v=g.props,b=v.direction,_=v.itemSize,k=v.layout,S=g._getItemStyleCache(u&&_,u&&k,u&&b),$;if(S.hasOwnProperty(y))$=S[y];else{var N=n(g.props,y,g._instanceProps),P=i(g.props,y,g._instanceProps),D=b==="horizontal"||k==="horizontal",O=b==="rtl",F=D?N:0;S[y]=$={position:"absolute",left:O?void 0:F,right:O?F:void 0,top:D?0:N,height:D?"100%":P,width:D?P:"100%"}}return $},g._getItemStyleCache=void 0,g._getItemStyleCache=hE(function(y,v,b){return{}}),g._onScrollHorizontal=function(y){var v=y.currentTarget,b=v.clientWidth,_=v.scrollLeft,k=v.scrollWidth;g.setState(function(S){if(S.scrollOffset===_)return null;var $=g.props.direction,N=_;if($==="rtl")switch(cH()){case"negative":N=-_;break;case"positive-descending":N=k-b-_;break}return N=Math.max(0,Math.min(N,k-b)),{isScrolling:!0,scrollDirection:S.scrollOffset<N?"forward":"backward",scrollOffset:N,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._onScrollVertical=function(y){var v=y.currentTarget,b=v.clientHeight,_=v.scrollHeight,k=v.scrollTop;g.setState(function(S){if(S.scrollOffset===k)return null;var $=Math.max(0,Math.min(k,_-b));return{isScrolling:!0,scrollDirection:S.scrollOffset<$?"forward":"backward",scrollOffset:$,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._outerRefSetter=function(y){var v=g.props.outerRef;g._outerRef=y,typeof v=="function"?v(y):v!=null&&typeof v=="object"&&v.hasOwnProperty("current")&&(v.current=y)},g._resetIsScrollingDebounced=function(){g._resetIsScrollingTimeoutId!==null&&lH(g._resetIsScrollingTimeoutId),g._resetIsScrollingTimeoutId=URe(g._resetIsScrolling,GRe)},g._resetIsScrolling=function(){g._resetIsScrollingTimeoutId=null,g.setState({isScrolling:!1},function(){g._getItemStyleCache(-1,null)})},g}p.getDerivedStateFromProps=function(g,y){return ZRe(g,y),c(g),null};var h=p.prototype;return h.scrollTo=function(g){g=Math.max(0,g),this.setState(function(y){return y.scrollOffset===g?null:{scrollDirection:y.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},h.scrollToItem=function(g,y){y===void 0&&(y="auto");var v=this.props,b=v.itemCount,_=v.layout,k=this.state.scrollOffset;g=Math.max(0,Math.min(g,b-1));var S=0;if(this._outerRef){var $=this._outerRef;_==="vertical"?S=$.scrollWidth>$.clientWidth?uH():0:S=$.scrollHeight>$.clientHeight?uH():0}this.scrollTo(a(this.props,g,y,k,this._instanceProps,S))},h.componentDidMount=function(){var g=this.props,y=g.direction,v=g.initialScrollOffset,b=g.layout;if(typeof v=="number"&&this._outerRef!=null){var _=this._outerRef;y==="horizontal"||b==="horizontal"?_.scrollLeft=v:_.scrollTop=v}this._callPropsCallbacks()},h.componentDidUpdate=function(){var g=this.props,y=g.direction,v=g.layout,b=this.state,_=b.scrollOffset,k=b.scrollUpdateWasRequested;if(k&&this._outerRef!=null){var S=this._outerRef;if(y==="horizontal"||v==="horizontal")if(y==="rtl")switch(cH()){case"negative":S.scrollLeft=-_;break;case"positive-ascending":S.scrollLeft=_;break;default:var $=S.clientWidth,N=S.scrollWidth;S.scrollLeft=N-$-_;break}else S.scrollLeft=_;else S.scrollTop=_}this._callPropsCallbacks()},h.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&lH(this._resetIsScrollingTimeoutId)},h.render=function(){var g=this.props,y=g.children,v=g.className,b=g.direction,_=g.height,k=g.innerRef,S=g.innerElementType,$=g.innerTagName,N=g.itemCount,P=g.itemData,D=g.itemKey,O=D===void 0?qRe:D,F=g.layout,E=g.outerElementType,z=g.outerTagName,q=g.style,K=g.useIsScrolling,Z=g.width,te=this.state.isScrolling,V=b==="horizontal"||F==="horizontal",ee=V?this._onScrollHorizontal:this._onScrollVertical,Y=this._getRangeToRender(),Q=Y[0],oe=Y[1],pe=[];if(N>0)for(var he=Q;he<=oe;he++)pe.push(I.exports.createElement(y,{data:P,key:O(he,P),index:he,isScrolling:K?te:void 0,style:this._getItemStyle(he)}));var ge=r(this.props,this._instanceProps);return I.exports.createElement(E||z||"div",{className:v,onScroll:ee,ref:this._outerRefSetter,style:Zn({position:"relative",height:_,width:Z,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:b},q)},I.exports.createElement(S||$||"div",{children:pe,ref:k,style:{height:V?"100%":ge,pointerEvents:te?"none":void 0,width:V?ge:"100%"}}))},h._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var g=this.props.itemCount;if(g>0){var y=this._getRangeToRender(),v=y[0],b=y[1],_=y[2],k=y[3];this._callOnItemsRendered(v,b,_,k)}}if(typeof this.props.onScroll=="function"){var S=this.state,$=S.scrollDirection,N=S.scrollOffset,P=S.scrollUpdateWasRequested;this._callOnScroll($,N,P)}},h._getRangeToRender=function(){var g=this.props,y=g.itemCount,v=g.overscanCount,b=this.state,_=b.isScrolling,k=b.scrollDirection,S=b.scrollOffset;if(y===0)return[0,0,0,0];var $=s(this.props,S,this._instanceProps),N=o(this.props,$,S,this._instanceProps),P=!_||k==="backward"?Math.max(1,v):1,D=!_||k==="forward"?Math.max(1,v):1;return[Math.max(0,$-P),Math.max(0,Math.min(y-1,N+D)),$,N]},p}(I.exports.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var ZRe=function(t,n){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,n.instance},na=KRe({getItemOffset:function(t,n){var r=t.itemSize;return n*r},getItemSize:function(t,n){var r=t.itemSize;return r},getEstimatedTotalSize:function(t){var n=t.itemCount,r=t.itemSize;return r*n},getOffsetForIndexAndAlignment:function(t,n,r,i,a,s){var o=t.direction,l=t.height,u=t.itemCount,c=t.itemSize,d=t.layout,p=t.width,h=o==="horizontal"||d==="horizontal",m=h?p:l,g=Math.max(0,u*c-m),y=Math.min(g,n*c),v=Math.max(0,n*c-m+c+s);switch(r==="smart"&&(i>=v-m&&i<=y+m?r="auto":r="center"),r){case"start":return y;case"end":return v;case"center":{var b=Math.round(v+(y-v)/2);return b<Math.ceil(m/2)?0:b>g+Math.floor(m/2)?g:b}case"auto":default:return i>=v&&i<=y?i:i<v?v:y}},getStartIndexForOffset:function(t,n){var r=t.itemCount,i=t.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(t,n,r){var i=t.direction,a=t.height,s=t.itemCount,o=t.itemSize,l=t.layout,u=t.width,c=i==="horizontal"||l==="horizontal",d=n*o,p=c?u:a,h=Math.ceil((p+r-d)/o);return Math.max(0,Math.min(s-1,n+h-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){t.itemSize}});function Og(e,t){const{tags:n}=Fy.getState(),{playerJob:r,playerGrade:i}=Zt.getState();return e.filter(a=>{var c,d,p;let s=(c=a==null?void 0:a.sideBarData)==null?void 0:c.tags;if((!s||s.length===0)&&(s=(p=(d=t==null?void 0:t.find(h=>h.id===a.id))==null?void 0:d.sideBarData)==null?void 0:p.tags,!s||s.length===0))return!0;const o=n.filter(h=>s.includes(h.name)),l=Math.max(...o.map(h=>h.minGrade||0)),u=o.some(h=>{var m;return(m=h.grades)==null?void 0:m.some(g=>g.job===r&&g.id===i)});return u||l!=0&&i>=l||!u&&l===0})}function By(e){var l;const{tags:t}=Fy.getState(),{playerJob:n,playerGrade:r}=Zt.getState();let i=(l=e==null?void 0:e.sideBarData)==null?void 0:l.tags;if(!i||i.length===0)return!0;const a=t.filter(u=>i.includes(u.name)),s=Math.max(...a.map(u=>u.minGrade||0)),o=a.some(u=>{var c;return(c=u.grades)==null?void 0:c.some(d=>d.job===n&&d.id===r)});return o||s!=0&&r>=s||!o&&s===0}function XRe({searchQuery:e,filters:t}){const{incidents:n,updateIncident:r}=Ed(),{updateTab:i}=gn(),{dateFormat:a}=Zt(),s=I.exports.useMemo(()=>n.filter(l=>{var d,p,h,m,g,y,v,b;if(!l||Object.keys(l).length===0||!(l!=null&&l.title)||!(l!=null&&l.id)||!By(l))return!1;const u=((d=l==null?void 0:l.title)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l==null?void 0:l.id)==null?void 0:p.toString())===e||(l==null?void 0:l.sideBarData)&&(((m=(h=l==null?void 0:l.sideBarData)==null?void 0:h.officers)==null?void 0:m.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())}))||((y=(g=l==null?void 0:l.sideBarData)==null?void 0:g.criminals)==null?void 0:y.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())}))||((b=(v=l==null?void 0:l.sideBarData)==null?void 0:v.civilians)==null?void 0:b.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())})));if(!t)return u;const c=t.every(_=>{if(!l.sideBarData)return!1;let k;if(_.type in l.sideBarData?k=l.sideBarData[_.type]:k=l[_.type],Array.isArray(k)&&k.length>0){if(typeof k[0]=="object")return k.some(S=>Object.values(S).some($=>typeof $=="string"?$.toLowerCase().includes(_.value.toLowerCase()):!1));if(typeof k[0]=="string")return k.some(S=>S.toLowerCase().includes(_.value.toLowerCase()))}return typeof k=="string"?k.toLowerCase().includes(_.value.toLowerCase()):!1});return u&&c}).sort((l,u)=>u.id-l.id),[e,t,n]),o=({index:l,style:u})=>{var d,p;const c=s[l];return!c||Object.keys(c).length===0||!(c!=null&&c.title)||!(c!=null&&c.id)||c.id<=-1?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getIncident",c.id).then(h=>{!h||!c.id||r(c.id,h)}),i({title:"incidents",component:x(mx,{incidentId:c.id})})},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:(c==null?void 0:c.title)||j.unknown}),B(xt,{radius:"sm",children:["ID: ",c==null?void 0:c.id]})]}),((d=c.sideBarData)==null?void 0:d.officers)&&c.sideBarData.officers.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.officers_list," ",c.sideBarData.officers.map(h=>h.name).join(", ")]}),((p=c.sideBarData)==null?void 0:p.criminals)&&c.sideBarData.criminals.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.criminals_list," ",c.sideBarData.criminals.map(h=>h.name).join(", ")]}),x(Te,{fw:500,size:12,color:"gray.5",children:new Date(c.date*1e3).toLocaleString([],a||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}function _a({title:e,searchQuery:t,filterInputs:n,filters:r,setFilterInputs:i,setSearchQuery:a,setFilters:s,createNew:o,openFacialRecognition:l}){const[u,{open:c,close:d}]=Tr(!1),p=(y,v)=>{if(!n||!i)return;const b=[...n];b[y].value=v,i(b)},h=()=>{!n||!s||(s(n.filter(y=>y.value!=="")),d())},m=()=>{if(!n||!s||!i)return;const y=n.map(v=>({...v,value:""}));i(y),s([]),d()};I.exports.useEffect(()=>{!i||!n||i(n.map(y=>{var v;return{...y,value:((v=r==null?void 0:r.find(b=>b.type===y.type))==null?void 0:v.value)||""}}))},[u]);const g=(r==null?void 0:r.filter(y=>y.value!=="").length)||0;return B(Fe,{children:[x(Bt,{w:"100%",color:"dark.6",radius:"xs",py:5,px:10,shadow:"xs",mb:10,children:B(me,{position:"apart",h:"100%",children:[x(Te,{fw:650,size:24,children:e}),B(me,{spacing:10,children:[o&&x(Ct,{variant:"subtle",leftIcon:x(zy,{}),onClick:o,children:j.create_new}),n&&B(Ct,{variant:"subtle",leftIcon:x(uRe,{}),onClick:c,children:[j.filters," ",g>0&&`(${g})`]}),l&&x(Ct,{variant:"subtle",leftIcon:x(lRe,{}),onClick:l,children:j.facial_recognition}),x(Ze,{placeholder:j.search,rightSection:x(a$,{}),w:400,value:t,onChange:y=>a(y.currentTarget.value)})]})]})}),n&&x(nr,{title:j.advanced_filters,opened:u,onClose:d,size:"xs",centered:!0,children:B(Ce,{spacing:20,w:"100%",children:[n.map((y,v)=>x(Ze,{placeholder:j[y.type],value:y.value,onChange:b=>p(v,b.currentTarget.value)},y.type)),B(me,{position:"center",grow:!0,children:[x(Ct,{variant:"outline",onClick:m,children:j.clear_filters}),x(Ct,{variant:"outline",onClick:h,children:j.apply_filters})]})]})})]})}function TP(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"creator",value:""},{type:"tags",value:""},{type:"officers",value:""},{type:"criminals",value:""},{type:"civilians",value:""}]),{updateTab:o}=gn(),l=()=>{Ee("createIncident").then(u=>{!u||o({title:"incidents",component:x(mx,{incidentId:u.id})})})};return B(Fe,{children:[x(_a,{title:j.incidents,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setSearchQuery:t,setFilters:i,createNew:l}),x(XRe,{searchQuery:n,filters:r})]})}const uD=I.exports.createContext(null);uD.displayName="@mantine/modals/ModalsContext";function JRe(){const e=I.exports.useContext(uD);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var YRe=Object.defineProperty,QRe=Object.defineProperties,eDe=Object.getOwnPropertyDescriptors,dH=Object.getOwnPropertySymbols,tDe=Object.prototype.hasOwnProperty,nDe=Object.prototype.propertyIsEnumerable,pH=(e,t,n)=>t in e?YRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mE=(e,t)=>{for(var n in t||(t={}))tDe.call(t,n)&&pH(e,n,t[n]);if(dH)for(var n of dH(t))nDe.call(t,n)&&pH(e,n,t[n]);return e},hH=(e,t)=>QRe(e,eDe(t));function rDe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:a=!0,groupProps:s,onCancel:o,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,p=JRe(),h=g=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(g)),typeof o=="function"&&o(),a&&p.closeModal(e)},m=g=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(g)),typeof l=="function"&&l(),i&&p.closeModal(e)};return B(Fe,{children:[u&&x(vt,{mb:"md",children:u}),B(me,{...mE({position:"right"},s),children:[x(Ct,{...hH(mE({variant:"default"},t),{onClick:h}),children:(t==null?void 0:t.children)||c}),x(Ct,{...hH(mE({},n),{onClick:m}),children:(n==null?void 0:n.children)||d})]})]})}function fH(e,t){var n,r,i,a;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(a=(i=e.props).onClose)==null||a.call(i)}function iDe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;fH(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{fH(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}const[aDe,rw]=Aq("mantine-modals"),sDe=rw("openModal"),oDe=rw("closeModal"),lDe=rw("closeAllModals"),uDe=rw("openConfirmModal"),cDe=e=>rw("openContextModal")(e),Tn={open:sDe,close:oDe,closeAll:lDe,openConfirmModal:uDe,openContextModal:cDe};var dDe=Object.defineProperty,pDe=Object.defineProperties,hDe=Object.getOwnPropertyDescriptors,tI=Object.getOwnPropertySymbols,GQ=Object.prototype.hasOwnProperty,qQ=Object.prototype.propertyIsEnumerable,mH=(e,t,n)=>t in e?dDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yk=(e,t)=>{for(var n in t||(t={}))GQ.call(t,n)&&mH(e,n,t[n]);if(tI)for(var n of tI(t))qQ.call(t,n)&&mH(e,n,t[n]);return e},gH=(e,t)=>pDe(e,hDe(t)),cp=(e,t)=>{var n={};for(var r in e)GQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tI)for(var r of tI(e))t.indexOf(r)<0&&qQ.call(e,r)&&(n[r]=e[r]);return n};function fDe(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:a,closeOnConfirm:s,closeOnCancel:o,cancelProps:l,confirmProps:u,groupProps:c,labels:d}=t,p=cp(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:a,closeOnConfirm:s,closeOnCancel:o,cancelProps:l,confirmProps:u,groupProps:c,labels:d},modalProps:yk({id:n},p)}}function mDe({children:e,modalProps:t,labels:n,modals:r}){const[i,a]=I.exports.useReducer(iDe,{modals:[],current:null}),s=I.exports.useRef(i);s.current=i;const o=I.exports.useCallback(y=>{a({type:"CLOSE_ALL",canceled:y})},[s,a]),l=I.exports.useCallback(y=>{var v=y,{modalId:b}=v,_=cp(v,["modalId"]);const k=b||Lp();return a({type:"OPEN",modal:{id:k,type:"content",props:_}}),k},[a]),u=I.exports.useCallback(y=>{var v=y,{modalId:b}=v,_=cp(v,["modalId"]);const k=b||Lp();return a({type:"OPEN",modal:{id:k,type:"confirm",props:_}}),k},[a]),c=I.exports.useCallback((y,v)=>{var b=v,{modalId:_}=b,k=cp(b,["modalId"]);const S=_||Lp();return a({type:"OPEN",modal:{id:S,type:"context",props:k,ctx:y}}),S},[a]),d=I.exports.useCallback((y,v)=>{a({type:"CLOSE",modalId:y,canceled:v})},[s,a]);aDe({openModal:l,openConfirmModal:u,openContextModal:y=>{var v=y,{modal:b}=v,_=cp(v,["modal"]);return c(b,_)},closeModal:d,closeContextModal:d,closeAllModals:o});const p={modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:o},h=()=>{const y=s.current.current;switch(y==null?void 0:y.type){case"context":{const v=y.props,{innerProps:b}=v,_=cp(v,["innerProps"]),k=r[y.ctx];return{modalProps:_,content:x(k,{innerProps:b,context:p,id:y.id})}}case"confirm":{const{modalProps:v,confirmProps:b}=fDe(y.props);return{modalProps:v,content:x(rDe,{...gH(yk({},b),{id:y.id,labels:y.props.labels||n})})}}case"content":{const v=y.props,{children:b}=v;return{modalProps:cp(v,["children"]),content:x(Fe,{children:b})}}default:return{modalProps:{},content:null}}},{modalProps:m,content:g}=h();return B(uD.Provider,{value:p,children:[x(nr,{...gH(yk(yk({zIndex:Wu("modal")+1},t),m),{opened:i.modals.length>0,onClose:()=>d(i.current.id)}),children:g}),e]})}const KQ=Nr(e=>({grades:[],addGrade:(t,n,r,i)=>e(a=>({grades:[...a.grades,{id:t,job:n,jobLabel:r,gradeLabel:i}]})),setGrades:t=>e({grades:t})}));function ZQ({currentTags:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState([]),{tags:a}=Fy(),[s,o]=I.exports.useState("#FFFFFF"),[l,u]=I.exports.useState(""),[c,d]=I.exports.useState(""),[p,h]=I.exports.useState(!1),[m,g]=I.exports.useState([]),{grades:y}=KQ(),{playerGrade:v,isBoss:b}=Zt();return I.exports.useEffect(()=>{i([...r,...e])},[]),I.exports.useEffect(()=>{var k;const _=(k=a.find(S=>S.name===r[0]))==null?void 0:k.grades;!_||g([...m,..._.map(S=>`${S.job}-${S.id}`)])},[]),x(Fe,{children:B(Ce,{spacing:20,children:[p?B(Fe,{children:[x(Ze,{label:j.tag_name,placeholder:j.tag_name,variant:"filled",value:l,onChange:_=>u(_.currentTarget.value),required:!0}),x(ZR,{w:"100%",color:s,onChange:_=>{o(_)},format:"hex",swatches:["#25262b","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),x(du,{label:j.minimum_grade,placeholder:j.minimum_grade,variant:"filled",value:c,min:0,max:v,onChange:d}),x(Ru,{label:j.grades,placeholder:j.select_grades,searchable:!0,clearable:!0,data:y.sort((_,k)=>_.id<k.id?-1:1).map(_=>({value:`${_.job}-${_.id}`,label:`${_.jobLabel} - ${_.gradeLabel} (ID: ${_.id})`})),value:m,onChange:g,limit:25})]}):x(Ru,{data:Og(a).map(_=>({value:_.name,label:_.name})),value:r,onChange:i,placeholder:j.select_tags,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),B(me,{position:"apart",children:[x(Qg,{disabled:!b,label:j.create_new,checked:p,onChange:_=>h(_.currentTarget.checked)}),x(Ct,{onClick:()=>{if(p){if(!l||a.find(k=>k.name===l))return;const _=m.length>0&&m.map(k=>({job:k.split("-")[0],id:parseInt(k.split("-")[1],10)}))||void 0;Ee("addTag",{name:l,color:s,minGrade:typeof c=="number"?c:null,grades:_}).then(k=>{!k||n(t,{sideBarData:{tags:[...e,l]}})})}else n(t,{sideBarData:{tags:r.map(_=>_)}});Tn.closeAll()},children:j.confirm})]})]})})}const XQ=Nr(e=>({licenses:[],setLicenses:t=>e({licenses:t})}));function gDe({currentLicenses:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState([]),{licenses:a}=XQ();return I.exports.useEffect(()=>{i([...r,...e.map(s=>s)])},[]),x(Fe,{children:B(Ce,{spacing:20,children:[x(Ru,{data:a.map(s=>({value:s,label:j[s]||s})),value:r,onChange:i,placeholder:j.select_licenses,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:()=>{n(t,{sideBarData:{licenses:r.map(s=>s)}}),Tn.closeAll()},children:j.confirm})})]})})}function ty({title:e,allPlayers:t,currentPlayers:n,pageId:r,includeReason:i,setTrainee:a,updateData:s}){const{showIdentifiers:o}=Zt(),l=({label:y,...v})=>{const[b,_]=y.split(" (ID: ");if(!_)return x("div",{...v,children:y});const k=_.slice(0,-1);return B("div",{...v,children:[x("div",{children:b}),B("div",{style:{fontSize:"small",color:"gray"},children:["ID: ",k]})]})},[u,c]=I.exports.useState(I.exports.useMemo(()=>(n==null?void 0:n.map(y=>y.identifier))||[],[n])),[d,p]=I.exports.useState(""),[h,m]=I.exports.useState(""),g=I.exports.useMemo(()=>{const y=new Set(n==null?void 0:n.map(v=>v.identifier));return t.filter(v=>v.identifier!==r&&!y.has(v.identifier)).map(v=>({value:v.identifier,label:o?`${v.name} (ID: ${v.identifier})`:v.name}))},[t,n,r,o]);return x(Fe,{children:B(Ce,{spacing:20,children:[i||a?B(Fe,{children:[x(YR,{data:g,value:d,onChange:y=>p(y),placeholder:j.select_player,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,itemComponent:l,limit:25}),i&&x(Ze,{placeholder:j.reason,label:j.reason,value:h,onChange:y=>m(y.currentTarget.value)})]}):x(Ru,{data:t.map(y=>({value:y.identifier,label:o?`${y.name} (ID: ${y.identifier})`:y.name})),value:u,onChange:c,placeholder:j.select_players,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,itemComponent:l,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:()=>{var y;if(!r||!n||!e||!s){a&&a(d);return}if(i){if(!d||!h)return;s(r,{sideBarData:{[e]:[...n,{name:(y=t.find(v=>v.identifier===d))==null?void 0:y.name,identifier:d,reason:h}]}})}else s(r,{sideBarData:{[e]:u.map(v=>{const b=t.find(S=>S.identifier===v),_=n.find(S=>S.identifier===v);return{...b,..._}})}});Tn.closeAll()},children:j.confirm})})]})})}function yDe({currentEvidence:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState([]),{evidence:a}=tw();I.exports.useEffect(()=>{i(e.map(o=>o.toString()))},[]);const s=()=>{const o=r.map(l=>parseInt(l,10));n(t,{sideBarData:{evidence:o}}),Tn.closeAll()};return x(Fe,{children:B(Ce,{spacing:20,children:[x(Ru,{data:a.map(o=>({value:o.id.toString(),label:`${o.name} (ID: ${o.id})`})),value:r,onChange:i,placeholder:j.select_evidence,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:s,children:j.confirm})})]})})}function vDe({currentVehicles:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState([]),{vehicles:a}=Rh();I.exports.useEffect(()=>{i(e.map(o=>o.plate))},[]);const s=()=>{const o=r.map(l=>{const u=a.find(c=>c.plate===l);return{plate:l,name:u==null?void 0:u.name}});n(t,{sideBarData:{vehicles:o}}),Tn.closeAll()};return x(Fe,{children:B(Ce,{spacing:20,children:[x(Ru,{data:a.map(o=>({value:o.plate,label:`${o.name} [${o.plate}]`})),value:r,onChange:i,placeholder:j.select_vehicles,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:s,children:j.confirm})})]})})}function vk({title:e,allReports:t,currentReports:n,pageId:r,updateData:i}){const[a,s]=I.exports.useState([]);I.exports.useEffect(()=>{n=Og(n,t),t=Og(t),s(n.map(l=>l.toString()))},[]);const o=()=>{const l=a.map(u=>parseInt(u,10));i(r,{sideBarData:{[e]:l}}),Tn.closeAll()};return x(Fe,{children:B(Ce,{spacing:20,children:[x(Ru,{data:Og(t).filter(l=>l.id!==r).map(l=>({value:l.id.toString(),label:`${l.title} (ID: ${l.id})`})),value:a,onChange:s,placeholder:j.select_reports,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:o,children:j.confirm})})]})})}function JQ({opened:e,chargeId:t,close:n}){var o,l;const{charges:r}=i$(),[i,a]=I.exports.useState({id:0,name:"",class:"",fine:{default:0},sentence:{default:0},points:0});I.exports.useEffect(()=>{if(!!e&&(a({id:0,name:"",class:"",fine:{default:0},sentence:{default:0},points:0}),t)){const u=r.find(c=>(c==null?void 0:c.id)===t);if(!u)return;a(u)}},[e]);const s=()=>{if(!(!i.name||!i.class)){if(n(),t){Ee("updateCharge",i);return}Ee("createCharge",i)}};return x(nr,{size:"30%",centered:!0,title:j.create_charge,opened:e,onClose:n,children:B(Ce,{spacing:30,children:[x(Ze,{label:j.charge_name,placeholder:j.charge_name,value:i==null?void 0:i.name,onChange:u=>a({...i,name:u.currentTarget.value}),required:!0}),x(Ze,{label:j.class,placeholder:j.class,value:i==null?void 0:i.class,onChange:u=>a({...i,class:u.currentTarget.value}),required:!0}),x(xs,{label:j.description,placeholder:j.description,value:i==null?void 0:i.description,onChange:u=>a({...i,description:u.currentTarget.value})}),B(me,{w:"100%",spacing:20,grow:!0,children:[x(du,{label:j.fine,value:((o=i==null?void 0:i.fine)==null?void 0:o.default)||0,onChange:u=>a({...i,fine:{...i.fine,default:Number(u)}}),required:!0}),x(du,{label:j.fine_min,value:i==null?void 0:i.fine.min,onChange:u=>a({...i,fine:{...i.fine,min:Number(u)}})}),x(du,{label:j.fine_max,value:i==null?void 0:i.fine.max,onChange:u=>a({...i,fine:{...i.fine,max:Number(u)}})})]}),B(me,{w:"100%",spacing:20,grow:!0,children:[x(du,{label:j.sentence,value:((l=i==null?void 0:i.sentence)==null?void 0:l.default)||0,onChange:u=>a({...i,sentence:{...i.sentence,default:Number(u)}}),required:!0}),x(du,{label:j.sentence_min,value:i==null?void 0:i.sentence.min,onChange:u=>a({...i,sentence:{...i.sentence,min:Number(u)}})}),x(du,{label:j.sentence_max,value:i==null?void 0:i.sentence.max,onChange:u=>a({...i,sentence:{...i.sentence,max:Number(u)}})})]}),x(me,{w:"100%",spacing:10,grow:!0,children:x(du,{label:j.license_points,value:i==null?void 0:i.points,onChange:u=>a({...i,points:Number(u)})})}),x(Ct,{onClick:s,children:"Confirm"})]})})}const yH={disabled:!1},nI=kr.createContext(null);var ob="unmounted",dp="exited",pp="entering",Jm="entered",NP="exiting",qu=function(e){lD(t,e);function t(r,i){var a;a=e.call(this,r,i)||this;var s=i,o=s&&!s.isMounting?r.enter:r.appear,l;return a.appearStatus=null,r.in?o?(l=dp,a.appearStatus=pp):l=Jm:r.unmountOnExit||r.mountOnEnter?l=ob:l=dp,a.state={status:l},a.nextCallback=null,a}t.getDerivedStateFromProps=function(i,a){var s=i.in;return s&&a.status===ob?{status:dp}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==pp&&s!==Jm&&(a=pp):(s===pp||s===Jm)&&(a=NP)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,s,o;return a=s=o=i,i!=null&&typeof i!="number"&&(a=i.exit,s=i.enter,o=i.appear!==void 0?i.appear:s),{exit:a,enter:s,appear:o}},n.updateStatus=function(i,a){i===void 0&&(i=!1),a!==null?(this.cancelNextCallback(),a===pp?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===dp&&this.setState({status:ob})},n.performEnter=function(i){var a=this,s=this.props.enter,o=this.context?this.context.isMounting:i,l=this.props.nodeRef?[o]:[Ob.findDOMNode(this),o],u=l[0],c=l[1],d=this.getTimeouts(),p=o?d.appear:d.enter;if(!i&&!s||yH.disabled){this.safeSetState({status:Jm},function(){a.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:pp},function(){a.props.onEntering(u,c),a.onTransitionEnd(p,function(){a.safeSetState({status:Jm},function(){a.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,a=this.props.exit,s=this.getTimeouts(),o=this.props.nodeRef?void 0:Ob.findDOMNode(this);if(!a||yH.disabled){this.safeSetState({status:dp},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:NP},function(){i.props.onExiting(o),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:dp},function(){i.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,s=!0;return this.nextCallback=function(o){s&&(s=!1,a.nextCallback=null,i(o))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var s=this.props.nodeRef?this.props.nodeRef.current:Ob.findDOMNode(this),o=i==null&&!this.props.addEndListener;if(!s||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ob)return null;var a=this.props,s=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=JR(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return x(nI.Provider,{value:null,children:typeof s=="function"?s(i,o):kr.cloneElement(kr.Children.only(s),o)})},t}(kr.Component);qu.contextType=nI;qu.propTypes={};function jm(){}qu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:jm,onEntering:jm,onEntered:jm,onExit:jm,onExiting:jm,onExited:jm};qu.UNMOUNTED=ob;qu.EXITED=dp;qu.ENTERING=pp;qu.ENTERED=Jm;qu.EXITING=NP;const bDe=qu;function cD(e,t){var n=function(a){return t&&I.exports.isValidElement(a)?t(a):a},r=Object.create(null);return e&&I.exports.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function wDe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var a in e)a in t?i.length&&(r[a]=i,i=[]):i.push(a);var s,o={};for(var l in t){if(r[l])for(s=0;s<r[l].length;s++){var u=r[l][s];o[r[l][s]]=n(u)}o[l]=n(l)}for(s=0;s<i.length;s++)o[i[s]]=n(i[s]);return o}function $p(e,t,n){return n[t]!=null?n[t]:e.props[t]}function xDe(e,t){return cD(e.children,function(n){return I.exports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:$p(n,"appear",e),enter:$p(n,"enter",e),exit:$p(n,"exit",e)})})}function _De(e,t,n){var r=cD(e.children),i=wDe(t,r);return Object.keys(i).forEach(function(a){var s=i[a];if(!!I.exports.isValidElement(s)){var o=a in t,l=a in r,u=t[a],c=I.exports.isValidElement(u)&&!u.props.in;l&&(!o||c)?i[a]=I.exports.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:$p(s,"exit",e),enter:$p(s,"enter",e)}):!l&&o&&!c?i[a]=I.exports.cloneElement(s,{in:!1}):l&&o&&I.exports.isValidElement(u)&&(i[a]=I.exports.cloneElement(s,{onExited:n.bind(null,s),in:u.props.in,exit:$p(s,"exit",e),enter:$p(s,"enter",e)}))}}),i}var kDe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},SDe={component:"div",childFactory:function(t){return t}},dD=function(e){lD(t,e);function t(r,i){var a;a=e.call(this,r,i)||this;var s=a.handleExited.bind(IP(a));return a.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},a}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,a){var s=a.children,o=a.handleExited,l=a.firstRender;return{children:l?xDe(i,o):_De(i,s,o),firstRender:!1}},n.handleExited=function(i,a){var s=cD(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(o){var l=Zn({},o.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,a=i.component,s=i.childFactory,o=JR(i,["component","childFactory"]),l=this.state.contextValue,u=kDe(this.state.children).map(s);return delete o.appear,delete o.enter,delete o.exit,a===null?x(nI.Provider,{value:l,children:u}):x(nI.Provider,{value:l,children:x(a,{...o,children:u})})},t}(kr.Component);dD.propTypes={};dD.defaultProps=SDe;const CDe=dD,[IDe,iw]=Aq("mantine-notifications"),$De=iw("show"),TDe=iw("hide"),NDe=iw("clean"),EDe=iw("cleanQueue"),ODe=iw("update"),Wy={show:$De,hide:TDe,clean:NDe,cleanQueue:EDe,update:ODe};function PDe([e,t],n){const r={};return e==="top"&&(r.top=n),e==="bottom"&&(r.bottom=n),t==="left"&&(r.left=n),t==="right"&&(r.right=n),t==="center"&&(r.left="50%",r.transform="translateX(-50%)"),r}var MDe=Object.defineProperty,vH=Object.getOwnPropertySymbols,ADe=Object.prototype.hasOwnProperty,RDe=Object.prototype.propertyIsEnumerable,bH=(e,t,n)=>t in e?MDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wH=(e,t)=>{for(var n in t||(t={}))ADe.call(t,n)&&bH(e,n,t[n]);if(vH)for(var n of vH(t))RDe.call(t,n)&&bH(e,n,t[n]);return e};const xH={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},DDe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function LDe({state:e,maxHeight:t,positioning:n,transitionDuration:r}){const[i,a]=n,s=a==="center"?`${i}-center`:a,o={opacity:0,maxHeight:t,transform:xH[s],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:DDe[s]},u={opacity:0,maxHeight:0,transform:xH[s]},c={entering:l,entered:l,exiting:u,exited:u};return wH(wH({},o),c[e])}function FDe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}var zDe=Object.defineProperty,BDe=Object.defineProperties,WDe=Object.getOwnPropertyDescriptors,rI=Object.getOwnPropertySymbols,YQ=Object.prototype.hasOwnProperty,QQ=Object.prototype.propertyIsEnumerable,_H=(e,t,n)=>t in e?zDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kH=(e,t)=>{for(var n in t||(t={}))YQ.call(t,n)&&_H(e,n,t[n]);if(rI)for(var n of rI(t))QQ.call(t,n)&&_H(e,n,t[n]);return e},VDe=(e,t)=>BDe(e,WDe(t)),SH=(e,t)=>{var n={};for(var r in e)YQ.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rI)for(var r of rI(e))t.indexOf(r)<0&&QQ.call(e,r)&&(n[r]=e[r]);return n};function eee(e){var t=e,{notification:n,autoClose:r,onHide:i,innerRef:a}=t,s=SH(t,["notification","autoClose","onHide","innerRef"]);const o=n,{autoClose:l,message:u}=o,c=SH(o,["autoClose","message"]),d=FDe(r,l),p=I.exports.useRef(),h=()=>{i(n.id),window.clearTimeout(p.current)},m=()=>{clearTimeout(p.current)},g=()=>{typeof d=="number"&&(p.current=window.setTimeout(h,d))};return I.exports.useEffect(()=>{typeof n.onOpen=="function"&&n.onOpen(n)},[]),I.exports.useEffect(()=>(g(),m),[r,n.autoClose]),x(kY,{...VDe(kH(kH({},c),s),{onClose:h,onMouseEnter:m,onMouseLeave:g,ref:a}),children:u})}eee.displayName="@mantine/notifications/NotificationContainer";var jDe=tt((e,{zIndex:t})=>({notifications:{width:`calc(100% - ${e.spacing.md} * 2)`,boxSizing:"border-box",position:"fixed",zIndex:t},notification:{"&:not(:first-of-type)":{marginTop:e.spacing.sm}}}));const HDe=jDe;var UDe=Object.defineProperty,GDe=Object.defineProperties,qDe=Object.getOwnPropertyDescriptors,CH=Object.getOwnPropertySymbols,KDe=Object.prototype.hasOwnProperty,ZDe=Object.prototype.propertyIsEnumerable,IH=(e,t,n)=>t in e?UDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XDe=(e,t)=>{for(var n in t||(t={}))KDe.call(t,n)&&IH(e,n,t[n]);if(CH)for(var n of CH(t))ZDe.call(t,n)&&IH(e,n,t[n]);return e},JDe=(e,t)=>GDe(e,qDe(t));function YDe({limit:e}){const{state:t,queue:n,update:r,cleanQueue:i}=U0e({initialValues:[],limit:e});return{notifications:t,queue:n,showNotification:u=>{const c=u.id||Lp();return r(d=>u.id&&d.some(p=>p.id===u.id)?d:[...d,JDe(XDe({},u),{id:c})]),c},updateNotification:u=>r(c=>{const d=c.findIndex(h=>h.id===u.id);if(d===-1)return c;const p=[...c];return p[d]=u,p}),hideNotification:u=>r(c=>c.filter(d=>d.id===u?(typeof d.onClose=="function"&&d.onClose(d),!1):!0)),cleanQueue:i,clean:()=>r(()=>[])}}var QDe=Object.defineProperty,iI=Object.getOwnPropertySymbols,tee=Object.prototype.hasOwnProperty,nee=Object.prototype.propertyIsEnumerable,$H=(e,t,n)=>t in e?QDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gE=(e,t)=>{for(var n in t||(t={}))tee.call(t,n)&&$H(e,n,t[n]);if(iI)for(var n of iI(t))nee.call(t,n)&&$H(e,n,t[n]);return e},eLe=(e,t)=>{var n={};for(var r in e)tee.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iI)for(var r of iI(e))t.indexOf(r)<0&&nee.call(e,r)&&(n[r]=e[r]);return n};const tLe=["top-left","top-right","top-center","bottom-left","bottom-right","bottom-center"],Su=e=>{var t=e,{className:n,position:r="bottom-right",autoClose:i=4e3,transitionDuration:a=250,containerWidth:s=G(440),notificationMaxHeight:o=G(200),limit:l=5,zIndex:u=Wu("overlay"),style:c,children:d,target:p}=t,h=eLe(t,["className","position","autoClose","transitionDuration","containerWidth","notificationMaxHeight","limit","zIndex","style","children","target"]);const m=V0e(),g=I.exports.useRef({}),y=I.exports.useRef(0),{notifications:v,showNotification:b,updateNotification:_,hideNotification:k,clean:S,cleanQueue:$}=YDe({limit:l}),{classes:N,cx:P,theme:D}=HDe({zIndex:u}),O=K1(),E=(D.respectReducedMotion?O:!1)?1:a,z=(tLe.includes(r)?r:"bottom-right").split("-");Mi(()=>{v.length>y.current&&setTimeout(()=>m(),0),y.current=v.length},[v]),IDe({show:b,hide:k,update:_,clean:S,cleanQueue:$});const q=v.map(K=>x(bDe,{timeout:E,onEnter:()=>g.current[K.id].offsetHeight,nodeRef:{current:g.current[K.id]},children:Z=>x(eee,{innerRef:te=>{g.current[K.id]=te},notification:K,onHide:k,className:N.notification,autoClose:i,sx:[gE({},LDe({state:Z,positioning:z,transitionDuration:E,maxHeight:o})),...Array.isArray(K.sx)?K.sx:[K.sx]]})},K.id));return x(SR,{target:p,children:x(vt,{...gE({className:P(N.notifications,n),style:c,sx:gE({maxWidth:s},PDe(z,D.spacing.md))},h),children:x(CDe,{children:q})})})};Su.displayName="@mantine/notifications/Notifications";Su.show=Wy.show;Su.hide=Wy.hide;Su.update=Wy.update;Su.clean=Wy.clean;Su.cleanQueue=Wy.cleanQueue;let ree=!0;const Ir=(e,t)=>{!ree||Wy.show({title:e,message:t,color:"blue",radius:"sm",withBorder:!0})},nLe=e=>{ree=e};function rLe({isCitizen:e,searchQuery:t,incidentId:n,identifier:r,addCharge:i}){const{charges:a}=i$(),{incidents:s,removeChargeWithId:o}=Ed(),[l,{open:u,close:c}]=Tr(!1),[d,p]=I.exports.useState(),{isBoss:h}=Zt(),m=new Intl.NumberFormat,g=!e&&h,y=I.exports.useMemo(()=>{const _=a.filter(S=>{var $,N;return(($=S==null?void 0:S.name)==null?void 0:$.toLowerCase().includes(t.toLowerCase()))||((N=S==null?void 0:S.class)==null?void 0:N.toLowerCase().includes(t.toLowerCase()))}).sort((S,$)=>{var N;return(N=S.name)==null?void 0:N.localeCompare($.name)}),k={};return _.forEach(S=>{k[S.class]||(k[S.class]=[]),k[S.class].push(S)}),k},[a,t]),v=_=>{Ee("removeCharge",_).then(()=>{Ir(j.mdt,j.removed_successfully)})},b=I.exports.useMemo(()=>{var _,k,S,$;return(($=(S=(k=(_=s.find(N=>(N==null?void 0:N.id)===n))==null?void 0:_.sideBarData)==null?void 0:k.criminals)==null?void 0:S.find(N=>N.identifier===r))==null?void 0:$.charges)||[]},[s,n,r]);return B(Fe,{children:[b.length>0&&x(me,{spacing:10,w:"100%",my:20,children:b.map(_=>{const{id:k,amount:S}=_,$=a.find(N=>(N==null?void 0:N.id)===k);return $?B(xt,{color:"gray",rightSection:x(Le,{size:14,variant:"transparent",onClick:()=>{!n||!r||o(n,r,k)},children:x(pi,{})}),children:[$.name," x",S]},k):null}).filter(Boolean)}),x(Mn,{w:"100%",h:"75vh",scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{spacing:15,children:Object.keys(y).map((_,k)=>B(Ce,{spacing:5,children:[x(Te,{fw:600,size:20,children:_}),x(me,{spacing:10,children:y[_].map(S=>{var $,N,P,D,O,F,E,z,q;return B(Ng,{width:280,shadow:"md",disabled:!S.description,position:"top",withArrow:!0,withinPortal:!0,openDelay:400,children:[x(Ng.Target,{children:x(Bt,{w:"19%",radius:"xs",p:10,shadow:"xs",bg:"dark.7",style:{cursor:i?"pointer":"default"},onClick:()=>{!i||i(S)},children:B(Ce,{align:"center",spacing:10,children:[B(Ce,{spacing:2,children:[x(Te,{fw:550,size:15,lineClamp:1,children:S.name}),g&&!n&&B(me,{spacing:5,children:[x(Le,{variant:"subtle",size:18,onClick:K=>{K.stopPropagation(),p(S==null?void 0:S.id),u()},children:x(TRe,{})}),x(Le,{variant:"subtle",size:18,onClick:K=>{K.stopPropagation(),v(S==null?void 0:S.id)},children:x(vo,{})})]})]}),x(Ze,{readOnly:!0,variant:"filled",label:j.fine,value:S.points&&S.points>0?j.charge_fine_points.format(m.format((($=S==null?void 0:S.fine)==null?void 0:$.default)||0),m.format(((N=S==null?void 0:S.fine)==null?void 0:N.min)||0),m.format(((P=S==null?void 0:S.fine)==null?void 0:P.max)||0),S==null?void 0:S.points):j.charge_fine.format(m.format(((D=S==null?void 0:S.fine)==null?void 0:D.default)||0),m.format(((O=S==null?void 0:S.fine)==null?void 0:O.min)||0),m.format(((F=S==null?void 0:S.fine)==null?void 0:F.max)||0)),w:"100%"}),x(Ze,{readOnly:!0,variant:"filled",label:j.sentence,value:j.charge_sentence.format(((E=S==null?void 0:S.sentence)==null?void 0:E.default)||0,((z=S==null?void 0:S.sentence)==null?void 0:z.min)||0,((q=S==null?void 0:S.sentence)==null?void 0:q.max)||0),w:"100%"})]})},S==null?void 0:S.id)}),x(Ng.Dropdown,{children:x(Te,{size:"sm",style:{userSelect:"text"},children:S.description})})]})})})]}))})}),x(JQ,{opened:l,chargeId:d,close:c})]})}function pD({incidentId:e,identifier:t,isCitizen:n,addCharge:r}){const[i,a]=I.exports.useState(""),[s]=Kt(i,500),{isBoss:o}=Zt(),[l,{open:u,close:c}]=Tr(!1),d=()=>{u()};return B(Fe,{children:[x(_a,{title:j.charges,searchQuery:i,setSearchQuery:a,createNew:!e&&!n&&o?d:void 0}),x(rLe,{isCitizen:n,searchQuery:s,incidentId:e,identifier:t,addCharge:r}),x(JQ,{opened:l,close:c})]})}function iLe({index:e,incidentId:t,item:n,handleBadgeRemove:r}){if(typeof t=="string")return null;const{incidents:i,updateIncident:a,updateCriminalFine:s,updateCriminalSentence:o,updateCriminalPoints:l,removeChargeWithId:u,updateCharges:c}=Ed(),{charges:d}=i$(),{toggleWarrant:p}=Us(),{showIdentifiers:h,copiedCharges:m,setCopiedCharges:g}=Zt(),[y,v]=I.exports.useState((n==null?void 0:n.fine)||0),[b,_]=I.exports.useState((n==null?void 0:n.sentence)||0),[k]=Kt(y,500),[S]=Kt(b,500),$=I.exports.useCallback((Z,te)=>{var Y,Q,oe,pe;const V=i.find(he=>he.id===t);if(!V)return 0;const ee=(Q=(Y=V.sideBarData)==null?void 0:Y.criminals)==null?void 0:Q.find(he=>he.identifier===n.identifier);return ee?Z==="points"?((oe=ee.charges)==null?void 0:oe.reduce((he,ge)=>{const _e=d.find(Ne=>Ne.id===ge.id);return _e&&_e[Z]?he+_e[Z]*ge.amount:he*ge.amount},0))||0:((pe=ee.charges)==null?void 0:pe.reduce((he,ge)=>{const _e=d.find(Ne=>Ne.id===ge.id);return _e&&_e[Z]?he+_e[Z][te]*ge.amount:he*ge.amount},0))||0:0},[i,t,d,n]),N=I.exports.useCallback(Z=>$("fine",Z),[$]),P=I.exports.useCallback(Z=>$("sentence",Z),[$]),D=I.exports.useCallback(()=>$("points",""),[$]);I.exports.useEffect(()=>{o(t,n.identifier,S)},[S]),I.exports.useEffect(()=>{s(t,n.identifier,k)},[k]),I.exports.useEffect(()=>{v((n==null?void 0:n.fine)||0),_((n==null?void 0:n.sentence)||0)},[n]);const O=I.exports.useCallback(Z=>{var V,ee,Y,Q;const te=((Q=(Y=(ee=(V=i.find(oe=>oe.id===t))==null?void 0:V.sideBarData)==null?void 0:ee.criminals)==null?void 0:Y.find(oe=>oe.identifier===Z))==null?void 0:Q.charges)||[];g(te)},[t,i,g]),F=I.exports.useCallback(Z=>{c(t,Z,m)},[t,c,m]),E=I.exports.useCallback((Z,te)=>{var ee,Y,Q;if(typeof t!="number"||!(n!=null&&n.identifier))return;const V=(Q=(Y=(ee=i.find(oe=>oe.id===t))==null?void 0:ee.sideBarData)==null?void 0:Y.criminals)==null?void 0:Q.map(oe=>oe.identifier===n.identifier?{...oe,[Z]:te}:oe);if(a(t,{sideBarData:{criminals:V}}),Z==="hasWarrant"){const oe=i.find(pe=>pe.id===t);oe&&p(n.identifier,{incidentTitle:oe.title,incidentId:t})}},[i,t,n,a,p]),z=I.exports.useCallback((Z,te)=>{var Y,Q,oe,pe;if(typeof t!="number")return;const V=((pe=(oe=(Q=(Y=i.find(he=>he.id===t))==null?void 0:Y.sideBarData)==null?void 0:Q.criminals)==null?void 0:oe.find(he=>he.identifier===te))==null?void 0:pe.charges)||[],ee=V.findIndex(he=>he.id===Z);if(ee!==-1){const he=[...V];he[ee]={id:Z,amount:he[ee].amount+1},c(t,te,he)}else{const he=[...V,{id:Z,amount:1}];c(t,te,he)}l(t,te,D())},[t,i,c,l,D]),q=()=>{Ee("finePlayer",{targetIdentifier:n.identifier,amount:y})},K=()=>{Ee("jailPlayer",{targetIdentifier:n.identifier,time:b})};return x(Bt,{bg:"dark.6",w:"100%",px:10,py:10,radius:"xs",children:B(Ce,{children:[B(me,{position:"apart",children:[B(Ce,{spacing:0,children:[x(Te,{children:n.name}),h&&B(Te,{size:"xs",color:"gray.5",children:["ID: ",n.identifier]})]}),B(me,{position:"right",spacing:10,children:[x(is,{withArrow:!0,withinPortal:!0,color:"dark",label:j.handle_charges,children:x(Le,{variant:"subtle",onClick:Z=>{Tn.open({size:"80%",centered:!0,title:j.choose_charges,children:x(vt,{p:20,bg:"dark.8",children:x(pD,{incidentId:t,identifier:n.identifier,addCharge:te=>z(te.id,n.identifier)})})})},children:x(eI,{})})}),x(is,{withArrow:!0,withinPortal:!0,color:"dark",label:j.paste_charges,children:x(Le,{variant:"subtle",onClick:()=>F(n.identifier),children:x(iRe,{})})}),x(is,{withArrow:!0,withinPortal:!0,color:"dark",label:j.copy_charges,children:x(Le,{variant:"subtle",onClick:()=>O(n.identifier),children:x(sRe,{})})}),x(is,{withArrow:!0,withinPortal:!0,color:"dark",label:j.remove,children:x(Le,{variant:"subtle",onClick:Z=>{r(n.identifier)},children:x(pi,{})})})]})]}),x(VC,{w:"80%",ml:"10%",label:Z=>j.fine_value.format(Z),min:N("min"),max:N("max"),step:10,value:y,onChange:Z=>{v(Z)},marks:[{value:N("default"),label:j.default_fine.format(N("default"))}],mb:15}),x(VC,{w:"80%",ml:"10%",label:Z=>j.sentence_value.format(Z),min:P("min"),max:P("max"),step:1,value:b,onChange:Z=>{_(Z)},marks:[{value:P("default"),label:j.default_sentence.format(P("default"))}],mb:15}),x(Te,{children:j.license_points_value.format(D())}),(()=>{var te,V,ee,Y;const Z=((Y=(ee=(V=(te=i.find(Q=>Q.id===t))==null?void 0:te.sideBarData)==null?void 0:V.criminals)==null?void 0:ee.find(Q=>Q.identifier===n.identifier))==null?void 0:Y.charges)||[];return Z.length===0?null:x(me,{spacing:10,w:"100%",children:Z.map(Q=>{const{id:oe,amount:pe}=Q,he=d.find(ge=>ge.id===oe);return he?B(xt,{rightSection:x(Le,{size:14,variant:"transparent",onClick:()=>{!t||!n.identifier||(u(t,n.identifier,oe),l(t,n.identifier,D()))},children:x(pi,{})}),children:[he.name," x",pe]},oe):null}).filter(Boolean)})})(),B(me,{position:"apart",children:[B(Ce,{spacing:5,children:[x(Eg,{label:j.warrant,checked:n.hasWarrant,onChange:Z=>E("hasWarrant",Z.currentTarget.checked)}),x(Eg,{label:j.processed,checked:n.processed,onChange:Z=>E("processed",Z.currentTarget.checked)}),x(Eg,{label:j.plead_guilty,checked:n.pleadGuilty,onChange:Z=>E("pleadGuilty",Z.currentTarget.checked)})]}),B(Ce,{spacing:5,children:[x(is,{color:"dark",withArrow:!0,label:j.send_to_jail,children:x(Le,{onClick:K,children:x(NRe,{})})}),x(is,{color:"dark",withArrow:!0,label:j.send_fine,children:x(Le,{onClick:q,children:x(eI,{})})})]})]})]})},e)}function aLe({searchQuery:e,filters:t}){const{vehicles:n,updateVehicle:r}=Rh(),{updateTab:i}=gn(),a=I.exports.useMemo(()=>n.filter(o=>{var c,d,p;if(!o||Object.keys(o).length===0||!(o!=null&&o.name)||!(o!=null&&o.plate))return!1;const l=((c=o==null?void 0:o.name)==null?void 0:c.toLowerCase().includes(e.toLowerCase()))||((d=o==null?void 0:o.plate)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=o==null?void 0:o.owner)==null?void 0:p.toLowerCase().includes(e.toLowerCase()));if(!t)return l;const u=t.every(h=>{if(!(o!=null&&o.sideBarData))return!1;let m;if(h.type in o.sideBarData?m=o.sideBarData[h.type]:m=o[h.type],Array.isArray(m)&&m.length>0){if(typeof m[0]=="object")return m.some(g=>Object.values(g).some(y=>typeof y=="string"?y.toLowerCase().includes(h.value.toLowerCase()):!1));if(typeof m[0]=="string")return m.some(g=>g.toLowerCase().includes(h.value.toLowerCase()))}return typeof m=="string"?m.toLowerCase().includes(h.value.toLowerCase()):!1});return l&&u}).sort((o,l)=>o.plate.localeCompare(l.plate)),[e,t,n]),s=({index:o,style:l})=>{const u=a[o];return!u||Object.keys(u).length===0||!(u!=null&&u.plate)||!(u!=null&&u.name)?null:x("div",{style:{...l},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getVehicle",u.plate).then(c=>{!c||!u.plate||r(u.plate,c)}),i({title:"vehicles",component:x(hD,{vehiclePlate:u.plate})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:u.image}),B(Ce,{spacing:1,children:[B(Te,{fw:600,size:16,children:[u.name," [",u.plate,"]"]}),x(Te,{fw:500,size:12,color:"gray.5",children:u.owner})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:a.length,itemSize:110,width:"100%",children:s})}function iee(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"name",value:""},{type:"plate",value:""},{type:"tags",value:""}]);return B(Fe,{children:[x(_a,{title:j.vehicles,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setSearchQuery:t,setFilters:i}),x(aLe,{searchQuery:n,filters:r})]})}function hD({vehiclePlate:e}){const{vehicles:t,updateVehicle:n}=Rh(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(v=>v.plate===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image),[d,p]=I.exports.useState(i==null?void 0:i.notes),[h]=Kt(d,1e3);I.exports.useEffect(()=>{a(t.find(v=>v.plate===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{d!==(i==null?void 0:i.notes)&&p(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&h&&n(i.plate,{notes:h})},[h]);const m=I.exports.useCallback(()=>{r({title:"vehicles",component:x(iee,{})})},[i,r]),g=I.exports.useCallback(()=>{const v={...i,notes:d};Ee("saveVehicle",v).then(()=>{i!=null&&i.plate&&n(i==null?void 0:i.plate,{notes:d}),Ir(j.mdt,j.saved_successfully)})},[i,d]),y=()=>{l(),Ee("hideUI"),Ee("takePhoto","vehicle")};return wt("photoTaken",v=>{v.page==="vehicle"&&(o(),c(v.url))}),B(Fe,{children:[i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.model,variant:"filled",readOnly:!0,value:i.name,size:"xs"}),x(Ze,{label:j.plate,variant:"filled",readOnly:!0,value:i.plate,size:"xs"}),x(Ze,{label:j.owner,variant:"filled",readOnly:!0,value:i.owner,size:"xs"}),x(Ze,{label:j.color,variant:"filled",readOnly:!0,value:i.color,size:"xs"}),x(Ze,{label:j.garage,variant:"filled",readOnly:!0,value:i.garage,size:"xs"})]})})]}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:m,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(Gs,{})})]})})]}),x(xs,{w:"100%",label:j.notes,minRows:28,maxLength:5e4,value:d,onChange:v=>p(v.currentTarget.value)})]})}),x(ll,{page:"vehicle",sidebar:i.sideBarData,pageId:i.plate,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,onChange:v=>c(v.currentTarget.value),rightSection:x(Le,{onClick:y,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.plate,{image:u}))},children:j.confirm})})]})})]})}function ny(e){if(!e)return!1;try{return new URL(e),!0}catch{return!1}}function sLe({pageTitle:e,index:t,pageId:n,item:r,canAddBOLO:i,handleBadgeRemove:a}){const{incidents:s,updateIncident:o}=Ed(),{reports:l,updateReport:u}=Gu(),{toggleBOLO:c,updateVehicle:d}=Rh(),{addTab:p}=gn(),h=(m,g)=>{var _,k,S;if(typeof n!="number"||!(r!=null&&r.plate))return;const y=e==="report"?l:s,v=e==="report"?u:o,b=(S=(k=(_=y.find($=>$.id===n))==null?void 0:_.sideBarData)==null?void 0:k.vehicles)==null?void 0:S.map($=>$.plate===r.plate?{...$,[m]:g}:$);if(v(n,{sideBarData:{vehicles:b}}),m==="hasBOLO"){const $=y.find(N=>N.id===n);$&&c(r.plate,{title:$.title,id:n,isReport:e==="report"})}};return x(is,{p:5,label:x("img",{src:r.image,width:250}),position:"left",color:"dark.6",hidden:!ny(r.image),withArrow:!0,withinPortal:!0,children:x(xt,{h:30,leftSection:i&&x(Eg,{onLabel:j.bolo,offLabel:j.bolo,checked:r.hasBOLO,onChange:m=>{h("hasBOLO",m.currentTarget.checked)}}),rightSection:i&&x(Le,{size:14,variant:"transparent",onClick:m=>{a(r.plate)},children:x(pi,{})}),children:B(Te,{fw:600,style:{cursor:"pointer"},onClick:()=>{Ee("getVehicle",r.plate).then(m=>{!m||!r.plate||d(r.plate,m)}),p({title:"vehicles",component:x(hD,{vehiclePlate:r.plate})})},children:[r.name," [",r.plate,"]"]})},t)},t)}const oLe=[{value:0,label:"1"},{value:25,label:"2"},{value:50,label:"3"},{value:75,label:"4"},{value:100,label:"5"}];function aee({sidebar:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState(e.data),[a]=Kt(r,500);return I.exports.useEffect(()=>{n(t,{sideBarData:{[e.title]:a}})},[a]),x(VC,{label:null,defaultValue:e.data,w:"80%",mx:"auto",min:0,max:100,step:25,marks:oLe,value:r,onChange:i,pb:25,pt:10})}function lLe({searchQuery:e,filters:t}){const{showIdentifiers:n}=Zt(),{profiles:r,updateProfile:i}=Us(),{updateTab:a}=gn(),s=I.exports.useMemo(()=>r.filter(l=>{var d,p,h,m;if(!l||Object.keys(l).length===0||!(l!=null&&l.name)||!(l!=null&&l.identifier))return!1;const u=((d=l==null?void 0:l.name)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l==null?void 0:l.identifier)==null?void 0:p.toLowerCase().includes(e.toLowerCase()))||((h=l==null?void 0:l.fingerprint)==null?void 0:h.toLowerCase().includes(e.toLowerCase()))||((m=l==null?void 0:l.phoneNumber)==null?void 0:m.toLowerCase().includes(e.toLowerCase()));if(!t)return u;const c=t.every(g=>{if(!(l!=null&&l.sideBarData))return!1;let y;if(g.type in l.sideBarData?y=l==null?void 0:l.sideBarData[g.type]:y=l[g.type],Array.isArray(y)&&y.length>0){if(typeof y[0]=="object")return y.some(v=>Object.values(v).some(b=>typeof b=="string"?b.toLowerCase().includes(g.value.toLowerCase()):!1));if(typeof y[0]=="string")return y.some(v=>v.toLowerCase().includes(g.value.toLowerCase()))}return typeof y=="string"?y.toLowerCase().includes(g.value.toLowerCase()):!1});return u&&c}),[e,t,r]),o=({index:l,style:u})=>{const c=s[l];return!c||Object.keys(c).length===0||!(c!=null&&c.identifier)||!(c!=null&&c.name)?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getProfile",c==null?void 0:c.identifier).then(d=>{!d||!(c!=null&&c.identifier)||i(c.identifier,d)}),a({title:"profiles",component:x(A3,{profileId:c.identifier})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:c.image}),B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:c.name}),n&&B(xt,{radius:"sm",children:["ID: ",c.identifier]})]}),x(Te,{fw:500,size:12,color:"gray.5",children:c.dob})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}var uLe=Object.defineProperty,cLe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),fD=(e,t)=>{for(var n in t)uLe(e,n,{get:t[n],enumerable:!0})},dLe={};fD(dLe,{Abs:()=>jy,Acos:()=>Lh,Acosh:()=>Fh,AdadeltaOptimizer:()=>RL,AdagradOptimizer:()=>DL,AdamOptimizer:()=>LL,AdamaxOptimizer:()=>FL,Add:()=>Pd,AddN:()=>zh,All:()=>Hy,Any:()=>Uy,ArgMax:()=>Gy,ArgMin:()=>qy,Asin:()=>Bh,Asinh:()=>Wh,Atan:()=>Vh,Atan2:()=>Hh,Atanh:()=>jh,AvgPool:()=>Uh,AvgPool3D:()=>Ky,AvgPool3DGrad:()=>lw,AvgPoolGrad:()=>ow,BackendWasm:()=>pue,BatchMatMul:()=>Gh,BatchToSpaceND:()=>Zy,Bincount:()=>Xy,BitwiseAnd:()=>Jy,BroadcastArgs:()=>uw,BroadcastTo:()=>wee,Callback:()=>die,CallbackList:()=>sre,Cast:()=>qh,Ceil:()=>Kh,ClipByValue:()=>Md,Complex:()=>d$,ComplexAbs:()=>cw,Concat:()=>Yy,Conv2D:()=>Zh,Conv2DBackpropFilter:()=>p$,Conv2DBackpropInput:()=>Xh,Conv3D:()=>Jh,Conv3DBackpropFilterV2:()=>Qy,Conv3DBackpropInputV2:()=>ev,Cos:()=>Yh,Cosh:()=>Qh,CropAndResize:()=>nv,Cumprod:()=>tv,Cumsum:()=>ef,CustomCallback:()=>lre,DataStorage:()=>l$,DenseBincount:()=>dw,DepthToSpace:()=>rv,DepthwiseConv2dNative:()=>tf,DepthwiseConv2dNativeBackpropFilter:()=>h$,DepthwiseConv2dNativeBackpropInput:()=>f$,Diag:()=>pw,Dilation2D:()=>nf,Dilation2DBackpropFilter:()=>ay,Dilation2DBackpropInput:()=>iy,Draw:()=>m$,ENV:()=>bD,EarlyStopping:()=>pie,Einsum:()=>g$,Elu:()=>af,EluGrad:()=>iv,Environment:()=>vee,Equal:()=>av,Erf:()=>sf,Exp:()=>of,ExpandDims:()=>sv,Expm1:()=>lf,FFT:()=>y$,Fill:()=>hw,FlipLeftRight:()=>ov,Floor:()=>uf,FloorDiv:()=>cf,FromPixels:()=>lI,FusedBatchNorm:()=>df,FusedConv2D:()=>ah,FusedDepthwiseConv2D:()=>sh,GPGPUContext:()=>Ik,GatherNd:()=>uv,GatherV2:()=>lv,GraphModel:()=>Sz,Greater:()=>cv,GreaterEqual:()=>pf,History:()=>ore,IFFT:()=>v$,Identity:()=>hf,Imag:()=>b$,InputSpec:()=>zr,IsFinite:()=>ff,IsInf:()=>mf,IsNan:()=>gf,KernelBackend:()=>aw,LRN:()=>wf,LRNGrad:()=>yv,LayerVariable:()=>Yne,LayersModel:()=>Iu,LeakyRelu:()=>yf,Less:()=>dv,LessEqual:()=>pv,LinSpace:()=>hv,Log:()=>vf,Log1p:()=>bf,LogSoftmax:()=>_ee,LogicalAnd:()=>fv,LogicalNot:()=>mv,LogicalOr:()=>gv,LogicalXor:()=>xee,LowerBound:()=>nFe,MathBackendCPU:()=>$z,MathBackendWebGL:()=>t3,MatrixBandPart:()=>rFe,Max:()=>xf,MaxPool:()=>kf,MaxPool3D:()=>vv,MaxPool3DGrad:()=>mw,MaxPoolGrad:()=>fw,MaxPoolWithArgmax:()=>gw,Maximum:()=>_f,Mean:()=>Sf,Min:()=>Cf,Minimum:()=>If,MirrorPad:()=>$f,Mod:()=>Tf,MomentumOptimizer:()=>zL,Multinomial:()=>bv,Multiply:()=>Nf,Neg:()=>wv,NonMaxSuppressionV3:()=>_v,NonMaxSuppressionV4:()=>kv,NonMaxSuppressionV5:()=>Sv,NotEqual:()=>xv,OP_SCOPE_SUFFIX:()=>SD,OneHot:()=>Ef,OnesLike:()=>Cv,Optimizer:()=>Qu,OptimizerConstructors:()=>One,Pack:()=>Iv,PadV2:()=>Of,Pool:()=>iFe,Pow:()=>Pf,Prelu:()=>Mf,Prod:()=>Af,RMSPropOptimizer:()=>BL,RNN:()=>ec,RaggedGather:()=>w$,RaggedRange:()=>x$,RaggedTensorToTensor:()=>_$,Range:()=>yw,Rank:()=>PP,Real:()=>k$,RealDiv:()=>rf,Reciprocal:()=>Rf,Reduction:()=>ha,Relu:()=>Df,Relu6:()=>zf,Reshape:()=>$v,ResizeBilinear:()=>Ff,ResizeBilinearGrad:()=>Nv,ResizeNearestNeighbor:()=>Lf,ResizeNearestNeighborGrad:()=>Tv,Reverse:()=>Bf,RotateWithOffset:()=>Hv,Round:()=>Wf,Rsqrt:()=>Vf,SGDOptimizer:()=>iT,ScatterNd:()=>Ev,SearchSorted:()=>Pv,Select:()=>Mv,Selu:()=>jf,Sequential:()=>yT,Sigmoid:()=>qf,Sign:()=>Gf,Sin:()=>Hf,Sinh:()=>Uf,Slice:()=>Av,Softmax:()=>Jf,Softplus:()=>Kf,SpaceToBatchND:()=>Rv,SparseFillEmptyRows:()=>vw,SparseReshape:()=>Lv,SparseSegmentMean:()=>bw,SparseSegmentSum:()=>ww,SparseToDense:()=>Fv,SplitV:()=>Dv,Sqrt:()=>Zf,Square:()=>xw,SquaredDifference:()=>Yf,StaticRegexReplace:()=>_w,Step:()=>Rd,StridedSlice:()=>zv,StringNGrams:()=>kw,StringSplit:()=>Sw,StringToHashBucketFast:()=>Cw,Sub:()=>Qf,Sum:()=>Xf,SymbolicTensor:()=>nl,Tan:()=>em,Tanh:()=>tm,Tensor:()=>zt,TensorBuffer:()=>Br,TensorScatterUpdate:()=>Ov,Tile:()=>Ad,TopK:()=>Bv,Transform:()=>Wv,Transpose:()=>Cu,Unique:()=>Iw,Unpack:()=>Vv,UnsortedSegmentSum:()=>$w,UpperBound:()=>aFe,Variable:()=>oh,ZerosLike:()=>jv,_FusedMatMul:()=>ih,abs:()=>Dr,acos:()=>ND,acosh:()=>ED,add:()=>we,addN:()=>Xee,all:()=>T$,any:()=>y1,argMax:()=>dh,argMin:()=>OD,asin:()=>PD,asinh:()=>MD,atan:()=>AD,atan2:()=>RD,atanh:()=>DD,avgPool:()=>Xu,avgPool3d:()=>FD,backend:()=>CD,backend_util:()=>W,basicLSTMCell:()=>ete,batchNorm:()=>nm,batchNorm2d:()=>zD,batchNorm3d:()=>BD,batchNorm4d:()=>WD,batchToSpaceND:()=>Aw,bincount:()=>VD,bitwiseAnd:()=>tte,booleanMaskAsync:()=>Hte,broadcastArgs:()=>nte,broadcastTo:()=>zp,broadcast_util:()=>Uv,browser:()=>qw,buffer:()=>Gt,callbacks:()=>Y7e,cast:()=>Ae,ceil:()=>jD,clipByValue:()=>Qi,clone:()=>zl,complex:()=>Lu,concat:()=>Wn,concat1d:()=>HD,concat2d:()=>UD,concat3d:()=>GD,concat4d:()=>qD,constraints:()=>nre,conv1d:()=>N$,conv2d:()=>ya,conv2dTranspose:()=>E$,conv3d:()=>ZD,conv3dTranspose:()=>XD,copyRegisteredKernels:()=>uFe,cos:()=>Rw,cosh:()=>O$,cosineWindow:()=>Q$,cumprod:()=>w1,cumsum:()=>P$,customGrad:()=>Hl,data:()=>Die,denseBincount:()=>pI,deprecationWarn:()=>Dee,depthToSpace:()=>JD,depthwiseConv2d:()=>rm,deregisterOp:()=>t9e,device_util:()=>Ow,diag:()=>ite,dilation2d:()=>YD,disableDeprecationWarnings:()=>zFe,dispose:()=>Rt,disposeVariables:()=>BFe,div:()=>Qe,divNoNan:()=>QD,dot:()=>eL,dropout:()=>EL,einsum:()=>vp,elu:()=>Gv,enableDebugMode:()=>FFe,enableProdMode:()=>LFe,enclosingPowerOfTwo:()=>OL,engine:()=>eo,ensureShape:()=>ste,env:()=>fe,equal:()=>gs,erf:()=>tL,euclideanNorm:()=>iL,exp:()=>ea,expandDims:()=>gi,expm1:()=>aL,eye:()=>M$,fft:()=>Uw,fill:()=>ps,findBackend:()=>GFe,findBackendFactory:()=>qFe,floor:()=>Kv,floorDiv:()=>$$,forceHalfFloat:()=>soe,fused:()=>hy,gather:()=>Zv,gatherND:()=>Kte,gather_util:()=>jL,getBackend:()=>Lee,getGradient:()=>EP,getKernel:()=>f1,getKernelsForBackend:()=>uI,getThreadsCount:()=>ovt,gpgpu_util:()=>Lse,grad:()=>CBe,grads:()=>IBe,greater:()=>Ca,greaterEqual:()=>Ju,ifft:()=>py,imag:()=>Dw,image:()=>Ns,inTopKAsync:()=>Zte,initializers:()=>rre,input:()=>_re,io:()=>Oi,irfft:()=>G$,isFinite:()=>sL,isInf:()=>oL,isNaN:()=>lL,keep:()=>Yr,kernel_impls:()=>Yl,layers:()=>ire,leakyRelu:()=>Lw,less:()=>ly,lessEqual:()=>Ld,linalg:()=>AL,linspace:()=>dte,loadGraphModel:()=>oqe,loadGraphModelSync:()=>lqe,loadLayersModel:()=>K8e,localResponseNormalization:()=>uL,log:()=>ys,log1p:()=>Fw,logSigmoid:()=>cL,logSoftmax:()=>R$,logSumExp:()=>zw,logicalAnd:()=>mo,logicalNot:()=>Bw,logicalOr:()=>D$,logicalXor:()=>dL,losses:()=>one,lowerBound:()=>hte,matMul:()=>jt,math:()=>vne,max:()=>Ds,maxPool:()=>ci,maxPool3d:()=>pL,maxPoolWithArgmax:()=>fte,maximum:()=>Jl,mean:()=>gr,memory:()=>dI,meshgrid:()=>mte,metrics:()=>lie,min:()=>oy,minimum:()=>fd,mirrorPad:()=>hL,mod:()=>fL,model:()=>J8e,models:()=>uie,moments:()=>Ww,movingAverage:()=>Ute,mul:()=>se,multiRNNCell:()=>gte,multinomial:()=>yte,neg:()=>Xn,nextFrame:()=>HL,norm:()=>qv,notEqual:()=>mh,oneHot:()=>uy,ones:()=>Aa,onesLike:()=>vs,op:()=>ie,outerProduct:()=>vte,pad:()=>sl,pad1d:()=>bte,pad2d:()=>wte,pad3d:()=>xte,pad4d:()=>_te,pool:()=>mL,pow:()=>Fu,prelu:()=>jw,print:()=>TD,prod:()=>gL,profile:()=>WFe,raggedGather:()=>kte,raggedRange:()=>Ste,raggedTensorToTensor:()=>Cte,rand:()=>Ite,randomGamma:()=>Ete,randomNormal:()=>F$,randomStandardNormal:()=>Ote,randomUniform:()=>Fd,randomUniformInt:()=>Pte,range:()=>gh,ready:()=>HFe,real:()=>cy,reciprocal:()=>xL,registerBackend:()=>I$,registerCallbackConstructor:()=>Q8e,registerGradient:()=>kee,registerKernel:()=>Tw,registerOp:()=>e9e,regularizers:()=>cie,relu:()=>On,relu6:()=>z$,removeBackend:()=>UFe,reshape:()=>le,reverse:()=>Ws,reverse1d:()=>Mte,reverse2d:()=>Ate,reverse3d:()=>Rte,reverse4d:()=>Dte,rfft:()=>Gw,round:()=>B$,rsqrt:()=>W$,scalar:()=>gt,scatterND:()=>Gte,scatter_util:()=>Z$,searchSorted:()=>L$,selu:()=>V$,separableConv2d:()=>Xv,sequential:()=>Y8e,serialization:()=>$e,setBackend:()=>jFe,setPlatform:()=>KFe,setThreadsCount:()=>svt,setWasmPath:()=>ivt,setWasmPaths:()=>avt,setWebGLContext:()=>ose,setdiff1dAsync:()=>Lte,shared:()=>Tz,sigmoid:()=>co,sign:()=>_L,signal:()=>sne,sin:()=>j$,sinh:()=>H$,slice:()=>nn,slice1d:()=>Hw,slice2d:()=>U$,slice3d:()=>Jv,slice4d:()=>dy,slice_util:()=>ti,softmax:()=>zd,softplus:()=>im,spaceToBatchND:()=>Vw,sparse:()=>lne,sparseToDense:()=>qte,spectral:()=>ane,split:()=>Fa,sqrt:()=>Di,square:()=>zn,squaredDifference:()=>q$,squeeze:()=>Bd,stack:()=>Wr,step:()=>am,stridedSlice:()=>kL,string:()=>une,sub:()=>Ve,sum:()=>ot,sumOutType:()=>C$,tan:()=>SL,tanh:()=>hh,tensor:()=>ma,tensor1d:()=>$n,tensor2d:()=>Bl,tensor3d:()=>K$,tensor4d:()=>md,tensor5d:()=>Fte,tensor6d:()=>zte,tensorScatterUpdate:()=>Wte,tensor_util:()=>Vo,test_util:()=>$te,tidy:()=>ue,tile:()=>ls,time:()=>VFe,topk:()=>IL,train:()=>fp,transpose:()=>Ht,truncatedNormal:()=>J$,unique:()=>$L,unregisterGradient:()=>lFe,unregisterKernel:()=>oFe,unsortedSegmentSum:()=>Y$,unstack:()=>$r,upcastType:()=>zs,upperBound:()=>Vte,util:()=>M,valueAndGrad:()=>$Be,valueAndGrads:()=>TBe,variable:()=>TL,variableGrads:()=>pte,version:()=>fvt,version_converter:()=>cqe,version_core:()=>YVe,version_cpu:()=>dZe,version_layers:()=>hF,version_wasm:()=>lvt,version_webgl:()=>nrt,webgl:()=>rrt,webgl_util:()=>sse,where:()=>wi,whereAsync:()=>NL,zeros:()=>yr,zerosLike:()=>an});var pLe=Object.create,mD=Object.defineProperty,hLe=Object.getOwnPropertyDescriptor,fLe=Object.getOwnPropertyNames,mLe=Object.getPrototypeOf,gLe=Object.prototype.hasOwnProperty,jr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Dt=(e,t)=>{for(var n in t)mD(e,n,{get:t[n],enumerable:!0})},yLe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of fLe(t))!gLe.call(e,i)&&i!==n&&mD(e,i,{get:()=>t[i],enumerable:!(r=hLe(t,i))||r.enumerable});return e},Od=(e,t,n)=>(n=e!=null?pLe(mLe(e)):{},yLe(t||!e||!e.__esModule?mD(n,"default",{value:e,enumerable:!0}):n,e)),vLe=jr((e,t)=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(E,z,q){this.low=E|0,this.high=z|0,this.unsigned=!!q}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0});function i(E){return(E&&E.__isLong__)===!0}r.isLong=i;var a={},s={};function o(E,z){var q,K,Z;return z?(E>>>=0,(Z=0<=E&&E<256)&&(K=s[E],K)?K:(q=u(E,(E|0)<0?-1:0,!0),Z&&(s[E]=q),q)):(E|=0,(Z=-128<=E&&E<128)&&(K=a[E],K)?K:(q=u(E,E<0?-1:0,!1),Z&&(a[E]=q),q))}r.fromInt=o;function l(E,z){if(isNaN(E))return z?k:_;if(z){if(E<0)return k;if(E>=y)return D}else{if(E<=-v)return O;if(E+1>=v)return P}return E<0?l(-E,z).neg():u(E%g|0,E/g|0,z)}r.fromNumber=l;function u(E,z,q){return new r(E,z,q)}r.fromBits=u;var c=Math.pow;function d(E,z,q){if(E.length===0)throw Error("empty string");if(E==="NaN"||E==="Infinity"||E==="+Infinity"||E==="-Infinity")return _;if(typeof z=="number"?(q=z,z=!1):z=!!z,q=q||10,q<2||36<q)throw RangeError("radix");var K;if((K=E.indexOf("-"))>0)throw Error("interior hyphen");if(K===0)return d(E.substring(1),z,q).neg();for(var Z=l(c(q,8)),te=_,V=0;V<E.length;V+=8){var ee=Math.min(8,E.length-V),Y=parseInt(E.substring(V,V+ee),q);if(ee<8){var Q=l(c(q,ee));te=te.mul(Q).add(l(Y))}else te=te.mul(Z),te=te.add(l(Y))}return te.unsigned=z,te}r.fromString=d;function p(E,z){return typeof E=="number"?l(E,z):typeof E=="string"?d(E,z):u(E.low,E.high,typeof z=="boolean"?z:E.unsigned)}r.fromValue=p;var h=65536,m=1<<24,g=h*h,y=g*g,v=y/2,b=o(m),_=o(0);r.ZERO=_;var k=o(0,!0);r.UZERO=k;var S=o(1);r.ONE=S;var $=o(1,!0);r.UONE=$;var N=o(-1);r.NEG_ONE=N;var P=u(-1,2147483647,!1);r.MAX_VALUE=P;var D=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=D;var O=u(0,-2147483648,!1);r.MIN_VALUE=O;var F=r.prototype;F.toInt=function(){return this.unsigned?this.low>>>0:this.low},F.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},F.toString=function(E){if(E=E||10,E<2||36<E)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(O)){var z=l(E),q=this.div(z),K=q.mul(z).sub(this);return q.toString(E)+K.toInt().toString(E)}else return"-"+this.neg().toString(E);for(var Z=l(c(E,6),this.unsigned),te=this,V="";;){var ee=te.div(Z),Y=te.sub(ee.mul(Z)).toInt()>>>0,Q=Y.toString(E);if(te=ee,te.isZero())return Q+V;for(;Q.length<6;)Q="0"+Q;V=""+Q+V}},F.getHighBits=function(){return this.high},F.getHighBitsUnsigned=function(){return this.high>>>0},F.getLowBits=function(){return this.low},F.getLowBitsUnsigned=function(){return this.low>>>0},F.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var E=this.high!=0?this.high:this.low,z=31;z>0&&!(E&1<<z);z--);return this.high!=0?z+33:z+1},F.isZero=function(){return this.high===0&&this.low===0},F.eqz=F.isZero,F.isNegative=function(){return!this.unsigned&&this.high<0},F.isPositive=function(){return this.unsigned||this.high>=0},F.isOdd=function(){return(this.low&1)===1},F.isEven=function(){return(this.low&1)===0},F.equals=function(E){return i(E)||(E=p(E)),this.unsigned!==E.unsigned&&this.high>>>31===1&&E.high>>>31===1?!1:this.high===E.high&&this.low===E.low},F.eq=F.equals,F.notEquals=function(E){return!this.eq(E)},F.neq=F.notEquals,F.ne=F.notEquals,F.lessThan=function(E){return this.comp(E)<0},F.lt=F.lessThan,F.lessThanOrEqual=function(E){return this.comp(E)<=0},F.lte=F.lessThanOrEqual,F.le=F.lessThanOrEqual,F.greaterThan=function(E){return this.comp(E)>0},F.gt=F.greaterThan,F.greaterThanOrEqual=function(E){return this.comp(E)>=0},F.gte=F.greaterThanOrEqual,F.ge=F.greaterThanOrEqual,F.compare=function(E){if(i(E)||(E=p(E)),this.eq(E))return 0;var z=this.isNegative(),q=E.isNegative();return z&&!q?-1:!z&&q?1:this.unsigned?E.high>>>0>this.high>>>0||E.high===this.high&&E.low>>>0>this.low>>>0?-1:1:this.sub(E).isNegative()?-1:1},F.comp=F.compare,F.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(S)},F.neg=F.negate,F.add=function(E){i(E)||(E=p(E));var z=this.high>>>16,q=this.high&65535,K=this.low>>>16,Z=this.low&65535,te=E.high>>>16,V=E.high&65535,ee=E.low>>>16,Y=E.low&65535,Q=0,oe=0,pe=0,he=0;return he+=Z+Y,pe+=he>>>16,he&=65535,pe+=K+ee,oe+=pe>>>16,pe&=65535,oe+=q+V,Q+=oe>>>16,oe&=65535,Q+=z+te,Q&=65535,u(pe<<16|he,Q<<16|oe,this.unsigned)},F.subtract=function(E){return i(E)||(E=p(E)),this.add(E.neg())},F.sub=F.subtract,F.multiply=function(E){if(this.isZero())return _;if(i(E)||(E=p(E)),n){var z=n.mul(this.low,this.high,E.low,E.high);return u(z,n.get_high(),this.unsigned)}if(E.isZero())return _;if(this.eq(O))return E.isOdd()?O:_;if(E.eq(O))return this.isOdd()?O:_;if(this.isNegative())return E.isNegative()?this.neg().mul(E.neg()):this.neg().mul(E).neg();if(E.isNegative())return this.mul(E.neg()).neg();if(this.lt(b)&&E.lt(b))return l(this.toNumber()*E.toNumber(),this.unsigned);var q=this.high>>>16,K=this.high&65535,Z=this.low>>>16,te=this.low&65535,V=E.high>>>16,ee=E.high&65535,Y=E.low>>>16,Q=E.low&65535,oe=0,pe=0,he=0,ge=0;return ge+=te*Q,he+=ge>>>16,ge&=65535,he+=Z*Q,pe+=he>>>16,he&=65535,he+=te*Y,pe+=he>>>16,he&=65535,pe+=K*Q,oe+=pe>>>16,pe&=65535,pe+=Z*Y,oe+=pe>>>16,pe&=65535,pe+=te*ee,oe+=pe>>>16,pe&=65535,oe+=q*Q+K*Y+Z*ee+te*V,oe&=65535,u(he<<16|ge,oe<<16|pe,this.unsigned)},F.mul=F.multiply,F.divide=function(E){if(i(E)||(E=p(E)),E.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&E.low===-1&&E.high===-1)return this;var z=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,E.low,E.high);return u(z,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?k:_;var q,K,Z;if(this.unsigned){if(E.unsigned||(E=E.toUnsigned()),E.gt(this))return k;if(E.gt(this.shru(1)))return $;Z=k}else{if(this.eq(O)){if(E.eq(S)||E.eq(N))return O;if(E.eq(O))return S;var te=this.shr(1);return q=te.div(E).shl(1),q.eq(_)?E.isNegative()?S:N:(K=this.sub(E.mul(q)),Z=q.add(K.div(E)),Z)}else if(E.eq(O))return this.unsigned?k:_;if(this.isNegative())return E.isNegative()?this.neg().div(E.neg()):this.neg().div(E).neg();if(E.isNegative())return this.div(E.neg()).neg();Z=_}for(K=this;K.gte(E);){q=Math.max(1,Math.floor(K.toNumber()/E.toNumber()));for(var V=Math.ceil(Math.log(q)/Math.LN2),ee=V<=48?1:c(2,V-48),Y=l(q),Q=Y.mul(E);Q.isNegative()||Q.gt(K);)q-=ee,Y=l(q,this.unsigned),Q=Y.mul(E);Y.isZero()&&(Y=S),Z=Z.add(Y),K=K.sub(Q)}return Z},F.div=F.divide,F.modulo=function(E){if(i(E)||(E=p(E)),n){var z=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,E.low,E.high);return u(z,n.get_high(),this.unsigned)}return this.sub(this.div(E).mul(E))},F.mod=F.modulo,F.rem=F.modulo,F.not=function(){return u(~this.low,~this.high,this.unsigned)},F.and=function(E){return i(E)||(E=p(E)),u(this.low&E.low,this.high&E.high,this.unsigned)},F.or=function(E){return i(E)||(E=p(E)),u(this.low|E.low,this.high|E.high,this.unsigned)},F.xor=function(E){return i(E)||(E=p(E)),u(this.low^E.low,this.high^E.high,this.unsigned)},F.shiftLeft=function(E){return i(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?u(this.low<<E,this.high<<E|this.low>>>32-E,this.unsigned):u(0,this.low<<E-32,this.unsigned)},F.shl=F.shiftLeft,F.shiftRight=function(E){return i(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?u(this.low>>>E|this.high<<32-E,this.high>>E,this.unsigned):u(this.high>>E-32,this.high>=0?0:-1,this.unsigned)},F.shr=F.shiftRight,F.shiftRightUnsigned=function(E){if(i(E)&&(E=E.toInt()),E&=63,E===0)return this;var z=this.high;if(E<32){var q=this.low;return u(q>>>E|z<<32-E,z>>>E,this.unsigned)}else return E===32?u(z,0,this.unsigned):u(z>>>E-32,0,this.unsigned)},F.shru=F.shiftRightUnsigned,F.shr_u=F.shiftRightUnsigned,F.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},F.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},F.toBytes=function(E){return E?this.toBytesLE():this.toBytesBE()},F.toBytesLE=function(){var E=this.high,z=this.low;return[z&255,z>>>8&255,z>>>16&255,z>>>24,E&255,E>>>8&255,E>>>16&255,E>>>24]},F.toBytesBE=function(){var E=this.high,z=this.low;return[E>>>24,E>>>16&255,E>>>8&255,E&255,z>>>24,z>>>16&255,z>>>8&255,z&255]},r.fromBytes=function(E,z,q){return q?r.fromBytesLE(E,z):r.fromBytesBE(E,z)},r.fromBytesLE=function(E,z){return new r(E[0]|E[1]<<8|E[2]<<16|E[3]<<24,E[4]|E[5]<<8|E[6]<<16|E[7]<<24,z)},r.fromBytesBE=function(E,z){return new r(E[4]<<24|E[5]<<16|E[6]<<8|E[7],E[0]<<24|E[1]<<16|E[2]<<8|E[3],z)}}),bLe=jr(()=>{}),wLe=jr(()=>{}),xLe=jr((e,t)=>{(function(n,r,i){function a(u){var c=this,d=l();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(u),c.s0<0&&(c.s0+=1),c.s1-=d(u),c.s1<0&&(c.s1+=1),c.s2-=d(u),c.s2<0&&(c.s2+=1),d=null}function s(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var d=new a(u),p=c&&c.state,h=d.next;return h.int32=function(){return d.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,p&&(typeof p=="object"&&s(p,d),h.state=function(){return s(d,{})}),h}function l(){var u=4022871197,c=function(d){d=String(d);for(var p=0;p<d.length;p++){u+=d.charCodeAt(p);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.alea=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),_Le=jr((e,t)=>{(function(n,r,i){function a(l){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var p=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^p^p>>>8},l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function o(l,u){var c=new a(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var h=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xor128=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),kLe=jr((e,t)=>{(function(n,r,i){function a(l){var u=this,c="";u.next=function(){var p=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(p^p<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function o(l,u){var c=new a(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var h=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xorwow=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),SLe=jr((e,t)=>{(function(n,r,i){function a(l){var u=this;u.next=function(){var d=u.x,p=u.i,h,m;return h=d[p],h^=h>>>7,m=h^h<<24,h=d[p+1&7],m^=h^h>>>10,h=d[p+3&7],m^=h^h>>>3,h=d[p+4&7],m^=h^h<<7,h=d[p+7&7],h=h^h<<13,m^=h^h<<9,d[p]=m,u.i=p+1&7,m};function c(d,p){var h,m=[];if(p===(p|0))m[0]=p;else for(p=""+p,h=0;h<p.length;++h)m[h&7]=m[h&7]<<15^p.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],d.x=m,d.i=0,h=256;h>0;--h)d.next()}c(u,l)}function s(l,u){return u.x=l.x.slice(),u.i=l.i,u}function o(l,u){l==null&&(l=+new Date);var c=new a(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var h=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,d&&(d.x&&s(d,c),p.state=function(){return s(c,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xorshift7=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),CLe=jr((e,t)=>{(function(n,r,i){function a(l){var u=this;u.next=function(){var d=u.w,p=u.X,h=u.i,m,g;return u.w=d=d+1640531527|0,g=p[h+34&127],m=p[h=h+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=p[h]=g^m,u.i=h,g+(d^d>>>16)|0};function c(d,p){var h,m,g,y,v,b=[],_=128;for(p===(p|0)?(m=p,p=null):(p=p+"\0",m=0,_=Math.max(_,p.length)),g=0,y=-32;y<_;++y)p&&(m^=p.charCodeAt((y+32)%p.length)),y===0&&(v=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,y>=0&&(v=v+1640531527|0,h=b[y&127]^=m+v,g=h==0?g+1:0);for(g>=128&&(b[(p&&p.length||0)&127]=-1),g=127,y=4*128;y>0;--y)m=b[g+34&127],h=b[g=g+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,b[g]=m^h;d.w=v,d.X=b,d.i=g}c(u,l)}function s(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function o(l,u){l==null&&(l=+new Date);var c=new a(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var h=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,d&&(d.X&&s(d,c),p.state=function(){return s(c,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xor4096=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),ILe=jr((e,t)=>{(function(n,r,i){function a(l){var u=this,c="";u.next=function(){var p=u.b,h=u.c,m=u.d,g=u.a;return p=p<<25^p>>>7^h,h=h-m|0,m=m<<24^m>>>8^g,g=g-p|0,u.b=p=p<<20^p>>>12^h,u.c=h=h-m|0,u.d=m<<16^h>>>16^g,u.a=g-p|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):c+=l;for(var d=0;d<c.length+20;d++)u.b^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function o(l,u){var c=new a(l),d=u&&u.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var h=c.next()>>>11,m=(c.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,d&&(typeof d=="object"&&s(d,c),p.state=function(){return s(c,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.tychei=o})(e,typeof t=="object"&&t,typeof define=="function"&&define)}),$Le=jr(()=>{}),TLe=jr((e,t)=>{(function(n,r,i){var a=256,s=6,o=52,l="random",u=i.pow(a,s),c=i.pow(2,o),d=c*2,p=a-1,h;function m(S,$,N){var P=[];$=$==!0?{entropy:!0}:$||{};var D=b(v($.entropy?[S,k(r)]:S==null?_():S,3),P),O=new g(P),F=function(){for(var E=O.g(s),z=u,q=0;E<c;)E=(E+q)*a,z*=a,q=O.g(1);for(;E>=d;)E/=2,z/=2,q>>>=1;return(E+q)/z};return F.int32=function(){return O.g(4)|0},F.quick=function(){return O.g(4)/4294967296},F.double=F,b(k(O.S),r),($.pass||N||function(E,z,q,K){return K&&(K.S&&y(K,O),E.state=function(){return y(O,{})}),q?(i[l]=E,z):E})(F,D,"global"in $?$.global:this==i,$.state)}function g(S){var $,N=S.length,P=this,D=0,O=P.i=P.j=0,F=P.S=[];for(N||(S=[N++]);D<a;)F[D]=D++;for(D=0;D<a;D++)F[D]=F[O=p&O+S[D%N]+($=F[D])],F[O]=$;(P.g=function(E){for(var z,q=0,K=P.i,Z=P.j,te=P.S;E--;)z=te[K=p&K+1],q=q*a+te[p&(te[K]=te[Z=p&Z+z])+(te[Z]=z)];return P.i=K,P.j=Z,q})(a)}function y(S,$){return $.i=S.i,$.j=S.j,$.S=S.S.slice(),$}function v(S,$){var N=[],P=typeof S,D;if($&&P=="object")for(D in S)try{N.push(v(S[D],$-1))}catch{}return N.length?N:P=="string"?S:S+"\0"}function b(S,$){for(var N=S+"",P,D=0;D<N.length;)$[p&D]=p&(P^=$[p&D]*19)+N.charCodeAt(D++);return k($)}function _(){try{var S;return h&&(S=h.randomBytes)?S=S(a):(S=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(S)),k(S)}catch{var $=n.navigator,N=$&&$.plugins;return[+new Date,n,N,n.screen,k(r)]}}function k(S){return String.fromCharCode.apply(0,S)}if(b(i.random(),r),typeof t=="object"&&t.exports){t.exports=m;try{h=$Le()}catch{}}else typeof define=="function"&&define.amd?define(function(){return m}):i["seed"+l]=m})(typeof self<"u"?self:e,[],Math)}),o$=jr((e,t)=>{var n=xLe(),r=_Le(),i=kLe(),a=SLe(),s=CLe(),o=ILe(),l=TLe();l.alea=n,l.xor128=r,l.xorwow=i,l.xorshift7=a,l.xor4096=s,l.tychei=o,t.exports=l}),see=jr(()=>{}),gD=jr(()=>{}),oee=jr(()=>{}),NLe=jr(()=>{}),ELe=jr(()=>{}),OLe=jr(()=>{}),PLe=jr((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){i=i||{};function a(){return V.buffer!=Se&&He(V.buffer),Re}function s(){return V.buffer!=Se&&He(V.buffer),Ke}function o(){return V.buffer!=Se&&He(V.buffer),it}function l(){return V.buffer!=Se&&He(V.buffer),Xe}function u(){return V.buffer!=Se&&He(V.buffer),at}var c=typeof i<"u"?i:{},d,p;c.ready=new Promise(function(ne,ce){d=ne,p=ce});var h;typeof process<"u"&&process.listeners&&(h={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var m=Object.assign({},c),g=(ne,ce)=>{throw ce},y=typeof window=="object",v=typeof importScripts=="function",b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=c.ENVIRONMENT_IS_PTHREAD||!1,k="";function S(ne){return c.locateFile?c.locateFile(ne,k):k+ne}var $,N,P;function D(ne){ne instanceof Ur||K("exiting due to exception: "+ne)}if(b){var O=gD(),F=oee();v?k=F.dirname(k)+"/":k=__dirname+"/",$=(ce,Pe)=>(ce=Ge(ce)?new URL(ce):F.normalize(ce),O.readFileSync(ce,Pe?void 0:"utf8")),P=ce=>{var Pe=$(ce,!0);return Pe.buffer||(Pe=new Uint8Array(Pe)),Pe},N=(ce,Pe,je)=>{ce=Ge(ce)?new URL(ce):F.normalize(ce),O.readFile(ce,function(Ot,Pt){Ot?je(Ot):Pe(Pt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ce){if(!(ce instanceof Ur))throw ce}),process.on("unhandledRejection",function(ce){throw ce}),g=(ce,Pe)=>{if(kt())throw process.exitCode=ce,Pe;D(Pe),process.exit(ce)},c.inspect=function(){return"[Emscripten Module object]"};let ne;try{ne=NLe()}catch(ce){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ce}global.Worker=ne.Worker}else(y||v)&&(v?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),typeof r<"u"&&r&&(k=r),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",b||($=ne=>{var ce=new XMLHttpRequest;return ce.open("GET",ne,!1),ce.send(null),ce.responseText},v&&(P=ne=>{var ce=new XMLHttpRequest;return ce.open("GET",ne,!1),ce.responseType="arraybuffer",ce.send(null),new Uint8Array(ce.response)}),N=(ne,ce,Pe)=>{var je=new XMLHttpRequest;je.open("GET",ne,!0),je.responseType="arraybuffer",je.onload=()=>{if(je.status==200||je.status==0&&je.response){ce(je.response);return}Pe()},je.onerror=Pe,je.send(null)}));b&&typeof performance>"u"&&(global.performance=ELe().performance);var E=console.log.bind(console),z=console.warn.bind(console);b&&(E=ne=>O.writeSync(1,ne+`
`),z=ne=>O.writeSync(2,ne+`
`));var q=c.print||E,K=c.printErr||z;Object.assign(c,m),m=null,c.arguments&&c.arguments,c.thisProgram&&c.thisProgram,c.quit&&(g=c.quit);var Z;c.wasmBinary&&(Z=c.wasmBinary);var te=c.noExitRuntime||!0;typeof WebAssembly!="object"&&Qn("no native wasm support detected");var V,ee,Y=!1,Q;function oe(ne,ce){ne||Qn(ce)}var pe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function he(ne,ce,Pe){ce>>>=0;for(var je=ce+Pe,Ot=ce;ne[Ot]&&!(Ot>=je);)++Ot;if(Ot-ce>16&&ne.buffer&&pe)return pe.decode(ne.buffer instanceof SharedArrayBuffer?ne.slice(ce,Ot):ne.subarray(ce,Ot));for(var Pt="";ce<Ot;){var qe=ne[ce++];if(!(qe&128)){Pt+=String.fromCharCode(qe);continue}var ft=ne[ce++]&63;if((qe&224)==192){Pt+=String.fromCharCode((qe&31)<<6|ft);continue}var vn=ne[ce++]&63;if((qe&240)==224?qe=(qe&15)<<12|ft<<6|vn:qe=(qe&7)<<18|ft<<12|vn<<6|ne[ce++]&63,qe<65536)Pt+=String.fromCharCode(qe);else{var ji=qe-65536;Pt+=String.fromCharCode(55296|ji>>10,56320|ji&1023)}}return Pt}function ge(ne,ce){return ne>>>=0,ne?he(s(),ne,ce):""}function _e(ne,ce,Pe,je){if(Pe>>>=0,!(je>0))return 0;for(var Ot=Pe,Pt=Pe+je-1,qe=0;qe<ne.length;++qe){var ft=ne.charCodeAt(qe);if(ft>=55296&&ft<=57343){var vn=ne.charCodeAt(++qe);ft=65536+((ft&1023)<<10)|vn&1023}if(ft<=127){if(Pe>=Pt)break;ce[Pe++>>>0]=ft}else if(ft<=2047){if(Pe+1>=Pt)break;ce[Pe++>>>0]=192|ft>>6,ce[Pe++>>>0]=128|ft&63}else if(ft<=65535){if(Pe+2>=Pt)break;ce[Pe++>>>0]=224|ft>>12,ce[Pe++>>>0]=128|ft>>6&63,ce[Pe++>>>0]=128|ft&63}else{if(Pe+3>=Pt)break;ce[Pe++>>>0]=240|ft>>18,ce[Pe++>>>0]=128|ft>>12&63,ce[Pe++>>>0]=128|ft>>6&63,ce[Pe++>>>0]=128|ft&63}}return ce[Pe>>>0]=0,Pe-Ot}function Ne(ne,ce,Pe){return _e(ne,s(),ce,Pe)}var Se,Re,Ke,it,Xe,at;_&&(Se=c.buffer);function He(ne){Se=ne,c.HEAP8=Re=new Int8Array(ne),c.HEAP16=new Int16Array(ne),c.HEAP32=it=new Int32Array(ne),c.HEAPU8=Ke=new Uint8Array(ne),c.HEAPU16=new Uint16Array(ne),c.HEAPU32=Xe=new Uint32Array(ne),c.HEAPF32=new Float32Array(ne),c.HEAPF64=at=new Float64Array(ne)}var _t=c.INITIAL_MEMORY||16777216;if(_)V=c.wasmMemory,Se=c.buffer;else if(c.wasmMemory)V=c.wasmMemory;else if(V=new WebAssembly.Memory({initial:_t/65536,maximum:65536,shared:!0}),!(V.buffer instanceof SharedArrayBuffer))throw K("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&K("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");V&&(Se=V.buffer),_t=Se.byteLength,He(Se);var mt,ht=[],Lt=[],Un=[];function kt(){return te}function bn(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)sr(c.preRun.shift());At(ht)}function tn(){!_&&At(Lt)}function Mt(){if(!_){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)wn(c.postRun.shift());At(Un)}}function sr(ne){ht.unshift(ne)}function Rn(ne){Lt.unshift(ne)}function wn(ne){Un.unshift(ne)}var un=0,cn=null;function Er(ne){un++,c.monitorRunDependencies&&c.monitorRunDependencies(un)}function ki(ne){if(un--,c.monitorRunDependencies&&c.monitorRunDependencies(un),un==0&&cn){var ce=cn;cn=null,ce()}}function Qn(ne){c.onAbort&&c.onAbort(ne),ne="Aborted("+ne+")",K(ne),Y=!0,Q=1,ne+=". Build with -sASSERTIONS for more info.";var ce=new WebAssembly.RuntimeError(ne);throw p(ce),ce}var Ta="data:application/octet-stream;base64,";function yn(ne){return ne.startsWith(Ta)}function Ge(ne){return ne.startsWith("file://")}var rt;rt="tfjs-backend-wasm-threaded-simd.wasm",yn(rt)||(rt=S(rt));function Si(ne){try{if(ne==rt&&Z)return new Uint8Array(Z);if(P)return P(ne);throw"both async and sync fetching of the wasm failed"}catch(ce){Qn(ce)}}function Dn(){if(!Z&&(y||v)){if(typeof fetch=="function"&&!Ge(rt))return fetch(rt,{credentials:"same-origin"}).then(function(ne){if(!ne.ok)throw"failed to load wasm binary file at '"+rt+"'";return ne.arrayBuffer()}).catch(function(){return Si(rt)});if(N)return new Promise(function(ne,ce){N(rt,function(Pe){ne(new Uint8Array(Pe))},ce)})}return Promise.resolve().then(function(){return Si(rt)})}function qn(){var ne={env:ep,wasi_snapshot_preview1:ep};function ce(qe,ft){var vn=qe.exports;if(c.asm=vn,oi(c.asm._emscripten_tls_init),mt=c.asm.__indirect_function_table,Rn(c.asm.__wasm_call_ctors),ee=ft,!_){var ji=J.unusedWorkers.length;J.unusedWorkers.forEach(function(Ea){J.loadWasmModuleToWorker(Ea,function(){--ji||ki()})})}}_||Er();function Pe(qe){ce(qe.instance,qe.module)}function je(qe){return Dn().then(function(ft){return WebAssembly.instantiate(ft,ne)}).then(function(ft){return ft}).then(qe,function(ft){K("failed to asynchronously prepare wasm: "+ft),Qn(ft)})}function Ot(){return!Z&&typeof WebAssembly.instantiateStreaming=="function"&&!yn(rt)&&!Ge(rt)&&!b&&typeof fetch=="function"?fetch(rt,{credentials:"same-origin"}).then(function(qe){var ft=WebAssembly.instantiateStreaming(qe,ne);return ft.then(Pe,function(vn){return K("wasm streaming compile failed: "+vn),K("falling back to ArrayBuffer instantiation"),je(Pe)})}):je(Pe)}if(c.instantiateWasm)try{var Pt=c.instantiateWasm(ne,ce);return Pt}catch(qe){K("Module.instantiateWasm callback failed with error: "+qe),p(qe)}return Ot().catch(p),{}}var ai={};function Ur(ne){this.name="ExitStatus",this.message="Program terminated with exit("+ne+")",this.status=ne}function hr(ne){var ce=J.pthreads[ne];delete J.pthreads[ne],ce.terminate(),nu(ne),J.runningWorkers.splice(J.runningWorkers.indexOf(ce),1),ce.pthread_ptr=0}function wr(ne){var ce=J.pthreads[ne];ce.postMessage({cmd:"cancel"})}function si(ne){var ce=J.pthreads[ne];oe(ce),J.returnWorkerToPool(ce)}function xn(ne){var ce=J.getNewWorker();if(!ce)return 6;J.runningWorkers.push(ce),J.pthreads[ne.pthread_ptr]=ce,ce.pthread_ptr=ne.pthread_ptr;var Pe={cmd:"run",start_routine:ne.startRoutine,arg:ne.arg,pthread_ptr:ne.pthread_ptr};return ce.runPthread=()=>{b&&ce.ref(),ce.postMessage(Pe,ne.transferList),delete ce.runPthread},ce.loaded&&ce.runPthread(),0}function _n(ne){if(_)return Wi(1,1,ne);Q=ne,kt()||(J.terminateAllThreads(),c.onExit&&c.onExit(ne),Y=!0),g(ne,new Ur(ne))}function ve(ne,ce){if(Q=ne,!ce&&_)throw St(ne),"unwind";_n(ne)}var Ie=ve;function Je(ne){if(ne instanceof Ur||ne=="unwind")return Q;g(1,ne)}var J={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){_?J.initWorker():J.initMainThread()},initMainThread:function(){for(var ne=8;ne--;)J.allocateUnusedWorker()},initWorker:function(){te=!1},setExitStatus:function(ne){Q=ne},terminateAllThreads:function(){for(var ne of Object.values(J.pthreads))J.returnWorkerToPool(ne);for(var ne of J.unusedWorkers)ne.terminate();J.unusedWorkers=[]},returnWorkerToPool:function(ne){var ce=ne.pthread_ptr;delete J.pthreads[ce],J.unusedWorkers.push(ne),J.runningWorkers.splice(J.runningWorkers.indexOf(ne),1),ne.pthread_ptr=0,b&&ne.unref(),nu(ce)},receiveObjectTransfer:function(ne){},threadInitTLS:function(){J.tlsInitFunctions.forEach(ne=>ne())},loadWasmModuleToWorker:function(ne,ce){ne.onmessage=Pt=>{var qe=Pt.data,ft=qe.cmd;if(ne.pthread_ptr&&(J.currentProxiedOperationCallerThread=ne.pthread_ptr),qe.targetThread&&qe.targetThread!=Zs()){var vn=J.pthreads[qe.targetThread];vn?vn.postMessage(qe,qe.transferList):K('Internal error! Worker sent a message "'+ft+'" to target pthread '+qe.targetThread+", but that thread no longer exists!"),J.currentProxiedOperationCallerThread=void 0;return}ft==="processProxyingQueue"?Bi(qe.queue):ft==="spawnThread"?xn(qe):ft==="cleanupThread"?si(qe.thread):ft==="killThread"?hr(qe.thread):ft==="cancelThread"?wr(qe.thread):ft==="loaded"?(ne.loaded=!0,b&&ne.unref(),ce&&ce(ne),ne.runPthread&&ne.runPthread()):ft==="print"?q("Thread "+qe.threadId+": "+qe.text):ft==="printErr"?K("Thread "+qe.threadId+": "+qe.text):ft==="alert"?alert("Thread "+qe.threadId+": "+qe.text):qe.target==="setimmediate"?ne.postMessage(qe):ft==="callHandler"?c[qe.handler](...qe.args):ft&&K("worker sent an unknown command "+ft),J.currentProxiedOperationCallerThread=void 0},ne.onerror=Pt=>{var qe="worker sent an error!";throw K(qe+" "+Pt.filename+":"+Pt.lineno+": "+Pt.message),Pt},b&&(ne.on("message",function(Pt){ne.onmessage({data:Pt})}),ne.on("error",function(Pt){ne.onerror(Pt)}),ne.on("detachedExit",function(){}));var Pe=[],je=["onExit","onAbort","print","printErr"];for(var Ot of je)c.hasOwnProperty(Ot)&&Pe.push(Ot);ne.postMessage({cmd:"load",handlers:Pe,urlOrBlob:c.mainScriptUrlOrBlob||r,wasmMemory:V,wasmModule:ee})},allocateUnusedWorker:function(){var ne,ce=S("tfjs-backend-wasm-threaded-simd.worker.js");ne=new Worker(ce),J.unusedWorkers.push(ne)},getNewWorker:function(){return J.unusedWorkers.length==0&&(J.allocateUnusedWorker(),J.loadWasmModuleToWorker(J.unusedWorkers[0])),J.unusedWorkers.pop()}};c.PThread=J;function At(ne){for(;ne.length>0;)ne.shift()(c)}function Ft(){var ne=Zs(),ce=o()[ne+52>>>2],Pe=o()[ne+56>>>2],je=ce-Pe;ic(ce,je),ac(ce)}c.establishStackSpace=Ft;function St(ne){if(_)return Wi(2,0,ne);try{Ie(ne)}catch(ce){Je(ce)}}var bt=[];function Jt(ne){var ce=bt[ne];return ce||(ne>=bt.length&&(bt.length=ne+1),bt[ne]=ce=mt.get(ne)),ce}function Be(ne,ce){var Pe=Jt(ne)(ce);kt()?J.setExitStatus(Pe):Im(Pe)}c.invokeEntryPoint=Be;function oi(ne){J.tlsInitFunctions.push(ne)}function ko(ne){xr(ne,!v,1,!y),J.threadInitTLS()}function Ss(ne){_?postMessage({cmd:"cleanupThread",thread:ne}):si(ne)}function nt(ne,ce,Pe,je){return _?Wi(3,1,ne,ce,Pe,je):Nt(ne,ce,Pe,je)}function Nt(ne,ce,Pe,je){if(typeof SharedArrayBuffer>"u")return K("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Ot=[],Pt=0;if(_&&(Ot.length===0||Pt))return nt(ne,ce,Pe,je);var qe={startRoutine:Pe,pthread_ptr:ne,arg:je,transferList:Ot};return _?(qe.cmd="spawnThread",postMessage(qe,Ot),0):xn(qe)}function Ln(){return 65536}var Et=!0;function So(){return Et}function Bi(ne){Atomics.store(o(),ne>>2,1),Zs()&&rc(ne),Atomics.compareExchange(o(),ne>>2,1,0)}c.executeNotifiedProxyingQueue=Bi;function Sm(ne,ce,Pe,je){if(ne==ce)setTimeout(()=>Bi(je));else if(_)postMessage({targetThread:ne,cmd:"processProxyingQueue",queue:je});else{var Ot=J.pthreads[ne];if(!Ot)return;Ot.postMessage({cmd:"processProxyingQueue",queue:je})}return 1}function g0(ne,ce,Pe){return-1}function y0(){Qn("")}function er(ne){er.shown||(er.shown={}),er.shown[ne]||(er.shown[ne]=1,b&&(ne="warning: "+ne),K(ne))}function Co(){b||v||er("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function eu(){return Date.now()}function tu(){return 4294901760}function v0(){return tu()}var Yd;b?Yd=()=>{var ne=process.hrtime();return ne[0]*1e3+ne[1]/1e6}:Yd=()=>performance.timeOrigin+performance.now();function b0(ne,ce,Pe){s().copyWithin(ne>>>0,ce>>>0,ce+Pe>>>0)}function w0(){return b?OLe().cpus().length:navigator.hardwareConcurrency}function Qd(ne){var ce=tp(),Pe=ne();return ac(ce),Pe}function Wi(ne,ce){var Pe=arguments.length-2,je=arguments;return Qd(()=>{for(var Ot=Pe,Pt=ru(Ot*8),qe=Pt>>3,ft=0;ft<Pe;ft++){var vn=je[2+ft];u()[qe+ft>>>0]=vn}return ul(ne,Ot,Pt,ce)})}var yt=[];function kn(ne,ce,Pe){yt.length=ce;for(var je=Pe>>3,Ot=0;Ot<ce;Ot++)yt[Ot]=u()[je+Ot>>>0];var Pt=ne<0,qe=Pt?ai[-ne-1]:tN[ne];return qe.apply(null,yt)}function Gr(ne){try{return V.grow(ne-Se.byteLength+65535>>>16),He(V.buffer),1}catch{}}function Wt(ne){var ce=s().length;if(ne=ne>>>0,ne<=ce)return!1;var Pe=tu();if(ne>Pe)return!1;let je=(vn,ji)=>vn+(ji-vn%ji)%ji;for(var Ot=1;Ot<=4;Ot*=2){var Pt=ce*(1+.2/Ot);Pt=Math.min(Pt,ne+100663296);var qe=Math.min(Pe,je(Math.max(ne,Pt),65536)),ft=Gr(qe);if(ft)return!0}return!1}function fn(){throw"unwind"}function Vi(ne){return _?Wi(4,1,ne):52}function Na(ne,ce,Pe,je,Ot){return _?Wi(5,1,ne,ce,Pe,je,Ot):70}var ia=[null,[],[]];function x0(ne,ce){var Pe=ia[ne];ce===0||ce===10?((ne===1?q:K)(he(Pe,0)),Pe.length=0):Pe.push(ce)}function Vt(ne,ce,Pe,je){if(_)return Wi(6,1,ne,ce,Pe,je);for(var Ot=0,Pt=0;Pt<Pe;Pt++){var qe=l()[ce>>>2],ft=l()[ce+4>>>2];ce+=8;for(var vn=0;vn<ft;vn++)x0(ne,s()[qe+vn>>>0]);Ot+=ft}return l()[je>>>2]=Ot,0}function fr(ne){var ce=c["_"+ne];return ce}function _0(ne,ce){a().set(ne,ce>>>0)}function Cm(ne,ce,Pe,je,Ot){var Pt={string:aa=>{var oc=0;if(aa!=null&&aa!==0){var S0=(aa.length<<2)+1;oc=ru(S0),Ne(aa,oc,S0)}return oc},array:aa=>{var oc=ru(aa.length);return _0(aa,oc),oc}};function qe(aa){return ce==="string"?ge(aa):ce==="boolean"?!!aa:aa}var ft=fr(ne),vn=[],ji=0;if(je)for(var Ea=0;Ea<je.length;Ea++){var qr=Pt[Pe[Ea]];qr?(ji===0&&(ji=tp()),vn[Ea]=qr(je[Ea])):vn[Ea]=je[Ea]}var Io=ft.apply(null,vn);function vx(aa){return ji!==0&&ac(ji),qe(aa)}return Io=vx(Io),Io}function Ja(ne,ce,Pe,je){Pe=Pe||[];var Ot=Pe.every(qe=>qe==="number"||qe==="boolean"),Pt=ce!=="string";return Pt&&Ot&&!je?fr(ne):function(){return Cm(ne,ce,Pe,arguments)}}J.init();var tN=[null,_n,St,nt,Vi,Na,Vt],ep={__emscripten_init_main_thread_js:ko,__emscripten_thread_cleanup:Ss,__pthread_create_js:Nt,_emscripten_default_pthread_stack_size:Ln,_emscripten_get_now_is_monotonic:So,_emscripten_notify_task_queue:Sm,_emscripten_set_offscreencanvas_size:g0,abort:y0,emscripten_check_blocking_allowed:Co,emscripten_date_now:eu,emscripten_get_heap_max:v0,emscripten_get_now:Yd,emscripten_memcpy_big:b0,emscripten_num_logical_cores:w0,emscripten_receive_on_main_thread_js:kn,emscripten_resize_heap:Wt,emscripten_unwind_to_js_event_loop:fn,exit:Ie,fd_close:Vi,fd_seek:Na,fd_write:Vt,memory:V||c.wasmMemory};qn(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},c._init=function(){return(c._init=c.asm.init).apply(null,arguments)},c._init_with_threads_count=function(){return(c._init_with_threads_count=c.asm.init_with_threads_count).apply(null,arguments)},c._get_threads_count=function(){return(c._get_threads_count=c.asm.get_threads_count).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.register_tensor).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.dispose_data).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.dispose).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.Abs).apply(null,arguments)},c._Acos=function(){return(c._Acos=c.asm.Acos).apply(null,arguments)},c._Acosh=function(){return(c._Acosh=c.asm.Acosh).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.Add).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.AddN).apply(null,arguments)},c._All=function(){return(c._All=c.asm.All).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.Any).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.ArgMax).apply(null,arguments)},c._ArgMin=function(){return(c._ArgMin=c.asm.ArgMin).apply(null,arguments)},c._Asin=function(){return(c._Asin=c.asm.Asin).apply(null,arguments)},c._Asinh=function(){return(c._Asinh=c.asm.Asinh).apply(null,arguments)},c._Atan=function(){return(c._Atan=c.asm.Atan).apply(null,arguments)},c._Atan2=function(){return(c._Atan2=c.asm.Atan2).apply(null,arguments)},c._Atanh=function(){return(c._Atanh=c.asm.Atanh).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.AvgPool).apply(null,arguments)},c._AvgPool3D=function(){return(c._AvgPool3D=c.asm.AvgPool3D).apply(null,arguments)},c._AvgPool3DGrad=function(){return(c._AvgPool3DGrad=c.asm.AvgPool3DGrad).apply(null,arguments)},c._AvgPoolGrad=function(){return(c._AvgPoolGrad=c.asm.AvgPoolGrad).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.BatchMatMul).apply(null,arguments)},c._Bincount=function(){return(c._Bincount=c.asm.Bincount).apply(null,arguments)},c._BitwiseAnd=function(){return(c._BitwiseAnd=c.asm.BitwiseAnd).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.Ceil).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.ClipByValue).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.Conv2D).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.Conv2DBackpropInput).apply(null,arguments)},c._Conv3D=function(){return(c._Conv3D=c.asm.Conv3D).apply(null,arguments)},c._Conv3DBackpropFilterV2=function(){return(c._Conv3DBackpropFilterV2=c.asm.Conv3DBackpropFilterV2).apply(null,arguments)},c._Conv3DBackpropInputV2=function(){return(c._Conv3DBackpropInputV2=c.asm.Conv3DBackpropInputV2).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.Cos).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.Cosh).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.CropAndResize).apply(null,arguments)},c._Cumprod=function(){return(c._Cumprod=c.asm.Cumprod).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.Cumsum).apply(null,arguments)},c._DenseBincount=function(){return(c._DenseBincount=c.asm.DenseBincount).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.DepthToSpace).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.DepthwiseConv2dNative).apply(null,arguments)},c._Diag=function(){return(c._Diag=c.asm.Diag).apply(null,arguments)},c._Dilation2D=function(){return(c._Dilation2D=c.asm.Dilation2D).apply(null,arguments)},c._Dilation2DBackpropFilter=function(){return(c._Dilation2DBackpropFilter=c.asm.Dilation2DBackpropFilter).apply(null,arguments)},c._Dilation2DBackpropInput=function(){return(c._Dilation2DBackpropInput=c.asm.Dilation2DBackpropInput).apply(null,arguments)},c._Elu=function(){return(c._Elu=c.asm.Elu).apply(null,arguments)},c._EluGrad=function(){return(c._EluGrad=c.asm.EluGrad).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.Equal).apply(null,arguments)},c._Erf=function(){return(c._Erf=c.asm.Erf).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.Exp).apply(null,arguments)},c._Expm1=function(){return(c._Expm1=c.asm.Expm1).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.FlipLeftRight).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.Floor).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.FloorDiv).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.FusedBatchNorm).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.FusedConv2D).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.FusedDepthwiseConv2D).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.Gather).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.GatherNd).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.Greater).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.GreaterEqual).apply(null,arguments)},c._IsFinite=function(){return(c._IsFinite=c.asm.IsFinite).apply(null,arguments)},c._IsInf=function(){return(c._IsInf=c.asm.IsInf).apply(null,arguments)},c._IsNan=function(){return(c._IsNan=c.asm.IsNan).apply(null,arguments)},c._LRN=function(){return(c._LRN=c.asm.LRN).apply(null,arguments)},c._LRNGrad=function(){return(c._LRNGrad=c.asm.LRNGrad).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.LeakyRelu).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.Less).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.LessEqual).apply(null,arguments)},c._LinSpace=function(){return(c._LinSpace=c.asm.LinSpace).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.Log).apply(null,arguments)},c._Log1p=function(){return(c._Log1p=c.asm.Log1p).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.LogicalAnd).apply(null,arguments)},c._LogicalNot=function(){return(c._LogicalNot=c.asm.LogicalNot).apply(null,arguments)},c._LogicalOr=function(){return(c._LogicalOr=c.asm.LogicalOr).apply(null,arguments)},c._LogicalXor=function(){return(c._LogicalXor=c.asm.LogicalXor).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.Max).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.MaxPool).apply(null,arguments)},c._MaxPool3D=function(){return(c._MaxPool3D=c.asm.MaxPool3D).apply(null,arguments)},c._MaxPool3DGrad=function(){return(c._MaxPool3DGrad=c.asm.MaxPool3DGrad).apply(null,arguments)},c._MaxPoolGrad=function(){return(c._MaxPoolGrad=c.asm.MaxPoolGrad).apply(null,arguments)},c._MaxPoolWithArgmax=function(){return(c._MaxPoolWithArgmax=c.asm.MaxPoolWithArgmax).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.Maximum).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.Mean).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.Min).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.Minimum).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.MirrorPad).apply(null,arguments)},c._Mod=function(){return(c._Mod=c.asm.Mod).apply(null,arguments)},c._Multinomial=function(){return(c._Multinomial=c.asm.Multinomial).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.Multiply).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.Neg).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.NonMaxSuppressionV3).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.NonMaxSuppressionV4).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.NonMaxSuppressionV5).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.NotEqual).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.OneHot).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.PadV2).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Pow).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Prelu).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Prod).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.RealDiv).apply(null,arguments)},c._Reciprocal=function(){return(c._Reciprocal=c.asm.Reciprocal).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Relu).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Relu6).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.ResizeBilinear).apply(null,arguments)},c._ResizeBilinearGrad=function(){return(c._ResizeBilinearGrad=c.asm.ResizeBilinearGrad).apply(null,arguments)},c._ResizeNearestNeighbor=function(){return(c._ResizeNearestNeighbor=c.asm.ResizeNearestNeighbor).apply(null,arguments)},c._ResizeNearestNeighborGrad=function(){return(c._ResizeNearestNeighborGrad=c.asm.ResizeNearestNeighborGrad).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Reverse).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.RotateWithOffset).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Round).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Rsqrt).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.ScatterNd).apply(null,arguments)},c._SearchSorted=function(){return(c._SearchSorted=c.asm.SearchSorted).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.SelectV2).apply(null,arguments)},c._Selu=function(){return(c._Selu=c.asm.Selu).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Sigmoid).apply(null,arguments)},c._Sign=function(){return(c._Sign=c.asm.Sign).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Sin).apply(null,arguments)},c._Sinh=function(){return(c._Sinh=c.asm.Sinh).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Softmax).apply(null,arguments)},c._Softplus=function(){return(c._Softplus=c.asm.Softplus).apply(null,arguments)},c._SparseFillEmptyRows=function(){return(c._SparseFillEmptyRows=c.asm.SparseFillEmptyRows).apply(null,arguments)},c._SparseReshape=function(){return(c._SparseReshape=c.asm.SparseReshape).apply(null,arguments)},c._SparseSegmentReduction=function(){return(c._SparseSegmentReduction=c.asm.SparseSegmentReduction).apply(null,arguments)},c._SparseToDense=function(){return(c._SparseToDense=c.asm.SparseToDense).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Sqrt).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Square).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.SquaredDifference).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Step).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.StridedSlice).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Sub).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Sum).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.Tan).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.Tanh).apply(null,arguments)},c._TensorScatterUpdate=function(){return(c._TensorScatterUpdate=c.asm.TensorScatterUpdate).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.Tile).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.TopK).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.Transform).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.Transpose).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm._FusedMatMul).apply(null,arguments)},c._malloc=function(){return(c._malloc=c.asm.malloc).apply(null,arguments)},c._free=function(){return(c._free=c.asm.free).apply(null,arguments)},c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm._emscripten_tls_init).apply(null,arguments)};var Zs=c._pthread_self=function(){return(Zs=c._pthread_self=c.asm.pthread_self).apply(null,arguments)};c.___errno_location=function(){return(c.___errno_location=c.asm.__errno_location).apply(null,arguments)};var xr=c.__emscripten_thread_init=function(){return(xr=c.__emscripten_thread_init=c.asm._emscripten_thread_init).apply(null,arguments)};c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm._emscripten_thread_crashed).apply(null,arguments)},c._emscripten_main_thread_process_queued_calls=function(){return(c._emscripten_main_thread_process_queued_calls=c.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},c._emscripten_main_browser_thread_id=function(){return(c._emscripten_main_browser_thread_id=c.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var ul=c._emscripten_run_in_main_runtime_thread_js=function(){return(ul=c._emscripten_run_in_main_runtime_thread_js=c.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};c._emscripten_dispatch_to_thread_=function(){return(c._emscripten_dispatch_to_thread_=c.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var rc=c.__emscripten_proxy_execute_task_queue=function(){return(rc=c.__emscripten_proxy_execute_task_queue=c.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},nu=c.__emscripten_thread_free_data=function(){return(nu=c.__emscripten_thread_free_data=c.asm._emscripten_thread_free_data).apply(null,arguments)},Im=c.__emscripten_thread_exit=function(){return(Im=c.__emscripten_thread_exit=c.asm._emscripten_thread_exit).apply(null,arguments)},ic=c._emscripten_stack_set_limits=function(){return(ic=c._emscripten_stack_set_limits=c.asm.emscripten_stack_set_limits).apply(null,arguments)},tp=c.stackSave=function(){return(tp=c.stackSave=c.asm.stackSave).apply(null,arguments)},ac=c.stackRestore=function(){return(ac=c.stackRestore=c.asm.stackRestore).apply(null,arguments)},ru=c.stackAlloc=function(){return(ru=c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)};c.dynCall_iijjiiii=function(){return(c.dynCall_iijjiiii=c.asm.dynCall_iijjiiii).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.dynCall_jiji).apply(null,arguments)},c.keepRuntimeAlive=kt,c.wasmMemory=V,c.cwrap=Ja,c.ExitStatus=Ur,c.PThread=J;var sc;cn=function ne(){sc||$m(),sc||(cn=ne)};function $m(ne){if(un>0)return;if(_){d(c),tn(),startWorker(c);return}if(bn(),un>0)return;function ce(){sc||(sc=!0,c.calledRun=!0,!Y&&(tn(),d(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Mt()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),ce()},1)):ce()}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();$m();var iu;h&&(iu={uncaughtException:process.listeners("uncaughtException").filter(function(ne){return!h.uncaughtException.indexOf(ne)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(ne){return!h.unhandledRejection.indexOf(ne)>-1})});var np;if(typeof WasmBackendModule<"u")np=WasmBackendModule;else if(typeof i<"u")np=i;else throw new Error("Could not find wasm module in post.js");if(iu){var k0=np._dispose;np._dispose=function(){k0(),iu.uncaughtException.forEach(function(ne){process.removeListener("uncaughtException",ne)}),iu.unhandledRejection.forEach(function(ne){process.removeListener("unhandledRejection",ne)})}}return i.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModuleThreadedSimd=n)}),MLe=jr((e,t)=>{t.exports.wasmWorkerContents=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`}),ALe=jr((e,t)=>{var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(i){i=i||{};var a=typeof i<"u"?i:{},s,o;a.ready=new Promise(function(ve,Ie){s=ve,o=Ie});var l;typeof process<"u"&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u=Object.assign({},a),c=typeof window=="object",d=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="";function m(ve){return a.locateFile?a.locateFile(ve,h):h+ve}var g,y,v;if(p){var b=gD(),_=oee();d?h=_.dirname(h)+"/":h=__dirname+"/",g=(ve,Ie)=>(ve=_t(ve)?new URL(ve):_.normalize(ve),b.readFileSync(ve,Ie?void 0:"utf8")),v=ve=>{var Ie=g(ve,!0);return Ie.buffer||(Ie=new Uint8Array(Ie)),Ie},y=(ve,Ie,Je)=>{ve=_t(ve)?new URL(ve):_.normalize(ve),b.readFile(ve,function(J,At){J?Je(J):Ie(At.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(ve){if(!(ve instanceof kt))throw ve}),process.on("unhandledRejection",function(ve){throw ve}),a.inspect=function(){return"[Emscripten Module object]"}}else(c||d)&&(d?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),r&&(h=r),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",g=ve=>{var Ie=new XMLHttpRequest;return Ie.open("GET",ve,!1),Ie.send(null),Ie.responseText},d&&(v=ve=>{var Ie=new XMLHttpRequest;return Ie.open("GET",ve,!1),Ie.responseType="arraybuffer",Ie.send(null),new Uint8Array(Ie.response)}),y=(ve,Ie,Je)=>{var J=new XMLHttpRequest;J.open("GET",ve,!0),J.responseType="arraybuffer",J.onload=()=>{if(J.status==200||J.status==0&&J.response){Ie(J.response);return}Je()},J.onerror=Je,J.send(null)});var k=a.print||console.log.bind(console),S=a.printErr||console.warn.bind(console);Object.assign(a,u),u=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit;var $;a.wasmBinary&&($=a.wasmBinary),a.noExitRuntime,typeof WebAssembly!="object"&&Xe("no native wasm support detected");var N,P=!1,D=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function O(ve,Ie,Je){Ie>>>=0;for(var J=Ie+Je,At=Ie;ve[At]&&!(At>=J);)++At;if(At-Ie>16&&ve.buffer&&D)return D.decode(ve.subarray(Ie,At));for(var Ft="";Ie<At;){var St=ve[Ie++];if(!(St&128)){Ft+=String.fromCharCode(St);continue}var bt=ve[Ie++]&63;if((St&224)==192){Ft+=String.fromCharCode((St&31)<<6|bt);continue}var Jt=ve[Ie++]&63;if((St&240)==224?St=(St&15)<<12|bt<<6|Jt:St=(St&7)<<18|bt<<12|Jt<<6|ve[Ie++]&63,St<65536)Ft+=String.fromCharCode(St);else{var Be=St-65536;Ft+=String.fromCharCode(55296|Be>>10,56320|Be&1023)}}return Ft}function F(ve,Ie){return ve>>>=0,ve?O(Z,ve,Ie):""}function E(ve,Ie,Je,J){if(Je>>>=0,!(J>0))return 0;for(var At=Je,Ft=Je+J-1,St=0;St<ve.length;++St){var bt=ve.charCodeAt(St);if(bt>=55296&&bt<=57343){var Jt=ve.charCodeAt(++St);bt=65536+((bt&1023)<<10)|Jt&1023}if(bt<=127){if(Je>=Ft)break;Ie[Je++>>>0]=bt}else if(bt<=2047){if(Je+1>=Ft)break;Ie[Je++>>>0]=192|bt>>6,Ie[Je++>>>0]=128|bt&63}else if(bt<=65535){if(Je+2>=Ft)break;Ie[Je++>>>0]=224|bt>>12,Ie[Je++>>>0]=128|bt>>6&63,Ie[Je++>>>0]=128|bt&63}else{if(Je+3>=Ft)break;Ie[Je++>>>0]=240|bt>>18,Ie[Je++>>>0]=128|bt>>12&63,Ie[Je++>>>0]=128|bt>>6&63,Ie[Je++>>>0]=128|bt&63}}return Ie[Je>>>0]=0,Je-At}function z(ve,Ie,Je){return E(ve,Z,Ie,Je)}var q,K,Z,te;function V(ve){q=ve,a.HEAP8=K=new Int8Array(ve),a.HEAP16=new Int16Array(ve),a.HEAP32=new Int32Array(ve),a.HEAPU8=Z=new Uint8Array(ve),a.HEAPU16=new Uint16Array(ve),a.HEAPU32=te=new Uint32Array(ve),a.HEAPF32=new Float32Array(ve),a.HEAPF64=new Float64Array(ve)}a.INITIAL_MEMORY;var ee=[],Y=[],Q=[];function oe(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ge(a.preRun.shift());bn(ee)}function pe(){bn(Y)}function he(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Ne(a.postRun.shift());bn(Q)}function ge(ve){ee.unshift(ve)}function _e(ve){Y.unshift(ve)}function Ne(ve){Q.unshift(ve)}var Se=0,Re=null;function Ke(ve){Se++,a.monitorRunDependencies&&a.monitorRunDependencies(Se)}function it(ve){if(Se--,a.monitorRunDependencies&&a.monitorRunDependencies(Se),Se==0&&Re){var Ie=Re;Re=null,Ie()}}function Xe(ve){a.onAbort&&a.onAbort(ve),ve="Aborted("+ve+")",S(ve),P=!0,ve+=". Build with -sASSERTIONS for more info.";var Ie=new WebAssembly.RuntimeError(ve);throw o(Ie),Ie}var at="data:application/octet-stream;base64,";function He(ve){return ve.startsWith(at)}function _t(ve){return ve.startsWith("file://")}var mt;mt="tfjs-backend-wasm.wasm",He(mt)||(mt=m(mt));function ht(ve){try{if(ve==mt&&$)return new Uint8Array($);if(v)return v(ve);throw"both async and sync fetching of the wasm failed"}catch(Ie){Xe(Ie)}}function Lt(){if(!$&&(c||d)){if(typeof fetch=="function"&&!_t(mt))return fetch(mt,{credentials:"same-origin"}).then(function(ve){if(!ve.ok)throw"failed to load wasm binary file at '"+mt+"'";return ve.arrayBuffer()}).catch(function(){return ht(mt)});if(y)return new Promise(function(ve,Ie){y(mt,function(Je){ve(new Uint8Array(Je))},Ie)})}return Promise.resolve().then(function(){return ht(mt)})}function Un(){var ve={env:Dn,wasi_snapshot_preview1:Dn};function Ie(St,bt){var Jt=St.exports;a.asm=Jt,N=a.asm.memory,V(N.buffer),a.asm.__indirect_function_table,_e(a.asm.__wasm_call_ctors),it()}Ke();function Je(St){Ie(St.instance)}function J(St){return Lt().then(function(bt){return WebAssembly.instantiate(bt,ve)}).then(function(bt){return bt}).then(St,function(bt){S("failed to asynchronously prepare wasm: "+bt),Xe(bt)})}function At(){return!$&&typeof WebAssembly.instantiateStreaming=="function"&&!He(mt)&&!_t(mt)&&!p&&typeof fetch=="function"?fetch(mt,{credentials:"same-origin"}).then(function(St){var bt=WebAssembly.instantiateStreaming(St,ve);return bt.then(Je,function(Jt){return S("wasm streaming compile failed: "+Jt),S("falling back to ArrayBuffer instantiation"),J(Je)})}):J(Je)}if(a.instantiateWasm)try{var Ft=a.instantiateWasm(ve,Ie);return Ft}catch(St){S("Module.instantiateWasm callback failed with error: "+St),o(St)}return At().catch(o),{}}function kt(ve){this.name="ExitStatus",this.message="Program terminated with exit("+ve+")",this.status=ve}function bn(ve){for(;ve.length>0;)ve.shift()(a)}function tn(){Xe("")}function Mt(){return 4294901760}function sr(){return Mt()}function Rn(ve,Ie,Je){Z.copyWithin(ve>>>0,Ie>>>0,Ie+Je>>>0)}function wn(ve){try{return N.grow(ve-q.byteLength+65535>>>16),V(N.buffer),1}catch{}}function un(ve){var Ie=Z.length;ve=ve>>>0;var Je=Mt();if(ve>Je)return!1;let J=(Jt,Be)=>Jt+(Be-Jt%Be)%Be;for(var At=1;At<=4;At*=2){var Ft=Ie*(1+.2/At);Ft=Math.min(Ft,ve+100663296);var St=Math.min(Je,J(Math.max(ve,Ft),65536)),bt=wn(St);if(bt)return!0}return!1}function cn(ve){return 52}function Er(ve,Ie,Je,J,At){return 70}var ki=[null,[],[]];function Qn(ve,Ie){var Je=ki[ve];Ie===0||Ie===10?((ve===1?k:S)(O(Je,0)),Je.length=0):Je.push(Ie)}function Ta(ve,Ie,Je,J){for(var At=0,Ft=0;Ft<Je;Ft++){var St=te[Ie>>>2],bt=te[Ie+4>>>2];Ie+=8;for(var Jt=0;Jt<bt;Jt++)Qn(ve,Z[St+Jt>>>0]);At+=bt}return te[J>>>2]=At,0}function yn(ve){var Ie=a["_"+ve];return Ie}function Ge(ve,Ie){K.set(ve,Ie>>>0)}function rt(ve,Ie,Je,J,At){var Ft={string:Nt=>{var Ln=0;if(Nt!=null&&Nt!==0){var Et=(Nt.length<<2)+1;Ln=Ur(Et),z(Nt,Ln,Et)}return Ln},array:Nt=>{var Ln=Ur(Nt.length);return Ge(Nt,Ln),Ln}};function St(Nt){return Ie==="string"?F(Nt):Ie==="boolean"?!!Nt:Nt}var bt=yn(ve),Jt=[],Be=0;if(J)for(var oi=0;oi<J.length;oi++){var ko=Ft[Je[oi]];ko?(Be===0&&(Be=qn()),Jt[oi]=ko(J[oi])):Jt[oi]=J[oi]}var Ss=bt.apply(null,Jt);function nt(Nt){return Be!==0&&ai(Be),St(Nt)}return Ss=nt(Ss),Ss}function Si(ve,Ie,Je,J){Je=Je||[];var At=Je.every(St=>St==="number"||St==="boolean"),Ft=Ie!=="string";return Ft&&At&&!J?yn(ve):function(){return rt(ve,Ie,Je,arguments)}}var Dn={abort:tn,emscripten_get_heap_max:sr,emscripten_memcpy_big:Rn,emscripten_resize_heap:un,fd_close:cn,fd_seek:Er,fd_write:Ta};Un(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)},a._init=function(){return(a._init=a.asm.init).apply(null,arguments)},a._init_with_threads_count=function(){return(a._init_with_threads_count=a.asm.init_with_threads_count).apply(null,arguments)},a._get_threads_count=function(){return(a._get_threads_count=a.asm.get_threads_count).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.register_tensor).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.dispose_data).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.dispose).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.Abs).apply(null,arguments)},a._Acos=function(){return(a._Acos=a.asm.Acos).apply(null,arguments)},a._Acosh=function(){return(a._Acosh=a.asm.Acosh).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.Add).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.AddN).apply(null,arguments)},a._All=function(){return(a._All=a.asm.All).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.Any).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.ArgMax).apply(null,arguments)},a._ArgMin=function(){return(a._ArgMin=a.asm.ArgMin).apply(null,arguments)},a._Asin=function(){return(a._Asin=a.asm.Asin).apply(null,arguments)},a._Asinh=function(){return(a._Asinh=a.asm.Asinh).apply(null,arguments)},a._Atan=function(){return(a._Atan=a.asm.Atan).apply(null,arguments)},a._Atan2=function(){return(a._Atan2=a.asm.Atan2).apply(null,arguments)},a._Atanh=function(){return(a._Atanh=a.asm.Atanh).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.AvgPool).apply(null,arguments)},a._AvgPool3D=function(){return(a._AvgPool3D=a.asm.AvgPool3D).apply(null,arguments)},a._AvgPool3DGrad=function(){return(a._AvgPool3DGrad=a.asm.AvgPool3DGrad).apply(null,arguments)},a._AvgPoolGrad=function(){return(a._AvgPoolGrad=a.asm.AvgPoolGrad).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.BatchMatMul).apply(null,arguments)},a._Bincount=function(){return(a._Bincount=a.asm.Bincount).apply(null,arguments)},a._BitwiseAnd=function(){return(a._BitwiseAnd=a.asm.BitwiseAnd).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.Ceil).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.ClipByValue).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.Conv2D).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.Conv2DBackpropInput).apply(null,arguments)},a._Conv3D=function(){return(a._Conv3D=a.asm.Conv3D).apply(null,arguments)},a._Conv3DBackpropFilterV2=function(){return(a._Conv3DBackpropFilterV2=a.asm.Conv3DBackpropFilterV2).apply(null,arguments)},a._Conv3DBackpropInputV2=function(){return(a._Conv3DBackpropInputV2=a.asm.Conv3DBackpropInputV2).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.Cos).apply(null,arguments)},a._Cosh=function(){return(a._Cosh=a.asm.Cosh).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.CropAndResize).apply(null,arguments)},a._Cumprod=function(){return(a._Cumprod=a.asm.Cumprod).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.Cumsum).apply(null,arguments)},a._DenseBincount=function(){return(a._DenseBincount=a.asm.DenseBincount).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.DepthToSpace).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.DepthwiseConv2dNative).apply(null,arguments)},a._Diag=function(){return(a._Diag=a.asm.Diag).apply(null,arguments)},a._Dilation2D=function(){return(a._Dilation2D=a.asm.Dilation2D).apply(null,arguments)},a._Dilation2DBackpropFilter=function(){return(a._Dilation2DBackpropFilter=a.asm.Dilation2DBackpropFilter).apply(null,arguments)},a._Dilation2DBackpropInput=function(){return(a._Dilation2DBackpropInput=a.asm.Dilation2DBackpropInput).apply(null,arguments)},a._Elu=function(){return(a._Elu=a.asm.Elu).apply(null,arguments)},a._EluGrad=function(){return(a._EluGrad=a.asm.EluGrad).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.Equal).apply(null,arguments)},a._Erf=function(){return(a._Erf=a.asm.Erf).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.Exp).apply(null,arguments)},a._Expm1=function(){return(a._Expm1=a.asm.Expm1).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.FlipLeftRight).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.Floor).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.FloorDiv).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.FusedBatchNorm).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.FusedConv2D).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.FusedDepthwiseConv2D).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.Gather).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.GatherNd).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.Greater).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.GreaterEqual).apply(null,arguments)},a._IsFinite=function(){return(a._IsFinite=a.asm.IsFinite).apply(null,arguments)},a._IsInf=function(){return(a._IsInf=a.asm.IsInf).apply(null,arguments)},a._IsNan=function(){return(a._IsNan=a.asm.IsNan).apply(null,arguments)},a._LRN=function(){return(a._LRN=a.asm.LRN).apply(null,arguments)},a._LRNGrad=function(){return(a._LRNGrad=a.asm.LRNGrad).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.LeakyRelu).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.Less).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.LessEqual).apply(null,arguments)},a._LinSpace=function(){return(a._LinSpace=a.asm.LinSpace).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.Log).apply(null,arguments)},a._Log1p=function(){return(a._Log1p=a.asm.Log1p).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.LogicalAnd).apply(null,arguments)},a._LogicalNot=function(){return(a._LogicalNot=a.asm.LogicalNot).apply(null,arguments)},a._LogicalOr=function(){return(a._LogicalOr=a.asm.LogicalOr).apply(null,arguments)},a._LogicalXor=function(){return(a._LogicalXor=a.asm.LogicalXor).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.Max).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.MaxPool).apply(null,arguments)},a._MaxPool3D=function(){return(a._MaxPool3D=a.asm.MaxPool3D).apply(null,arguments)},a._MaxPool3DGrad=function(){return(a._MaxPool3DGrad=a.asm.MaxPool3DGrad).apply(null,arguments)},a._MaxPoolGrad=function(){return(a._MaxPoolGrad=a.asm.MaxPoolGrad).apply(null,arguments)},a._MaxPoolWithArgmax=function(){return(a._MaxPoolWithArgmax=a.asm.MaxPoolWithArgmax).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.Maximum).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.Mean).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.Min).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.Minimum).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.MirrorPad).apply(null,arguments)},a._Mod=function(){return(a._Mod=a.asm.Mod).apply(null,arguments)},a._Multinomial=function(){return(a._Multinomial=a.asm.Multinomial).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.Multiply).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.Neg).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.NonMaxSuppressionV3).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.NonMaxSuppressionV4).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.NonMaxSuppressionV5).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.NotEqual).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.OneHot).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.PadV2).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.Pow).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.Prelu).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.Prod).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.RealDiv).apply(null,arguments)},a._Reciprocal=function(){return(a._Reciprocal=a.asm.Reciprocal).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.Relu).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.Relu6).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.ResizeBilinear).apply(null,arguments)},a._ResizeBilinearGrad=function(){return(a._ResizeBilinearGrad=a.asm.ResizeBilinearGrad).apply(null,arguments)},a._ResizeNearestNeighbor=function(){return(a._ResizeNearestNeighbor=a.asm.ResizeNearestNeighbor).apply(null,arguments)},a._ResizeNearestNeighborGrad=function(){return(a._ResizeNearestNeighborGrad=a.asm.ResizeNearestNeighborGrad).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.Reverse).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.RotateWithOffset).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.Round).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.Rsqrt).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.ScatterNd).apply(null,arguments)},a._SearchSorted=function(){return(a._SearchSorted=a.asm.SearchSorted).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.SelectV2).apply(null,arguments)},a._Selu=function(){return(a._Selu=a.asm.Selu).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.Sigmoid).apply(null,arguments)},a._Sign=function(){return(a._Sign=a.asm.Sign).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.Sin).apply(null,arguments)},a._Sinh=function(){return(a._Sinh=a.asm.Sinh).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.Softmax).apply(null,arguments)},a._Softplus=function(){return(a._Softplus=a.asm.Softplus).apply(null,arguments)},a._SparseFillEmptyRows=function(){return(a._SparseFillEmptyRows=a.asm.SparseFillEmptyRows).apply(null,arguments)},a._SparseReshape=function(){return(a._SparseReshape=a.asm.SparseReshape).apply(null,arguments)},a._SparseSegmentReduction=function(){return(a._SparseSegmentReduction=a.asm.SparseSegmentReduction).apply(null,arguments)},a._SparseToDense=function(){return(a._SparseToDense=a.asm.SparseToDense).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Sqrt).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Square).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.SquaredDifference).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Step).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.StridedSlice).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Sub).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Sum).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Tan).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Tanh).apply(null,arguments)},a._TensorScatterUpdate=function(){return(a._TensorScatterUpdate=a.asm.TensorScatterUpdate).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Tile).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.TopK).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.Transform).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Transpose).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm._FusedMatMul).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.malloc).apply(null,arguments)},a._free=function(){return(a._free=a.asm.free).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)};var qn=a.stackSave=function(){return(qn=a.stackSave=a.asm.stackSave).apply(null,arguments)},ai=a.stackRestore=function(){return(ai=a.stackRestore=a.asm.stackRestore).apply(null,arguments)},Ur=a.stackAlloc=function(){return(Ur=a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)};a.dynCall_iijjiiii=function(){return(a.dynCall_iijjiiii=a.asm.dynCall_iijjiiii).apply(null,arguments)},a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.dynCall_jiji).apply(null,arguments)},a.cwrap=Si;var hr;Re=function ve(){hr||wr(),hr||(Re=ve)};function wr(ve){if(Se>0||(oe(),Se>0))return;function Ie(){hr||(hr=!0,a.calledRun=!0,!P&&(pe(),s(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),he()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),Ie()},1)):Ie()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();wr();var si;l&&(si={uncaughtException:process.listeners("uncaughtException").filter(function(ve){return!l.uncaughtException.indexOf(ve)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(ve){return!l.unhandledRejection.indexOf(ve)>-1})});var xn;if(typeof i<"u")xn=i;else if(typeof WasmBackendModuleThreadedSimd<"u")xn=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(si){var _n=xn._dispose;xn._dispose=function(){_n(),si.uncaughtException.forEach(function(ve){process.removeListener("uncaughtException",ve)}),si.unhandledRejection.forEach(function(ve){process.removeListener("unhandledRejection",ve)})}}return i.ready}})();typeof e=="object"&&typeof t=="object"?t.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof e=="object"&&(e.WasmBackendModule=n)}),l$=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},aw=class{refCount(e){return Qa("refCount")}incRef(e){return Qa("incRef")}timerAvailable(){return!0}time(e){return Qa("time")}read(e){return Qa("read")}readSync(e){return Qa("readSync")}readToGPU(e,t){return Qa("readToGPU")}numDataIds(){return Qa("numDataIds")}disposeData(e,t){return Qa("disposeData")}write(e,t,n){return Qa("write")}move(e,t,n,r,i){return Qa("move")}createTensorFromGPUData(e,t,n){return Qa("createTensorFromGPUData")}memory(){return Qa("memory")}floatPrecision(){return Qa("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return Qa("dispose")}};function Qa(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function lee(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,aI(e,t,n)}function RLe(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,aI(e,n,r),aI(t,n,r)}function p1(e,t,n){return Math.max(e,Math.min(t,n))}function DLe(e){return e%2===0?e:e+1}function aI(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function LLe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function FLe(e,t){let n=Math.random();return t*n+(1-n)*e}function zLe(e,t){let n=0;for(let r=0;r<e.length;r++){let i=Number(e[r])-Number(t[r]);n+=i*i}return n}function X(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ka(e,t,n=""){X(Ku(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Dh(e){X(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Pn(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function BLe(e){return e.length===0}function uee(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Ku(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ry(e){return e%1===0}function WLe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function VLe(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function jLe(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return lee(t),t}function Mb(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function HLe(e,t=i=>0,n,r){return new Promise((i,a)=>{let s=0,o=()=>{if(e()){i();return}s++;let l=t(s);if(n!=null&&s>=n){a();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function ULe(e,t){let n=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let i=e.slice();return i[r]=t/n,i}function bo(e,t){let n=t.length;return e=e==null?t.map((r,i)=>i):[].concat(e),X(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),X(e.every(r=>ry(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function cee(e,t){let n=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,a=t==null||i?null:bo(t,e).sort(),s=0;for(let o=0;o<e.length;++o){if(a!=null){if(a[s]===o&&e[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(a[s]==null||a[s]>o)&&e[o]===1&&(n.push(e[o]),r.push(o)),a[s]<=o&&s++}e[o]!==1&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function dee(e,t){return yD(e,t)}function yD(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function pee(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function hee(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function GLe(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function sI(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function fee(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function Rc(e){return typeof e=="string"||e instanceof String}function mee(e){return typeof e=="boolean"}function gee(e){return typeof e=="number"}function sw(e){return Array.isArray(e)?sw(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":gee(e)?"float32":Rc(e)?"string":mee(e)?"bool":"float32"}function ud(e){return!!(e&&e.constructor&&e.call&&e.apply)}function oI(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Vy(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function yee(e,t,n,r=!1){let i=new Array;if(t.length===1){let a=t[0]*(r?2:1);for(let s=0;s<a;s++)i[s]=n[e+s]}else{let a=t[0],s=t.slice(1),o=s.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<a;l++)i[l]=yee(e+l*o,s,n,r)}return i}function Pg(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return yee(0,e,t,n)}function qLe(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function vD(e,t){let n=u$(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function u$(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function KLe(e,t){let n=e.reduce((r,i)=>r*i,1);if(t==null||t==="float32")return Pg(e,new Float32Array(n));if(t==="int32")return Pg(e,new Int32Array(n));if(t==="bool")return Pg(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function ks(e){e.forEach(t=>{X(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function ZLe(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function XLe(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function c$(e){return e&&e.then&&typeof e.then=="function"}var TH="tfjsflags",vee=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=JLe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},this.urlFlags[e]!=null){let r=this.urlFlags[e];fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(c$(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);TH in e&&e[TH].split(",").forEach(t=>{let[n,r]=t.split(":");this.urlFlags[n]=QLe(n,r)})}};function JLe(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(YLe(t,r[0],r[1]),r.join("="))),t}function YLe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function QLe(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function fe(){return bD}var bD=null;function eFe(e){bD=e}var yE;function bee(){if(yE==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");yE=e}return yE}function tFe(){let e=bee();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function wD(e,t){let n=tFe();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var jy="Abs",Lh="Acos",Fh="Acosh",Pd="Add",zh="AddN",Hy="All",Uy="Any",Gy="ArgMax",qy="ArgMin",Bh="Asin",Wh="Asinh",Vh="Atan",jh="Atanh",Hh="Atan2",Uh="AvgPool",ow="AvgPoolGrad",Ky="AvgPool3D",lw="AvgPool3DGrad",Gh="BatchMatMul",Zy="BatchToSpaceND",Xy="Bincount",Jy="BitwiseAnd",wee="BroadcastTo",uw="BroadcastArgs",qh="Cast",Kh="Ceil",Md="ClipByValue",d$="Complex",cw="ComplexAbs",Yy="Concat",Zh="Conv2D",p$="Conv2DBackpropFilter",Xh="Conv2DBackpropInput",Jh="Conv3D",Qy="Conv3DBackpropFilterV2",ev="Conv3DBackpropInputV2",Yh="Cos",Qh="Cosh",tv="Cumprod",ef="Cumsum",nv="CropAndResize",dw="DenseBincount",rv="DepthToSpace",tf="DepthwiseConv2dNative",h$="DepthwiseConv2dNativeBackpropFilter",f$="DepthwiseConv2dNativeBackpropInput",pw="Diag",nf="Dilation2D",iy="Dilation2DBackpropInput",ay="Dilation2DBackpropFilter",m$="Draw",rf="RealDiv",g$="Einsum",af="Elu",iv="EluGrad",sf="Erf",av="Equal",of="Exp",sv="ExpandDims",lf="Expm1",y$="FFT",hw="Fill",ov="FlipLeftRight",uf="Floor",cf="FloorDiv",df="FusedBatchNorm",lv="GatherV2",uv="GatherNd",cv="Greater",pf="GreaterEqual",hf="Identity",v$="IFFT",b$="Imag",ff="IsFinite",mf="IsInf",gf="IsNan",yf="LeakyRelu",dv="Less",pv="LessEqual",hv="LinSpace",vf="Log",bf="Log1p",fv="LogicalAnd",mv="LogicalNot",gv="LogicalOr",xee="LogicalXor",_ee="LogSoftmax",nFe="LowerBound",wf="LRN",yv="LRNGrad",rFe="MatrixBandPart",xf="Max",_f="Maximum",kf="MaxPool",fw="MaxPoolGrad",vv="MaxPool3D",mw="MaxPool3DGrad",gw="MaxPoolWithArgmax",Sf="Mean",Cf="Min",If="Minimum",$f="MirrorPad",Tf="Mod",bv="Multinomial",Nf="Multiply",wv="Neg",xv="NotEqual",_v="NonMaxSuppressionV3",kv="NonMaxSuppressionV4",Sv="NonMaxSuppressionV5",Cv="OnesLike",Ef="OneHot",Iv="Pack",Of="PadV2",iFe="Pool",Pf="Pow",Mf="Prelu",Af="Prod",w$="RaggedGather",x$="RaggedRange",_$="RaggedTensorToTensor",yw="Range",k$="Real",Rf="Reciprocal",Df="Relu",$v="Reshape",Lf="ResizeNearestNeighbor",Tv="ResizeNearestNeighborGrad",Ff="ResizeBilinear",Nv="ResizeBilinearGrad",zf="Relu6",Bf="Reverse",Wf="Round",Vf="Rsqrt",Ev="ScatterNd",Ov="TensorScatterUpdate",Pv="SearchSorted",Mv="Select",jf="Selu",Av="Slice",Hf="Sin",Uf="Sinh",Gf="Sign",qf="Sigmoid",Kf="Softplus",Zf="Sqrt",Xf="Sum",Rv="SpaceToBatchND",Dv="SplitV",Jf="Softmax",vw="SparseFillEmptyRows",Lv="SparseReshape",bw="SparseSegmentMean",ww="SparseSegmentSum",Fv="SparseToDense",Yf="SquaredDifference",xw="Square",_w="StaticRegexReplace",zv="StridedSlice",kw="StringNGrams",Sw="StringSplit",Cw="StringToHashBucketFast",Qf="Sub",em="Tan",tm="Tanh",Ad="Tile",Bv="TopK",Wv="Transform",Cu="Transpose",Iw="Unique",Vv="Unpack",$w="UnsortedSegmentSum",aFe="UpperBound",jv="ZerosLike",Rd="Step",lI="FromPixels",Hv="RotateWithOffset",ih="_FusedMatMul",ah="FusedConv2D",sh="FusedDepthwiseConv2D";function Ec(...e){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.warn(...e)}function sFe(...e){fe().getBool("IS_TEST")||fe().getBool("PROD")||console.log(...e)}var sy=wD("kernelRegistry",()=>new Map),h1=wD("gradRegistry",()=>new Map);function f1(e,t){let n=xD(e,t);return sy.get(n)}function EP(e){return h1.get(e)}function uI(e){let t=sy.entries(),n=[];for(;;){let{done:r,value:i}=t.next();if(r)break;let[a,s]=i,[o]=a.split("_");o===e&&n.push(s)}return n}function Tw(e){let{kernelName:t,backendName:n}=e,r=xD(t,n);sy.has(r)&&Ec(`The kernel '${t}' for backend '${n}' is already registered`),sy.set(r,e)}function kee(e){let{kernelName:t}=e;h1.has(t)&&fe().getBool("DEBUG")&&Ec(`Overriding the gradient for '${t}'`),h1.set(t,e)}function oFe(e,t){let n=xD(e,t);if(!sy.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);sy.delete(n)}function lFe(e){if(!h1.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);h1.delete(e)}function uFe(e,t){uI(e).forEach(n=>{let r=Object.assign({},n,{backendName:t});Tw(r)})}function xD(e,t){return`${t}_${e}`}var M={};Dt(M,{arraysEqual:()=>Ku,arraysEqualWithNull:()=>uee,assert:()=>X,assertNonNegativeIntegerDimensions:()=>ks,assertNonNull:()=>Dh,assertShapesMatch:()=>ka,bytesFromStringArray:()=>fee,bytesPerElement:()=>sI,checkConversionForErrors:()=>pee,clamp:()=>p1,computeStrides:()=>Vy,convertBackendValuesAndArrayBuffer:()=>qLe,createScalarValue:()=>mFe,createShuffledIndices:()=>jLe,decodeString:()=>cI,distSquared:()=>zLe,encodeString:()=>Ew,fetch:()=>yFe,fingerPrint64:()=>fFe,flatten:()=>cd,getArrayFromDType:()=>yD,getTypedArrayFromDType:()=>dee,hasEncodingLoss:()=>GLe,hexToLong:()=>Nw,indexToLoc:()=>XLe,inferDtype:()=>sw,inferFromImplicitShape:()=>ULe,isBoolean:()=>mee,isFunction:()=>ud,isInt:()=>ry,isNumber:()=>gee,isPromise:()=>c$,isScalarShape:()=>BLe,isString:()=>Rc,isTypedArray:()=>mi,isValidDtype:()=>hee,locToIndex:()=>ZLe,makeOnesTypedArray:()=>vD,makeZerosNestedTypedArray:()=>KLe,makeZerosTypedArray:()=>u$,nearestDivisor:()=>oI,nearestLargerEven:()=>DLe,now:()=>m1,parseAxisParam:()=>bo,randUniform:()=>FLe,repeatedTry:()=>HLe,rightPad:()=>Mb,shuffle:()=>lee,shuffleCombo:()=>RLe,sizeFromShape:()=>Pn,sizeToSquarishShape:()=>VLe,squeezeShape:()=>cee,sum:()=>LLe,swap:()=>aI,tanh:()=>WLe,toNestedArray:()=>Pg,toTypedArray:()=>S$});function See(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var NH=Od(vLe()),yp=NH.default||NH;function Nw(e){return yp.fromString(e,!0,16)}var Cee=Nw("c3a5c85c97cb3127"),hp=Nw("b492b66fbe98f273"),pa=Nw("9ae16a3b2f90404f");function OP(e){return e.xor(e.shru(47))}function Iee(e,t,n){let r=e.slice(t,t+n);return yp.fromBytes(Array.from(r),!0,!0)}function Kn(e,t){return Iee(e,t,8)}function EH(e,t){return Iee(e,t,4)}function fi(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Qc(e,t,n=Nw("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function cFe(e,t,n,r,i,a){i=i.add(e),a=fi(a.add(i).add(r),21);let s=i;return i=i.add(t),i=i.add(n),a=a.add(fi(i,44)),[i.add(r),a.add(s)]}function w_(e,t,n,r){return cFe(Kn(e,t),Kn(e,t+8),Kn(e,t+16),Kn(e,t+24),n,r)}function dFe(e,t=e.length){if(t>=8){let n=pa.add(t*2),r=Kn(e,0).add(pa),i=Kn(e,t-8),a=fi(i,37).mul(n).add(r),s=fi(r,25).add(i).mul(n);return Qc(a,s,n)}if(t>=4){let n=pa.add(t*2),r=EH(e,0);return Qc(r.shl(3).add(t),EH(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],i=e[t-1],a=n+(r<<8),s=t+(i<<2);return OP(pa.mul(a).xor(Cee.mul(s))).mul(pa)}return pa}function pFe(e,t=e.length){let n=pa.add(t*2),r=Kn(e,0).mul(hp),i=Kn(e,8),a=Kn(e,t-8).mul(n),s=Kn(e,t-16).mul(pa);return Qc(fi(r.add(i),43).add(fi(a,30)).add(s),r.add(fi(i.add(pa),18)).add(a),n)}function hFe(e,t=e.length){let n=pa.add(t*2),r=Kn(e,0).mul(pa),i=Kn(e,8),a=Kn(e,t-8).mul(n),s=Kn(e,t-16).mul(pa),o=fi(r.add(i),43).add(fi(a,30)).add(s),l=Qc(o,r.add(fi(i.add(pa),18)).add(a),n),u=Kn(e,16).mul(n),c=Kn(e,24),d=o.add(Kn(e,t-32)).mul(n),p=l.add(Kn(e,t-24)).mul(n);return Qc(fi(u.add(c),43).add(fi(d,30)).add(p),u.add(fi(c.add(r),18)).add(d),n)}function fFe(e,t=e.length){let n=yp.fromNumber(81,!0);if(t<=32)return t<=16?dFe(e,t):pFe(e,t);if(t<=64)return hFe(e,t);let r=n,i=n.mul(hp).add(113),a=OP(i.mul(pa).add(113)).mul(pa),s=[yp.UZERO,yp.UZERO],o=[yp.UZERO,yp.UZERO];r=r.mul(pa).add(Kn(e,0));let l=0,u=(t-1>>6)*64,c=u+(t-1&63)-63;do r=fi(r.add(i).add(s[0]).add(Kn(e,l+8)),37).mul(hp),i=fi(i.add(s[1]).add(Kn(e,l+48)),42).mul(hp),r=r.xor(o[1]),i=i.add(s[0]).add(Kn(e,l+40)),a=fi(a.add(o[0]),33).mul(hp),s=w_(e,l,s[1].mul(hp),r.add(o[0])),o=w_(e,l+32,a.add(o[1]),i.add(Kn(e,l+16))),[a,r]=[r,a],l+=64;while(l!==u);let d=hp.add(a.and(255).shl(1));return l=c,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=fi(r.add(i).add(s[0]).add(Kn(e,l+8)),37).mul(d),i=fi(i.add(s[1]).add(Kn(e,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),i=i.add(s[0].mul(9).add(Kn(e,l+40))),a=fi(a.add(o[0]),33).mul(d),s=w_(e,l,s[1].mul(d),r.add(o[0])),o=w_(e,l+32,a.add(o[1]),i.add(Kn(e,l+16))),[a,r]=[r,a],Qc(Qc(s[0],o[0],d).add(OP(i).mul(Cee)).add(a),Qc(s[1],o[1],d).add(r),d)}function mFe(e,t){return t==="string"?Ew(e):S$([e],t)}function gFe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function S$(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=cd(e)),fe().getBool("DEBUG")&&pee(e,t),gFe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function m1(){return fe().platform.now()}function yFe(e,t){return fe().platform.fetch(e,t)}function Ew(e,t="utf-8"){return t=t||"utf-8",fe().platform.encode(e,t)}function cI(e,t="utf-8"){return t=t||"utf-8",fe().platform.decode(e,t)}function mi(e){return fe().platform.isTypedArray!=null?fe().platform.isTypedArray(e):See(e)}function cd(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||c$(e)||e==null||mi(e)&&n)t.push(e);else if(Array.isArray(e)||mi(e))for(let r=0;r<e.length;++r)cd(e[r],t,n);else{let r=-1;for(let i of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)cd(e[i],t,n)}return t}var vFe=class{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new wFe)}profileKernel(e,t,n){let r,i=()=>{r=n()},a,s=m1();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(let o of r)o.dataSync();a=Promise.resolve({kernelMs:m1()-s})}if(fe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let l=r[o];l.data().then(u=>{bFe(u,l.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then(o=>o.kernelMs),extraInfo:a.then(o=>o.getExtraProfileInfo!=null?o.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:a}=e;n.forEach(s=>{Promise.all([s.data(),r,a]).then(o=>{this.logger.logKernelProfile(t,s,o[0],o[1],i,o[2])})})}};function bFe(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let i=e[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}var wFe=class{logKernelProfile(e,t,n,r,i,a){let s=typeof r=="number"?Mb(`${r}ms`,9):r.error,o=Mb(e,25),l=t.rank,u=t.size,c=Mb(t.shape.toString(),14),d="";for(let p in i){let h=i[p];if(h!=null){let m=h.shape||t.shape,g=m.length;d+=`${p}: ${g}D ${g>0?m:""} `}}console.log(`%c${o}	%c${s}	%c${l}D ${c}	%c${u}	%c${d}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function xFe(e,t,n){let r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let u=e[l],c=u.inputs;for(let d in c){let p=c[d],h=!1;for(let m=0;m<t.length;m++)if(r[p.id]){u.outputs.forEach(g=>r[g.id]=!0),h=!0,i[u.id]=!0;break}if(h)break}}let a={};a[n.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(a[u.outputs[d].id]){for(let p in c)a[c[p].id]=!0,s[u.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let u=e[l];if(i[u.id]&&s[u.id]){let c={};for(let p in u.inputs){let h=u.inputs[p];r[h.id]&&(c[p]=h)}let d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,o.push(d)}}return o}function _Fe(e,t,n,r){for(let i=t.length-1;i>=0;i--){let a=t[i],s=[];if(a.outputs.forEach(l=>{let u=e[l.id];u!=null?s.push(u):s.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);let o=a.gradient(s);for(let l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);let u=n(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);let c=a.inputs[l];if(!Ku(u.shape,c.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{let d=e[c.id];e[c.id]=r(d,u),d.dispose()}}}}var OH=20,Z0=3,vE=7;function kFe(e,t,n,r){let i=Vy(t),a=SFe(e,t,n,i),s=t.length,o=bk(e,t,n,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function SFe(e,t,n,r){let i=Pn(t),a=r[r.length-1],s=new Array(a).fill(0),o=t.length,l=n==="complex64"?ub(e):e;if(o>1)for(let u=0;u<i/a;u++){let c=u*a;for(let d=0;d<a;d++)s[d]=Math.max(s[d],lb(l[c+d],0,n).length)}return s}function lb(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(vE))} + ${parseFloat(e[1].toFixed(vE))}j`:Rc(e)?r=`'${e}'`:n==="bool"?r=$ee(e):r=parseFloat(e.toFixed(vE)).toString(),Mb(r,t)}function $ee(e){return e===0?"false":"true"}function bk(e,t,n,r,i,a=!0){let s=n==="complex64"?2:1,o=t[0],l=t.length;if(l===0){if(n==="complex64"){let g=ub(e);return[lb(g[0],0,n)]}return n==="bool"?[$ee(e[0])]:[e[0].toString()]}if(l===1){if(o>OH){let g=Z0*s,y=Array.from(e.slice(0,g)),v=Array.from(e.slice((o-Z0)*s,o*s));return n==="complex64"&&(y=ub(y),v=ub(v)),["["+y.map((b,_)=>lb(b,i[_],n)).join(", ")+", ..., "+v.map((b,_)=>lb(b,i[o-Z0+_],n)).join(", ")+"]"]}return["["+(n==="complex64"?ub(e):Array.from(e)).map((g,y)=>lb(g,i[y],n)).join(", ")+"]"]}let u=t.slice(1),c=r.slice(1),d=r[0]*s,p=[];if(o>OH){for(let g=0;g<Z0;g++){let y=g*d,v=y+d;p.push(...bk(e.slice(y,v),u,n,c,i,!1))}p.push("...");for(let g=o-Z0;g<o;g++){let y=g*d,v=y+d;p.push(...bk(e.slice(y,v),u,n,c,i,g===o-1))}}else for(let g=0;g<o;g++){let y=g*d,v=y+d;p.push(...bk(e.slice(y,v),u,n,c,i,g===o-1))}let h=l===2?",":"";p[0]="["+(o>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(a?"":m),p}function ub(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Br=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Pn(e),n!=null){let r=n.length;X(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||yD(t,this.size),this.strides=Vy(e)}set(e,...t){t.length===0&&(t=[0]),X(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(let r of e){if(r<0||r>=this.shape[t]){let i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}t++}let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Do().makeTensor(this.values,this.shape,this.dtype)}},Do=null,Ym=null;function CFe(e){Do=e}function IFe(e){Ym=e}var zt=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Pn(e),this.strides=Vy(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Ym.buffer(this.shape,this.dtype,e)}bufferSync(){return Ym.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Pg(this.shape,e,this.dtype==="complex64")}arraySync(){return Pg(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=Do().read(this.dataId);if(this.dtype==="string"){let t=await e;try{return t.map(n=>cI(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Do().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Do().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>cI(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Do().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Do().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ym.print(this,e)}clone(){return this.throwIfDisposed(),Ym.clone(this)}toString(e=!1){let t=this.dataSync();return kFe(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ym.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),Do().makeVariable(this,e,t,n)}};Object.defineProperty(zt,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function xe(){return wD("Tensor",()=>zt)}xe();var oh=class extends zt{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Ku(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Do().disposeTensor(this),this.dataId=e.dataId,Do().incRef(this,null)}dispose(){Do().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(oh,Symbol.hasInstance,{value:e=>e instanceof zt&&e.assign!=null&&e.assign instanceof Function});var Vo={};Dt(Vo,{assertTypesMatch:()=>Eee,getTensorsInContainer:()=>_D,isTensorInList:()=>TFe,makeTypesMatch:()=>br});var PP;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(PP||(PP={}));var MP;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(MP||(MP={}));var AP;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(AP||(AP={}));var RP;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(RP||(RP={}));var DP;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(DP||(DP={}));var $Fe={float32:RP,int32:MP,bool:AP,complex64:DP};function zs(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return $Fe[e][t]}function C$(e){return zs(e,"int32")}function Tee(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function Nee(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function br(e,t){if(e.dtype===t.dtype)return[e,t];let n=zs(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Eee(e,t){X(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function TFe(e,t){return t.some(n=>n.id===e.id)}function _D(e){let t=[];return Oee(e,t,new Set),t}function Oee(e,t,n){if(e==null)return;if(e instanceof zt){t.push(e);return}if(!NFe(e))return;let r=e;for(let i in r){let a=r[i];n.has(a)||(n.add(a),Oee(a,t,n))}}function NFe(e){return Array.isArray(e)||typeof e=="object"}function bE(e){return e.kernelName!=null}var PH=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},kD=class LP{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new PH}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let t=this.getSortedBackends();for(let n=0;n<t.length;n++){let r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){let{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(Ec(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;let{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new vFe(this.backendInstance),!0}setupRegisteredKernels(){uI(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){uI(t).forEach(n=>{n.disposeFunc!=null&&n.disposeFunc(this.registry[t])})}initializeBackend(t){let n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{let r=n.factory();if(r&&!(r instanceof aw)&&typeof r.then=="function"){let i=++this.pendingBackendInitId,a=r.then(s=>i<this.pendingBackendInitId?!1:(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Ec(`Initialization of backend ${t} failed`),Ec(s.stack||s.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return Ec(`Initialization of backend ${t} failed`),Ec(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){let t=this.getSortedBackends();for(let n=0;n<t.length;n++){let r=t[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){let r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),s=i.refCount(n);i.disposeData(n,!0),r.backend=t,t.move(n,a,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(t,n,r){t();try{let i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return LP.nextTensorId++}nextVariableId(){return LP.nextVariableId++}clone(t){let n=re.runKernel(hf,{x:t}),r={x:t},i=s=>({x:()=>{let o="float32",l={x:s},u={dtype:o};return re.runKernel(qh,l,u)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,f1(t,this.backendName)==null)throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){let i=this.backend.numDataIds(),a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});let s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=i-n-a-s;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[],i=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l,u=bE(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(bE(t)){let{kernelName:m,inputs:g,attrs:y}=t;this.backendName==null&&this.backend;let v=f1(m,this.backendName);X(v!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{let b=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:y,backend:this.backend});let _=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,b,_);let k=_.map(S=>S.rank!=null?S:this.makeTensorFromTensorInfo(S));if(i){let S=this.getTensorsForGradient(m,g,k);r=this.saveTensorsForBackwardMode(S)}return k}}else{let{forwardFunc:m}=t,g=y=>{i&&(r=y.map(v=>this.keep(this.clone(v))))};o=()=>{let y=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,g));let v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,v),v}}let{inputs:c,attrs:d}=t,p=bE(t)?null:t.backwardsFunc,h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(h=this.profiler.profileKernel(u,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(u,c,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(m=>c[m]!=null?c[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(n=>this.keep(this.clone(n)))}getTensorsForGradient(t,n,r){let i=EP(t);if(i!=null){let a=i.inputsToSave||[],s=i.outputsToSave||[],o;i.saveAllInputs?(X(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(u=>n[u])):o=a.map(u=>n[u]);let l=r.filter((u,c)=>s[c]);return o.concat(l)}return[]}makeTensor(t,n,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=t;r==="string"&&Rc(t[0])&&(a=t.map(l=>Ew(l)));let s=i.write(a,n,r),o=new zt(n,r,s,this.nextTensorId());if(this.trackTensor(o,i),r==="string"){let l=this.state.tensorInfo.get(s),u=fee(a);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(t,n,r,i){r=r||"float32";let a={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(t,n){let{dataId:r,shape:i,dtype:a}=t,s=new zt(i,a,r,this.nextTensorId());return this.trackTensor(s,n),s}makeVariable(t,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.cast(i));let a=new oh(t,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*sI(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof oh||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;let n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){let r=t.size*sI(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(let t in this.state.registeredVariables){let n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){let t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;let n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,i,a,s){let o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:a},l=EP(t);l!=null&&(i=l.gradFunc),i!=null&&(o.gradient=u=>(u=u.map((c,d)=>{if(c==null){let p=r[d],h=u$(p.size,p.dtype);return this.makeTensor(h,p.shape,p.dtype)}return c}),i(u.length>1?u:u[0],a,s))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){let n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){let n=_D(t),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let s=this.state.activeScope.track[a];!s.kept&&!r.has(s.id)&&s.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(t,n,r,i=!1){if(X(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));X(a instanceof zt,()=>"The result y returned by f() must be a tensor.");let s=xFe(this.state.activeTape,n,a);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let o={};o[a.id]=r==null?EFe(a.shape):r,_Fe(o,s,u=>this.tidy(u),OFe);let l=n.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let c of u.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(t){return X(ud(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{X(n.every(o=>o instanceof zt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,i={};n.forEach((o,l)=>{i[l]=o});let a=(o,l)=>(r=t(...n,l),X(r.value instanceof zt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),X(ud(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),s=(o,l)=>{let u=r.gradFunc(o,l),c=Array.isArray(u)?u:[u];X(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),X(c.every(p=>p instanceof zt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let d={};return c.forEach((p,h)=>{d[h]=()=>p}),d};return this.runKernelFunc({forwardFunc:a,backwardsFunc:s,inputs:i})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){let n=m1(),r=await this.backend.time(t);return r.wallMs=m1()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new PH;for(let t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};kD.nextTensorId=0;kD.nextVariableId=0;function EFe(e){let t=vD(Pn(e),"float32");return re.makeTensor(t,e,"float32")}function Pee(){let e=bee();if(e._tfengine==null){let t=new vee(e);e._tfengine=new kD(t)}return eFe(e._tfengine.ENV),CFe(()=>e._tfengine),e._tfengine}var re=Pee();function OFe(e,t){let n={a:e,b:t};return re.runKernel(Pd,n)}var Ow={};Dt(Ow,{isBrowser:()=>Mee,isMobile:()=>AFe,mockIsMobile:()=>MFe});function PFe(){return typeof navigator<"u"&&navigator!=null}var FP;function MFe(e){FP=e}function AFe(e){if(FP!==void 0)return FP;if(e||PFe()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Mee(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ba=fe();Ba.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ba.registerFlag("IS_BROWSER",()=>Mee());Ba.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ba.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ba.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ba.registerFlag("PROD",()=>!1);Ba.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ba.getBool("DEBUG"));Ba.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ba.registerFlag("IS_TEST",()=>!1);Ba.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ba.getBool("DEBUG"));Ba.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ba.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ba.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function jl(e,t){let n=e;if(mi(e))return t==="string"?[]:[e.length];if(Tee(e)){let i=e.channels||"RGBA";return[e.height,e.width*i.length]}else if(Nee(e))return[e.buffer.size/(t==null?4:sI(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||mi(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Aee(e,r,[]),r}function Aee(e,t,n){if(n=n||[],!Array.isArray(e)&&!mi(e)){X(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}X(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),X(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let i=0;i<e.length;++i)Aee(e[i],r,n.concat(i))}function MH(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function U(e,t,n,r="numeric"){if(e instanceof xe())return MH(r,e.dtype,t,n),e;let i=sw(e);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),MH(r,i,t,n),e==null||!mi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let o=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${o}'`)}let a=jl(e,i);!mi(e)&&!Array.isArray(e)&&(e=[e]);let s=i!=="string"?S$(e,i):cd(e,[],!0);return re.makeTensor(s,a,i)}function g1(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,a)=>U(i,`${t}[${a}]`,n,r))}var SD="__op";function ie(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+SD;let i=(...a)=>{re.startScope(n);try{let s=r(...a);return c$(s)&&console.error("Cannot return a Promise inside of tidy."),re.endScope(s),s}catch(s){throw re.endScope(null),s}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}function RFe(e,t){let n=U(e,"real","complex"),r=U(t,"imag","complex");ka(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let i={real:n,imag:r};return re.runKernel(d$,i)}var Lu=ie({complex_:RFe});function Dd(e,t,n,r){if(r==null)r=sw(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Nee(e)||Tee(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return re.backend.createTensorFromGPUData(e,t||n,r)}if(!mi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ks(t);let i=Pn(t),a=Pn(n);X(i===a,()=>`Based on the provided shape, [${t}], the tensor should have ${i} values but has ${a}`);for(let s=0;s<n.length;++s){let o=n[s],l=s===n.length-1?o!==Pn(t.slice(s)):!0;X(n[s]===t[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!mi(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?S$(e,r):cd(e,[],!0),re.makeTensor(e,t,r)}function ma(e,t,n){let r=jl(e,n);return Dd(e,t,r,n)}var lh={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Zu=class Ree{static join(t){return new Ree(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>mi(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){let i=t[r];r!==t.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let i=n-t,a=new ArrayBuffer(i),s=new Uint8Array(a),o=0;for(let l=r;l<this.shards.length;l++){let u=this.shards[l],c=t+o-u.start,d=o,p=Math.min(n,u.end)-u.start,h=new Uint8Array(u.buffer,c,p-c);if(s.set(h,d),o+=h.length,n<u.end)break}return a}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(i){return t<i.start?-1:t>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=DFe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function DFe(e,t){let n=0,r=e.length;for(;n<=r;){let i=Math.floor((r-n)/2)+n,a=t(e[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}function LFe(){fe().set("PROD",!0)}function FFe(){fe().set("DEBUG",!0)}function zFe(){fe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Dee(e){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function BFe(){re.disposeVariables()}function eo(){return re}function dI(){return re.memory()}function WFe(e){return re.profile(e)}function ue(e,t){return re.tidy(e,t)}function Rt(e){_D(e).forEach(t=>t.dispose())}function Yr(e){return re.keep(e)}function VFe(e){return re.time(e)}function jFe(e){return re.setBackend(e)}function HFe(){return re.ready()}function Lee(){return re.backendName}function UFe(e){re.removeBackend(e)}function GFe(e){return re.findBackend(e)}function qFe(e){return re.findBackendFactory(e)}function I$(e,t,n=1){return re.registerBackend(e,t,n)}function CD(){return re.backend}function KFe(e,t){fe().setPlatform(e,t)}var dd=4;async function ZFe(e,t){let n=[],r=[],i=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<i.length;++s){let o=i[s],l=Array.isArray(e)?e[s].tensor:e[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);let u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let c=new Promise(async d=>{let p=await l.bytes(),h=p.reduce((y,v)=>y+v.length,0)+dd*p.length,m=new Uint8Array(h),g=0;for(let y=0;y<p.length;y++){let v=p[y],b=new Uint8Array(new Uint32Array([v.length]).buffer);m.set(b,g),g+=dd,m.set(v,g),g+=v.length}d(m)});r.push(c)}else r.push(l.data());t!=null&&(u.group=t),n.push(u)}let a=await Promise.all(r);return{data:YFe(a),specs:n}}function Fee(e,t){let n=new Zu(e),r={},i=0;for(let a of t){let s=XFe(a,(o,l)=>n.slice(i+o,i+l));r[a.name]=zee(a,n.slice(i,i+s)),i+=s}return r}function XFe(e,t){let n=Pn(e.shape),r;if("quantization"in e){let i=e.quantization;r=lh[i.dtype]}else if(e.dtype==="string"){let i=0;for(let a=0;a<n;a++)i+=dd+new Uint32Array(t(i,i+dd))[0];return i}else r=lh[e.dtype];return n*r}async function JFe(e,t){let n=Pn(e.shape),r;if("quantization"in e){let i=e.quantization;r=lh[i.dtype]}else if(e.dtype==="string"){let i=0;for(let a=0;a<n;a++)i+=dd+new Uint32Array(await t(i,i+dd))[0];return i}else r=lh[e.dtype];return n*r}function zee(e,t){let n=e.name,r=e.dtype,i=e.shape,a=Pn(i),s,o=0;if("quantization"in e){let l=e.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${e.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let u=lh[l.dtype],c=l.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(c.length);for(let d=0;d<c.length;d++){let p=c[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=aze()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(c.length);for(let d=0;d<c.length;d++){let p=c[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*u}else if(r==="string"){let l=Pn(e.shape);s=[];for(let u=0;u<l;u++){let c=new Uint32Array(t.slice(o,o+dd))[0];o+=dd;let d=new Uint8Array(t.slice(o,o+c));s.push(d),o+=c}}else{let l=lh[r];if(r==="float32")s=new Float32Array(t);else if(r==="int32")s=new Int32Array(t);else if(r==="bool")s=new Uint8Array(t);else if(r==="complex64"){s=new Float32Array(t);let u=new Float32Array(s.length/2),c=new Float32Array(s.length/2);for(let m=0;m<u.length;m++)u[m]=s[m*2],c[m]=s[m*2+1];let d=ma(u,i,"float32"),p=ma(c,i,"float32"),h=Lu(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*l}return ma(s,i,r)}async function AH(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:i,value:a}=await e.read();if(i&&a==null){let o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}let s=new Uint8Array(r.length+a.byteLength);s.set(r,0),s.set(new Uint8Array(a),r.length),r=s}return r.buffer}async function Bee(e,t){let n={},r=e.getReader(),i=new ArrayBuffer(0);for(let a of t){let s=await JFe(a,async(u,c)=>(i=await AH(r,i,c),i.slice(u,c)));i=await AH(r,i,s);let o=i.slice(0,s);i=i.slice(s);let l=zee(a,o);if(n[a.name]=l,Lee()==="webgpu"){let u=CD();"uploadToGPU"in u&&Pn(l.shape)>=fe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function YFe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(a=>{if(t+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});let r=new Uint8Array(t),i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var ID=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function RH(e){return ID?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function QFe(e){if(ID)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function eze(e){if(ID){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function tze(e){return Zu.join(e)}function DH(e){let t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);let n=e.split(t);return n[n.length-1]}function Wee(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function Vee(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function $D(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),Vee(e,n,r)}function Pw(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:RH(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:RH(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Zu(e.weightData).byteLength}}function zP(e){let t=[];for(let n of e)t.push(...n.weights);return t}function nze(){let e=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function rze(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function ize(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function aze(){let e=nze(),t=rze(),n=ize();return r=>{let i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let s=0;s<r.length;s++){let o=r[s],l=e[n[o>>10]+(o&1023)]+t[o>>10];a[s]=l}return new Float32Array(i)}}var Bs=class Oo{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Oo.instance==null&&(Oo.instance=new Oo),Oo.instance}static registerSaveRouter(t){Oo.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Oo.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Oo.getHandlers(t,"save")}static getLoadHandlers(t,n){return Oo.getHandlers(t,"load",n)}static getHandlers(t,n,r){let i=[];return(n==="load"?Oo.getInstance().loadRouters:Oo.getInstance().saveRouters).forEach(a=>{let s=a(t,r);s!==null&&i.push(s)}),i}},sze=e=>Bs.registerSaveRouter(e),oze=e=>Bs.registerLoadRouter(e),lze=e=>Bs.getSaveHandlers(e),uze=(e,t)=>Bs.getLoadHandlers(e,t),BP="tensorflowjs",WP=1,Tp="models_store",Dc="model_info_store";function jee(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function VP(e){let t=e.result;t.createObjectStore(Tp,{keyPath:"modelPath"}),t.createObjectStore(Dc,{keyPath:"modelPath"})}var uh=class{constructor(e){if(this.indexedDB=jee(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((n,r)=>{let i=this.indexedDB.open(BP,WP);i.onupgradeneeded=()=>VP(i),i.onsuccess=()=>{let a=i.result;if(t==null){let s=a.transaction(Tp,"readonly"),o=s.objectStore(Tp).get(this.modelPath);o.onsuccess=()=>{if(o.result==null)return a.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));n(o.result.modelArtifacts)},o.onerror=l=>(a.close(),r(o.error)),s.oncomplete=()=>a.close()}else{t.weightData=Zu.join(t.weightData);let s=Pw(t),o=a.transaction(Dc,"readwrite"),l=o.objectStore(Dc),u;try{u=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(d){return r(d)}let c;u.onsuccess=()=>{c=a.transaction(Tp,"readwrite");let d=c.objectStore(Tp),p;try{p=d.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s})}catch(h){return r(h)}p.onsuccess=()=>n({modelArtifactsInfo:s}),p.onerror=h=>{l=o.objectStore(Dc);let m=l.delete(this.modelPath);m.onsuccess=()=>(a.close(),r(p.error)),m.onerror=g=>(a.close(),r(p.error))}},u.onerror=d=>(a.close(),r(u.error)),o.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}}},i.onerror=a=>r(i.error)})}};uh.URL_SCHEME="indexeddb://";var Hee=e=>fe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(uh.URL_SCHEME)?cze(e.slice(uh.URL_SCHEME.length)):null;Bs.registerSaveRouter(Hee);Bs.registerLoadRouter(Hee);function cze(e){return new uh(e)}function dze(e){return e.startsWith(uh.URL_SCHEME)?e.slice(uh.URL_SCHEME.length):e}var pze=class{constructor(){this.indexedDB=jee()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(BP,WP);n.onupgradeneeded=()=>VP(n),n.onsuccess=()=>{let r=n.result,i=r.transaction(Dc,"readonly"),a=i.objectStore(Dc).getAll();a.onsuccess=()=>{let s={};for(let o of a.result)s[o.modelPath]=o.modelArtifactsInfo;e(s)},a.onerror=s=>(r.close(),t(a.error)),i.oncomplete=()=>r.close()},n.onerror=r=>t(n.error)})}async removeModel(e){return e=dze(e),new Promise((t,n)=>{let r=this.indexedDB.open(BP,WP);r.onupgradeneeded=()=>VP(r),r.onsuccess=()=>{let i=r.result,a=i.transaction(Dc,"readwrite"),s=a.objectStore(Dc),o=s.get(e),l;o.onsuccess=()=>{if(o.result==null)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let u=s.delete(e),c=()=>{l=i.transaction(Tp,"readwrite");let d=l.objectStore(Tp).delete(e);d.onsuccess=()=>t(o.result.modelArtifactsInfo),d.onerror=p=>n(o.error)};u.onsuccess=c,u.onerror=d=>(c(),i.close(),n(o.error))}},o.onerror=u=>(i.close(),n(o.error)),a.oncomplete=()=>{l==null?i.close():l.oncomplete=()=>i.close()}},r.onerror=i=>n(r.error)})}},bu="/",Qm="tensorflowjs_models",Uee="info",hze="model_topology",fze="weight_specs",mze="weight_data",gze="model_metadata";function Gee(e){return{info:[Qm,e,Uee].join(bu),topology:[Qm,e,hze].join(bu),weightSpecs:[Qm,e,fze].join(bu),weightData:[Qm,e,mze].join(bu),modelMetadata:[Qm,e,gze].join(bu)}}function qee(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function yze(e){let t=e.split(bu);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(bu)}function vze(e){return e.startsWith(ch.URL_SCHEME)?e.slice(ch.URL_SCHEME.length):e}var ch=class{constructor(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Gee(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Pw(e),i=Zu.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,QFe(i));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch{throw qee(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(n==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(r==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){let s=JSON.parse(i);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(t.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=eze(a),t}};ch.URL_SCHEME="localstorage://";var Kee=e=>fe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ch.URL_SCHEME)?bze(e.slice(ch.URL_SCHEME.length)):null;Bs.registerSaveRouter(Kee);Bs.registerLoadRouter(Kee);function bze(e){return new ch(e)}var wze=class{constructor(){X(fe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),X(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=Qm+bu,n=bu+Uee;for(let r=0;r<this.LS.length;++r){let i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){let a=yze(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=vze(e);let t=Gee(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return qee(t),n}},Mg="://",pd=class yc{constructor(){this.managers={}}static getInstance(){return yc.instance==null&&(yc.instance=new yc),yc.instance}static registerManager(t,n){X(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Mg)&&(t=t.slice(0,t.indexOf(Mg))),X(t.length>0,()=>"scheme must not be an empty string.");let r=yc.getInstance();X(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){let n=yc.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(yc.getInstance().managers)}};function wk(e){if(e.indexOf(Mg)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${pd.getSchemes().join(",")}`);return{scheme:e.split(Mg)[0],path:e.split(Mg)[1]}}async function Zee(e,t,n=!1){X(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=Bs.getLoadHandlers(e);X(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),X(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let i=r[0],a=Bs.getSaveHandlers(t);X(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),X(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let s=a[0],o=wk(e).scheme,l=wk(e).path,u=o===wk(e).scheme,c=await i.load();n&&u&&await pd.getManager(o).removeModel(l);let d=await s.save(c);return n&&!u&&await pd.getManager(o).removeModel(l),d.modelArtifactsInfo}async function xze(){let e=pd.getSchemes(),t={};for(let n of e){let r=await pd.getManager(n).listModels();for(let i in r){let a=n+Mg+i;t[a]=r[i]}}return t}async function _ze(e){let t=wk(e);return pd.getManager(t.scheme).removeModel(t.path)}async function kze(e,t){return Zee(e,t,!1)}async function Sze(e,t){return Zee(e,t,!0)}var Cze=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!fe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",n=>{if(n.source===window&&n.data.name===this.messageName){n.stopPropagation();let r=this.functionRefs[n.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return See(e)}};if(fe().get("IS_BROWSER")){fe().setPlatform("browser",new Cze);try{pd.registerManager(ch.URL_SCHEME,new wze)}catch{}try{pd.registerManager(uh.URL_SCHEME,new pze)}catch{}}var Ize={importFetch:()=>bLe()},wE,$ze=class{constructor(){this.util=wLe(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return fe().global.fetch!=null?fe().global.fetch(e,t):(wE==null&&(wE=Ize.importFetch()),wE(e,t))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};fe().get("IS_NODE")&&!fe().get("IS_BROWSER")&&fe().setPlatform("node",new $ze);function Gt(e,t="float32",n){return t=t||"float32",ks(e),new Br(e,t,n)}function Tze(e,t){let n=U(e,"x","cast");if(!hee(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},i={dtype:t};return re.runKernel(qh,r,i)}var Ae=ie({cast_:Tze});function Nze(e){let t={x:U(e,"x","clone","string_or_numeric")};return re.runKernel(hf,t)}var zl=ie({clone_:Nze});function TD(e,t=!1){console.log(e.toString(t))}Pee();var Eze={buffer:Gt,cast:Ae,clone:zl,print:TD};IFe(Eze);function Oze(e,t){let n=U(e,"a","add"),r=U(t,"b","add");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Pd,i)}var we=ie({add_:Oze});function Pze(e,t){let n=U(e,"a","floorDiv"),r=U(t,"b","floorDiv");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(cf,i)}var $$=ie({floorDiv_:Pze});function Mze(e,t){let n=U(e,"a","div"),r=U(t,"b","div");if([n,r]=br(n,r),n.dtype==="int32"&&r.dtype==="int32")return $$(n,r);let i={a:n,b:r},a={};return re.runKernel(rf,i,a)}var Qe=ie({div_:Mze});function Aze(e,t){let n=U(e,"a","mul"),r=U(t,"b","mul");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Nf,i)}var se=ie({mul_:Aze});function Rze(e){let t=U(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return re.runKernel(cw,n)}else{let n={x:t};return re.runKernel(jy,n)}}var Dr=ie({abs_:Rze});function Dze(e){let t={x:U(e,"x","acos")};return re.runKernel(Lh,t)}var ND=ie({acos_:Dze});function Lze(e){let t={x:U(e,"x","acosh")};return re.runKernel(Fh,t)}var ED=ie({acosh_:Lze});function Fze(e){X(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),X(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((i,a)=>U(i,`tensors${a}`,"addN")),n=t[0];t.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(i=>{if(!Ku(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return re.runKernel(zh,r)}var Xee=ie({addN_:Fze});function zze(e,t=null,n=!1){let r={x:U(e,"x","all","bool")},i={axis:t,keepDims:n};return re.runKernel(Hy,r,i)}var T$=ie({all_:zze});function Bze(e,t=null,n=!1){let r={x:U(e,"x","any","bool")},i={axis:t,keepDims:n};return re.runKernel(Uy,r,i)}var y1=ie({any_:Bze});function Wze(e,t=0){let n={x:U(e,"x","argMax")},r={axis:t};return re.runKernel(Gy,n,r)}var dh=ie({argMax_:Wze});function Vze(e,t=0){let n={x:U(e,"x","argMin")},r={axis:t};return re.runKernel(qy,n,r)}var OD=ie({argMin_:Vze});function jze(e){let t={x:U(e,"x","asin")};return re.runKernel(Bh,t)}var PD=ie({asin_:jze});function Hze(e){let t={x:U(e,"x","asinh")};return re.runKernel(Wh,t)}var MD=ie({asinh_:Hze});function Uze(e){let t={x:U(e,"x","atan")};return re.runKernel(Vh,t)}var AD=ie({atan_:Uze});function Gze(e,t){let n=U(e,"a","atan2"),r=U(t,"b","atan2");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Hh,i)}var RD=ie({atan2_:Gze});function qze(e){let t={x:U(e,"x","atanh")};return re.runKernel(jh,t)}var DD=ie({atanh_:qze});function Kze(e,t,n,r,i="NHWC",a){let s=e[3],o=[...t,s],l=Qee(i);return Mw(e,o,n,a,r,null,null,l)}function Jee(e,t,n,r,i,a,s="channelsLast"){let[o,l]=v1(t),u;if(s==="channelsLast")u=[o,l,e[3],e[3]];else if(s==="channelsFirst")u=[o,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Mw(e,u,n,r,i,a,!1,s)}function Zze(e,t,n,r,i,a,s="NDHWC"){let[o,l,u]=jP(t),c,d;if(s==="NDHWC")d="channelsLast",c=[o,l,u,e[4],e[4]];else if(s==="NCDHW")d="channelsFirst",c=[o,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Yee(e,c,n,r,i,!1,d,a)}function Mw(e,t,n,r,i,a,s=!1,o="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d]=e;else if(o==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${o}`);let[p,h,,m]=t,[g,y]=v1(n),[v,b]=v1(r),_=Ag(p,v),k=Ag(h,b),{padInfo:S,outHeight:$,outWidth:N}=Yze(i,u,c,g,y,_,k,a,o),P=s?m*d:m,D;return o==="channelsFirst"?D=[l,P,$,N]:o==="channelsLast"&&(D=[l,$,N,P]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:d,outHeight:$,outWidth:N,outChannels:P,padInfo:S,strideHeight:g,strideWidth:y,filterHeight:p,filterWidth:h,effectiveFilterHeight:_,effectiveFilterWidth:k,dilationHeight:v,dilationWidth:b,inShape:e,outShape:D,filterShape:t}}function Yee(e,t,n,r,i,a=!1,s="channelsLast",o){let[l,u,c,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,u,c,d,p]=e;else if(s==="channelsFirst")[l,p,u,c,d]=e;else throw new Error(`Unknown dataFormat ${s}`);let[h,m,g,,y]=t,[v,b,_]=jP(n),[k,S,$]=jP(r),N=Ag(h,k),P=Ag(m,S),D=Ag(g,$),{padInfo:O,outDepth:F,outHeight:E,outWidth:z}=Qze(i,u,c,d,v,b,_,N,P,D,o),q=a?y*p:y,K;return s==="channelsFirst"?K=[l,q,F,E,z]:s==="channelsLast"&&(K=[l,F,E,z,q]),{batchSize:l,dataFormat:s,inDepth:u,inHeight:c,inWidth:d,inChannels:p,outDepth:F,outHeight:E,outWidth:z,outChannels:q,padInfo:O,strideDepth:v,strideHeight:b,strideWidth:_,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:N,effectiveFilterHeight:P,effectiveFilterWidth:D,dilationDepth:k,dilationHeight:S,dilationWidth:$,inShape:e,outShape:K,filterShape:t}}function Xze(e,t,n,r,i){r==null&&(r=LD(e,t,n));let a=e[0],s=e[1],o=b1((a-t+2*r)/n+1,i),l=b1((s-t+2*r)/n+1,i);return[o,l]}function Jze(e,t,n,r,i,a){i==null&&(i=LD(e,t[0],r[0]));let s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*i>=t[o]&&(s[o]=b1((e[o]-t[o]+2*i)/r[o]+1,a));return s}function LD(e,t,n,r=1){let i=Ag(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function v1(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function jP(e){return typeof e=="number"?[e,e,e]:e}function Ag(e,t){return t<=1?e:e+(e-1)*(t-1)}function Yze(e,t,n,r,i,a,s,o,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let p=Xze([t,n],a,r,e,o);c=p[0],d=p[1]}else if(e==="same"){c=Math.ceil(t/r),d=Math.ceil(n/i);let p=Math.max(0,(c-1)*r+a-t),h=Math.max(0,(d-1)*i+s-n),m=Math.floor(p/2),g=p-m,y=Math.floor(h/2),v=h-y;u={top:m,bottom:g,left:y,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),d=Math.ceil((n-s+1)/i);else if(typeof e=="object"){let p=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],m=l==="channelsLast"?e[2][0]:e[3][0],g=l==="channelsLast"?e[2][1]:e[3][1];u={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},c=b1((t-a+p+h)/r+1,o),d=b1((n-s+m+g)/i+1,o)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function Qze(e,t,n,r,i,a,s,o,l,u,c){let d,p,h,m;if(e==="valid"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let g=Jze([t,n,r,1],[o,l,u],1,[i,a,s],e,c);p=g[0],h=g[1],m=g[2]}else if(e==="same"){p=Math.ceil(t/i),h=Math.ceil(n/a),m=Math.ceil(r/s);let g=(p-1)*i+o-t,y=(h-1)*a+l-n,v=(m-1)*s+u-r,b=Math.floor(g/2),_=g-b,k=Math.floor(y/2),S=y-k,$=Math.floor(v/2),N=v-$;d={top:k,bottom:S,left:$,right:N,front:b,back:_,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function b1(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function hd(e){let[t,n,r]=v1(e);return t===1&&n===1&&r===1}function Xl(e,t){return hd(e)||hd(t)}function ph(e){return v1(e).every(t=>t>0)}function Qee(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Sa(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")X(ry(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(i=>{X(ry(i),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function e3e(e,t){let n={x:U(e,"x","reshape","string_or_numeric")},r={shape:t};return re.runKernel($v,n,r)}var le=ie({reshape_:e3e});function t3e(e,t,n,r,i){let a=U(e,"x","avgPool","float32"),s=1;X(Xl(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Sa("avgPool",r,i);let u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},d=re.runKernel(Uh,u,c);return d=Ae(d,a.dtype),l?le(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Xu=ie({avgPool_:t3e});function n3e(e,t,n,r,i,a="NDHWC"){let s=U(e,"x","avgPool3d","float32"),o=s,l=!1;s.rank===4&&(l=!0,o=le(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),X(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),X(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),X(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Sa("avgPool3d",r,i);let u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},d=re.runKernel(Ky,u,c);return d=Ae(d,o.dtype),l?le(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var FD=ie({avgPool3d_:n3e});function r3e(e,t=0){X(e.length>=1,()=>"Pass at least one tensor to concat");let n=g1(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return zl(n[0]);let r=n,i={axis:t};return re.runKernel(Yy,r,i)}var Wn=ie({concat_:r3e});function i3e(e,t,n=!1,r=!1){let i=U(e,"a","matMul"),a=U(t,"b","matMul");[i,a]=br(i,a);let s={a:i,b:a},o={transposeA:n,transposeB:r};return re.runKernel(Gh,s,o)}var jt=ie({matMul_:i3e});function a3e(e){let t={x:U(e,"x","sigmoid","float32")};return re.runKernel(qf,t)}var co=ie({sigmoid_:a3e});function s3e(e,t,n){let r=U(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let i={x:r},a={begin:t,size:n};return re.runKernel(Av,i,a)}var nn=ie({slice_:s3e});function o3e(e){let t={x:U(e,"x","tanh","float32")};return re.runKernel(tm,t)}var hh=ie({tanh_:o3e});function l3e(e,t,n,r,i,a){let s=U(e,"forgetBias","basicLSTMCell"),o=U(t,"lstmKernel","basicLSTMCell"),l=U(n,"lstmBias","basicLSTMCell"),u=U(r,"data","basicLSTMCell"),c=U(i,"c","basicLSTMCell"),d=U(a,"h","basicLSTMCell"),p=Wn([u,d],1),h=jt(p,o),m=we(h,l),g=m.shape[0],y=m.shape[1]/4,v=[g,y],b=nn(m,[0,0],v),_=nn(m,[0,y],v),k=nn(m,[0,y*2],v),S=nn(m,[0,y*3],v),$=we(se(co(b),hh(_)),se(c,co(we(s,k)))),N=se(hh($),co(S));return[$,N]}var ete=ie({basicLSTMCell_:l3e});function u3e(e,t,n){let r=U(e,"x","batchToSpaceND"),i=t.reduce((o,l)=>o*l);X(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),X(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),X(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);let a={x:r},s={blockShape:t,crops:n};return re.runKernel(Zy,a,s)}var Aw=ie({batchToSpaceND_:u3e});function c3e(e){let t;return e.rank===0||e.rank===1?t=le(e,[1,1,1,e.size]):e.rank===2?t=le(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function d3e(e,t,n,r,i,a){a==null&&(a=.001);let s=U(e,"x","batchNorm"),o=U(t,"mean","batchNorm"),l=U(n,"variance","batchNorm"),u;i!=null&&(u=U(i,"scale","batchNorm"));let c;r!=null&&(c=U(r,"offset","batchNorm")),X(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),X(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),X(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let d={x:c3e(s),scale:u,offset:c,mean:o,variance:l},p={varianceEpsilon:a},h=re.runKernel(df,d,p);return le(h,s.shape)}var nm=ie({batchNorm_:d3e});function p3e(e,t,n,r,i,a){let s=U(e,"x","batchNorm"),o=U(t,"mean","batchNorm"),l=U(n,"variance","batchNorm"),u;i!=null&&(u=U(i,"scale","batchNorm"));let c;return r!=null&&(c=U(r,"offset","batchNorm")),X(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),X(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),X(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),nm(s,o,l,c,u,a)}var zD=ie({batchNorm2d_:p3e});function h3e(e,t,n,r,i,a){let s=U(e,"x","batchNorm"),o=U(t,"mean","batchNorm"),l=U(n,"variance","batchNorm"),u;i!=null&&(u=U(i,"scale","batchNorm"));let c;return r!=null&&(c=U(r,"offset","batchNorm")),X(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),X(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),X(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),nm(s,o,l,c,u,a)}var BD=ie({batchNorm3d_:h3e});function f3e(e,t,n,r,i,a){let s=U(e,"x","batchNorm"),o=U(t,"mean","batchNorm"),l=U(n,"variance","batchNorm"),u;i!=null&&(u=U(i,"scale","batchNorm"));let c;return r!=null&&(c=U(r,"offset","batchNorm")),X(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),X(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),X(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),nm(s,o,l,c,u,a)}var WD=ie({batchNorm4d_:f3e});function m3e(e,t,n){let r=U(e,"x","bincount"),i=U(t,"weights","bincount");X(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),X(n>=0,()=>`size must be non-negative, but got ${n}.`),X(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);let a={x:r,weights:i},s={size:n};return re.runKernel(Xy,a,s)}var VD=ie({bincount_:m3e});function g3e(e,t){let n=U(e,"x","bitwiseAnd"),r=U(t,"y","bitwiseAnd");if(!Ku(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let i={a:n,b:r};return re.runKernel(Jy,i)}var tte=ie({bitwiseAnd_:g3e});function y3e(e,t){let n=U(e,"s0","broadcastArgs","int32"),r=U(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let i={s0:n,s1:r};return re.runKernel(uw,i)}var nte=ie({broadcastArgs_:y3e});function v3e(e,t){let n=U(e,"broadcastTo","x"),r=n.shape;if(ks(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let l=n.shape.slice();for(;l.length<t.length;)l.unshift(1);n=le(n,l)}let i=n.shape,a=Array.from(t);for(let l=t.length-1;l>=0;l--)if(i[l]===t[l])a[l]=1;else if(n.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(a.map((l,u)=>l>1?u:-1).filter(l=>l>=0).length===0)return zl(n);let s={x:n},o={reps:a};return re.runKernel(Ad,s,o)}var zp=ie({broadcastTo_:v3e});function b3e(e){let t={x:U(e,"x","ceil","float32")};return re.runKernel(Kh,t)}var jD=ie({ceil_:b3e});function ps(e,t,n){ks(e),n=n||sw(t);let r={shape:e,value:t,dtype:n};return re.runKernel(hw,{},r)}function w3e(e,t,n){let r=U(e,"x","clipByValue");if(X(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return ps(r.shape,t,r.dtype);let i={x:r},a={clipValueMin:t,clipValueMax:n};return re.runKernel(Md,i,a)}var Qi=ie({clipByValue_:w3e});function x3e(e){return Wn(e,0)}var HD=ie({concat1d_:x3e});function _3e(e,t){return Wn(e,t)}var UD=ie({concat2d_:_3e});function k3e(e,t){return Wn(e,t)}var GD=ie({concat3d_:k3e});function S3e(e,t){return Wn(e,t)}var qD=ie({concat4d_:S3e});function C3e(e,t,n,r,i="NHWC",a=[1,1],s){let o=U(e,"x","conv2d","float32"),l=U(t,"filter","conv2d","float32"),u=o,c=!1;o.rank===3&&(c=!0,u=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),X(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Sa("conv2d",r,s);let d=i==="NHWC"?u.shape[3]:u.shape[1];X(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),X(Xl(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),X(ph(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),X(ph(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s},m=re.runKernel(Zh,p,h);return c?le(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var ya=ie({conv2d_:C3e});function I3e(e,t,n,r,i="NWC",a=1,s){let o=U(e,"x","conv1d"),l=U(t,"filter","conv1d"),u=o,c=!1;o.rank===2&&(c=!0,u=le(o,[1,o.shape[0],o.shape[1]])),X(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),X(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Sa("conv1d",r,s),X(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),X(Xl(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),X(ph(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),X(ph(n),()=>"Error in conv1D: Stride should be larger than 0."),X(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let d=le(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=le(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=ya(p,d,[1,n],r,"NHWC",[1,a],s);return c?le(h,[h.shape[2],h.shape[3]]):le(h,[h.shape[0],h.shape[2],h.shape[3]])}var N$=ie({conv1d_:I3e});function $3e(e,t,n,r,i,a="NHWC",s){X(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,l=t,u=!1;t.rank===3&&(u=!0,l=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),X(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),X(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),X(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let c=a==="NHWC"?o[3]:o[1],d=a==="NHWC"?l.shape[3]:l.shape[1];X(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),X(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Sa("conv2dDerInput",i,s);let p={dy:l,filter:n},h={strides:r,pad:i,dataFormat:a,dimRoundingMode:s,inputShape:o},m=re.runKernel(Xh,p,h);return u?le(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var KD=ie({conv2DBackpropInput_:$3e});function T3e(e,t,n,r,i,a){let s=U(e,"x","conv2dTranspose"),o=U(t,"filter","conv2dTranspose");return KD(n,s,o,r,i,"NHWC",a)}var E$=ie({conv2dTranspose_:T3e});function N3e(e,t,n,r,i="NDHWC",a=[1,1,1]){let s=U(e,"x","conv3d"),o=U(t,"filter","conv3d"),l=s,u=!1;s.rank===4&&(u=!0,l=le(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),X(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),X(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),X(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),X(Xl(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),X(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),X(ph(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),X(ph(n),()=>"Error in conv3D: Strides should be larger than 0.");let c={x:l,filter:o},d={strides:n,pad:r,dataFormat:i,dilations:a},p=re.runKernel(Jh,c,d);return u?le(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var ZD=ie({conv3d_:N3e});function E3e(e,t,n,r,i){X(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,s=t,o=!1;t.rank===4&&(o=!0,s=le(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);let l=a[4],u=s.shape[4];X(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),X(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),X(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),X(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),X(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);let c={dy:s,filter:n},d={pad:i,strides:r,inputShape:a},p=re.runKernel(ev,c,d);return o?le(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var rte=ie({conv3DBackpropInput_:E3e});function O3e(e,t,n,r,i){let a=U(e,"x","conv3dTranspose"),s=U(t,"filter","conv3dTranspose");return rte(n,a,s,r,i)}var XD=ie({conv3dTranspose_:O3e});function P3e(e){let t={x:U(e,"x","cos","float32")};return re.runKernel(Yh,t)}var Rw=ie({cos_:P3e});function M3e(e){let t={x:U(e,"x","cosh","float32")};return re.runKernel(Qh,t)}var O$=ie({cosh_:M3e});function A3e(e,t=0,n=!1,r=!1){let i={x:U(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return re.runKernel(tv,i,a)}var w1=ie({cumprod_:A3e});function R3e(e,t=0,n=!1,r=!1){let i={x:U(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return re.runKernel(ef,i,a)}var P$=ie({cumsum_:R3e});function D3e(e,t,n,r=!1){let i=U(e,"x","denseBincount"),a=U(t,"weights","denseBincount");X(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),X(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),X(n>=0,()=>`size must be non-negative, but got ${n}.`),X(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);let s={x:i,weights:a},o={size:n,binaryOutput:r};return re.runKernel(dw,s,o)}var pI=ie({denseBincount_:D3e});function L3e(e,t,n="NHWC"){let r=U(e,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];X(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),X(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t}  for depthToSpace with input shape
    ${r.shape}`),X(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t} for depthToSpace with input shape
        ${r.shape}`),X(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`);let o={x:r},l={blockSize:t,dataFormat:n};return re.runKernel(rv,o,l)}var JD=ie({depthToSpace_:L3e});function F3e(e,t,n,r,i="NHWC",a=[1,1],s){let o=U(e,"x","depthwiseConv2d","float32"),l=U(t,"filter","depthwiseConv2d","float32"),u=o,c=!1;o.rank===3&&(c=!0,u=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),X(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=i==="NHWC"?u.shape[3]:u.shape[1];X(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Sa("depthwiseConv2d",r,s);let p={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s},m=re.runKernel(tf,p,h);return c?le(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var rm=ie({depthwiseConv2d_:F3e});function z3e(e){let t={x:U(e,"x","diag")};return re.runKernel(pw,t)}var ite=ie({diag_:z3e});function B3e(e,t,n,r,i=[1,1],a="NHWC"){let s=U(e,"x","dilation2d"),o=U(t,"filter","dilation2d");X(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),X(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),X(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=s,u=!1;s.rank===3&&(l=le(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0),X(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);let c={x:l,filter:o},d={strides:n,pad:r,dilations:i},p=re.runKernel(nf,c,d);return u?le(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var YD=ie({dilation2d_:B3e}),Uv={};Dt(Uv,{assertAndGetBroadcastShape:()=>Vn,getBroadcastDims:()=>ate,getReductionAxes:()=>Vr});function ate(e,t){let n=e.length,r=[];for(let i=0;i<n;i++){let a=n-1-i,s=e[a]||1;(t[t.length-1-i]||1)>1&&s===1&&r.unshift(a)}return r}function Vr(e,t){let n=[];for(let r=0;r<t.length;r++){let i=e[e.length-r-1],a=t.length-r-1,s=t[a];(i==null||i===1&&s>1)&&n.unshift(a)}return n}function Vn(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let a=e[e.length-i-1];a==null&&(a=1);let s=t[t.length-i-1];if(s==null&&(s=1),a===1)r[n-i-1]=s;else if(s===1)r[n-i-1]=a;else if(a!==s){let o=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(o)}else r[n-i-1]=a}return r}function W3e(e,t){let n=U(e,"a","equal","string_or_numeric"),r=U(t,"b","equal","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(av,i)}var gs=ie({equal_:W3e});function V3e(e,t,n){let r=U(t,"a","where"),i=U(n,"b","where"),a=U(e,"condition","where","bool"),s=Vn(Vn(a.shape,r.shape),i.shape),o=zp(a,s),l=zp(r,s),u=zp(i,s),c={condition:o,t:l,e:u};return re.runKernel(Mv,c)}var wi=ie({where_:V3e});function j3e(e){let t={x:U(e,"x","zerosLike")};return re.runKernel(jv,t)}var an=ie({zerosLike_:j3e});function H3e(e,t){let n=U(e,"a","div"),r=U(t,"b","div");[n,r]=br(n,r);let i=Qe(n,r),a=an(i),s=gs(r,a);return wi(s,a,i)}var QD=ie({divNoNan_:H3e});function U3e(e,t){let n=U(e,"t1","dot"),r=U(t,"t2","dot");X((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(X(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){let s=le(n,[1,-1]),o=le(r,[-1,1]),l=jt(s,o);return le(l,[])}else if(n.rank===1&&r.rank===2){let s=le(n,[1,-1]),o=le(r,[r.shape[0],r.shape[1]]),l=jt(s,o);return le(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=le(r,[-1,1]),o=jt(n,s);return le(o,[o.size])}else{let s=le(r,[r.shape[0],r.shape[1]]);return jt(n,s)}}var eL=ie({dot_:U3e});function G3e(e,...t){let n=t.map((i,a)=>U(i,`tensors${a}`,"einsum")),r={equation:e};return re.runKernel(g$,n,r)}var vp=ie({einsum_:G3e});function q3e(e){let t={x:U(e,"x","elu","float32")};return re.runKernel(af,t)}var Gv=ie({elu_:q3e});function K3e(e,t){let n=U(e,"x","ensureShape","string_or_numeric");if(!uee(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}var ste=ie({ensureShape_:K3e});function Z3e(e){let t=U(e,"x","erf");X(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Ae(t,"float32"));let n={x:t};return re.runKernel(sf,n)}var tL=ie({erf_:Z3e});function nL(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function ote(e,t,n){let r=e.length+t.length,i=[],a=0,s=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?i.push(e[a++]):i.push(t[s++]);return i}function lte(e,t){let n=[],r=e.length;for(let a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);let i=t.map(a=>e[a]);return[n,i]}function fh(e,t){let n=t.map(r=>1);return ote(e,n,t)}function X3e(e,t,n){X(nL(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function ute(e,t){if(nL(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function rL(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function J3e(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function Y3e(e,t=null,n=!1){let r={x:U(e,"x","max")},i={reductionIndices:t,keepDims:n};return re.runKernel(xf,r,i)}var Ds=ie({max_:Y3e});function Q3e(e,t=null,n=!1){let r={x:U(e,"x","min")},i={axis:t,keepDims:n};return re.runKernel(Cf,r,i)}var oy=ie({min_:Q3e});function eBe(e,t){let n=U(e,"base","pow"),r=U(t,"exp","pow");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Pf,i)}var Fu=ie({pow_:eBe});function gt(e,t){if((mi(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&mi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Dd(e,[],[],t)}function tBe(e){let t={x:U(e,"x","sqrt","float32")};return re.runKernel(Zf,t)}var Di=ie({sqrt_:tBe});function nBe(e){let t=U(e,"x","square"),n={};return re.runKernel("Square",{x:t},n)}var zn=ie({square_:nBe});function rBe(e,t=null,n=!1){let r=U(e,"x","sum");r.dtype==="bool"&&(r=Ae(r,"int32"));let i={x:r},a={axis:t,keepDims:n};return re.runKernel(Xf,i,a)}var ot=ie({sum_:rBe});function iBe(e,t="euclidean",n=null,r=!1){e=U(e,"x","norm");let i=cte(e,t,n),a=i.shape;if(r){let s=bo(n,e.shape);a=fh(i.shape,s)}return le(i,a)}function cte(e,t,n=null){if(e.rank===0)return Dr(e);if(e.rank!==1&&n===null)return cte(le(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return ot(Dr(e),n);if(t===1/0)return Ds(Dr(e),n);if(t===-1/0)return oy(Dr(e),n);if(t==="euclidean"||t===2)return Di(ot(Fu(Dr(e),gt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Ds(ot(Dr(e),n[0]),n[1]-1);if(t===1/0)return Ds(ot(Dr(e),n[1]),n[0]);if(t===-1/0)return oy(ot(Dr(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Di(ot(zn(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var qv=ie({norm_:iBe});function aBe(e,t=null,n=!1){return qv(e,"euclidean",t,n)}var iL=ie({euclideanNorm_:aBe});function sBe(e){let t={x:U(e,"x","exp")};return re.runKernel(of,t)}var ea=ie({exp_:sBe});function oBe(e,t=0){let n=U(e,"x","expandDims","string_or_numeric");X(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},i={dim:t};return re.runKernel(sv,r,i)}var gi=ie({expandDims_:oBe});function lBe(e){let t={x:U(e,"x","expm1")};return re.runKernel(lf,t)}var aL=ie({expm1_:lBe});function uBe(e,t){let n=U(e,"x","tile","string_or_numeric");X(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},i={reps:t};return re.runKernel(Ad,r,i)}var ls=ie({tile_:uBe});function cBe(e,t,n,r="float32"){t==null&&(t=e);let i=Gt([e,t],r),a=e<=t?e:t;for(let o=0;o<a;++o)i.set(1,o,o);let s=le(i.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return ls(gi(s,0),[n[0],1,1]);if(n.length===2)return ls(gi(gi(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return ls(gi(gi(gi(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var M$=ie({eye_:cBe});function dBe(e){let t={x:U(e,"x","floor","float32")};return re.runKernel(uf,t)}var Kv=ie({floor_:dBe});function pBe(e,t,n=0,r=0){let i=U(e,"x","gather"),a=U(t,"indices","gather","int32"),s={x:i,indices:a},o={axis:n,batchDims:r};return re.runKernel(lv,s,o)}var Zv=ie({gather_:pBe});function hBe(e,t){let n=U(e,"a","greater","string_or_numeric"),r=U(t,"b","greater","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(cv,i)}var Ca=ie({greater_:hBe});function fBe(e,t){let n=U(e,"a","greaterEqual","string_or_numeric"),r=U(t,"b","greaterEqual","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(pf,i)}var Ju=ie({greaterEqual_:fBe});function mBe(e){let t={input:U(e,"input","imag")};return re.runKernel(b$,t)}var Dw=ie({imag_:mBe});function gBe(e){let t={x:U(e,"x","isFinite")};return re.runKernel(ff,t)}var sL=ie({isFinite_:gBe});function yBe(e){let t={x:U(e,"x","isInf")};return re.runKernel(mf,t)}var oL=ie({isInf_:yBe});function vBe(e){let t={x:U(e,"x","isNaN")};return re.runKernel(gf,t)}var lL=ie({isNaN_:vBe});function bBe(e,t=.2){let n={x:U(e,"x","leakyRelu")},r={alpha:t};return re.runKernel(yf,n,r)}var Lw=ie({leakyRelu_:bBe});function wBe(e,t){let n=U(e,"a","less","string_or_numeric"),r=U(t,"b","less","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(dv,i)}var ly=ie({less_:wBe});function xBe(e,t){let n=U(e,"a","lessEqual","string_or_numeric"),r=U(t,"b","lessEqual","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(pv,i)}var Ld=ie({lessEqual_:xBe});function dte(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return re.runKernel(hv,{},r)}function _Be(e,t=5,n=1,r=1,i=.5){let a=U(e,"x","localResponseNormalization");X(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),X(ry(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=a,o=!1;a.rank===3&&(o=!0,s=le(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let l={x:s},u={depthRadius:t,bias:n,alpha:r,beta:i},c=re.runKernel(wf,l,u);return o?le(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var uL=ie({localResponseNormalization_:_Be});function kBe(e){let t={x:U(e,"x","log","float32")};return re.runKernel(vf,t)}var ys=ie({log_:kBe});function SBe(e){let t={x:U(e,"x","log1p")};return re.runKernel(bf,t)}var Fw=ie({log1p_:SBe});function CBe(e){return X(ud(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=U(t,"x","tf.grad","string_or_numeric"),i=n!=null?U(n,"dy","tf.grad"):null;return re.tidy(()=>{let{value:a,grads:s}=re.gradients(()=>e(r),[r],i);return i!=null&&ka(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),A$(s),s[0]})}}function IBe(e){return X(ud(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{X(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=g1(t,"args","tf.grads","string_or_numeric"),i=n!=null?U(n,"dy","tf.grads"):null;return re.tidy(()=>{let{value:a,grads:s}=re.gradients(()=>e(...r),r,i);return i!=null&&ka(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),A$(s),s})}}function $Be(e){return X(ud(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{X(t instanceof zt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),X(n==null||n instanceof zt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:i}=re.gradients(()=>e(t),[t],n);return A$(r),{grad:r[0],value:i}}}function TBe(e){return X(ud(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{X(Array.isArray(t)&&t.every(i=>i instanceof zt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),X(n==null||n instanceof zt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=re.gradients(()=>e(...t),t,n);return n!=null&&ka(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),A$(r.grads),r}}function pte(e,t){X(ud(e),()=>"The f passed in variableGrads(f) must be a function"),X(t==null||Array.isArray(t)&&t.every(u=>u instanceof oh),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let u in re.registeredVariables)t.push(re.registeredVariables[u])}let r=n?t.filter(u=>!u.trainable):null,i=t.length;t=t.filter(u=>u.trainable),X(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let a=!0,{value:s,grads:o}=re.gradients(e,t,null,a);X(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),X(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return t.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:s,grads:l}}function Hl(e){return re.customGrad(e)}function A$(e){if(e.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function NBe(e){let t={x:U(e,"x","neg")};return re.runKernel(wv,t)}var Xn=ie({neg_:NBe});function EBe(e){let t={x:U(e,"x","softplus")};return re.runKernel(Kf,t)}var im=ie({softplus_:EBe});function OBe(e){let t=U(e,"x","logSigmoid");return Hl(n=>({value:Xn(im(Xn(n))),gradFunc:r=>se(r,co(Xn(n)))}))(t)}var cL=ie({logSigmoid_:OBe});function PBe(e,t){let n=U(e,"a","sub"),r=U(t,"b","sub");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Qf,i)}var Ve=ie({sub_:PBe});function MBe(e,t=-1){let n=U(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Hl((r,i)=>{let a=Ds(r,t,!0),s=Ve(r,a),o=Ve(Ae(s,"float32"),ys(ot(ea(s),t,!0)));return i([o]),{value:o,gradFunc:(l,u)=>{let[c]=u,d=!0,p=ea(c);return Ve(l,se(ot(l,t,d),p))}}})(n)}var R$=ie({logSoftmax_:MBe});function ABe(e,t=null,n=!1){let r=U(e,"x","logSumExp"),i=bo(t,r.shape),a=Ds(r,i,!0),s=Ve(r,a),o=ea(s),l=ot(o,i),u=ys(l),c=we(le(a,u.shape),u);if(n){let d=fh(c.shape,i);return le(c,d)}return c}var zw=ie({logSumExp_:ABe});function RBe(e,t){let n=U(e,"a","logicalAnd","bool"),r=U(t,"b","logicalAnd","bool");Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(fv,i)}var mo=ie({logicalAnd_:RBe});function DBe(e){let t={x:U(e,"x","logicalNot","bool")};return re.runKernel(mv,t)}var Bw=ie({logicalNot_:DBe});function LBe(e,t){let n=U(e,"a","logicalOr","bool"),r=U(t,"b","logicalOr","bool");Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(gv,i)}var D$=ie({logicalOr_:LBe});function FBe(e,t){let n=U(e,"a","logicalXor","bool"),r=U(t,"b","logicalXor","bool");return Vn(n.shape,r.shape),mo(D$(e,t),Bw(mo(e,t)))}var dL=ie({logicalXor_:FBe}),x_=2147483648;function zBe(e,t,n="left"){let r=U(e,"sortedSequence","searchSorted"),i=U(t,"values","searchSorted"),a=r.shape[r.shape.length-1],s=i.shape[i.shape.length-1],o=le(r,[-1,a]),l=le(i,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Pn(l.shape)>=x_)throw new Error(`values tensor size must less than ${x_}`);if(o.shape[1]>=x_)throw new Error(`trailing dim_size must less than ${x_} for int32 output type, was ${o.shape[1]}`);let u={sortedSequence:o,values:l},c={side:n};return re.runKernel(Pv,u,c)}var L$=ie({searchSorted_:zBe});function hte(e,t){return L$(e,t,"left")}function BBe(e,t,n,r,i){let a=U(e,"x","maxPool"),s=1,o=a,l=!1;a.rank===3&&(l=!0,o=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),X(Xl(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Sa("maxPool",r,i);let u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},d=re.runKernel(kf,u,c);return l?le(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var ci=ie({maxPool_:BBe});function WBe(e,t=[1,1,1],n,r,i,a="NDHWC"){let s=U(e,"x","maxPool3d"),o=s,l=!1;s.rank===4&&(l=!0,o=le(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),X(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),X(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Sa("maxPool3d",r,i);let u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},d=re.runKernel(vv,u,c);return l?le(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var pL=ie({maxPool3d_:WBe});function VBe(e,t,n,r,i=!1){let a={x:U(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},o=re.runKernel(gw,a,s);return{result:o[0],indexes:o[1]}}var fte=ie({maxPoolWithArgmax_:VBe});function jBe(e,t){let n=U(e,"a","maximum"),r=U(t,"b","maximum");[n,r]=br(n,r),n.dtype==="bool"&&(n=Ae(n,"int32"),r=Ae(r,"int32")),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(_f,i)}var Jl=ie({maximum_:jBe});function HBe(e,t=null,n=!1){let r={x:U(e,"x","mean")},i={axis:t,keepDims:n};return re.runKernel(Sf,r,i)}var gr=ie({mean_:HBe});function yr(e,t="float32"){if(ks(e),t==="complex64"){let r=yr(e,"float32"),i=yr(e,"float32");return Lu(r,i)}let n=u$(Pn(e),t);return re.makeTensor(n,e,t)}function Aa(e,t="float32"){if(ks(e),t==="complex64"){let r=Aa(e,"float32"),i=yr(e,"float32");return Lu(r,i)}let n=vD(Pn(e),t);return re.makeTensor(n,e,t)}function mte(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=U(e,"x","meshgrid",e instanceof zt?e.dtype:"float32");if(t===void 0)return[r];let i=U(t,"y","meshgrid",t instanceof zt?t.dtype:"float32"),a=Pn(r.shape),s=Pn(i.shape);return n==="xy"?(r=le(r,[1,-1]),i=le(i,[-1,1]),[jt(Aa([s,1],r.dtype),r),jt(i,Aa([1,a],i.dtype))]):(r=le(r,[-1,1]),i=le(i,[1,-1]),[jt(r,Aa([1,s],r.dtype)),jt(Aa([a,1],i.dtype),i)])}function UBe(e,t){let n=U(e,"a","minimum"),r=U(t,"b","minimum");[n,r]=br(n,r),n.dtype==="bool"&&(n=Ae(n,"int32"),r=Ae(r,"int32")),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(If,i)}var fd=ie({minimum_:UBe});function GBe(e,t,n){X(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=U(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");X(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let i=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)X(t[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),X(t[o][0]>=0&&t[o][0]<=r.shape[o]-i&&t[o][1]>=0&&t[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);let a={paddings:t,mode:n},s={x:r};return re.runKernel($f,s,a)}var hL=ie({mirrorPad_:GBe});function qBe(e,t){let n=U(e,"a","mod"),r=U(t,"b","mod");[n,r]=br(n,r);let i={a:n,b:r};return re.runKernel(Tf,i)}var fL=ie({mod_:qBe});function KBe(e,t=null,n=!1){e=U(e,"x","moments");let r=bo(t,e.shape),i=gr(e,r,n),a=i.shape;n||(a=fh(i.shape,r));let s=zn(Ve(Ae(e,"float32"),le(i,a))),o=gr(s,r,n);return{mean:i,variance:o}}var Ww=ie({moments_:KBe});function ZBe(e,t,n,r){let i=U(t,"data","multiRNNCell"),a=g1(n,"c","multiRNNCell"),s=g1(r,"h","multiRNNCell"),o=i,l=[];for(let d=0;d<e.length;d++){let p=e[d](o,a[d],s[d]);l.push(p[0]),l.push(p[1]),o=p[1]}let u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}var gte=ie({multiRNNCell_:ZBe});function XBe(e,t,n,r=!1){let i=U(e,"logits","multinomial"),a=i.size,s=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let o={logits:s===1?le(i,[1,-1]):i},l={numSamples:t,seed:n,normalized:r},u=re.runKernel(bv,o,l);return s===1?le(u,[u.size]):u}var yte=ie({multinomial_:XBe});function JBe(e,t){let n=U(e,"a","notEqual","string_or_numeric"),r=U(t,"b","notEqual","string_or_numeric");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r};return re.runKernel(xv,i)}var mh=ie({notEqual_:JBe});function YBe(e,t,n=1,r=0,i="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let a={indices:U(e,"indices","oneHot","int32")},s={dtype:i,depth:t,onValue:n,offValue:r};return re.runKernel(Ef,a,s)}var uy=ie({oneHot_:YBe});function QBe(e){let t={x:U(e,"x","onesLike")};return re.runKernel(Cv,t)}var vs=ie({onesLike_:QBe});function e4e(e,t){let n=U(e,"v1","outerProduct"),r=U(t,"v2","outerProduct");X(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let i=le(n,[-1,1]),a=le(r,[1,-1]);return jt(i,a)}var vte=ie({outerProduct_:e4e});function t4e(e,t,n=0){let r=U(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:t,constantValue:n},a={x:r};return re.runKernel(Of,a,i)}var sl=ie({pad_:t4e});function n4e(e,t,n=0){return X(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),sl(e,[t],n)}var bte=ie({pad1d_:n4e});function r4e(e,t,n=0){return X(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),sl(e,t,n)}var wte=ie({pad2d_:r4e});function i4e(e,t,n=0){return X(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),sl(e,t,n)}var xte=ie({pad3d_:i4e});function a4e(e,t,n=0){return X(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),sl(e,t,n)}var _te=ie({pad4d_:a4e});function s4e(e,t,n){let r=U(e,"x","spaceToBatchND");X(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),X(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),X(r.shape.reduce((s,o,l)=>l>0&&l<=t.length?s&&(o+n[l-1][0]+n[l-1][1])%t[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let i={x:r},a={blockShape:t,paddings:n};return re.runKernel(Rv,i,a)}var Vw=ie({spaceToBatchND_:s4e});function o4e(e,t,n,r,i,a,s){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");let o=U(e,"x","maxPool"),l=o,u=!1;o.rank===3&&(u=!0,l=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(Xl(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);let c=Jee(l.shape,t,a,i,r),d=[c.dilationHeight,c.dilationWidth],p;r==="same"?p=u4e([c.filterHeight,c.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=l4e([c.inHeight,c.inWidth],d,p),y=h?r:"valid",v=h?l:Vw(l,d,m),b=(n==="avg"?()=>Xu(v,t,a,y,s):()=>ci(v,t,a,y,s))(),_=h?b:Aw(b,d,g);return u?le(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function l4e(e,t,n){let r=n.map(c=>c[0]),i=n.map(c=>c[1]),a=e.concat(r,i),s=t.map((c,d)=>(c-a[d]%c)%c),o=i.map((c,d)=>c+s[d]),l=t.map((c,d)=>[r[d],o[d]]),u=t.map((c,d)=>[0,s[d]]);return[l,u]}function u4e(e,t){let n=e.map((a,s)=>a+(a-1)*(t[s]-1)).map(a=>a-1),r=n.map(a=>Math.floor(a/2)),i=n.map((a,s)=>a-r[s]);return n.map((a,s)=>[r[s],i[s]])}var mL=ie({pool_:o4e});function c4e(e,t){let n=U(e,"x","prelu"),r=U(t,"alpha","prelu"),i={x:n,alpha:r};return re.runKernel(Mf,i)}var jw=ie({prelu_:c4e});function d4e(e,t=null,n=!1){let r=U(e,"x","prod");r.dtype==="bool"&&(r=Ae(r,"int32"));let i={x:r},a={axis:t,keepDims:n};return re.runKernel(Af,i,a)}var gL=ie({prod_:d4e});function p4e(e,t,n,r){let i=e.map((c,d)=>U(c,`tensors${d}`,"raggedGather","int32")),a=U(t,"paramsDenseValues","raggedGather"),s=U(n,"indices","raggedGather","int32"),o={paramsNestedSplits:i,paramsDenseValues:a,indices:s},l={outputRaggedRank:r},u=re.runKernel(w$,o,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}var kte=ie({raggedGather_:p4e});function h4e(e,t,n){let r=U(e,"starts","raggedRange"),i=U(t,"limits","raggedRange",r.dtype),a=U(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:i,deltas:a},o=re.runKernel(x$,s);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}var Ste=ie({raggedRange_:h4e});function f4e(e,t,n,r,i){let a=U(e,"shape","raggedTensorToTensor","int32"),s=U(t,"values","raggedTensorToTensor"),o=U(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((d,p)=>U(d,`tensors${p}`,"raggedTensorToTensor","int32")),u={shape:a,values:s,defaultValue:o,rowPartitionTensors:l},c={rowPartitionTypes:i};return re.runKernel(_$,u,c)}var Cte=ie({raggedTensorToTensor_:f4e});function m4e(e,t,n){ks(e);let r=Pn(e),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let a=0;a<r;a++)i[a]=t();return re.makeTensor(i,e,n)}var Ite=ie({rand_:m4e}),yL=Od(o$()),$te={};Dt($te,{TEST_EPSILON_FLOAT16:()=>Tte,createVideoElement:()=>k4e,encodeStrings:()=>Nte,expectArrayBuffersEqual:()=>_4e,expectArraysClose:()=>y4e,expectArraysEqual:()=>b4e,expectNumbersClose:()=>w4e,expectPromiseToFail:()=>v4e,expectValuesInRange:()=>x4e,play:()=>S4e,testEpsilon:()=>vL});var g4e=.001,Tte=.1;function y4e(e,t,n){return n==null&&(n=vL()),HP(e,t,(r,i)=>bL(r,i,n))}function vL(){return re.backend.floatPrecision()===32?g4e:Tte}function HP(e,t,n){let r=!0;if((mi(e)||mi(t))&&(r=!1),mi(e)&&mi(t)&&(r=!0),r){let s=e.constructor.name,o=t.constructor.name;if(s!==o)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${o}`)}if(Array.isArray(e)&&Array.isArray(t)){let s=jl(e),o=jl(t);if(!Ku(s,o))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${o}]`)}let i=mi(e)?e:cd(e),a=mi(t)?t:cd(t);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.
Actual:   ${i}.
Expected: ${a}.`);for(let s=0;s<a.length;++s){let o=i[s],l=a[s];if(!n(o,l))throw new Error(`Arrays differ: actual[${s}] = ${o}, expected[${s}] = ${l}.
Actual:   ${i}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function v4e(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function b4e(e,t){let n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return Rc(e)||Rc(e[0])||Rc(t)||Rc(t[0])?HP(e,n,(r,i)=>r==i):HP(e,t,(r,i)=>bL(r,i,0))}function w4e(e,t,n){if(n==null&&(n=vL()),!bL(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function bL(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function x4e(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function _4e(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function Nte(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?Nte(n):e[t]=Ew(n)}return e}function k4e(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function S4e(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var wL=class{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let a=i||Math.random();this.random=yL.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let e,t,n=!1;for(;!n;){let r,i,a;do r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i;while(a>=1||a===0);let s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},C4e=class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let i=r||Math.random();this.randu=yL.alea(i.toString()),this.randn=new wL(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,i,a;for(;;){do r=this.randn.nextValue(),a=1+this.c*r;while(a<=0);if(a*=a*a,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<t||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},I4e=class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=n,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=yL.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function $4e(e,t,n=1,r="float32",i){if(ks(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let a=new C4e(t,n,r,i),s=Gt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}var Ete=ie({randomGamma_:$4e});function T4e(e,t=0,n=1,r,i){if(ks(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let a=new wL(t,n,r,!1,i),s=Gt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}var F$=ie({randomNormal_:T4e});function N4e(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return F$(e,0,1,t,n)}var Ote=ie({randomStandardNormal_:N4e});function E4e(e,t=0,n=1,r="float32",i){ks(e);let a=Gt(e,r),s=new I4e(t,n,null,i);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}var Fd=ie({randomUniform_:E4e});function O4e(e,t,n,r){return Fd(e,t,n,"int32",r)}var Pte=ie({randomUniformInt_:O4e});function gh(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let i={start:e,stop:t,step:n,dtype:r};return re.runKernel(yw,{},i)}function P4e(e){let t={input:U(e,"input","real")};return re.runKernel(k$,t)}var cy=ie({real_:P4e});function M4e(e){let t={x:U(e,"x","reciprocal")};return re.runKernel(Rf,t)}var xL=ie({reciprocal_:M4e});function A4e(e){let t={x:U(e,"x","relu")};return re.runKernel(Df,t)}var On=ie({relu_:A4e});function R4e(e){let t={x:U(e,"x","relu6")};return re.runKernel(zf,t)}var z$=ie({relu6_:R4e});function D4e(e,t){let n={x:U(e,"x","reverse")},r={dims:t};return re.runKernel(Bf,n,r)}var Ws=ie({reverse_:D4e});function L4e(e){let t=U(e,"x","reverse");return X(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Ws(t,0)}var Mte=ie({reverse1d_:L4e});function F4e(e,t){let n=U(e,"x","reverse");return X(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Ws(n,t)}var Ate=ie({reverse2d_:F4e});function z4e(e,t){let n=U(e,"x","reverse");return X(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Ws(n,t)}var Rte=ie({reverse3d_:z4e});function B4e(e,t){let n=U(e,"x","reverse");return X(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Ws(n,t)}var Dte=ie({reverse4d_:B4e});function W4e(e){let t={x:U(e,"x","round")};return re.runKernel(Wf,t)}var B$=ie({round_:W4e});function V4e(e){let t={x:U(e,"x","rsqrt","float32")};return re.runKernel(Vf,t)}var W$=ie({rsqrt_:V4e});function j4e(e){let t={x:U(e,"x","selu")};return re.runKernel(jf,t)}var V$=ie({selu_:j4e});function H4e(e,t,n,r,i,a=[1,1],s="NHWC"){let o=U(e,"x","separableConv2d"),l=U(t,"depthwiseFilter","separableConv2d"),u=U(n,"pointwiseFilter","separableConv2d"),c=o,d=!1;if(o.rank===3&&(d=!0,c=le(o,[1,o.shape[0],o.shape[1],o.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");X(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),X(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),X(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),X(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),X(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let p=l.shape[2],h=l.shape[3];X(u.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${u.shape[2]}.`);let m=rm(c,l,r,i,s,a),g=ya(m,u,1,"valid",s);return d?le(g,[g.shape[1],g.shape[2],g.shape[3]]):g}var Xv=ie({separableConv2d_:H4e});async function U4e(e,t){let n=U(e,"x","setdiff1d"),r=U(t,"y","setdiff1d");X(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),X(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),X(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let i=await n.data(),a=await r.data(),s=new Set(a),o=0;for(let c=0;c<i.length;c++)s.has(i[c])||o++;let l=new Br([o],n.dtype),u=new Br([o],"int32");for(let c=0,d=0;c<i.length;c++)s.has(i[c])||(l.values[d]=i[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}var Lte=U4e;function G4e(e){let t={x:U(e,"x","sign")};return re.runKernel(Gf,t)}var _L=ie({sign_:G4e});function q4e(e){let t={x:U(e,"x","sin","float32")};return re.runKernel(Hf,t)}var j$=ie({sin_:q4e});function K4e(e){let t={x:U(e,"x","sinh")};return re.runKernel(Uf,t)}var H$=ie({sinh_:K4e});function Z4e(e,t,n){let r=U(e,"x","slice1d");return X(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),nn(r,[t],[n])}var Hw=ie({slice1d_:Z4e});function X4e(e,t,n){let r=U(e,"x","slice2d");return X(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),nn(r,t,n)}var U$=ie({slice2d_:X4e});function J4e(e,t,n){let r=U(e,"x","slice3d");return X(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),nn(r,t,n)}var Jv=ie({slice3d_:J4e});function Y4e(e,t,n){let r=U(e,"x","slice4d");return X(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),nn(r,t,n)}var dy=ie({slice4d_:Y4e});function Q4e(e,t=-1){let n=U(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},i={dim:t};return re.runKernel(Jf,r,i)}var zd=ie({softmax_:Q4e});function e5e(e){X(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return re.runKernel(y$,t)}var Uw=ie({fft_:e5e});function t5e(e){X(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return re.runKernel(v$,t)}var py=ie({ifft_:t5e});function n5e(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let i=le(e,[n,t]);r=py(i)}else{let i=[n,2*(t-1)],a=le(cy(e),[n,t]),s=le(Dw(e),[n,t]),o=Ws(nn(a,[0,1],[n,t-2]),1),l=se(Ws(nn(s,[0,1],[n,t-2]),1),gt(-1)),u=Wn([a,o],1),c=Wn([s,l],1),d=le(Lu(u,c),[i[0],i[1]]);r=py(d)}if(r=cy(r),e.rank===3&&e.shape[0]!==0){let i=r,a=e.shape[0];r=le(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}var G$=ie({irfft_:n5e});function r5e(e,t,n=0){let r={x:U(e,"x","split")},i={numOrSizeSplits:t,axis:n};return re.runKernel(Dv,r,i)}var Fa=ie({split_:r5e});function i5e(e,t){X(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],r=e.size/n,i;if(t!=null&&t<n){let m=e.shape.map(y=>0),g=e.shape.map(y=>y);g[e.shape.length-1]=t,i=nn(e,m,g),n=t}else if(t!=null&&t>n){let m=e.shape.map(g=>g);m[e.shape.length-1]=t-n,i=Wn([e,yr(m)],e.shape.length-1),n=t}else i=e;let a=an(i),s=le(Lu(i,a),[r,n]),o=Uw(s),l=Math.floor(n/2)+1,u=cy(o),c=Dw(o),d=Fa(u,[l,n-l],u.shape.length-1),p=Fa(c,[l,n-l],c.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,le(Lu(d[0],p[0]),h)}var Gw=ie({rfft_:i5e});function a5e(e,t){let n=U(e,"a","squaredDifference"),r=U(t,"b","squaredDifference");[n,r]=br(n,r),Vn(n.shape,r.shape);let i={a:n,b:r},a={};return re.runKernel(Yf,i,a)}var q$=ie({squaredDifference_:a5e});function s5e(e,t){let n=U(e,"x","squeeze","string_or_numeric");return le(n,cee(n.shape,t).newShape)}var Bd=ie({squeeze_:s5e});function o5e(e,t=0){let n=g1(e,"tensors","stack","string_or_numeric");X(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&X(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,i={axis:t};return re.runKernel(Iv,r,i)}var Wr=ie({stack_:o5e});function l5e(e,t=0){let n={x:U(e,"x","step")},r={alpha:t};return re.runKernel(Rd,n,r)}var am=ie({step_:l5e});function u5e(e,t,n,r,i=0,a=0,s=0,o=0,l=0){let u={x:U(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return re.runKernel(zv,u,c)}var kL=ie({stridedSlice_:u5e});function c5e(e){let t={x:U(e,"x","tan","float32")};return re.runKernel(em,t)}var SL=ie({tan_:c5e});function $n(e,t){Dh(e);let n=jl(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Dd(e,null,n,t)}function Bl(e,t,n){if(Dh(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=jl(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Dd(e,t,r,n)}function K$(e,t,n){if(Dh(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=jl(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Dd(e,t,r,n)}function md(e,t,n){if(Dh(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=jl(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Dd(e,t,r,n)}function Fte(e,t,n){if(Dh(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=jl(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Dd(e,t,r,n)}function zte(e,t,n){if(Dh(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=jl(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Dd(e,t,r,n)}var Z$={};Dt(Z$,{calculateShapes:()=>Bte,validateInput:()=>X$,validateUpdateShape:()=>CL});function CL(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(a+` update.rank != ${i+e.length-r}`);for(let s=0;s<i;++s)if(n.shape[s]!==t.shape[s])throw new Error(a+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-i;++s)if(n.shape[s+i]!==e[s+r])throw new Error(a+` updates.shape[${s+i}] (${n.shape[s+i]}) != shape[${s+i}] (${e[s+i]})`)}function X$(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}CL(n,t,e)}function Bte(e,t,n){let r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length,s=1;for(let d=i;d<a;++d)s*=n[d];let o=i<1?1:i,l=Pn(t.shape)/o,u=[...Vy(n.slice(0,i)),1],c=Pn(n);return{sliceRank:i,numUpdates:l,sliceSize:s,strides:u,outputSize:c}}function d5e(e,t,n){let r=U(e,"tensor","tensorScatterupdate"),i=U(t,"indices","tensorScatterupdate","int32"),a=U(n,"updates","tensorScatterupdate");if(X$(a,i,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);let s={tensor:r,indices:i,updates:a},o={};return re.runKernel(Ov,s,o)}var Wte=ie({tensorScatterUpdate_:d5e});function p5e(e,t=1,n=!0){let r=U(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);let a={x:r},s={k:t,sorted:n},[o,l]=re.runKernel(Bv,a,s);return{values:o,indices:l}}var IL=ie({topk_:p5e});function h5e(e,t=0,n=1,r,i){if(ks(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let a=new wL(t,n,r,!0,i),s=Gt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}var J$=ie({truncatedNormal_:h5e});function f5e(e,t=0){let n=U(e,"x","unique","string_or_numeric");X(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},i={axis:t},[a,s]=re.runKernel(Iw,r,i);return{values:a,indices:s}}var $L=ie({unique_:f5e});function m5e(e,t,n){let r=U(e,"x","unsortedSegmentSum"),i=U(t,"segmentIds","unsortedSegmentSum","int32");X(ry(n),()=>"numSegments must be of dtype int");let a={x:r,segmentIds:i},s={numSegments:n};return re.runKernel($w,a,s)}var Y$=ie({unsortedSegmentSum_:m5e});function g5e(e,t=0){let n=U(e,"x","unstack","string_or_numeric");X(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},i={axis:t};return re.runKernel(Vv,r,i)}var $r=ie({unstack_:g5e});function Vte(e,t){return L$(e,t,"right")}function TL(e,t=!0,n,r){return re.makeVariable(e,t,n,r)}function jte(e,t){let n=[];for(let a=0;a<t.length;a++)t[a]&&n.push(a);let r=Gt(e,"int32"),i=Gt([n.length,e.length],"int32");for(let a=0;a<n.length;a++){let s=r.indexToLoc(n[a]),o=a*e.length;i.values.set(s,o)}return i.toTensor()}async function y5e(e){let t=U(e,"condition","whereAsync","bool"),n=await t.data(),r=jte(t.shape,n);return e!==t&&t.dispose(),r}var NL=y5e;async function v5e(e,t,n){let r=U(e,"tensor","boolMask"),i=U(t,"mask","boolMask","bool"),a=n==null?0:n,s=i.rank,o=r.shape;X(s>0,()=>"mask cannot be scalar"),ka(o.slice(a,a+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=a;g<a+s;g++)l*=o[g];let u=o.slice(0,a).concat([l],o.slice(a+s)),c=le(r,u),d=le(i,[-1]),p=await NL(d),h=Bd(p,[1]),m=Zv(c,h,a);return e!==r&&r.dispose(),t!==i&&i.dispose(),h.dispose(),c.dispose(),d.dispose(),p.dispose(),m}var Hte=v5e;function b5e(e,t,n){let r=U(e,"x","transpose");if(t==null&&(t=r.shape.map((s,o)=>o).reverse()),X(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(s=>{X(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let i={x:r},a={perm:t};return r.dtype==="complex64"?ue(()=>{let s=cy(r),o=Dw(r);return s=re.runKernel(Cu,{x:s},a),o=re.runKernel(Cu,{x:o},a),n&&(o=Xn(o)),Lu(s,o)}):re.runKernel(Cu,i,a)}var Ht=ie({transpose_:b5e});function w5e(e,t,n,r,i=!0){let a=U(e,"v","movingAverage"),s=U(t,"x","movingAverage"),o=U(n,"decay","movingAverage");Eee(a,s),X(Ku(a.shape,s.shape),()=>"Shape mismatch in v and x");let l=gt(1),u=Ve(l,o),c=se(Ve(s,a),u);if(i){X(r!=null,()=>"When using zeroDebias: true, step is required.");let d=U(r,"step","movingAverage");c=Qe(c,Ve(l,Fu(o,d)))}return we(a,c)}var Ute=ie({movingAverage_:w5e});function x5e(e,t,n){ks(n);let r=U(e,"indices","scatterND","int32"),i=U(t,"updates","scatterND");X$(i,r,n);let a={indices:r,updates:i},s={shape:n};return re.runKernel(Ev,a,s)}var Gte=ie({scatterND_:x5e});function _5e(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===i))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function k5e(e,t,n,r=0){ks(n);let i=U(e,"sparseIndices","sparseToDense","int32"),a=U(t,"sparseValues","sparseToDense","string_or_numeric"),s=U(r,"defaultValue","sparseToDense",a.dtype);_5e(i,a,n,s);let o={sparseIndices:i,sparseValues:a,defaultValue:s},l={outputShape:n};return re.runKernel(Fv,o,l)}var qte=ie({sparseToDense_:k5e});function S5e(e,t){let n=U(t,"indices","gatherND","int32"),r={params:U(e,"x","gatherND","string_or_numeric"),indices:n};return re.runKernel(uv,r)}var Kte=ie({gatherND_:S5e});function C5e(e,t){if(t==null)return e.shape.slice();if(Ku(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function I5e(e,t,n,r){let i=U(e,"x","dropout");if(X(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),X(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof zt?i.clone():i;let a=C5e(i,n),s=1-t,o=Qe(Kv(we(Fd(a,0,1,"float32",r),s)),s);return se(i,o)}var EL=ie({dropout_:I5e});function OL(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Q$(e,t,n){let r=1-e%2,i=new Float32Array(e);for(let a=0;a<e;++a){let s=2*Math.PI*a/(e+r-1);i[a]=t-n*Math.cos(s)}return $n(i,"float32")}async function $5e(e,t,n=1){let r=U(e,"predictions","inTopK"),i=U(t,"targets","inTopK");X(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),X(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),ka(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let a=r.shape[r.shape.length-1];X(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);let s=await r.data(),o=await i.data(),[l,u]=[s.length/a,a],c=dee("bool",l);for(let d=0;d<l;d++){let p=d*u,h=s.subarray(p,p+u),m=[];for(let g=0;g<h.length;g++)m.push({value:h[g],index:g});m.sort((g,y)=>y.value-g.value),c[d]=0;for(let g=0;g<n;g++)if(m[g].index===o[d]){c[d]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),ma(c,i.shape,"bool")}var Zte=$5e,hy={};Dt(hy,{conv2d:()=>E5e,depthwiseConv2d:()=>A5e,matMul:()=>D5e});function T5e(e,t,n,r,i,a="NHWC",s){let o=e;e.rank===3&&(o=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=le(t,[1,t.shape[0],t.shape[1],t.shape[2]])),X(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),X(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),X(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let u=a==="NHWC"?o.shape[3]:o.shape[1],c=a==="NHWC"?l.shape[3]:l.shape[1];X(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),X(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Sa("conv2dDerFilter",i,s);let d={x:o,dy:l},p={strides:r,pad:i,dataFormat:a,dimRoundingMode:s,filterShape:n};return re.runKernel(p$,d,p)}var PL=ie({conv2DBackpropFilter_:T5e});function eT(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return se(e,am(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function tT(e,t){let n=t,r=Vr(e.shape,t.shape);return r.length>0&&(n=ot(n,r)),le(n,e.shape)}function nT(e,t,n,r){if(t==="linear")return e;if(t==="relu")return On(e);if(t==="elu")return Gv(e);if(t==="relu6")return z$(e);if(t==="prelu")return jw(e,n);if(t==="leakyrelu")return Lw(e,r);if(t==="sigmoid")return co(e);throw new Error(`Unknown fused activation ${t}.`)}var rT=(e,t)=>!(e>0)||t==="linear";function N5e({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",rT(re.state.gradientDepth,l)===!1){X(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=ya(e,t,n,r,i,a,s);return o!=null&&($=we($,o)),nT($,l,u,c)}let d=U(e,"x","conv2d","float32"),p=U(t,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=le(d,[1,d.shape[0],d.shape[1],d.shape[2]])),X(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),X(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Sa("fused conv2d",r,s);let g=i==="NHWC"?h.shape[3]:h.shape[1];X(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),X(Xl(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let y=Mw(h.shape,p.shape,n,a,r,s),v;o!=null&&(v=U(o,"bias","fused conv2d"),[v]=br(v,d),i==="NHWC"?Vn(y.outShape,v.shape):(X(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),X(v.shape.length===0||v.shape[0]===y.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let b;if(u!=null){let $=u.shape;if(X($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)X($[0]===1||$[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${y.outChannels}).`);else if($.length===3)try{Vn($,y.outShape)}catch{let P=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(P)}b=U(u,"prelu weights","fused conv2d")}let _=($,N)=>{X(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[P,D,O,F]=N,E=eT($,O,l);X(hd(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);let z=KD(D.shape,E,P,n,r),q=PL(D,E,P.shape,n,r),K=[z,q];if(F!=null){let Z=tT(F,E);K.push(Z)}return K},k={x:h,filter:p,bias:v,preluActivationWeights:b},S={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return o==null?Hl(($,N,P)=>{let D=re.runKernel(ah,k,S);return P([N,$,D]),m&&(D=le(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:_}})(h,p):Hl(($,N,P,D)=>{let O=re.runKernel(ah,k,S);return D([N,$,O,P]),m&&(O=le(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:_}})(h,p,v)}var E5e=ie({fusedConv2d_:N5e});function O5e(e,t,n,r,i,a=[1,1],s){let o=e;e.rank===3&&(o=le(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={x:o,dy:l},c={strides:r,pad:i,dimRoundingMode:s,dilations:a,filterShape:n};return re.runKernel(h$,u,c)}var Xte=ie({depthwiseConv2dNativeBackpropFilter_:O5e});function P5e(e,t,n,r,i,a=[1,1],s){let o=t,l=!1;t.rank===3&&(l=!0,o=le(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={dy:o,filter:n},c={strides:r,pad:i,dimRoundingMode:s,dilations:a,inputShape:e},d=re.runKernel(f$,u,c);return l?le(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Jte=ie({depthwiseConv2dNativeBackpropInput_:P5e});function M5e({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(rT(re.state.gradientDepth,l)===!1){let S=rm(e,t,n,r,i,a,s);return o!=null&&(S=we(S,o)),nT(S,l,u,c)}let d=U(e,"x","depthwiseConv2d","float32"),p=U(t,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=le(d,[1,d.shape[0],d.shape[1],d.shape[2]])),X(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),X(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),X(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),a==null&&(a=[1,1]),X(Xl(n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Sa("fused depthwiseConv2d",r,s);let g=Mw(h.shape,p.shape,n,a,r,s,!0),y;o!=null&&(y=U(o,"bias","fused conv2d"),[y]=br(y,d),Vn(g.outShape,y.shape));let v;u!=null&&(v=U(u,"prelu weights","fused depthwiseConv2d"));let b=(S,$)=>{X(hd(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[N,P,D,O]=$,F=eT(S,D,l),E=Jte(P.shape,F,N,n,r,a,s),z=Xte(P,F,N.shape,n,r,a,s);if(O!=null){let q=tT(y,F);return[E,z,q]}return[E,z]},_={x:h,filter:p,bias:y,preluActivationWeights:v},k={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:c};return o==null?Hl((S,$,N)=>{let P=re.runKernel(sh,_,k);return N([$,S,P]),m&&(P=le(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:b}})(h,p):Hl((S,$,N,P)=>{let D=re.runKernel(sh,_,k);return P([$,S,D,N]),m&&(D=le(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:b}})(h,p,y)}var A5e=ie({fusedDepthwiseConv2d_:M5e});function R5e({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(rT(re.state.gradientDepth,a)===!1){let O=jt(e,t,n,r);return i!=null&&(O=we(O,i)),nT(O,a,s,o)}let l=U(e,"a","fused matMul"),u=U(t,"b","fused matMul");[l,u]=br(l,u);let c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],m=l.shape.slice(0,-2),g=u.shape.slice(0,-2),y=Pn(m),v=Pn(g);X(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);let b=Vn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,h]),_=n?le(l,[y,c,p]):le(l,[y,p,c]),k=r?le(u,[v,h,d]):le(u,[v,d,h]),S;i!=null&&(S=U(i,"bias","fused matMul"),[S]=br(S,l),Vn(b,S.shape));let $;s!=null&&($=U(s,"prelu weights","fused matMul"));let N=(O,F)=>{let[E,z,q,K]=F,Z=eT(le(O,q.shape),q,a),te,V;if(!n&&!r?(te=jt(Z,z,!1,!0),V=jt(E,Z,!0,!1)):!n&&r?(te=jt(Z,z,!1,!1),V=jt(Z,E,!0,!1)):n&&!r?(te=jt(z,Z,!1,!0),V=jt(E,Z,!1,!1)):(te=jt(z,Z,!0,!0),V=jt(Z,E,!0,!0)),i!=null){let ee=tT(K,Z);return[te,V,ee]}else return[te,V]},P={a:_,b:k,bias:S,preluActivationWeights:$},D={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:o};return i==null?Hl((O,F,E)=>{let z=re.runKernel(ih,P,D);return E([O,F,z]),{value:le(z,b),gradFunc:N}})(_,k):Hl((O,F,E,z)=>{let q=re.runKernel(ih,P,D);return z([O,F,q,E]),{value:le(q,b),gradFunc:N}})(_,k,S)}var D5e=ie({fusedMatMul_:R5e});function L5e(e){return Q$(e,.54,.46)}var F5e=ie({hammingWindow_:L5e});function z5e(e){return Q$(e,.5,.5)}var Yte=ie({hannWindow_:z5e});function B5e(e,t,n,r=!1,i=0){let a=0,s=[];for(;a+t<=e.size;)s.push(nn(e,a,t)),a+=n;if(r)for(;a<e.size;){let o=a+t-e.size,l=Wn([nn(e,a,t-o),ps([o],i)]);s.push(l),a+=n}return s.length===0?Bl([],[0,t]):le(Wn(s),[s.length,t])}var Qte=ie({frame_:B5e});function W5e(e,t,n,r,i=Yte){r==null&&(r=OL(t));let a=Qte(e,t,n),s=se(a,i(t));return Gw(s,r)}var V5e=ie({stft_:W5e});function j5e(e,t,n,r,i="bilinear",a=0){let s=U(e,"image","cropAndResize"),o=U(t,"boxes","cropAndResize","float32"),l=U(n,"boxInd","cropAndResize","int32"),u=o.shape[0];X(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),X(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),X(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),X(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),X(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),X(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);let c={image:s,boxes:o,boxInd:l},d={method:i,extrapolationValue:a,cropSize:r};return re.runKernel(nv,c,d)}var H5e=ie({cropAndResize_:j5e});function U5e(e){let t=U(e,"image","flipLeftRight","float32");X(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n={image:t};return re.runKernel(ov,n,{})}var G5e=ie({flipLeftRight_:U5e});function q5e(e){let t=U(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];X(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),X(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,ls(t,i)}var K5e=ie({grayscaleToRGB_:q5e});function Z5e(e){let t=U(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];X(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),X(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let i=t.dtype,a=Ae(t,"float32"),s=$n([.2989,.587,.114]),o;switch(t.rank){case 2:o=vp("ij,j->i",a,s);break;case 3:o=vp("ijk,k->ij",a,s);break;case 4:o=vp("ijkl,l->ijk",a,s);break;case 5:o=vp("ijklm,m->ijkl",a,s);break;case 6:o=vp("ijklmn,n->ijklm",a,s);break;default:throw new Error("Not a valid tensor rank.")}return o=gi(o,-1),Ae(o,i)}var X5e=ie({rgbToGrayscale_:Z5e});function J5e(e,t,n=0,r=.5){let i=U(e,"image","rotateWithOffset","float32");X(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let a={image:i},s={radians:t,fillValue:n,center:r};return re.runKernel(Hv,a,s)}var Y5e=ie({rotateWithOffset_:J5e});function Yv(e,t,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);let s=e.shape[0];return n=Math.min(n,s),X(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),X(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),X(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),X(t.rank===1,()=>"scores must be a 1D tensor"),X(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),X(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}function Q5e(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let a=U(e,"boxes","nonMaxSuppression","float32"),s=U(t,"scores","nonMaxSuppression","float32"),o=Yv(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return re.runKernel(_v,{boxes:a,scores:s},l)}var eWe=ie({nonMaxSuppression_:Q5e});function tWe(e,t,n){let r=nWe(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function nWe(e,t,n){return iWe(e,t,n||rWe)}function rWe(e,t){return e>t?1:e<t?-1:0}function iWe(e,t,n){let r=0,i=e.length,a=0,s=!1;for(;r<i;){a=r+(i-r>>>1);let o=n(t,e[a]);o>0?r=a+1:(i=a,s=!o)}return s?r:-r-1}function ene(e,t,n,r,i){return ML(e,t,n,r,i,0)}function tne(e,t,n,r,i,a){return ML(e,t,n,r,i,0,!1,a,!0)}function nne(e,t,n,r,i,a){return ML(e,t,n,r,i,a,!0)}function ML(e,t,n,r,i,a,s=!1,o=!1,l=!1){let u=[];for(let y=0;y<t.length;y++)t[y]>i&&u.push({score:t[y],boxIndex:y,suppressBeginIndex:0});u.sort(LH);let c=a>0?-.5/a:0,d=[],p=[];for(;d.length<n&&u.length>0;){let y=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:_}=y;if(v<i)break;let k=!1;for(let S=d.length-1;S>=_;--S){let $=aWe(e,b,d[S]);if($>=r){k=!0;break}if(y.score=y.score*sWe(r,c,$),y.score<=i)break}y.suppressBeginIndex=d.length,k||(y.score===v?(d.push(b),p.push(y.score)):y.score>i&&tWe(u,y,LH))}let h=d.length,m=n-h;o&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return s&&(g.selectedScores=p),l&&(g.validOutputs=h),g}function aWe(e,t,n){let r=e.subarray(t*4,t*4+4),i=e.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),h=(o-a)*(l-s),m=(d-u)*(p-c);if(h<=0||m<=0)return 0;let g=Math.max(a,u),y=Math.max(s,c),v=Math.min(o,d),b=Math.min(l,p),_=Math.max(v-g,0)*Math.max(b-y,0);return _/(h+m-_)}function sWe(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function LH(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function oWe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let a=U(e,"boxes","nonMaxSuppressionAsync"),s=U(t,"scores","nonMaxSuppressionAsync"),o=Yv(a,s,n,r,i);n=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;let l=await Promise.all([a.data(),s.data()]),u=l[0],c=l[1],{selectedIndices:d}=ene(u,c,n,r,i);return a!==e&&a.dispose(),s!==t&&s.dispose(),$n(d,"int32")}var lWe=oWe;function uWe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let s=U(e,"boxes","nonMaxSuppression"),o=U(t,"scores","nonMaxSuppression"),l=Yv(s,o,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;let u={boxes:s,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},d=re.runKernel(Sv,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}var cWe=ie({nonMaxSuppressionWithScore_:uWe});async function dWe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let s=U(e,"boxes","nonMaxSuppressionAsync"),o=U(t,"scores","nonMaxSuppressionAsync"),l=Yv(s,o,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;let u=await Promise.all([s.data(),o.data()]),c=u[0],d=u[1],{selectedIndices:p,selectedScores:h}=nne(c,d,n,r,i,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:$n(p,"int32"),selectedScores:$n(h)}}var pWe=dWe;function hWe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let s=U(e,"boxes","nonMaxSuppression"),o=U(t,"scores","nonMaxSuppression"),l=Yv(s,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:o},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:a},m=re.runKernel(kv,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var fWe=ie({nonMaxSuppressionPadded_:hWe});async function mWe(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let s=U(e,"boxes","nonMaxSuppressionAsync"),o=U(t,"scores","nonMaxSuppressionAsync"),l=Yv(s,o,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[p,h]=await Promise.all([s.data(),o.data()]),{selectedIndices:m,validOutputs:g}=tne(p,h,u,c,d,a);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:$n(m,"int32"),validOutputs:gt(g,"int32")}}var gWe=mWe;function yWe(e,t,n=!1,r=!1){let i=U(e,"images","resizeBilinear");X(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),X(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),X(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;i.rank===3&&(s=!0,a=le(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=re.runKernel(Ff,o,l);return s?le(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var rne=ie({resizeBilinear_:yWe});function vWe(e,t,n=!1,r=!1){let i=U(e,"images","resizeNearestNeighbor");X(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),X(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),X(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),X(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;i.rank===3&&(s=!0,a=le(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let o={images:a},l={alignCorners:n,halfPixelCenters:r,size:t},u=re.runKernel(Lf,o,l);return s?le(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var ine=ie({resizeNearestNeighbor_:vWe});function bWe(e,t="binary",n=!1,r=.5){let i=U(e,"image","threshold"),a=.2989,s=.587,o=.114,l=i.shape[0]*i.shape[1],u=se($n([r]),255),c,d,p,h;if(X(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),X(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),X(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),X(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),i.shape[2]===3){[c,d,p]=Fa(i,[1,1,1],-1);let g=se(c,a),y=se(d,s),v=se(p,o);h=we(we(g,y),v)}else h=e;if(t==="otsu"){let g=VD(Ae(B$(h),"int32"),ma([]),256);u=wWe(g,l)}let m=n?Ld(h,u):Ca(h,u);return Ae(se(m,255),"int32")}function wWe(e,t){let n=$n([-1]),r=$n([0]),i=$n([0]),a,s,o,l,u,c;for(let d=0;d<e.size-1;d++){a=nn(e,0,d+1),s=nn(e,d+1),u=Qe(ot(a),t),c=Qe(ot(s),t);let p=ot(se(a,gh(0,a.size)));o=Qe(p,ot(a));let h=ps(s.shape,a.size),m=we(gh(0,s.size),h),g=se(s,m);l=Qe(ot(g),ot(s));let y=Ve(o,l),v=Ve(o,l),b=se(u,c);i=se(se(b,y),v);let _=Ca(i,r);r=wi(_,i,r),n=wi(_,$n([d]),n)}return n}var xWe=ie({threshold_:bWe});function _We(e,t,n="nearest",r="constant",i=0,a){let s=U(e,"image","transform","float32"),o=U(t,"transforms","transform","float32");X(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),X(o.rank===2&&(o.shape[0]===s.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),X(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);let l={image:s,transforms:o},u={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return re.runKernel(Wv,l,u)}var kWe=ie({transform_:_We});function SWe(e,t,n){let r=U(e,"a","bandPart");X(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let i=r.shape,[a,s]=r.shape.slice(-2),o,l;typeof t=="number"?(X(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),X(t<=a,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${a}).`),o=U(t<0?a:t,"numLower","bandPart")):(X(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=wi(ly(t,0),a,fd(t,a))),typeof n=="number"?(X(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),X(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=U(n<0?s:n,"numUpper","bandPart")):(X(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=wi(ly(n,0),s,fd(n,s)));let u=le(gh(0,a,1,"int32"),[-1,1]),c=gh(0,s,1,"int32"),d=Ve(u,c),p=mo(Ld(d,o),Ju(d,Xn(l))),h=yr([a,s],r.dtype);return le(Wr($r(le(r,[-1,a,s])).map(m=>wi(p,m,h))),i)}var CWe=ie({bandPart_:SWe});function IWe(e){let t;if(Array.isArray(e)){t=!1,X(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=e[0].shape[0];for(let a=1;a<e.length;++a)X(e[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[a].shape[0]} vs. ${i})`)}else t=!0,e=Fa(e,e.shape[0],0).map(i=>Bd(i,[0]));X(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let i=0;i<e.length;++i)n.push(re.tidy(()=>{let a=r[i];if(i>0)for(let s=0;s<i;++s){let o=se(ot(se(n[s],a)),n[s]);a=Ve(a,o)}return Qe(a,qv(a,"euclidean"))}));return t?Wr(n,0):n}var $We=ie({gramSchmidt_:IWe});function TWe(e,t=!1){if(X(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return FH(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),r=$r(le(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];r.forEach(l=>{let[u,c]=FH(l,t);i.push(u),a.push(c)});let s=le(Wr(i,0),e.shape),o=le(Wr(a,0),e.shape);return[s,o]}}function FH(e,t=!1){return re.tidy(()=>{X(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],i=M$(n),a=zl(e),s=Bl([[1]],[1,1]),o=zl(s),l=n>=r?r:n;for(let u=0;u<l;++u){let c=a,d=o,p=i;[o,a,i]=re.tidy(()=>{let h=nn(a,[u,u],[n-u,1]),m=qv(h),g=nn(a,[u,u],[1,1]),y=wi(Ca(g,0),Bl([[-1]]),Bl([[1]])),v=Ve(g,se(y,m)),b=Qe(h,v);b.shape[0]===1?o=zl(s):o=Wn([s,nn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let _=Xn(Qe(jt(y,v),m)),k=nn(a,[u,0],[n-u,r]),S=se(_,o),$=Ht(o);if(u===0)a=Ve(k,jt(S,jt($,k)));else{let D=Ve(k,jt(S,jt($,k)));a=Wn([nn(a,[0,0],[u,r]),D],0)}let N=Ht(S),P=nn(i,[0,u],[n,i.shape[1]-u]);if(u===0)i=Ve(P,jt(jt(P,o),N));else{let D=Ve(P,jt(jt(P,o),N));i=Wn([nn(i,[0,0],[n,u]),D],1)}return[o,a,i]}),Rt([c,d,p])}return!t&&n>r&&(i=nn(i,[0,0],[n,r]),a=nn(a,[0,0],[r,r])),[i,a]})}var NWe=ie({qr_:TWe}),ha;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ha||(ha={}));function EWe(e,t,n=ha.SUM_BY_NONZERO_WEIGHTS){let r=U(e,"losses","computeWeightedLoss"),i=null;t!=null&&(i=U(t,"weights","computeWeightedLoss"));let a=i==null?r:se(r,i);if(n===ha.NONE)return a;if(n===ha.SUM)return ot(a);if(n===ha.MEAN){if(i==null)return gr(a);{let s=r.size/i.size,o=Qe(ot(a),ot(i));return s>1?Qe(o,gt(s)):o}}if(n===ha.SUM_BY_NONZERO_WEIGHTS){if(i==null)return Qe(ot(a),gt(r.size));{let s=se(i,Aa(r.shape)),o=Ae(ot(mh(s,gt(0))),"float32");return Qe(ot(a),o)}}throw Error(`Unknown reduction: ${n}`)}var Yu=ie({computeWeightedLoss_:EWe});function OWe(e,t,n,r=ha.SUM_BY_NONZERO_WEIGHTS){let i=U(e,"labels","absoluteDifference"),a=U(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=U(n,"weights","absoluteDifference")),ka(i.shape,a.shape,"Error in absoluteDifference: ");let o=Dr(Ve(i,a));return Yu(o,s,r)}var PWe=ie({absoluteDifference_:OWe});function MWe(e,t,n,r,i=ha.SUM_BY_NONZERO_WEIGHTS){let a=U(e,"labels","cosineDistance"),s=U(t,"predictions","cosineDistance"),o=null;r!=null&&(o=U(r,"weights","cosineDistance")),ka(a.shape,s.shape,"Error in cosineDistance: ");let l=gt(1),u=Ve(l,ot(se(a,s),n,!0));return Yu(u,o,i)}var AWe=ie({cosineDistance_:MWe});function RWe(e,t,n,r=ha.SUM_BY_NONZERO_WEIGHTS){let i=U(e,"labels","hingeLoss"),a=U(t,"predictions","hingeLoss"),s=null;n!=null&&(s=U(n,"weights","hingeLoss")),ka(i.shape,a.shape,"Error in hingeLoss: ");let o=gt(1);i=Ve(se(gt(2),i),o);let l=On(Ve(o,se(i,a)));return Yu(l,s,r)}var DWe=ie({hingeLoss_:RWe});function LWe(e,t,n,r=1,i=ha.SUM_BY_NONZERO_WEIGHTS){let a=U(e,"labels","huberLoss"),s=U(t,"predictions","huberLoss"),o=null;n!=null&&(o=U(n,"weights","huberLoss")),ka(a.shape,s.shape,"Error in huberLoss: ");let l=gt(r),u=Dr(Ve(s,a)),c=fd(u,l),d=Ve(u,c),p=we(se(gt(.5),zn(c)),se(l,d));return Yu(p,o,i)}var FWe=ie({huberLoss_:LWe});function zWe(e,t,n,r=1e-7,i=ha.SUM_BY_NONZERO_WEIGHTS){let a=U(e,"labels","logLoss"),s=U(t,"predictions","logLoss"),o=null;n!=null&&(o=U(n,"weights","logLoss")),ka(a.shape,s.shape,"Error in logLoss: ");let l=gt(1),u=gt(r),c=Xn(se(a,ys(we(s,u)))),d=se(Ve(l,a),ys(we(Ve(l,s),u))),p=Ve(c,d);return Yu(p,o,i)}var BWe=ie({logLoss_:zWe});function WWe(e,t,n,r=ha.SUM_BY_NONZERO_WEIGHTS){let i=U(e,"labels","meanSquaredError"),a=U(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=U(n,"weights","meanSquaredError")),ka(i.shape,a.shape,"Error in meanSquaredError: ");let o=q$(i,a);return Yu(o,s,r)}var VWe=ie({meanSquaredError_:WWe});function jWe(e,t){let n=U(e,"labels","sigmoidCrossEntropyWithLogits"),r=U(t,"logits","sigmoidCrossEntropyWithLogits");ka(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=On(r),a=se(r,n),s=Fw(ea(Xn(Dr(r))));return we(Ve(i,a),s)}function HWe(e,t,n,r=0,i=ha.SUM_BY_NONZERO_WEIGHTS){let a=U(e,"multiClassLabels","sigmoidCrossEntropy"),s=U(t,"logits","sigmoidCrossEntropy"),o=null;if(n!=null&&(o=U(n,"weights","sigmoidCrossEntropy")),ka(a.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let u=gt(r),c=gt(1),d=gt(.5);a=we(se(a,Ve(c,u)),se(d,u))}let l=jWe(a,s);return Yu(l,o,i)}var UWe=ie({sigmoidCrossEntropy_:HWe});function GWe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Hl((r,i,a)=>{let s=zw(i,[n],!0),o=Ve(Ae(i,"float32"),s);a([r,o]);let l=Xn(se(o,r));return{value:ot(l,[n]),gradFunc:(u,c)=>{let[d,p]=c,h=fh(u.shape,[n]);return[se(le(u,h),Ve(Ae(d,"float32"),ea(p))),se(le(u,h),Ve(ea(p),Ae(d,"float32")))]}}})(e,t)}function qWe(e,t,n,r=0,i=ha.SUM_BY_NONZERO_WEIGHTS){let a=U(e,"onehotLabels","softmaxCrossEntropy"),s=U(t,"logits","softmaxCrossEntropy"),o=null;if(n!=null&&(o=U(n,"weights","softmaxCrossEntropy")),ka(a.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let u=gt(r),c=gt(1),d=gt(a.shape[1]);a=we(se(a,Ve(c,u)),Qe(u,d))}let l=GWe(a,s);return Yu(l,o,i)}var KWe=ie({softmaxCrossEntropy_:qWe});function ZWe(e,t,n,r){let i=U(e,"indices","sparseFillEmptyRows","int32"),a=U(t,"values","sparseFillEmptyRows"),s=U(n,"denseShape","sparseFillEmptyRows","int32"),o=U(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);let l={indices:i,values:a,denseShape:s,defaultValue:o},u=re.runKernel(vw,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}var XWe=ie({sparseFillEmptyRows_:ZWe});function JWe(e,t,n){let r=U(e,"inputIndices","sparseReshape","int32"),i=U(t,"inputShape","sparseReshape","int32"),a=U(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);let s={inputIndices:r,inputShape:i,newShape:a},o=re.runKernel(Lv,s);return{outputIndices:o[0],outputShape:o[1]}}var YWe=ie({sparseReshape_:JWe});function QWe(e,t,n){let r=U(e,"data","sparseSegmentMean"),i=U(t,"indices","sparseSegmentMean","int32"),a=U(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);let s={data:r,indices:i,segmentIds:a};return re.runKernel(bw,s)}var eVe=ie({sparseSegmentMean_:QWe});function tVe(e,t,n){let r=U(e,"data","sparseSegmentSum"),i=U(t,"indices","sparseSegmentSum","int32"),a=U(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);let s={data:r,indices:i,segmentIds:a};return re.runKernel(ww,s)}var nVe=ie({sparseSegmentSum_:tVe});function rVe(e,t,n,r,i,a,s,o){let l=U(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let u=U(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let c={separator:n,nGramWidths:r,leftPad:i,rightPad:a,padWidth:s,preserveShortSequences:o},d={data:l,dataSplits:u},p=re.runKernel(kw,d,c);return{nGrams:p[0],nGramsSplits:p[1]}}var iVe=ie({stringNGrams_:rVe});function aVe(e,t,n=!0){let r=U(e,"input","stringSplit","string"),i=U(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let a={skipEmpty:n},s={input:r,delimiter:i},o=re.runKernel(Sw,s,a);return{indices:o[0],values:o[1],shape:o[2]}}var sVe=ie({stringSplit_:aVe});function oVe(e,t){let n=U(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return re.runKernel(Cw,i,r)}var lVe=ie({stringToHashBucketFast_:oVe});function uVe(e,t,n,r=!0){let i=U(e,"input","staticRegexReplace","string"),a={pattern:t,rewrite:n,replaceGlobal:r};return re.runKernel(_w,{x:i},a)}var cVe=ie({staticRegexReplace_:uVe}),ane={fft:Uw,ifft:py,rfft:Gw,irfft:G$},sne={hammingWindow:F5e,hannWindow:Yte,frame:Qte,stft:V5e},Ns={flipLeftRight:G5e,grayscaleToRGB:K5e,resizeNearestNeighbor:ine,resizeBilinear:rne,rgbToGrayscale:X5e,rotateWithOffset:Y5e,cropAndResize:H5e,nonMaxSuppression:eWe,nonMaxSuppressionAsync:lWe,nonMaxSuppressionWithScore:cWe,nonMaxSuppressionWithScoreAsync:pWe,nonMaxSuppressionPadded:fWe,nonMaxSuppressionPaddedAsync:gWe,threshold:xWe,transform:kWe},AL={bandPart:CWe,gramSchmidt:$We,qr:NWe},one={absoluteDifference:PWe,computeWeightedLoss:Yu,cosineDistance:AWe,hingeLoss:DWe,huberLoss:FWe,logLoss:BWe,meanSquaredError:VWe,sigmoidCrossEntropy:UWe,softmaxCrossEntropy:KWe},lne={sparseFillEmptyRows:XWe,sparseReshape:YWe,sparseSegmentMean:eVe,sparseSegmentSum:nVe},une={stringNGrams:iVe,stringSplit:sVe,stringToHashBucketFast:lVe,staticRegexReplace:cVe},$e={};Dt($e,{Serializable:()=>cne,SerializationMap:()=>dne,getRegisteredName:()=>pVe,registerClass:()=>pne});var dVe=new Map,UP=new Map,cne=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},dne=class eg{constructor(){this.classNameMap={}}static getMap(){return eg.instance==null&&(eg.instance=new eg),eg.instance}static register(t){eg.getMap().classNameMap[t.className]=[t,t.fromConfig]}};function pne(e,t,n){X(e.className!=null,()=>"Class being registered does not have the static className property defined."),X(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),X(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);let r=n,i=t+">"+r;return dne.register(e),dVe.set(i,e),UP.set(e,i),e}function pVe(e){return UP.has(e)?UP.get(e):e.className}var Qu=class extends cne{minimize(e,t=!1,n){let{value:r,grads:i}=this.computeGradients(e,n);if(n!=null){let a=n.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(a)}else this.applyGradients(i);return Rt(i),t?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return pte(e,t)}dispose(){this.iterations_!=null&&Rt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:gt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Qu,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var RL=class extends Qu{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=re.registeredVariables[t],i=!1;this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:ue(()=>an(r).variable(i))}),this.accumulatedUpdates[n]==null&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:ue(()=>an(r).variable(i))});let a=Array.isArray(e)?e[n].tensor:e[t];if(a==null)return;let s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;ue(()=>{let l=we(se(s,this.rho),se(zn(a),1-this.rho)),u=se(Qe(Di(we(o,this.epsilon)),Di(we(s,this.epsilon))),a),c=we(se(o,this.rho),se(zn(u),1-this.rho));s.assign(l),o.assign(c);let d=we(se(u,-this.learningRate),r);r.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Rt(this.accumulatedGrads.map(e=>e.variable)),Rt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},DL=class extends Qu{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=re.registeredVariables[t];this.accumulatedGrads[n]==null&&(this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:ue(()=>ps(r.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(i==null)return;let a=this.accumulatedGrads[n].variable;ue(()=>{let s=we(a,zn(i));a.assign(s);let o=we(se(Qe(i,Di(we(s,re.backend.epsilon()))),-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Rt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulatedGrads=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},LL=class extends Qu{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ue(()=>{this.accBeta1=gt(t).variable(),this.accBeta2=gt(n).variable()}),r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);ue(()=>{let n=Ve(1,this.accBeta1),r=Ve(1,this.accBeta2);t.forEach((i,a)=>{let s=re.registeredVariables[i],o=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:ue(()=>an(s).variable(o))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:ue(()=>an(s).variable(o))});let l=Array.isArray(e)?e[a].tensor:e[i];if(l==null)return;let u=this.accumulatedFirstMoment[a].variable,c=this.accumulatedSecondMoment[a].variable,d=we(se(u,this.beta1),se(l,1-this.beta1)),p=we(se(c,this.beta2),se(zn(l),1-this.beta2)),h=Qe(d,n),m=Qe(p,r);u.assign(d),c.assign(p);let g=we(se(Qe(h,we(Di(m),this.epsilon)),-this.learningRate),s);s.assign(g)}),this.accBeta1.assign(se(this.accBeta1,this.beta1)),this.accBeta2.assign(se(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Rt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Rt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),ue(()=>{this.accBeta1.assign(Fu(this.beta1,this.iterations_+1)),this.accBeta2.assign(Fu(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},FL=class extends Qu{static get className(){return"Adamax"}constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ue(()=>{this.iteration=gt(0).variable(),this.accBeta1=gt(t).variable()}),r==null&&(this.epsilon=re.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(n=>n.name):Object.keys(e);ue(()=>{let n=Ve(1,this.accBeta1),r=Qe(-this.learningRate,we(se(this.iteration,this.decay),1));t.forEach((i,a)=>{let s=re.registeredVariables[i],o=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:an(s).variable(o)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:an(s).variable(o)});let l=Array.isArray(e)?e[a].tensor:e[i];if(l==null)return;let u=this.accumulatedFirstMoment[a].variable,c=this.accumulatedWeightedInfNorm[a].variable,d=we(se(u,this.beta1),se(l,1-this.beta1)),p=se(c,this.beta2),h=Dr(l),m=Jl(p,h);u.assign(d),c.assign(m);let g=we(se(Qe(r,n),Qe(d,we(m,this.epsilon))),s);s.assign(g)}),this.iteration.assign(we(this.iteration,1)),this.accBeta1.assign(se(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Rt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Rt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},iT=class extends Qu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(r==null)return;let i=re.registeredVariables[t];ue(()=>{let a=we(se(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Yr(gt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}},zL=class extends iT{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=gt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=re.registeredVariables[t];this.accumulations[n]==null&&(this.accumulations[n]={originalName:`${t}/momentum`,variable:ue(()=>an(r).variable(!1))});let i=this.accumulations[n].variable,a=Array.isArray(e)?e[n].tensor:e[t];a!=null&&ue(()=>{let s,o=we(se(this.m,i),a);this.useNesterov?s=we(se(this.c,we(a,se(o,this.m))),r):s=we(se(this.c,o),r),i.assign(o),r.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Rt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=!1;this.accumulations=e.map(n=>({originalName:n.name,variable:n.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},BL=class extends Qu{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,r==null&&(this.epsilon=re.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(t=>t.name):Object.keys(e)).forEach((t,n)=>{let r=re.registeredVariables[t],i=!1;this.accumulatedMeanSquares[n]==null&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:ue(()=>an(r).variable(i))}),this.accumulatedMoments[n]==null&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:ue(()=>an(r).variable(i))}),this.accumulatedMeanGrads[n]==null&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:ue(()=>an(r).variable(i))});let a=Array.isArray(e)?e[n].tensor:e[t];if(a==null)return;let s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;ue(()=>{let l=we(se(s,this.decay),se(zn(a),1-this.decay));if(this.centered){let u=this.accumulatedMeanGrads[n].variable,c=we(se(u,this.decay),se(a,1-this.decay)),d=Qe(se(a,this.learningRate),Di(Ve(l,we(zn(c),this.epsilon)))),p=we(se(o,this.momentum),d);s.assign(l),u.assign(c),o.assign(p);let h=Ve(r,p);r.assign(h)}else{let u=we(se(s,this.decay),se(zn(a),1-this.decay)),c=we(se(o,this.momentum),Qe(se(a,this.learningRate),Di(we(u,this.epsilon))));s.assign(u),o.assign(c);let d=Ve(r,c);r.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Rt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Rt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Rt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,t*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},hVe=[RL,DL,LL,FL,zL,BL,iT];function fVe(){for(let e of hVe)pne(e)}var Oi={};Dt(Oi,{CompositeArrayBuffer:()=>Zu,browserFiles:()=>xVe,browserHTTPRequest:()=>$Ve,concatenateArrayBuffers:()=>tze,copyModel:()=>kze,decodeWeights:()=>Fee,decodeWeightsStream:()=>Bee,encodeWeights:()=>ZFe,fromMemory:()=>NVe,fromMemorySync:()=>yne,getLoadHandlers:()=>uze,getModelArtifactsForJSON:()=>$D,getModelArtifactsForJSONSync:()=>Vee,getModelArtifactsInfoForJSON:()=>Pw,getSaveHandlers:()=>lze,getWeightSpecs:()=>zP,http:()=>VL,isHTTPScheme:()=>qP,listModels:()=>xze,loadWeights:()=>kVe,moveModel:()=>Sze,registerLoadRouter:()=>oze,registerSaveRouter:()=>sze,removeModel:()=>_ze,weightsLoaderFactory:()=>fne,withSaveHandler:()=>EVe,withSaveHandlerSync:()=>OVe});var mVe="model",gVe=".json",yVe=".weights.bin";function zH(e){return new Promise(t=>setTimeout(t)).then(e)}var hI=class GP{constructor(t){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(GP.URL_SCHEME)&&(t=t.slice(GP.URL_SCHEME.length)),(t==null||t.length===0)&&(t=mVe),this.modelJsonFileName=t+gVe,this.weightDataFileName=t+yVe}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let n=Zu.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Wee(t,i),s=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=s,await zH(()=>o.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){let l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await zH(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Pw(t)}}}};hI.URL_SCHEME="downloads://";var vVe=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=r=>{let i=JSON.parse(r.target.result),a=i.modelTopology;if(a==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}let s=$D(i,o=>this.loadWeights(o));e(s)},n.onerror=r=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let a of e)t.push(...a.weights),n.push(...a.paths);let r=this.checkManifestAndWeightFiles(e),i=n.map(a=>this.loadWeightsFile(a,r[a]));return Promise.all(i).then(a=>[t,a])}loadWeightsFile(e,t){return new Promise((n,r)=>{let i=new FileReader;i.onload=a=>{let s=a.target.result;n(s)},i.onerror=a=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(i=>DH(i.name)),r={};for(let i of e)i.paths.forEach(a=>{let s=DH(a);if(t.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),n.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);r[a]=this.weightsFiles[n.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}},bVe=e=>fe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(hI.URL_SCHEME)?wVe(e.slice(hI.URL_SCHEME.length)):null;Bs.registerSaveRouter(bVe);function wVe(e="model"){return new hI(e)}function xVe(e){return new vVe(e)}function BH(e,t,n,r){s(e),n=n==null?0:n,r=r==null?1:r,o(n,r);let i=0,a=l=>(l.then(u=>{let c=n+ ++i/e.length*(r-n);return t(c),u}),l);function s(l){X(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){X(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),X(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),X(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(a))}async function hne(e,t){t==null&&(t={});let n=t.fetchFunc==null?fe().platform.fetch:t.fetchFunc,r=e.map(a=>n(a,t.requestInit,{isBinary:!0})),i=(t.onProgress==null?await Promise.all(r):await BH(r,t.onProgress,0,.5)).map(a=>a.arrayBuffer());return t.onProgress==null?await Promise.all(i):await BH(i,t.onProgress,.5,1)}function _Ve(e,t){var n;let r=t.fetchFunc==null?fe().platform.fetch:t.fetchFunc,i=0,a;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async s=>{for(var o;i<e.length;){a||(a=(await r(e[i],t.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:u}=await a.read();if(l){i++,a=void 0,(o=t.onProgress)===null||o===void 0||o.call(t,i/e.length);continue}s.enqueue(u);return}s.close()}})}async function kVe(e,t="",n,r){return fne(i=>hne(i,{requestInit:r}))(e,t,n)}function fne(e){return async(t,n="",r)=>{let i=t.map(()=>!1),a={},s=r!=null?r.map(()=>!1):[],o=[];if(t.forEach((h,m)=>{let g=0;h.weights.forEach(y=>{let v="quantization"in y?y.quantization.dtype:y.dtype,b=lh[v]*Pn(y.shape),_=()=>{i[m]=!0,a[m]==null&&(a[m]=[]),a[m].push({manifestEntry:y,groupOffset:g,sizeBytes:b})};r!=null?r.forEach((k,S)=>{k===y.name&&(_(),s[S]=!0)}):_(),o.push(y.name),g+=b})}),!s.every(h=>h)){let h=r.filter((m,g)=>!s[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}let l=i.reduce((h,m,g)=>(m&&h.push(g),h),[]),u=[];l.forEach(h=>{t[h].paths.forEach(m=>{let g=n+(n.endsWith("/")?"":"/")+m;u.push(g)})});let c=await e(u),d={},p=0;return l.forEach(h=>{let m=t[h].paths.length,g=new Zu(c.slice(p,p+m));a[h].forEach(y=>{let v=g.slice(y.groupOffset,y.groupOffset+y.sizeBytes),b=Fee(v,[y.manifestEntry]);for(let _ in b)d[_]=b[_]}),p+=m}),d}}var SVe="application/octet-stream",CVe="application/json",WL=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(X(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=fe().platform.fetch,X(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&X(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=Wee(e,n);if(t.body.append("model.json",new Blob([JSON.stringify(r)],{type:CVe}),"model.json"),e.weightData!=null){let a=Zu.join(e.weightData);t.body.append("model.weights.bin",new Blob([a],{type:SVe}),"model.weights.bin")}let i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:Pw(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){let e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let n=t.modelTopology,r=t.weightsManifest;if(n==null&&r==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let e=await this.loadModelJSON();return $D(e,t=>this.loadWeights(t))}async loadStream(){let e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=zP(e.weightsManifest),r=()=>_Ve(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:r})}async getWeightUrls(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=IVe(t),i=this.weightPathPrefix||n,a=[],s=[];for(let o of e)for(let l of o.paths)this.weightUrlConverter!=null?s.push(this.weightUrlConverter(l)):a.push(i+l+r);return this.weightUrlConverter&&a.push(...await Promise.all(s)),a}async loadWeights(e){let t=await this.getWeightUrls(e),n=zP(e),r=await hne(t,this.loadOptions);return[n,r]}};WL.URL_SCHEME_REGEX=/^https?:\/\//;function IVe(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}function qP(e){return e.match(WL.URL_SCHEME_REGEX)!=null}var mne=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>qP(r)):n=qP(e),n)return VL(e,t)}return null};Bs.registerSaveRouter(mne);Bs.registerLoadRouter(mne);function VL(e,t){return new WL(e,t)}function $Ve(e,t){return VL(e,t)}var xE=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},gne=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},TVe=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function NVe(e,t,n,r){let i=arguments;return new TVe(yne(...i))}function yne(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new xE(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xE({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new xE({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function EVe(e){return new gne(e)}function OVe(e){return new gne(e)}var vne={};Dt(vne,{confusionMatrix:()=>MVe});function PVe(e,t,n){let r=U(e,"labels","confusionMatrix"),i=U(t,"predictions","confusionMatrix");X(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),X(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),X(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),X(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),X(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let a=uy(Ae(r,"int32"),n),s=uy(Ae(i,"int32"),n),o=Ht(a),l=jt(o,s);return Ae(l,"int32")}var MVe=ie({confusionMatrix_:PVe}),qw={};Dt(qw,{draw:()=>WVe,fromPixels:()=>VVe,fromPixelsAsync:()=>FVe,toPixels:()=>BVe});var sp,WH=!1;function bne(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,a=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(f1(lI,re.backendName)!=null){let p={pixels:e},h={numChannels:t};return re.runKernel(lI,p,h)}let[l,u]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],c;if(s)c=e.getContext("2d").getImageData(0,0,l,u).data;else if(r||n)c=e.data;else if(a||i||o){if(sp==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")sp=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else sp=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});sp.canvas.width=l,sp.canvas.height=u,sp.drawImage(e,0,0,l,u),c=sp.getImageData(0,0,l,u).data}let d;if(t===4)d=new Int32Array(c);else{let p=l*u;d=new Int32Array(p*t);for(let h=0;h<p;h++)for(let m=0;m<t;++m)d[h*t+m]=c[h*4+m]}return K$(d,[u,l,t],"int32")}function AVe(e){return e!=null&&e.data instanceof Uint8Array}function RVe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function DVe(e){return e!=null&&e.width!==0&&e.height!==0}function LVe(e){return RVe()&&!(e instanceof ImageBitmap)&&DVe(e)&&!AVe(e)}async function FVe(e,t=3){let n=null;if(fe().getBool("WRAP_TO_IMAGEBITMAP")&&LVe(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return bne(n,t)}function wne(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function zVe(e){let t=(e==null?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}async function BVe(e,t){let n=U(e,"img","toPixels");if(!(e instanceof zt)){let u=n;n=Ae(u,"int32"),u.dispose()}wne(n);let[r,i]=n.shape.slice(0,2),a=n.rank===2?1:n.shape[2],s=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let u=0;u<r*i;++u){let c=[0,0,0,255];for(let p=0;p<a;p++){let h=s[u*a+p];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);a===1?(c[0]=h*o,c[1]=h*o,c[2]=h*o):c[p]=h*o}let d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(t!=null){WH||f1(m$,re.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),WH=!0),t.width=i,t.height=r;let u=t.getContext("2d"),c=new ImageData(l,i,r);u.putImageData(c,0,0)}return n!==e&&n.dispose(),l}function WVe(e,t,n){let r=U(e,"img","draw");if(!(e instanceof zt)){let s=r;r=Ae(s,"int32"),s.dispose()}wne(r),zVe(n==null?void 0:n.imageOptions);let i={image:r},a={canvas:t,options:n};re.runKernel(m$,i,a)}var VVe=ie({fromPixels_:bne}),jL={};Dt(jL,{prepareAndValidate:()=>xne});function xne(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(Pn(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let i=t.shape,a=i[i.length-1],s=1;for(let d=0;d<i.length-1;++d)s*=i[d];let o=e.shape,l=i.slice();l.pop();let u=1;for(let d=a;d<n;++d)u*=o[d],l.push(o[d]);let c=[...Vy(e.shape).map(d=>d/u),1].slice(0,a);return[l,s,u,c]}var ti={};Dt(ti,{assertParamsValid:()=>HVe,computeFlatOffset:()=>ZVe,computeOutShape:()=>GVe,getNormalizedAxes:()=>qVe,isSliceContinous:()=>KVe,maskToAxes:()=>UVe,parseSliceParams:()=>Ene,sliceInfo:()=>XVe,startForAxis:()=>Tne,startIndicesWithElidedDims:()=>Cne,stopForAxis:()=>Nne,stopIndicesWithElidedDims:()=>Ine,stridesForAxis:()=>$ne,stridesWithElidedDims:()=>_ne});var KP=-2,jVe=-1;function HVe(e,t,n){let r=e.shape.length;X(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),X(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)X(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function UVe(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function GVe(e,t,n){let r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function _ne(e,t,n,r){let i=[...e];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[t]=1:(i.splice(t,0,1),i.pop());return i}function kne(e,t,n){return n<=e?n:n-(t-1)}function Sne(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function qVe(e,t,n,r,i,a,s,o,l){let u=e.length,c=new Array(u),d=new Array(u),p=new Array(u);if(t.length&&n>0){let h=t[0],m=n+1;c=Cne(s,h,m,r,e),d=Ine(o,h,m,i,e),p=_ne(a,h,m,e)}else for(let h=0;h<u;h++)c[h]=Tne(s,r,a,e,h,l),d[h]=Nne(o,i,a,e,h,l),p[h]=$ne(a,h,l);return{begin:c,end:d,strides:p}}function Cne(e,t,n,r,i){let a=[...i],s=Sne(n,t);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=0;else{let l=kne(t,n,o),u=r[l];e&1<<l&&(u=0),a[o]=u}return a}function Ine(e,t,n,r,i){let a=[...i],s=Sne(n,t);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{let l=kne(t,n,o),u=r[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),a[o]=u}for(let o=0;o<a.length;o++){let l=i[o];a[o]<0&&(a[o]+=l),a[o]=p1(0,a[o],i[o])}return a}function $ne(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function Tne(e,t,n,r,i,a){let s=t[i],o=n[i]||1;(e&1<<i||a&1<<i||s==null)&&(o>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[i];return s<0&&(s+=l),s=p1(0,s,l-1),s}function Nne(e,t,n,r,i,a){let s=t[i],o=n[i]||1;(e&1<<i||a&1<<i||s==null)&&(o>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[i];return s<0&&(s+=l),o>0?s=p1(0,s,l):s=p1(-1,s,l-1),s}function KVe(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function ZVe(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ene(e,t,n){let r,i=e.shape.length;typeof t=="number"?r=[t,...new Array(i-1).fill(0)]:t.length<i?r=t.concat(new Array(i-t.length).fill(0)):r=t.slice(),r.forEach(s=>{X(s!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((s,o)=>s>=0?s:(X(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),e.shape[o]-r[o])),[r,a]}function XVe(e,t,n,r,i,a,s,o,l){let u;if(r==null?(u=new Array(t.length),u.fill(1)):u=r,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1,d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)c&&1<<b&o&&d.numAddAxisAfterEllipsis++,1<<b&s&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};JVe(d,p);let h=!0,m=!0,g=!0,y=[],v=[];for(let b=0;b<e.length;++b){if(p.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);let _=!!(p.shrinkAxisMask&1<<b),k=e[b];if(k===-1){y.push(_?1:-1);continue}let S=[p.beginMask&1<<b,p.endMask&1<<b],$=[p.strides[b]>0?0:-1,p.strides[b]>0?k:k-1];if(_&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[b]===1;let N=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(_){let F=p.begin[b]<0?k+p.begin[b]:p.begin[b];if(p.begin[b]=F,p.end[b]=p.begin[b]+1,F<0||F>=k)throw Error(`slice index ${p.begin[b]} of dimension ${b} out of bounds.`)}else p.begin[b]=VH(p.begin[b],0,p.strides[b],k,S,$),p.end[b]=VH(p.end[b],1,p.strides[b],k,S,$);let O=p.strides[b]===1&&p.begin[b]===0&&p.end[b]===k;h=h&&O,m=m&&(b===0&&p.strides[b]===1||O)}else h=h&&p.strides[b]===1&&N,m=m&&(b===0&&p.strides[b]===1||N);let P,D=!1;if(p.beginValid&&p.endValid?(P=p.end[b]-p.begin[b],D=!0):_?(P=1,D=!0):N&&k>=0&&(p.strides[b]<0?P=-k:P=k,D=!0),D){let O;P===0||P<0!=p.strides[b]<0?O=0:O=Math.trunc(P/p.strides[b])+(P%p.strides[b]!==0?1:0),y.push(O)}else y.push(-1)}for(let b=0;b<p.finalShapeGatherIndices.length;++b){let _=p.finalShapeGatherIndices[b];_>=0?v.push(y[_]):_===KP&&v.push(1)}return{finalShapeSparse:v.filter((b,_)=>p.finalShapeGatherIndices[_]!==KP),finalShape:v,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function JVe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(KP),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(jVe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function VH(e,t,n,r,i,a){if(i[t])return n>0?a[t]:a[t+1&1];{let s=e<0?r+e:e;return s<a[0]?a[0]:s>a[1]?a[1]:s}}var YVe="4.16.0",One=class{static sgd(e){return new iT(e)}static momentum(e,t,n=!1){return new zL(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new BL(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new LL(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new RL(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new FL(e,t,n,r,i)}static adagrad(e,t=.1){return new DL(e,t)}},fp=One,QVe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function HL(){return new Promise(e=>QVe(()=>e()))}var W={};Dt(W,{ERF_A1:()=>f6e,ERF_A2:()=>m6e,ERF_A3:()=>g6e,ERF_A4:()=>y6e,ERF_A5:()=>v6e,ERF_P:()=>h6e,PARALLELIZE_THRESHOLD:()=>UL,RowPartitionType:()=>kl,SELU_SCALE:()=>Mne,SELU_SCALEALPHA:()=>Pne,applyActivation:()=>nT,assertAndGetBroadcastShape:()=>Vn,assertAxesAreInnerMostDims:()=>X3e,assertParamsConsistent:()=>e6e,assignToTypedArray:()=>S6e,axesAreInnerMostDims:()=>nL,calculateShapes:()=>Bte,checkEinsumDimSizes:()=>E6e,checkPadOnDimRoundingMode:()=>Sa,combineLocations:()=>ote,combineRaggedTensorToTensorShapes:()=>n6e,complexWithEvenIndex:()=>x6e,complexWithOddIndex:()=>_6e,computeConv2DInfo:()=>Mw,computeConv3DInfo:()=>Yee,computeDefaultPad:()=>LD,computeDilation2DInfo:()=>Kze,computeOptimalWindowSize:()=>s6e,computeOutAndReduceShapes:()=>lte,computeOutShape:()=>t6e,computePool2DInfo:()=>Jee,computePool3DInfo:()=>Zze,convertConv2DDataFormat:()=>Qee,decodeEinsumEquation:()=>T6e,eitherStridesOrDilationsAreOne:()=>Xl,expandShapeToKeepDim:()=>fh,exponent:()=>I6e,exponents:()=>C6e,fromStringArrayToUint8:()=>J6e,fromUint8ToStringArray:()=>X6e,getAxesPermutation:()=>ute,getBroadcastDims:()=>ate,getComplexWithIndex:()=>k6e,getEinsumComputePath:()=>O6e,getEinsumPermutation:()=>N6e,getFusedBiasGradient:()=>tT,getFusedDyActivation:()=>eT,getImageCenter:()=>o6e,getInnerMostAxes:()=>J3e,getPermuted:()=>u6e,getRaggedRank:()=>i6e,getReductionAxes:()=>Vr,getReshaped:()=>l6e,getReshapedPermuted:()=>c6e,getRowPartitionTypesHelper:()=>r6e,getSliceBeginCoords:()=>d6e,getSliceSize:()=>p6e,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>R6e,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>D6e,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>L6e,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>B6e,getSparseReshapeInputOutputMismatchErrorMessage:()=>V6e,getSparseReshapeInputOutputMultipleErrorMessage:()=>W6e,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>F6e,getSparseReshapeNegativeOutputDimErrorMessage:()=>z6e,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>G6e,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>j6e,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>H6e,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>U6e,getUndoAxesPermutation:()=>rL,isIdentityPermutation:()=>P6e,log:()=>sFe,mergeRealAndImagArrays:()=>b6e,prepareAndValidate:()=>xne,prepareSplitSize:()=>A6e,segment_util:()=>Ane,shouldFuse:()=>rT,slice_util:()=>ti,splitRealAndImagArrays:()=>w6e,stridesOrDilationsArePositive:()=>ph,tupleValuesAreOne:()=>hd,upcastType:()=>zs,validateDefaultValueShape:()=>a6e,validateInput:()=>X$,validateUpdateShape:()=>CL,warn:()=>Ec});function e6e(e,t){let n=e[0].length;e.forEach((i,a)=>{X(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),X(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((i,a)=>{for(let s=0;s<n;s++)X(s===t||i[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function t6e(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var kl;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(kl||(kl={}));function n6e(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){let a=n[i],s=r[r.length-n.length+i],o=r[s];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${a} but shape[${i+e}] = ${o}`)}else r[s]=a}return r}function r6e(e){let t={FIRST_DIM_SIZE:kl.FIRST_DIM_SIZE,VALUE_ROWIDS:kl.VALUE_ROWIDS,ROW_LENGTHS:kl.ROW_LENGTHS,ROW_SPLITS:kl.ROW_SPLITS,ROW_LIMITS:kl.ROW_LIMITS,ROW_STARTS:kl.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function i6e(e){return e.length===0?0:e[0]===kl.FIRST_DIM_SIZE?e.length-1:e.length}function a6e(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){let a=e[i],s=t[i+1];if(a>=0&&s>=0&&a!==1&&a!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${a} but ragged tensor input.flatValues.shape[${i-e.length}] = ${s}`)}}var UL=30;function s6e(e){return e<=UL?e:oI(e,Math.floor(Math.sqrt(e)))}function o6e(e,t,n){let r=n*(typeof e=="number"?e:e[0]),i=t*(typeof e=="number"?e:e[1]);return[r,i]}function l6e(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);let a=t.length;for(let s=0;s<a;++s)i=i.concat([e[s+1]/t[s],t[s]]);i=i.concat(e.slice(a+1))}return i}function u6e(e,t,n=!0){let r=[];if(n){r.push(t);for(let i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{let i=[],a=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?a.push(s):i.push(s);r.push(...i),r.push(0),r.push(...a)}return r}function c6e(e,t,n,r=!0){let i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let a=1;a<e.length;++a)a<=t.length?r?i.push(t[a-1]*e[a]):i.push(e[a]/t[a-1]):i.push(e[a]);return i}function d6e(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function p6e(e,t,n){let r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}var Pne=1.7580993408473768,Mne=1.0507009873554805,h6e=.3275911,f6e=.254829592,m6e=-.284496736,g6e=1.421413741,y6e=-1.453152027,v6e=1.061405429;function b6e(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function w6e(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function x6e(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function _6e(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function k6e(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function S6e(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function C6e(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){let a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function I6e(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}var _E="->",$6e=/->/g,jH=",",HH="...";function T6e(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace($6e,"").length)/_E.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${_E}").`);let[r,i]=e.split(_E);X(r.indexOf(HH)===-1,()=>`The ellipsis notation ("${HH}") is not supported yet.`);let a=r.split(jH),s=a.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let p=0;p<i.length;++p){let h=i[p];if(!a.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);o.indexOf(h)===-1&&o.push(h)}for(let p=0;p<r.length;++p){let h=r[p];o.indexOf(h)===-1&&h!==jH&&o.push(h)}let l=new Array(a.length);for(let p=0;p<s;++p){if(new Set(a[p].split("")).size!==a[p].length)throw new Error(`Found duplicate axes in input component ${a[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<a[p].length;++h)l[p].push(o.indexOf(a[p][h]))}let u=o.length,c=i.length,d=[];for(let p=c;p<u;++p)d.push(p);return{allDims:o,summedDims:d,idDims:l}}function N6e(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;let r=[];for(let i=0;i<e;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function E6e(e,t,n){let r=new Array(e);for(let i=0;i<n.length;++i){let a=n[i].shape;for(let s=0;s<t[i].length;++s)r[t[i][s]]===void 0?r[t[i][s]]=a[s]:X(r[t[i][s]]===a[s],()=>`Expected dimension ${r[t[i][s]]} at axis ${s} of input shaped ${JSON.stringify(a)}, but got dimension ${a[s]}`)}}function O6e(e,t){let n=e,r=[],i=0;e.length===0&&n.push(-1),i=e.length+1;for(let s=0;s<i;++s)r.push([]);let a=[];for(let s=0;s<n.length;++s){let o=n[s],l=M6e(t,o);for(let u of l)a.indexOf(u)===-1&&(r[s].push(u),a.push(u))}return{path:n,steps:r}}function P6e(e){return e.every((t,n)=>t===n)}function M6e(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function A6e(e,t,n=0){let r=[];if(typeof t=="number")X(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let i=t.reduce((s,o)=>(o===-1&&(s+=1),s),0);X(i<=1,()=>"There should be only one negative value in split array.");let a=t.indexOf(-1);if(a!==-1){let s=t.reduce((o,l)=>l>0?o+l:o);t[a]=e.shape[n]-s}X(e.shape[n]===t.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function R6e(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function D6e(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function L6e(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function F6e(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function z6e(e,t){return`size ${e} must be non-negative, not ${t}`}function B6e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function W6e(e,t){let n=Pn(e),r=Pn(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function V6e(e,t){let n=Pn(e),r=Pn(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}function j6e(){return"segment ids must be >= 0"}function H6e(){return"segment ids are not increasing"}function U6e(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function G6e(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}var Ane={};Dt(Ane,{collectGatherOpShapeInfo:()=>Z6e,computeOutShape:()=>K6e,segOpComputeOptimalWindowSize:()=>q6e});function q6e(e,t){let n=!1,r;for(e<=UL?(r=e,n=!0):r=oI(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=oI(e,r+1);return r}function K6e(e,t,n){let r=[],i=e.length;for(let a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}function Z6e(e,t,n,r){let i=t.shape.length,a=e.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);let s=e.shape[n],o=[],l=1,u=1,c=1;for(let d=0;d<r;++d)o.push(e.shape[d]),l*=e.shape[d];for(let d=r;d<n;d++)o.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<i;d++)o.push(t.shape[d]);for(let d=n+1;d<a;d++)o.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:s,outputShape:o}}function X6e(e){try{return e.map(t=>cI(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function J6e(e){return e.map(t=>Ew(t))}var Yl={};Dt(Yl,{nonMaxSuppressionV3Impl:()=>ene,nonMaxSuppressionV4Impl:()=>tne,nonMaxSuppressionV5Impl:()=>nne,whereImpl:()=>jte});fVe();var Rne={kernelName:jy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,am(Ae(n,"float32"),-1))}}},Y6e={kernelName:Lh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=zn(Ae(n,"float32")),i=Di(Ve(gt(1),r));return Xn(Qe(e,i))}}}},Q6e={kernelName:Fh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Di(Ve(zn(Ae(n,"float32")),1));return Qe(e,r)}}}},eje={kernelName:Pd,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=e,s=Vr(n.shape,i);return s.length>0&&(a=ot(a,s)),le(a,n.shape)},b:()=>{let a=e,s=Vr(r.shape,i);return s.length>0&&(a=ot(a,s)),le(a,r.shape)}}}},tje={kernelName:zh,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((r,i)=>{n[i]=()=>e.clone()}),n}},nje={kernelName:Gy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>an(n)}}},rje={kernelName:qy,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>an(n)}}},ije={kernelName:Bh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,Di(Ve(gt(1),zn(Ae(n,"float32")))))}}},aje={kernelName:Wh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Di(we(gt(1),zn(Ae(n,"float32"))));return Qe(e,r)}}}},sje={kernelName:Hh,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=we(zn(n),zn(r)),s=se(e,Qe(r,a)),o=Vr(n.shape,i);return o.length>0&&(s=ot(s,o)),le(s,n.shape)},b:()=>{let a=we(zn(n),zn(r)),s=Xn(se(e,Qe(n,a))),o=Vr(r.shape,i);return o.length>0&&(s=ot(s,o)),le(s,r.shape)}}}},oje={kernelName:Vh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,we(zn(Ae(n,"float32")),1))}}},lje={kernelName:jh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,Ve(gt(1),zn(Ae(n,"float32"))))}}};function uje(e,t,n,r,i,a){let s=U(e,"dy","avgPool3dGrad"),o=U(t,"input","avgPool3dGrad"),l=s,u=o,c=!1;o.rank===4&&(c=!0,l=le(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),u=le(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),X(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),X(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Sa("avgPool3dGrad",i,a);let d={dy:l,input:u},p={filterSize:n,strides:r,pad:i,dimRoundingMode:a},h=re.runKernel(lw,d,p);return c?le(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var cje=ie({avgPool3dGrad_:uje}),dje={kernelName:Ky,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:a,pad:s,dimRoundingMode:o}=n;return{x:()=>cje(e,r,i,a,s,o)}}};function pje(e,t,n,r,i){let a=U(e,"dy","avgPoolGrad"),s=U(t,"input","avgPoolGrad");X(s.rank===a.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${a.rank})`);let o=s,l=a,u=!1;s.rank===3&&(u=!0,o=le(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=le(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),X(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);let c={dy:l,input:o},d={filterSize:n,strides:r,pad:i},p=re.runKernel(ow,c,d);return u?le(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var hje=ie({avgPoolGrad_:pje}),fje={kernelName:Uh,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:a,pad:s}=n;return{x:()=>hje(e,r,i,a,s)}}},mje={kernelName:Gh,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,i]=t,{transposeA:a,transposeB:s}=n;return!a&&!s?{a:()=>jt(e,i,!1,!0),b:()=>jt(r,e,!0,!1)}:!a&&s?{a:()=>jt(e,i,!1,!1),b:()=>jt(e,r,!0,!1)}:a&&!s?{a:()=>jt(i,e,!1,!0),b:()=>jt(r,e,!1,!1)}:{a:()=>jt(i,e,!0,!0),b:()=>jt(e,r,!0,!0)}}},gje={kernelName:Zy,gradFunc:(e,t,n)=>{let{blockShape:r,crops:i}=n;return{x:()=>Vw(e,r,i)}}},yje={kernelName:wee,gradFunc:(e,t,n)=>{let r=n,i=r.inputShape,a=r.shape,s=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])s[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>ot(e,o,!0)}}},vje={kernelName:qh,gradFunc:e=>({x:()=>e.clone()})},bje={kernelName:Kh,gradFunc:e=>({x:()=>an(e)})},wje={kernelName:Md,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>wi(mo(Ju(r,i),Ld(r,a)),e,an(e))}}},xje={kernelName:cw,inputsToSave:["x"],gradFunc:Rne.gradFunc},_je={kernelName:Yy,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(o=>o.shape),{axis:i}=n,a=bo(i,t[0].shape)[0],s=r.map(o=>o[a]);return Fa(e,s,a).map(o=>()=>o)}},kje={kernelName:Zh,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{dilations:a,strides:s,pad:o,dataFormat:l}=n;return X(hd(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>KD(r.shape,e,i,s,o,l),filter:()=>PL(r,e,i.shape,s,o,l)}}},Sje={kernelName:Xh,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{strides:a,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>ya(e,i,a,s,o,1,l),filter:()=>PL(e,r,i.shape,a,s,o,l)}}};function Cje(e,t,n,r,i){let a=e;e.rank===4&&(a=le(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;s.rank===4&&(s=le(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),X(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),X(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),X(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),X(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),X(s.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`);let o={x:a,dy:s},l={strides:r,pad:i,filterShape:n};return re.runKernel(Qy,o,l)}var Ije=ie({conv3DBackpropFilter_:Cje}),$je={kernelName:Jh,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:a}=n;X(hd(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[s,o]=t;return{x:()=>rte(s.shape,e,o,i,a),filter:()=>Ije(s,e,o.shape,i,a)}}},Tje={kernelName:Yh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(Xn(j$(Ae(n,"float32"))),e)}}},Nje={kernelName:Qh,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(H$(Ae(n,"float32")),e)}}},Eje={kernelName:ef,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i,exclusive:a,reverse:s}=n;return{x:()=>{let o=ute([i],r.rank),l=P$(e,i,a,!s);return o!=null&&(l=Ht(l,o)),l}}}},Oje={kernelName:tf,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:a,dimRoundingMode:s}=n,o=r==null?[1,1]:r;X(hd(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[l,u]=t;return X(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),X(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),X(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),X(Xl(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),Sa("depthwiseConv2d",a,s),{x:()=>Jte(l.shape,e,u,i,a,o,s),filter:()=>Xte(l,e,u.shape,i,a,o,s)}}},Pje={kernelName:nf,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,a={x:r,filter:i,dy:e},s={x:r,filter:i,dy:e};return{x:()=>re.runKernel(iy,a,n),filter:()=>re.runKernel(ay,s,n)}}},Mje={kernelName:af,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>re.runKernel(iv,r)}}},Aje={kernelName:sf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=se(ea(Xn(zn(n))),2/Math.sqrt(Math.PI));return{x:()=>se(e,r)}}},Rje={kernelName:of,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,n)}}},Dje={kernelName:sv,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>le(e,n.shape)}}},Lje={kernelName:lf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,ea(n))}}},Fje={kernelName:uf,gradFunc:e=>({x:()=>an(e)})},zje={kernelName:cf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=Qe(e,Ae(r,"float32")),s=Vr(n.shape,i);return s.length>0?le(ot(a,s),n.shape):a},b:()=>{let a=se(e,Ae(n,"float32")),s=Vr(r.shape,i);s.length>0&&(a=le(ot(a,s),r.shape));let o=zn(r);return Xn(Qe(a,Ae(o,"float32")))}}}},Bje={kernelName:df,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[i,a,s,o]=t,l=o==null?gt(1):o,u=Vr(a.shape,i.shape),c=[];if(a.rank===1){for(let g=0;g<i.shape.length-1;++g)c.push(i.shape[g]);c.push(1)}let d=Ve(i,a),p=se(e,l),h=W$(we(s,gt(r))),m=se(se(se(h,h),h),gt(-.5));return{x:()=>a.rank===1?le(se(se(e,ls(le(h,[1,1,1,a.shape[0]]),c)),l),i.shape):le(se(se(e,h),l),i.shape),mean:()=>{let g=se(se(h,gt(-1)),p);return a.rank===1&&(g=ot(g,u)),le(g,a.shape)},variance:()=>{let g=se(se(m,d),p);return a.rank===1&&(g=ot(g,u)),le(g,a.shape)},scale:()=>{let g=se(d,h),y=se(e,g);return a.rank===1&&(y=ot(y,u)),le(y,a.shape)},offset:()=>{let g=e;return a.rank===1&&(g=ot(g,u)),le(g,a.shape)}}}},Wje={kernelName:lv,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,i]=t,{axis:a,batchDims:s}=n,o=bo(a,r.shape)[0],l=(u,c,d)=>()=>{let p=u.shape,h=c.size,m=p.slice(0,o),g=m.length,y=p.slice(a,p.length).slice(1),v=y.length,b=UH(0,g),_=UH(g+1,g+1+v),k=GH([m,[h],y]),S=le(d,k),$=le(c,[h]),N=GH([[g],b,_]),P=Ht(S,N),D=Y$(P,$,u.shape[o]),O=rL(N);return D=Ht(D,O),D};if(s===1){let u=r.shape[0],c=r.split(u,0);return{x:()=>Wr(c.map((d,p)=>l(d,i.slice(p,1),e.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,e),indices:()=>i}}};function UH(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function GH(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Vje={kernelName:pf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>an(n),b:()=>an(r)}}},jje={kernelName:hf,gradFunc:e=>({x:()=>Ae(e,"float32")})},Hje={kernelName:ff,gradFunc:e=>({x:()=>an(e)})},Uje={kernelName:mf,gradFunc:e=>({x:()=>an(e)})},Gje={kernelName:gf,gradFunc:e=>({x:()=>an(e)})},qje={kernelName:yf,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:i}=n,a=Ca(r,0);return{x:()=>wi(a,e,se(e,i))}}},Kje={kernelName:bf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,we(n,1))}}},Zje={kernelName:vf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,Ae(n,"float32"))}}},Xje={kernelName:_ee,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n;return{logits:()=>{let a=ea(r);return Ve(e,se(ot(e,i,!0),a))}}}};function Jje(e,t,n,r=5,i=1,a=1,s=.5){let o={x:e,y:t,dy:n},l={depthRadius:r,bias:i,alpha:a,beta:s};return re.runKernel(yv,o,l)}var Yje=ie({localResponseNormalizationBackprop_:Jje}),Qje={kernelName:wf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{depthRadius:a,bias:s,alpha:o,beta:l}=n;return{x:()=>Yje(r,i,e,a,s,o,l)}}};function Dne(e,t,n,r){return t.rank<n.rank&&(t=le(t,fh(t.shape,r))),e.rank<n.rank&&(e=le(e,fh(e.shape,r))),{x:()=>se(e,Ae(gs(n,t),e.dtype))}}var qH={kernelName:xf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:i}=r,a=t[0],s=t[1],o=bo(i,a.shape),l=Dne(e,s,a,o);return{x:()=>l.x()}}},eHe={kernelName:_f,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>se(e,Ae(Ju(n,r),"float32")),b:()=>se(e,Ae(ly(n,r),"float32"))}}};function tHe(e,t,n,r,i,a,s){let o=U(e,"dy","maxPool3dGrad"),l=U(t,"input","maxPool3dGrad"),u=U(n,"output","maxPool3dGrad"),c=o,d=l,p=u,h=!1;l.rank===4&&(h=!0,c=le(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=le(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=le(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),X(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),X(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),X(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),Sa("maxPool3dGrad",a,s);let m={dy:c,input:d,output:p},g={filterSize:r,strides:i,pad:a,dimRoundingMode:s},y=re.runKernel(mw,m,g);return h?le(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}var nHe=ie({maxPool3dGrad_:tHe}),rHe={kernelName:vv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>nHe(e,r,i,a,s,o,l)}}};function iHe(e,t,n,r,i,a,s){let o=U(e,"dy","maxPoolGrad"),l=U(t,"input","maxPoolGrad"),u=U(n,"output","maxPoolGrad");X(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),X(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),X(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Sa("maxPoolGrad",a,s);let c={dy:o,input:l,output:u},d={filterSize:r,strides:i,pad:a,dimRoundingMode:s};return re.runKernel(fw,c,d)}var aHe=ie({maxPoolGrad_:iHe}),sHe={kernelName:kf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:a,strides:s,pad:o}=n;return{x:()=>aHe(e,r,i,a,s,o)}}},oHe={kernelName:Sf,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,a=bo(i,r.shape),s=lte(r.shape,a)[1],o=Pn(s);return{x:()=>{let l=r.shape.slice();a.forEach(c=>{l[c]=1});let u=le(e,l);return Qe(se(u,Aa(r.shape,"float32")),o)}}}},lHe={kernelName:Cf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:i}=r,[a,s]=t,o=bo(i,a.shape),l=Dne(e,s,a,o);return{x:()=>l.x()}}},uHe={kernelName:If,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>se(e,Ae(Ld(n,r),"float32")),b:()=>se(e,Ae(Ca(n,r),"float32"))}}},cHe={kernelName:$f,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,a=i.map(s=>s[0]);return{x:()=>nn(e,a,r.shape)}}},dHe={kernelName:Tf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=Vr(n.shape,i);return a.length>0?le(ot(e,a),n.shape):e},b:()=>{let a=se(e,Xn(Kv(Qe(n,r)))),s=Vr(r.shape,i);return s.length>0?le(ot(a,s),r.shape):a}}}},pHe={kernelName:Nf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=se(e,Ae(r,"float32")),s=Vr(n.shape,i);return s.length>0?le(ot(a,s),n.shape):a},b:()=>{let a=se(e,Ae(n,"float32")),s=Vr(r.shape,i);return s.length>0?le(ot(a,s),r.shape):a}}}},hHe={kernelName:wv,gradFunc:e=>({x:()=>Xn(e)})},fHe={kernelName:Ef,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>yr(n.shape,"float32")}}},mHe={kernelName:Cv,gradFunc:e=>({x:()=>an(e)})},gHe={kernelName:Iv,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return $r(e,r).map(i=>()=>i)}},KH={kernelName:Of,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,a=i.map(s=>s[0]);return{x:()=>nn(e,a,r.shape)}}},yHe={kernelName:Pf,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,i]=t,a=n,s=r,o=Vn(a.shape,s.shape);return{a:()=>{let l=Ae(s,"float32"),u=se(e,se(l,Fu(a,Ve(l,gt(1))))),c=Vr(a.shape,o);return c.length>0&&(u=ot(u,c)),le(u,a.shape)},b:()=>{let l=Ca(a,0),u=wi(l,ys(a),an(a)),c=se(e,se(i,u)),d=Vr(s.shape,o);return d.length>0&&(c=ot(c,d)),le(c,s.shape)}}}},vHe={kernelName:Mf,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,i=Ca(n,0);return{x:()=>wi(i,e,se(e,r)),alpha:()=>{let a=wi(i,an(e),se(e,n)),s=Vr(r.shape,e.shape);return s.length>0&&(a=ot(a,s)),le(a,r.shape)}}}};function bHe(e,t,n){let r=e.shape.slice();r[n]=1;let i=le(t,r),a=w1(e,n,!0,!1),s=w1(e,n,!0,!0),o=se(a,s);return se(i,o)}function wHe(e,t,n){let r=e.shape.length,i=r-n.length,a=W.getAxesPermutation(n,r),s=e;a!=null&&(s=Ht(e,a));let o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((d,p)=>d*p,1);o.push(l);let u=s.reshape(o),c=bHe(u,t,i);if(c=c.reshape(s.shape),a!=null){let d=W.getUndoAxesPermutation(a);c=Ht(c,d)}return c}var xHe={kernelName:Af,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,a=[];return i==null?a=r.shape.map((s,o)=>o):typeof i=="number"?a=[i]:a=i,{x:()=>wHe(r,e,a)}}},_He={kernelName:rf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=Qe(e,Ae(r,"float32")),s=Vr(n.shape,i);return s.length>0?le(ot(a,s),n.shape):a},b:()=>{let a=se(e,Ae(n,"float32")),s=Vr(r.shape,i);s.length>0&&(a=le(ot(a,s),r.shape));let o=zn(r);return Xn(Qe(a,Ae(o,"float32")))}}}},kHe={kernelName:Rf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,Xn(zn(n)))}}},SHe={kernelName:zf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=se(Ld(n,6),am(n));return{x:()=>se(e,Ae(r,"float32"))}}},CHe={kernelName:Df,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,Ae(am(n),"float32"))}}},IHe={kernelName:$v,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>le(e,n.shape)}}},$He={kernelName:Ff,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>re.runKernel(Nv,i,n)}}},THe={kernelName:Lf,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>re.runKernel(Tv,i,n)}}},NHe={kernelName:Bf,gradFunc:(e,t,n)=>{let{dims:r}=n,i=bo(r,e.shape);return{x:()=>Ws(e,i)}}},EHe={kernelName:Wf,gradFunc:e=>({x:()=>an(e)})},OHe={kernelName:Vf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Xn(Qe(e,se(Fu(n,1.5),2)))}}},PHe={kernelName:Mv,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>Ae(an(n),"float32"),t:()=>se(e,Ae(n,e.dtype)),e:()=>se(e,Ae(Bw(n),e.dtype))}}},MHe={kernelName:jf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let r=Ca(n,gt(0)),i=gt(Pne),a=gt(Mne),s=se(e,a),o=se(se(e,i),ea(Ae(n,"float32")));return wi(r,s,o)}}}},AHe={kernelName:qf,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,se(n,Ve(gt(1),n)))}}},RHe={kernelName:Gf,gradFunc:e=>({x:()=>an(e)})},DHe={kernelName:Hf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(Rw(Ae(n,"float32")),e)}}},LHe={kernelName:Uf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(O$(Ae(n,"float32")),e)}}},FHe={kernelName:Av,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:i,size:a}=n,s=r.shape,[o,l]=Ene(r,i,a),u=[];for(let c=0;c<e.rank;c++)u.push([o[c],s[c]-o[c]-l[c]]);return{x:()=>sl(e,u)}}},zHe={kernelName:Jf,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:i}=n,a=!0,s=se(e,r);return{logits:()=>Ve(s,se(ot(s,[i],a),r))}}},BHe={kernelName:Kf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,co(n))}}},ZH={kernelName:Rv,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:i}=n;return{x:()=>Aw(e,r,i)}}},XH={kernelName:Dv,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>Wn(e,r)}}},WHe={kernelName:Zf,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,se(Di(Ae(n,"float32")),2))}}},VHe={kernelName:xw,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(e,se(Ae(n,"float32"),2))}}},jHe={kernelName:Yf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=gt(2);return{a:()=>se(e,se(i,Ve(n,r))),b:()=>se(e,se(i,Ve(r,n)))}}},HHe={kernelName:Rd,gradFunc:e=>({x:()=>an(e)})},UHe={kernelName:Qf,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Vn(n.shape,r.shape);return{a:()=>{let a=e,s=Vr(n.shape,i);return s.length>0&&(a=ot(a,s)),le(a,n.shape)},b:()=>{let a=e,s=Vr(r.shape,i);return s.length>0&&(a=ot(a,s)),le(Xn(a),r.shape)}}}},GHe={kernelName:Xf,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,i=r.shape.slice(),{axis:a}=n;bo(a,r.shape).forEach(l=>{i[l]=1});let s=le(e,i),o=se(s,Aa(r.shape,"float32"));return{x:()=>o}}},qHe={kernelName:em,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Qe(e,zn(Rw(n)))}}},KHe={kernelName:tm,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>se(Ve(gt(1),zn(n)),e)}}},ZHe={kernelName:Ad,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:i}=n;return{x:()=>{let a=an(r);if(r.rank===1)for(let s=0;s<i[0];++s)a=we(a,nn(e,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)a=we(a,nn(e,[s*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)for(let l=0;l<i[2];++l)a=we(a,nn(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)for(let l=0;l<i[2];++l)for(let u=0;u<i[3];++u)a=we(a,nn(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}},XHe={kernelName:Cu,gradFunc:(e,t,n)=>{let r=n,{perm:i}=r,a=rL(i);return{x:()=>Ht(e,a)}}},JHe={kernelName:Vv,gradFunc:(e,t,n)=>{let r=n,{axis:i}=r;return{value:()=>Wr(e,i)}}},YHe={kernelName:$w,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>QHe(e,n)}}};function QHe(e,t){let n=Jl(t,an(t)),r=Zv(e,n),i=Ju(t,gt(0,"int32")),a=r.rank-i.rank;for(let o=0;o<a;++o)i=gi(i,o+1);i=mo(i,Aa(r.shape,"bool"));let s=an(r);return wi(i,r,s)}var eUe={kernelName:jv,gradFunc:e=>({x:()=>an(e)})},tUe=[Rne,Y6e,Q6e,eje,tje,nje,rje,ije,aje,sje,oje,lje,dje,fje,mje,gje,yje,vje,bje,wje,xje,_je,Sje,kje,$je,Tje,Nje,Eje,Oje,Pje,_He,Mje,Aje,Rje,Dje,Lje,zje,Fje,Bje,Wje,Vje,jje,Hje,Uje,Gje,qje,Kje,Zje,Xje,Qje,qH,qH,eHe,rHe,sHe,oHe,lHe,uHe,cHe,dHe,pHe,hHe,fHe,mHe,gHe,KH,KH,yHe,vHe,xHe,kHe,SHe,CHe,IHe,$He,THe,NHe,EHe,OHe,PHe,MHe,AHe,RHe,DHe,LHe,FHe,zHe,BHe,ZH,ZH,XH,XH,WHe,jHe,VHe,HHe,UHe,GHe,qHe,KHe,ZHe,XHe,JHe,YHe,eUe];for(let e of tUe)kee(e);xe().prototype.abs=function(){return this.throwIfDisposed(),Dr(this)};xe().prototype.acos=function(){return this.throwIfDisposed(),ND(this)};xe().prototype.acosh=function(){return this.throwIfDisposed(),ED(this)};xe().prototype.add=function(e){return this.throwIfDisposed(),we(this,e)};xe().prototype.all=function(e,t){return this.throwIfDisposed(),T$(this,e,t)};xe().prototype.any=function(e,t){return this.throwIfDisposed(),y1(this,e,t)};xe().prototype.argMax=function(e){return this.throwIfDisposed(),dh(this,e)};xe().prototype.argMin=function(e){return this.throwIfDisposed(),OD(this,e)};xe().prototype.asScalar=function(){return this.throwIfDisposed(),X(this.size===1,()=>"The array must have only 1 element."),le(this,[])};xe().prototype.asType=function(e){return this.throwIfDisposed(),Ae(this,e)};xe().prototype.as1D=function(){return this.throwIfDisposed(),le(this,[this.size])};xe().prototype.as2D=function(e,t){return this.throwIfDisposed(),le(this,[e,t])};xe().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),le(this,[e,t,n])};xe().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),le(this,[e,t,n,r])};xe().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),le(this,[e,t,n,r,i])};xe().prototype.asin=function(){return this.throwIfDisposed(),PD(this)};xe().prototype.asinh=function(){return this.throwIfDisposed(),MD(this)};xe().prototype.atan=function(){return this.throwIfDisposed(),AD(this)};xe().prototype.atan2=function(e){return this.throwIfDisposed(),RD(this,e)};xe().prototype.atanh=function(){return this.throwIfDisposed(),DD(this)};xe().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Xu(this,e,t,n,r)};xe().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Aw(this,e,t)};xe().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),nm(this,e,t,n,r,i)};xe().prototype.broadcastTo=function(e){return this.throwIfDisposed(),zp(this,e)};xe().prototype.cast=function(e){return this.throwIfDisposed(),Ae(this,e)};xe().prototype.ceil=function(){return this.throwIfDisposed(),jD(this)};xe().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Qi(this,e,t)};xe().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof zt&&(e=[e]),Wn([this,...e],t)};xe().prototype.conv1d=function(e,t,n,r,i,a){return this.throwIfDisposed(),N$(this,e,t,n,r,i,a)};xe().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),E$(this,e,t,n,r,i)};xe().prototype.conv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),ya(this,e,t,n,r,i,a)};xe().prototype.cos=function(){return this.throwIfDisposed(),Rw(this)};xe().prototype.cosh=function(){return this.throwIfDisposed(),O$(this)};xe().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),w1(this,e,t,n)};xe().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),P$(this,e,t,n)};xe().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),JD(this,e,t)};xe().prototype.depthwiseConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),rm(this,e,t,n,r,i,a)};xe().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),YD(this,e,t,n,r,i)};xe().prototype.divNoNan=function(e){return this.throwIfDisposed(),QD(this,e)};xe().prototype.div=function(e){return this.throwIfDisposed(),Qe(this,e)};xe().prototype.dot=function(e){return this.throwIfDisposed(),eL(this,e)};xe().prototype.elu=function(){return this.throwIfDisposed(),Gv(this)};xe().prototype.equal=function(e){return this.throwIfDisposed(),gs(this,e)};xe().prototype.erf=function(){return this.throwIfDisposed(),tL(this)};xe().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),iL(this,e,t)};xe().prototype.exp=function(){return this.throwIfDisposed(),ea(this)};xe().prototype.expandDims=function(e){return this.throwIfDisposed(),gi(this,e)};xe().prototype.expm1=function(){return this.throwIfDisposed(),aL(this)};xe().prototype.fft=function(){return this.throwIfDisposed(),Uw(this)};xe().prototype.flatten=function(){return this.throwIfDisposed(),le(this,[this.size])};xe().prototype.floor=function(){return this.throwIfDisposed(),Kv(this)};xe().prototype.floorDiv=function(e){return this.throwIfDisposed(),$$(this,e)};xe().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Zv(this,e,t,n)};xe().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ju(this,e)};xe().prototype.greater=function(e){return this.throwIfDisposed(),Ca(this,e)};xe().prototype.ifft=function(){return this.throwIfDisposed(),py(this)};xe().prototype.irfft=function(){return this.throwIfDisposed(),G$(this)};xe().prototype.isFinite=function(){return this.throwIfDisposed(),sL(this)};xe().prototype.isInf=function(){return this.throwIfDisposed(),oL(this)};xe().prototype.isNaN=function(){return this.throwIfDisposed(),lL(this)};xe().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Lw(this,e)};xe().prototype.lessEqual=function(e){return this.throwIfDisposed(),Ld(this,e)};xe().prototype.less=function(e){return this.throwIfDisposed(),ly(this,e)};xe().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),uL(this,e,t,n,r)};xe().prototype.logSigmoid=function(){return this.throwIfDisposed(),cL(this)};xe().prototype.logSoftmax=function(e){return this.throwIfDisposed(),R$(this,e)};xe().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),zw(this,e,t)};xe().prototype.log=function(){return this.throwIfDisposed(),ys(this)};xe().prototype.log1p=function(){return this.throwIfDisposed(),Fw(this)};xe().prototype.logicalAnd=function(e){return this.throwIfDisposed(),mo(this,e)};xe().prototype.logicalNot=function(){return this.throwIfDisposed(),Bw(this)};xe().prototype.logicalOr=function(e){return this.throwIfDisposed(),D$(this,e)};xe().prototype.logicalXor=function(e){return this.throwIfDisposed(),dL(this,e)};xe().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),jt(this,e,t,n)};xe().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),ci(this,e,t,n,r)};xe().prototype.max=function(e,t){return this.throwIfDisposed(),Ds(this,e,t)};xe().prototype.maximum=function(e){return this.throwIfDisposed(),Jl(this,e)};xe().prototype.mean=function(e,t){return this.throwIfDisposed(),gr(this,e,t)};xe().prototype.min=function(e,t){return this.throwIfDisposed(),oy(this,e,t)};xe().prototype.minimum=function(e){return this.throwIfDisposed(),fd(this,e)};xe().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),hL(this,e,t)};xe().prototype.mod=function(e){return this.throwIfDisposed(),fL(this,e)};xe().prototype.mul=function(e){return this.throwIfDisposed(),se(this,e)};xe().prototype.neg=function(){return this.throwIfDisposed(),Xn(this)};xe().prototype.norm=function(e,t,n){return this.throwIfDisposed(),qv(this,e,t,n)};xe().prototype.notEqual=function(e){return this.throwIfDisposed(),mh(this,e)};xe().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),uy(this,e,t,n)};xe().prototype.onesLike=function(){return this.throwIfDisposed(),vs(this)};xe().prototype.pad=function(e,t){return this.throwIfDisposed(),sl(this,e,t)};xe().prototype.pool=function(e,t,n,r,i,a){return this.throwIfDisposed(),mL(this,e,t,n,r,i,a)};xe().prototype.pow=function(e){return this.throwIfDisposed(),Fu(this,e)};xe().prototype.prelu=function(e){return this.throwIfDisposed(),jw(this,e)};xe().prototype.prod=function(e,t){return this.throwIfDisposed(),gL(this,e,t)};xe().prototype.reciprocal=function(){return this.throwIfDisposed(),xL(this)};xe().prototype.relu=function(){return this.throwIfDisposed(),On(this)};xe().prototype.relu6=function(){return this.throwIfDisposed(),z$(this)};xe().prototype.reshapeAs=function(e){return this.throwIfDisposed(),le(this,e.shape)};xe().prototype.reshape=function(e){return this.throwIfDisposed(),le(this,e)};xe().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),rne(this,e,t,n)};xe().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),ine(this,e,t,n)};xe().prototype.reverse=function(e){return this.throwIfDisposed(),Ws(this,e)};xe().prototype.rfft=function(){return this.throwIfDisposed(),Gw(this)};xe().prototype.round=function(){return this.throwIfDisposed(),B$(this)};xe().prototype.rsqrt=function(){return this.throwIfDisposed(),W$(this)};xe().prototype.selu=function(){return this.throwIfDisposed(),V$(this)};xe().prototype.separableConv2d=function(e,t,n,r,i,a){return this.throwIfDisposed(),Xv(this,e,t,n,r,i,a)};xe().prototype.sigmoid=function(){return this.throwIfDisposed(),co(this)};xe().prototype.sign=function(){return this.throwIfDisposed(),_L(this)};xe().prototype.sin=function(){return this.throwIfDisposed(),j$(this)};xe().prototype.sinh=function(){return this.throwIfDisposed(),H$(this)};xe().prototype.slice=function(e,t){return this.throwIfDisposed(),nn(this,e,t)};xe().prototype.softmax=function(e){return this.throwIfDisposed(),zd(this,e)};xe().prototype.softplus=function(){return this.throwIfDisposed(),im(this)};xe().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Vw(this,e,t)};xe().prototype.split=function(e,t){return this.throwIfDisposed(),Fa(this,e,t)};xe().prototype.sqrt=function(){return this.throwIfDisposed(),Di(this)};xe().prototype.square=function(){return this.throwIfDisposed(),zn(this)};xe().prototype.squaredDifference=function(e){return this.throwIfDisposed(),q$(this,e)};xe().prototype.squeeze=function(e){return this.throwIfDisposed(),Bd(this,e)};xe().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof zt?[this,e]:[this,...e];return Wr(n,t)};xe().prototype.step=function(e){return this.throwIfDisposed(),am(this,e)};xe().prototype.stridedSlice=function(e,t,n,r,i,a,s,o){return this.throwIfDisposed(),kL(this,e,t,n,r,i,a,s,o)};xe().prototype.sub=function(e){return this.throwIfDisposed(),Ve(this,e)};xe().prototype.sum=function(e,t){return this.throwIfDisposed(),ot(this,e,t)};xe().prototype.tan=function(){return this.throwIfDisposed(),SL(this)};xe().prototype.tanh=function(){return this.throwIfDisposed(),hh(this)};xe().prototype.tile=function(e){return this.throwIfDisposed(),ls(this,e)};xe().prototype.toBool=function(){return this.throwIfDisposed(),Ae(this,"bool")};xe().prototype.toFloat=function(){return this.throwIfDisposed(),Ae(this,"float32")};xe().prototype.toInt=function(){return this.throwIfDisposed(),Ae(this,"int32")};xe().prototype.topk=function(e,t){return this.throwIfDisposed(),IL(this,e,t)};xe().prototype.transpose=function(e){return this.throwIfDisposed(),Ht(this,e)};xe().prototype.unique=function(e){return this.throwIfDisposed(),$L(this,e)};xe().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Y$(this,e,t)};xe().prototype.unstack=function(e){return this.throwIfDisposed(),$r(this,e)};xe().prototype.where=function(e,t){return this.throwIfDisposed(),wi(e,this,t)};xe().prototype.zerosLike=function(){return this.throwIfDisposed(),an(this)};var Sc=class Lne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Lne.prototype)}},Ol=class Fne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Fne.prototype)}},de=class zne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,zne.prototype)}},qt=class Bne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Bne.prototype)}},nUe=class Wne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Wne.prototype)}},Vne=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}};function yh(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}else{let n=new Array(t);return n.fill(e),n}}function Sl(e,t){if(!e)throw new nUe(t)}function JH(e,t){let n=0;for(let r of e)r===t&&n++;return n}function Ma(e){return e.length===1?e[0]:e}function En(e){return Array.isArray(e)?e:[e]}function gu(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function bp(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}var Ys={};function GL(e){if(e==null)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function ZP(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>ZP(t));else{let t=Object.keys(e);for(let n of t){let r=e[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?e[n]=r.value:ZP(r))}}}function Kw(e,t={},n={},r="object",i=!1){if(typeof e=="string"){let a=e,s;if(a in n)s=n[a];else if(a in Ys)s=Ys[a];else if(s=t[a],s==null)throw new de(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let a=e;if(a.className==null||a.config==null)throw new de(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);let s=a.className,o,l;if(s in n?[o,l]=n[s]:s in Ys?[o,l]=Ys.className:s in t&&([o,l]=t[s]),o==null)throw new de(`Unknown ${r}: ${s}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let u={};for(let h of Object.keys(Ys))u[h]=Ys[h];for(let h of Object.keys(n))u[h]=n[h];let c=a.config;c.customObjects=u;let d=Object.assign({},Ys);for(let h of Object.keys(n))Ys[h]=n[h];ZP(a.config);let p=l(o,a.config,n,i);return Ys=Object.assign({},d),p}else{let u=Object.assign({},Ys);for(let d of Object.keys(n))Ys[d]=n[d];let c=new o(a.config);return Ys=Object.assign({},u),c}}}function rUe(e,t){return e<t?-1:e>t?1:0}function __(e,t){return-1*rUe(e,t)}function ed(e){if(e==null)return e;let t=[];for(let n of e)t.indexOf(n)===-1&&t.push(n);return t}function iUe(e){if(e==null)throw new de(`Invalid value in obj: ${JSON.stringify(e)}`);for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function sm(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new de(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function qL(e,t,n=0,r=1/0){return Sl(n>=0),Sl(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(i=>typeof i===t)}function vi(e,t){Array.isArray(e)?(M.assert(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,r)=>vi(n,`element ${r+1} of ${t}`))):M.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${jne(e)}.`)}function jne(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>jne(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function aUe(e,t,n){let r=n!=null?n():M.now(),i;return(...a)=>{let s=n!=null?n():M.now();return s-r<t||(r=s,i=e(...a)),i}}function Hne(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}var sUe=0;function Une(){return sUe++}var k_={};function aT(e=""){return e in k_||(k_[e]=0),k_[e]+=1,e+k_[e].toString()}var oUe=["channelsFirst","channelsLast"],lUe=["nearest","bilinear"],uUe=["valid","same","causal"],cUe=["max","avg"],dUe=["sum","mul","concat","ave"],Hm=new Map;function Ar(e){sm(oUe,"DataFormat",e)}function pUe(e){sm(lUe,"InterpolationFormat",e)}function qs(e){sm(uUe,"PaddingMode",e)}function Gne(e){sm(cUe,"PoolMode",e)}var Ab=[],YH="/";function Bp(e,t){Ab.push(e);try{let n=t();return Ab.pop(),n}catch(n){throw Ab.pop(),n}}function hUe(){return Ab.length===0?"":Ab.join(YH)+YH}function qne(e){if(!Zne(e))throw new Error("Not a valid tensor name: '"+e+"'");return hUe()+e}function Kne(e){if(!Zne(e))throw new Error("Not a valid tensor name: '"+e+"'");Hm.has(e)||Hm.set(e,0);let t=Hm.get(e);if(Hm.set(e,Hm.get(e)+1),t>0){let n=`${e}_${t}`;return Hm.set(n,1),n}else return e}var fUe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Zne(e){return!!e.match(fUe)}function mUe(e){return e===parseInt(e.toString(),10)}function td(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function fy(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function gd(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function el(e,t){if(t<e)throw new de(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}var kE;function Qr(){return kE==null&&(kE=CD().epsilon()),kE}function tl(){return"channelsLast"}function zu(e,t){return Ae(e,t)}function Zw(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),le(e,n)}function gUe(e,t){return ue(()=>{if(e.shape.length!==2)throw new de(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);let n=Zw(e,1);return XP(n,[1,t,1])})}function yUe(e){let t=[td(e.shape)];return le(e,t)}function vUe(e){if(e.rank<=1)throw new de(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],td(e.shape,1)];return le(e,t)}function Wp(e,t,n){return ue(()=>{switch(e.rank){case 1:return Hw(e,t,n);case 2:return U$(e,[t,0],[n,e.shape[1]]);case 3:return Jv(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return dy(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return nn(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return nn(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new de(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function SE(e,t,n){return ue(()=>{switch(e.rank){case 1:return Hw(e,t,n);case 2:return U$(e,[0,t],[e.shape[0],n]);case 3:return Jv(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return dy(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new de(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function S_(e,t,n,r){return ue(()=>{switch(e.rank){case 1:return Hw(e,t,n);case 2:switch(r){case 1:return Wp(e,t,n);case 2:return SE(e,t,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Wp(e,t,n);case 2:return Jv(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return SE(e,t,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Wp(e,t,n);case 2:return dy(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return dy(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return SE(e,t,n);default:throw new de(`The axis is not within the rank of the tensor ${r}`)}default:throw new de(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function KL(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),Wn(e,t)}function QH(e,t){switch(e.rank){case 1:return HD([e,t]);case 2:return UD([e,t],0);case 3:return GD([e,t],0);case 4:return qD([e,t],0);default:throw new de(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function XP(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new de(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return ls(e,t)}function sT(e,t=0,n=1,r,i){return F$(e,t,n,r,i)}function Wl(e,t,n,r){if(e.rank<2||t.rank<2)throw new qt(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){let i=e.shape.slice(-1)[0],a=t.shape.slice(-2)[0];if(i!==a)throw new qt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return hy.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?JP(e.rank,r,tl()):null,activation:n});{let i=e.shape.slice(),a=i.pop();e=le(e,[-1,a]);let s=t.shape.slice(),o=s.pop(),l=s.pop(),u=[...s,o],c=Array.from({length:t.rank},(p,h)=>h===0?t.rank-2:h<=t.rank-2?h-1:h);t=le(Ht(t,c),[l,-1]);let d=[...i,...u];return le(hy.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?JP(e.rank,r,tl()):null,activation:n}),d)}}function Xne(e,t,n){return ue(()=>(Array.isArray(t)?t=$n(t,"int32"):t=Ae(t,"int32"),Zv(e,t,n)))}function Xw(e){return se(e,e)}function JP(e,t,n){let r=t.shape;if(t.rank!==1&&t.rank!==e)throw new de(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return r.length===1?le(t,[1,r[0],1,1,1]):le(t,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?le(t,[1,1,1,1,r[0]]):le(t,[1].concat(r))}else if(e===4){if(n==="channelsFirst")return r.length===1?le(t,[1,r[0],1,1]):le(t,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?le(t,[1,1,1,r[0]]):le(t,[1].concat(r))}else if(e===3){if(n==="channelsFirst")return r.length===1?le(t,[1,r[0],1]):le(t,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?le(t,[1,1,r[0]]):le(t,[1].concat(r))}else if(e<3)return t;throw new de(`Unsupported input rank by biasAdd: ${t.rank}`)}function ol(e,t,n){return ue(()=>(n==null&&(n=tl()),Ar(n),we(e,JP(e.rank,t,n))))}function bUe(e,t=1){if(t!==1)throw new qt(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return Gv(e)}function wUe(e){return ue(()=>Qe(e,we(Dr(e),1)))}function Jne(e,t,n,r){return ue(()=>EL(e,t,n,r))}function xUe(e){return ue(()=>{let t=we(.5,se(.2,e));return Qi(t,0,1)})}function Jw(e,t,n=!1){return n?e():t()}var _Ue=["fanIn","fanOut","fanAvg"],kUe=["normal","uniform","truncatedNormal"];function SUe(e){sm(_Ue,"FanMode",e)}function CUe(e){sm(kUe,"Distribution",e)}var wo=class extends $e.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},ZL=class extends wo{apply(e,t){return yr(e,t)}};ZL.className="Zeros";$e.registerClass(ZL);var oT=class extends wo{apply(e,t){return Aa(e,t)}};oT.className="Ones";$e.registerClass(oT);var XL=class extends wo{constructor(e){if(super(),typeof e!="object")throw new de(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new de(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return ue(()=>se(gt(this.value),Aa(e,t)))}getConfig(){return{value:this.value}}};XL.className="Constant";$e.registerClass(XL);var JL=class extends wo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Fd(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};JL.className="RandomUniform";$e.registerClass(JL);var YL=class extends wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qt(`randomNormal does not support dType ${t}.`);return sT(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};YL.className="RandomNormal";$e.registerClass(YL);var QL=class extends wo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qt(`truncatedNormal does not support dType ${t}.`);return J$(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};QL.className="TruncatedNormal";$e.registerClass(QL);var eF=class extends wo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return ue(()=>{if(e.length!==2||e[0]!==e[1])throw new de("Identity matrix initializer can only be used for 2D square matrices.");return se(this.gain,M$(e[0]))})}getConfig(){return{gain:this.gain}}};eF.className="Identity";$e.registerClass(eF);function IUe(e,t="channelsLast"){let n,r;if(Ar(t),e.length===2)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){let i=td(e,2);n=e[1]*i,r=e[0]*i}else if(t==="channelsLast"){let i=td(e,0,e.length-2);n=e[e.length-2]*i,r=e[e.length-1]*i}}else{let i=td(e);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}var Wa=class extends wo{constructor(e){if(super(),e.scale<0)throw new de(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,SUe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,CUe(this.distribution),this.seed=e.seed}apply(e,t){let n=IUe(e),r=n[0],i=n[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,r):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(r+i)/2),this.distribution==="normal"){let s=Math.sqrt(a);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new qt(`${this.getClassName()} does not support dType ${t}.`);return J$(e,0,s,t,this.seed)}else{let s=Math.sqrt(3*a);return Fd(e,-s,s,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Wa.className="VarianceScaling";$e.registerClass(Wa);var lT=class extends Wa{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};lT.className="GlorotUniform";$e.registerClass(lT);var uT=class extends Wa{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};uT.className="GlorotNormal";$e.registerClass(uT);var cT=class extends Wa{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};cT.className="HeNormal";$e.registerClass(cT);var dT=class extends Wa{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};dT.className="HeUniform";$e.registerClass(dT);var pT=class extends Wa{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};pT.className="LeCunNormal";$e.registerClass(pT);var hT=class extends Wa{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Wa.className}};hT.className="LeCunUniform";$e.registerClass(hT);var tF=class extends wo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return ue(()=>{if(e.length<2)throw new qt("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;let n=M.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);let a=[Math.max(r,n),Math.min(r,n)],s=sT(a,0,1,t,this.seed),o=AL.qr(s,!1),l=o[0],u=o[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return l=se(l,u.sign()),n<r&&(l=l.transpose()),se(gt(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};tF.className="Orthogonal";$e.registerClass(tF);var eU={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function tU(e,t={}){return Kw(e,$e.SerializationMap.getMap().classNameMap,t,"initializer")}function vr(e){return GL(e)}function cr(e){if(typeof e=="string"){let t=e in eU?eU[e]:e;if(t==="GlorotNormal")return new uT;if(t==="GlorotUniform")return new lT;if(t==="HeNormal")return new cT;if(t==="HeUniform")return new dT;if(t==="LeCunNormal")return new pT;if(t==="LeCunUniform")return new hT;{let n={};return n.className=t,n.config={},tU(n)}}else return e instanceof wo?e:tU(e)}function YP(e){return Array.isArray(e)&&Array.isArray(e[0])}function fI(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function $t(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new de(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function pn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new de(`Expected exactly 1 Shape; got ${e.length}`)}else return e}function mI(e){let t=0;for(let n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((r,i)=>r*i);return t}var nU="Variable",Yne=class{constructor(e,t="float32",n=nU,r=!0,i=null){this.dtype=t==null?"float32":t,this.shape=e.shape,this.id=Une(),n=n==null?nU:n,this.originalName=qne(n),this.name=Kne(this.originalName),this.trainable_=r,this.constraint=i,this.val=TL(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),$Ue(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function $Ue(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function QP(e){return e.map(t=>t.read())}function nF(e){e.forEach(t=>{t[0].write(t[1])})}var zr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},nl=class{constructor(e,t,n,r,i,a,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=Une(),a!=null&&(this.originalName=qne(a),this.name=Kne(this.originalName)),this.rank=t.length}},TUe=0,fT=class{constructor(e,t){this.callArgs=t,this.id=TUe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)n!=null&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},NUe=0,Xt=class extends $e.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=NUe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let n=this.getClassName();t=gu(n)+"_"+aT(n)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let n;if(e.batchInputShape!=null)n=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),n=[i].concat(e.inputShape)}this.batchInputShape=n;let r=e.dtype;r==null&&(r=e.inputDType),r==null&&(r="float32"),this.dtype=r}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Ol(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new de(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ma(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ma(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Sc(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Sc(`Layer ${this.name} is not connected, no input to return.`);return Ma(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Sc(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Sc(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ma(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){let t=En(e);if(this.inputSpec==null||this.inputSpec.length===0)return;let n=En(this.inputSpec);if(t.length!==n.length)throw new de(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){let i=t[r],a=n[r];if(a==null)continue;let s=i.rank;if(a.ndim!=null&&s!==a.ndim)throw new de(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(a.maxNDim!=null&&s>a.maxNDim)throw new de(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(a.minNDim!=null&&s<a.minNDim)throw new de(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new de(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){let o=i.shape;for(let l in a.axes){let u=Number(l),c=a.axes[l],d=u>=0?o[u]:o[o.length+u];if(c!=null&&[c,null].indexOf(d)===-1)throw new de(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${o}.`)}}if(a.shape!=null)for(let o=0;o<a.shape.length;++o){let l=a.shape[o],u=i.shape[o];if(l!=null&&u!=null&&l!==u)throw new de(`Input ${r} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=En(e),r=PUe(e),i=MUe(e);if(r===i)throw new de("Arguments to apply() must be all SymbolicTensors or all Tensors");return Bp(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let a=[];for(let s of En(e))a.push(s.shape);this.build(Ma(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,a);let s=En(a),o=[];for(let l of s)n.indexOf(l)!==-1&&(l=l.clone()),o.push(l);if(a=Ma(o),this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{let a=EUe(e),s=this.computeOutputShape(a),o,l=OUe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),s!=null&&s.length>0&&Array.isArray(s[0])?o=s.map((u,c)=>new nl(l,u,this,En(e),t,this.name,c)):o=new nl(l,s,this,En(e),t,this.name),this.addInboundNode(e,o,null,null,a,s,t),this._refCount++,this.activityRegularizer!=null)throw new qt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{n!=null&&e[r]!=null&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Sc(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);e.indexOf(n)===-1&&e.push(n)}if(e.length===1){let t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Sc(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ol(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return mI(this.weights)}build(e){this.built=!0}getWeights(e=!1){return QP(e?this.trainableWeights:this.weights)}setWeights(e){ue(()=>{let t=this.weights;if(t.length!==e.length)throw new de(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;let n=[],r=QP(t);for(let i=0;i<r.length;++i){let a=r[i],s=t[i],o=e[i];if(!M.arraysEqual(a.shape,o.shape))throw new de(`Layer weight shape ${a.shape} not compatible with provided weight shape ${o.shape}`);n.push([s,o])}nF(n)})}addWeight(e,t,n,r,i,a,s,o){if(this._addedWeightNames.indexOf(e)!==-1)throw new de(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),n==null&&(n="float32"),this.fastWeightInitDuringBuild&&(r=o!=null?o():cr("zeros"));let l=r.apply(t,n),u=new Yne(l,n,e,a,s);return l.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=En(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(n=>{if(n!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;let r=this.computeMask(e,n),i=En(t),a=En(r);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let s=0;s<i.length;s++)i[s].kerasMask=a[s]}addInboundNode(e,t,n,r,i,a,s=null){let o=En(e);t=En(t),n=En(n),r=En(r),i=fI(i),a=fI(a);let l=[],u=[],c=[];for(let d of o)l.push(d.sourceLayer),u.push(d.nodeIndex),c.push(d.tensorIndex);new fT({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},s);for(let d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d}getConfig(){let e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function EUe(e){e=En(e);let t=[];for(let n of e)t.push(n.shape);return Ma(t)}function OUe(e){return"float32"}function Qne(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{let r=t.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{let i=[];for(let a=0;a<r.inboundLayers.length;a++){let s=r.inputTensors[a],o=r.inboundLayers[a],l=r.nodeIndices[a],u=Qne(s,o,l);for(let c of u)i.indexOf(c)===-1&&i.push(c)}return i}}}function PUe(e){let t=!0;for(let n of En(e))if(!(n instanceof nl)){t=!1;break}return t}function MUe(e){let t=!0;for(let n of En(e))if(n instanceof nl){t=!1;break}return t}var Qv=class extends Xt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:aT("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new de("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new de("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new de("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new nl(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new fT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new de(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};Qv.className="InputLayer";$e.registerClass(Qv);function ere(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new de("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new Qv({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function AUe(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return Ae(t,e.dtype)}catch{throw new de(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}var gg=class tre{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof tre)for(let n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(let n of t)this.add(n.key,n.value)}}add(t,n,r){if(this.id2Value[t.id]==null)this.id2Value[t.id]=AUe(t,n),this.name2Id[t.name]=t.id,r!=null&&(this.id2Mask[t.id]=r);else throw new de(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof nl){if(this.id2Value[t.id]==null)throw new de(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{let n=this.name2Id[t];if(n==null)throw new de(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof nl){if(this.id2Value[t.id]==null)throw new de(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{let n=this.name2Id[t];if(n==null)throw new de(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Rt(this.id2Mask)}},gI=new Vne,yI=new Vne;function RUe(e){gI!=null&&gI.setMaxEntries(e),yI!=null&&yI.setMaxEntries(e)}function cb(e,t,n,r){let i=n==null?!1:n.training,a=Array.isArray(e),s=a?e:[e],o=s.map(m=>m.name),l=[],u=t.names();for(let m of o)u.indexOf(m)!==-1?l.push(t.getValue(m)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let c=o.join(",")+"|"+t.names().sort().join(","),d=gI.get(c),p;if(d==null){let m=DUe(s,t);d=m.sorted,p=m.recipientCounts,gI.put(c,d),yI.put(c,p)}p={},i||Object.assign(p,yI.get(c));let h=new gg(t);for(let m=0;m<d.length;++m){if(r!=null){let D=dI().numTensors;D>r.maxNumTensors&&(r.maxNumTensors=D),D<r.minNumTensors&&(r.minNumTensors=D)}let g=d[m],y=g.sourceLayer;if(y instanceof Qv)continue;let v=[],b=[],_=[],k=!1;for(let D of g.inputs){let O=h.getValue(D),F=h.getMask(D);v.push(O),b.push(F),F!=null&&(k=!0),i||(p[D.name]--,p[D.name]===0&&!t.hasKey(D)&&o.indexOf(D.name)===-1&&!O.isDisposed&&D.sourceLayer.stateful!==!0&&_.push(O))}k&&(n=n||{},n.mask=b[0]);let S=En(y.apply(v,n)),$=null;y.supportsMasking&&($=y.computeMask(v,b));let N=FUe(g),P=Array.isArray(N)?N:[N];for(let D=0;D<P.length;++D){h.hasKey(P[D])||h.add(P[D],S[D],Array.isArray($)?$[0]:$);let O=o.indexOf(P[D].name);O!==-1&&(l[O]=S[D])}i||Rt(_)}return h.disposeMasks(),a?l:l[0]}function DUe(e,t){M.assert(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(e.length===1){let i=rU(e[0],t);n=i.sorted,r=i.recipientMap}else{let i=new Set;for(let a of e){let{sorted:s,recipientMap:o}=rU(a,t);for(let l of s)i.has(l.name)||(n.push(l),i.add(l.name));for(let l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:LUe(r)}}function LUe(e){let t={};for(let n in e)t[n]=e[n].size;return t}function rU(e,t){let n=new Set,r=[],i={};for(let o of t.names())n.add(o);let a=[],s=[];for(a.push(e);a.length>0;){let o=a[a.length-1];if(n.has(o.name)){a.pop();continue}let l=s[s.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),r.push(o),n.add(o.name),l&&s.pop();else{s.push(a.length-1);for(let u of o.inputs)i[u.name]==null&&(i[u.name]=new Set),i[u.name].add(o.name),!n.has(u.name)&&a.push(u)}}return{sorted:r,recipientMap:i}}function FUe(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(let i of e.sourceLayer.inboundNodes[r].outputTensors)if(i.id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}var zUe=fe();zUe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,RUe);var nre={};Dt(nre,{maxNorm:()=>BUe,minMaxNorm:()=>jUe,nonNeg:()=>VUe,unitNorm:()=>WUe});function rF(e,t){return ue(()=>Di(ot(se(e,e),t,!0)))}var Yw=class extends $e.Serializable{getConfig(){return{}}},iF=class extends Yw{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>{let t=rF(e,this.axis),n=Qi(t,0,this.maxValue);return se(e,Qe(n,we(Qr(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};iF.className="MaxNorm";$e.registerClass(iF);var aF=class extends Yw{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>Qe(e,we(Qr(),rF(e,this.axis))))}getConfig(){return{axis:this.axis}}};aF.className="UnitNorm";$e.registerClass(aF);var sF=class extends Yw{apply(e){return On(e)}};sF.className="NonNeg";$e.registerClass(sF);var oF=class extends Yw{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ue(()=>{let t=rF(e,this.axis),n=we(se(this.rate,Qi(t,this.minValue,this.maxValue)),se(1-this.rate,t));return se(e,Qe(n,we(Qr(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};oF.className="MinMaxNorm";$e.registerClass(oF);var iU={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ni(e){return GL(e)}function aU(e,t={}){return Kw(e,$e.SerializationMap.getMap().classNameMap,t,"constraint")}function ri(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in iU?iU[e]:e,config:{}};return aU(t)}else return e instanceof Yw?e:aU(e)}function BUe(e){return new iF(e)}function WUe(e){return new aF(e)}function VUe(){return new sF}function jUe(e){return new oF(e)}var rre={};Dt(rre,{constant:()=>GUe,glorotNormal:()=>QUe,glorotUniform:()=>YUe,heNormal:()=>e8e,heUniform:()=>t8e,identity:()=>XUe,leCunNormal:()=>n8e,leCunUniform:()=>r8e,ones:()=>UUe,orthogonal:()=>i8e,randomNormal:()=>KUe,randomUniform:()=>qUe,truncatedNormal:()=>ZUe,varianceScaling:()=>JUe,zeros:()=>HUe});function HUe(){return new ZL}function UUe(){return new oT}function GUe(e){return new XL(e)}function qUe(e){return new JL(e)}function KUe(e){return new YL(e)}function ZUe(e){return new QL(e)}function XUe(e){return new eF(e)}function JUe(e){return new Wa(e)}function YUe(e){return new lT(e)}function QUe(e){return new uT(e)}function e8e(e){return new cT(e)}function t8e(e){return new dT(e)}function n8e(e){return new pT(e)}function r8e(e){return new hT(e)}function i8e(e){return new tF(e)}var ire={};Dt(ire,{Layer:()=>Xt,RNN:()=>ec,RNNCell:()=>ex,activation:()=>AGe,add:()=>jGe,alphaDropout:()=>I7e,average:()=>HGe,averagePooling1d:()=>bz,averagePooling2d:()=>wz,averagePooling3d:()=>xz,avgPool1d:()=>QGe,avgPool2d:()=>t7e,avgPool3d:()=>r7e,avgPooling1d:()=>e7e,avgPooling2d:()=>n7e,avgPooling3d:()=>i7e,batchNormalization:()=>XGe,bidirectional:()=>v7e,categoryEncoding:()=>O7e,centerCrop:()=>N7e,concatenate:()=>UGe,conv1d:()=>CGe,conv2d:()=>IGe,conv2dTranspose:()=>$Ge,conv3d:()=>TGe,conv3dTranspose:()=>NGe,convLstm2d:()=>f7e,convLstm2dCell:()=>m7e,cropping2D:()=>OGe,dense:()=>RGe,depthwiseConv2d:()=>MGe,dot:()=>ZGe,dropout:()=>DGe,elu:()=>bGe,embedding:()=>VGe,flatten:()=>FGe,gaussianDropout:()=>C7e,gaussianNoise:()=>S7e,globalAveragePooling1d:()=>a7e,globalAveragePooling2d:()=>s7e,globalMaxPool1d:()=>w7e,globalMaxPool2d:()=>x7e,globalMaxPooling1d:()=>iie,globalMaxPooling2d:()=>aie,gru:()=>l7e,gruCell:()=>u7e,input:()=>_re,inputLayer:()=>vGe,layerNormalization:()=>JGe,leakyReLU:()=>xGe,lstm:()=>c7e,lstmCell:()=>d7e,masking:()=>$7e,maxPool1d:()=>_7e,maxPool2d:()=>k7e,maxPooling1d:()=>sie,maxPooling2d:()=>oie,maxPooling3d:()=>o7e,maximum:()=>GGe,minimum:()=>qGe,multiply:()=>KGe,permute:()=>WGe,prelu:()=>_Ge,randomWidth:()=>P7e,reLU:()=>wGe,repeatVector:()=>zGe,rescaling:()=>T7e,reshape:()=>BGe,resizing:()=>E7e,rnn:()=>g7e,separableConv2d:()=>EGe,simpleRNN:()=>p7e,simpleRNNCell:()=>h7e,softmax:()=>kGe,spatialDropout1d:()=>LGe,stackedRNNCells:()=>y7e,thresholdedReLU:()=>SGe,timeDistributed:()=>b7e,upSampling2d:()=>PGe,zeroPadding2d:()=>YGe});async function vc(e){if(e==null)return;let t=[],n=[],r=[];for(let i in e){let a=e[i];if(typeof a!="number"){let s=a;t.push(s.data()),n.push(i),r.push(s)}}if(t.length>0){let i=await Promise.all(t);for(let a=0;a<i.length;++a)e[n[a]]=i[a][0];Rt(r)}}function are(e){if(e!=null)for(let t in e){let n=e[t];typeof n!="number"&&n.dispose()}}var sU;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(sU||(sU={}));var a8e=125,my=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},sre=class{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},s8e=class extends my{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});let n=t.size==null?0:t.size;this.seen+=n;for(let r in t){let i=t[r];if(typeof i=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+i*n;else{let a;r in this.totals?a=this.totals[r]:this.totals[r]=0;let s=ue(()=>we(this.totals[r],se(i,n)));this.totals[r]=s,a!=null&&a.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(let n of this.params.metrics)this.totals[n]!=null&&(typeof this.totals[n]=="number"?t[n]=this.totals[n]/this.seen:ue(()=>{let r=se(Qe(1,this.seen),this.totals[n]);t[n]=r,this.totals[n].dispose(),Yr(t[n])}))}},ore=class extends my{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(let n in t)this.history[n]==null&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let i in this.history){let a=this.history[i];for(let s=0;s<a.length;++s)if(typeof a[s]!="number"){let o=a[s];e.push(o.data()),t.push(i),n.push(s)}}let r=await Promise.all(e);for(let i=0;i<r.length;++i)this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=r[i][0]}},lre=class extends my{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||HL,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=a8e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");M.isNumber(this.yieldEvery)&&(this.maybeWait=aUe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];this.yield!=null&&(await vc(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await vc(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];this.epochEnd!=null&&(await vc(t),n.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){this.batchBegin!=null&&(await vc(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];this.batchEnd!=null&&(await vc(t),n.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?n.push(this.nextFrameFunc()):M.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){this.trainBegin!=null&&(await vc(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await vc(e),await this.trainEnd(e))}};function ure(e,t){return e==null&&(e={}),e instanceof my?[e]:Array.isArray(e)&&e[0]instanceof my?e:En(e).map(n=>new lre(n,t))}var lF=class ml{constructor(){}static registerCallbackConstructor(t,n){M.assert(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),ml.checkForDuplicate(n),ml.constructors[t]==null&&(ml.constructors[t]=[]),ml.constructors[t].push(n)}static checkForDuplicate(t){for(let n in ml.constructors)ml.constructors[+n].forEach(r=>{if(r===t)throw new de("Duplicate callback constructor.")})}static clear(){ml.constructors={}}static createCallbacks(t){let n=[];for(let r in ml.constructors){let i=+r;t>=i&&n.push(...ml.constructors[i])}return n.map(r=>new r)}};lF.constructors={};function cre(e,t,n,r,i,a,s,o,l){let u=new ore,c=[new s8e,...lF.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);let d=new sre(c);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:d,history:u}}function jo(e,t={},n=!1){return Kw(e,$e.SerializationMap.getMap().classNameMap,t,"layer",n)}function vI(e,t){return ue(()=>{e.dtype!=="float32"&&(e=Ae(e,"float32"));let n=ot(Xw(e),t,!0),r=ps(n.shape,Qr()),i=Di(Jl(n,r));return Qe(e,i)})}function om(e,t){return ue(()=>gr(Xw(Ve(t,e)),-1))}function mT(e,t){return ue(()=>gr(Dr(Ve(t,e)),-1))}function e0(e,t){return ue(()=>{let n=Ve(e,t),r=Qi(Dr(e),Qr(),Number.MAX_VALUE),i=Dr(Qe(n,r));return se(100,gr(i,-1))})}function o8e(e,t){return ue(()=>{let n=Qi(t,Qr(),Number.MAX_VALUE),r=ys(we(1,n)),i=Qi(e,Qr(),Number.MAX_VALUE),a=ys(we(1,i));return gr(Xw(Ve(r,a)),-1)})}function l8e(e,t){return ue(()=>{let n=Jl(0,Ve(1,se(e,t)));return gr(Xw(n),-1)})}function u8e(e,t){return ue(()=>{let n=Jl(0,Ve(1,se(e,t)));return gr(n,-1)})}function c8e(e,t){return ue(()=>{let n=ot(se(e,t),-1),r=Ds(se(Ve(1,e),t),-1);return Jl(0,we(1,Ve(r,n)))})}function d8e(e,t){return ue(()=>{let n=Math.log(2),r=Ve(t,e),i=Ve(we(r,im(se(-2,r))),n);return gr(i,-1)})}function x1(e,t,n=!1){return ue(()=>{if(n)t=zd(t);else{let r=ot(t,t.shape.length-1,!0);t=Qe(t,r)}return t=Qi(t,Qr(),1-Qr()),Xn(ot(se(Ae(e,"float32"),ys(t)),t.shape.length-1))})}function bI(e,t,n=!1){return ue(()=>{let r=Ae(Kv(yUe(e)),"int32");t=Qi(t,Qr(),1-Qr());let i=t.shape,a=le(uy(r,i[i.length-1]),i);return x1(a,t,n)})}function p8e(e,t){if(!M.arraysEqual(e.shape,t.shape))throw new de(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return ue(()=>{let n=On(t),r=Xn(Dr(t));return we(Ve(n,se(t,e)),Fw(ea(r)))})}function gT(e,t){return ue(()=>{let n;return n=Qi(t,Qr(),1-Qr()),n=ys(Qe(n,Ve(1,n))),gr(p8e(e,n),-1)})}function h8e(e,t){return ue(()=>{let n=Qi(e,Qr(),1),r=Qi(t,Qr(),1);return ot(se(e,ys(Qe(n,r))),-1)})}function f8e(e,t){return ue(()=>{let n=ys(we(Qr(),t));return gr(Ve(t,se(e,n)),-1)})}function uF(e,t){return ue(()=>{let n=vI(e,-1),r=vI(t,-1),i=se(n,r);return Xn(ot(i,-1))})}var wI={meanSquaredError:om,meanAbsoluteError:mT,meanAbsolutePercentageError:e0,meanSquaredLogarithmicError:o8e,squaredHinge:l8e,hinge:u8e,categoricalHinge:c8e,logcosh:d8e,categoricalCrossentropy:x1,sparseCategoricalCrossentropy:bI,binaryCrossentropy:gT,kullbackLeiblerDivergence:h8e,poisson:f8e,cosineProximity:uF};function CE(e){if(typeof e=="string"){if(e in wI)return wI[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new de(t)}else return e}function cF(e,t){return ue(()=>{let n=se(.5,vs(t)),r=zu(Ca(t,n),e.dtype);return gr(gs(e,r),-1)})}function dF(e,t){return ue(()=>zu(gs(dh(e,-1),dh(t,-1)),"float32"))}function dre(e,t){return ue(()=>Ae(ot(mo(gs(e,1),gs(t,1))),"float32"))}function m8e(e,t){return ue(()=>Ae(ot(mo(gs(e,1),gs(t,0))),"float32"))}function g8e(e,t){return ue(()=>Ae(ot(mo(gs(e,0),gs(t,1))),"float32"))}function pre(e,t){return ue(()=>{let n=dre(e,t),r=g8e(e,t),i=we(n,r);return Ae(wi(Ca(i,0),Qe(n,i),0),"float32")})}function y8e(e,t){return ue(()=>{let n=dre(e,t),r=m8e(e,t),i=we(n,r);return Ae(wi(Ca(i,0),Qe(n,i),0),"float32")})}function hre(e,t){return gT(e,t)}function fre(e,t){return e.rank===t.rank&&(e=Bd(e,[e.rank-1])),t=dh(t,-1),t.dtype!==e.dtype&&(t=Ae(t,e.dtype)),Ae(gs(e,t),"float32")}var v8e=om,b8e=om,w8e=mT,x8e=mT,_8e=e0,k8e=e0,pF=x1,S8e=uF,mre=bI,xI={binaryAccuracy:cF,categoricalAccuracy:dF,precision:pre,categoricalCrossentropy:pF,sparseCategoricalCrossentropy:mre,mse:v8e,MSE:b8e,mae:w8e,MAE:x8e,mape:_8e,MAPE:k8e,cosine:S8e};function C8e(e){if(typeof e=="string"&&e in xI)return xI[e];if(typeof e!="string"&&e!=null)return e;throw new de(`Unknown metric ${e}`)}function C_(e){if(Sl(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(let n of Object.keys(wI))if(wI[n]===e){t=n;break}if(t!==void 0)return t;for(let n of Object.keys(xI))if(xI[n]===e){t=n;break}return t!==void 0?t:e.name}}function I8e(e){let t={Adagrad:()=>fp.adagrad(.01),Adadelta:()=>fp.adadelta(1,.95,Qr()),Adam:()=>fp.adam(.001,.9,.999,Qr()),Adamax:()=>fp.adamax(.002,.9,.999,Qr(),0),RMSProp:()=>fp.rmsprop(.001,.9,0,Qr()),SGD:()=>fp.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new de(`Unknown Optimizer ${e}`)}function oU(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!eM(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let r=JSON.stringify(e);r.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function eM(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let n of t)if(typeof n!="string"||!eM(e[n]))return!1;return!0}else if(Array.isArray(e)){for(let t of e)if(!eM(t))return!1;return!0}else return!1;else{let t=typeof e;return t==="string"||t==="number"||t==="boolean"}}function $8e(e,t,n,r=console.log){let i=N8e(e),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let s;if(!i){a.push("Receives inputs"),s=[];for(let c in e.nodesByDepth)s.push(...e.nodesByDepth[c])}r("_".repeat(t)),_I(a,n,r),r("=".repeat(t));let o=e.layers;for(let c=0;c<o.length;++c)i?E8e(o[c],n,r):O8e(o[c],n,s,r),r((c===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=T8e(e),u=mI(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function T8e(e){let t;return e.collectedTrainableWeights!=null?t=mI(e.collectedTrainableWeights):t=mI(e.trainableWeights),t}function N8e(e){let t=!0,n=[],r=[];for(let i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(let i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(let i of e.layers){let a=!1;for(let s of i.inboundNodes)if(r.indexOf(s)!==-1)if(a){t=!1;break}else a=!0;if(!t)break}return t}function _I(e,t,n=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function E8e(e,t,n){let r,i;try{i=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}let a=e.name,s=e.getClassName(),o=[`${a} (${s})`,i,r,e.countParams().toString()];_I(o,t,n)}function O8e(e,t,n,r){let i,a;try{a=e.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}let s=[];for(let d of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];s.push(`${h}[${m}][${g}]`)}let o=e.name,l=e.getClassName(),u=s.length===0?"":s[0],c=[`${o} (${l})`,a,i,e.countParams().toString(),u];_I(c,t,r);for(let d=1;d<s.length;++d)_I(["","","","",s[d]],t,r)}function gre(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function _1(e,t){if(e===null)return null;if(typeof e=="string")return bp(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let i=0;i<r;++i){let a=e[i];gre(t,i,a)?n.push(a):n.push(_1(a,t))}return n}else{let n={};for(let r of Object.keys(e)){let i=e[r];if(r==="name"&&typeof i=="string")n[r]=i;else{let a=bp(r);n[a]=_1(i,a)}}return n}}function tM(e,t){if(e==null)return null;if(typeof e=="string")return gu(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){let n=[],r=e.length;for(let i=0;i<r;++i){let a=e[i];gre(t,i,a)?n.push(a):n.push(tM(a,t))}return n}else{let n={};for(let r of Object.keys(e)){let i=e[r],a=gu(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=tM(i,r)}return n}}var hF="4.16.0",P8e=e=>{let t=Object.keys(e);if(t.length===0)return!1;let n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))},M8e=class gl extends Xt{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=aT(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],ed(this.inputs).length!==this.inputs.length)throw new de(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);ed(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let _=b.sourceLayer,k=b.nodeIndex,S=b.tensorIndex;this.outputLayers.push(_),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(S)}for(let b of this.inputs){let _=b.sourceLayer,k=b.nodeIndex,S=b.tensorIndex;Sl(k===0,"input layer has >1 nodes"),Sl(S===0,"input layer has >1 tensors"),this.inputLayers.push(_),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(S)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let _=this.inputLayers[b];if(!(_ instanceof Qv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${_.getClassName()}.`);this.inputNames.push(_.name),this.feedInputShapes.push(_.batchInputShape),this.feedInputNames.push(_.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let n={},r={},i={},a={},s={},o=[],l=(b,_,k,S,$,N)=>{(S==null||$==null||N==null)&&(S=b.sourceLayer,$=b.nodeIndex,N=b.tensorIndex);let P=S.inboundNodes[$];if(k.indexOf(P)!==-1)throw new Ol(`The tensor ${b.name} at layer "${S.name}" is part of a cycle.`);if(_.indexOf(P)!==-1)return;this.containerNodes.add(gl.nodeKey(S,$)),S.id in s||(s[S.id]=Object.keys(s).length),k.indexOf(P)===-1&&k.push(P);let D=P.inboundLayers.length;for(let O=0;O<D;O++){let F=P.inputTensors[O],E=P.inboundLayers[O],z=P.nodeIndices[O],q=P.tensorIndices[O];l(F,_,k,E,z,q)}for(_.push(P);k.indexOf(P)>=0;)k.splice(k.indexOf(P),1);o.push(P)},u=[],c=[];for(let b of this.outputs)l(b,u,c);let d=o.slice().reverse();for(let b of d){r[b.id]=b,b.id in n||(n[b.id]=0);let _=n[b.id],k=i[b.outboundLayer.id]==null?0:i[b.outboundLayer.id];_=Math.max(_,k),i[b.outboundLayer.id]=_,a[b.outboundLayer.id]=b.outboundLayer,n[b.id]=_;for(let S=0;S<b.inboundLayers.length;S++){let $=b.inboundLayers[S],N=b.nodeIndices[S],P=$.inboundNodes[N],D=n[P.id]==null?0:n[P.id];n[P.id]=Math.max(_+1,D),r[P.id]=P}}let p={};for(let b in n){let _=n[b];_ in p||(p[_]=[]),p[_].push(r[b])}let h={};for(let b in i){let _=i[b];_ in h||(h[_]=[]),h[_].push(a[b])}let m=Object.keys(h).map(b=>parseInt(b,10)).sort(__);this.layers=[];for(let b of m){let _=h[b];_.sort((k,S)=>{let $=s[k.id],N=s[S.id];return $<N?-1:$>N?1:0});for(let k of _)k instanceof gl&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=h,m=Object.keys(p).map(b=>parseInt(b,10)).sort(__);let g=this.inputs.slice(),y=[];for(let b of m)for(let _ of p[b]){let k=_.outboundLayer;if(k!=null){for(let S of _.inputTensors)if(g.indexOf(S)===-1)throw new Ol(`Graph disconnected: cannot obtain value for tensor ${S} at layer "${k.name}". The following previous layers were accessed without issue: ${y}`);for(let S of _.outputTensors)g.push(S);y.push(k.name)}}this.nodesByDepth=p;let v=this.layers.map(b=>b.name);for(let b of v){let _=v.filter(k=>k===b).length;if(_!==1)throw new Ol(`The name "${b}" is used ${_} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new fT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(let n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new de("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(let n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){let t=[];for(let n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let r of this.layers)n.push(...r.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){let r={},i=0,a=P8e(t);a&&this.parseWeights(t);for(let o of this.layers)for(let[l,u]of o.weights.entries()){let c=a?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new de(`Duplicate weight name: ${c}`);r[c]=u,i++}let s=[];for(let o in t){let l=o;if(r[o]==null){let u=o.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)s.push([r[l],t[o]]);else if(n)throw new de(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){let o=[];for(let l in r)o.push(l);if(o.length>0)throw new de(`${o.length} of ${i} weights are not set: ${o}`)}nF(s)}parseWeights(t){for(let n in Object.keys(t)){let r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],a=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!i.includes(s)).join("/");a!==n&&(t[a]=t[n],delete t[n])}}updatedConfig(){let t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${hF}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){let r=tM(this.updatedConfig());return n?JSON.stringify(r):r}call(t,n){return ue(()=>{t=En(t);let r=new gg;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],t[i]);return cb(this.outputs,r,n)})}computeMask(t,n){return ue(()=>{t=En(t);let r;return n==null?r=yh(null,t.length):r=En(n),this.runInternalGraph(t,r)[1]})}computeOutputShape(t){let n=fI(t);if(n.length!==this.inputLayers.length)throw new de(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let o=0;o<n.length;o++){let l=this.inputLayers[o],u=n[o],c=l.name+"_0_0";r[c]=u}let i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(__);if(i.length>1)for(let o of i){let l=this.nodesByDepth[o];for(let u of l){let c=u.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(c.id)!==-1)continue;let d=[];for(let g=0;g<u.inboundLayers.length;g++){let y=u.inboundLayers[g],v=u.nodeIndices[g],b=u.tensorIndices[g],_=`${y.name}_${v}_${b}`,k=r[_];d.push(k)}let p=c.computeOutputShape(Ma(d)),h=fI(p),m=c.inboundNodes.indexOf(u);for(let g=0;g<h.length;g++){let y=`${c.name}_${m}_${g}`;r[y]=h[g]}}}let a=[],s=[];for(let o=0;o<this.outputLayers.length;o++){let l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],d=`${l.name}_${u}_${c}`;s.push(d)}for(let o=0;o<s.length;o++){let l=s[o];Sl(l in r),a.push(r[l])}return Ma(a)}runInternalGraph(t,n){n==null&&(n=yh(null,t.length));let r={};for(let l=0;l<this.inputs.length;++l){let u=this.inputs[l],c=t[l],d=n[l];r[u.id]=[c,d]}let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(__);for(let l of i){let u=this.nodesByDepth[l];for(let c of u){let d=c.outboundLayer,p=c.inputTensors,h=c.outputTensors,m=new Array;for(let g of p)g.id in r&&m.push(r[g.id]);if(m.length===p.length){let g={},y,v,b,_;if(c.callArgs!=null&&(g=c.callArgs),m.length===1){let[k,S]=m[0];g.mask==null&&(g.mask=S),b=En(d.call(k,g)),_=En(d.computeMask(k,S)),y=[k],v=[S]}else y=m.map(k=>k[0]),v=m.map(k=>k[1]),g.mask==null&&(g.mask=v),b=En(d.call(y,g)),_=En(d.computeMask(y,v));if(d.activityRegularizer)throw new qt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<h.length;++k){let S=h[k],$=b[k],N=_[k];r[S.id]=[$,N]}}}}let a=[],s=[],o=[];for(let l of this.outputs){Sl(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[u,c]=r[l.id];o.push(u.shape),a.push(u),s.push(c)}return[a,s,o]}buildNodeConversionMap(t){let n={},r;for(let i of this.layers){r=i instanceof gl?1:0;for(let a=0;a<i.inboundNodes.length;a++){let s=gl.nodeKey(i,a);this.containerNodes.has(s)&&(n[s]=r,r+=1)}}return n}getLayer(t,n){if(n!=null)return this.findLayer(n);if(t==null)throw new de("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(let r of this.layers)if(r.name===t)return r;throw new de(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new de(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return ue(()=>{let t=[];for(let n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){let i=gl.nodeKey(n,r);this.containerNodes.has(i)&&t.push(...n.calculateLosses())}return t})}getConfig(){let t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let o=s.getClassName(),l=s.getConfig(),u=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=gl.nodeKey(s,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let y=0;y<p.inboundLayers.length;y++){let v=p.inboundLayers[y],b=p.nodeIndices[y],_=p.tensorIndices[y],k=gl.nodeKey(v,b),S=n[k];S==null&&(S=0),g.push([v.name,S,_,m])}u.push(g)}}}let c={};c.name=s.name,c.className=o,c.config=l,c.inboundNodes=u,r.push(c)}t.layers=r;let i=[];for(let s=0;s<this.inputLayers.length;s++){let o=this.inputLayers[s],l=this.inputLayersNodeIndices[s],u=gl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);let d=this.inputLayersTensorIndices[s];i.push([o.name,c,d])}t.inputLayers=i;let a=[];for(let s=0;s<this.outputLayers.length;s++){let o=this.outputLayers[s],l=this.outputLayersNodeIndices[s],u=gl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);let d=this.outputLayersTensorIndices[s];a.push([o.name,c,d])}return t.outputLayers=a,t}static fromConfig(t,n,r={},i=!1){let a={},s={};function o(y,v){y.name in s?s[y.name].push(v):s[y.name]=[v]}function l(y,v){let b=[],_;for(let k of v){let S=k[0],$=k[1],N=k[2];if(_=k[3]==null?{}:k[3],!(S in a)){o(y,v);return}let P=a[S];if(P.inboundNodes.length<=$){o(y,v);return}let D=P.inboundNodes[$];b.push(D.outputTensors[N])}b.length>0&&y.apply(Ma(b),_)}function u(y){let v=y.name,b=jo(y,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(i),a[v]=b,y.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new de(`Corrupted configuration, expected array for nodeData: ${_}`);o(b,_)})}let c=n.name,d=n.layers;for(let y of d)u(y);for(;!iUe(s);)for(let y of d){let v=a[y.name];if(v.name in s){let b=s[v.name];delete s[v.name];for(let _ of b)l(v,_)}}let p=[],h=[],m=n.inputLayers;for(let y of m){let v=y[0],b=y[1],_=y[2];Sl(v in a);let k=a[v].inboundNodes[b].outputTensors;p.push(k[_])}let g=n.outputLayers;for(let y of g){let v=y[0],b=y[1],_=y[2];Sl(v in a);let k=a[v].inboundNodes[b].outputTensors;h.push(k[_])}return new t({inputs:p,outputs:h,name:c})}get stateful(){if(this._stateful)throw new de("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let t of this.layers)if(t.stateful)return!0;return!1}resetStates(){ue(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}};function A8e(e,t,n){let r=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(i=>null);if(r===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){let i=[];return t.forEach(a=>{a in e?i.push(e[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function yre(e,t){return A8e(e,t,"classWeight")}async function vre(e,t,n,r){if(t!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){let i=ue(()=>{if(e.shape.length===1)return zl(e);if(e.shape.length===2){if(e.shape[1]>1)return dh(e,1);if(e.shape[1]===1)return le(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());Rt(i);let s=[];return a.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(n[o])}),$n(s,"float32")}else return null}function R8e(e,t){return se(e,t)}var D8e=32;function bre(e,t){let n,r,i=t;n=i.xs,r=i.ys,M.assert(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let a=lU("input",e.inputNames,n),s=lU("output",e.outputNames,r),o=a[0].shape[0];M.assert(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),M.assert(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<a.length;l++)M.assert(a[l].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let l=0;l<s.length;l++)M.assert(s[l].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:a,ys:s}}function lU(e,t,n){if(n instanceof zt)return[n];if(Array.isArray(n))return M.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let i of t){if(n[i]==null)throw new de(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}function L8e(e){if(e.length===3)throw new qt("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function F8e(e,t,n){let r=n.batchesPerEpoch!=null;if(M.assert(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),M.assert(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),M.assert(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),M.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),M.assert(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let i=n.validationData!=null,a,s;if(i)if(uU(n.validationData))M.assert(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let y=L8e(n.validationData);a=y.xs,s=y.ys}let o=e.makeTrainFunction(),l=e.getDedupedMetricsNames(),u;i?u=l.slice().concat(l.map(y=>"val_"+y)):u=l.slice();let c=ure(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:h}=cre(c,d,n.epochs,null,null,z8e(t,n),null,i,u);p.setModel(e),e.history=h,await p.onTrainBegin(),e.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,g=await t.iterator();for(;m<n.epochs;){let y={};await p.onEpochBegin(m);let v=0,b=0;for(r||(g=await t.iterator());!r||v<n.batchesPerEpoch;){let _=await g.next();if(r&&_.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(_.value!=null){let{xs:k,ys:S}=bre(e,_.value),$={};$.batch=b,$.size=k[0].shape[0],await p.onBatchBegin(b,$);let N=[];if(n.classWeight!=null){let O=yre(n.classWeight,e.outputNames);for(let F=0;F<O.length;++F)N.push(await vre(S[F],null,O[F]))}let P=k.concat(S).concat(N),D=o(P);Rt(P);for(let O=0;O<l.length;++O){let F=l[O],E=D[O];$[F]=E,Yr(E)}await p.onBatchEnd(b,$),are($),b++,v++}if(r?v>=n.batchesPerEpoch:_.done){if(i){let k;uU(n.validationData)?k=En(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):k=En(e.evaluate(a,s,{batchSize:n.validationBatchSize==null?D8e:n.validationBatchSize,verbose:0}));for(let S=0;S<e.metricsNames.length;++S)y[`val_${e.metricsNames[S]}`]=k[S]}break}if(e.stopTraining_)break}if(await p.onEpochEnd(m,y),m++,e.stopTraining_)break}return await p.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function z8e(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function uU(e){return typeof e.iterator=="function"}function B8e(e){return typeof e.next=="function"}async function W8e(e,t,n){n=n||{};let r=n.batches!=null,i=e.testFunction,a=[];if(n.verbose>0)throw new qt("Verbose mode is not implemented yet.");M.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let s=B8e(t)?t:await t.iterator(),o=0,l=0;for(;!r||l<n.batches;){let u=await s.next();if(a=ue(()=>{if(u.value){let{xs:c,ys:d}=bre(e,u.value),p=c.concat(d),h=ue(()=>i(p));if(Rt(p),l===0)for(let g=0;g<h.length;++g)a.push(gt(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let y=h[g],v=a[g];a[g]=ue(()=>we(a[g],se(m,y))),l>0&&Rt(v)}Rt(h),o+=m,++l}return a}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<a.length;++u){let c=a[u];a[u]=Qe(a[u],o),Rt(c)}return Ma(a)}function IE(e){M.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function X0(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(r=>Wp(r,t,n-t)):Wp(e,t,n-t)}function nM(e,t){return ue(()=>e==null?null:Array.isArray(e)?e.map(n=>nM(n,t)):Xne(e,t.dtype==="int32"?t:Ae(t,"int32")))}function $E(e,t){let n=[],r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function wre(e){let t=[];e instanceof zt&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(r.rank===1)t.push(Zw(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Eo(e,t){if(e==null)return;let n=[];if(t instanceof zt)n.push(t.id);else if(Array.isArray(t))t.forEach(i=>n.push(i.id));else if(t!=null)for(let i in t){let a=t[i];n.push(a.id)}let r=[];if(e instanceof zt)n.indexOf(e.id)===-1&&r.push(e);else if(Array.isArray(e))e.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(e!=null)for(let i in e){let a=e[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}function V8e(e){return e instanceof zt}function rM(e){return Array.isArray(e)}function cU(e){return!V8e(e)&&!rM(e)}function dU(e,t,n,r=!0,i=""){if(t==null||t.length===0){if(e!=null){let s=!1;if(rM(e)&&e.length>0)s=!0;else if(cU(e)){for(let o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new de(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(s=>null);let a;if(cU(e)){e=e,a=[];for(let s of t){if(e[s]==null)throw new de(`No data provided for "${s}". Need data for each key in: ${t}`);a.push(e[s])}}else if(rM(e)){if(e=e,e.length!==t.length)throw new de(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);a=e}else{if(e=e,t.length>1)throw new de(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);a=[e]}if(a=wre(a),n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=a[s];if(o.shape.length!==n[s].length)throw new de(`Error when checking ${i}: expected ${t[s]} to have ${n[s].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let u=o.shape[l],c=n[s][l];if(c!=null&&c>=0&&u!==c)throw new de(`${i} expected a batch of elements where each example has shape [${n[s].slice(1,n[s].length)}] (i.e.,tensor shape [*,${n[s].slice(1,n[s].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function j8e(e,t,n){let r=ed(e.map(a=>a.shape[0]));r.sort();let i=ed(t.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new de(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(i.length>1)throw new de(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!M.arraysEqual(r,i))throw new de(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function H8e(e,t,n){let r=[om,gT,x1];for(let i=0;i<e.length;++i){let a=e[i],s=t[i],o=n[i];if(s!=null){if(s===x1&&a.shape[a.shape.length-1]===1)throw new de(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(s)!==-1){let l=a.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){let d=l[c],p=u[c];if(p!=null&&d!==p)throw new de(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function pU(e,t,n,r=!0,i=""){let a;if(Array.isArray(e)){if(e.length!==t.length)throw new de(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);a=e}else{if(t.length>1)throw new de(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);a=[e]}if(n!=null)for(let s=0;s<t.length;++s){if(n[s]==null)continue;let o=a[s];if(o.shape.length!==n[s].length)throw new de(`Error when checking ${i}: expected ${t[s]} to have ${n[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[s].length;++l){if(l===0&&!r)continue;let u=o.shape[l],c=n[s][l];if(c!=null&&c!==u)throw new de(`Error when checking ${i}: expected ${t[s]} to have shape ${JSON.stringify(n[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function U8e(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(r=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(r=>n);{let r=[];for(let i of t){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}var G8e="layers-model",Iu=class extends M8e{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new de("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");$8e(this,e,t,n)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=I8e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qu))throw new de("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new de(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),t.push(CE(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new de(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(a=>CE(a))}else{let a=CE(e.loss);this.outputs.forEach(s=>{t.push(a)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let s=this.internalOutputShapes[a],o=this.outputNames[a];this.feedOutputNames.push(o),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Bp("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(n.indexOf(a)!==-1)continue;let s=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([s,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let r=U8e(e.metrics,this.outputNames),i=(a,s,o)=>{this.outputNames.length>1&&(s=this.outputNames[a]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([o,a])};Bp("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(n.indexOf(a)!==-1)continue;let s=r[a];(o=>{let l="",u,c,d;for(let p of o){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){let m=this.internalOutputShapes[a];m[m.length-1]===1||this.lossFunctions[a]===gT?["accuracy","acc"].indexOf(p)!==-1?c=cF:["crossentropy","ce"].indexOf(p)!==-1&&(c=hre):this.lossFunctions[a]===bI?["accuracy","acc"].indexOf(p)!==-1?c=fre:["crossentropy","ce"].indexOf(p)!==-1&&(c=mre):["accuracy","acc"].indexOf(p)!==-1?c=dF:["crossentropy","ce"].indexOf(p)!==-1&&(c=pF);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),d=c,u=l+g}else d=C8e(p),u=l+C_(p);let h;Bp(u,()=>{h=d}),i(a,u,h)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let r=n.batchSize==null?32:n.batchSize;IE(r);let i=this.standardizeUserDataXY(e,t,!0,r);try{let a=i[0].concat(i[1]);this.makeTestFunction();let s=this.testFunction,o=this.testLoop(s,a,r,n.verbose,n.steps);return Ma(o)}finally{Eo(i[0],e),Eo(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),W8e(this,e,t)}checkNumSamples(e,t,n,r="steps"){let i;if(n!=null){if(i=null,t!=null)throw new de(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new de(`Either the input data should have a defined shape, or ${r} shoud be specified.`);return i}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new de("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),a=new gg;if(e instanceof zt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new de(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let o=0;o<this.inputs.length;++o)a.add(this.inputs[o],e[o])}else for(let o of this.inputs){let l=e[o.name];if(l==null)throw new de(`No value is provided for the model's input ${o.name}`);a.add(o,l)}let s=cb(i,a);return n?s:s[0]}retrieveSymbolicTensors(e){let t=yh(null,e.length),n=e.length;for(let r of this.layers){let i=Array.isArray(r.output)?r.output:[r.output],a=i.map(s=>s.name);for(let s=0;s<e.length;++s){let o=a.indexOf(e[s]);if(o!==-1&&(t[s]=i[o],n--),n===0)break}if(n===0)break}if(n>0){let r=[];throw t.forEach((i,a)=>{i==null&&r.push(e[a])}),new de(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return t}predictLoop(e,t=32,n=!1){return ue(()=>{let r=this.checkNumSamples(e);if(n)throw new qt("Verbose predictLoop() is not implemented yet.");let i=$E(r,t),a=this.outputs.map(s=>[]);for(let s=0;s<i.length;++s)ue(()=>{let o=i[s][0],l=i[s][1],u=X0(e,o,l),c=[];if(Array.isArray(u))for(let p=0;p<u.length;++p)c.push({key:this.inputs[p],value:u[p]});else c.push({key:this.inputs[0],value:u});let d=new gg(c);return cb(this.outputs,d)}).forEach((o,l)=>a[l].push(o));return Ma(a.map(s=>Wn(s,0)))})}predict(e,t={}){let n=wre(e);pU(n,this.inputNames,this.feedInputShapes,!1);try{let r=t.batchSize==null?32:t.batchSize;return IE(r),this.predictLoop(n,r)}finally{Eo(n,e)}}predictOnBatch(e){pU(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(this.optimizer_==null)throw new Ol("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let i=[];for(let a=0;a<this.feedOutputShapes.length;++a){let s=this.feedOutputShapes[a];this.feedLossFns[a]===bI?i.push(s.slice(0,s.length-1).concat([1])):i.push(s)}if(e=dU(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=dU(t,this.feedOutputNames,i,!1,"target"),j8e(e,t),H8e(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&r!=null&&r>0&&e[0].shape[0]%r!==0)throw new de(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,i=!0,a){let[s,o]=this.standardizeUserDataXY(e,t,i,a);if(n!=null)throw new Error("sample weight is not supported yet.");let l=null;if(r!=null){let u=yre(r,this.outputNames);l=[];for(let c=0;c<u.length;++c)l.push(await vre(o[c],null,u[c]))}return[s,o,l]}testLoop(e,t,n,r=0,i){return ue(()=>{let a=this.checkNumSamples(t,n,i,"steps"),s=[];if(r>0)throw new qt("Verbose mode is not implemented yet.");if(i!=null)throw new qt("steps mode in testLoop() is not implemented yet");{let o=$E(a,n),l=$n(el(0,a));for(let u=0;u<o.length;++u){let c=o[u][0],d=o[u][1],p=Wp(l,c,d-c),h=nM(t,p),m=e(h);if(u===0)for(let g=0;g<m.length;++g)s.push(gt(0));for(let g=0;g<m.length;++g){let y=m[g];s[g]=we(s[g],se(d-c,y))}}for(let u=0;u<s.length;++u)s[u]=Qe(s[u],a)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],i=r;if(JH(e,r)>1){let a=JH(e.slice(0,n),r);i+=`_${a}`}t.push(i)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],s=()=>{let l=[];for(let p=0;p<this.inputs.length;++p)l.push({key:this.inputs[p],value:n[p]});let u=new gg(l),c=cb(this.outputs,u,{training:!0}),d;for(let p=0;p<this.lossFunctions.length;++p){let h=this.lossFunctions[p],m=h(r[p],c[p]);i[p]!=null&&(m=R8e(m,i[p]));let g=gr(m);t.push(g),p===0?d=m:d=we(d,m)}for(let p=0;p<this.metricsTensors.length;++p){let h;if(this.outputs.length>1&&p<this.outputs.length)h=t[p];else{let m=this.metricsTensors[p][0],g=this.metricsTensors[p][1];h=gr(m(r[g],c[g]))}Yr(h),a.push(h)}return d=gr(d),this.calculateLosses().forEach(p=>{d=we(d,p)}),d},o=this.collectedTrainableWeights.map(l=>l.read());return[this.optimizer_.minimize(s,!0,o)].concat(a)}}makeTestFunction(){this.testFunction=e=>ue(()=>{let t=[],n,r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let l=0;l<this.inputs.length;++l)a.push({key:this.inputs[l],value:r[l]});let s=new gg(a),o=cb(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){let u=this.lossFunctions[l],c=gr(u(i[l],o[l]));l===0?n=c:n=we(n,c),t.push(n)}for(let l=0;l<this.metricsTensors.length;++l){let u=this.metricsTensors[l][0],c=this.metricsTensors[l][1],d=gr(u(i[c],o[c]));t.push(d)}return t})}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let r,i,a,s,o,l,u,c,d;try{let p=n.batchSize==null?32:n.batchSize;IE(p);let h=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,!1,p);r=h[0],i=h[1],d=h[2];let m=!1,g;if(n.validationData!=null&&n.validationData.length>0){if(m=!0,n.validationData.length===2)o=n.validationData[0],l=n.validationData[1];else throw n.validationData.length===3?new qt("validationData including sample weights is not supported yet."):new de(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);let $=await this.standardizeUserData(o,l,null,null,!0,p);u=$[0],c=$[1],g=u.concat(c)}else if(n.validationSplit!=null&&n.validationSplit>0&&n.validationSplit<1){m=!0;let $=Math.floor(r[0].shape[0]*(1-n.validationSplit)),N=r[0].shape[0];u=X0(r,$,N),a=r,r=X0(r,0,$),c=X0(i,$,N),s=i,i=X0(i,0,$),g=u.concat(c)}else n.validationSteps!=null&&(m=!0);let y=r.concat(i).concat(d);this.checkTrainableWeightsConsistency();let v=this.makeTrainFunction(),b=this.getDedupedMetricsNames(),_,k;m?(this.makeTestFunction(),_=this.testFunction,k=b.slice().concat(b.map($=>"val_"+$))):(_=null,g=[],k=b.slice());let S=ure(n.callbacks,n.yieldEvery);return await this.fitLoop(v,y,b,p,n.epochs,n.verbose,S,_,g,n.shuffle,k,n.initialEpoch,null,null)}finally{this.isTraining=!1,Eo(r,e),Eo(i,t),Eo(a,e),Eo(s,t),Eo(u,o),Eo(c,l),d!=null&&Rt(d)}}async fitLoop(e,t,n,r,i,a,s,o,l,u,c,d,p,h){r==null&&(r=32),i==null&&(i=1),u==null&&(u=!0),d==null&&(d=0);let m=!1;if(o!=null&&l!=null&&(m=!0),h!=null&&(m=!0,p==null))throw new de("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let g=this.checkNumSamples(t,r,p,"steps_per_epoch"),y;g!=null&&(y=el(0,g)),a==null&&(a=1);let{callbackList:v,history:b}=cre(s,a,i,d,g,p,r,m,c);v.setModel(this),this.history=b,await v.onTrainBegin(),this.stopTraining_=!1;for(let _=d;_<i;++_){await v.onEpochBegin(_);let k={};if(p!=null)throw new qt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new qt("batch shuffling is not implemneted yet");u&&M.shuffle(y);let S=$n(y),$=$E(g,r);for(let N=0;N<$.length;++N){let P={};if(await v.onBatchBegin(N,P),ue(()=>{let D=$[N][0],O=$[N][1],F=Wp(S,D,O-D);P.batch=N,P.size=O-D;let E=nM(t,F),z=e(E);for(let q=0;q<n.length;++q){let K=n[q],Z=z[q];P[K]=Z,Yr(Z)}if(N===$.length-1&&m){let q=this.testLoop(o,l,r);for(let K=0;K<n.length;++K){let Z=n[K],te=q[K];Yr(te),k["val_"+Z]=te}}}),await v.onBatchEnd(N,P),are(P),this.stopTraining_)break}S.dispose()}if(await v.onEpochEnd(_,k),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return F8e(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],i=n[1],a=this.makeTrainFunction()(r.concat(i)),s=[];for(let o of a){let l=await o.data();s.push(l[0])}return Rt(a),Eo(n[0],e),Eo(n[1],t),Ma(s)}getNamedWeights(e){let t=[],n=e!=null&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:i[a]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let t=dI().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-dI().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=gu(this.loss);else if(Array.isArray(this.loss)){for(let t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>gu(t))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t)if(typeof n[r]=="string")e[r]=gu(n[r]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[gu(C_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>gu(C_(e)));{let e={};for(let t in this.metrics)e[t]=gu(C_(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let t=_1(e.optimizer_config),n=jo(t),r;if(typeof e.loss=="string")r=bp(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(a=>bp(a));else if(e.loss!=null){r={};for(let a in e.loss)r[a]=bp(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>bp(a));else if(e.metrics!=null){i={};for(let a in e.metrics)i[a]=bp(e.metrics[a])}this.compile({loss:r,metrics:i,optimizer:n})}async save(e,t){if(typeof e=="string"){let i=Oi.getSaveHandlers(e);if(i.length===0)throw new de(`Cannot find any save handlers for URL '${e}'`);if(i.length>1)throw new de(`Found more than one (${i.length}) save handlers for URL '${e}'`);e=i[0]}if(e.save==null)throw new de("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Oi.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:G8e,generatedBy:`TensorFlow.js tfjs-layers v${hF}`,convertedBy:null};if(t!=null&&t.includeOptimizer&&this.optimizer!=null){r.trainingConfig=this.getTrainingConfig();let i="optimizer",{data:a,specs:s}=await Oi.encodeWeights(await this.optimizer.getWeights(),i);n.specs.push(...s),n.data=Oi.concatenateArrayBuffers([n.data,a])}return this.userDefinedMetadata!=null&&(oU(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){oU(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Iu.className="Model";$e.registerClass(Iu);var xre=class extends Iu{};xre.className="Functional";$e.registerClass(xre);async function q8e(e,t){"modelTopology"in e||(e={modelTopology:e}),e=e;let n=e.modelTopology;n.model_config!=null&&(n=n.model_config);let r=_1(n),i=jo(r,t);if(e.weightsManifest!=null){let a=await Oi.loadWeights(e.weightsManifest,e.pathPrefix,i.weights.map(o=>o.originalName)),s={};for(let o of i.weights)s[o.originalName]=a[o.originalName];i.loadWeights(s),Rt(a)}return i}async function K8e(e,t){if(t==null&&(t={}),typeof e=="string"){let n=Oi.getLoadHandlers(e,t);if(n.length===0)n.push(Oi.browserHTTPRequest(e,t));else if(n.length>1)throw new de(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return Z8e(e,void 0,t)}async function Z8e(e,t,n){if(n==null&&(n={}),e.load==null)throw new de("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),i=r.modelTopology;i.model_config!=null&&(i=i.model_config);let a=n.strict==null?!0:n.strict,s=r.weightData!=null&&r.weightSpecs!=null&&a,o=jo(_1(i),t,s),l=r.trainingConfig;if(l!=null&&o.loadTrainingConfig(l),r.userDefinedMetadata!=null&&o.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new de("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:u,optimizerWeights:c}=X8e(r.weightData,r.weightSpecs);o.loadWeights(u,a),o.optimizer!=null&&c.length>0&&await o.optimizer.setWeights(c),Rt(u),Rt(c.map(d=>d.tensor))}return o}function X8e(e,t){let n=Oi.decodeWeights(e,t),r={},i=[];return t.forEach(a=>{a.group==="optimizer"?i.push({name:a.name,tensor:n[a.name]}):r[a.name]=n[a.name]}),{modelWeights:r,optimizerWeights:i}}var yT=class iM extends Iu{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:aT("sequential_"),t.layers!=null)for(let n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(n=>n<0))throw new de(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){let n=t instanceof iM||t instanceof Iu,r;if(n){if(r=t,r.outputs.length!==1)throw new de("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new de("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new de("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=ere({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(t.inboundNodes.length!==1)throw new de(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new de("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Qne(this.outputs[0])}this.inboundNodes=[],new fT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:yh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=t.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(pn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Iu({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,r=console.log){this.built||this.build(),super.summary(t,n,r)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,r={}){if(!this.built)throw new Ol("The model needs to be compiled before being used.");return this.model.evaluate(t,n,r)}async evaluateDataset(t,n){if(!this.built)throw new Ol("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,r={}){if(!this.built)throw new Ol("The model needs to be compiled before being used.");return this.model.fit(t,n,r)}async fitDataset(t,n){if(!this.built)throw new Ol("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,r={},i=!1){let a,s={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new de("Legacy serialization format not supported yet.");a=n}else M.assert(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,s=n;let o=new t(s);if(!(o instanceof iM))throw new qt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(let l of a){let u=jo(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),o.add(u)}return o}set stopTraining(t){if(this.model==null)throw new de("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new de("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let t=[];for(let n of this.layers){let r={};r.className=n.getClassName(),r.config=n.getConfig(),t.push(r)}return{name:this.name,layers:t}}};yT.className="Sequential";$e.registerClass(yT);function J8e(e){return new Iu(e)}function Y8e(e){return new yT(e)}function _re(e){return ere(e)}function Q8e(e,t){lF.registerCallbackConstructor(e,t)}var Xa=class extends $e.Serializable{getConfig(){return{}}},kre=class extends Xa{apply(e,t=1){return bUe(e,t)}};kre.className="elu";$e.registerClass(kre);var Sre=class extends Xa{apply(e){return V$(e)}};Sre.className="selu";$e.registerClass(Sre);var Cre=class extends Xa{apply(e){return On(e)}};Cre.className="relu";$e.registerClass(Cre);var Ire=class extends Xa{apply(e){return ue(()=>fd(6,On(e)))}};Ire.className="relu6";$e.registerClass(Ire);var $re=class extends Xa{apply(e){return e}};$re.className="linear";$e.registerClass($re);var Tre=class extends Xa{apply(e){return co(e)}};Tre.className="sigmoid";$e.registerClass(Tre);var Nre=class extends Xa{apply(e){return xUe(e)}};Nre.className="hardSigmoid";$e.registerClass(Nre);var Ere=class extends Xa{apply(e){return im(e)}};Ere.className="softplus";$e.registerClass(Ere);var Ore=class extends Xa{apply(e){return wUe(e)}};Ore.className="softsign";$e.registerClass(Ore);var Pre=class extends Xa{apply(e){return hh(e)}};Pre.className="tanh";$e.registerClass(Pre);var fF=class extends Xa{apply(e,t=-1){return zd(e,t)}};fF.className="softmax";$e.registerClass(fF);var Mre=class extends Xa{apply(e,t=-1){return R$(e,t)}};Mre.className="logSoftmax";$e.registerClass(Mre);var Are=class extends Xa{apply(e,t=1){return ue(()=>se(co(se(e,t)),e))}};Are.className="swish";$e.registerClass(Are);var Rre=class extends Xa{apply(e){return ue(()=>se(e,hh(im(e))))}};Rre.className="mish";$e.registerClass(Rre);function yd(e){return e.getClassName()}function TE(e,t={}){return Kw(e,$e.SerializationMap.getMap().classNameMap,t,"activation")}function vd(e){if(e==null){let t={};return t.className="linear",t.config={},TE(t)}if(typeof e=="string"){let t={};return t.className=e,t.config={},TE(t)}else return e instanceof Xa?e:TE(e)}function mF(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}var Dre=class extends $e.Serializable{},Qw=class extends Dre{constructor(e){super(),mF(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ue(()=>{let t=yr([1]);return this.hasL1&&(t=we(t,ot(se(this.l1,Dr(e))))),this.hasL2&&(t=we(t,ot(se(this.l2,Xw(e))))),le(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};Qw.className="L1L2";$e.registerClass(Qw);function eGe(e){return mF(e),new Qw({l1:e!=null?e.l1:null,l2:0})}function tGe(e){return mF(e),new Qw({l2:e!=null?e.l2:null,l1:0})}var hU={l1l2:"L1L2"};function Gn(e){return GL(e)}function fU(e,t={}){return Kw(e,$e.SerializationMap.getMap().classNameMap,t,"regularizer")}function dr(e){if(e==null)return null;if(typeof e=="string"){let t={className:e in hU?hU[e]:e,config:{}};return fU(t)}else return e instanceof Dre?e:fU(e)}var gF=class extends Xt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=$t(e);let n=On(e);return this.maxValue!=null&&(n=Qi(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};gF.className="ReLU";$e.registerClass(gF);var yF=class extends Xt{constructor(e){super(e==null?{}:e),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=$t(e);return Lw(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};yF.className="LeakyReLU";$e.registerClass(yF);var vF=class extends Xt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=cr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=dr(e.alphaRegularizer),this.alphaConstraint=ri(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new de(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=pn(e);let t=e.slice(1);if(this.sharedAxes!=null)for(let r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(this.sharedAxes!=null)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new zr({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=$t(e),jw(e,this.alpha.read())}getConfig(){let e={alphaInitializer:vr(this.alphaInitializer),alphaRegularizer:Gn(this.alphaRegularizer),alphaConstraint:ni(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};vF.className="PReLU";$e.registerClass(vF);var bF=class extends Xt{constructor(e){if(super(e==null?{}:e),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new qt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=$t(e);return Gv(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};bF.className="ELU";$e.registerClass(bF);var wF=class extends Xt{constructor(e){super(e==null?{}:e),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){let n=$t(e);return se(n,Ae(Ca(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};wF.className="ThresholdedReLU";$e.registerClass(wF);var xF=class extends Xt{constructor(e){super(e==null?{}:e),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new fF().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return ue(()=>{let n=$t(e),r=t.mask;if(r!=null){let i=se(Ve(Aa(n.shape),Ae(r,n.dtype)),gt(-1e9));n=we(n,i)}return this.axis instanceof Array?this.axis.length>1?ea(Ve(n,zw(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};xF.className="Softmax";$e.registerClass(xF);function Rg(e,t,n){if(typeof e=="number")return yh(e,t);if(e.length!==t)throw new de(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){let i=e[r];if(!mUe(i))throw new de(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function Ho(e,t,n,r,i=1){if(e==null)return e;let a=t+(t-1)*(i-1),s;return n==="same"?s=e:s=e-a+1,Math.floor((s+r-1)/r)}function Cl(e,t,n,r){if(e==null)return null;if(r==="valid")e=e*t+gd([n-t,0]);else if(r==="same")e=e*t;else throw new de(`Unsupport padding mode: ${r}.`);return e}function _F(e,t){return ue(()=>(Ar(t),t==="channelsFirst"?Ht(e,[0,2,3,1]):e))}function Lre(e,t){return ue(()=>(Ar(t),t==="channelsFirst"?Ht(e,[0,2,3,4,1]):e))}function nGe(e,t,n,r=1,i="valid",a,s=1){return ue(()=>{if(a==null&&(a=tl()),Ar(a),e.shape.length!==3)throw new de(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new de(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new de(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(a==="channelsFirst"&&(e=Ht(e,[0,2,1])),i==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=N$(e,t,r,i==="same"?"same":"valid","NWC",s);return n!=null&&(o=ol(o,n)),o})}function mU(e,t,n,r=[1,1],i="valid",a,s,o=null){return ue(()=>{if(a==null&&(a=tl()),Ar(a),e.rank!==3&&e.rank!==4)throw new de(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new de(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=_F(e,a);if(i==="causal")throw new qt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=hy.conv2d({x:l,filter:t,strides:r,pad:i==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),a==="channelsFirst"&&(l=Ht(l,[0,3,1,2])),l})}function rGe(e,t,n,r=[1,1,1],i="valid",a,s){return ue(()=>{if(a==null&&(a=tl()),Ar(a),e.rank!==4&&e.rank!==5)throw new de(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new de(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=Lre(e,a);if(i==="causal")throw new qt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=ZD(o,t,r,i==="same"?"same":"valid","NDHWC",s),n!=null&&(o=ol(o,n)),a==="channelsFirst"&&(o=Ht(o,[0,4,1,2,3])),o})}var Fre=class zre extends Xt{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",zre.verifyArgs(n),this.rank=t,vi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new qt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Rg(n.kernelSize,t,"kernelSize"),this.strides=Rg(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,qs(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ar(this.dataFormat),this.activation=vd(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=cr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ri(n.biasConstraint),this.biasRegularizer=dr(n.biasRegularizer),this.activityRegularizer=dr(n.activityRegularizer),this.dilationRate=Rg(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new de(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new de(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new de(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(Sl("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!qL(t.kernelSize,"number",1,3))throw new de(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){let t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:yd(this.activation),useBias:this.useBias,biasInitializer:vr(this.biasInitializer),biasRegularizer:Gn(this.biasRegularizer),activityRegularizer:Gn(this.activityRegularizer),biasConstraint:ni(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}},vT=class Bre extends Fre{constructor(t,n){super(t,n),this.kernel=null,Bre.verifyArgs(n),this.filters=n.filters,vi(this.filters,"filters"),this.kernelInitializer=cr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ri(n.kernelConstraint),this.kernelRegularizer=dr(n.kernelRegularizer)}build(t){t=pn(t);let n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new de(`The channel dimension of the input should be defined. Found ${t[n]}`);let r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(t,n){return ue(()=>{t=$t(t);let r,i=this.bias==null?null:this.bias.read(),a=Hne(this.activation.getClassName());if(a!=null&&this.rank===2)r=mU(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=nGe(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=mU(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=rGe(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new qt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(t){t=pn(t);let n=[],r=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let a=0;a<r.length;++a){let s=Ho(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(s)}let i=[t[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){let t={filters:this.filters,kernelInitializer:vr(this.kernelInitializer),kernelRegularizer:Gn(this.kernelRegularizer),kernelConstraint:ni(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new de(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}},bT=class Wre extends vT{constructor(t){super(2,t),Wre.verifyArgs(t)}getConfig(){let t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!qL(t.kernelSize,"number",1,2))throw new de(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}};bT.className="Conv2D";$e.registerClass(bT);var wT=class Vre extends vT{constructor(t){super(3,t),Vre.verifyArgs(t)}getConfig(){let t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new de(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}};wT.className="Conv3D";$e.registerClass(wT);var kF=class extends bT{constructor(e){if(super(e),this.inputSpec=[new zr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new de(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=pn(e),e.length!==4)throw new de("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new de("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new zr({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return ue(()=>{let n=$t(e);if(n.shape.length!==4)throw new de(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let r=n.shape,i=r[0],a,s;this.dataFormat==="channelsFirst"?(a=2,s=3):(a=1,s=2);let o=r[a],l=r[s],u=this.kernelSize[0],c=this.kernelSize[1],d=this.strides[0],p=this.strides[1],h=Cl(o,d,u,this.padding),m=Cl(l,p,c,this.padding),g=[i,h,m,this.filters];this.dataFormat!=="channelsLast"&&(n=Ht(n,[0,2,3,1]));let y=E$(n,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=Ht(y,[0,3,1,2])),this.bias!=null&&(y=ol(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=pn(e);let t=e.slice(),n,r,i;this.dataFormat==="channelsFirst"?(n=1,r=2,i=3):(n=3,r=1,i=2);let a=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=Cl(t[r],o,a,this.padding),t[i]=Cl(t[i],l,s,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};kF.className="Conv2DTranspose";$e.registerClass(kF);var SF=class extends wT{constructor(e){if(super(e),this.inputSpec=[new zr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new de(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=pn(e),e.length!==5)throw new de("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new de("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new zr({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return ue(()=>{let n=$t(e);if(n.shape.length!==5)throw new de(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${n.shape.length}`);let r=n.shape,i=r[0],a,s,o;this.dataFormat==="channelsFirst"?(o=2,a=3,s=4):(o=1,a=2,s=3);let l=r[o],u=r[a],c=r[s],d=this.kernelSize[0],p=this.kernelSize[1],h=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Cl(l,m,d,this.padding),b=Cl(u,g,p,this.padding),_=Cl(c,y,h,this.padding),k=[i,v,b,_,this.filters];this.dataFormat!=="channelsLast"&&(n=Ht(n,[0,2,3,4,1]));let S=XD(n,this.kernel.read(),k,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(S=Ht(S,[0,4,1,2,3])),this.bias!==null&&(S=ol(S,this.bias.read(),this.dataFormat)),this.activation!==null&&(S=this.activation.apply(S)),S})}computeOutputShape(e){e=pn(e);let t=e.slice(),n,r,i,a;this.dataFormat==="channelsFirst"?(n=1,r=2,i=3,a=4):(n=4,r=1,i=2,a=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],d=this.strides[2];return t[n]=this.filters,t[r]=Cl(t[r],u,s,this.padding),t[i]=Cl(t[i],c,o,this.padding),t[a]=Cl(t[a],d,l,this.padding),t}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};SF.className="Conv3DTranspose";$e.registerClass(SF);var jre=class extends vT{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new de("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new de("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new de(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=dr(t.depthwiseRegularizer),this.depthwiseConstraint=ri(t.depthwiseConstraint),this.pointwiseInitializer=cr(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=dr(t.pointwiseRegularizer),this.pointwiseConstraint=ri(t.pointwiseConstraint)}build(e){if(e=pn(e),e.length<this.rank+2)throw new de(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new de(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new zr({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return ue(()=>{e=$t(e);let n;if(this.rank===1)throw new qt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Ht(e,[0,2,3,1])),n=Xv(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(n=ol(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),this.dataFormat==="channelsFirst"&&(n=Ht(n,[0,3,1,2])),n})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=vr(this.depthwiseInitializer),e.pointwiseInitializer=vr(this.pointwiseInitializer),e.depthwiseRegularizer=Gn(this.depthwiseRegularizer),e.pointwiseRegularizer=Gn(this.pointwiseRegularizer),e.depthwiseConstraint=ni(this.depthwiseConstraint),e.pointwiseConstraint=ni(this.pointwiseConstraint),e}};jre.className="SeparableConv";var CF=class extends jre{constructor(e){super(2,e)}};CF.className="SeparableConv2D";$e.registerClass(CF);var IF=class Hre extends vT{constructor(t){super(1,t),Hre.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){let t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!qL(t.kernelSize,"number",1,1))throw new de(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}};IF.className="Conv1D";$e.registerClass(IF);var $F=class extends Xt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return ue(()=>{if(e=$t(e),this.dataFormat==="channelsLast"){let n=S_(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return S_(n,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let n=S_(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return S_(n,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};$F.className="Cropping2D";$e.registerClass($F);var TF=class extends Xt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ar(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,pUe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let t=e[2]==null?null:this.size[0]*e[2],n=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,n]}else{let t=e[1]==null?null:this.size[0]*e[1],n=e[2]==null?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return ue(()=>{let n=$t(e),r=n.shape;if(this.dataFormat==="channelsFirst"){n=Ht(n,[0,2,3,1]);let i=this.size[0]*r[2],a=this.size[1]*r[3],s=this.interpolation==="nearest"?Ns.resizeNearestNeighbor(n,[i,a]):Ns.resizeBilinear(n,[i,a]);return Ht(s,[0,3,1,2])}else{let i=this.size[0]*r[1],a=this.size[1]*r[2];return this.interpolation==="nearest"?Ns.resizeNearestNeighbor(n,[i,a]):Ns.resizeBilinear(n,[i,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};TF.className="UpSampling2D";$e.registerClass(TF);function iGe(e,t,n=[1,1],r="valid",i,a){return ue(()=>{i==null&&(i=tl()),Ar(i);let s=_F(e,i);if(e.rank!==4)throw new de(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new de(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return s=rm(s,t,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(s=Ht(s,[0,3,1,2])),s})}var NF=class extends Fre{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=cr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ri(e.depthwiseConstraint),this.depthwiseRegularizer=dr(e.depthwiseRegularizer)}build(e){if(e=pn(e),e.length<4)throw new de(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new de(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ue(()=>{e=$t(e);let n=iGe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(n=ol(n,this.bias.read(),this.dataFormat)),this.activation!=null&&(n=this.activation.apply(n)),n})}computeOutputShape(e){e=pn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Ho(t,this.kernelSize[0],this.padding,this.strides[0]),a=Ho(n,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],r,i,a]:[e[0],i,a,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=vr(this.depthwiseInitializer),e.depthwiseRegularizer=Gn(this.depthwiseRegularizer),e.depthwiseConstraint=ni(this.depthwiseRegularizer),e}};NF.className="DepthwiseConv2D";$e.registerClass(NF);function Ure(e,t,n,r){if(Array.isArray(e)){if(t!=null||n!=null)throw new de("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return t=i(t),n=i(n),{inputs:e,initialState:t,constants:n}}function Gre(e,t,n,r=!1,i,a,s=!1,o=!1){return ue(()=>{let l=t.shape.length;if(l<3)throw new de(`Input should be at least 3D, but is ${l}D.`);let u=[1,0].concat(el(2,l));if(t=Ht(t,u),a!=null)throw new qt("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Ae(Ae(i,"bool"),"float32"),i.rank===l-1&&(i=gi(i,-1)),i=Ht(i,u)),r&&(t=Ws(t,0),i!=null&&(i=Ws(i,0)));let c=[],d,p=n,h=t.shape[0],m=$r(t),g;i!=null&&(g=$r(i));for(let v=0;v<h;++v){let b=m[v],_=ue(()=>e(b,p));if(i==null)d=_[0],p=_[1];else{let k=ue(()=>{let S=g[v],$=Ve(vs(S),S),N=we(se(_[0],S),se(p[0],$)),P=p.map((D,O)=>we(se(_[1][O],S),se(D,$)));return{output:N,newStates:P}});d=k.output,p=k.newStates}o&&c.push(d)}let y;return o&&(y=Wr(c,1)),[d,y,p]})}var ec=class qre extends Xt{constructor(t){super(t);let n;if(t.cell==null)throw new de("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new kT({cells:t.cell}):n=t.cell,n.stateSize==null)throw new de("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new zr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return el(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){YP(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);let r=n[0],i;if(this.returnSequences?i=[t[0],t[1],r]:i=[t[0],r],this.returnState){let a=[];for(let s of n)a.push([t[0],s]);return[i].concat(a)}else return i}computeMask(t,n){return ue(()=>{Array.isArray(n)&&(n=n[0]);let r=this.returnSequences?n:null;if(this.returnState){let i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){let t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<t;++r)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new qt("Constants support is not implemented in RNN yet.");YP(t)&&(t=t[0]),t=t;let n=this.stateful?t[0]:null,r=t.slice(2);this.inputSpec[0]=new zr({shape:[n,null,...r]});let i=[t[0]].concat(t.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!M.arraysEqual(this.stateSpec.map(s=>s.shape[s.shape.length-1]),a))throw new de(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(s=>new zr({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){ue(()=>{if(!this.stateful)throw new Sc("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape[0];if(r==null)throw new de("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>yr([r,i])):this.states_=[yr([r,this.cell.stateSize])];else if(t==null)Rt(this.states_),this.keptStates!=null&&(Rt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>yr([r,i])):this.states_[0]=yr([r,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new de(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):Rt(this.states_);for(let i=0;i<this.states_.length;++i){let a=t[i],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,s];if(!M.arraysEqual(a.shape,o))throw new de(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Yr(i.clone()))})}apply(t,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});let a=Ure(t,r,i,this.numConstants);t=a.inputs,r=a.initialState,i=a.constants;let s=[],o=[];if(r!=null){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(let l of r)this.stateSpec.push(new zr({shape:l.shape}));o=o.concat(this.stateSpec)}if(i!=null&&(n.constants=i,s=s.concat(i),this.numConstants=i.length),s[0]instanceof nl){let l=[t].concat(s),u=this.inputSpec.concat(o),c=this.inputSpec;this.inputSpec=u;let d=super.apply(l,n);return this.inputSpec=c,d}else return super.apply(t,n)}call(t,n){return ue(()=>{let r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;t=$t(t),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(t));let s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new de(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let o={training:i},l=Gre((h,m)=>{let g=this.cell.call([h].concat(m),o);return[g[0],g.slice(1)]},t,a,this.goBackwards,r,null,this.unroll,this.returnSequences),u=l[0],c=l[1],d=l[2];this.stateful&&this.resetStates(d,i);let p=this.returnSequences?c:u;return this.returnState?[p].concat(d):p})}getInitialState(t){return ue(()=>{let n=yr(t.shape);return n=ot(n,[1,2]),n=Zw(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?XP(n,[1,r]):n):this.cell.stateSize>1?[XP(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){let t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===qre.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),n)}static fromConfig(t,n,r={}){let i=n.cell,a=jo(i,r);return new t(Object.assign(n,{cell:a}))}};ec.className="RNN";$e.registerClass(ec);var ex=class extends Xt{},xT=class extends ex{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,vi(this.units,"units"),this.activation=vd(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=dr(e.kernelRegularizer),this.recurrentRegularizer=dr(e.recurrentRegularizer),this.biasRegularizer=dr(e.biasRegularizer),this.kernelConstraint=ri(e.kernelConstraint),this.recurrentConstraint=ri(e.recurrentConstraint),this.biasConstraint=ri(e.biasConstraint),this.dropout=fy([1,gd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=fy([1,gd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=pn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ue(()=>{if(e=e,e.length!==2)throw new de(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let r=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bd({ones:()=>vs(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bd({ones:()=>vs(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let i,a=this.dropoutMask,s=this.recurrentDropoutMask;a!=null?i=Wl(se(e,a),this.kernel.read()):i=Wl(e,this.kernel.read()),this.bias!=null&&(i=ol(i,this.bias.read())),s!=null&&(n=se(n,s));let o=we(i,Wl(n,this.recurrentKernel.read()));return this.activation!=null&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:yd(this.activation),useBias:this.useBias,kernelInitializer:vr(this.kernelInitializer),recurrentInitializer:vr(this.recurrentInitializer),biasInitializer:vr(this.biasInitializer),kernelRegularizer:Gn(this.kernelRegularizer),recurrentRegularizer:Gn(this.recurrentRegularizer),biasRegularizer:Gn(this.biasRegularizer),activityRegularizer:Gn(this.activityRegularizer),kernelConstraint:ni(this.kernelConstraint),recurrentConstraint:ni(this.recurrentConstraint),biasConstraint:ni(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}};xT.className="SimpleRNNCell";$e.registerClass(xT);var EF=class extends ec{constructor(e){e.cell=new xT(e),super(e)}call(e,t){return ue(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return new e(t)}};EF.className="SimpleRNN";$e.registerClass(EF);var _T=class extends ex{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new de("GRUCell does not support reset_after parameter set to true.");this.units=e.units,vi(this.units,"units"),this.activation=vd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=vd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=dr(e.kernelRegularizer),this.recurrentRegularizer=dr(e.recurrentRegularizer),this.biasRegularizer=dr(e.biasRegularizer),this.kernelConstraint=ri(e.kernelConstraint),this.recurrentConstraint=ri(e.recurrentConstraint),this.biasConstraint=ri(e.biasConstraint),this.dropout=fy([1,gd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=fy([1,gd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=pn(e);let t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ue(()=>{if(e=e,e.length!==2)throw new de(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training==null?!1:t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bd({ones:()=>vs(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bd({ones:()=>vs(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let i=this.dropoutMask,a=this.recurrentDropoutMask,s,o,l;0<this.dropout&&this.dropout<1&&(e=se(e,i[0]));let u=Wl(e,this.kernel.read());this.useBias&&(u=ol(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=se(r,a[0]));let c=this.recurrentKernel.read(),[d,p]=Fa(c,[2*this.units,this.units],c.rank-1),h=Wl(r,d),[m,g,y]=Fa(u,3,u.rank-1),[v,b]=Fa(h,2,h.rank-1);s=this.recurrentActivation.apply(we(m,v)),o=this.recurrentActivation.apply(we(g,b));let _=Wl(se(o,r),p);l=this.activation.apply(we(y,_));let k=we(se(s,r),se(we(1,Xn(s)),l));return[k,k]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:yd(this.activation),recurrentActivation:yd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vr(this.kernelInitializer),recurrentInitializer:vr(this.recurrentInitializer),biasInitializer:vr(this.biasInitializer),kernelRegularizer:Gn(this.kernelRegularizer),recurrentRegularizer:Gn(this.recurrentRegularizer),biasRegularizer:Gn(this.biasRegularizer),activityRegularizer:Gn(this.activityRegularizer),kernelConstraint:ni(this.kernelConstraint),recurrentConstraint:ni(this.recurrentConstraint),biasConstraint:ni(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}};_T.className="GRUCell";$e.registerClass(_T);var OF=class extends ec{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new _T(e),super(e)}call(e,t){return ue(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};OF.className="GRU";$e.registerClass(OF);var tx=class extends ex{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,vi(this.units,"units"),this.activation=vd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=vd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=dr(e.kernelRegularizer),this.recurrentRegularizer=dr(e.recurrentRegularizer),this.biasRegularizer=dr(e.biasRegularizer),this.kernelConstraint=ri(e.kernelConstraint),this.recurrentConstraint=ri(e.recurrentConstraint),this.biasConstraint=ri(e.biasConstraint),this.dropout=fy([1,gd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=fy([1,gd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=pn(e);let n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let r;if(this.useBias){if(this.unitForgetBias){let i=this.biasInitializer,a=this.units;r=new(t=class extends wo{apply(s,o){let l=i.apply([a]),u=new oT().apply([a]),c=i.apply([a*2]);return QH(QH(l,u),c)}},t.className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return ue(()=>{let n=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new de(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1],i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bd({ones:()=>vs(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bd({ones:()=>vs(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,s=this.recurrentDropoutMask,o,l,u,c;0<this.dropout&&this.dropout<1&&(e=se(e,a[0]));let d=Wl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=se(r,s[0])),d=we(d,Wl(r,this.recurrentKernel.read())),this.useBias&&(d=ol(d,this.bias.read()));let[p,h,m,g]=Fa(d,4,d.rank-1);o=this.recurrentActivation.apply(p),l=this.recurrentActivation.apply(h),u=we(se(l,i),se(o,this.activation.apply(m))),c=this.recurrentActivation.apply(g);let y=se(c,this.activation.apply(u));return[y,y,u]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:yd(this.activation),recurrentActivation:yd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:vr(this.kernelInitializer),recurrentInitializer:vr(this.recurrentInitializer),biasInitializer:vr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Gn(this.kernelRegularizer),recurrentRegularizer:Gn(this.recurrentRegularizer),biasRegularizer:Gn(this.biasRegularizer),activityRegularizer:Gn(this.activityRegularizer),kernelConstraint:ni(this.kernelConstraint),recurrentConstraint:ni(this.recurrentConstraint),biasConstraint:ni(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}};tx.className="LSTMCell";$e.registerClass(tx);var PF=class extends ec{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new tx(e),super(e)}call(e,t){return ue(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=t==null?null:t.mask,r=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}};PF.className="LSTM";$e.registerClass(PF);var kT=class extends ex{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return ue(()=>{e=e;let n=e.slice(1),r=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?r.push(n.splice(0,s.stateSize.length)):r.push(n.splice(0,1));r.reverse();let i=[],a;for(let s=0;s<this.cells.length;++s){let o=this.cells[s];n=r[s],s===0?a=[e[0]].concat(n):a=[a[0]].concat(n),a=o.call(a,t),i.push(a.slice(1))}n=[];for(let s of i.slice().reverse())n.push(...s);return[a[0]].concat(n)})}build(e){YP(e)&&(e=e[0]),e=e;let t;this.cells.forEach((n,r)=>{Bp(`RNNCell_${r}`,()=>{n.build(e),Array.isArray(n.stateSize)?t=n.stateSize[0]:t=n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t=r=>({className:r.getClassName(),config:r.getConfig()}),n={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),n)}static fromConfig(e,t,n={}){let r=[];for(let i of t.cells)r.push(jo(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let n of this.cells)t.push(...n.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return QP(e)}setWeights(e){let t=[];for(let n of this.cells){let r=n.weights.length,i=e.splice(r);for(let a=0;a<n.weights.length;++a)t.push([n.weights[a],i[a]])}nF(t)}};kT.className="StackedRNNCells";$e.registerClass(kT);function bd(e){let{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=e,s=()=>a!=null?a(t(),n):Jne(t(),n),o=()=>Jw(s,t,r);return!i||i<=1?Yr(o().clone()):Array(i).fill(void 0).map(o).map(l=>Yr(l.clone()))}var aGe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Kre=class extends ec{constructor(e){if(e.unroll)throw new qt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new qt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new zr({ndim:5})]}call(e,t){return ue(()=>{if(this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new de("ConvRNN2D cell does not support constants");let n=t==null?null:t.mask,r=t==null?null:t.training,i=t==null?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return ue(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)],a=yr(i);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e,t=!1){ue(()=>{if(!this.stateful)throw new Sc("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(n[0]==null)throw new de("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>yr(i)):this.states_=[yr(i)];else if(e==null)Rt(this.states_),this.keptStates!=null&&(Rt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>yr(i)):this.states_[0]=yr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new de(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):Rt(this.states_);for(let a=0;a<this.states_.length;++a){let s=e[a],o=i;if(!M.arraysEqual(s.shape,o))throw new de(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[a]=s}}this.states_=this.states_.map(a=>Yr(a.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:a,dilationRate:s}=this.cell,o=t==="channelsFirst",l=e[o?3:2],u=e[o?4:3],c=Ho(l,r[0],i,a[0],s[0]),d=Ho(u,r[1],i,a[1],s[1]);return[...e.slice(0,2),...o?[n,c,d]:[c,d,n]]}};Kre.className="ConvRNN2D";var ST=class extends tx{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:a,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,vi(this.filters,"filters"),this.kernelSize=Rg(n,2,"kernelSize"),this.kernelSize.forEach(o=>vi(o,"kernelSize")),this.strides=Rg(r||1,2,"strides"),this.strides.forEach(o=>vi(o,"strides")),this.padding=i||"valid",qs(this.padding),this.dataFormat=a||"channelsLast",Ar(this.dataFormat),this.dilationRate=Rg(s||1,2,"dilationRate"),this.dilationRate.forEach(o=>vi(o,"dilationRate"))}build(e){var t;e=pn(e);let n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new de(`The channel dimension of the input should be defined. Found ${e[n]}`);let r=e[n],i=4,a=this.kernelSize.concat([r,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let o;if(this.unitForgetBias){let l=this.biasInitializer,u=this.filters;o=new(t=class extends wo{apply(c,d){let p=l.apply([u]),h=Aa([u]),m=l.apply([u*2]);return KL([p,h,m])}},t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return ue(()=>{if(e.length!==3)throw new de(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,r=e[0],i=e[1],a=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=bd({ones:()=>vs(r),rate:this.dropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,l=(ee,Y,Q)=>!Y||!Y[Q]?ee:se(Y[Q],ee),u=l(r,o,0),c=l(r,o,1),d=l(r,o,2),p=l(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=bd({ones:()=>vs(i),rate:this.recurrentDropout,training:n,count:s,dropoutFunc:this.dropoutFunc}));let h=this.recurrentDropoutMask,m=l(i,h,0),g=l(i,h,1),y=l(i,h,2),v=l(i,h,3),b=3,[_,k,S,$]=Fa(this.kernel.read(),s,b),[N,P,D,O]=this.useBias?Fa(this.bias.read(),s):[null,null,null,null];u=this.inputConv(u,_,N,this.padding),c=this.inputConv(c,k,P,this.padding),d=this.inputConv(d,S,D,this.padding),p=this.inputConv(p,$,O,this.padding);let[F,E,z,q]=Fa(this.recurrentKernel.read(),s,b);m=this.recurrentConv(m,F),g=this.recurrentConv(g,E),y=this.recurrentConv(y,z),v=this.recurrentConv(v,q);let K=this.recurrentActivation.apply(we(u,m)),Z=this.recurrentActivation.apply(we(c,g)),te=we(se(Z,a),se(K,this.activation.apply(we(d,y)))),V=se(this.recurrentActivation.apply(we(p,v)),this.activation.apply(te));return[V,V,te]})}getConfig(){let e=super.getConfig(),t=aGe(e,["units"]),n={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),n)}inputConv(e,t,n,r){let i=ya(e,t,this.strides,r||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return n?ol(i,n,this.dataFormat):i}recurrentConv(e,t){return ya(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}};ST.className="ConvLSTM2DCell";$e.registerClass(ST);var MF=class extends Kre{constructor(e){let t=new ST(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}};MF.className="ConvLSTM2D";$e.registerClass(MF);var CT=class extends Xt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(this.noiseShape[r]==null?t[r]:this.noiseShape[r]);return n}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);if(0<this.rate&&this.rate<1){let r=t.training==null?!1:t.training,i=this.getNoiseShape(n);return Jw(()=>Jne(n,this.rate,i,this.seed),()=>n,r)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};CT.className="Dropout";$e.registerClass(CT);var AF=class extends CT{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};AF.className="SpatialDropout1D";$e.registerClass(AF);var RF=class extends Xt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,vi(this.units,"units"),this.activation=vd(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ri(e.kernelConstraint),this.biasConstraint=ri(e.biasConstraint),this.kernelRegularizer=dr(e.kernelRegularizer),this.biasRegularizer=dr(e.biasRegularizer),this.activityRegularizer=dr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=pn(e);let t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=pn(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e),r=Hne(this.activation.getClassName()),i;return r!=null?i=Wl(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Wl(n,this.kernel.read()),this.bias!=null&&(i=ol(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){let e={units:this.units,activation:yd(this.activation),useBias:this.useBias,kernelInitializer:vr(this.kernelInitializer),biasInitializer:vr(this.biasInitializer),kernelRegularizer:Gn(this.kernelRegularizer),biasRegularizer:Gn(this.biasRegularizer),activityRegularizer:Gn(this.activityRegularizer),kernelConstraint:ni(this.kernelConstraint),biasConstraint:ni(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};RF.className="Dense";$e.registerClass(RF);var DF=class extends Xt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=pn(e);for(let t of e.slice(1))if(t==null)throw new de(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],td(e,1)]}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);if(this.dataFormat==="channelsFirst"&&n.rank>1){let r=[0];for(let i=2;i<n.rank;++i)r.push(i);r.push(1),n=Ht(n,r)}return vUe(n)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};DF.className="Flatten";$e.registerClass(DF);var LF=class extends Xt{constructor(e){super(e),this.supportsMasking=!0,this.activation=vd(e.activation)}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);return this.activation.apply(n)})}getConfig(){let e={activation:yd(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};LF.className="Activation";$e.registerClass(LF);var FF=class extends Xt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return ue(()=>(e=$t(e),gUe(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};FF.className="RepeatVector";$e.registerClass(FF);var zF=class extends Xt{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),i=1,a=null;for(let o=0;o<r.length;++o){let l=r[o];if(this.isUnknown(l))if(a===null)a=o;else throw new de("Can only specifiy one unknown dimension.");else i*=l}let s=td(e);if(a!==null){if(i===0||s%i!==0)throw new de(n);r[a]=s/i}else if(s!==i)throw new de(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return le(n,i)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};zF.className="Reshape";$e.registerClass(zF);var BF=class extends Xt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=el(1,e.dims.length+1);if(!M.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new zr({ndim:this.dims.length+1})]}computeOutputShape(e){e=pn(e);let t=e.slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return Ht($t(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};BF.className="Permute";$e.registerClass(BF);var WF=class extends Xt{constructor(e){super(e==null?{}:e),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=$t(e);return y1(mh(n,this.maskValue),-1)}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e),r=y1(mh(n,this.maskValue),-1,!0);return se(n,Ae(r,n.dtype))})}};WF.className="Masking";$e.registerClass(WF);var VF=class extends Xt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(En(e.inputLength))}this.inputDim=e.inputDim,vi(this.inputDim,"inputDim"),this.outputDim=e.outputDim,vi(this.outputDim,"outputDim"),this.embeddingsInitializer=cr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=dr(e.embeddingsRegularizer),this.activityRegularizer=dr(e.activityRegularizer),this.embeddingsConstraint=ri(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return ue(()=>this.maskZero?(e=$t(e),mh(e,an(e))):null)}computeOutputShape(e){if(e=pn(e),this.inputLength==null)return[...e,this.outputDim];let t=En(this.inputLength);if(t.length!==e.length-1)throw new de(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let i=t[r],a=e[r+1];if(i!=null&&a!=null&&i!==a)throw new de(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(t[n]=a),n++}}return[e[0],...t,this.outputDim]}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);n.dtype!=="int32"&&(n=zu(n,"int32"));let r=Xne(this.embeddings.read(),le(n,[n.size]));return le(r,pn(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:vr(this.embeddingsInitializer),embeddingsRegularizer:Gn(this.embeddingsRegularizer),activityRegularizer:Gn(this.activityRegularizer),embeddingsConstraint:ni(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};VF.className="Embedding";$e.registerClass(VF);var lm=class extends Xt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new qt}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let i=e[e.length-t.length+r],a=t[r];if(i==null||a==null||i<0||a<0)n.push(null);else if(i===1)n.push(a);else if(a===1)n.push(i);else{if(i!==a)throw new de("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[pn(e)]),e=e,e.length<2)throw new de(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let i of e)i!=null&&i[0]!==null&&t.push(i[0]);if(t=ed(t),t.length>1)throw new de(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){let a=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=e.map(i=>i.length);e.indexOf(null)===-1&&ed(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return ue(()=>{if(e=e,this.reshapeRequired){let n=[],r=e.map(i=>i.rank);if(r.indexOf(null)===-1){let i=gd(r);for(let a of e){let s=a.rank;for(let o=0;o<i-s;++o)a=Zw(a,1);n.push(a)}return this.mergeFunction(n)}else{let i=!1;for(let o of e){let l=o.rank;if(l==null){let u=o.shape,c=u[0],d=u.slice(1).concat([c]),p=le(o,[c].concat(td(u.slice(1))));p=Ht(p,[1,0]),p=le(p,d),n.push(p),i=!0}else if(l>1){let u=el(1,l).concat([0]);n.push(Ht(o,u)),i=!0}else n.push(o)}let a=this.mergeFunction(n),s=a.rank;if(i){if(s==null){let o=a.shape,l=o.length,u=o[l-1],c=[u].concat(o.slice(0,o.length-1));a=le(Ht(le(a,[-1,u]),[1,0]),c)}else if(s>1){let o=[s-1].concat(el(0,s-1));a=Ht(a,o)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let r=1;r<e.length;++r){let i=e[r]==null?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,i)}let n=[];for(let r of e)r!=null&&r[0]!==null&&n.push(r[0]);return n=ed(n),n.length===1?t=n.concat(t):t=[null].concat(t),t}computeMask(e,t){return ue(()=>{if(t==null)return null;if(!Array.isArray(t))throw new de("`mask` should be an Array");if(!Array.isArray(e))throw new de("`inputs` should be an Array");if(t.length!==e.length)throw new de(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(r=>r==null))return null;t=t.map(r=>r==null?r:gi(r,0));let n=t[0];for(let r=1;r<t.length-1;++r)n=mo(n,t[r]);return n})}},jF=class extends lm{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=we(t,e[n]);return t})}};jF.className="Add";$e.registerClass(jF);var HF=class extends lm{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=se(t,e[n]);return t})}};HF.className="Multiply";$e.registerClass(HF);var UF=class extends lm{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=we(t,e[n]);return se(1/e.length,t)})}};UF.className="Average";$e.registerClass(UF);var GF=class extends lm{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Jl(t,e[n]);return t})}};GF.className="Maximum";$e.registerClass(GF);var qF=class extends lm{constructor(e){super(e)}mergeFunction(e){return ue(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=fd(t,e[n]);return t})}};qF.className="Minimum";$e.registerClass(qF);var KF=class extends lm{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new de("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let r of e)if(r!=null){t=!1;break}if(t)return;let n=[];for(let r=0;r<e.length;++r){let i=e[r].slice();i.splice(this.axis,1);let a=!1;for(let s of n)if(M.arraysEqual(s,i)){a=!0;break}a||n.push(i)}if(n.length>1)throw new de("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ue(()=>KL(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new de("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let i of t.slice(1)){if(n[r]==null||i[r]==null){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new de("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new de("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new de(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return ue(()=>{let n=!0;if(t.forEach(a=>{if(a!=null){n=!1;return}}),n)return null;let r=[];for(let a=0;a<e.length;++a)t[a]==null?r.push(Ae(vs(e[a]),"bool")):t[a].rank<e[a].rank?r.push(gi(t[a],-1)):r.push(t[a]);let i=Wn(r,this.axis);return T$(i,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};KF.className="Concatenate";$e.registerClass(KF);function J0(e,t){for(;e<0;)e+=t;return e}function sGe(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new qt("batchDot is not implemented for tensors of 4D or higher rank yet");if(M.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),M.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new qt("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,i=t.shape.length;n==null&&(n=[r-1,i-2]);let a=n;return ue(()=>{let s;if(r>i){s=r-i;let l=[];for(let u=0;u<s;++u)l.push(1);t=le(t,t.shape.concat(l))}else if(i>r){s=i-r;let l=[];for(let u=0;u<s;++u)l.push(1);e=le(e,e.shape.concat(l))}else s=0;let o;if(e.shape.length===2&&t.shape.length===2)a[0]===a[1]?o=ot(se(e,t),a[0]):o=ot(se(Ht(e,[1,0]),t),a[1]);else{let l=a[0]!==e.shape.length-1,u=a[1]===t.shape.length-1;o=jt(e,t,l,u)}if(s>0){let l;r>i?l=r+i-3:l=r-1;let u=[];for(let c=l;c<l+s;++c)u.push(c);o=Bd(o,u)}return o.shape.length===1&&(o=gi(o,1)),o})}var ZF=class extends lm{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){M.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new de(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(e.length!==2)throw new de(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],n=e[1],r;return Array.isArray(this.axes)?r=this.axes.map((i,a)=>J0(i,e[a].shape.length)):r=[J0(this.axes,t.shape.length),J0(this.axes,n.shape.length)],this.normalize&&(t=vI(t,r[0]),n=vI(n,r[1])),sGe(t,n,r)}interpretAxes(e,t){let n;return Array.isArray(this.axes)?n=this.axes:n=[J0(this.axes,e.length),J0(this.axes,t.length)],n}computeOutputShape(e){M.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new qt("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let i=t.concat(n);return i.length===1&&i.push(1),i}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};ZF.className="Dot";$e.registerClass(ZF);var XF=class extends Xt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);return Jw(()=>we(sT(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};XF.className="GaussianNoise";$e.registerClass(XF);var JF=class extends Xt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ue(()=>{this.invokeCallHook(e,t);let n=$t(e);return this.rate>0&&this.rate<1?Jw(()=>{let r=Math.sqrt(this.rate/(1-this.rate));return se(n,sT(n.shape,1,r))},()=>n,t.training||!1):n})}};JF.className="GaussianDropout";$e.registerClass(JF);var YF=class extends Xt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||$t(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ue(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return Jw(()=>{let r=$t(e),i=-1.6732632423543772*1.0507009873554805,a=Ju(Fd(n),this.rate);a=zu(a,"float32");let s=((1-this.rate)*(1+this.rate*i**2))**-.5,o=-s*i*this.rate,l=we(se(r,a),se(we(a,-1),i));return we(se(l,s),o)},()=>$t(e),t.training||!1)}return e})}};YF.className="AlphaDropout";$e.registerClass(YF);function k1(e,t,n,r,i,a=.001){let s;if(e.rank===2)s=zD(e,t,n,r,i,a);else if(e.rank===3)s=BD(e,t,n,r,i,a);else if(e.rank===4)s=WD(e,t,n,r,i,a);else throw new qt(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return s}function oGe(e,t,n,r,i=.001){return ue(()=>{let a=Ww(e,r),s=a.mean,o=a.variance;return[k1(e,s,o,n,t,i),s,o]})}function lGe(e,t,n,r,i=.001){return ue(()=>{let a=Ww(e,r),s=a.mean,o=a.variance,l=[];for(let h of el(0,e.rank))r.indexOf(h)!==-1?l.push(1):l.push(e.shape[h]);let u=le(s,l),c=le(o,l),d=t==null?null:le(t,l),p=n==null?null:le(n,l);return[k1(e,u,c,p,d,i),s,o]})}function uGe(e,t,n,r,i=.001){return M.arraysEqual(r.slice().sort(),el(0,e.rank-1))?oGe(e,t,n,r,i):lGe(e,t,n,r,i)}var QF=class extends Xt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.movingMeanInitializer=cr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=cr(e.movingVarianceInitializer||"ones"),this.betaConstraint=ri(e.betaConstraint),this.gammaConstraint=ri(e.gammaConstraint),this.betaRegularizer=dr(e.betaRegularizer),this.gammaRegularizer=dr(e.gammaRegularizer)}build(e){e=pn(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(n==null)throw new de(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new zr({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return ue(()=>{let n=t.training==null?!1:t.training,r=$t(e),i=r.shape,a=i.length,s=el(0,a),o=this.axis>=0?this.axis:this.axis+a;s.splice(o,1);let l=yh(1,a);l[o]=i[o];let u=s.slice();u.sort();let c=!M.arraysEqual(u,el(0,a).slice(0,a-1)),d=()=>{if(c){let y=le(this.movingMean.read(),l),v=le(this.movingVariance.read(),l),b=this.center?le(this.beta.read(),l):null,_=this.scale?le(this.gamma.read(),l):null;return k1(r,y,v,b,_,this.epsilon)}else return k1(r,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!n)return d();let[p,h,m]=uGe(r,this.gamma.read(),this.beta.read(),s,this.epsilon),g=(y,v,b)=>{ue(()=>{let _=1-b,k=y.read(),S=se(Ve(k,v),_);y.write(Ve(k,S))})};return g(this.movingMean,h,this.momentum),g(this.movingVariance,m,this.momentum),p})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vr(this.betaInitializer),gammaInitializer:vr(this.gammaInitializer),movingMeanInitializer:vr(this.movingMeanInitializer),movingVarianceInitializer:vr(this.movingVarianceInitializer),betaRegularizer:Gn(this.betaRegularizer),gammaRegularizer:Gn(this.gammaRegularizer),betaConstraint:ni(this.betaConstraint),gammaConstraint:ni(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};QF.className="BatchNormalization";$e.registerClass(QF);var ez=class extends Xt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=cr(e.betaInitializer||"zeros"),this.gammaInitializer=cr(e.gammaInitializer||"ones"),this.betaRegularizer=dr(e.betaRegularizer),this.gammaRegularizer=dr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=pn(e);let t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(let i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==ed(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(i=>e[i]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){let n=$t(e),r=n.shape,i=r.length;return ue(()=>{let{mean:a,variance:s}=Ww(n,this.axis,!0),o=yh(1,i);for(let h of this.axis)o[h]=r[h];let l=h=>h!=null&&h.shape.length!==i?le(h,o):h,u=this.scale?l(this.gamma.read()):null,c=this.center?l(this.beta.read()):null,d=[],p=[];for(let h=0;h<i;++h)this.axis.indexOf(h)!==-1?(d.push(r[h]),p.push(1)):(d.push(1),p.push(r[h]));return a=ls(a,d),s=ls(s,d),u!=null&&(u=ls(u,p)),c!=null&&(c=ls(c,p)),k1(n,a,s,c,u,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:vr(this.betaInitializer),gammaInitializer:vr(this.gammaInitializer),betaRegularizer:Gn(this.betaRegularizer),gammaRegularizer:Gn(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};ez.className="LayerNormalization";$e.registerClass(ez);function cGe(e,t,n){return ue(()=>{if(e.rank!==4)throw new de(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new de("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=tl()),n!=="channelsLast"&&n!=="channelsFirst")throw new de(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],t[0],t[1]]:r=[[0,0],t[0],t[1],[0,0]],sl(e,r)})}var tz=class extends Xt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?tl():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new de(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new de(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new de(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new zr({ndim:4})]}computeOutputShape(e){e=pn(e);let t,n;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?n=e[3]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],e[1],t,n]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?n=e[2]+this.padding[1][0]+this.padding[1][1]:n=null,[e[0],t,n,e[3]])}call(e,t){return ue(()=>cGe($t(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};tz.className="ZeroPadding2D";$e.registerClass(tz);function IT(e,t,n,r,i,a){return ue(()=>{Ar(i),Gne(a),qs(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=tl()),a==null&&(a="max"),e=_F(e,i);let s,o=r==="same"?"same":"valid";return a==="max"?s=ci(e,t,n,o):s=Xu(e,t,n,o),i==="channelsFirst"&&(s=Ht(s,[0,3,1,2])),s})}function Zre(e,t,n,r,i,a){return ue(()=>{Ar(i),Gne(a),qs(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=tl()),a==null&&(a="max"),e=Lre(e,i);let s,o=r==="same"?"same":"valid";return a==="max"?s=pL(e,t,n,o):s=FD(e,t,n,o),i==="channelsFirst"&&(s=Ht(s,[0,4,1,2,3])),s})}var Xre=class extends Xt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new de(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(vi(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new de(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);vi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,qs(this.padding),this.inputSpec=[new zr({ndim:3})]}computeOutputShape(e){e=pn(e);let t=Ho(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return ue(()=>{this.invokeCallHook(e,t),e=Zw($t(e),2);let n=this.poolingFunction($t(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Bd(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},nz=class extends Xre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),IT(e,t,n,r,i,"max")}};nz.className="MaxPooling1D";$e.registerClass(nz);var rz=class extends Xre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),IT(e,t,n,r,i,"avg")}};rz.className="AveragePooling1D";$e.registerClass(rz);var Jre=class extends Xt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new de(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];vi(this.poolSize,"poolSize"),vi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ar(this.dataFormat),qs(this.padding),this.inputSpec=[new zr({ndim:4})]}computeOutputShape(e){e=pn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=Ho(t,this.poolSize[0],this.padding,this.strides[0]),n=Ho(n,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return ue(()=>(this.invokeCallHook(e,t),this.poolingFunction($t(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},iz=class extends Jre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),IT(e,t,n,r,i,"max")}};iz.className="MaxPooling2D";$e.registerClass(iz);var az=class extends Jre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),IT(e,t,n,r,i,"avg")}};az.className="AveragePooling2D";$e.registerClass(az);var Yre=class extends Xt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new de(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];vi(this.poolSize,"poolSize"),vi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ar(this.dataFormat),qs(this.padding),this.inputSpec=[new zr({ndim:5})]}computeOutputShape(e){e=pn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],n=this.dataFormat==="channelsFirst"?e[3]:e[2],r=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=Ho(t,this.poolSize[0],this.padding,this.strides[0]),n=Ho(n,this.poolSize[1],this.padding,this.strides[1]),r=Ho(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return ue(()=>(this.invokeCallHook(e,t),this.poolingFunction($t(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},sz=class extends Yre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),Zre(e,t,n,r,i,"max")}};sz.className="MaxPooling3D";$e.registerClass(sz);var oz=class extends Yre{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ar(i),qs(r),Zre(e,t,n,r,i,"avg")}};oz.className="AveragePooling3D";$e.registerClass(oz);var Qre=class extends Xt{constructor(e){super(e),this.inputSpec=[new zr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new qt}},lz=class extends Qre{constructor(e){super(e||{})}call(e,t){return ue(()=>{let n=$t(e);return gr(n,1)})}};lz.className="GlobalAveragePooling1D";$e.registerClass(lz);var uz=class extends Qre{constructor(e){super(e||{})}call(e,t){return ue(()=>{let n=$t(e);return Ds(n,1)})}};uz.className="GlobalMaxPooling1D";$e.registerClass(uz);var eie=class extends Xt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ar(this.dataFormat),this.inputSpec=[new zr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new qt}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},cz=class extends eie{call(e,t){return ue(()=>{let n=$t(e);return this.dataFormat==="channelsLast"?gr(n,[1,2]):gr(n,[2,3])})}};cz.className="GlobalAveragePooling2D";$e.registerClass(cz);var dz=class extends eie{call(e,t){return ue(()=>{let n=$t(e);return this.dataFormat==="channelsLast"?Ds(n,[1,2]):Ds(n,[2,3])})}};dz.className="GlobalMaxPooling2D";$e.registerClass(dz);var tie=class extends Xt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,i=jo(r,n);delete t.layer;let a={layer:i};return Object.assign(a,t),new e(a)}},pz=class extends tie{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=pn(e),e.length<3)throw new de(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=pn(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return ue(()=>(e=$t(e),Gre((n,r)=>[$t(this.layer.call(n,t)),[]],e,[],!1,null,null,!1,!0)[1]))}};pz.className="TimeDistributed";$e.registerClass(pz);function dGe(e){sm(dUe,"BidirectionalMergeMode",e)}var pGe="concat",hz=class extends tie{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=jo(n),t.goBackwards=t.goBackwards!==!0;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=jo(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?pGe:e.mergeMode,dGe(this.mergeMode),e.weights)throw new qt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let n,r,i;return this.returnState&&(i=t.slice(1)),n=t[0],n=n,this.mergeMode==="concat"?(n[n.length-1]*=2,r=[n]):this.mergeMode==null?r=[n,n.slice()]:r=[n],this.returnState?this.mergeMode==null?r.concat(i).concat(i.slice()):[n].concat(i).concat(i.slice()):Ma(r)}apply(e,t){let n=t==null?null:t.initialState,r=t==null?null:t.constants;t==null&&(t={});let i=Ure(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(n==null||n.length===0)&&r==null)return super.apply(e,t);let a=[],s=[];if(n!=null){let l=n.length;if(l%2>0)throw new de("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,a.push(...n);let u=n.map(c=>new zr({shape:c.shape}));this.forwardLayer.stateSpec=u.slice(0,l/2),this.backwardLayer.stateSpec=u.slice(l/2),s.push(...u)}if(r!=null)throw new qt("Support for constants in Bidirectional layers is not implemented yet.");let o=a[0]instanceof nl;for(let l of a)if(l instanceof nl!==o)throw new de("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let l=[e].concat(a),u=this.inputSpec.concat(s),c=this.inputSpec;this.inputSpec=u;let d=super.apply(l,t);return this.inputSpec=c,d}else return super.apply(e,t)}call(e,t){return ue(()=>{let n=t.initialState,r,i;if(n==null)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{let o=n.slice(0,n.length/2),l=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:l}))}let a;this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=Ws(i,1));let s;return this.mergeMode==="concat"?s=KL([r,i]):this.mergeMode==="sum"?s=we(r,i):this.mergeMode==="ave"?s=se(.5,we(r,i)):this.mergeMode==="mul"?s=se(r,i):this.mergeMode==null&&(s=[r,i]),this.returnState?this.mergeMode==null?s.concat(a):[s].concat(a):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Bp(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Bp(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let n;if(this.returnSequences?this.mergeMode==null?n=[t,t]:n=t:this.mergeMode==null?n=[null,null]:n=null,this.returnState){let r=this.forwardLayer.states.map(i=>null);return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}else return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=jo(t.layer);if(delete t.layer,t.numConstants!=null)throw new qt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};hz.className="Bidirectional";$e.registerClass(hz);var fz=class extends Xt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return ue(()=>(e=$t(e),e.dtype!=="float32"&&(e=zu(e,"float32")),we(se(e,this.scale),this.offset)))}};fz.className="Rescaling";$e.registerClass(fz);var{resizeBilinear:hGe,cropAndResize:fGe}=Ns,mz=class extends Xt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,a,s,o){return ue(()=>{let l,u=!1,c=t/a,d=n/s,p=(r+t)/a,h=(i+n)/s,m=[c,d,p,h],g=[];e.rank===3?(u=!0,l=Wr([e])):l=e;for(let _=0;_<l.shape[0];_++)g.push(m);let y=ma(g,[g.length,4]),v=gh(0,g.length,1,"int32"),b=fGe(l,y,v,[r,i],"nearest");return zu(u?$t($r(b)):b,o)})}upsize(e,t,n,r){return ue(()=>{let i=hGe(e,[t,n]);return zu(i,r)})}call(e,t){return ue(()=>{let n=$t(e),r=n.dtype,i=n.shape,a=i[i.length-3],s=i[i.length-2],o=0;a!==this.height&&(o=Math.floor((a-this.height)/2));let l=0;return s!==this.width&&(l=Math.floor((s-this.width)/2),l===0&&(l=1)),o>=0&&l>=0?this.centerCrop(n,o,l,this.height,this.width,a,s,r):this.upsize(e,this.height,this.width,r)})}getConfig(){let e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=pn(e);let t=e.length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}};mz.className="CenterCrop";$e.registerClass(mz);function mGe(e,t,n,r){let i=$t(e);if(i.dtype!=="int32"&&(i=zu(i,"int32")),t==="int")return i;let a=i.shape;if(i.rank===0&&(i=gi(i,-1)),t==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=gi(i,-1)),i.rank>2)throw new de(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${a} which would result in output rank ${i.rank}.`);let s=["multiHot","oneHot"].includes(t),o=i,l;if(typeof r<"u"&&t==="count"?l=pI(o,r,n,s):l=pI(o,[],n,s),t!=="tfIdf")return l;if(r)return se(l,r);throw new de("When outputMode is 'tfIdf', weights must be provided.")}var gz=class extends Xt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=pn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return ue(()=>{e=$t(e),e.dtype!=="int32"&&(e=zu(e,"int32"));let n;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new de(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);n=$t(t.countWeights)}let r=Ds(e),i=oy(e),a=Ca(this.numTokens,r).bufferSync().get(0),s=Ju(i,0).bufferSync().get(0);if(!(a&&s))throw new de(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return mGe(e,this.outputMode,this.numTokens,n)})}};gz.className="CategoryEncoding";$e.registerClass(gz);var gGe=["bilinear","nearest"],gU=new Set(gGe),yz=class extends Xt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(gU.has(e.interpolation))this.interpolation=e.interpolation;else throw new de(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=pn(e);let t=e[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return ue(()=>{let n=[this.height,this.width];if(this.interpolation==="bilinear")return Ns.resizeBilinear(e,n,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ns.resizeNearestNeighbor(e,n,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...gU]} are supported`)})}};yz.className="Resizing";$e.registerClass(yz);var nie=class{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}};nie.className="RandomSeed";var rie=class extends Xt{constructor(e){super(e),this.randomGenerator=new nie(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}};rie.className="BaseRandomLayer";var yGe=["bilinear","nearest"],yU=new Set(yGe),vz=class extends rie{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new de(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new de(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new de(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(n)if(yU.has(n))this.interpolation=n;else throw new de(`Invalid interpolation parameter: ${n} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=pn(e);let t=e[2];return[this.imgHeight,-1,t]}call(e,t){return ue(()=>{let n=$t(e);this.imgHeight=n.shape[n.shape.length-3];let r=n.shape[n.shape.length-2];this.widthFactor=Fd([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*r;i=Math.round(i);let a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Ns.resizeBilinear(e,a);case"nearest":return Ns.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...yU]} are supported`)}})}};vz.className="RandomWidth";$e.registerClass(vz);function vGe(e){return new Qv(e)}function bGe(e){return new bF(e)}function wGe(e){return new gF(e)}function xGe(e){return new yF(e)}function _Ge(e){return new vF(e)}function kGe(e){return new xF(e)}function SGe(e){return new wF(e)}function CGe(e){return new IF(e)}function IGe(e){return new bT(e)}function $Ge(e){return new kF(e)}function TGe(e){return new wT(e)}function NGe(e){return new SF(e)}function EGe(e){return new CF(e)}function OGe(e){return new $F(e)}function PGe(e){return new TF(e)}function MGe(e){return new NF(e)}function AGe(e){return new LF(e)}function RGe(e){return new RF(e)}function DGe(e){return new CT(e)}function LGe(e){return new AF(e)}function FGe(e){return new DF(e)}function zGe(e){return new FF(e)}function BGe(e){return new zF(e)}function WGe(e){return new BF(e)}function VGe(e){return new VF(e)}function jGe(e){return new jF(e)}function HGe(e){return new UF(e)}function UGe(e){return new KF(e)}function GGe(e){return new GF(e)}function qGe(e){return new qF(e)}function KGe(e){return new HF(e)}function ZGe(e){return new ZF(e)}function XGe(e){return new QF(e)}function JGe(e){return new ez(e)}function YGe(e){return new tz(e)}function bz(e){return new rz(e)}function QGe(e){return bz(e)}function e7e(e){return bz(e)}function wz(e){return new az(e)}function t7e(e){return wz(e)}function n7e(e){return wz(e)}function xz(e){return new oz(e)}function r7e(e){return xz(e)}function i7e(e){return xz(e)}function a7e(e){return new lz(e)}function s7e(e){return new cz(e)}function iie(e){return new uz(e)}function aie(e){return new dz(e)}function sie(e){return new nz(e)}function oie(e){return new iz(e)}function o7e(e){return new sz(e)}function l7e(e){return new OF(e)}function u7e(e){return new _T(e)}function c7e(e){return new PF(e)}function d7e(e){return new tx(e)}function p7e(e){return new EF(e)}function h7e(e){return new xT(e)}function f7e(e){return new MF(e)}function m7e(e){return new ST(e)}function g7e(e){return new ec(e)}function y7e(e){return new kT(e)}function v7e(e){return new hz(e)}function b7e(e){return new pz(e)}var w7e=iie,x7e=aie,_7e=sie,k7e=oie;function S7e(e){return new XF(e)}function C7e(e){return new JF(e)}function I7e(e){return new YF(e)}function $7e(e){return new WF(e)}function T7e(e){return new fz(e)}function N7e(e){return new mz(e)}function E7e(e){return new yz(e)}function O7e(e){return new gz(e)}function P7e(e){return new vz(e)}var lie={};Dt(lie,{MAPE:()=>j7e,MSE:()=>G7e,binaryAccuracy:()=>M7e,binaryCrossentropy:()=>A7e,categoricalAccuracy:()=>D7e,categoricalCrossentropy:()=>L7e,cosineProximity:()=>B7e,mape:()=>H7e,meanAbsoluteError:()=>W7e,meanAbsolutePercentageError:()=>V7e,meanSquaredError:()=>U7e,mse:()=>q7e,precision:()=>F7e,recall:()=>z7e,sparseCategoricalAccuracy:()=>R7e});function M7e(e,t){return cF(e,t)}function A7e(e,t){return hre(e,t)}function R7e(e,t){return fre(e,t)}function D7e(e,t){return dF(e,t)}function L7e(e,t){return pF(e,t)}function F7e(e,t){return pre(e,t)}function z7e(e,t){return y8e(e,t)}function B7e(e,t){return uF(e,t)}function W7e(e,t){return mT(e,t)}function V7e(e,t){return e0(e,t)}function j7e(e,t){return e0(e,t)}function H7e(e,t){return e0(e,t)}function U7e(e,t){return om(e,t)}function G7e(e,t){return om(e,t)}function q7e(e,t){return om(e,t)}var uie={};Dt(uie,{modelFromJSON:()=>q8e});var cie={};Dt(cie,{l1:()=>Z7e,l1l2:()=>K7e,l2:()=>X7e});function K7e(e){return new Qw(e)}function Z7e(e){return eGe(e)}function X7e(e){return tGe(e)}var die=class extends my{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Iu))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function I_(e,t){return e<t}function vU(e,t){return e>t}var pie=class extends die{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new qt("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=I_:this.mode==="max"?this.monitorFunc=vU:this.monitor.indexOf("acc")!==-1?this.monitorFunc=vU:this.monitorFunc=I_,this.monitorFunc===I_&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===I_?1/0:-1/0}async onEpochEnd(e,t){await vc(t);let n=this.getMonitorValue(t);n!=null&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){e==null&&(e={});let t=e[this.monitor];return t==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}};function J7e(e){return new pie(e)}var Y7e={earlyStopping:J7e},Q7e=fe();Q7e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var es;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(es||(es={}));var bU;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(bU||(bU={}));var _z={};function e9e(e,t){let n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};_z[e]=n}function hie(e){return _z[e]}function t9e(e){delete _z[e]}function A(e,t,n,r,i){let a=t.inputParams[e];if(a&&a.inputIndexStart!==void 0){let o=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?o+1:a.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if(a.type==="tensor")return Ni(t.inputNames[u],n,r,i);if(a.type==="tensors"){let p=t.inputs.slice(o,l);return t.inputNames.slice(o,l).filter((h,m)=>{var g;return((g=p[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(h=>Ni(h,n,r,i))}let c=Ni(t.inputNames[u],n,r,i),d=c.dataSync();return a.type==="number"?d[0]:M.toNestedArray(c.shape,d)}let s=t.attrParams[e];return s&&s.value}function Ni(e,t,n,r){let[i,a]=ns(e,n);if(r!=null){let o=r.getHashTableHandleByName(i);if(o!=null)return o}let s=n.currentContextIds.find(o=>!!t[kI(i,o)]);return s!==void 0?t[kI(i,s)][a]:void 0}function wU(e,t,n){return t[kI(e,n.currentContextId)]}function yu(e,t){let[n,r,i]=ns(e,t);return[kI(n,t&&t.currentContextId),r,i]}function kI(e,t){return t?`${e}-${t}`:e}function ns(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let a=t.parseNodeNameCache.get(e);if(a!=null)return a}let r=e.split(":"),i;if(r.length===1)i=[e,0,void 0];else{let a=r[0],s=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);i=[a,o,s]}return n&&t.parseNodeNameCache.set(e,i),i}function xk(e,t,n){let r=A("pad",e,t,n);if(r==="explicit"){r=A("explicitPaddings",e,t,n);let i=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)i[a][0]=r[a*2],i[a][1]=r[a*2+1];return i}return r}function vu(e){return e.kept?e:zl(e)}var fie={};Dt(fie,{json:()=>n9e});var n9e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mie={};Dt(mie,{json:()=>r9e});var r9e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gie={};Dt(gie,{json:()=>i9e});var i9e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],yie={};Dt(yie,{json:()=>a9e});var a9e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],vie={};Dt(vie,{json:()=>s9e});var s9e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],bie={};Dt(bie,{json:()=>o9e});var o9e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],wie={};Dt(wie,{json:()=>l9e});var l9e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],xie={};Dt(xie,{json:()=>u9e});var u9e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],_ie={};Dt(_ie,{json:()=>c9e});var c9e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],kie={};Dt(kie,{json:()=>d9e});var d9e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Sie={};Dt(Sie,{json:()=>p9e});var p9e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Cie={};Dt(Cie,{json:()=>h9e});var h9e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Iie={};Dt(Iie,{json:()=>f9e});var f9e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],$ie={};Dt($ie,{json:()=>m9e});var m9e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Tie={};Dt(Tie,{json:()=>g9e});var g9e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Nie={};Dt(Nie,{json:()=>y9e});var y9e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Eie={};Dt(Eie,{json:()=>v9e});var v9e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Oie={};Dt(Oie,{json:()=>b9e});var b9e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Pie={};Dt(Pie,{json:()=>w9e});var w9e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],xU=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[fie,mie,gie,yie,vie,bie,wie,xie,_ie,kie,Sie,Cie,Iie,$ie,Tie,Nie,Eie,Oie,Pie],t=[].concat(...e.map(n=>n.json));this.opMappers=t.reduce((n,r)=>(n[r.tfOpName]=r,n),{})}transformGraph(e,t={}){let n=e.node,r=[],i=[],a=[],s=n.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?r.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&a.push(m[g.name]),m),{}),o=[],l=[],u={},c={};t!=null&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));let d=Object.keys(s);d.forEach(m=>{let g=s[m];g.inputNames.forEach((y,v)=>{let[b,,_]=yu(y),k=s[b];if(k.outputs!=null){let S=k.outputs.indexOf(_);if(S!==-1){let $=`${b}:${S}`;g.inputNames[v]=$}}g.inputs.push(k),k.children.push(g)})}),Object.keys(c).length===0?d.forEach(m=>{let g=s[m];g.children.length===0&&l.push(g)}):Object.keys(c).forEach(m=>{let[g]=yu(m),y=s[g];y!=null&&(y.signatureKey=c[m],l.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{let[g]=yu(m),y=s[g];y&&(y.signatureKey=u[m],o.push(y))}):o=r;let p={};e.library!=null&&e.library.function!=null&&(p=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));let h={nodes:s,inputs:o,outputs:l,weights:i,placeholders:r,signature:t,functions:p};return a.length>0&&(h.initNodes=a),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=hie(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(n.inputParams=t.inputs.reduce((r,i)=>(r[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},r),{})),t.attrs!=null&&(n.attrParams=t.attrs.reduce((r,i)=>{let a=i.type,s;switch(i.type){case"string":s=aM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=aM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=pM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=pM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=oM(e.attr,i.tfName,i.defaultValue||0),s===void 0&&i.tfDeprecatedName&&(s=oM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=dM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=dM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=sM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=sM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=fM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=fM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=cM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=cM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=hM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=hM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=lM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=lM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=uM(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=uM(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=_U(e.attr,i.tfName,i.defaultValue),s===void 0&&i.tfDeprecatedName&&(s=_U(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return r[i.name]={value:s,type:a},r},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r=[],i={};t!=null&&(i=t.reduce((u,c)=>(u[c.name]=this.mapNode(c),c.op==="Const"&&r.push(u[c.name]),u),{}));let a=[],s=[];e.signature.inputArg.forEach(u=>{let[c]=yu(u.name),d={name:c,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:kz(u.type),type:"dtype"}},children:[]};d.signatureKey=u.name,a.push(d),i[c]=d}),Object.keys(i).forEach(u=>{let c=i[u];c.inputNames.forEach((d,p)=>{let[h,,m]=yu(d),g=i[h];if(g.outputs!=null){let y=g.outputs.indexOf(m);if(y!==-1){let v=`${h}:${y}`;c.inputNames[p]=v}}c.inputs.push(g),g.children.push(c)})});let o=e.ret;e.signature.outputArg.forEach(u=>{let[c,d]=yu(o[u.name]),p=i[c];p!=null&&(p.defaultOutput=d,s.push(p))});let l=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:s,weights:r,placeholders:n,signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n),t),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return t!=null&&(n=t[n]),{name:n,dtype:e.type}}};function x9e(e){let t=fe().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Mie(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):x9e(e);return t?n:n.toLowerCase()}function aM(e,t,n,r=!1){let i=e[t];return i!=null?Mie(i.s,r):n}function sM(e,t,n){let r=e[t];return r?r.b:n}function oM(e,t,n){let r=e[t]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function kz(e){switch(typeof e=="string"&&(e=es[e]),e){case es.DT_FLOAT:case es.DT_HALF:return"float32";case es.DT_INT32:case es.DT_INT64:case es.DT_INT8:case es.DT_UINT8:return"int32";case es.DT_BOOL:return"bool";case es.DT_DOUBLE:return"float32";case es.DT_STRING:return"string";case es.DT_COMPLEX64:case es.DT_COMPLEX128:return"complex64";default:return null}}function _U(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function lM(e,t,n){let r=e[t];return r&&r.type?kz(r.type):n}function uM(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(i=>kz(i)):n}function Aie(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function cM(e,t,n){let r=e[t];return r&&r.shape?Aie(r.shape):n}function dM(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function pM(e,t,n,r=!1){let i=e[t];return i&&i.list&&i.list.s?i.list.s.map(a=>Mie(a,r)):n}function hM(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(i=>Aie(i)):n}function fM(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var _9e=class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,i)=>(r[i]=this.getAttr(i),r),{}))}getInput(e){return Ni(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(n.tensor!=null)return Ni(e,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return oM(this.node.rawAttrs,e,t);if(n.s!=null)return aM(this.node.rawAttrs,e,t);if(n.b!=null)return sM(this.node.rawAttrs,e,t);if(n.shape!=null)return cM(this.node.rawAttrs,e,t);if(n.type!=null)return lM(this.node.rawAttrs,e,t);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return dM(this.node.rawAttrs,e,t);if(n.list.s!=null)return pM(this.node.rawAttrs,e,t);if(n.list.shape!=null)return hM(this.node.rawAttrs,e,t);if(n.list.b!=null)return fM(this.node.rawAttrs,e,t);if(n.list.type!=null)return uM(this.node.rawAttrs,e,t)}return t}},_i={};Dt(_i,{OP_SCOPE_SUFFIX:()=>SD,abs:()=>Dr,acos:()=>ND,acosh:()=>ED,add:()=>we,addN:()=>Xee,all:()=>T$,any:()=>y1,argMax:()=>dh,argMin:()=>OD,asin:()=>PD,asinh:()=>MD,atan:()=>AD,atan2:()=>RD,atanh:()=>DD,avgPool:()=>Xu,avgPool3d:()=>FD,basicLSTMCell:()=>ete,batchNorm:()=>nm,batchNorm2d:()=>zD,batchNorm3d:()=>BD,batchNorm4d:()=>WD,batchToSpaceND:()=>Aw,bincount:()=>VD,bitwiseAnd:()=>tte,booleanMaskAsync:()=>Hte,broadcastArgs:()=>nte,broadcastTo:()=>zp,buffer:()=>Gt,cast:()=>Ae,ceil:()=>jD,clipByValue:()=>Qi,clone:()=>zl,complex:()=>Lu,concat:()=>Wn,concat1d:()=>HD,concat2d:()=>UD,concat3d:()=>GD,concat4d:()=>qD,conv1d:()=>N$,conv2d:()=>ya,conv2dTranspose:()=>E$,conv3d:()=>ZD,conv3dTranspose:()=>XD,cos:()=>Rw,cosh:()=>O$,cosineWindow:()=>Q$,cumprod:()=>w1,cumsum:()=>P$,denseBincount:()=>pI,depthToSpace:()=>JD,depthwiseConv2d:()=>rm,diag:()=>ite,dilation2d:()=>YD,div:()=>Qe,divNoNan:()=>QD,dot:()=>eL,dropout:()=>EL,einsum:()=>vp,elu:()=>Gv,enclosingPowerOfTwo:()=>OL,ensureShape:()=>ste,equal:()=>gs,erf:()=>tL,euclideanNorm:()=>iL,exp:()=>ea,expandDims:()=>gi,expm1:()=>aL,eye:()=>M$,fft:()=>Uw,fill:()=>ps,floor:()=>Kv,floorDiv:()=>$$,fused:()=>hy,gather:()=>Zv,gatherND:()=>Kte,greater:()=>Ca,greaterEqual:()=>Ju,ifft:()=>py,imag:()=>Dw,image:()=>Ns,inTopKAsync:()=>Zte,irfft:()=>G$,isFinite:()=>sL,isInf:()=>oL,isNaN:()=>lL,leakyRelu:()=>Lw,less:()=>ly,lessEqual:()=>Ld,linalg:()=>AL,linspace:()=>dte,localResponseNormalization:()=>uL,log:()=>ys,log1p:()=>Fw,logSigmoid:()=>cL,logSoftmax:()=>R$,logSumExp:()=>zw,logicalAnd:()=>mo,logicalNot:()=>Bw,logicalOr:()=>D$,logicalXor:()=>dL,losses:()=>one,lowerBound:()=>hte,matMul:()=>jt,max:()=>Ds,maxPool:()=>ci,maxPool3d:()=>pL,maxPoolWithArgmax:()=>fte,maximum:()=>Jl,mean:()=>gr,meshgrid:()=>mte,min:()=>oy,minimum:()=>fd,mirrorPad:()=>hL,mod:()=>fL,moments:()=>Ww,movingAverage:()=>Ute,mul:()=>se,multiRNNCell:()=>gte,multinomial:()=>yte,neg:()=>Xn,norm:()=>qv,notEqual:()=>mh,oneHot:()=>uy,ones:()=>Aa,onesLike:()=>vs,op:()=>ie,outerProduct:()=>vte,pad:()=>sl,pad1d:()=>bte,pad2d:()=>wte,pad3d:()=>xte,pad4d:()=>_te,pool:()=>mL,pow:()=>Fu,prelu:()=>jw,print:()=>TD,prod:()=>gL,raggedGather:()=>kte,raggedRange:()=>Ste,raggedTensorToTensor:()=>Cte,rand:()=>Ite,randomGamma:()=>Ete,randomNormal:()=>F$,randomStandardNormal:()=>Ote,randomUniform:()=>Fd,randomUniformInt:()=>Pte,range:()=>gh,real:()=>cy,reciprocal:()=>xL,relu:()=>On,relu6:()=>z$,reshape:()=>le,reverse:()=>Ws,reverse1d:()=>Mte,reverse2d:()=>Ate,reverse3d:()=>Rte,reverse4d:()=>Dte,rfft:()=>Gw,round:()=>B$,rsqrt:()=>W$,scalar:()=>gt,scatterND:()=>Gte,searchSorted:()=>L$,selu:()=>V$,separableConv2d:()=>Xv,setdiff1dAsync:()=>Lte,sigmoid:()=>co,sign:()=>_L,signal:()=>sne,sin:()=>j$,sinh:()=>H$,slice:()=>nn,slice1d:()=>Hw,slice2d:()=>U$,slice3d:()=>Jv,slice4d:()=>dy,softmax:()=>zd,softplus:()=>im,spaceToBatchND:()=>Vw,sparse:()=>lne,sparseToDense:()=>qte,spectral:()=>ane,split:()=>Fa,sqrt:()=>Di,square:()=>zn,squaredDifference:()=>q$,squeeze:()=>Bd,stack:()=>Wr,step:()=>am,stridedSlice:()=>kL,string:()=>une,sub:()=>Ve,sum:()=>ot,tan:()=>SL,tanh:()=>hh,tensor:()=>ma,tensor1d:()=>$n,tensor2d:()=>Bl,tensor3d:()=>K$,tensor4d:()=>md,tensor5d:()=>Fte,tensor6d:()=>zte,tensorScatterUpdate:()=>Wte,tile:()=>ls,topk:()=>IL,transpose:()=>Ht,truncatedNormal:()=>J$,unique:()=>$L,unsortedSegmentSum:()=>Y$,unstack:()=>$r,upperBound:()=>Vte,variable:()=>TL,where:()=>wi,whereAsync:()=>NL,zeros:()=>yr,zerosLike:()=>an});var k9e=(e,t,n,r=_i)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(A("a",e,t,n),A("b",e,t,n))];case"AddN":return[r.addN(A("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(A("a",e,t,n),A("b",e,t,n))];case"Mul":return[r.mul(A("a",e,t,n),A("b",e,t,n))];case"RealDiv":case"Div":return[r.div(A("a",e,t,n),A("b",e,t,n))];case"DivNoNan":return[r.divNoNan(A("a",e,t,n),A("b",e,t,n))];case"FloorDiv":return[r.floorDiv(A("a",e,t,n),A("b",e,t,n))];case"Sub":return[r.sub(A("a",e,t,n),A("b",e,t,n))];case"Minimum":return[r.minimum(A("a",e,t,n),A("b",e,t,n))];case"Maximum":return[r.maximum(A("a",e,t,n),A("b",e,t,n))];case"Pow":return[r.pow(A("a",e,t,n),A("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(A("a",e,t,n),A("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},S9e=(e,t,n,r=_i)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(A("x",e,t,n))];case"Acos":return[r.acos(A("x",e,t,n))];case"Acosh":return[r.acosh(A("x",e,t,n))];case"Asin":return[r.asin(A("x",e,t,n))];case"Asinh":return[r.asinh(A("x",e,t,n))];case"Atan":return[r.atan(A("x",e,t,n))];case"Atan2":return[r.atan2(A("x",e,t,n),A("y",e,t,n))];case"Atanh":return[r.atanh(A("x",e,t,n))];case"Ceil":return[r.ceil(A("x",e,t,n))];case"Complex":return[r.complex(A("real",e,t,n),A("imag",e,t,n))];case"Cos":return[r.cos(A("x",e,t,n))];case"Cosh":return[r.cosh(A("x",e,t,n))];case"Elu":return[r.elu(A("x",e,t,n))];case"Erf":return[r.erf(A("x",e,t,n))];case"Exp":return[r.exp(A("x",e,t,n))];case"Expm1":return[r.expm1(A("x",e,t,n))];case"Floor":return[r.floor(A("x",e,t,n))];case"Log":return[r.log(A("x",e,t,n))];case"Log1p":return[r.log1p(A("x",e,t,n))];case"Imag":return[r.imag(A("x",e,t,n))];case"Neg":return[r.neg(A("x",e,t,n))];case"Reciprocal":return[r.reciprocal(A("x",e,t,n))];case"Real":return[r.real(A("x",e,t,n))];case"Relu":return[r.relu(A("x",e,t,n))];case"Round":return[r.round(A("x",e,t,n))];case"Selu":return[r.selu(A("x",e,t,n))];case"Sigmoid":return[r.sigmoid(A("x",e,t,n))];case"Sin":return[r.sin(A("x",e,t,n))];case"Sign":return[r.sign(A("x",e,t,n))];case"Sinh":return[r.sinh(A("x",e,t,n))];case"Softplus":return[r.softplus(A("x",e,t,n))];case"Sqrt":return[r.sqrt(A("x",e,t,n))];case"Square":return[r.square(A("x",e,t,n))];case"Tanh":return[r.tanh(A("x",e,t,n))];case"Tan":return[r.tan(A("x",e,t,n))];case"ClipByValue":return[r.clipByValue(A("x",e,t,n),A("clipValueMin",e,t,n),A("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(A("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Ni(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(A("x",e,t,n),A("alpha",e,t,n))];case"Prelu":return[r.prelu(A("x",e,t,n),A("alpha",e,t,n))];case"IsNan":return[r.isNaN(Ni(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Ni(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Ni(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function to(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){M.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let i=e[r],a=t[r];M.assert(i<0||a<0||i===a,()=>n+` Shapes ${e} and ${t} must match`)}}}function kU(e){return!(typeof e=="number"||e.some(t=>t<0))}function Y0(e,t,n){let r=mM(e,n),i=!kU(r);if(i&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&t.forEach(a=>{r=mM(a.shape,r)}),!kU(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function mM(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let i=e[r],a=t[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:a}return n}var C9e=class{constructor(e,t,n,r,i,a,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=gt(0),Yr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),to(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Yr(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((n,r)=>this.write(n,t[r]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(e.length===0)return ma([],[0].concat(this.elementShape));let n=this.readMany(e);return to(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Wr(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return ma([],[0].concat(this.elementShape));let t=[];for(let r=0;r<this.size();r++)t.push(r);let n=this.readMany(t);return to(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Wn(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,$r(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,r=e.map(o=>(n+=o,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=n===0?0:t.size/n,a=[];ue(()=>{t=le(t,[1,n,i]);for(let o=0;o<e.length;++o){let l=[0,o===0?0:r[o-1],0],u=[1,e[o],i];a[o]=le(nn(t,l,u),this.elementShape)}return a});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,a)}},$T=class gM{get id(){return this.idTensor.id}constructor(t,n,r,i=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t!=null&&t.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);to(n,a.shape,"TensorList shape mismatch: "),Yr(a)}),this.idTensor=gt(0),this.maxNumElements=i,Yr(this.idTensor)}copy(){return new gM([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);to(t,this.elementShape,"TensorList shape mismatch: ");let i=Y0(this.elementShape,this.tensors,t);return ue(()=>{let a=this.tensors.map(s=>le(s,i));return Wr(a,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Y0(this.elementShape,this.tensors,t),i=this.tensors.pop();return i.kept=!1,to(i.shape,t,"TensorList shape mismatch: "),le(i,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(to(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Yr(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let n=new gM([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);to(this.tensors[t].shape,n,"TensorList shape mismatch: ");let i=Y0(this.elementShape,this.tensors,n);return le(this.tensors[t],i)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);to(this.elementShape,n.shape,"TensorList shape mismatch: "),Yr(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);to(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());let i=Y0(this.elementShape,this.tensors,r);return t.length===0?ma([],[0].concat(i)):ue(()=>{let a=t.map(s=>le(this.tensors[s],i));return Wr(a,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);to(this.elementShape,n,"TensorList shape mismatch: ");let r=Y0(this.elementShape,this.tensors,n);return this.size()===0?ma([],[0].concat(r)):ue(()=>{let i=this.tensors.map(a=>le(a,r));return Wn(i,0)})}};function I9e(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);let i=e.shape.slice(1);to(i,t,"TensorList shape mismatch: ");let a=$r(e);return new $T(a,t,r)}function $9e(e,t,n,r){return new $T([],e,t,r)}function T9e(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let i=Math.max(...t);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);let a=new $T([],n,e.dtype,r),s=$r(e,0);return t.forEach((o,l)=>{a.setItem(o,s[l])}),a}function N9e(e,t,n){let r=0,i=t.map(c=>(r+=c,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let a=e.shape.slice(1),s=mM(a,n),o=r===0?0:e.size/r,l=ue(()=>{let c=[];e=le(e,[1,r,o]);for(let d=0;d<t.length;++d){let p=[0,d===0?0:i[d-1],0],h=[1,t[d],o];c[d]=le(nn(e,p,h),s)}return e.dispose(),c}),u=new $T([],n,e.dtype,t.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}var E9e=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=A("thenBranch",e,t,n),i=A("elseBranch",e,t,n),a=A("cond",e,t,n),s=A("args",e,t,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=A("body",e,t,n),i=A("cond",e,t,n),a=A("args",e,t,n),s=await n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),o=a.map(c=>c.id),l=await s[0].data();s.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=a;for(;l[0];){let c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);let d=u.map(h=>h.id);c.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});let p=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(h=>{!h.kept&&o.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return u}case"LoopCond":{let r=A("pred",e,t,n);return[vu(r)]}case"Switch":{let r=A("pred",e,t,n),i=A("data",e,t,n);return i.kept||(i=vu(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{let r=e.inputNames.find(i=>Ni(i,t,n)!==void 0);if(r){let i=Ni(r,t,n);return[vu(i)]}return}case"Enter":{let r=A("frameName",e,t,n),i=A("tensor",e,t,n);return n.enterFrame(r),[vu(i)]}case"Exit":{let r=A("tensor",e,t,n);return n.exitFrame(),[vu(r)]}case"NextIteration":{let r=A("tensor",e,t,n);return n.nextIteration(),[vu(r)]}case"TensorArrayV3":{let r=A("size",e,t,n),i=A("dtype",e,t,n),a=A("elementShape",e,t,n),s=A("dynamicSize",e,t,n),o=A("clearAfterRead",e,t,n),l=A("identicalElementShapes",e,t,n),u=A("name",e,t,n),c=new C9e(u,i,r,a,l,s,o);return n.addTensorArray(c),[c.idTensor,gt(1)]}case"TensorArrayWriteV3":{let r=A("tensorArrayId",e,t,n),i=A("index",e,t,n),a=A("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(i,a),[s.idTensor]}case"TensorArrayReadV3":{let r=A("tensorArrayId",e,t,n),i=A("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{let r=A("tensorArrayId",e,t,n),i=A("indices",e,t,n),a=A("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,a)]}case"TensorArrayScatterV3":{let r=A("tensorArrayId",e,t,n),i=A("indices",e,t,n),a=A("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(i,a),[s.idTensor]}case"TensorArrayConcatV3":{let r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),a=A("dtype",e,t,n);return[i.concat(a)]}case"TensorArraySplitV3":{let r=A("tensorArrayId",e,t,n),i=A("tensor",e,t,n),a=A("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(a,i),[s.idTensor]}case"TensorArraySizeV3":{let r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return[gt(i.size(),"int32")]}case"TensorArrayCloseV3":{let r=A("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{let r=A("tensorListId",e,t,n),i=A("index",e,t,n),a=A("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(i,a),[s.idTensor]}case"TensorListGetItem":{let r=A("tensorListId",e,t,n),i=A("index",e,t,n),a=A("elementShape",e,t,n),s=A("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,a,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=A("indices",e,t,n),i=A("tensor",e,t,n),a=A("elementShape",e,t,n),s=A("numElements",e,t,n),o=T9e(i,r,a,s);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=A("elementShape",e,t,n),i=A("elementDType",e,t,n),a;e.op==="TensorListReserve"?a="numElements":a="maxNumElements";let s=A(a,e,t,n),o=e.op==="TensorListReserve"?-1:s,l=$9e(r,i,s,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=A("tensorListId",e,t,n),i=A("indices",e,t,n),a=A("elementShape",e,t,n),s=A("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,s,a)]}case"TensorListStack":{let r=A("tensorListId",e,t,n),i=A("elementShape",e,t,n),a=A("elementDType",e,t,n),s=A("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,a,s)]}case"TensorListFromTensor":{let r=A("tensor",e,t,n),i=A("elementShape",e,t,n),a=A("elementDType",e,t,n),s=I9e(r,i,a);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=A("tensorListId",e,t,n),i=n.getTensorList(r.id),a=A("dtype",e,t,n),s=A("elementShape",e,t,n);return[i.concat(a,s)]}case"TensorListPushBack":{let r=A("tensorListId",e,t,n),i=A("tensor",e,t,n),a=n.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{let r=A("tensorListId",e,t,n),i=A("elementShape",e,t,n),a=A("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,a)]}case"TensorListSplit":{let r=A("tensor",e,t,n),i=A("elementShape",e,t,n),a=A("lengths",e,t,n),s=N9e(r,a,i);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=A("tensorListId",e,t,n),i=n.getTensorList(r.id);return[gt(i.size(),"int32")]}case"TensorListResize":{let r=A("tensorListId",e,t,n),i=A("size",e,t,n),a=n.getTensorList(r.id).resize(i);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function SU(e,t,n){let[r,i]=A("fusedOps",e,t,n),a=r==="biasadd",s=!a,o=i==="prelu",l=r==="fusedbatchnorm",u=A("numArgs",e,t,n);if(a){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let c=A("strides",e,t,n),d=xk(e,t,n),p=A("dataFormat",e,t,n).toUpperCase(),h=A("dilations",e,t,n),[m,g]=A("args",e,t,n);s&&(g=m,m=void 0);let y=A("leakyreluAlpha",e,t,n);return{stride:c,pad:d,dataFormat:p,dilations:h,biasArg:m,preluArg:g,activationFunc:i,leakyreluAlpha:y}}var O9e=(e,t,n,r=_i)=>{switch(e.op){case"Conv1D":{let i=A("stride",e,t,n),a=A("pad",e,t,n),s=A("dataFormat",e,t,n).toUpperCase(),o=A("dilation",e,t,n);return[r.conv1d(A("x",e,t,n),A("filter",e,t,n),i,a,s,o)]}case"Conv2D":{let i=A("strides",e,t,n),a=xk(e,t,n),s=A("dataFormat",e,t,n).toUpperCase(),o=A("dilations",e,t,n);return[r.conv2d(A("x",e,t,n),A("filter",e,t,n),[i[1],i[2]],a,s,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=SU(e,t,n);return[r.fused.conv2d({x:A("x",e,t,n),filter:A("filter",e,t,n),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{let{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=SU(e,t,n);return[r.fused.depthwiseConv2d({x:A("x",e,t,n),filter:A("filter",e,t,n),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let i=A("outputShape",e,t,n),a=A("strides",e,t,n),s=xk(e,t,n);return[r.conv2dTranspose(A("x",e,t,n),A("filter",e,t,n),i,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let i=A("strides",e,t,n),a=xk(e,t,n),s=A("dilations",e,t,n),o=A("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(A("input",e,t,n),A("filter",e,t,n),[i[1],i[2]],a,o,[s[1],s[2]])]}case"Conv3D":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("dataFormat",e,t,n).toUpperCase(),o=A("dilations",e,t,n);return[r.conv3d(A("x",e,t,n),A("filter",e,t,n),[i[1],i[2],i[3]],a,s,[o[1],o[2],o[3]])]}case"AvgPool":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("kernelSize",e,t,n);return[r.avgPool(A("x",e,t,n),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPool":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("kernelSize",e,t,n);return[r.maxPool(A("x",e,t,n),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("kernelSize",e,t,n),o=A("includeBatchInIndex",e,t,n),{result:l,indexes:u}=r.maxPoolWithArgmax(A("x",e,t,n),[s[1],s[2]],[i[1],i[2]],a,o);return[l,u]}case"AvgPool3D":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("kernelSize",e,t,n);return[r.avgPool3d(A("x",e,t,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("kernelSize",e,t,n);return[r.maxPool3d(A("x",e,t,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{let i=A("strides",e,t,n),a=A("pad",e,t,n),s=A("dilations",e,t,n),o=i[1],l=i[2],u=s[1],c=s[2];return[r.dilation2d(A("x",e,t,n),A("filter",e,t,n),[o,l],a,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},P9e=(e,t,n,r=_i)=>{switch(e.op){case"Fill":{let i=A("shape",e,t,n),a=A("dtype",e,t,n),s=A("value",e,t,n);return[r.fill(i,s,a)]}case"LinSpace":{let i=A("start",e,t,n),a=A("stop",e,t,n),s=A("num",e,t,n);return[r.linspace(i,a,s)]}case"Multinomial":{let i=A("logits",e,t,n),a=A("numSamples",e,t,n),s=A("seed",e,t,n);return[r.multinomial(i,a,s)]}case"OneHot":{let i=A("indices",e,t,n),a=A("depth",e,t,n),s=A("onValue",e,t,n),o=A("offValue",e,t,n),l=A("dtype",e,t,n);return[r.oneHot(i,a,s,o,l)]}case"Ones":return[r.ones(A("shape",e,t,n),A("dtype",e,t,n))];case"OnesLike":return[r.onesLike(A("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(A("shape",e,t,n),A("dtype",e,t,n),A("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(A("shape",e,t,n),A("minval",e,t,n),A("maxval",e,t,n),A("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(A("shape",e,t,n),A("minval",e,t,n),A("maxval",e,t,n),A("seed",e,t,n))];case"Range":{let i=A("start",e,t,n),a=A("stop",e,t,n),s=A("step",e,t,n);return[r.range(i,a,s,A("dtype",e,t,n))]}case"TruncatedNormal":{let i=A("shape",e,t,n),a=A("mean",e,t,n),s=A("stdDev",e,t,n),o=A("seed",e,t,n);return[r.truncatedNormal(i,a,s,A("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(A("shape",e,t,n),A("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function NE(e,t,n){let r=A("boxes",e,t,n),i=A("scores",e,t,n),a=A("maxOutputSize",e,t,n),s=A("iouThreshold",e,t,n),o=A("scoreThreshold",e,t,n),l=A("softNmsSigma",e,t,n);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:s,scoreThreshold:o,softNmsSigma:l}}var M9e=async(e,t,n,r,i=_i)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:a,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=NE(e,t,n),d=await i.image.nonMaxSuppressionWithScoreAsync(a,s,o,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:a,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=NE(e,t,n),c=A("padToMaxOutputSize",e,t,n),d=await i.image.nonMaxSuppressionPaddedAsync(a,s,o,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:a,scores:s,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=NE(e,t,n);return[await i.image.nonMaxSuppressionAsync(a,s,o,l,u)]}case"Where":{let a=i.cast(A("condition",e,t,n),"bool"),s=[await i.whereAsync(a)];return a.dispose(),s}case"ListDiff":return i.setdiff1dAsync(A("x",e,t,n),A("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}},A9e=(e,t,n,r=_i)=>{switch(e.op){case"LowerBound":{let i=A("sortedSequence",e,t,n),a=A("values",e,t,n);return[r.lowerBound(i,a)]}case"TopKV2":{let i=A("x",e,t,n),a=A("k",e,t,n),s=A("sorted",e,t,n),o=r.topk(i,a,s);return[o.values,o.indices]}case"UpperBound":{let i=A("sortedSequence",e,t,n),a=A("values",e,t,n);return[r.upperBound(i,a)]}case"Unique":{let i=A("x",e,t,n),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{let i=A("x",e,t,n),a=A("axis",e,t,n),s=r.unique(i,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},R9e=(e,t,n,r=_i)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let i=A("default",e,t,n);return[Ni(e.name,t,n)||i];case"Placeholder":return[Ni(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let c=A("x",e,t,n);return[vu(c)]}case"IdentityN":return A("x",e,t,n).map(c=>vu(c));case"Snapshot":let a=A("x",e,t,n);return[vu(a)];case"Shape":return[r.tensor1d(A("x",e,t,n).shape,"int32")];case"ShapeN":return A("x",e,t,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(A("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(A("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=A("x",e,t,n),o=A("data",e,t,n),l=A("message",e,t,n),u=A("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}},D9e=class{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=gt(0),this.tensorMap=new Map,Yr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return gt(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),ue(()=>{let r=$r(t),i=n.length,a=r.length;M.assert(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let s=0;s<i;s++){let o=n[s],l=r[s];Yr(l),this.tensorMap.set(o,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return ue(()=>{let r=[];for(let i=0;i<n.length;i++){let a=n[i],s=this.findWithDefault(a,t);r.push(s)}return Wr(r)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return n!=null?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}},L9e=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let i=r.getHashTableHandleByName(e.name);if(i!=null)return[i];{let a=A("keyDType",e,t,n),s=A("valueDType",e,t,n),o=new D9e(a,s);return r.addHashTable(e.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let i=A("tableHandle",e,t,n,r),a=A("keys",e,t,n),s=A("values",e,t,n);return[await r.getHashTableById(i.id).import(a,s)]}case"LookupTableFind":case"LookupTableFindV2":{let i=A("tableHandle",e,t,n,r),a=A("keys",e,t,n),s=A("defaultValue",e,t,n);return[await r.getHashTableById(i.id).find(a,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let i=A("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},F9e=(e,t,n,r=_i)=>{switch(e.op){case"ResizeBilinear":{let i=A("images",e,t,n),a=A("size",e,t,n),s=A("alignCorners",e,t,n),o=A("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[a[0],a[1]],s,o)]}case"ResizeNearestNeighbor":{let i=A("images",e,t,n),a=A("size",e,t,n),s=A("alignCorners",e,t,n),o=A("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],s,o)]}case"CropAndResize":{let i=A("image",e,t,n),a=A("boxes",e,t,n),s=A("boxInd",e,t,n),o=A("cropSize",e,t,n),l=A("method",e,t,n),u=A("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,a,s,o,l,u)]}case"ImageProjectiveTransformV3":{let i=A("images",e,t,n),a=A("transforms",e,t,n),s=A("outputShape",e,t,n),o=A("fillValue",e,t,n),l=A("interpolation",e,t,n),u=A("fillMode",e,t,n);return[r.image.transform(i,a,l.toLowerCase(),u.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},z9e=(e,t,n,r=_i)=>{switch(e.op){case"Equal":return[r.equal(A("a",e,t,n),A("b",e,t,n))];case"NotEqual":return[r.notEqual(A("a",e,t,n),A("b",e,t,n))];case"Greater":return[r.greater(A("a",e,t,n),A("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(A("a",e,t,n),A("b",e,t,n))];case"Less":return[r.less(A("a",e,t,n),A("b",e,t,n))];case"LessEqual":return[r.lessEqual(A("a",e,t,n),A("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(A("a",e,t,n),A("b",e,t,n))];case"LogicalNot":return[r.logicalNot(A("a",e,t,n))];case"LogicalOr":return[r.logicalOr(A("a",e,t,n),A("b",e,t,n))];case"Select":case"SelectV2":return[r.where(A("condition",e,t,n),A("a",e,t,n),A("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(A("a",e,t,n),A("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},B9e=(e,t,n,r=_i)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(A("a",e,t,n),A("b",e,t,n),A("transposeA",e,t,n),A("transposeB",e,t,n))];case"Einsum":return[r.einsum(A("equation",e,t,n),...A("tensors",e,t,n))];case"Transpose":return[r.transpose(A("x",e,t,n),A("perm",e,t,n))];case"_FusedMatMul":let[i,a]=A("fusedOps",e,t,n),s=i==="biasadd",o=a==="prelu",l=A("numArgs",e,t,n),u=A("leakyreluAlpha",e,t,n);if(s){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[c,d]=A("args",e,t,n);return[r.fused.matMul({a:A("a",e,t,n),b:A("b",e,t,n),transposeA:A("transposeA",e,t,n),transposeB:A("transposeB",e,t,n),bias:c,activation:a,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(A("a",e,t,n),A("numLower",e,t,n),A("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},W9e=(e,t,n,r=_i)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(A("x",e,t,n),A("axis",e,t,n),A("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(A("x",e,t,n),A("mean",e,t,n),A("variance",e,t,n),A("offset",e,t,n),A("scale",e,t,n),A("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(A("x",e,t,n),A("mean",e,t,n),A("variance",e,t,n),A("offset",e,t,n),A("scale",e,t,n),A("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(A("x",e,t,n),A("radius",e,t,n),A("bias",e,t,n),A("alpha",e,t,n),A("beta",e,t,n))];case"Softmax":return[r.softmax(A("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},V9e=(e,t,n,r=_i)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(A("paramsNestedSplits",e,t,n),A("paramsDenseValues",e,t,n),A("indices",e,t,n),A("outputRaggedRank",e,t,n));return i.concat(a)}case"RaggedRange":{let{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(A("starts",e,t,n),A("limits",e,t,n),A("splits",e,t,n));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(A("shape",e,t,n),A("values",e,t,n),A("defaultValue",e,t,n),A("rowPartitionTensors",e,t,n),A("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},j9e=(e,t,n,r=_i)=>{switch(e.op){case"Max":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.max(A("x",e,t,n),o,l)]}case"Mean":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.mean(A("x",e,t,n),o,l)]}case"Min":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.min(A("x",e,t,n),o,l)]}case"Sum":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.sum(A("x",e,t,n),o,l)]}case"All":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.all(A("x",e,t,n),o,l)]}case"Any":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.any(A("x",e,t,n),o,l)]}case"ArgMax":{let o=A("axis",e,t,n);return[r.argMax(A("x",e,t,n),o)]}case"ArgMin":{let o=A("axis",e,t,n);return[r.argMin(A("x",e,t,n),o)]}case"Prod":{let o=A("axis",e,t,n),l=A("keepDims",e,t,n);return[r.prod(A("x",e,t,n),o,l)]}case"Cumprod":{let o=A("axis",e,t,n),l=A("exclusive",e,t,n),u=A("reverse",e,t,n);return[r.cumprod(A("x",e,t,n),o,l,u)]}case"Cumsum":{let o=A("axis",e,t,n),l=A("exclusive",e,t,n),u=A("reverse",e,t,n);return[r.cumsum(A("x",e,t,n),o,l,u)]}case"Bincount":let i=A("x",e,t,n),a=A("weights",e,t,n),s=A("size",e,t,n);return[r.bincount(i,a,s)];case"DenseBincount":{let o=A("x",e,t,n),l=A("weights",e,t,n),u=A("size",e,t,n),c=A("binaryOutput",e,t,n);return[r.denseBincount(o,l,u,c)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},H9e=(e,t,n,r=_i)=>{switch(e.op){case"ConcatV2":case"Concat":{let i=A("n",e,t,n),a=A("axis",e,t,n),s=A("tensors",e,t,n);return s=s.slice(0,i),[r.concat(s,a)]}case"Gather":{let i=A("x",e,t,n),a=A("indices",e,t,n);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{let i=A("axis",e,t,n),a=A("batchDims",e,t,n),s=A("x",e,t,n),o=A("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),i,a)]}case"Reverse":{let i=A("dims",e,t,n),a=[];for(let o=0;o<i.length;o++)i[o]&&a.push(o);let s=A("x",e,t,n);return[r.reverse(s,a)]}case"ReverseV2":{let i=A("axis",e,t,n),a=A("x",e,t,n);return[r.reverse(a,i)]}case"Slice":{let i=A("begin",e,t,n),a=A("size",e,t,n);return[r.slice(A("x",e,t,n),i,a)]}case"StridedSlice":{let i=A("begin",e,t,n),a=A("end",e,t,n),s=A("strides",e,t,n),o=A("beginMask",e,t,n),l=A("endMask",e,t,n),u=A("ellipsisMask",e,t,n),c=A("newAxisMask",e,t,n),d=A("shrinkAxisMask",e,t,n),p=A("x",e,t,n);return[r.stridedSlice(p,i,a,s,o,l,u,c,d)]}case"Pack":return ue(()=>{let i=A("axis",e,t,n),a=A("tensors",e,t,n),s=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map(u=>{let c=M.arraysEqual(u.shape,s);if(!c&&!M.arraysEqual(r.squeeze(u).shape,o))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,s)});return[r.stack(l,i)]});case"Unpack":{let i=A("axis",e,t,n),a=A("tensor",e,t,n);return r.unstack(a,i)}case"Tile":{let i=A("reps",e,t,n);return[r.tile(A("x",e,t,n),i)]}case"Split":case"SplitV":{let i=A("axis",e,t,n),a=A("numOrSizeSplits",e,t,n),s=A("x",e,t,n);return r.split(s,a,i)}case"ScatterNd":{let i=A("indices",e,t,n),a=A("values",e,t,n),s=A("shape",e,t,n);return[r.scatterND(i,a,s)]}case"GatherNd":{let i=A("x",e,t,n),a=A("indices",e,t,n);return[r.gatherND(i,a)]}case"SparseToDense":{let i=A("sparseIndices",e,t,n),a=A("outputShape",e,t,n),s=A("sparseValues",e,t,n),o=A("defaultValue",e,t,n);return[r.sparseToDense(i,s,a,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{let i=A("indices",e,t,n),a=A("values",e,t,n),s=A("tensor",e,t,n);return[r.tensorScatterUpdate(s,i,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},U9e=(e,t,n,r=_i)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:i,outputValues:a,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(A("indices",e,t,n),A("values",e,t,n),A("denseShape",e,t,n),A("defaultValue",e,t,n));return[i,a,s,o]}case"SparseReshape":{let{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(A("inputIndices",e,t,n),A("inputShape",e,t,n),A("newShape",e,t,n));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(A("data",e,t,n),A("indices",e,t,n),A("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(A("data",e,t,n),A("indices",e,t,n),A("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},G9e=(e,t,n,r=_i)=>{switch(e.op){case"FFT":return[r.fft(A("x",e,t,n))];case"IFFT":return[r.ifft(A("x",e,t,n))];case"RFFT":return[r.rfft(A("x",e,t,n))];case"IRFFT":return[r.irfft(A("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},q9e=(e,t,n,r=_i)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(A("input",e,t,n),A("pattern",e,t,n),A("rewrite",e,t,n),A("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(A("data",e,t,n),A("dataSplits",e,t,n),A("separator",e,t,n),A("nGramWidths",e,t,n),A("leftPad",e,t,n),A("rightPad",e,t,n),A("padWidth",e,t,n),A("preserveShortSequences",e,t,n));return[i,a]}case"StringSplit":{let{indices:i,values:a,shape:s}=r.string.stringSplit(A("input",e,t,n),A("delimiter",e,t,n),A("skipEmpty",e,t,n));return[i,a,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(A("input",e,t,n),A("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},K9e=(e,t,n,r=_i)=>{switch(e.op){case"Cast":return[r.cast(A("x",e,t,n),A("dtype",e,t,n))];case"ExpandDims":{let i=A("axis",e,t,n);return[r.expandDims(A("x",e,t,n),i)]}case"Squeeze":{let i=A("axis",e,t,n);return[r.squeeze(A("x",e,t,n),i)]}case"Reshape":return[r.reshape(A("x",e,t,n),A("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(A("x",e,t,n),A("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(A("x",e,t,n),A("padding",e,t,n),A("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(A("x",e,t,n),A("padding",e,t,n),A("constantValue",e,t,n))];case"SpaceToBatchND":{let i=A("blockShape",e,t,n),a=A("paddings",e,t,n);return[r.spaceToBatchND(A("x",e,t,n),i,a)]}case"BatchToSpaceND":{let i=A("blockShape",e,t,n),a=A("crops",e,t,n);return[r.batchToSpaceND(A("x",e,t,n),i,a)]}case"DepthToSpace":{let i=A("blockSize",e,t,n),a=A("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(A("x",e,t,n),i,a)]}case"BroadcastTo":return[r.broadcastTo(A("x",e,t,n),A("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(A("s0",e,t,n),A("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function CU(e,t,n,r,i=ue){let a=((s,o,l)=>{switch(s.category){case"arithmetic":return i(()=>k9e(s,o,l));case"basic_math":return i(()=>S9e(s,o,l));case"control":return E9e(s,o,l);case"convolution":return i(()=>O9e(s,o,l));case"creation":return i(()=>P9e(s,o,l));case"dynamic":return M9e(s,o,l);case"evaluation":return i(()=>A9e(s,o,l));case"image":return i(()=>F9e(s,o,l));case"graph":return i(()=>R9e(s,o,l));case"logical":return i(()=>z9e(s,o,l));case"matrices":return i(()=>B9e(s,o,l));case"normalization":return i(()=>W9e(s,o,l));case"ragged":return i(()=>V9e(s,o,l));case"reduction":return i(()=>j9e(s,o,l));case"slice_join":return i(()=>H9e(s,o,l));case"sparse":return i(()=>U9e(s,o,l));case"spectral":return i(()=>G9e(s,o,l));case"string":return i(()=>q9e(s,o,l));case"transformation":return i(()=>K9e(s,o,l));case"hash_table":return L9e(s,o,l,r);case"custom":let u=hie(s.op);if(u&&u.customExecutor)return u.customExecutor(new _9e(s,o,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return M.isPromise(a)?a.then(s=>[].concat(s)):[].concat(a)}var IU=class{constructor(e={},t={},n={},r={},i){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function $U(e,t,n,r){let i=new Set,a=[],s=null,o=null,l=new Set,u=new Set(Object.keys(e).map(p=>ns(p)[0]));r=r||[];let c=new Set(r.map(p=>ns(p.name)[0])),d=[...t];for(;d.length>0;){let p=d.pop();if((wp(p)||nqe(p)||rqe(p))&&s==null&&(s=p,o=s.children.map(h=>h.name).filter(h=>i.has(h))),i.add(p.name),n[p.name]==null&&!u.has(p.name)&&!c.has(p.name)){if(p.inputs.length===0){a.push(p.name);continue}p.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:e,outputs:t,usedNodes:i,missingInputs:a,dynamicNode:s,syncInputs:o}}function Z9e(e,t){let{usedNodes:n,inputs:r}=t,i=Object.keys(r).map(y=>ns(y)[0]).map(y=>e.nodes[y]),a=e.initNodes||[],s=y=>n.has(typeof y=="string"?y:y.name);function o(y){return[...new Map(y.map(v=>[v.name,v])).values()]}let l=o([...i,...e.weights,...a]).filter(s),u=o([...l,...Object.values(e.nodes)]).filter(s),c=new Map(u.map(y=>[y.name,y])),d={};for(let y of u){d[y.name]=d[y.name]||0;for(let v of y.children)s(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}let p=Object.entries(d).filter(([,y])=>y===0).map(([y])=>y),h=[...p];for(;p.length>0;){let y=p.pop(),v=c.get(y);for(let b of v.children.filter(s))--d[b.name]===0&&(h.push(b.name),p.push(b.name))}let m=h.map(y=>c.get(y)),g=X9e(m,l);return J9e(g,l),g}function X9e(e,t){let n=new Map(e.map(a=>[a.name,a])),r=t.map(a=>a.name),i=new Set(r);for(;r.length>0;){let a=r.pop(),s=n.get(a);for(let o of s.children)!n.has(o.name)||i.has(o.name)||(i.add(o.name),r.push(o.name))}return e.filter(a=>i.has(a.name))}var $_=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}};function J9e(e,t){let n=new Map(e.map((o,l)=>[o.name,l])),r=new Set(t.map(o=>o.name)),i=o=>r.has(typeof o=="string"?o:o.name),a=new Set(e.map(o=>o.name)),s=o=>a.has(typeof o=="string"?o:o.name);for(let o of e){for(let l of o.children.filter(s)){if(!n.has(l.name))throw new $_(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new $_(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!i(o))for(let l of o.inputs){if(!n.has(l.name))throw new $_(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new $_(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function Y9e(e){let t=new Map(e.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((o,l)=>wp(o)?n:l),i=o=>{let l=r[t.get(o.name)];return l==null?-1:l},a=e.map((o,l)=>o.children.map(i).reduce((u,c)=>Math.max(u,c),r[l])),s=new Map;for(let o=0;o<e.length;++o){let l=a[o];if(l===n)continue;let u=e[o],c=e[l];s.has(c.name)||s.set(c.name,[]),s.get(c.name).push(u)}return s}var Q9e=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),eqe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),tqe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function wp(e){return Q9e.has(e.op)}function nqe(e){return eqe.has(e.op)}function rqe(e){return tqe.has(e.op)}var TU=class Rie{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let n=Object.keys(t).map(r=>t[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new Rie(t.functions[r],this)})}getCompilationKey(t,n){let r=t.map(a=>a.name).sort(),i=n.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(t,n){let r=$U(t,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:a,syncInputs:s}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(i.length>0){let u=n.map(d=>d.name),c=Object.keys(t);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${i}]`)}let o=Z9e(this.graph,r),l=Y9e(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(t){if(t==null)return null;let n=t.clone();return Yr(n),n}cloneTensorList(t){return t?t.map(n=>this.cloneAndKeepTensor(n)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);let r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);let i=r.map(p=>this.graph.nodes[ns(p)[0]]),a=n.map(p=>ns(p)[0]),s=new Set(a),o=a.map(p=>this.graph.nodes[p]);o.length===0&&(o=this._outputs);let l=this.getCompilationKey(i,o),u=this.compiledMap.get(l);u==null&&(u=this.compile(t,o),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let c={},d={};return ue(()=>{let p=new IU(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(v=>{let[b,_]=ns(v,p),k=[];k[_]=t[v],h[b]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(k))});let m=this.getFrozenTensorIds(h),{orderedNodes:g,nodeLiveUntilMap:y}=u;for(let v of g){if(h[v.name])continue;let b=CU(v,h,p,this._resourceManager);if(M.isPromise(b))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,h,p,m,s,y.get(v.name))}return this.parent==null&&p.dispose(m),n.map(v=>Ni(v,h,p))})}getFrozenTensorIds(t){let n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(t,n,r,i,a,s,o){if(!(wp(n)||s.has(t))){for(let l of r[t])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(let l of n.inputs){if(wp(l))continue;let u=wU(l.name,r,i);if(u!=null)for(let c of u){if(!c||c.kept||a.has(c.id))continue;let d=o[c.id];d===1?(c.dispose(),delete o[c.id]):d!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,i,a,s){function o(l){return wp(l)||a.has(l.name)}if(!(wp(t)||s==null))for(let l of s){if(o(l))continue;let u=wU(l.name,n,r);for(let c of u)!c||c.kept||i.has(c.id)||c.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,i={},a={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=fe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let s=new IU(this.weightMap,i,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let o=await this.executeWithControlFlow(t,s,n,r),l=n.map(p=>Ni(p,o,s)),u=l.map(p=>p.id),c=Object.keys(t).map(p=>t[p].id),d=new Set([...u,...c,...this.weightIds]);return Object.values(o).forEach(p=>{p.forEach(h=>{h&&!h.isDisposed&&!d.has(h.id)&&h.dispose()})}),this.parent==null&&s.dispose(d),l}async executeFunctionAsync(t,n,r){let i=t.reduce((a,s,o)=>(a[this.inputs[o].name]=s,a),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,i){let a=Object.keys(t),s=a.map(k=>this.graph.nodes[ns(k)[0]]),o=r.map(k=>ns(k)[0]),l=new Set(o),u=o.map(k=>this.graph.nodes[k]);u.length===0&&(u=this._outputs);let{usedNodes:c,missingInputs:d,dynamicNode:p,syncInputs:h}=$U(t,u,this.weightMap,this._initNodes),m=[...s,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(t).forEach(k=>{let[S,$]=ns(k),N=[];N[$]=t[k],g[S]=N});let y={},v=this.getFrozenTensorIds(g),b={};for(;m.length>0;){let k=this.processStack(s,m,n,g,b,v,l,y,c);await Promise.all(k)}p==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let _=u.filter(k=>!wp(k)&&!Ni(k.name,g,n)).map(k=>k.name);if(_.length>0){let k="";throw p!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${_}] from the provided inputs [${a}]. Consider providing the following inputs: [${d}]. ${k}`)}return g}processStack(t,n,r,i,a,s,o,l,u){let c=[];for(;n.length>0;){let d=n.pop();r.currentContext=d.contexts;let p="";if(d.node.op==="Enter"&&A("isConstant",d.node,i,r)&&([p]=yu(d.node.name,r)),i[d.node.name]==null){let h=CU(d.node,i,r,this._resourceManager);p||([p]=yu(d.node.name,r));let m=r.currentContext;M.isPromise(h)?c.push(h.then(g=>(i[p]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(g)),r.currentContext=m,this.checkTensorForDisposal(p,d.node,i,r,s,o,l),this.processChildNodes(d.node,n,r,i,a,u),g))):(i[p]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(h)),this.checkTensorForDisposal(p,d.node,i,r,s,o,l),this.processChildNodes(d.node,n,r,i,a,u))}else this.processChildNodes(d.node,n,r,i,a,u)}return c}processChildNodes(t,n,r,i,a,s){t.children.forEach(o=>{let[l]=yu(o.name,r);a[l]||!s.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!Ni(u,i,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(u=>!!Ni(u,i,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{let r=t[n],[i]=ns(n),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){let s=a.attrParams.shape.value,o=s.length===r.shape.length&&r.shape.every((l,u)=>s[u]===-1||s[u]===l);M.assert(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&M.assert(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;let i={};for(let a in t){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[a];s!=null?i[s.name]=t[a]:i[a]=t[a]}return i}checkInputs(t){let n=Object.keys(t).filter(r=>{let[i]=ns(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,i;let a=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[n];return a!=null?a.name:n},{})}checkOutputs(t){t.forEach(n=>{let[r]=ns(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}},iqe=class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}},aqe="?tfjs-format=file",sqe="model.json",Sz=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=Oi){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,t==null&&(this.loadOptions={}),this.resourceManager=new iqe}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return M.isPromise(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){let t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let t=await Bee(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;let n=this.artifacts.modelTopology,r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(r=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new TU(xU.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let i=xU.Instance.transformGraph(e.modelInitializer);this.initializer=new TU(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){let n=this.io.getSaveHandlers(e);if(n.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(n.length>1)throw new Error(`Found more than one (${n.length}) save handlers for URL '${e}'`);e=n[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t=e instanceof zt?[e]:e,n={};return t.forEach((r,i)=>n[this.structuredOutputKeys[i]]=r),n}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof zt)&&!Array.isArray(e)){let i=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(i!=null)for(let a in i){let s=i[a];s.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((i,a)=>{var s,o,l;let u=(l=(o=(s=this.signature)===null||s===void 0?void 0:s.inputs)===null||o===void 0?void 0:o[a])===null||l===void 0?void 0:l.resourceId;return u!=null?i[a]=this.resourceIdToCapturedInput[u]:i[a]=e[r++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let i=n[r],a=t[i];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Rt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function oqe(e,t={},n=Oi){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=uqe(e));let r=new Sz(e,t,n);return await r.load(),r}function lqe(e){if(e==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){let[r,i]=e;if(!r)throw new Error("modelJSON must be the first element of the array");if(!i||!(i instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let a=Oi.getWeightSpecs(r.weightsManifest),s=Oi.getModelArtifactsForJSONSync(r,a,i);t=Oi.fromMemorySync(s)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=Oi.fromMemorySync(e);else throw new Error("Unknown model format");let n=new Sz(t);return n.load(),n}function uqe(e){return e.endsWith("/")||(e=e+"/"),`${e}${sqe}${aqe}`}var cqe="4.16.0",Die={};Dt(Die,{CSVDataset:()=>qie,Dataset:()=>t0,FileDataSource:()=>eae,TextLineDataset:()=>Gie,URLDataSource:()=>tae,array:()=>Mqe,csv:()=>Gqe,func:()=>qqe,generator:()=>Kqe,microphone:()=>Xqe,version_data:()=>Jqe,webcam:()=>Zqe,zip:()=>Aqe});var dqe=Od(o$()),pqe=Od(o$());function hqe(e,t){return SI(e,t)}function SI(e,t,n=new Map,r=new Set){if(e==null)return null;if(typeof Blob=="function"&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let i=t(e);if(i.recurse&&i.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse)if(gy(e)){let a=Array.isArray(e)?[]:{};r.add(e);for(let s in e){let o=e[s],l=SI(o,t,n,r);a[s]=l}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}else throw new Error(`Can't recurse into non-iterable type: ${e}`);else return n.set(e,i.value),i.value}function fqe(e,t=Fie){return Lie(e,t)}function Lie(e,t,n=new Set){let r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");let i=t(e);if(i.recurse&&i.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse)if(gy(r)){let a=Array.isArray(r)?[]:{};n.add(r);for(let s in r){let o=e.map(u=>u[s]),l=Lie(o,t,n);a[s]=l}return n.delete(r),a}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return i.value}function Fie(e){return e===null?null:gy(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function zie(e,t){let n=new Map;SI(e,t,n);for(let r of Array.from(n.keys())){let i=n.get(r);if(M.isPromise(i)){let a=await i;n.set(r,a)}}return SI(e,t,n)}function gy(e){let t=!1;if(fe().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:n}=see();t=e instanceof n}return e!=null&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||typeof e=="object"&&!(e instanceof zt)&&!(e instanceof Promise)&&!t)}function mqe(e){return e==null||gqe(e)||Array.isArray(e)||typeof e=="object"&&e instanceof zt||M.isTypedArray(e)}function gqe(e){return e===null||typeof e!="object"&&typeof e!="function"}function yqe(e){return hqe(e,vqe)}function vqe(e){return e instanceof zt?{value:e.clone(),recurse:!1}:gy(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Bie=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},Wie=class Vie extends Bie{constructor(){super(Vie.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){let t=this.capacity*2,n=new Array(t),r=this.length();for(let i=0;i<r;i++)n[i]=this.get(this.wrap(this.begin+i));this.data=n,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=r}};Wie.INITIAL_CAPACITY=32;function jie(e){return new xqe(e)}function Cz(e){return new _qe(e)}function bqe(e,t){return new Hie(e,t)}function wqe(e,t=Lc.FAIL){return new Oqe(e,t)}var xi=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new Nqe(this,e)}filter(e){return new $qe(this,e)}map(e){return new Tqe(this,e)}mapAsync(e){return new NU(this,e)}serialMapAsync(e){return new NU(this,e).serial()}flatmap(e){return new Eqe(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new Iqe(this,e,t)}columnMajorBatch(e,t=!0,n=Fie){return this.rowMajorBatch(e,t).map(r=>fqe(r,n))}concatenate(e,t){return new Hie(jie([this,e]),t)}take(e){return e<0||e==null?this:new Cqe(this,e)}skip(e){return e<0||e==null?this:new Sqe(this,e)}prefetch(e){return new Uie(this,e)}shuffle(e,t){return new Pqe(this,e,t)}serial(){return new kqe(this)}},xqe=class extends xi{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:yqe(e),done:!1}}},_qe=class extends xi{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}},kqe=class extends xi{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},Sqe=class extends xi{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;Rt(e.value)}return this.upstream.next()}},Cqe=class extends xi{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},Iqe=class extends xi{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},$qe=class extends xi{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Rt(e.value)}}},Tqe=class extends xi{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Vo.getTensorsInContainer(e.value),n=this.transform(e.value),r=Vo.getTensorsInContainer(n);for(let i of t)Vo.isTensorInList(i,r)||i.dispose();return{value:n,done:!1}}},Nqe=class extends xi{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},NU=class extends xi{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Vo.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Vo.getTensorsInContainer(n);for(let i of t)Vo.isTensorInList(i,r)||i.dispose();return{value:n,done:!1}}},Iz=class extends xi{constructor(){super(),this.outputQueue=new Wie,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},Eqe=class extends Iz{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=Vo.getTensorsInContainer(e.value),n=this.transform(e.value),r=Vo.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let i of t)Vo.isTensorInList(i,r)||i.dispose();return!0}},Hie=class extends xi{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){let n=await this.moreIterators.next();if(n.done)return{value:null,done:!0};this.iterator=n.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}},Lc;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(Lc||(Lc={}));var Oqe=class extends xi{constructor(e,t=Lc.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;function r(a){return a instanceof xi?{value:a.next().then(s=>(t++,s.done&&n++,s.value)),recurse:!1}:{value:null,recurse:!0}}let i=await zie(this.iterators,r);if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case Lc.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case Lc.SHORTEST:return{value:null,done:!0};case Lc.LONGEST:}return this.count++,{value:i,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},Uie=class extends xi{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new Bie(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},Pqe=class extends Uie{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=pqe.alea(n||M.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}},t0=class{constructor(){this.size=null}batch(e,t=!0){let n=this;M.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let r;return this.size===1/0||this.size==null?r=this.size:t?r=Math.ceil(this.size/e):r=Math.floor(this.size/e),ts(async()=>(await n.iterator()).columnMajorBatch(e,t,Rqe),r)}concatenate(e){let t=this,n;return this.size===1/0||e.size===1/0?n=1/0:this.size!=null&&e.size!=null?n=this.size+e.size:n=null,ts(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){let t=this,n;return this.size===1/0?n=1/0:n=null,ts(async()=>(await t.iterator()).filter(r=>ue(()=>e(r))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return ts(async()=>(await t.iterator()).map(n=>ue(()=>e(n))),this.size)}mapAsync(e){let t=this;return ts(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return ts(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this,n;return this.size!=null&&e>0?n=this.size*e:e===0?n=0:this.size!=null&&(e===void 0||e<0)?n=1/0:n=null,ts(async()=>{let r=Cz(async()=>({value:await t.iterator(),done:!1}));return bqe(r.take(e))},n)}skip(e){let t=this,n;return this.size!=null&&e>=0&&this.size>=e?n=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?n=0:n=null,ts(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t,n=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let r=this,i=dqe.alea(t||M.now().toString());return ts(async()=>{let a=i.int32();return n&&(a+=i.int32()),(await r.iterator()).shuffle(e,a.toString())},this.size)}take(e){let t=this,n;return this.size!=null&&this.size>e?n=e:this.size!=null&&this.size<=e?n=this.size:n=null,ts(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};t0.MAX_BUFFER_SIZE=1e4;function ts(e,t=null){return new class extends t0{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Mqe(e){return ts(async()=>jie(e),e.length)}function Aqe(e){if(!gy(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=t==null?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=t==null?e[n].size:Math.min(t,e[n].size);return ts(async()=>{let n=await zie(e,r=>{if(r instanceof t0)return{value:r.iterator(),recurse:!1};if(gy(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return wqe(n,Lc.SHORTEST)},t)}function Rqe(e){if(e===null)return null;let t=e[0];return mqe(t)?{value:Dqe(e),recurse:!1}:{value:null,recurse:!0}}function Dqe(e){if(e.length===0)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof zt?Wr(e):ma(e)}var Gie=class extends t0{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},T_='"',Q0=Symbol("out"),EU=Symbol("field"),N_=Symbol("quote"),EE=Symbol("quoteafterquote"),OU=Symbol("quoteinquote"),qie=class extends t0{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&M.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((r,i)=>(r[i]=r[i]+1||1,r),{}),n=Object.keys(t).filter(r=>t[r]>1);if(M.assert(n.length===0,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs){for(let r of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(r)===-1)throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}else return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new Gie(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(M.assert(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){let a=this.fullColumnNames[i],s=this.columnConfigs?this.columnConfigs[a]:null;if(!(this.configuredColumnsOnly&&!s)){let o=t[i],l=null;if(o==="")if(s&&s.default!==void 0)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);l=void 0}else{let u=Number(o);if(isNaN(u))s&&s.dtype==="bool"?l=this.getBoolean(o):l=o;else if(!s||!s.dtype)l=u;else switch(s.dtype){case"float32":l=u;break;case"int32":l=Math.floor(u);break;case"bool":l=this.getBoolean(o);break;default:l=u}}s&&s.isLabel?r[a]=l:n[a]=l}}return Object.keys(r).length===0?n:{xs:n,ys:r}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){let n=[],r=0,i=e.length,a=Q0;for(let s=0;s<i;s++)switch(a){case Q0:switch(e.charAt(s)){case T_:r=s+1,a=N_;break;case this.delimiter:if(r=s+1,this.delimiter===" "&&this.delimWhitespace)break;n.push(""),a=Q0;break;default:a=EU,r=s;break}break;case EU:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s)),a=Q0,r=s+1;break}break;case N_:switch(e.charAt(s)){case T_:a=EE;break}break;case EE:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s-1)),a=Q0,r=s+1;break;case T_:a=N_;break;default:a=OU;break}break;case OU:switch(e.charAt(s)){case T_:a=N_;break}break}if(a===EE?n.push(e.substring(r,i-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}},Lqe=class Kie extends xi{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;let n=Math.log2(this.fftSize);if(this.fftSize<0||n<4||n>14||!Number.isInteger(n))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=t.includeSpectrogram!==!1,this.includeWaveform=t.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(t={}){if(!fe().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let n=new Kie(t);return await n.start(),n}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);let n=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,n,r=await this.getAudioData();if(this.includeSpectrogram){let i=this.flattenQueue(r.freqDataQueue);t=this.getTensorFromAudioDataArray(i,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let i=this.flattenQueue(r.timeDataQueue);n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:n},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let t=[],n=[],r=0;return new Promise(i=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:n}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),n.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(a),i({freqDataQueue:t,timeDataQueue:n}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){let n=t[0].length,r=new Float32Array(t.length*n);return t.forEach((i,a)=>r.set(i,a*n)),r}getTensorFromAudioDataArray(t,n){let r=new Float32Array(M.sizeFromShape(n));return r.set(t,r.length-t.length),ma(r,n)}},Fqe=class Zie extends xi{constructor(t,n){if(super(),this.webcamVideoElement=t,this.webcamConfig=n,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=$n([0],"int32"),this.webcamConfig.centerCrop){let r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,i=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,a=(1-r)/2,s=(1-i)/2,o=a+r,l=i+s;this.cropBox=Bl([s,a,l,o],[1,4])}else this.cropBox=Bl([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t,n={}){if(!fe().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=n.resizeWidth,t.height=n.resizeHeight}let r=new Zie(t,n);return await r.start(),r}async start(){this.webcamConfig.facingMode&&M.assert(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(t){throw t.message=`Error thrown while initializing video stream: ${t.message}`,t}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(t=>{this.webcamVideoElement.onloadedmetadata=()=>{t()}})}async next(){if(this.isClosed)return{value:null,done:!0};let t;try{t=qw.fromPixels(this.webcamVideoElement)}catch(n){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(n)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(t),done:!1}}catch(n){throw new Error(`Error thrown cropping the video: ${n.message}`)}finally{t.dispose()}else return{value:t,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(t){return ue(()=>{let n=gi(Ae(t,"float32"),0),r;r=Ns.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let i=r.shape;return le(r,i.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},Xie=class{},Jie=class extends xi{split(e){return new zqe(this,e)}},zqe=class extends Jie{constructor(e,t){super(),this.upstream=e,this.impl=new Bqe(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},Bqe=class extends Iz{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},Wqe=class extends xi{decodeUTF8(){return new Vqe(this)}},Vqe=class extends Jie{constructor(e){super(),this.upstream=e,this.impl=new jqe(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},jqe=class extends Iz{constructor(e){if(super(),this.upstream=e,fe().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:t}=see();this.decoder=new t("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){let e=await this.upstream.next(),t;if(e.done)return!1;t=e.value;let n;return fe().get("IS_BROWSER")?n=this.decoder.decode(t,{stream:!0}):n=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(n),!0}},Yie=class extends Wqe{constructor(e,t={}){super(),this.file=e,this.options=t,M.assert(e instanceof Uint8Array||(fe().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=a=>{let s=r.result;if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),!(s instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(s)},r.onabort=a=>t(new Error("Aborted")),r.onerror=a=>t(new Error(a.type));let i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n}),done:!1}}};async function Hqe(e,t={},n){let r,i;typeof e=="string"?r=e:(r=e.url,i=Uqe(e));let a=await(n||M.fetch)(r,i);if(a.ok){let s=new Uint8Array(await a.arrayBuffer());return new Yie(s,t)}else throw new Error(a.statusText)}var Uqe=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function Qie(e){return typeof e=="string"&&e.slice(0,7)==="file://"}var eae=class extends Xie{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(Qie(this.input)&&fe().get("IS_NODE")){let e=gD();this.input=e.readFileSync(this.input.slice(7))}return new Yie(this.input,this.options)}},tae=class extends Xie{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return Qie(this.url)?new eae(this.url,this.fileOptions).iterator():Hqe(this.url,this.fileOptions)}};function Gqe(e,t={}){return new qie(new tae(e),t)}function qqe(e){let t=Cz(e);return ts(async()=>t)}function Kqe(e){return ts(async()=>{let t=await e();return Cz(()=>t.next())})}async function Zqe(e,t){return Fqe.create(e,t)}async function Xqe(e){return Lqe.create(e)}var Jqe="4.16.0";function ct(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&M.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}var Yqe=Yl.whereImpl,$z=class nae extends aw{nextDataId(){return nae.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new l$(this,eo())}write(t,n,r){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&W.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let i={id:this.nextDataId()};return this.data.set(i,{values:t,dtype:r,refCount:1}),i}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&M.isString(r[0])){let a=r.map(s=>M.encodeString(s));i=this.write(a,t,n)}else i=this.write(r,t,n);return{dataId:i,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){let n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){let n=this.data.get(t);n.refCount--}}move(t,n,r,i,a){this.data.set(t,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){let{dtype:n,complexTensorInfos:r}=this.data.get(t);if(n==="complex64"){let i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return W.mergeRealAndImagArrays(i,a)}return M.convertBackendValuesAndArrayBuffer(this.data.get(t).values,n)}bufferSync(t){let n=this.readSync(t.dataId);if(t.dtype==="string")try{let r=n.map(i=>M.decodeString(i));return Gt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Gt(t.shape,t.dtype,n)}makeOutput(t,n,r){return eo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){let n=M.now();return t(),{kernelMs:M.now()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){ct([t],"where");let n=this.readSync(t.dataId);return Yqe(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};$z.nextDataId=0;var Tz={};Dt(Tz,{addImpl:()=>aae,bincountImpl:()=>Ez,bincountReduceImpl:()=>sae,bitwiseAndImpl:()=>oae,castImpl:()=>iae,ceilImpl:()=>lae,concatImpl:()=>Oz,equalImpl:()=>uae,expImpl:()=>dae,expm1Impl:()=>hae,floorDivImpl:()=>mae,floorImpl:()=>fae,gatherNdImpl:()=>gae,gatherV2Impl:()=>yae,greaterEqualImpl:()=>bae,greaterImpl:()=>vae,lessEqualImpl:()=>xae,lessImpl:()=>wae,linSpaceImpl:()=>_ae,logImpl:()=>kae,maxImpl:()=>Sae,maximumImpl:()=>Cae,minimumImpl:()=>Iae,multiplyImpl:()=>Pz,negImpl:()=>$ae,notEqualImpl:()=>Tae,prodImpl:()=>Nae,raggedGatherImpl:()=>Eae,raggedRangeImpl:()=>Oae,raggedTensorToTensorImpl:()=>Pae,rangeImpl:()=>Az,rsqrtImpl:()=>Mae,scatterImpl:()=>Np,sigmoidImpl:()=>JKe,simpleAbsImpl:()=>rae,sliceImpl:()=>II,sparseFillEmptyRowsImpl:()=>Rae,sparseReshapeImpl:()=>Dae,sparseSegmentReductionImpl:()=>Rz,sqrtImpl:()=>eZe,squaredDifferenceImpl:()=>Lae,staticRegexReplaceImpl:()=>Fae,stridedSliceImpl:()=>zae,stringNGramsImpl:()=>Dz,stringSplitImpl:()=>Lz,stringToHashBucketFastImpl:()=>Fz,subImpl:()=>Bae,tileImpl:()=>Wae,topKImpl:()=>jae,transposeImpl:()=>Mz,uniqueImpl:()=>Bz});function rae(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Qqe=e=>{let{x:t}=e.inputs,n=e.backend;ct(t,"abs");let r=new Float32Array(M.sizeFromShape(t.shape)),i=n.data.get(t.dataId).values;return r=rae(i),n.makeOutput(r,t.shape,t.dtype)},eKe={kernelName:jy,backendName:"cpu",kernelFunc:Qqe};function Rr(e){return(t,n,r,i,a)=>{let s=W.assertAndGetBroadcastShape(t,n),o=s.length,l=M.computeStrides(s),u=M.sizeFromShape(s),c=M.getTypedArrayFromDType(a,u),d=t.length,p=n.length,h=M.computeStrides(t),m=M.computeStrides(n),g=W.getBroadcastDims(t,s),y=W.getBroadcastDims(n,s);if(g.length+y.length===0)for(let v=0;v<c.length;++v)c[v]=e(r[v%r.length],i[v%i.length]);else for(let v=0;v<c.length;++v){let b=M.indexToLoc(v,o,l),_=b.slice(-d);g.forEach(N=>_[N]=0);let k=M.locToIndex(_,d,h),S=b.slice(-p);y.forEach(N=>S[N]=0);let $=M.locToIndex(S,p,m);c[v]=e(r[k],i[$])}return[c,s]}}function as(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",s)},o}var tKe={kernelName:d$,backendName:"cpu",kernelFunc:as};function CI(e,t,n="float32"){if(n==="complex64"){let i=CI(e,t,"float32"),a=CI(e,t,"float32");return as({inputs:{real:i,imag:a},backend:e})}let r=M.makeZerosTypedArray(M.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function Ul(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var nKe={kernelName:hf,backendName:"cpu",kernelFunc:Ul};function vh(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}var rKe={kernelName:k$,backendName:"cpu",kernelFunc:vh};function iae(e,t,n,r){if(r==="int32"){let i=Int32Array.from(e);return[t,"int32",i]}if(r==="bool"){let i=M.toTypedArray([0],n),[a,s]=Rr((o,l)=>o!==l?1:0)(t,[],e,i,"bool");return[s,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function wd(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Ul({inputs:{x:i},backend:n});let c=CI(n,i.shape,i.dtype),d=wd({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),p=as({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),p}if(i.dtype==="complex64"){let c=vh({inputs:{input:i},backend:n}),d=wd({inputs:{x:c},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(c),d}if(!M.hasEncodingLoss(i.dtype,a)){let c=Ul({inputs:{x:i},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:a}}let s=n.data.get(i.dataId).values,[o,l,u]=iae(s,i.shape,i.dtype,a);return n.makeTensorInfo(o,l,u)}var iKe={kernelName:qh,backendName:"cpu",kernelFunc:wd};function ii(e,t,n,r){return n==null?({inputs:i,backend:a})=>{let{a:s,b:o}=i,l=a;ct([s,o],e);let u=l.data.get(s.dataId).values,c=l.data.get(o.dataId).values,d=s.dtype==="string"?W.fromUint8ToStringArray(u):u,p=s.dtype==="string"?W.fromUint8ToStringArray(c):c,h=r||s.dtype,[m,g]=t(s.shape,o.shape,d,p,h);return l.makeTensorInfo(g,h,m)}:({inputs:i,backend:a})=>{let{a:s,b:o}=i,l=a;if(s.dtype==="complex64"||o.dtype==="complex64"){let u=wd({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,p=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,g=wd({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(g.dataId),v=y.complexTensorInfos.real,b=y.complexTensorInfos.imag,_=l.data.get(v.dataId).values,k=l.data.get(b.dataId).values,[S,$,N]=n(s.shape,o.shape,h,m,_,k),P=l.makeTensorInfo(N,"float32",S),D=l.makeTensorInfo(N,"float32",$),O=as({inputs:{real:P,imag:D},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(P),l.disposeIntermediateTensorInfo(D),O}else{let u=l.data.get(s.dataId).values,c=l.data.get(o.dataId).values,d=r||s.dtype,[p,h]=t(s.shape,o.shape,u,c,d);return l.makeTensorInfo(h,d,p)}}}function Nz(e){return(t,n,r,i,a,s)=>{let o=W.assertAndGetBroadcastShape(t,n),l=M.sizeFromShape(o),u=o.length,c=M.computeStrides(o),d=M.getTypedArrayFromDType("float32",l),p=M.getTypedArrayFromDType("float32",l),h=W.getBroadcastDims(t,o),m=W.getBroadcastDims(n,o),g=W.mergeRealAndImagArrays(r,i),y=W.mergeRealAndImagArrays(a,s),v=t.length,b=M.computeStrides(t),_=n.length,k=M.computeStrides(n);if(h.length+m.length===0)for(let S=0;S<d.length;S++){let $=S%g.length,N=S%y.length,P=e(g[$*2],g[$*2+1],y[N*2],y[N*2+1]);d[S]=P.real,p[S]=P.imag}else for(let S=0;S<d.length;S++){let $=M.indexToLoc(S,u,c),N=$.slice(-v);h.forEach(E=>N[E]=0);let P=M.locToIndex(N,v,b),D=$.slice(-_);m.forEach(E=>D[E]=0);let O=M.locToIndex(D,_,k),F=e(g[P*2],g[P*2+1],y[O*2],y[O*2+1]);d[S]=F.real,p[S]=F.imag}return[d,p,o]}}var aae=Rr((e,t)=>e+t),aKe=Nz((e,t,n,r)=>({real:e+n,imag:t+r})),yy=ii(Pd,aae,aKe),sKe={kernelName:Pd,backendName:"cpu",kernelFunc:yy};function Ez(e,t,n,r,i){let a=M.sizeFromShape(r),s=M.makeZerosTypedArray(i,n);for(let o=0;o<e.length;o++){let l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(a>0?s[l]+=t[o]:s[l]+=1)}return s}function sae(e,t,n,r=!1){let i=e.shape[0],a=e.shape[1],s=Gt([i,n],t.dtype);for(let o=0;o<i;o++)for(let l=0;l<a;l++){let u=e.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?s.set(1,o,u):t.size>0?s.set(s.get(o,u)+t.get(o,l),o,u):s.set(s.get(o,u)+1,o,u))}return s}var oae=Rr((e,t)=>e&t),oKe=ii(Jy,oae),lKe={kernelName:Jy,backendName:"cpu",kernelFunc:oKe};function Ql(e){return(t,n,r)=>{let i=M.getArrayFromDType(n,t.length);for(let a=0;a<t.length;++a)i[a]=e(t[a],r);return i}}function An(e,t,n){let r=Ql(t);return Wd(e,r,n)}function Wd(e,t,n){return({inputs:r,attrs:i,backend:a})=>{let{x:s}=r;ct(s,e);let o=a,l=o.data.get(s.dataId).values,u;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=W.fromUint8ToStringArray(l)}else u=l;let c=n||s.dtype,d=t(u,c,i);return o.makeTensorInfo(s.shape,c,d)}}var lae=Ql(e=>Math.ceil(e)),uKe=Wd(Kh,lae),cKe={kernelName:Kh,backendName:"cpu",kernelFunc:uKe};function Oz(e,t,n,r){let i=M.getArrayFromDType(n,M.sizeFromShape(t));if(r&&n!=="string"){let a=0;e.forEach(s=>{let o=M.sizeFromShape(s.shape);i.set(s.vals,a),a+=o})}else{let a=0;e.forEach(s=>{let o=n==="string"?W.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let u=0;u<s.shape[0];++u){let c=u*t[1]+a;for(let d=0;d<s.shape[1];++d)i[c+d]=o[l++]}a+=s.shape[1]})}return i}var uae=Rr((e,t)=>e===t?1:0),cae=ii(av,uae,null,"bool"),dKe={kernelName:av,backendName:"cpu",kernelFunc:cae},dae=Ql(e=>Math.exp(e)),pae=Wd(of,dae,"float32"),pKe={kernelName:of,backendName:"cpu",kernelFunc:pae},hae=Ql(e=>Math.expm1(e)),hKe=Wd(lf,hae),fKe={kernelName:lf,backendName:"cpu",kernelFunc:hKe},fae=Ql(e=>Math.floor(e)),mKe=Wd(uf,fae),gKe={kernelName:uf,backendName:"cpu",kernelFunc:mKe},mae=Rr((e,t)=>Math.floor(e/t)),yKe=ii(cf,mae,null,"int32"),vKe={kernelName:cf,backendName:"cpu",kernelFunc:yKe};function gae(e,t,n,r,i,a,s,o,l){let u=Gt([r,a],n);for(let c=0;c<r;c++){let d=[],p=0;for(let h=0;h<i;h++){let m=e[c*i+h];p+=m*s[h],d.push(m)}if(p<0||p>=l/a)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let h=0;h<a;h++)u.values[c*a+h]=t.get(...t.indexToLoc(p*a+h))}return u}function yae(e,t,n){let r=Gt(n,e.dtype);for(let i=0;i<r.size;++i){let a=r.indexToLoc(i).slice(),s=a[0],o=a[2],l=t.locToIndex([s,o]);a[2]=t.values[l];let u=e.locToIndex(a);0<=u&&u<e.values.length&&(r.values[i]=e.values[u])}return r}var vae=Rr((e,t)=>e>t?1:0),bKe=ii(cv,vae,null,"bool"),wKe={kernelName:cv,backendName:"cpu",kernelFunc:bKe},bae=Rr((e,t)=>e>=t?1:0),xKe=ii(pf,bae,null,"bool"),_Ke={kernelName:pf,backendName:"cpu",kernelFunc:xKe},wae=Rr((e,t)=>e<t?1:0),kKe=ii(dv,wae,null,"bool"),SKe={kernelName:dv,backendName:"cpu",kernelFunc:kKe},xae=Rr((e,t)=>e<=t?1:0),CKe=ii(pv,xae,null,"bool"),IKe={kernelName:pv,backendName:"cpu",kernelFunc:CKe};function _ae(e,t,n){let r=(t-e)/(n-1),i=M.makeZerosTypedArray(n,"float32");i[0]=e;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}var kae=Ql(e=>Math.log(e)),$Ke=Wd(vf,kae),TKe={kernelName:vf,backendName:"cpu",kernelFunc:$Ke};function Sae(e,t,n,r){let i=M.getTypedArrayFromDType(r,M.sizeFromShape(n));for(let a=0;a<i.length;++a){let s=a*t,o=e[s];for(let l=0;l<t;++l){let u=e[s+l];(Number.isNaN(u)||u>o)&&(o=u)}i[a]=o}return i}var Cae=Rr((e,t)=>Math.max(e,t)),NKe=ii(_f,Cae),EKe={kernelName:_f,backendName:"cpu",kernelFunc:NKe},Iae=Rr((e,t)=>Math.min(e,t)),OKe=ii(If,Iae),PKe={kernelName:If,backendName:"cpu",kernelFunc:OKe},Pz=Rr((e,t)=>e*t),MKe=Nz((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),TT=ii(Nf,Pz,MKe),AKe={kernelName:Nf,backendName:"cpu",kernelFunc:TT};function $ae(e,t,n){let r=M.createScalarValue(-1,n);return Pz([],t,r,e,n)}function RKe(e){let{inputs:t,backend:n}=e,{x:r}=t;ct(r,"neg");let i=n.data.get(r.dataId).values,[a,s]=$ae(i,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,a)}var DKe={kernelName:wv,backendName:"cpu",kernelFunc:RKe},Tae=Rr((e,t)=>e!==t?1:0),LKe=ii(xv,Tae,null,"bool"),FKe={kernelName:xv,backendName:"cpu",kernelFunc:LKe};function Mz(e,t,n,r,i){let a=t.length,s=M.sizeFromShape(t),o=M.computeStrides(t),l=M.computeStrides(i),u=M.getTypedArrayFromDType(n,M.sizeFromShape(i));for(let c=0;c<s;++c){let d=M.indexToLoc(c,a,o),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[r[m]];let h=M.locToIndex(p,a,l);u[h]=e[c]}return u}function Va(e){let{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:a}=n;ct(i,"transpose");let s=i.shape.length,o=new Array(s);for(let c=0;c<o.length;c++)o[c]=i.shape[a[c]];let l=r.data.get(i.dataId).values,u=Mz(l,i.shape,i.dtype,a,o);return{dataId:r.write(u,o,i.dtype),shape:o,dtype:i.dtype}}var zKe={kernelName:Cu,backendName:"cpu",kernelFunc:Va};function Nae(e,t,n,r){let[i,a]=W.computeOutAndReduceShapes(e,r),s=zs(t,"int32"),o=M.makeZerosTypedArray(M.sizeFromShape(i),s),l=M.sizeFromShape(a);for(let u=0;u<o.length;++u){let c=u*l,d=1;for(let p=0;p<l;++p)d*=n[c+p];o[u]=d}return{outVals:o,outShape:i,outDtype:s}}function BKe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;ct(i,"prod");let o=i.shape.length,l=M.parseAxisParam(a,i.shape),u=W.getAxesPermutation(l,o),c=l,d=i,p=[];u!=null&&(d=Va({inputs:{x:i},backend:n,attrs:{perm:u}}),p.push(d),c=W.getInnerMostAxes(c.length,o));let h=n.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=Nae(d.shape,d.dtype,h,c),v=g;return s&&(v=W.expandShapeToKeepDim(g,l)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,y,m)}var WKe={kernelName:Af,backendName:"cpu",kernelFunc:BKe};function VKe(e,t,n){e.forEach((r,i)=>{if(r<0||r>=n){let a=M.indexToLoc(i,t.length,M.computeStrides(t)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function jKe(e,t){for(let n=0;n<e.length;++n){let r=e[n],i=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function HKe(e,t,n,r){let i=[],a=0,s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);jKe(n,r);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];let c=t[u+1];for(let d=1;d<l+1;++d)o[u].push(d*c)}for(let u=0;u<e.length;++u){let c=e[u],d=e[u]+1;for(let p=0;p<n.length;++p){let h=n[p],m=p+t.length-1;if(m>=0){let g=o[m],y=g[g.length-1]-h[c];for(let v=c;v<d;++v)o[m].push(h[v+1]+y)}c=h[c],d=h[d]}d!==c&&(i.push([c,d]),a+=d-c)}return{outSplits:o,valueSlices:i,numValues:a}}function UKe(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,i=M.getArrayFromDType("int32",r);t.push(i),e[n].forEach((a,s)=>i[s]=a)}return t}function PU(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function GKe(e,t,n,r,i,a){let s=PU(t,2)[1],o=PU(a,2)[1],l=0;for(let u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)i[l*o+d]=e[c*s+d];++l}}function qKe(e,t,n,r,i){let a=t.slice();a[0]=i;let s=M.getArrayFromDType(n,M.sizeFromShape(a)),o=e.length,l=o===0?0:o/t[0];return GKe(e,t,r,l,s,a),[s,a]}function Eae(e,t,n,r,i,a,s,o){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");let l=t[0][0]-1;if(VKe(a,s,l),r.length===0)throw new Error("params.rank must be nonzero");let u=r[0],{outSplits:c,valueSlices:d,numValues:p}=HKe(a,s,e,u),h=UKe(c),m=qKe(n,r,i,d,p);return[h,m[0],m[1]]}var MU=2147483647;function Oae(e,t,n,r,i,a,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let o=t.length===0,l=i.length===0,u=s.length===0,c=[];o||c.push(t[0]),l||c.push(i[0]),u||c.push(s[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");let d=c.length===0?1:c[0],p=M.getArrayFromDType("int32",d+1);p[0]=0;for(let y=0;y<d;++y){let v=o?e[0]:e[y],b=l?r[0]:r[y],_=u?a[0]:a[y];if(_===0)throw new Error("Requires delta != 0");let k;if(_>0&&b<v||_<0&&b>v)k=0;else if(k=Math.ceil(Math.abs((b-v)/_)),k>MU)throw new Error(`Requires ((limit - start) / delta) <= ${MU}`);p[y+1]=p[y]+k}let h=p[d],m=M.getArrayFromDType(n,h),g=0;for(let y=0;y<d;++y){let v=p[y+1]-p[y],b=o?e[0]:e[y],_=u?a[0]:a[y];for(let k=0;k<v;++k)m[g++]=b,b+=_}return[p,m]}var Qs=W.RowPartitionType,KKe=class yM{constructor(t,n,r,i,a,s,o,l,u,c){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=W.getRowPartitionTypesHelper(c),this.raggedRank=W.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Qs.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Qs.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){let n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Qs.VALUE_ROWIDS:return yM.getMaxWidthValueRowID(n);case Qs.ROW_SPLITS:return yM.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Qs[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){let n=t.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){let a=t[i+1]-t[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(t){let n=t.length;if(n===0)return 0;let r=0,i=t[0],a=0;for(let s=1;s<n;++s){let o=t[s];o!==i&&(i=o,a=Math.max(s-r,a),r=s)}return Math.max(n-r,a)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return RU(t,r)}calculateOutputSize(t){let n=this.valuesShape,r=this.defaultValueShape;W.validateDefaultValueShape(r,n);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=W.combineRaggedTensorToTensorShapes(this.raggedRank,i,n);a[0]<0&&(a[0]=t);for(let s=1;s<=this.raggedRank;++s)a[s]<0&&(a[s]=this.getMaxWidth(s));return a}calculateFirstParentOutputIndex(t,n,r){let i=Math.min(t,r),a=[],s=0;for(let o=0;o<i;++o,s+=n)a.push(s);for(let o=i;o<t;++o)a.push(-1);return M.assert(a.length===t,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(t,n,r,i){let a=t.length,s=[];for(let o=0;o<a-1;++o){let l=t[o+1]-t[o],u=Math.min(i,l),c=n[o];c===-1&&(u=0);for(let d=0;d<u;++d)s.push(c),c+=r;for(let d=0;d<l-u;++d)s.push(-1)}if(a>0&&s.length!==t[a-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(t,n,r,i){let a=t.length,s=[];if(a===0)return[];let o=0,l=t[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];s.push(u);for(let c=1;c<a;++c){let d=t[c];if(d===l)u>=0&&(++o,o<i?u+=r:u=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}s.push(u)}if(s.length!==t.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(t,n,r,i){let a=this.getRowPartitionTensor(t),s=this.getRowPartitionTypeByDimension(t);switch(s){case Qs.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case Qs.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${Qs[s]}`)}}getFirstDimensionSize(){let t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let n=this.rowPartitionTypes[0];switch(n){case Qs.FIRST_DIM_SIZE:return t[0];case Qs.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Qs.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Qs[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let t=this.getFirstDimensionSize(),n=this.calculateOutputSize(t),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let s=r.length-2;s>=0;--s)r[s]=r[s+1]*n[s+1];let i=RU(n,!1),a=M.getArrayFromDType(this.valuesDType,M.sizeFromShape(i));if(r[0]*n[0]>0){let s=this.calculateFirstParentOutputIndex(t,r[0],n[0]);for(let o=1;o<=this.raggedRank;++o)s=this.calculateOutputIndex(o-1,s,r[o],n[o]);this.setOutput(this.raggedRank,s,a,i)}return[i,a]}setOutput(t,n,r,i){if(r.length===0)return;let a=this.values,s=r,o=i.slice();o=o.slice(t+1);let l=M.sizeFromShape(o),u=n.length,c=this.defaultValue;if(c.length!==l&&c.length!==1){let m=this.defaultValueShape;ue(()=>{let g=le(c,m);c=zp(g,o).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=u;++m){let g=m<u?n[m]:-1;if(g===h){++h;continue}if(p<h){let y=a.subarray(d*l),v=s.subarray(p*l),b=(h-p)*l;AU(v,y,b)}if(m>=u){let y=r.length;g=Math.floor(y/l)}if(g>h)if(this.defaultValue.length===1)s.subarray(h*l,g*l).fill(this.defaultValue[0]),h=g;else for(;g>h;){let y=s.slice(h*l);AU(y,c,l),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function AU(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function RU(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Pae(e,t,n,r,i,a,s,o,l,u){return new KKe(e,t,n,r,i,a,s,o,l,u).compute()}function Az(e,t,n,r){let i=e===t,a=e<t&&n<0,s=t<e&&n>1;if(i||a||s)return M.makeZerosTypedArray(0,r);let o=Math.abs(Math.ceil((t-e)/n)),l=M.makeZerosTypedArray(o,r);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}var Mae=Ql(e=>1/Math.sqrt(e)),ZKe=Wd(Vf,Mae),XKe={kernelName:Vf,backendName:"cpu",kernelFunc:ZKe};function Np(e,t,n,r,i,a,s,o,l,u){let c=[r/i,i],d=e.values,p=t.values;if(r===0)return Gt(n,t.dtype);let h=l instanceof Br?l:Gt(c,t.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let m=0;m<a;m++){let g=[],y=0;for(let v=0;v<s;v++){let b=d[m*s+v];g.push(b),y+=b*o[v]}if(y<0||y>=r/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<i;v++)u?h.values[y*i+v]+=p[m*i+v]:h.values[y*i+v]=t.rank===0?p[0]:p[m*i+v]}return h}var JKe=Ql(e=>1/(1+Math.exp(-e))),Aae=An(qf,e=>1/(1+Math.exp(-e))),YKe={kernelName:qf,backendName:"cpu",kernelFunc:Aae};function II(e,t,n,r,i){let a=ti.isSliceContinous(r,t,n),s=M.sizeFromShape(n),o=M.computeStrides(r);if(a){let d=ti.computeFlatOffset(t,o);return i==="string"?e.slice(d,d+s):e.subarray(d,d+s)}let l=i==="string"?W.fromUint8ToStringArray(e):e,u=Gt(r,i,l),c=Gt(n,i);for(let d=0;d<c.size;++d){let p=c.indexToLoc(d),h=p.map((m,g)=>m+t[g]);c.set(u.get(...h),...p)}return i==="string"?W.fromStringArrayToUint8(c.values):c.values}function bh(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:s}=r;ct(i,"slice");let[o,l]=ti.parseSliceParams(i,a,s);ti.assertParamsValid(i,o,l);let u=n.data.get(i.dataId).values,c=II(u,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}var QKe={kernelName:Av,backendName:"cpu",kernelFunc:bh};function Rae(e,t,n,r,i,a,s){let o=t[0],l=a[0],u=new Array(l),c=new Array(o),d=t[1];if(l===0){if(o!==0)throw new Error(W.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));let y=M.getArrayFromDType(n,0),v=M.getArrayFromDType(i,0);return[y,[0,d],v,u,c]}let p=!0,h=0,m=new Array(l).fill(0);for(let y=0;y<o;++y){let v=e[y*d];if(v<0)throw new Error(W.getSparseFillEmptyRowsNegativeIndexErrorMessage(y,v));if(v>=l)throw new Error(W.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(y,v,l));++m[v],p=p&&v>=h,h=v}let g=!0;for(let y=0;y<l;++y){let v=m[y]===0;u[y]=v,g=g&&!v,m[y]=Math.max(m[y],1),y>0&&(m[y]+=m[y-1])}if(g&&p){let y=e,v=r;for(let b=0;b<o;++b)c[b]=b;return[y,[o,d],v,u,c]}else{let y=m[l-1],v=M.getArrayFromDType(n,y*d),b=M.getArrayFromDType(i,y),_=new Array(l).fill(0);for(let k=0;k<o;++k){let S=e[k*d],$=_[S],N=(S===0?0:m[S-1])+$;_[S]++;for(let P=0;P<d;++P)v[N*d+P]=e[k*d+P];b[N]=r[k],c[k]=N}for(let k=0;k<l;++k)if(_[k]===0){let S=k===0?0:m[k-1];v[S*d+0]=k;for(let $=1;$<d;++$)v[S*d+$]=0;b[S]=s}return[v,[y,d],b,u,c]}}function Dae(e,t,n,r,i){let a=M.sizeFromShape(r),s=t[0],o=i.length,l=[],u=1,c=-1;for(let g=0;g<o;++g){let y=i[g];if(y===-1){if(c!==-1)throw new Error(W.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,g));c=g,l.push(1)}else{if(y<0)throw new Error(W.getSparseReshapeNegativeOutputDimErrorMessage(g,y));u*=y,l.push(y)}}if(c!==-1){if(u<=0)throw new Error(W.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let g=Math.trunc(a/u);if(u*g!==a)throw new Error(W.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[c]=g}if(M.sizeFromShape(l)!==a)throw new Error(W.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let d=r.length,p=[];if(d>0){p[d-1]=1;for(let g=d-2;g>=0;--g)p[g]=p[g+1]*r[g+1]}let h=[];if(o>0){h[o-1]=1;for(let g=o-2;g>=0;--g)h[g]=h[g+1]*l[g+1]}let m=M.getArrayFromDType(n,s*o);for(let g=0;g<s;++g){let y=0;for(let v=0;v<d;++v)y+=e[g*d+v]*p[v];for(let v=0;v<o;++v)m[g*o+v]=Math.trunc(y/h[v]),y%=h[v]}return[m,[s,o],l]}function Rz(e,t,n,r,i,a=!1,s=0){let o=r.length,l=[t[0],e.length/t[0]],u=l[1],c=o>0?i[o-1]+1:0;if(c<0)throw new Error(W.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let d=t.slice();d[0]=c;let p=d.reduce((b,_)=>b*_,1),h=M.getArrayFromDType(n,p);if(o===0)return c>0&&h.fill(s),[h,d];if(c<=0)throw new Error(W.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let m=0,g=1,y=0,v=i[m];for(;;){let b=0;if(g<o){if(b=i[g],v===b){++g;continue}if(v>=b)throw new Error(W.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(v<0||v>=c)throw new Error(W.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(v,c));v>y&&h.fill(s,y*u,v*u);for(let _=m;_<g;++_){let k=r[_];if(k<0||k>=l[0])throw new Error(W.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,r[_],l[0]));for(let S=0;S<u;S++)h[v*u+S]+=e[k*u+S]}if(a)for(let _=0;_<u;_++)h[v*u+_]/=g-m;if(m=g,++g,y=v+1,v=b,g>o)break}return y<c&&h.fill(s,y*u,c*u),[h,d]}var eZe=Ql(e=>Math.sqrt(e)),tZe=An(Zf,e=>Math.sqrt(e)),nZe={kernelName:Zf,backendName:"cpu",kernelFunc:tZe},Lae=Rr((e,t)=>{let n=e-t;return n*n}),rZe=ii(Yf,Lae),iZe={kernelName:Yf,backendName:"cpu",kernelFunc:rZe},Fae=Ql((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),aZe=Wd(_w,Fae),sZe={kernelName:_w,backendName:"cpu",kernelFunc:aZe};function zae(e,t,n,r){let i=Gt(e,t.dtype);for(let a=0;a<i.size;a++){let s=i.indexToLoc(a),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*n[l]+r[l];i.set(t.get(...o),...s)}return i}var oZe=class{constructor(e,t,n,r,i,a){this.separator=M.encodeString(e),this.nGramWidths=t,this.leftPad=M.encodeString(n),this.rightPad=M.encodeString(r),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,a){for(let s=0;s<i;++s){let o=this.getPadWidth(a),l=Math.max(0,o-s),u=Math.max(0,o-(i-(s+1))),c=a-(l+u),d=t+(l>0?0:s-o),p=0;p+=l*this.leftPad.length;for(let v=0;v<c;++v)p+=e[d+v].length;p+=u*this.rightPad.length;let h=l+u+c-1;p+=h*this.separator.length,n[r+s]=new Uint8Array(p);let m=n[r+s],g=0,y=v=>v.forEach(b=>m[g++]=b);for(let v=0;v<l;++v)y(this.leftPad),y(this.separator);for(let v=0;v<c-1;++v)y(e[d+v]),y(this.separator);if(c>0){y(e[d+c-1]);for(let v=0;v<u;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<u-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let o=t[0];if(o!==0)throw new Error(`First split value must be 0, got ${o}`);for(let l=1;l<r;++l){let u=t[l]>=o;if(u=u&&t[l]<=n,!u)throw new Error(`Invalid split value ${t[l]}, must be in [${o}, ${n}]`);o=t[l]}if(o!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${o}`)}let i=r-1,a=M.getArrayFromDType("int32",r);if(n===0||r===0){let o=new Array(n);for(let l=0;l<=i;++l)a[l]=0;return[o,a]}a[0]=0;for(let o=1;o<=i;++o){let l=t[o]-t[o-1],u=0;this.nGramWidths.forEach(c=>{u+=this.getNumNGrams(l,c)}),this.preserveShort&&l>0&&u===0&&(u=1),a[o]=a[o-1]+u}let s=new Array(a[i]);for(let o=0;o<i;++o){let l=t[o],u=a[o];if(this.nGramWidths.forEach(c=>{let d=t[o+1]-t[o],p=this.getNumNGrams(d,c);this.createNGrams(e,l,s,u,p,c),u+=p}),this.preserveShort&&u===a[o]){let c=t[o+1]-t[o];if(c===0)continue;let d=c+2*this.padWidth;this.createNGrams(e,l,s,u,1,d)}}return[s,a]}};function Dz(e,t,n,r,i,a,s,o){return new oZe(n,r,i,a,s,o).compute(e,t)}function lZe(e,t,n,r){if(!e.length)return;if(t.length===0){for(let a=0;a<e.length;++a)r.push(e.subarray(a,a+1));return}if(t.length===1){let a=t[0],s=e.indexOf(a);for(;s!==-1;){let o=e.subarray(0,s);(!n||o.length!==0)&&r.push(o),e=e.subarray(s+1),s=e.indexOf(a)}(!n||e.length!==0)&&r.push(e);return}let i=0;for(let a=0;a<e.length+1;a++)if(a===e.length||t.indexOf(e[a])!==-1){let s=e.subarray(i,a);(!n||s.length!==0)&&r.push(s),i=a+1}}function Lz(e,t,n){let r=e.length,i=[],a=0,s=0,o=new Array(r);for(let p=0;p<r;++p){let h=i.length;lZe(e[p],t,n,i);let m=i.length-h;o[p]=m,a+=m,s=Math.max(s,m)}let l=M.getArrayFromDType("int32",a*2),u=new Array(a),c=[r,s],d=0;for(let p=0;p<r;++p)for(let h=0;h<o[p];++h)l[d*2]=p,l[d*2+1]=h,u[d]=i[d],++d;return[l,u,c]}function Fz(e,t){let n=M.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=M.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Bae=Rr((e,t)=>e-t),uZe=Nz((e,t,n,r)=>({real:e-n,imag:t-r})),zz=ii(Qf,Bae,uZe),cZe={kernelName:Qf,backendName:"cpu",kernelFunc:zz};function Wae(e,t){let n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];let r=Gt(n,e.dtype);for(let i=0;i<r.values.length;++i){let a=r.indexToLoc(i),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=a[l]%e.shape[l];let o=e.locToIndex(s);r.values[i]=e.values[o]}return r}var db=(e,t)=>{let n=t.value-e.value;return n===0?e.index-t.index:n};function Vae(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let o=r-n+1,l=t-n+1,u=Math.log(o),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(o-c)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(t-l*c/o+d)),h=Math.min(r,Math.floor(t+(o-l)*c/o+d));Vae(e,t,p,h)}let i=e[t],a=n,s=r;for(M.swap(e,n,t),db(e[r],i)>0&&M.swap(e,n,r);a<s;){for(M.swap(e,a,s),a++,s--;db(e[a],i)<0;)a=a+1;for(;db(e[s],i)>0;)s=s-1}db(e[n],i)===0?M.swap(e,n,s):(s=s+1,M.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function jae(e,t,n,r,i){let a=t[t.length-1],[s,o]=[e.length/a,a],l=M.getTypedArrayFromDType(n,s*r),u=M.getTypedArrayFromDType("int32",s*r);for(let d=0;d<s;d++){let p=d*o,h=e.subarray(p,p+o),m=new Array(h.length);h.forEach((b,_)=>m[_]={value:b,index:_}),r<m.length&&(Vae(m,r),m=m.slice(0,r)),i&&m.sort(db);let g=d*r,y=l.subarray(g,g+r),v=u.subarray(g,g+r);for(let b=0;b<r;b++)y[b]=m[b].value,v[b]=m[b].index}let c=t.slice();return c[c.length-1]=r,[Gt(c,n,l),Gt(c,"int32",u)]}function Bz(e,t,n,r){let i=M.parseAxisParam(t,n)[0],a=[1,n[0],1];for(let m=0;m<i;m++)a[0]*=n[m];a[1]=n[i];for(let m=i+1;m<n.length;m++)a[2]*=n[m];let s=new Map,o=new Int32Array(n[i]),l=new Br(a,r,e),u=[],c=a[0]===1&&a[2]===1;for(let m=0;m<n[i];m++){let g;if(c)g=e[m].toString();else{let v=[];for(let b=0;b<a[0];b++)for(let _=0;_<a[2];_++)v.push(l.get(b,m,_));g=v.join(",")}let y=s.get(g);if(y!=null)o[m]=y;else{let v=s.size;s.set(g,v),o[m]=v,u.push(m)}}let d=a.slice();d[1]=s.size;let p=new Br(d,r);u.forEach((m,g)=>{for(let y=0;y<a[0];y++)for(let v=0;v<a[2];v++)p.set(l.get(y,m,v),y,g,v)});let h=n.slice();return h[i]=d[1],{outputValues:p.values,outputShape:h,indices:o}}var dZe="4.16.0";I$("cpu",()=>new $z,1);var Hae=An(af,e=>e>=0?e:Math.exp(e)-1),pZe={kernelName:af,backendName:"cpu",kernelFunc:Hae};function Uae(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r;ct([i],"leakyRelu");let s=M.sizeFromShape(i.shape),o=n.data.get(i.dataId).values,l=M.getTypedArrayFromDType("float32",s);for(let u=0;u<o.length;u++)l[u]=o[u]<0?a*o[u]:o[u];return n.makeTensorInfo(i.shape,"float32",l)}var hZe={kernelName:yf,backendName:"cpu",kernelFunc:Uae},fZe=Rr((e,t)=>e<0?t*e:e);function Gae(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t;ct([r,i],"prelu");let a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,[o,l]=fZe(r.shape,i.shape,a,s,"float32");return n.makeTensorInfo(l,"float32",o)}var mZe={kernelName:Mf,backendName:"cpu",kernelFunc:Gae},qae=An(Df,e=>Math.max(0,e)),gZe={kernelName:Df,backendName:"cpu",kernelFunc:qae},Kae=An(zf,e=>Math.min(Math.max(0,e),6)),yZe={kernelName:zf,backendName:"cpu",kernelFunc:Kae};function $I(e,t,n,r,i){if(n==="linear")return Ul({inputs:{x:t},backend:e});if(n==="relu")return qae({inputs:{x:t},backend:e});if(n==="elu")return Hae({inputs:{x:t},backend:e});if(n==="relu6")return Kae({inputs:{x:t},backend:e});if(n==="prelu")return Gae({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return Uae({inputs:{x:t},backend:e,attrs:{alpha:i}});if(n==="sigmoid")return Aae({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Jn(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,s=M.sizeFromShape(i.shape),o=M.inferFromImplicitShape(a,s),l=M.sizeFromShape(o);M.assert(s===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let u=n.data.get(i.dataId);if(u.complexTensorInfos!=null){let c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=o,d.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}var vZe={kernelName:$v,backendName:"cpu",kernelFunc:Jn};function Zae(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:s,transposeB:o}=r;ct([i,a],"matMul");let l=i.shape.length,u=a.shape.length,c=s?i.shape[l-2]:i.shape[l-1],d=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-1]:i.shape[l-2],h=o?a.shape[u-2]:a.shape[u-1],m=i.shape.slice(0,-2),g=a.shape.slice(0,-2),y=M.sizeFromShape(m),v=M.sizeFromShape(g),b=Uv.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,h]);M.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);let _=s?[y,c,p]:[y,p,c],k=o?[v,h,d]:[v,d,h],S=Jn({inputs:{x:i},backend:n,attrs:{shape:_}}),$=Jn({inputs:{x:a},backend:n,attrs:{shape:k}}),N=s?S.shape[1]:S.shape[2],P=s?S.shape[2]:S.shape[1],D=o?$.shape[1]:$.shape[2],O=Math.max(y,v),F=n.data.get(S.dataId).values,E=n.data.get($.dataId).values,z=M.computeStrides(S.shape),q=M.computeStrides($.shape),[K,Z,te]=s?[z[0],1,z[1]]:[z[0],z[1],1],[V,ee,Y]=o?[1,q[1],q[0]]:[q[1],1,q[0]],Q=P*D,oe=Gt([O,P,D],S.dtype),pe=oe.values,he=n.blockSize;for(let ge=0;ge<O;ge++){let _e=ge%y,Ne=ge%v;for(let Se=0;Se<P;Se+=he){let Re=Math.min(Se+he,P);for(let Ke=0;Ke<D;Ke+=he){let it=Math.min(Ke+he,D);for(let Xe=0;Xe<N;Xe+=he){let at=Math.min(Xe+he,N);for(let He=Se;He<Re;He++)for(let _t=Ke;_t<it;_t++){let mt=0;for(let ht=Xe;ht<at;ht++){let Lt=F[_e*K+He*Z+ht*te],Un=E[ht*V+_t*ee+Ne*Y];mt+=Lt*Un}pe[ge*Q+(He*D+_t)]+=mt}}}}}return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(b,oe.dtype,oe.values)}var bZe={kernelName:Gh,backendName:"cpu",kernelFunc:Zae};function wZe(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r,p,h,m,g=[];p=Zae({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:u},backend:n}),s&&(h=yy({inputs:{a:p,b:s},backend:n}),g.push(p),p=h),c&&(m=$I(n,p,c,o,d),g.push(p),p=m);for(let y of g)n.disposeIntermediateTensorInfo(y);return p}var xZe={kernelName:ih,backendName:"cpu",kernelFunc:wZe},_Ze=An(Lh,e=>Math.acos(e)),kZe={kernelName:Lh,backendName:"cpu",kernelFunc:_Ze},SZe=An(Fh,e=>Math.acosh(e)),CZe={kernelName:Fh,backendName:"cpu",kernelFunc:SZe};function IZe(e){let{inputs:t,backend:n}=e,r=t;ct(t,"addN");let i=r.map(o=>n.data.get(o.dataId).values),a=Gt(r[0].shape,r[0].dtype),s=a.values;for(let o=0;o<r.length;o++){let l=i[o];for(let u=0;u<s.length;u++)s[u]+=l[u]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}var $Ze={kernelName:zh,backendName:"cpu",kernelFunc:IZe};function TZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;ct(i,"all");let o=M.parseAxisParam(a,i.shape),l=o,u=W.getAxesPermutation(l,i.shape.length),c=i;u!=null&&(c=Va({inputs:{x:i},backend:n,attrs:{perm:u}}),l=W.getInnerMostAxes(l.length,i.shape.length)),W.assertAxesAreInnerMostDims("all",l,c.shape.length);let[d,p]=W.computeOutAndReduceShapes(c.shape,l),h=M.sizeFromShape(p),m=M.makeZerosTypedArray(M.sizeFromShape(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<m.length;++v){let b=v*h,_=g[b];for(let k=0;k<h;++k){let S=g[b+k];_=_&&S}m[v]=_}u!=null&&n.disposeIntermediateTensorInfo(c);let y=n.makeTensorInfo(d,c.dtype,m);if(s){let v=W.expandShapeToKeepDim(d,o),b=Jn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}var NZe={kernelName:Hy,backendName:"cpu",kernelFunc:TZe};function EZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;ct(i,"any");let o=M.parseAxisParam(a,i.shape),l=o,u=W.getAxesPermutation(l,i.shape.length),c=i;u!=null&&(c=Va({inputs:{x:i},backend:n,attrs:{perm:u}}),l=W.getInnerMostAxes(l.length,i.shape.length)),W.assertAxesAreInnerMostDims("any",l,c.shape.length);let[d,p]=W.computeOutAndReduceShapes(c.shape,l),h=M.sizeFromShape(p),m=M.makeZerosTypedArray(M.sizeFromShape(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<m.length;++v){let b=v*h,_=g[b];for(let k=0;k<h;++k){let S=g[b+k];_=_||S}m[v]=_}u!=null&&n.disposeIntermediateTensorInfo(c);let y=n.makeTensorInfo(d,c.dtype,m);if(s){let v=W.expandShapeToKeepDim(d,o),b=Jn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}var OZe={kernelName:Uy,backendName:"cpu",kernelFunc:EZe};function PZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;ct(i,"argMax");let s=M.parseAxisParam(a,i.shape),o=W.getAxesPermutation(s,i.shape.length),l=i,u=[];o!=null&&(l=Va({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),s=W.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],W.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[c,d]=W.computeOutAndReduceShapes(l.shape,s),p=M.sizeFromShape(c),h=M.makeZerosTypedArray(p,"int32"),m=M.sizeFromShape(d),g=n.data.get(l.dataId).values;for(let y=0;y<h.length;++y){let v=y*m,b=g[v],_=0;for(let k=0;k<m;++k){let S=g[v+k];S>b&&(b=S,_=k)}h[y]=_}return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}var MZe={kernelName:Gy,backendName:"cpu",kernelFunc:PZe};function AZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r;ct(i,"argMin");let s=M.parseAxisParam(a,i.shape),o=W.getAxesPermutation(s,i.shape.length),l=i,u=[];o!=null&&(l=Va({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),s=W.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],W.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[c,d]=W.computeOutAndReduceShapes(l.shape,s),p=M.sizeFromShape(c),h=M.makeZerosTypedArray(p,"int32"),m=M.sizeFromShape(d),g=n.data.get(l.dataId).values;for(let y=0;y<h.length;++y){let v=y*m,b=g[v],_=0;for(let k=0;k<m;++k){let S=g[v+k];S<b&&(b=S,_=k)}h[y]=_}return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",h)}var RZe={kernelName:qy,backendName:"cpu",kernelFunc:AZe},DZe=An(Bh,e=>Math.asin(e)),LZe={kernelName:Bh,backendName:"cpu",kernelFunc:DZe},FZe=An(Wh,e=>Math.asinh(e)),zZe={kernelName:Wh,backendName:"cpu",kernelFunc:FZe},BZe=An(Vh,e=>Math.atan(e)),WZe={kernelName:Vh,backendName:"cpu",kernelFunc:BZe},VZe=Rr((e,t)=>Math.atan2(e,t)),jZe=ii(Hh,VZe),HZe={kernelName:Hh,backendName:"cpu",kernelFunc:jZe},UZe=An(jh,e=>Math.atanh(e)),GZe={kernelName:jh,backendName:"cpu",kernelFunc:UZe};function Wz(e,t,n,r,i,a){let s=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,d=i.effectiveFilterWidth,p=i.padInfo.top,h=i.padInfo.left,m=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Gt(i.outShape,n),y=g.values,v=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],_=i.outShape[3];for(let k=0;k<i.batchSize;++k){let S=k*v,$=k*r[0];for(let N=0;N<i.inChannels;++N)for(let P=0;P<i.outHeight;++P){let D=P*s-p,O=Math.max(0,D),F=Math.min(i.inHeight,c+D),E=S+P*b;for(let z=0;z<i.outWidth;++z){let q=z*o-h,K=Math.max(0,q),Z=Math.min(i.inWidth,d+q),te=m,V=0,ee=0;for(let Q=O;Q<F;Q+=l){let oe=$+Q*r[1];for(let pe=K;pe<Z;pe+=u){let he=oe+pe*r[2],ge=e[he+N];a==="max"&&ge>te?te=ge:a==="avg"&&(V+=ge,ee++)}if(isNaN(te))break}let Y=E+z*_+N;y[Y]=a==="avg"?V/ee:te}}}return g}function Xae(e,t,n,r,i=!1,a=!1){let s=Gt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=r.padInfo.top,m=r.padInfo.left,g=Gt(t,n,e);for(let y=0;y<r.batchSize;++y)for(let v=0;v<r.inChannels;++v)for(let b=0;b<r.outHeight;++b){let _=b*o-h,k=_;for(;k<0;)k+=u;let S=Math.min(r.inHeight,d+_);for(let $=0;$<r.outWidth;++$){let N=$*l-m,P=N;for(;P<0;)P+=c;let D=Math.min(r.inWidth,p+N),O=Number.NEGATIVE_INFINITY,F=-1;for(let E=k;E<S;E+=u){let z=E-_;for(let q=P;q<D;q+=c){let K=q-N,Z=g.get(y,E,q,v);Z>O&&(O=Z,i?F=a?((y*r.inHeight+E)*r.inWidth+q)*r.inChannels+v:(E*r.inWidth+q)*r.inChannels+v:F=z*p+K)}}s.set(F,y,b,$,v)}}return s}function Jae(e,t,n,r,i,a){let s=i.strideDepth,o=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=i.padInfo.front,y=i.padInfo.top,v=i.padInfo.left,b=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=Gt(i.outShape,n),k=_.values,S=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],$=i.outShape[2]*i.outShape[3]*i.outShape[4],N=i.outShape[3]*i.outShape[4],P=i.outShape[4];for(let D=0;D<i.batchSize;++D){let O=D*S,F=D*r[0];for(let E=0;E<i.inChannels;++E)for(let z=0;z<i.outDepth;++z){let q=z*s-g,K=q;for(;K<0;)K+=u;let Z=Math.min(i.inDepth,p+q),te=O+z*$;for(let V=0;V<i.outHeight;++V){let ee=V*o-y,Y=ee;for(;Y<0;)Y+=c;let Q=Math.min(i.inHeight,h+ee),oe=te+V*N;for(let pe=0;pe<i.outWidth;++pe){let he=pe*l-v,ge=he;for(;ge<0;)ge+=d;let _e=Math.min(i.inWidth,m+he),Ne=oe+pe*P,Se=b,Re=0,Ke=0;for(let Xe=K;Xe<Z;Xe+=u){let at=F+Xe*r[1];for(let He=Y;He<Q;He+=c){let _t=at+He*r[2];for(let mt=ge;mt<_e;mt+=d){let ht=_t+mt*r[3],Lt=e[ht+E];if(a==="max"&&Lt>Se?Se=Lt:a==="avg"&&(Re+=Lt,Ke++),isNaN(Se))break}if(isNaN(Se))break}if(isNaN(Se))break}let it=Ne+E;k[it]=a==="avg"?Re/Math.max(Ke,1):Se}}}}return _}function qZe(e,t){let n=Gt(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,h=t.padInfo.top,m=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let y=0;y<t.inChannels;++y)for(let v=0;v<t.outDepth;++v){let b=v*r-p,_=b;for(;_<0;)_+=s;let k=Math.min(t.inDepth,u+b);for(let S=0;S<t.outHeight;++S){let $=S*i-h,N=$;for(;N<0;)N+=o;let P=Math.min(t.inHeight,c+$);for(let D=0;D<t.outWidth;++D){let O=D*a-m,F=O;for(;F<0;)F+=l;let E=Math.min(t.inWidth,d+O),z=Number.NEGATIVE_INFINITY,q=-1;for(let K=_;K<k;K+=s){let Z=K-b;for(let te=N;te<P;te+=o){let V=te-$;for(let ee=F;ee<E;ee+=l){let Y=ee-O,Q=e.get(g,K,te,ee,y);Q>=z&&(z=Q,q=Z*c*d+V*c+Y)}}}n.set(q,g,v,S,D,y)}}}return n}function KZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ct(i,"avgPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,u=1;M.assert(W.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=W.computePool2DInfo(i.shape,a,s,u,o,l),d;if(c.filterWidth===1&&c.filterHeight===1&&M.arraysEqual(c.inShape,c.outShape))d=Ul({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=M.computeStrides(i.shape),m=Wz(p,i.shape,i.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return d}var ZZe={kernelName:Uh,backendName:"cpu",kernelFunc:KZe};function XZe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=r;ct(i,"avgPool3d");let c=W.computePool3DInfo(i.shape,a,s,1,o,l,u),d=n.data.get(i.dataId).values,p=Jae(d,i.shape,i.dtype,M.computeStrides(i.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}var JZe={kernelName:Ky,backendName:"cpu",kernelFunc:XZe};function YZe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r;ct([i,a],"avgPool3DGrad");let c=W.computePool3DInfo(a.shape,s,o,1,l,u),d=c.strideDepth,p=c.strideHeight,h=c.strideWidth,m=c.filterDepth,g=c.filterHeight,y=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,_=c.dilationWidth,k=c.effectiveFilterDepth,S=c.effectiveFilterHeight,$=c.effectiveFilterWidth,N=k-1-c.padInfo.front,P=$-1-c.padInfo.left,D=S-1-c.padInfo.top,O=Gt(a.shape,"float32"),F=1/(m*g*y),E=n.bufferSync(i);for(let z=0;z<c.batchSize;++z)for(let q=0;q<c.inChannels;++q)for(let K=0;K<c.inDepth;++K)for(let Z=0;Z<c.inHeight;++Z)for(let te=0;te<c.inWidth;++te){let V=K-N,ee=Z-D,Y=te-P,Q=0;for(let oe=0;oe<k;oe+=v){let pe=(V+oe)/d;if(!(pe<0||pe>=c.outDepth||Math.floor(pe)!==pe))for(let he=0;he<S;he+=b){let ge=(ee+he)/p;if(!(ge<0||ge>=c.outHeight||Math.floor(ge)!==ge))for(let _e=0;_e<$;_e+=_){let Ne=(Y+_e)/h;if(Ne<0||Ne>=c.outWidth||Math.floor(Ne)!==Ne)continue;let Se=E.get(z,pe,ge,Ne,q);Q+=Se}}}O.set(Q*F,z,K,Z,te,q)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}var QZe={kernelName:lw,backendName:"cpu",kernelFunc:YZe};function eXe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a;ct([i,a],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=r,c=W.computePool2DInfo(s.shape,o,l,1,u),d=c.strideHeight,p=c.strideWidth,h=c.filterHeight,m=c.filterWidth,g=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,_=b-1-c.padInfo.left,k=v-1-c.padInfo.top,S=Gt(s.shape,"float32"),$=1/(h*m),N=n.data.get(i.dataId).values,P=Gt(i.shape,"float32",N);for(let D=0;D<c.batchSize;++D)for(let O=0;O<c.inChannels;++O)for(let F=0;F<c.inHeight;++F)for(let E=0;E<c.inWidth;++E){let z=F-k,q=E-_,K=0;for(let Z=0;Z<v;Z+=g){let te=(z+Z)/d;if(!(te<0||te>=c.outHeight||Math.floor(te)!==te))for(let V=0;V<b;V+=y){let ee=(q+V)/p;if(ee<0||ee>=c.outWidth||Math.floor(ee)!==ee)continue;let Y=P.get(D,te,ee,O);K+=Y}}S.set(K*$,D,F,E,O)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}var tXe={kernelName:ow,backendName:"cpu",kernelFunc:eXe};function nXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,scale:a,offset:s,mean:o,variance:l}=t;M.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M.assert(s==null||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M.assert(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ct([i,o,l,a,s],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);let c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,h=a?n.data.get(a.dataId).values:new Float32Array([1]),m=s?n.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),y=m.length,v=h.length,b=p.length,_=d.length,k=0,S=0,$=0,N=0;for(let P=0;P<c.length;++P)g[P]=m[k++]+(c[P]-d[S++])*h[$++]/Math.sqrt(p[N++]+u),k>=y&&(k=0),S>=_&&(S=0),$>=v&&($=0),N>=b&&(N=0);return n.makeTensorInfo(i.shape,i.dtype,g)}var rXe={kernelName:df,backendName:"cpu",kernelFunc:nXe};function iXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:s}=r;ct([i],"batchToSpaceND");let o=a.reduce((v,b)=>v*b),l=W.getReshaped(i.shape,a,o),u=W.getPermuted(l.length,a.length),c=W.getReshapedPermuted(i.shape,a,o),d=W.getSliceBeginCoords(s,a.length),p=W.getSliceSize(c,s,a.length),h=Jn({inputs:{x:i},backend:n,attrs:{shape:l}}),m=Va({inputs:{x:h},backend:n,attrs:{perm:u}}),g=Jn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=bh({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var aXe={kernelName:Zy,backendName:"cpu",kernelFunc:iXe};function sXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s}=r,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,u=Ez(o,l,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,u)}var oXe={kernelName:Xy,backendName:"cpu",kernelFunc:sXe};function lXe(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,o=W.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var uXe={kernelName:uw,backendName:"cpu",kernelFunc:lXe},cXe=An(Md,(e,t)=>{let n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),dXe={kernelName:Md,backendName:"cpu",kernelFunc:cXe},pXe=e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(M.sizeFromShape(t.shape)),i=n.data.get(t.dataId),a=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values;for(let u=0;u<o.length;u++){let c=o[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,t.shape,"float32")},hXe={kernelName:cw,backendName:"cpu",kernelFunc:pXe};function vy(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}var fXe={kernelName:b$,backendName:"cpu",kernelFunc:vy};function by(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=M.parseAxisParam(i,t[0].shape)[0],s=t.map(g=>g.shape);W.assertParamsConsistent(s,a);let o=W.computeOutShape(t.map(g=>g.shape),a);if(M.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(g=>M.sizeFromShape(g.shape)>0);if(l.length===1)return Ul({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){let g=l.map(k=>vh({inputs:{input:k},backend:n})),y=l.map(k=>vy({inputs:{input:k},backend:n})),v=by({inputs:g,backend:n,attrs:{axis:a}}),b=by({inputs:y,backend:n,attrs:{axis:a}}),_=as({inputs:{real:v,imag:b},backend:n});return g.forEach(k=>n.disposeIntermediateTensorInfo(k)),y.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),_}let u=l.map(g=>{let y=[-1,M.sizeFromShape(g.shape.slice(a))];return Jn({inputs:{x:g},backend:n,attrs:{shape:y}})}),c=u.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));o=W.computeOutShape(u.map(g=>g.shape),1);let d=u[0].shape[0]===1,p=Oz(c,o,t[0].dtype,d),h=W.computeOutShape(l.map(g=>g.shape),a),m=n.makeTensorInfo(h,t[0].dtype,p);return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var mXe={kernelName:Yy,backendName:"cpu",kernelFunc:by};function Yae(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r;ct([i,a],"conv2d");let d=W.convertConv2DDataFormat(l),p=W.computeConv2DInfo(i.shape,a.shape,s,u,o,c,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,y=p.dilationWidth,v=p.padInfo.left,b=p.padInfo.top,_=p.dataFormat==="channelsLast",k=new Br(p.outShape,i.dtype),S=M.computeStrides(i.shape),$=M.computeStrides(a.shape),N=S[0],P=_?S[1]:S[2],D=_?S[2]:1,O=_?1:S[1],F=k.strides[0],E=_?k.strides[1]:k.strides[2],z=_?k.strides[2]:1,q=_?1:k.strides[1],K=n.data.get(i.dataId).values,Z=n.data.get(a.dataId).values,te=k.values;for(let V=0;V<p.batchSize;++V){let ee=V*N,Y=V*F;for(let Q=0;Q<p.outHeight;++Q){let oe=Y+Q*E,pe=Q*p.strideHeight-b;for(let he=0;he<h;++he){let ge=pe+he*g;if(ge<0||ge>=p.inHeight)continue;let _e=he*$[0],Ne=ee+ge*P;for(let Se=0;Se<p.outWidth;++Se){let Re=oe+Se*z,Ke=Se*p.strideWidth-v;for(let it=0;it<m;++it){let Xe=Ke+it*y;if(Xe<0||Xe>=p.inWidth)continue;let at=_e+it*$[1],He=Ne+Xe*D,_t=at;for(let mt=0;mt<p.inChannels;++mt){let ht=K[He+mt*O];for(let Lt=0;Lt<p.outChannels;++Lt)te[Re+Lt*q]+=ht*Z[_t+Lt];_t+=p.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,te)}var gXe={kernelName:Zh,backendName:"cpu",kernelFunc:Yae};function yXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;ct([i,a],"conv2dBackpropFilter");let d=W.convertConv2DDataFormat(l),p=W.computeConv2DInfo(i.shape,c,s,1,o,u,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:y}=p,v=p.dataFormat==="channelsLast",b=new Br(p.filterShape,"float32"),_=p.padInfo.left,k=p.padInfo.top,S=n.data.get(i.dataId).values,$=n.data.get(a.dataId).values,N=new Br(i.shape,i.dtype,S),P=new Br(a.shape,a.dtype,$);for(let D=0;D<g;++D){let O=Math.max(0,Math.ceil((k-D)/h)),F=Math.min(p.outHeight,(p.inHeight+k-D)/h);for(let E=0;E<y;++E){let z=Math.max(0,Math.ceil((_-E)/m)),q=Math.min(p.outWidth,(p.inWidth+_-E)/m);for(let K=0;K<p.inChannels;++K)for(let Z=0;Z<p.outChannels;++Z){let te=0;for(let V=0;V<p.batchSize;++V)for(let ee=O;ee<F;++ee){let Y=D+ee*h-k;for(let Q=z;Q<q;++Q){let oe=E+Q*m-_;v?te+=N.get(V,Y,oe,K)*P.get(V,ee,Q,Z):te+=N.get(V,K,Y,oe)*P.get(V,Z,ee,Q)}}b.set(te,D,E,K,Z)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var vXe={kernelName:p$,backendName:"cpu",kernelFunc:yXe};function bXe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:s,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r;ct([i,a],"conv2dBackpropInput");let d=M.computeStrides(a.shape),p=M.computeStrides(i.shape),h=W.convertConv2DDataFormat(u),m=W.computeConv2DInfo(s,a.shape,o,1,l,c,!1,h),g=new Br(m.inShape,"float32"),y=g.values,v=n.data.get(i.dataId).values,b=n.data.get(a.dataId).values,[_,k,S]=d,{batchSize:$,filterHeight:N,filterWidth:P,inChannels:D,inHeight:O,inWidth:F,outChannels:E,outHeight:z,outWidth:q,strideHeight:K,strideWidth:Z}=m;h=m.dataFormat;let te=N-1-m.padInfo.top,V=P-1-m.padInfo.left,ee=h==="channelsLast",Y=g.strides[0],Q=ee?g.strides[1]:g.strides[2],oe=ee?g.strides[2]:1,pe=ee?1:g.strides[1],he=p[0],ge=ee?p[1]:p[2],_e=ee?p[2]:1,Ne=ee?1:p[1];for(let Se=0;Se<$;++Se)for(let Re=0;Re<D;++Re)for(let Ke=0;Ke<O;++Ke){let it=Ke-te,Xe=Math.max(0,Math.ceil(it/K)),at=Math.min(z,(N+it)/K);for(let He=0;He<F;++He){let _t=He-V,mt=Math.max(0,Math.ceil(_t/Z)),ht=Math.min(q,(P+_t)/Z),Lt=0;for(let kt=Xe;kt<at;++kt){let bn=kt*K-it;for(let tn=mt;tn<ht;++tn){let Mt=tn*Z-_t,sr=he*Se+ge*kt+_e*tn,Rn=_*(N-1-bn)+k*(P-1-Mt)+S*Re;for(let wn=0;wn<E;++wn){let un=v[sr+Ne*wn],cn=b[Rn+wn];Lt+=un*cn}}}let Un=Y*Se+Q*Ke+oe*He+pe*Re;y[Un]=Lt}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}var wXe={kernelName:Xh,backendName:"cpu",kernelFunc:bXe};function xXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r;ct([i,a],"conv3d");let u=W.computeConv3DInfo(i.shape,a.shape,s,l,o),{filterDepth:c,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:y}=u,v=y.front,b=y.left,_=y.top,k=new Br(u.outShape,i.dtype),S=n.data.get(i.dataId).values,$=n.data.get(a.dataId).values,N=k.values,P=M.computeStrides(i.shape),D=M.computeStrides(a.shape);for(let O=0;O<u.batchSize;++O){let F=O*P[0],E=O*k.strides[0];for(let z=0;z<u.outDepth;++z){let q=E+z*k.strides[1],K=z*u.strideDepth-v;for(let Z=0;Z<c;++Z){let te=K+Z*h;if(te<0||te>=u.inDepth)continue;let V=Z*D[0],ee=F+te*P[1];for(let Y=0;Y<u.outHeight;++Y){let Q=q+Y*k.strides[2],oe=Y*u.strideHeight-_;for(let pe=0;pe<d;++pe){let he=oe+pe*m;if(he<0||he>=u.inHeight)continue;let ge=V+pe*D[1],_e=ee+he*P[2];for(let Ne=0;Ne<u.outWidth;++Ne){let Se=Q+Ne*u.outChannels,Re=Ne*u.strideWidth-b;for(let Ke=0;Ke<p;++Ke){let it=Re+Ke*g;if(it<0||it>=u.inWidth)continue;let Xe=ge+Ke*D[2],at=_e+it*u.inChannels,He=Xe;for(let _t=0;_t<u.inChannels;++_t){let mt=S[at+_t];for(let ht=0;ht<u.outChannels;++ht)N[Se+ht]+=mt*$[He+ht];He+=u.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var _Xe={kernelName:Jh,backendName:"cpu",kernelFunc:xXe};function kXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,filterShape:l}=r;ct([i,a],"conv3dBackpropFilterV2");let u=M.computeStrides(i.shape),c=M.computeStrides(a.shape),d=W.computeConv3DInfo(i.shape,l,s,1,o),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,y=d.filterHeight,v=d.filterWidth,b=new Br(d.filterShape,"float32"),_=b.values,[k,S,$,N]=b.strides,P=n.data.get(a.dataId).values,[D,O,F,E]=c,z=n.data.get(i.dataId).values,[q,K,Z,te]=u,V=d.padInfo.front,ee=d.padInfo.left,Y=d.padInfo.top;for(let Q=0;Q<g;++Q){let oe=Math.max(0,Math.ceil((V-Q)/p)),pe=Math.min(d.outDepth,(d.inDepth+V-Q)/p),he=Q*k;for(let ge=0;ge<y;++ge){let _e=Math.max(0,Math.ceil((Y-ge)/h)),Ne=Math.min(d.outHeight,(d.inHeight+Y-ge)/h),Se=ge*S+he;for(let Re=0;Re<v;++Re){let Ke=Math.max(0,Math.ceil((ee-Re)/m)),it=Math.min(d.outWidth,(d.inWidth+ee-Re)/m),Xe=Re*$+Se;for(let at=0;at<d.inChannels;++at){let He=at*N+Xe;for(let _t=0;_t<d.outChannels;++_t){let mt=0;for(let ht=0;ht<d.batchSize;++ht){let Lt=ht*q,Un=ht*D;for(let kt=oe;kt<pe;++kt){let bn=(Q+kt*p-V)*K+Lt,tn=kt*O+Un;for(let Mt=_e;Mt<Ne;++Mt){let sr=(ge+Mt*h-Y)*Z+bn,Rn=Mt*F+tn;for(let wn=Ke;wn<it;++wn){let un=(Re+wn*m-ee)*te+sr,cn=wn*E+Rn;mt+=z[un+at]*P[cn+_t]}}}}_[He+_t]=mt}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}var SXe={kernelName:Qy,backendName:"cpu",kernelFunc:kXe};function CXe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:s,strides:o,inputShape:l}=r;ct([i],"conv3dBackpropInputV2");let u=M.computeStrides(i.shape),c=M.computeStrides(a.shape),d=W.computeConv3DInfo(l,a.shape,o,1,s),p=new Br(d.inShape,"float32"),h=p.values,[m,g,y,v]=p.strides,b=n.data.get(i.dataId).values,[_,k,S,$]=u,N=n.data.get(a.dataId).values,[P,D,O,F]=c,{batchSize:E,filterDepth:z,filterHeight:q,filterWidth:K,inChannels:Z,inDepth:te,inHeight:V,inWidth:ee,outChannels:Y,outDepth:Q,outHeight:oe,outWidth:pe,strideDepth:he,strideHeight:ge,strideWidth:_e}=d,Ne=z-1-d.padInfo.front,Se=q-1-d.padInfo.top,Re=K-1-d.padInfo.left;for(let Ke=0;Ke<E;++Ke)for(let it=0;it<Z;++it)for(let Xe=0;Xe<te;++Xe){let at=Xe-Ne,He=Math.max(0,Math.ceil(at/he)),_t=Math.min(Q,(z+at)/he);for(let mt=0;mt<V;++mt){let ht=mt-Se,Lt=Math.max(0,Math.ceil(ht/ge)),Un=Math.min(oe,(q+ht)/ge);for(let kt=0;kt<ee;++kt){let bn=kt-Re,tn=Math.max(0,Math.ceil(bn/_e)),Mt=Math.min(pe,(K+bn)/_e),sr=0;for(let Rn=He;Rn<_t;++Rn){let wn=Rn*he-at;for(let un=Lt;un<Un;++un){let cn=un*ge-ht;for(let Er=tn;Er<Mt;++Er){let ki=Er*_e-bn,Qn=_*Ke+k*Rn+S*un+$*Er,Ta=P*(z-1-wn)+D*(q-1-cn)+O*(K-1-ki)+F*it;for(let yn=0;yn<Y;++yn){let Ge=b[Qn+yn],rt=N[Ta+yn];sr+=Ge*rt}}}}h[m*Ke+g*Xe+y*mt+v*kt+it]=sr}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}var IXe={kernelName:ev,backendName:"cpu",kernelFunc:CXe},$Xe=An(Yh,e=>Math.cos(e)),TXe={kernelName:Yh,backendName:"cpu",kernelFunc:$Xe},NXe=An(Qh,e=>Math.cosh(e)),EXe={kernelName:Qh,backendName:"cpu",kernelFunc:NXe};function OXe(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:u}=r,[c,d,p,h]=i.shape,m=a.shape[0],[g,y]=o,v=Gt([m,g,y,h],"float32"),b=n.data.get(a.dataId).values,_=n.data.get(s.dataId).values,k=n.data.get(i.dataId).values,S=M.computeStrides(i.shape),$=M.computeStrides(v.shape);for(let N=0;N<m;N++){let P=N*4,D=b[P],O=b[P+1],F=b[P+2],E=b[P+3],z=_[N];if(z>=c)continue;let q=g>1?(F-D)*(d-1)/(g-1):0,K=y>1?(E-O)*(p-1)/(y-1):0;for(let Z=0;Z<g;Z++){let te=g>1?D*(d-1)+Z*q:.5*(D+F)*(d-1);if(te<0||te>d-1){for(let V=0;V<y;V++)for(let ee=0;ee<h;ee++){let Y=ee+V*$[2]+Z*$[1]+N*$[0];v.values[Y]=u}continue}if(l==="bilinear"){let V=Math.floor(te),ee=Math.ceil(te),Y=te-V;for(let Q=0;Q<y;Q++){let oe=y>1?O*(p-1)+Q*K:.5*(O+E)*(p-1);if(oe<0||oe>p-1){for(let _e=0;_e<h;_e++){let Ne=_e+Q*$[2]+Z*$[1]+N*$[0];v.values[Ne]=u}continue}let pe=Math.floor(oe),he=Math.ceil(oe),ge=oe-pe;for(let _e=0;_e<h;_e++){let Ne=_e+pe*S[2]+V*S[1]+z*S[0],Se=k[Ne];Ne=_e+he*S[2]+V*S[1]+z*S[0];let Re=k[Ne];Ne=_e+pe*S[2]+ee*S[1]+z*S[0];let Ke=k[Ne];Ne=_e+he*S[2]+ee*S[1]+z*S[0];let it=k[Ne],Xe=Se+(Re-Se)*ge,at=Ke+(it-Ke)*ge;Ne=_e+Q*$[2]+Z*$[1]+N*$[0],v.values[Ne]=Xe+(at-Xe)*Y}}}else for(let V=0;V<y;++V){let ee=y>1?O*(p-1)+V*K:.5*(O+E)*(p-1);if(ee<0||ee>p-1){for(let oe=0;oe<h;oe++){let pe=oe+V*$[2]+Z*$[1]+N*$[0];v.values[pe]=u}continue}let Y=Math.round(ee),Q=Math.round(te);for(let oe=0;oe<h;oe++){let pe=oe+Y*S[2]+Q*S[1]+z*S[0],he=oe+V*$[2]+Z*$[1]+N*$[0];v.values[he]=k[pe]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}var PXe={kernelName:nv,backendName:"cpu",kernelFunc:OXe};function MXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;ct(i,"cumprod");let l=W.getAxesPermutation([a],i.shape.length),u=i;l!=null&&(u=Va({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=W.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=zs(u.dtype,"int32"),p=M.makeOnesTypedArray(M.sizeFromShape(u.shape),d),h=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],g=o?(v,b)=>v+m-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=m)for(let b=0;b<m;b++){let _=g(v,b);if(b===0)p[_]=s?1:h[_];else{let k=g(v,b-1);p[_]=s?h[k]*p[k]:h[_]*p[k]}}let y=n.makeTensorInfo(u.shape,d,p);if(l!=null){let v=W.getUndoAxesPermutation(l),b=Va({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(u),b}return y}var AXe={kernelName:tv,backendName:"cpu",kernelFunc:MXe};function RXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;ct(i,"cumsum");let l=W.getAxesPermutation([a],i.shape.length),u=i;l!=null&&(u=Va({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=W.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let d=zs(u.dtype,"int32"),p=M.makeZerosTypedArray(M.sizeFromShape(u.shape),d),h=n.data.get(u.dataId).values,m=u.shape[u.shape.length-1],g=o?(v,b)=>v+m-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=m)for(let b=0;b<m;b++){let _=g(v,b);if(b===0)p[_]=s?0:h[_];else{let k=g(v,b-1);p[_]=s?h[k]+p[k]:h[_]+p[k]}}let y=n.makeTensorInfo(u.shape,d,p);if(l!=null){let v=W.getUndoAxesPermutation(l),b=Va({inputs:{x:y},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(u),b}return y}var DXe={kernelName:ef,backendName:"cpu",kernelFunc:RXe};function LXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s,binaryOutput:o}=r;if(i.shape.length===1){let l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=Ez(l,u,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}else if(i.shape.length===2){let l=n.bufferSync(i),u=n.bufferSync(a),c=sae(l,u,s,o);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var FXe={kernelName:dw,backendName:"cpu",kernelFunc:LXe};function zXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:s}=r;M.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let o=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],d=l*a,p=u*a,h=c/(a*a),m=n.data.get(i.dataId).values,g=new Float32Array(o*d*p*h),y=0;for(let v=0;v<o;++v)for(let b=0;b<d;++b){let _=Math.floor(b/a),k=b%a;for(let S=0;S<p;++S){let $=Math.floor(S/a),N=S%a,P=(k*a+N)*h;for(let D=0;D<h;++D){let O=D+P+c*($+u*(_+l*v));g[y++]=m[O]}}}return n.makeTensorInfo([o,d,p,h],i.dtype,g)}var BXe={kernelName:rv,backendName:"cpu",kernelFunc:zXe};function Qae(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:u}=r;ct([i,a],"depthwiseConv2DNative");let c=M.computeStrides(i.shape),d=M.computeStrides(a.shape),p=l;p==null&&(p=[1,1]),M.assert(W.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=W.computeConv2DInfo(i.shape,a.shape,s,p,o,u,!0),{filterHeight:m,filterWidth:g,dilationHeight:y,dilationWidth:v,padInfo:b}=h,_=b.left,k=b.top,S=h.outChannels/h.inChannels,$=new Br(h.outShape,i.dtype),N=n.data.get(i.dataId).values,P=n.data.get(a.dataId).values,D=$.values;for(let O=0;O<h.batchSize;++O){let F=O*c[0],E=O*$.strides[0];for(let z=0;z<h.outHeight;++z){let q=E+z*$.strides[1],K=z*h.strideHeight-k;for(let Z=0;Z<m;++Z){let te=K+Z*y;if(te<0||te>=h.inHeight)continue;let V=Z*d[0],ee=F+te*c[1];for(let Y=0;Y<h.outWidth;++Y){let Q=q+Y*$.strides[2],oe=Y*h.strideWidth-_;for(let pe=0;pe<g;++pe){let he=oe+pe*v;if(he<0||he>=h.inWidth)continue;let ge=V+pe*d[1],_e=ee+he*h.inChannels,Ne=Q,Se=ge;for(let Re=0;Re<h.inChannels;++Re){let Ke=N[_e+Re];for(let it=0;it<S;++it)D[Ne+it]+=Ke*P[Se+it];Ne+=S,Se+=S}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}var WXe={kernelName:tf,backendName:"cpu",kernelFunc:Qae};function VXe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r;ct([i,a],"depthwiseConv2dNativeBackpropFilter");let d=W.computeConv2DInfo(i.shape,c,s,o,l,u,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,y=new Br(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,_=d.outChannels/d.inChannels,k=n.data.get(i.dataId).values,S=new Br(i.shape,i.dtype,k),$=n.data.get(a.dataId).values,N=new Br(a.shape,a.dtype,$);for(let P=0;P<m;++P){let D=Math.max(0,Math.ceil((b-P)/p)),O=Math.min(d.outHeight,(d.inHeight+b-P)/p);for(let F=0;F<g;++F){let E=Math.max(0,Math.ceil((v-F)/h)),z=Math.min(d.outWidth,(d.inWidth+v-F)/h);for(let q=0;q<d.outChannels;++q){let K=Math.trunc(q/_),Z=q%_,te=0;for(let V=0;V<d.batchSize;++V)for(let ee=D;ee<O;++ee){let Y=P+ee*p-b;for(let Q=E;Q<z;++Q){let oe=F+Q*h-v;te+=S.get(V,Y,oe,K)*N.get(V,ee,Q,q)}}y.set(te,P,F,K,Z)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}var jXe={kernelName:h$,backendName:"cpu",kernelFunc:VXe};function HXe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r;ct([i,a],"depthwiseConv2DNativeBackpropInput");let d=M.computeStrides(i.shape),p=M.computeStrides(a.shape),h=W.computeConv2DInfo(c,a.shape,s,o,l,u,!0),m=new Br(h.inShape,"float32"),g=m.values,[y,v,b]=m.strides,_=n.data.get(i.dataId).values,[k,S,$]=d,N=n.data.get(a.dataId).values,[P,D,O]=p,{batchSize:F,filterHeight:E,filterWidth:z,inChannels:q,inHeight:K,inWidth:Z,outChannels:te,outHeight:V,outWidth:ee,strideHeight:Y,strideWidth:Q}=h,oe=E-1-h.padInfo.top,pe=z-1-h.padInfo.left,he=te/q;for(let ge=0;ge<F;++ge)for(let _e=0;_e<q;++_e)for(let Ne=0;Ne<K;++Ne){let Se=Ne-oe,Re=Math.max(0,Math.ceil(Se/Y)),Ke=Math.min(V,(E+Se)/Y);for(let it=0;it<Z;++it){let Xe=it-pe,at=Math.max(0,Math.ceil(Xe/Q)),He=Math.min(ee,(z+Xe)/Q),_t=0;for(let mt=Re;mt<Ke;++mt){let ht=mt*Y-Se;for(let Lt=at;Lt<He;++Lt){let Un=Lt*Q-Xe,kt=k*ge+S*mt+$*Lt,bn=P*(E-1-ht)+D*(z-1-Un)+O*_e;for(let tn=0;tn<he;++tn){let Mt=_e*he+tn,sr=_[kt+Mt],Rn=N[bn+tn];_t+=sr*Rn}}}g[y*ge+v*Ne+b*it+_e]=_t}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}var UXe={kernelName:f$,backendName:"cpu",kernelFunc:HXe};function GXe(e){let{inputs:t,backend:n}=e,{x:r}=t,i=M.sizeFromShape(r.shape),a=n.data.get(r.dataId).values,s=Gt([i,i],r.dtype),o=s.values;for(let u=0;u<a.length;u++)o[u*i+u]=a[u];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}var qXe={kernelName:pw,backendName:"cpu",kernelFunc:GXe},KXe={kernelName:nf,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i}=e,{strides:a,pad:s,dilations:o}=n,l=t,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(i.dataId).values,p=i.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:_,strideHeight:k,strideWidth:S,filterHeight:$,filterWidth:N,dilationHeight:P,dilationWidth:D,outShape:O}=W.computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",o),F=M.sizeFromShape(O),E=O.length,z=M.getArrayFromDType(r.dtype,F);for(let q=0;q<h;++q)for(let K=0;K<v;++K){let Z=K*k-_.top;for(let te=0;te<b;++te){let V=te*S-_.left;for(let ee=0;ee<y;++ee){let Y=Number.MIN_SAFE_INTEGER;for(let oe=0;oe<$;++oe){let pe=Z+oe*P;if(pe>=0&&pe<m)for(let he=0;he<N;++he){let ge=V+he*D;if(ge>=0&&ge<g){let _e=M.locToIndex([q,pe,ge,ee],c,M.computeStrides(r.shape)),Ne=M.locToIndex([oe,he,ee],p,M.computeStrides(i.shape)),Se=u[_e]+d[Ne];Se>Y&&(Y=Se)}}}let Q=M.locToIndex([q,K,te,ee],E,M.computeStrides(O));z[Q]=Y}}}return{dataId:l.write(M.toTypedArray(z,r.dtype),O,r.dtype),shape:O,dtype:r.dtype}}},ZXe={kernelName:ay,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=n,u=t,c=M.toNestedArray(r.shape,u.data.get(r.dataId).values),d=M.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:_,strideWidth:k,filterHeight:S,filterWidth:$,dilationHeight:N,dilationWidth:P,outShape:D}=W.computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",l);M.assert(a.rank===D.length,()=>`Error in ${ay}, dy must have the same rank as output ${D.length}, but got ${a.rank}`);let O=M.toNestedArray(D,u.data.get(a.dataId).values),F=M.makeZerosNestedTypedArray(i.shape,i.dtype);for(let E=0;E<p;++E)for(let z=0;z<y;++z){let q=z*_-b.top;for(let K=0;K<v;++K){let Z=K*k-b.left;for(let te=0;te<g;++te){let V=Number.MIN_SAFE_INTEGER,ee=0,Y=0;for(let Q=0;Q<S;++Q){let oe=q+Q*N;if(oe>=0&&oe<h)for(let pe=0;pe<$;++pe){let he=Z+pe*P;if(he>=0&&he<m){let ge=c[E][oe][he][te]+d[Q][pe][te];ge>V&&(V=ge,ee=Q,Y=pe)}}}F[ee][Y][te]+=O[E][z][K][te]}}}return{dataId:u.write(M.toTypedArray(F,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},XXe={kernelName:iy,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=n,u=t,c=M.toNestedArray(r.shape,u.data.get(r.dataId).values),d=M.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:_,strideWidth:k,filterHeight:S,filterWidth:$,dilationHeight:N,dilationWidth:P,outShape:D}=W.computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",l);M.assert(a.rank===D.length,()=>`Error in ${iy}, dy must have the same rank as output ${D.length}, but got ${a.rank}`);let O=M.toNestedArray(D,u.data.get(a.dataId).values),F=M.makeZerosNestedTypedArray(r.shape,r.dtype);for(let E=0;E<p;++E)for(let z=0;z<y;++z){let q=z*_-b.top;for(let K=0;K<v;++K){let Z=K*k-b.left;for(let te=0;te<g;++te){let V=Number.MIN_SAFE_INTEGER,ee=q<0?0:q,Y=Z<0?0:Z;for(let Q=0;Q<S;++Q){let oe=q+Q*N;if(oe>=0&&oe<h)for(let pe=0;pe<$;++pe){let he=Z+pe*P;if(he>=0&&he<m){let ge=c[E][oe][he][te]+d[Q][pe][te];ge>V&&(V=ge,ee=oe,Y=he)}}}F[E][ee][Y][te]+=O[E][z][K][te]}}}return{dataId:u.write(M.toTypedArray(F,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function JXe(e){let{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:a,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},u=(l==null?void 0:l.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);let d=a.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);let[p,h]=i.shape.slice(0,2),m=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,y=i.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*p*4);for(let _=0;_<p*h;++_){let k=[0,0,0,255*u];for(let $=0;$<m;$++){let N=g[_*m+$];if(i.dtype==="float32"){if(N<0||N>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${N}.`)}else if(i.dtype==="int32"&&(N<0||N>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${N}.`);m===1?(k[0]=N*y,k[1]=N*y,k[2]=N*y):k[$]=N*y}let S=_*4;v[S+0]=Math.round(k[0]),v[S+1]=Math.round(k[1]),v[S+2]=Math.round(k[2]),v[S+3]=Math.round(k[3])}a.width=h,a.height=p;let b=new ImageData(v,h,p);return d.putImageData(b,0,0),i}var YXe={kernelName:m$,backendName:"cpu",kernelFunc:JXe};function nx(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;ct(i,"sum");let o;i.dtype==="bool"?o=wd({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):o=Ul({inputs:{x:i},backend:n});let l=o.shape.length,u=M.parseAxisParam(a,o.shape),c=W.getAxesPermutation(u,l),d=u,p=o;c!=null&&(p=Va({inputs:{x:o},backend:n,attrs:{perm:c}}),d=W.getInnerMostAxes(d.length,l)),W.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=W.computeOutAndReduceShapes(p.shape,d),g=W.upcastType(p.dtype,"int32"),y=CI(n,h,g),v=M.sizeFromShape(m),b=n.data.get(y.dataId).values,_=n.data.get(p.dataId).values;for(let k=0;k<b.length;++k){let S=k*v,$=0;for(let N=0;N<v;++N)$+=_[S+N];b[k]=$}if(s){let k=W.expandShapeToKeepDim(y.shape,u),S=y;y=Jn({inputs:{x:y},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo(S)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(p),y}var QXe={kernelName:Xf,backendName:"cpu",kernelFunc:nx};function eJe(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:s,summedDims:o,idDims:l}=W.decodeEinsumEquation(i,a.length);W.checkEinsumDimSizes(s.length,l,a);let{path:u,steps:c}=W.getEinsumComputePath(o,l),d=c.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let y of c[g]){let{permutationIndices:v,expandDims:b}=W.getEinsumPermutation(h,l[y]),_;W.isIdentityPermutation(v)?_=a[y]:(_=Va({inputs:{x:a[y]},backend:n,attrs:{perm:v}}),m.push(_));let k=_.shape.slice();for(let S=0;S<b.length;++S)k.splice(b[S],0,1);M.arraysEqual(_.shape,k)||(_=Jn({inputs:{x:_},backend:n,attrs:{shape:k}}),m.push(_)),p===null?p=_:(p=TT({inputs:{a:_,b:p},backend:n}),m.push(p))}g<d-1&&(u[g]>=0&&(p=nx({inputs:{x:p},backend:n,attrs:{axis:u[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var tJe={kernelName:g$,backendName:"cpu",kernelFunc:eJe};function nJe(e){let{inputs:t,backend:n}=e,{dy:r,y:i}=t;ct([r,i],"eluGrad");let a=new Float32Array(M.sizeFromShape(i.shape)),s=n.data.get(i.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let u=s[l];u>=0?a[l]=o[l]:a[l]=o[l]*(u+1)}return n.makeTensorInfo(i.shape,"float32",a)}var rJe={kernelName:iv,backendName:"cpu",kernelFunc:nJe},iJe=W.ERF_P,aJe=W.ERF_A1,sJe=W.ERF_A2,oJe=W.ERF_A3,lJe=W.ERF_A4,uJe=W.ERF_A5,cJe=An(sf,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+iJe*n);return t*(1-((((uJe*r+lJe)*r+oJe)*r+sJe)*r+aJe)*r*Math.exp(-n*n))}),dJe={kernelName:sf,backendName:"cpu",kernelFunc:cJe};function TI(e){let{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:a}=r,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(M.assert(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),Jn({inputs:{x:i},backend:n,attrs:{shape:o}})}var pJe={kernelName:sv,backendName:"cpu",kernelFunc:TI},hJe=Rr((e,t)=>e/t),Vz=ii(rf,hJe),vM={kernelName:rf,backendName:"cpu",kernelFunc:Vz};function ese(e,t,n){let r=e.shape,i=r[0],a=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,u=[i,a],c=M.sizeFromShape(u),d=M.getTypedArrayFromDType("float32",c),p=M.getTypedArrayFromDType("float32",c);for(let y=0;y<i;y++){let v=bh({inputs:{x:o},backend:n,attrs:{begin:[y,0],size:[1,a]}}),b=bh({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,a]}}),_=as({inputs:{real:v,imag:b},backend:n}),{real:k,imag:S}=fJe(_,t,n),$=W.mergeRealAndImagArrays(k,S);for(let N=0;N<a;N++){let P=W.getComplexWithIndex($,N);d[y*a+N]=P.real,p[y*a+N]=P.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(_)}let h=n.makeTensorInfo(u,"float32",d),m=n.makeTensorInfo(u,"float32",p),g=as({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}function fJe(e,t,n){let r=M.sizeFromShape(e.shape),i=n.data.get(e.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(mJe(r)){let o=bM(a,s,r,t,n),l=[e.shape[0],e.shape[1]];if(t){let u=n.makeTensorInfo(l,"float32",o.real),c=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",M.createScalarValue(r,"float32")),p=Ul({inputs:{x:d},backend:n}),h=vM.kernelFunc({inputs:{a:u,b:d},backend:n}),m=vM.kernelFunc({inputs:{a:c,b:p},backend:n}),g=n.data.get(h.dataId).values,y=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),{real:g,imag:y}}return o}else{let o=W.mergeRealAndImagArrays(a,s),l=gJe(o,r,t);return W.splitRealAndImagArrays(l)}}function mJe(e){return(e&e-1)===0}function bM(e,t,n,r,i){if(n===1)return{real:e,imag:t};let a=W.mergeRealAndImagArrays(e,t),s=n/2,o=W.complexWithEvenIndex(a),l=o.real,u=o.imag,c=[l.length],d=i.makeTensorInfo(c,"float32",l),p=i.makeTensorInfo(c,"float32",u),h=as({inputs:{real:d,imag:p},backend:i}),m=W.complexWithOddIndex(a),g=m.real,y=m.imag,v=[g.length],b=i.makeTensorInfo(v,"float32",g),_=i.makeTensorInfo(v,"float32",y),k=as({inputs:{real:b,imag:_},backend:i}),S=bM(l,u,s,r,i),$=S.real,N=S.imag,P=[$.length],D=i.makeTensorInfo(P,"float32",$),O=i.makeTensorInfo(P,"float32",N),F=as({inputs:{real:D,imag:O},backend:i}),E=bM(g,y,s,r,i),z=E.real,q=E.imag,K=[z.length],Z=i.makeTensorInfo(K,"float32",z),te=i.makeTensorInfo(K,"float32",q),V=as({inputs:{real:Z,imag:te},backend:i}),ee=W.exponents(n,r),Y=[ee.real.length],Q=i.makeTensorInfo(Y,"float32",ee.real),oe=i.makeTensorInfo(Y,"float32",ee.imag),pe=as({inputs:{real:Q,imag:oe},backend:i}),he=TT({inputs:{a:pe,b:V},backend:i}),ge=yy({inputs:{a:F,b:he},backend:i}),_e=zz({inputs:{a:F,b:he},backend:i}),Ne=vh({inputs:{input:ge},backend:i}),Se=vh({inputs:{input:_e},backend:i}),Re=vy({inputs:{input:ge},backend:i}),Ke=vy({inputs:{input:_e},backend:i}),it=by({inputs:[Ne,Se],backend:i,attrs:{axis:0}}),Xe=by({inputs:[Re,Ke],backend:i,attrs:{axis:0}}),at=i.data.get(it.dataId).values,He=i.data.get(Xe.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(Z),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(oe),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(he),i.disposeIntermediateTensorInfo(ge),i.disposeIntermediateTensorInfo(_e),i.disposeIntermediateTensorInfo(Ne),i.disposeIntermediateTensorInfo(Re),i.disposeIntermediateTensorInfo(Se),i.disposeIntermediateTensorInfo(Ke),i.disposeIntermediateTensorInfo(it),i.disposeIntermediateTensorInfo(Xe),{real:at,imag:He}}function gJe(e,t,n){let r=new Float32Array(t*2);for(let i=0;i<t;i++){let a=0,s=0;for(let o=0;o<t;o++){let l=W.exponent(i*o,t,n),u=W.getComplexWithIndex(e,o);a+=u.real*l.real-u.imag*l.imag,s+=u.real*l.imag+u.imag*l.real}n&&(a/=t,s/=t),W.assignToTypedArray(r,a,s,i)}return r}function yJe(e){let{inputs:t,backend:n}=e,{input:r}=t,i=M.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Jn({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),l=ese(o,!1,n),u=Jn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}var vJe={kernelName:y$,backendName:"cpu",kernelFunc:yJe};function jz(e){let{backend:t,attrs:n}=e,{shape:r,value:i,dtype:a}=n,s=a||M.inferDtype(i),o=M.getArrayFromDType(s,M.sizeFromShape(r));return wJe(o,i),t.makeTensorInfo(r,s,o)}var bJe={kernelName:hw,backendName:"cpu",kernelFunc:jz};function wJe(e,t,n){e.fill(t)}var xJe={kernelName:ov,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,i=n,a=M.getTypedArrayFromDType(r.dtype,M.sizeFromShape(r.shape)),[s,o,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let d=0;d<s;d++){let p=d*l*o*u;for(let h=0;h<o;h++){let m=h*(l*u);for(let g=0;g<l;g++){let y=g*u;for(let v=0;v<u;v++){let b=Math.round(l-g-1),_=p+m+y+v,k=c[_];if(b>=0&&b<l){let S=b*u,$=p+m+S+v;k=c[$]}a[_]=k}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};function _Je(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=r,g=Yae({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(s){let y=g;if(c==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let v=Jn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=yy({inputs:{a:g,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else g=yy({inputs:{a:g,b:s},backend:n});n.disposeIntermediateTensorInfo(y)}if(h){let y=g;if(c==="NCHW"&&h==="prelu"&&o.shape.length===1&&o.shape[0]!==1){let v=Jn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=$I(n,g,h,v,m),n.disposeIntermediateTensorInfo(v)}else g=$I(n,g,h,o,m);n.disposeIntermediateTensorInfo(y)}return g}var kJe={kernelName:ah,backendName:"cpu",kernelFunc:_Je};function SJe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=r,g=Qae({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p}});if(s){let y=g;g=yy({inputs:{a:g,b:s},backend:n}),n.disposeIntermediateTensorInfo(y)}if(h){let y=g;g=$I(n,g,h,o,m),n.disposeIntermediateTensorInfo(y)}return g}var CJe={kernelName:sh,backendName:"cpu",kernelFunc:SJe};function IJe(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=M.sizeFromShape(r.shape),s=i.shape,o=s[s.length-1],[l,u,c,d]=W.prepareAndValidate(r,i);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);let p=n.data.get(i.dataId).values,h=n.bufferSync(r),m=gae(p,h,r.dtype,u,o,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,m.values)}var $Je={kernelName:uv,backendName:"cpu",kernelFunc:IJe};function TJe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:s,batchDims:o}=r;ct([i,a],"gatherV2");let l=M.parseAxisParam(s,i.shape)[0],u=n.data.get(a.dataId).values,c=i.shape[l];for(let k=0;k<u.length;++k){let S=u[k];M.assert(S<=c-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${c-1}]`)}let d=o;o==null&&(d=0);let p=M.sizeFromShape(a.shape),h=W.segment_util.collectGatherOpShapeInfo(i,a,l,d),m=Jn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=Jn({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,p/h.batchSize]}}),y=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],v=n.bufferSync(g),b=n.bufferSync(m),_=yae(b,v,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,_.dtype,_.values)}var NJe={kernelName:lv,backendName:"cpu",kernelFunc:TJe};function EJe(e){let{inputs:t,backend:n}=e,{input:r}=t,i=M.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],s=i/a,o=Jn({inputs:{x:r},backend:n,attrs:{shape:[s,a]}}),l=ese(o,!0,n),u=Jn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}var OJe={kernelName:v$,backendName:"cpu",kernelFunc:EJe},PJe=An(ff,e=>Number.isFinite(e)?1:0,"bool"),MJe={kernelName:ff,backendName:"cpu",kernelFunc:PJe},AJe=An(mf,e=>Math.abs(e)===1/0?1:0,"bool"),RJe={kernelName:mf,backendName:"cpu",kernelFunc:AJe},DJe=An(gf,e=>Number.isNaN(e)?1:0,"bool"),LJe={kernelName:gf,backendName:"cpu",kernelFunc:DJe};function FJe(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,s=_ae(r,i,a);return t.makeTensorInfo([s.length],"float32",s)}var zJe={kernelName:hv,backendName:"cpu",kernelFunc:FJe},BJe=An(bf,e=>Math.log1p(e)),WJe={kernelName:bf,backendName:"cpu",kernelFunc:BJe},VJe=Rr((e,t)=>e&&t),jJe=ii(fv,VJe,null,"bool"),HJe={kernelName:fv,backendName:"cpu",kernelFunc:jJe},UJe=An(mv,e=>e?0:1,"bool"),GJe={kernelName:mv,backendName:"cpu",kernelFunc:UJe},qJe=Rr((e,t)=>e||t),KJe=ii(gv,qJe,null,"bool"),ZJe={kernelName:gv,backendName:"cpu",kernelFunc:KJe};function XJe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:s,alpha:o,beta:l}=r;ct(i,"LRN");let u=i.shape[3],c=u-1,d=n.data.get(i.dataId).values,p=M.sizeFromShape(i.shape),h=new Float32Array(p);function m(g){let y=g%u,v=g-y+Math.max(0,y-a),b=g-y+Math.min(y+a,c),_=0;for(;v<=b;v++){let k=d[v];_+=k*k}return _}for(let g=0;g<p;g++){let y=m(g),v=d[g]*Math.pow(s+o*y,-l);h[g]=v}return n.makeTensorInfo(i.shape,i.dtype,h)}var JJe={kernelName:wf,backendName:"cpu",kernelFunc:XJe};function YJe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:s}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=r;ct(s,"LRNGrad");let d=M.sizeFromShape(s.shape),p=s.shape[3],h=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=n.data.get(a.dataId).values,y=new Float32Array(d),v=d;for(let b=0;b<v;b++){let _=b%p,k=b-_+Math.max(0,_-o),S=b-_+Math.min(p,_+o+1),$=0;for(let N=k;N<S;N++)$+=Math.pow(m[N],2);$=u*$+l;for(let N=k;N<S;N++){let P=-2*u*c*m[N]*g[b]/$;b===N&&(P+=Math.pow($,-c)),P*=h[b],y[N]+=P}}return n.makeTensorInfo(s.shape,i.dtype,y)}var QJe={kernelName:yv,backendName:"cpu",kernelFunc:YJe};function tse(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:s}=r,o=n,l=i.shape,u=l.length,c=M.parseAxisParam(a,l),d=c,p=W.getAxesPermutation(d,u),h=o.data.get(i.dataId).values;if(p!=null){let k=new Array(u);for(let S=0;S<k.length;S++)k[S]=l[p[S]];h=Mz(h,l,i.dtype,p,k),d=W.getInnerMostAxes(d.length,u),l=k}ct(i,"max"),W.assertAxesAreInnerMostDims("max",d,u);let[m,g]=W.computeOutAndReduceShapes(l,d),y=M.sizeFromShape(g),v=Sae(h,y,m,i.dtype),b=o.write(v,m,i.dtype),_=m;return s&&(_=W.expandShapeToKeepDim(m,c)),{dataId:b,shape:_,dtype:i.dtype}}var eYe={kernelName:xf,backendName:"cpu",kernelFunc:tse};function tYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;ct(i,"maxPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,u=1;M.assert(W.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=W.computePool2DInfo(i.shape,a,s,u,o,l),d;if(c.filterWidth===1&&c.filterHeight===1&&M.arraysEqual(c.inShape,c.outShape))d=Ul({inputs:{x:i},backend:n});else{let p=n.data.get(i.dataId).values,h=M.computeStrides(i.shape),m=Wz(p,i.shape,i.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,i.dtype,m.values)}return d}var nYe={kernelName:kf,backendName:"cpu",kernelFunc:tYe};function rYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=r;ct(i,"maxPool3d");let c=W.computePool3DInfo(i.shape,a,s,1,o,l,u),d=n.data.get(i.dataId).values,p=Jae(d,i.shape,i.dtype,M.computeStrides(i.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}var iYe={kernelName:vv,backendName:"cpu",kernelFunc:rYe};function aYe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r;ct([i,a],"maxPool3DGrad");let c=W.computePool3DInfo(a.shape,s,o,1,l,u),d=n.bufferSync(a),p=qZe(d,c),h=c.strideDepth,m=c.strideHeight,g=c.strideWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,_=c.effectiveFilterDepth,k=c.effectiveFilterHeight,S=c.effectiveFilterWidth,$=_-1-c.padInfo.front,N=S-1-c.padInfo.left,P=k-1-c.padInfo.top,D=Gt(a.shape,"float32"),O=n.bufferSync(i);for(let F=0;F<c.batchSize;++F)for(let E=0;E<c.inChannels;++E)for(let z=0;z<c.inDepth;++z)for(let q=0;q<c.inHeight;++q)for(let K=0;K<c.inWidth;++K){let Z=z-$,te=q-P,V=K-N,ee=0;for(let Y=0;Y<_;Y+=y){let Q=(Z+Y)/h;if(!(Q<0||Q>=c.outDepth||Math.floor(Q)!==Q))for(let oe=0;oe<k;oe+=v){let pe=(te+oe)/m;if(!(pe<0||pe>=c.outHeight||Math.floor(pe)!==pe))for(let he=0;he<S;he+=b){let ge=(V+he)/g;if(ge<0||ge>=c.outWidth||Math.floor(ge)!==ge)continue;let _e=_*k*S-1-p.get(F,Q,pe,ge,E),Ne=Y*k*S+oe*S+he,Se=_e===Ne?1:0;if(Se===0)continue;let Re=O.get(F,Q,pe,ge,E);ee+=Re*Se}}}D.set(ee,F,z,q,K,E)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}var sYe={kernelName:mw,backendName:"cpu",kernelFunc:aYe};function oYe(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:s}=t,o=a;ct([a,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=W.computePool2DInfo(o.shape,l,u,1,c,d),h=n.data.get(o.dataId).values,m=Gt(p.outShape,o.dtype,Xae(h,o.shape,o.dtype,p).values),g=p.strideHeight,y=p.strideWidth,v=p.dilationHeight,b=p.dilationWidth,_=p.effectiveFilterHeight,k=p.effectiveFilterWidth,S=k-1-p.padInfo.left,$=_-1-p.padInfo.top,N=Gt(o.shape,"float32"),P=n.data.get(i.dataId).values,D=Gt(i.shape,"float32",P);for(let O=0;O<p.batchSize;++O)for(let F=0;F<p.inChannels;++F)for(let E=0;E<p.inHeight;++E)for(let z=0;z<p.inWidth;++z){let q=E-$,K=z-S,Z=0;for(let te=0;te<_;te+=v){let V=(q+te)/g;if(!(V<0||V>=p.outHeight||Math.floor(V)!==V))for(let ee=0;ee<k;ee+=b){let Y=(K+ee)/y;if(Y<0||Y>=p.outWidth||Math.floor(Y)!==Y)continue;let Q=_*k-1-m.get(O,V,Y,F),oe=te*k+ee,pe=Q===oe?1:0;if(pe===0)continue;let he=D.get(O,V,Y,F);Z+=he*pe}}N.set(Z,O,E,z,F)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}var lYe={kernelName:fw,backendName:"cpu",kernelFunc:oYe};function uYe(e,t,n,r,i){let a=M.computeStrides(t),s=Wz(e,t,n,a,i,"max"),o=Xae(e,t,n,i,!0,r);return[s.values,o.values]}var cYe={kernelName:gw,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=t,l=n;ct(r,"MaxPoolWithArgmax");let u=l.data.get(r.dataId).values,c=W.computePool2DInfo(r.shape,i,a,[1,1],s),[d,p]=uYe(u,r.shape,r.dtype,o,c),h=l.write(d,c.outShape,r.dtype),m=l.write(p,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:m,shape:c.outShape,dtype:"int32"}]}};function dYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=M.parseAxisParam(a,i.shape),l=W.computeOutAndReduceShapes(i.shape,o)[1],u=M.sizeFromShape(l),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(d);let p=wd({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});c.push(p);let h=Vz({inputs:{a:p,b:d},backend:n});c.push(h);let m=nx({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:s}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var pYe={kernelName:Sf,backendName:"cpu",kernelFunc:dYe};function hYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;ct(i,"min");let o=M.parseAxisParam(a,i.shape),l=o,u=W.getAxesPermutation(l,i.shape.length),c=i;u!=null&&(c=Va({inputs:{x:i},backend:n,attrs:{perm:u}}),l=W.getInnerMostAxes(l.length,i.shape.length)),W.assertAxesAreInnerMostDims("min",l,c.shape.length);let[d,p]=W.computeOutAndReduceShapes(c.shape,l),h=M.sizeFromShape(p),m=M.makeZerosTypedArray(M.sizeFromShape(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<m.length;++v){let b=v*h,_=g[b];for(let k=0;k<h;++k){let S=g[b+k];(Number.isNaN(S)||S<_)&&(_=S)}m[v]=_}u!=null&&n.disposeIntermediateTensorInfo(c);let y=n.makeTensorInfo(d,c.dtype,m);if(s){let v=W.expandShapeToKeepDim(d,o),b=Jn({inputs:{x:y},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(y),b}return y}var fYe={kernelName:Cf,backendName:"cpu",kernelFunc:hYe};function mYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,mode:s}=r;ct(i,"mirrorPad");let o=a.map((b,_)=>b[0]+i.shape[_]+b[1]),l=a.map(b=>b[0]),u=a.map((b,_)=>b[0]+i.shape[_]),c=s==="reflect"?0:1,d=n.data.get(i.dataId).values,p=i.shape.length,h=M.computeStrides(i.shape),m=M.sizeFromShape(o),g=o.length,y=M.computeStrides(o),v=M.getTypedArrayFromDType(i.dtype,m);for(let b=0;b<m;b++){let _=M.indexToLoc(b,g,y);for(let S=0;S<g;S++)_[S]<l[S]?_[S]=l[S]*2-_[S]-c:_[S]>=u[S]&&(_[S]=(u[S]-1)*2-_[S]+c);_=_.map((S,$)=>S-l[$]);let k=M.locToIndex(_,p,h);v[b]=d[k]}return{dataId:n.write(v,o,i.dtype),shape:o,dtype:i.dtype}}var gYe={kernelName:$f,backendName:"cpu",kernelFunc:mYe},yYe=Rr((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),vYe=ii(Tf,yYe),bYe={kernelName:Tf,backendName:"cpu",kernelFunc:vYe},wYe=Od(o$());function nse(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,s=i.shape.length,o=a;if(o===-1&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);let l=M.parseAxisParam([o],i.shape),u=tse({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=W.expandShapeToKeepDim(u.shape,l),d=Jn({inputs:{x:u},backend:n,attrs:{shape:c}}),p=zz({inputs:{a:i,b:d},backend:n}),h=pae({inputs:{x:p},backend:n}),m=nx({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),g=Jn({inputs:{x:m},backend:n,attrs:{shape:c}}),y=Vz({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}var xYe={kernelName:Jf,backendName:"cpu",kernelFunc:nse};function _Ye(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:s,normalized:o}=r;ct(i,"multinomial");let l=o?i:nse({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,p=[u,a],h=M.makeZerosTypedArray(M.sizeFromShape(p),"int32");for(let m=0;m<u;++m){let g=m*c,y=new Float32Array(c-1);y[0]=d[g];for(let _=1;_<y.length;++_)y[_]=y[_-1]+d[g+_];let v=wYe.alea(s.toString()),b=m*a;for(let _=0;_<a;++_){let k=v();h[b+_]=y.length;for(let S=0;S<y.length;S++)if(k<y[S]){h[b+_]=S;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",h)}var kYe={kernelName:bv,backendName:"cpu",kernelFunc:_Ye},SYe=Yl.nonMaxSuppressionV3Impl;function CYe(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;ct(i,"NonMaxSuppression");let u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,{selectedIndices:d}=SYe(u,c,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var IYe={kernelName:_v,backendName:"cpu",kernelFunc:CYe},$Ye=Yl.nonMaxSuppressionV4Impl;function TYe(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;ct(i,"NonMaxSuppressionPadded");let c=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:p,validOutputs:h}=$Ye(c,d,s,o,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var NYe={kernelName:kv,backendName:"cpu",kernelFunc:TYe},EYe=Yl.nonMaxSuppressionV5Impl;function OYe(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;ct(i,"NonMaxSuppressionWithScore");let c=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=s,h=o,m=l,g=u,{selectedIndices:y,selectedScores:v}=EYe(c,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var PYe={kernelName:Sv,backendName:"cpu",kernelFunc:OYe};function MYe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:s,onValue:o,offValue:l}=r;ct(i,"oneHot");let u=M.sizeFromShape(i.shape),c=new Float32Array(u*s);c.fill(l);let d=n.data.get(i.dataId).values;for(let p=0;p<u;++p)d[p]>=0&&d[p]<s&&(c[p*s+d[p]]=o);return n.makeTensorInfo([...i.shape,s],a,c)}var AYe={kernelName:Ef,backendName:"cpu",kernelFunc:MYe};function NI(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){let i=vh({inputs:{input:r},backend:n}),a=NI({inputs:{x:i},backend:n}),s=vy({inputs:{input:r},backend:n}),o=NI({inputs:{x:s},backend:n}),l=as({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return jz({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var RYe={kernelName:jv,backendName:"cpu",kernelFunc:NI};function rse(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){let i=vh({inputs:{input:r},backend:n}),a=rse({inputs:{x:i},backend:n}),s=vy({inputs:{input:r},backend:n}),o=NI({inputs:{x:s},backend:n}),l=as({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return jz({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}var DYe={kernelName:Cv,backendName:"cpu",kernelFunc:rse};function ise(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return TI({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let a=t[0].shape,s=t[0].dtype;t.forEach(c=>{M.assertShapesMatch(a,c.shape,"All tensors passed to stack must have matching shapes"),M.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=TI({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(d),d}),u=by({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}var LYe={kernelName:Iv,backendName:"cpu",kernelFunc:ise};function FYe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:s}=r;ct(i,"pad");let o=a.map((v,b)=>v[0]+i.shape[b]+v[1]),l=a.map(v=>v[0]),u=n.data.get(i.dataId).values,c=M.sizeFromShape(i.shape),d=i.shape.length,p=M.computeStrides(i.shape),h=M.sizeFromShape(o),m=o.length,g=M.computeStrides(o),y=M.getTypedArrayFromDType(i.dtype,h);s!==0&&y.fill(s);for(let v=0;v<c;v++){let b=M.indexToLoc(v,d,p).map((k,S)=>k+l[S]),_=M.locToIndex(b,m,g);y[_]=u[v]}return{dataId:n.write(y,o,i.dtype),shape:o,dtype:i.dtype}}var ase={kernelName:Of,backendName:"cpu",kernelFunc:FYe},zYe=Rr((e,t)=>Math.pow(e,t)),BYe=ii(Pf,zYe),WYe={kernelName:Pf,backendName:"cpu",kernelFunc:BYe};function VYe(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=t,o=i.map(y=>n.data.get(y.dataId).values),l=i.map(y=>y.shape),u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values,[d,p,h]=Eae(o,l,u,a.shape,a.dtype,c,s.shape),m=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(h,a.dtype,p);return m.concat([g])}var jYe={kernelName:w$,backendName:"cpu",kernelFunc:VYe};function HYe(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=Oae(s,r.shape,r.dtype,o,i.shape,l,a.shape),d=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([c.length],r.dtype,c);return[d,p]}var UYe={kernelName:x$,backendName:"cpu",kernelFunc:HYe};function GYe(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,p=o.map(y=>n.data.get(y.dataId).values),h=o.map(y=>y.shape),[m,g]=Pae(u,i.shape,c,a.shape,a.dtype,d,s.shape,p,h,l);return n.makeTensorInfo(m,a.dtype,g)}var qYe={kernelName:_$,backendName:"cpu",kernelFunc:GYe};function KYe(e){let{backend:t,attrs:n}=e,{start:r,stop:i,dtype:a,step:s}=n,o=Az(r,i,s,a);return t.makeTensorInfo([o.length],a,o)}var ZYe={kernelName:yw,backendName:"cpu",kernelFunc:KYe},XYe=An(Rf,e=>1/e),JYe={kernelName:Rf,backendName:"cpu",kernelFunc:XYe};function YYe(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r;ct(i,"resizeBilinear");let l=M.computeStrides(i.shape),[u,c]=o,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(M.sizeFromShape([d,u,c,m])),v=[a&&u>1?p-1:p,a&&c>1?h-1:h],b=[a&&u>1?u-1:u,a&&c>1?c-1:c],_=0,k=v[0]/b[0],S=v[1]/b[1];for(let $=0;$<d;$++)for(let N=0;N<u;N++){let P;s?P=k*(N+.5)-.5:P=k*N;let D=Math.max(0,Math.floor(P)),O=P-D,F=Math.min(p-1,Math.ceil(P)),E=$*l[0]+D*l[1],z=$*l[0]+F*l[1];for(let q=0;q<c;q++){let K;s?K=S*(q+.5)-.5:K=S*q;let Z=Math.max(0,Math.floor(K)),te=K-Z,V=Math.min(h-1,Math.ceil(K)),ee=E+Z*l[2],Y=z+Z*l[2],Q=E+V*l[2],oe=z+V*l[2];for(let pe=0;pe<m;pe++){let he=g[ee+pe],ge=g[Y+pe],_e=g[Q+pe],Ne=g[oe+pe],Se=he+(_e-he)*te,Re=ge+(Ne-ge)*te,Ke=Se+(Re-Se)*O;y[_++]=Ke}}}return n.makeTensorInfo([d,u,c,m],"float32",y)}var QYe={kernelName:Ff,backendName:"cpu",kernelFunc:YYe};function eQe(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r;ct([a,i],"resizeBilinearGrad");let o=M.computeStrides(i.shape),[l,u,c,d]=i.shape,[,p,h]=a.shape,m=new Float32Array(l*u*c*d),g=[s&&p>1?u-1:u,s&&h>1?c-1:c],y=[s&&p>1?p-1:p,s&&h>1?h-1:h],v=g[0]/y[0],b=g[1]/y[1],_=n.data.get(a.dataId).values,k=0;for(let S=0;S<l;S++){let $=S*o[0];for(let N=0;N<p;N++){let P=N*v,D=Math.floor(P),O=Math.min(Math.ceil(P),u-1),F=$+D*o[1],E=$+O*o[1],z=P-D,q=1-z;for(let K=0;K<h;K++){let Z=K*b,te=Math.floor(Z),V=Math.min(Math.ceil(Z),c-1),ee=Z-te,Y=1-ee,Q=F+te*o[2],oe=F+V*o[2],pe=E+te*o[2],he=E+V*o[2],ge=q*Y,_e=q*ee,Ne=z*Y,Se=z*ee;for(let Re=0;Re<d;Re++){let Ke=_[k++];m[Q+Re]+=Ke*ge,m[oe+Re]+=Ke*_e,m[pe+Re]+=Ke*Ne,m[he+Re]+=Ke*Se}}}}return n.makeTensorInfo([l,c,u,d],"float32",m)}var tQe={kernelName:Nv,backendName:"cpu",kernelFunc:eQe};function nQe(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r;ct(i,"resizeNearestNeighbor");let l=M.computeStrides(i.shape),[u,c]=o,[d,p,h,m]=i.shape,g=n.data.get(i.dataId).values,y=new Float32Array(d*u*c*m),v=[a&&u>1?p-1:p,a&&c>1?h-1:h],b=[a&&u>1?u-1:u,a&&c>1?c-1:c],_=v[0]/b[0],k=v[1]/b[1],S=0;for(let $=0;$<d;$++){let N=$*l[0];for(let P=0;P<u;P++){let D=s?_*(P+.5):_*P,O=Math.min(p-1,a?Math.round(D):Math.floor(D));s&&(O=Math.max(0,O));let F=N+O*l[1];for(let E=0;E<c;E++){let z=s?k*(E+.5):k*E,q=Math.min(h-1,a?Math.round(z):Math.floor(z));s&&(q=Math.max(0,q));let K=F+q*l[2];for(let Z=0;Z<m;Z++){let te=g[K+Z];y[S++]=te}}}}return n.makeTensorInfo([d,u,c,m],i.dtype,y)}var rQe={kernelName:Lf,backendName:"cpu",kernelFunc:nQe};function iQe(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r;ct([a,i],"resizeNearestNeighborGrad");let o=M.computeStrides(i.shape),l=M.computeStrides(a.shape),[u,c,d,p]=i.shape,[,h,m]=a.shape,g=new Float32Array(u*c*d*p),y=n.data.get(a.dataId).values,v=[s&&h>1?c-1:c,s&&m>1?d-1:d],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],_=v[0]/b[0],k=v[1]/b[1],S=1/_,$=1/k,N=Math.ceil(S)*2+2,P=Math.ceil($)*2+2;for(let D=0;D<u;D++){let O=D*o[0];for(let F=0;F<c;F++){let E=O+F*o[1],z=Math.floor(F*S),q=Math.floor(z-N/2);for(let K=0;K<d;K++){let Z=E+K*o[2],te=Math.floor(K*$),V=Math.floor(te-P/2);for(let ee=0;ee<p;ee++){let Y=0;for(let Q=0;Q<N;Q++){let oe=Q+q;if(oe<0||oe>=h)continue;let pe=O+oe*l[1],he=oe*_,ge=Math.min(c-1,s?Math.round(he):Math.floor(he));if(F===ge)for(let _e=0;_e<P;_e++){let Ne=_e+V;if(Ne<0||Ne>=m)continue;let Se=pe+Ne*l[2],Re=Ne*k,Ke=Math.min(d-1,s?Math.round(Re):Math.floor(Re));K===Ke&&(Y+=y[Se+ee])}}g[Z+ee]=Y}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}var aQe={kernelName:Tv,backendName:"cpu",kernelFunc:iQe};function sQe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r;ct(i,"reverse");let s=i.shape.length,o=M.parseAxisParam(a,i.shape);if(s===0)return Ul({inputs:{x:i},backend:n});let l=new Br(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){let d=l.indexToLoc(c),p=d.slice();o.forEach(h=>p[h]=i.shape[h]-1-p[h]),l.set(u.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}var oQe={kernelName:Bf,backendName:"cpu",kernelFunc:sQe},lQe={kernelName:Hv,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:a,center:s}=t,o=n,l=M.getTypedArrayFromDType(r.dtype,M.sizeFromShape(r.shape)),[u,c,d,p]=r.shape,[h,m]=W.getImageCenter(s,c,d),g=255,y=Math.sin(i),v=Math.cos(i),b=o.data.get(r.dataId).values;for(let _=0;_<u;_++){let k=_*d*c*p;for(let S=0;S<c;S++){let $=S*(d*p);for(let N=0;N<d;N++){let P=N*p;for(let D=0;D<p;D++){let O=[u,S,N,D],F=O[2],E=O[1],z=(F-h)*v-(E-m)*y,q=(F-h)*y+(E-m)*v;z=Math.round(z+h),q=Math.round(q+m);let K=a;if(typeof a!="number"&&(D===3?K=g:K=a[D]),z>=0&&z<d&&q>=0&&q<c){let te=q*(d*p),V=z*p,ee=k+te+V+D;K=b[ee]}let Z=k+$+P+D;l[Z]=K}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},uQe=An(Wf,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),cQe={kernelName:Wf,backendName:"cpu",kernelFunc:uQe};function dQe(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=W.calculateShapes(a,i,s),p=!0,h=n.bufferSync(i),m=n.bufferSync(a),g=Np(h,m,s,d,u,l,o,c,0,p);return n.makeTensorInfo(s,g.dtype,g.values)}var pQe={kernelName:Ev,backendName:"cpu",kernelFunc:dQe};function hQe(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function fQe(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}function mQe(e,t,n,r,i,a){let s=M.getArrayFromDType("int32",n*i);for(let o=0;o<n;++o){let l=e.slice(o*r,(o+1)*r),u=o*i;for(let c=0;c<i;++c)s[u+c]=a==="left"?hQe(l,t[c+u]):fQe(l,t[c+u])}return s}function gQe(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:s}=r,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,u=mQe(o,l,i.shape[0],i.shape[1],a.shape[1],s);return n.makeTensorInfo(a.shape,"int32",u)}var yQe={kernelName:Pv,backendName:"cpu",kernelFunc:gQe};function vQe(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t;ct([r,i,a],"select");let s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=zs(i.dtype,a.dtype),d=M.makeZerosTypedArray(M.sizeFromShape(i.shape),c),p=0,h=s===0||s>1||i.shape.length===1?1:M.sizeFromShape(i.shape.slice(1));for(let m=0;m<o.length;m++)for(let g=0;g<h;g++)o[m]===1?d[p++]=l[m]:d[p++]=u[m];return n.makeTensorInfo(i.shape,c,d)}var bQe={kernelName:Mv,backendName:"cpu",kernelFunc:vQe},wQe=W.SELU_SCALEALPHA,xQe=W.SELU_SCALE,_Qe=An(jf,e=>e>=0?xQe*e:wQe*(Math.exp(e)-1)),kQe={kernelName:jf,backendName:"cpu",kernelFunc:_Qe},SQe=An(Gf,e=>e<0?-1:e>0?1:0),CQe={kernelName:Gf,backendName:"cpu",kernelFunc:SQe},IQe=An(Hf,e=>Math.sin(e)),$Qe={kernelName:Hf,backendName:"cpu",kernelFunc:IQe},TQe=An(Uf,e=>Math.sinh(e)),NQe={kernelName:Uf,backendName:"cpu",kernelFunc:TQe},EQe=11920928955078125e-23,DU=Math.log(EQe)+2,OQe=An(Kf,e=>{let t=e>-DU,n=e<DU,r=Math.exp(e),i;return n?i=r:t?i=e:i=Math.log(1+r),i}),PQe={kernelName:Kf,backendName:"cpu",kernelFunc:OQe};function MQe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:s}=r;ct([i],"spaceToBatchND");let o=M.sizeFromShape(a),l=[[0,0]];l.push(...s);for(let y=1+a.length;y<i.shape.length;++y)l.push([0,0]);let u=ase.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=W.getReshaped(u.shape,a,o,!1),d=W.getPermuted(c.length,a.length,!1),p=W.getReshapedPermuted(u.shape,a,o,!1),h=Jn({inputs:{x:u},backend:n,attrs:{shape:c}}),m=Va({inputs:{x:h},backend:n,attrs:{perm:d}}),g=Jn({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}var AQe={kernelName:Rv,backendName:"cpu",kernelFunc:MQe};function RQe(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=t;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let o=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(s.dataId).values[0],[d,p,h,m,g]=Rae(o,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}var DQe={kernelName:vw,backendName:"cpu",kernelFunc:RQe};function LQe(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=Array.from(n.data.get(i.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[u,c,d]=Dae(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}var FQe={kernelName:Lv,backendName:"cpu",kernelFunc:LQe};function zQe(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=Rz(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}var BQe={kernelName:bw,backendName:"cpu",kernelFunc:zQe};function WQe(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[u,c]=Rz(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}var VQe={kernelName:ww,backendName:"cpu",kernelFunc:WQe};function jQe(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=W.calculateShapes(a,i,o),h=!1,m=n.bufferSync(i),g;switch(a.dtype){case"bool":{let y=n.bufferSync(a),v=!!n.data.get(s.dataId).values[0];g=Np(m,y,o,p,c,u,l,d,v,h);break}case"float32":{let y=n.bufferSync(a),v=n.data.get(s.dataId).values[0];g=Np(m,y,o,p,c,u,l,d,v,h);break}case"int32":{let y=n.bufferSync(a),v=n.data.get(s.dataId).values[0];g=Np(m,y,o,p,c,u,l,d,v,h);break}case"string":{let y=n.bufferSync(a),v=M.decodeString(n.data.get(s.dataId).values[0]);g=Np(m,y,o,p,c,u,l,d,v,h);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(o,g.dtype,g.values)}var HQe={kernelName:Fv,backendName:"cpu",kernelFunc:jQe};function UQe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:s}=r,o=M.parseAxisParam(s,i.shape)[0],l=W.prepareSplitSize(i,a,o),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(d=>{let p=[...c];p[o]=d;let h=bh({inputs:{x:i},backend:n,attrs:{begin:u,size:p}});return u[o]+=d,h})}var GQe={kernelName:Dv,backendName:"cpu",kernelFunc:UQe},qQe={kernelName:xw,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e,r=t;ct(n,"square");let i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){let o=i[s];a[s]=o*o}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},KQe=An(Rd,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),ZQe={kernelName:Rd,backendName:"cpu",kernelFunc:KQe};function XQe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r;ct(i,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:_,strides:k}=ti.sliceInfo(i.shape,a,s,o,l,u,c,d,p),S;if(g)S=Jn({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||v){M.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let $=ti.computeOutShape(b,_,k),N=bh({inputs:{x:i},backend:n,attrs:{begin:b,size:$}});S=Jn({inputs:{x:N},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(N)}else{let $=n.bufferSync(i),N=zae(h,$,k,b);S=n.makeTensorInfo(m,N.dtype,N.values)}return S}var JQe={kernelName:zv,backendName:"cpu",kernelFunc:XQe};function YQe(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,p=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[m,g]=Dz(p,h,i,a,s,o,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var QQe={kernelName:kw,backendName:"cpu",kernelFunc:YQe};function eet(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=n.data.get(a.dataId).values,l=n.data.get(s.dataId).values[0],[u,c,d]=Lz(o,l,i),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var tet={kernelName:Sw,backendName:"cpu",kernelFunc:eet};function net(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let s=n.data.get(a.dataId).values,o=Fz(s,i);return n.makeTensorInfo(a.shape,"int32",o)}var ret={kernelName:Cw,backendName:"cpu",kernelFunc:net},iet=An(em,e=>Math.tan(e)),aet={kernelName:em,backendName:"cpu",kernelFunc:iet},set=An(tm,e=>Math.tanh(e)),oet={kernelName:tm,backendName:"cpu",kernelFunc:set};function uet(e){let{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:a}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:u,outputSize:c}=W.calculateShapes(a,i,r.shape),d=!1,p=n.bufferSync(i),h=n.bufferSync(a),m=n.bufferSync(r),g=Np(p,h,r.shape,c,l,o,s,u,m,d);return n.makeTensorInfo(r.shape,g.dtype,g.values)}var cet={kernelName:Ov,backendName:"cpu",kernelFunc:uet};function det(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;ct(i,"tile");let s=Wae(n.bufferSync(i),a);return n.makeTensorInfo(s.shape,s.dtype,s.values)}var pet={kernelName:Ad,backendName:"cpu",kernelFunc:det};function het(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:s}=r;ct(i,"topk");let o=n.data.get(i.dataId).values,[l,u]=jae(o,i.shape,i.dtype,a,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}var fet={kernelName:Bv,backendName:"cpu",kernelFunc:het};function met(e){let{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:a}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=n,[c,d,p,h]=i.shape,[m,g]=u!=null?u:[d,p],y=[c,m,g,h],v=M.computeStrides(i.shape),b=v[0],_=v[1],k=v[2],S=M.computeStrides(y),$=S[0],N=S[1],P=S[2],D=M.getTypedArrayFromDType(i.dtype,M.sizeFromShape(y));D.fill(l);let O=r.data.get(i.dataId).values,F=r.data.get(a.dataId).values;for(let E=0;E<c;++E){let z=a.shape[0]===1?F:F.subarray(E*8,E*8+8);for(let q=0;q<m;++q)for(let K=0;K<g;++K)for(let Z=0;Z<h;++Z){let te,V=z[6]*K+z[7]*q+1;if(V===0)continue;let ee=(z[0]*K+z[1]*q+z[2])/V,Y=(z[3]*K+z[4]*q+z[5])/V,Q=LU(ee,p,o),oe=LU(Y,d,o);switch(s){case"nearest":te=xet(O,d,p,b,_,k,E,oe,Q,Z,l);break;case"bilinear":te=_et(O,d,p,b,_,k,E,oe,Q,Z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let pe=E*$+q*N+K*P+Z;D[pe]=te}return r.makeTensorInfo(y,i.dtype,D)}return{dataId:r.write(D,y,i.dtype),shape:i.shape,dtype:i.dtype}}var get={kernelName:Wv,backendName:"cpu",kernelFunc:met};function LU(e,t,n){switch(n){case"reflect":return yet(e,t);case"wrap":return vet(e,t);case"nearest":return wet(e,t);case"constant":default:return bet(e)}}function yet(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{let r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return M.clamp(0,n,t-1)}function vet(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{let r=t-1;n-=t*Math.trunc(n/r)}return M.clamp(0,n,t-1)}function bet(e,t){return e}function wet(e,t){return M.clamp(0,e,t-1)}function pb(e,t,n,r,i,a,s,o,l,u,c){let d=s*r+o*i+l*a+u;return 0<=o&&o<t&&0<=l&&l<n?e[d]:c}function xet(e,t,n,r,i,a,s,o,l,u,c){let d=Math.round(o),p=Math.round(l);return pb(e,t,n,r,i,a,s,d,p,u,c)}function _et(e,t,n,r,i,a,s,o,l,u,c){let d=Math.floor(o),p=Math.floor(l),h=d+1,m=p+1,g=(m-l)*pb(e,t,n,r,i,a,s,d,p,u,c)+(l-p)*pb(e,t,n,r,i,a,s,d,m,u,c),y=(m-l)*pb(e,t,n,r,i,a,s,h,p,u,c)+(l-p)*pb(e,t,n,r,i,a,s,h,m,u,c);return(h-o)*g+(o-d)*y}function ket(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;ct(a,"unique");let s=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:u}=Bz(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}var Cet={kernelName:Iw,backendName:"cpu",kernelFunc:ket};function Iet(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i.shape.length,o=i.shape[a],l=new Array(s-1),u=0;for(let h=0;h<s;h++)h!==a&&(l[u++]=i.shape[h]);let c=new Array(s).fill(0),d=i.shape.slice();d[a]=1;let p=new Array(o);for(let h=0;h<p.length;h++){c[a]=h;let m=bh({inputs:{x:i},backend:n,attrs:{begin:c,size:d}});p[h]=Jn({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return p}var $et={kernelName:Vv,backendName:"cpu",kernelFunc:Iet};function Tet(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:s}=r;ct(i,"unsortedSegmentSum");let o=i.shape.length,l=a.shape.length,u=[],c=[],d=o-l,p=a;for(let m=0;m<d;++m){let g=TI({inputs:{input:p},backend:n,attrs:{dim:m+1}});p=g,c.push(g)}for(let m=0;m<s;++m){let g=M.createScalarValue(m,"int32"),y=n.makeTensorInfo([],"int32",g),v=cae({inputs:{a:y,b:p},backend:n}),b=wd({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),_=TT({inputs:{a:b,b:i},backend:n}),k=nx({inputs:{x:_},backend:n,attrs:{axis:0,keepDims:!1}});u.push(k),c.push(y),c.push(v),c.push(b),c.push(_),c.push(k)}let h=ise({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var Net={kernelName:$w,backendName:"cpu",kernelFunc:Tet},Eet=[xZe,eKe,kZe,CZe,sKe,$Ze,NZe,OZe,MZe,RZe,LZe,zZe,WZe,HZe,GZe,ZZe,JZe,QZe,tXe,bZe,rXe,aXe,oXe,lKe,uXe,iKe,cKe,dXe,tKe,hXe,mXe,gXe,vXe,wXe,_Xe,SXe,IXe,TXe,EXe,PXe,AXe,DXe,FXe,BXe,WXe,jXe,UXe,qXe,KXe,ZXe,XXe,YXe,tJe,pZe,rJe,dKe,dJe,pKe,pJe,fKe,vJe,bJe,xJe,gKe,vKe,kJe,CJe,$Je,NJe,wKe,_Ke,nKe,OJe,fXe,MJe,RJe,LJe,hZe,SKe,IKe,zJe,TKe,WJe,HJe,GJe,ZJe,JJe,QJe,eYe,EKe,nYe,iYe,sYe,lYe,cYe,pYe,fYe,PKe,gYe,bYe,kYe,AKe,DKe,IYe,NYe,PYe,FKe,AYe,DYe,LYe,ase,WYe,mZe,WKe,jYe,UYe,qYe,ZYe,rKe,vM,JYe,gZe,yZe,vZe,QYe,tQe,rQe,aQe,oQe,lQe,cQe,XKe,pQe,yQe,bQe,kQe,YKe,CQe,$Qe,NQe,QKe,xYe,PQe,AQe,DQe,FQe,BQe,VQe,HQe,GQe,nZe,qQe,iZe,sZe,ZQe,JQe,QQe,tet,ret,cZe,QXe,aet,oet,cet,pet,fet,get,zKe,Cet,$et,Net,RYe];for(let e of Eet)Tw(e);var sse={};Dt(sse,{assertNotComplex:()=>r0,bindCanvasToFramebuffer:()=>Wet,bindColorTextureToFramebuffer:()=>kk,bindTextureToProgramUniformSampler:()=>_se,bindTextureUnit:()=>bse,bindVertexBufferToProgramAttribute:()=>wM,callAndCheck:()=>We,canBeRepresented:()=>lse,createFragmentShader:()=>dse,createFramebuffer:()=>vse,createProgram:()=>pse,createStaticIndexBuffer:()=>mse,createStaticVertexBuffer:()=>fse,createTexture:()=>gse,createVertexShader:()=>cse,getBatchDim:()=>wh,getExtensionOrThrow:()=>hb,getFramebufferErrorMessage:()=>kse,getMaxTexturesInShader:()=>$se,getNumChannels:()=>zet,getProgramUniformLocation:()=>xse,getProgramUniformLocationOrThrow:()=>wse,getRowsCols:()=>xh,getShapeAs3D:()=>mb,getTextureShapeFromLogicalShape:()=>Cse,getWebGLDisjointQueryTimerVersion:()=>Tse,getWebGLErrorMessage:()=>use,getWebGLMaxTextureSize:()=>Ise,hasExtension:()=>Os,isCapableOfRenderingToFloatTexture:()=>Nse,isDownloadFloatTextureEnabled:()=>Ese,isReshapeFree:()=>C1,isWebGLFenceEnabled:()=>Ose,isWebGLVersionEnabled:()=>_M,linkProgram:()=>hse,logShaderSourceAndInfoLog:()=>Uz,resetMaxTextureSize:()=>Vet,resetMaxTexturesInShader:()=>jet,unbindColorTextureFromFramebuffer:()=>xM,unbindTextureUnit:()=>Bet,validateFramebuffer:()=>fb,validateProgram:()=>_k,validateTextureSize:()=>yse});var xp={},E_={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ose(e,t){xp[e]=t}function rl(e,t){if(!(e in xp)||t!=null){let r=Pet(e,t);if(r!==null)xp[e]=r;else return console.log("Could not get context for WebGL version",e),null}let n=xp[e];return n==null||n.isContextLost()?(delete xp[e],rl(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),xp[e])}function Oet(e){if(!fe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Pet(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=t==null?Oet(e):t;return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete xp[e]},!1),fe().getBool("SOFTWARE_WEBGL_ENABLED")&&(E_.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",E_)||n.getContext("experimental-webgl",E_):n.getContext("webgl2",E_)}var S1;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(S1||(S1={}));var Es;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Es||(Es={}));var Ei;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Ei||(Ei={}));function rx(e,t){return[t,e]}function Met(e,t){return e*t}function O_(e){let t=M.sizeFromShape(e),n=Math.ceil(t/4);return M.sizeToSquarishShape(n)}function n0(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Aet(e,t){let[n,r]=n0(e,t);return n*r*4}function Hz(e,t){let n=e,r,i,a,s,o,l,u,c,d,p;return fe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,s=n.RGBA32F,o=n.RED,u=4,c=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,a=e.RGBA,s=n.RGBA,o=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:p}}function We(e,t){let n=t();return fe().getBool("DEBUG")&&Ret(e),n}function Ret(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+use(e,t))}var Det=596e-10,Let=65504;function lse(e){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||Det<Math.abs(e)&&Math.abs(e)<Let)}function use(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function hb(e,t){return tc(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function cse(e,t){let n=tc(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(We(e,()=>e.shaderSource(n,t)),We(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function dse(e,t){let n=tc(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(We(e,()=>e.shaderSource(n,t)),We(e,()=>e.compileShader(n)),fe().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw Uz(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Fet=/ERROR: [0-9]+:([0-9]+):/g;function Uz(e,t){let n=Fet.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let r=+n[1],i=e.split(`
`),a=i.length.toString().length+2,s=i.map((d,p)=>M.rightPad((p+1).toString(),a)+d),o=0;for(let d=0;d<s.length;d++)o=Math.max(s[d].length,o);let l=s.slice(0,r-1),u=s.slice(r-1,r),c=s.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${M.rightPad(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function pse(e){return tc(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function hse(e,t){if(We(e,()=>e.linkProgram(t)),!fe().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function _k(e,t){if(We(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function fse(e,t){let n=tc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return We(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),We(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function mse(e,t){let n=tc(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return We(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),We(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function zet(){return fe().getNumber("WEBGL_VERSION")===2?1:4}function gse(e){return tc(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function yse(e,t){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){let r=`[${e}x${t}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function vse(e){return tc(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function wM(e,t,n,r,i,a,s){let o=e.getAttribLocation(t,n);return o===-1?!1:(We(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),We(e,()=>e.vertexAttribPointer(o,i,e.FLOAT,!1,a,s)),We(e,()=>e.enableVertexAttribArray(o)),!0)}function bse(e,t,n){Sse(e,n),We(e,()=>e.activeTexture(e.TEXTURE0+n)),We(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function Bet(e,t){Sse(e,t),We(e,()=>e.activeTexture(e.TEXTURE0+t)),We(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function wse(e,t,n){return tc(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function xse(e,t,n){return e.getUniformLocation(t,n)}function _se(e,t,n,r){We(e,()=>bse(e,t,r)),We(e,()=>e.uniform1i(n,r))}function Wet(e){We(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),We(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),We(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function kk(e,t,n){We(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),We(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function xM(e,t){We(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),We(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function fb(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+kse(e,t))}function kse(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function tc(e,t,n){let r=We(e,()=>t());if(r==null)throw new Error(n);return r}function Sse(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function wh(e,t=2){return M.sizeFromShape(e.slice(0,e.length-t))}function xh(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function mb(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[wh(e),...xh(e)]),t}function Cse(e,t=!1){let n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=fe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&fe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((o,l)=>l>=e.length-2?M.nearestLargerEven(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=M.squeezeShape(e).newShape);let i=M.sizeFromShape(e),a=null;e.length<=1&&i<=n?a=[1,i]:e.length===2&&e[0]<=n&&e[1]<=n?a=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?a=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?a=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?a=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(a=[e[0],e[1]*e[2]*e[3]]);let s=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(t?2:1)&&Math.min(...a)>0;if(a==null||s)if(t){let o=wh(e),l=2,u=2;e.length&&([l,u]=xh(e)),i=o*(l/2)*(u/2),a=M.sizeToSquarishShape(i).map(c=>c*2)}else a=M.sizeToSquarishShape(i);return a}function P_(e){return e%2===0}function C1(e,t){if(e=e.slice(-2),t=t.slice(-2),M.arraysEqual(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||P_(n)&&P_(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&P_(e[0])&&P_(t[0])}var Sk,Ck;function Ise(e){if(Sk==null){let t=rl(e);Sk=t.getParameter(t.MAX_TEXTURE_SIZE)}return Sk}function Vet(){Sk=null}function jet(){Ck=null}function $se(e){if(Ck==null){let t=rl(e);Ck=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Ck)}function Tse(e){if(e===0)return 0;let t,n=rl(e);return Os(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:Os(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Os(e,t){return e.getExtension(t)!=null}function _M(e){try{if(rl(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Nse(e){if(e===0)return!1;let t=rl(e);if(e===1){if(!Os(t,"OES_texture_float"))return!1}else if(!Os(t,"EXT_color_buffer_float"))return!1;return kM(t)}function Ese(e){if(e===0)return!1;let t=rl(e);if(e===1){if(!Os(t,"OES_texture_float")||!Os(t,"WEBGL_color_buffer_float"))return!1}else{if(Os(t,"EXT_color_buffer_float"))return kM(t);let n="EXT_color_buffer_half_float";if(Os(t,n)){let r=t.getExtension(n);return Het(t,r)}return!1}return kM(t)}function kM(e){let t=Hz(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Het(e,t){let n=Hz(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}function Ose(e){return e!==2?!1:rl(e).fenceSync!=null}function r0(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&M.assert(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}var dt=fe();dt.registerFlag("HAS_WEBGL",()=>dt.getNumber("WEBGL_VERSION")>0);dt.registerFlag("WEBGL_VERSION",()=>_M(2)?2:_M(1)?1:0);dt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);dt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>dt.get("WEBGL_VERSION")===2);dt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);dt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);dt.registerFlag("WEBGL_PACK",()=>dt.getBool("HAS_WEBGL"));dt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_CLIP",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_REDUCE",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_LAZILY_UNPACK",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_CONV_IM2COL",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>dt.getBool("WEBGL_PACK"));dt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Ise(dt.getNumber("WEBGL_VERSION")));dt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>$se(dt.getNumber("WEBGL_VERSION")));dt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=dt.getNumber("WEBGL_VERSION");return e===0?0:Tse(e)});dt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>dt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Ow.isMobile());dt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Nse(dt.getNumber("WEBGL_VERSION")));dt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>dt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:dt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));dt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Ese(dt.getNumber("WEBGL_VERSION")));dt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>Ose(dt.getNumber("WEBGL_VERSION")));dt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>dt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);dt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});dt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Ow.isMobile()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});dt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);dt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);dt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);dt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);dt.registerFlag("WEBGL_EXP_CONV",()=>!1);dt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>dt.getBool("IS_TEST"));dt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);dt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);dt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);dt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function Ia(){let e,t,n,r,i,a,s,o,l,u;return fe().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",s="out vec4 outputColor;",o=fe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",s="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}function um(e,t,n="index"){let r=M.computeStrides(t);return r.map((i,a)=>{let s=`int ${e[a]} = ${n} / ${i}`,o=a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${i}`:`index -= ${e[a]} * ${i}`;return`${s}; ${o};`}).join("")}function NT(e,t,n="index"){let r=M.computeStrides(t);return r.map((i,a)=>{let s=`int ${e[a]} = ${n} / outShapeStrides[${a}]`,o=a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`;return`${s}; ${o};`}).join("")}function Uet(e,t){let n=e.length,r=e.map(a=>`${t}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function Get(e,t,n="index"){let r=e.map((a,s)=>s),i=Uet(r,t);return i.map((a,s)=>{let o=`int ${e[s]} = ${n} / ${i[s]}`,l=s===i.length-1?`int ${e[s+1]} = ${n} - ${e[s]} * ${i[s]}`:`index -= ${e[s]} * ${i[s]}`;return`${o}; ${l};`}).join("")}function Gz(e){let t=M.computeStrides(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function qz(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var Pse=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`,{getBroadcastDims:Mse}=W;function qet(e,t,n){let r=[];if(e.forEach(p=>{let h=M.sizeFromShape(p.shapeInfo.logicalShape);if(p.shapeInfo.isUniform?r.push(`uniform float ${p.name}${h>1?`[${h}]`:""};`):(r.push(`uniform sampler2D ${p.name};`),r.push(`uniform int offset${p.name};`)),n.enableShapeUniforms){let{uniformShape:m}=Kz(n.packedInputs,p.shapeInfo.logicalShape,p.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${p.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${p.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${p.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${p.name}Shape;`);break}r.push(`uniform ivec2 ${p.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(p=>{r.push(`uniform ${p.type} ${p.name}${p.arrayIndex?`[${p.arrayIndex}]`:""};`)});let i=r.join(`
`),a=e.map(p=>Ket(p,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),s=t.texShape,o=Ia(),l=Jet(o),u,c,d=ett(o);return t.isPacked?(u=Zet(t.logicalShape,s,n.enableShapeUniforms),c=Qet(o)):(u=Xet(t.logicalShape,s,n.enableShapeUniforms),c=Yet(o)),n.packedInputs&&(d+=itt),[d,l,c,i,u,a,n.userCode].join(`
`)}function i0(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return gtt(e,t);case 1:return vtt(e,t);case 2:return wtt(e,t);case 3:return _tt(e,t);case 4:return Stt(e,t);case 5:return Ctt(e);case 6:return Itt(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Ase(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return mtt(e);case 1:return ytt(e,t);case 2:return btt(e,t);case 3:return xtt(e,t);default:return ktt(e,t)}}function Ket(e,t,n=!1,r){let i="";n?i+=Ase(e,r):i+=i0(e,r);let a=e.shapeInfo.logicalShape,s=t.logicalShape;return a.length<=s.length&&(n?i+=$tt(e,t):i+=Ttt(e,t)),i}function Zet(e,t,n){switch(e.length){case 0:return Rse();case 1:return att(e,t,n);case 2:return htt(e,t,n);case 3:return ott(e,t,n);default:return utt(e,t,n)}}function Xet(e,t,n){switch(e.length){case 0:return Rse();case 1:return stt(e,t,n);case 2:return ftt(e,t,n);case 3:return ltt(e,t,n);case 4:return ctt(e,t,n);case 5:return dtt(e,t);case 6:return ptt(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function Jet(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function Yet(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function Qet(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function ett(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${ttt}
    ${ntt}
    ${rtt}
  `}var ttt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ntt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rtt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,itt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Rse(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function att(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function stt(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function ott(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),a=i*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function ltt(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${NT(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;let r=um(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function utt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),a=i*Math.ceil(e[e.length-2]/2),s=a,o="",l="b, r, c";for(let u=2;u<e.length-1;u++)s*=e[e.length-u-1],o=`
      int b${u} = index / ${s};
      index -= b${u} * ${s};
    `+o,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${e.length}(${l});
    }
  `}function ctt(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${NT(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;let r=um(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function dtt(e,t){let n=um(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function ptt(e,t){let n=um(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function htt(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(M.arraysEqual(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;let i=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function ftt(e,t,n){return M.arraysEqual(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function cm(e){return`offset${e}`}function mtt(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Ia();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function gtt(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;let[i,a]=e.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;let s=cm(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});
      return sampleTexture(${n}, uv);
    }
  `;let[o,l]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${s});
      return sampleTexture(${n}, uv);
    }
  `}function ytt(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=Ia();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;let s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function vtt(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${a0(e)}
      }
    `;let i=e.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;let o=cm(n);return s===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${s}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function btt(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=a[0],o=a[1],l=Ia();if(a!=null&&M.arraysEqual(n,a))return t?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;let u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function wtt(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(a!=null&&M.arraysEqual(n,a)){if(t)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;let p=a[0],h=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}let{newShape:s,keptDims:o}=M.squeezeShape(n),l=s;if(l.length<n.length){let p=s0(e,l),h=["row","col"];return`
      ${i0(p,t)}
      float ${i}(int row, int col) {
        return ${i}(${o0(h,o)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${a0(e)}
      }
    `;let u=a[0],c=a[1],d=cm(r);return c===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?t?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function xtt(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){let p=n.slice(1),h=[1,2],m=s0(e,p),g=["b","row","col"];return`
        ${Ase(m,t)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${o0(g,h)});
        }
      `}let o=Ia();if(t)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;let l=s[0],u=s[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function _tt(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=M.squeezeShape(n),u=o;if(u.length<n.length){let g=s0(e,u),y=["row","col","depth"];return`
        ${i0(g,t)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${o0(y,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${s}, 1)));
        ${a0(e)}
      }
    `;let c=e.shapeInfo.texShape,d=c[0],p=c[1],h=e.shapeInfo.flatOffset;if(p===a&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===s&&h==null)return t?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;let m=cm(r);return t?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${s} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function ktt(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Ia();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;let a=e.shapeInfo.logicalShape,s=a.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],c=l[1],d=Math.ceil(a[s-1]/2),p=d*Math.ceil(a[s-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<s-1;g++)h=`int b${g}, `+h,p*=a[s-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${r}(${h}) {
      int index = ${m};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Stt(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],s=n[2]*a,o=n[1]*s,{newShape:l,keptDims:u}=M.squeezeShape(n);if(l.length<n.length){let b=s0(e,l),_=["row","col","depth","depth2"];return`
      ${i0(b,t)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${o0(_,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${s}, ${a}, 1)));
        ${a0(e)}
      }
    `;let c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(h===o&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===a&&c==null)return t?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;let v=cm(r);return t?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function Ctt(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],a=t[3]*i,s=t[2]*a,o=t[1]*s,{newShape:l,keptDims:u}=M.squeezeShape(t);if(l.length<t.length){let g=s0(e,l),y=["row","col","depth","depth2","depth3"];return`
      ${i0(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${o0(y,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${s}, ${a}, ${i})) +
          depth3;
        ${a0(e)}
      }
    `;let c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];if(h===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;let m=cm(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${s} + depth * ${a} +
          depth2 * ${i} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Itt(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=M.squeezeShape(t);if(i.length<t.length){let y=s0(e,i),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${i0(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${o0(v,a)});
      }
    `}let s=t[5],o=t[4]*s,l=t[3]*o,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${a0(e)}
      }
    `;let d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1];if(m===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;let g=cm(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${s} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function a0(e){let t=e.name,n=M.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function $tt(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,o=Mse(e.shapeInfo.logicalShape,t.logicalShape),l=jn(s),u=s-a,c,d=["x","y","z","w","u","v"];a===0?c="":s<2&&o.length>=1?c="coords = 0;":c=o.map(y=>`coords.${d[y+u]} = 0;`).join(`
`);let p="";s<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((y,v)=>`coords.${d[v+u]}`).join(", ");let h="return outputValue;",m=M.sizeFromShape(e.shapeInfo.logicalShape)===1,g=M.sizeFromShape(t.logicalShape)===1;if(a===1&&!m&&!g)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(o.length){let y=a-2,v=a-1;o.indexOf(y)>-1&&o.indexOf(v)>-1?h="return vec4(outputValue.x);":o.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${p});
      ${h}
    }
  `}function Ttt(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&e.shapeInfo.flatOffset==null&&M.arraysEqual(s,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;let u=jn(l),c=Mse(e.shapeInfo.logicalShape,t.logicalShape),d=l-o,p,h=["x","y","z","w","u","v"];o===0?p="":l<2&&c.length>=1?p="coords = 0;":p=c.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return l<2&&o>0?m="coords":m=e.shapeInfo.logicalShape.map((g,y)=>`coords.${h[y+d]}`).join(", "),`
    float ${i}() {
      ${u} coords = getOutputCoords();
      ${p}
      return get${r}(${m});
    }
  `}function jn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function Kz(e,t,n){let{newShape:r,keptDims:i}=M.squeezeShape(t),a=t.length,s=e&&a===3&&t[0]===1,o=s?t.slice(1):r,l=!e&&a>1&&!M.arraysEqual(t,n)&&r.length<a||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:i}}function s0(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function o0(e,t){return t.map(n=>e[n]).join(", ")}function Ntt(e,t,n,r){let i=n.map((c,d)=>{let p={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(p.flatOffset=c.texData.slice.flatOffset),{name:t.variableNames[d],shapeInfo:p}}),a=i.map(c=>c.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=qet(i,s,t),l=dse(e.gl,o),u=e.createProgram(l);return fe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:s},Dse(e,t,u)))}function Dse(e,t,n){let r=[],i=[],a,s,o,l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),fe().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));let c=!1;for(let d of t.variableNames){let p={name:d,uniform:e.getUniformLocation(n,d,c),offset:e.getUniformLocation(n,`offset${d}`,c)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,`${d}Shape`,c),p.texShape=e.getUniformLocation(n,`${d}TexShape`,c)),r.push(p)}if(t.enableShapeUniforms&&(a=e.getUniformLocation(n,"outShape",c),o=e.getUniformLocation(n,"outShapeStrides",c),s=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(let d of t.customUniforms)i.push(e.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:s}}function FU(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{let i=n.logicalShape,a=t[r],s=a.shape;if(!M.arraysEqual(i,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${s} must match`);if(n.isUniform&&a.isUniform)return;let o=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!M.arraysEqual(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function Ett(e,t,n,r,i){t.program.enableShapeUniforms||(FU(t.inShapeInfos,n),FU([t.outShapeInfo],[r]));let a=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,s[0],s[1]):e.setOutputMatrixTexture(a.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),fe().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){let u=n[l],{uniform:c,offset:d,shape:p,texShape:h}=t.variablesLocations[l];if(p){let{uniformShape:m}=Kz(t.program.packedInputs,u.shape,u.texData.texShape);switch(m.length){case 1:e.gl.uniform1iv(p,new Int32Array(m));break;case 2:e.gl.uniform2iv(p,new Int32Array(m));break;case 3:e.gl.uniform3iv(p,new Int32Array(m));break;case 4:e.gl.uniform4iv(p,new Int32Array(m));break}}if(h&&e.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(M.sizeFromShape(u.shape)<2)e.gl.uniform1f(c,u.uniformValues[0]);else{let m=u.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),e.gl.uniform1fv(c,m)}continue}u.texData.slice!=null&&d!=null&&e.gl.uniform1i(d,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,c,l)}}let o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){let l=M.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){let u=t.program.customUniforms[l],c=t.customUniformLocations[l],d=i[l];if(u.type==="float")e.gl.uniform1fv(c,d);else if(u.type==="vec2")e.gl.uniform2fv(c,d);else if(u.type==="vec3")e.gl.uniform3fv(c,d);else if(u.type==="vec4")e.gl.uniform4fv(c,d);else if(u.type==="int")e.gl.uniform1iv(c,d);else if(u.type==="ivec2")e.gl.uniform2iv(c,d);else if(u.type==="ivec3")e.gl.uniform3iv(c,d);else if(u.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}e.executeProgram()}function Ott(e,t,n){let r="";t.concat(n).forEach(s=>{let o=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=Kz(e.packedInputs,s.shape,l),p="",h="",m="";if(c.length===1&&e.packedInputs){let S=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${S[0]>1}_${S[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){let S=M.computeStrides(c);m=`${S[0]===l[1]}_${S[S.length-1]===l[1]}`}let g=s.shape.length,y=c.length===2&&M.arraysEqual(s.shape,l),v=M.sizeFromShape(s.shape)===1,b=W.getBroadcastDims(s.shape,n.shape),_=!e.packedInputs&&g===n.shape.length&&M.arraysEqual(l,n.texData.texShape),k=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${g}_${_}_${u?d:""}_${c.length}_${v}_${b}_${y}_${p}_${h}_${m}_${k}_${o}`}else{let l=s.isUniform?"uniform":s.texData.texShape;r+=`${s.shape}_${l}_${o}`}});let i=e.userCode,a=e.constructor.name;return a+="_"+r+"_"+i+`${fe().getNumber("WEBGL_VERSION")}`,a}function ra(e){return fe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var Ptt=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=S1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Ia();this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?NT(["r","c","d"],e):um(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}},Mtt=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=S1.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Ia();this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?NT(["r","c","d"],e):um(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}},Att=class{constructor(e){this.variableNames=["A"],this.outTexUsage=Es.DOWNLOAD;let t=Ia();this.outputShape=e,this.userCode=`
      ${Pse}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}},Rtt=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Es.DOWNLOAD;let t=Ia();this.outputShape=e,this.userCode=`
      ${Pse}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}},Dtt={R:0,G:1,B:2,A:3},zU=class{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Ia();this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let a="";for(let s=0;s<n.length;s++){let o=n[s];a+=`
          if(offset == ${s}) {
            result = values[${Dtt[o]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?qz():Gz(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${n.length});

        flatIndex = idiv(flatIndex, ${n.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${a}
        }
        ${r.output} = vec4(${i}, 0., 0., 0.);
      }
    `}},Ltt=class{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Ia();this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let s=0;s<=1;s++){let o=a*2+s;r+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${n.texture2D}(A, uv);

            if (offset == 0) {
              result[${o}] = values[0];
            } else if (offset == 1) {
              result[${o}] = values[1];
            } else if (offset == 2) {
              result[${o}] = values[2];
            } else {
              result[${o}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?qz():Gz(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${n.output} = ${i};
        }
    `}},Lse={};Dt(Lse,{bindVertexProgramAttributeStreams:()=>Gse,createBufferFromOutputTexture:()=>Zse,createFloat16MatrixTexture:()=>Vse,createFloat16PackedMatrixTexture:()=>Use,createFloat32MatrixTexture:()=>Wse,createIndexBuffer:()=>Bse,createPackedMatrixTexture:()=>Hse,createUnsignedBytesMatrixTexture:()=>jse,createVertexBuffer:()=>zse,createVertexShader:()=>Fse,downloadByteEncodedFloatMatrixFromOutputTexture:()=>Jse,downloadFloat32MatrixFromBuffer:()=>Xse,downloadMatrixFromPackedOutputTexture:()=>Qse,downloadPackedMatrixFromBuffer:()=>Yse,getInternalFormatForFloat16MatrixTexture:()=>Xz,getInternalFormatForFloat16PackedMatrixTexture:()=>Qz,getInternalFormatForFloat32MatrixTexture:()=>Zz,getInternalFormatForPackedMatrixTexture:()=>Yz,getInternalFormatForUnsignedBytesMatrixTexture:()=>Jz,uploadDenseMatrixToTexture:()=>qse,uploadPixelDataToTexture:()=>Kse});function Fse(e){let t=Ia(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return cse(e,n)}function zse(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return fse(e,t)}function Bse(e){let t=new Uint16Array([0,1,2,2,1,3]);return mse(e,t)}function ix(e,t,n,r,i,a){yse(t,n);let s=gse(e),o=e.TEXTURE_2D;return We(e,()=>e.bindTexture(o,s)),We(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),We(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),We(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),We(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),fe().getNumber("WEBGL_VERSION")===1?We(e,()=>e.texImage2D(o,0,r,t,n,0,i,a,null)):We(e,()=>e.texStorage2D(o,1,r,t,n)),We(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function Zz(e){return e.internalFormatFloat}function Wse(e,t,n,r){let[i,a]=rx(t,n);return ix(e,i,a,Zz(r),r.textureFormatFloat,e.FLOAT)}function Xz(e){return e.internalFormatHalfFloat}function Vse(e,t,n,r){let[i,a]=rx(t,n);return ix(e,i,a,Xz(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Jz(e){return e.downloadTextureFormat}function jse(e,t,n,r){let[i,a]=rx(t,n);return ix(e,i,a,Jz(r),e.RGBA,e.UNSIGNED_BYTE)}function Yz(e){return e.internalFormatPackedFloat}function Hse(e,t,n,r){let[i,a]=n0(t,n);return ix(e,i,a,Yz(r),e.RGBA,e.FLOAT)}function Qz(e){return e.internalFormatPackedHalfFloat}function Use(e,t,n,r){let[i,a]=n0(t,n);return ix(e,i,a,Qz(r),e.RGBA,r.textureTypeHalfFloat)}function Gse(e,t,n){return We(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),wM(e,t,"clipSpacePos",n,3,20,0)&&wM(e,t,"uv",n,2,20,12)}function qse(e,t,n,r,i,a){We(e,()=>e.bindTexture(e.TEXTURE_2D,t));let s,o,l;i instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=a.internalFormatPackedFloat),s.set(i),fe().getNumber("WEBGL_VERSION")===2?We(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):We(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),We(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Kse(e,t,n){We(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?fe().getNumber("WEBGL_VERSION")===2?We(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):We(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):fe().getNumber("WEBGL_VERSION")===2?We(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):We(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),We(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Zse(e,t,n,r){let i=e.createBuffer();We(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));let a=4*4*t*n;return We(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),We(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),We(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function Xse(e,t,n){let r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Jse(e,t,n,r){let[i,a]=rx(t,n),s=4,o=new Uint8Array(Met(t*n,s));return We(e,()=>e.readPixels(0,0,i,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function Yse(e,t,n,r,i,a,s,o){let l=e,u=new Float32Array(Aet(a,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function Qse(e,t,n){let r=new Float32Array(t*n*4);return We(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}var Ik=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=fe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,ose(t,e)):this.gl=rl(t),e=this.gl,fe().getNumber("WEBGL_VERSION")===2){let i=e;this.createVertexArray=()=>We(i,()=>i.createVertexArray()),this.bindVertexArray=a=>We(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>We(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>We(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){let i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>We(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>We(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>We(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>We(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),fe().getNumber("WEBGL_VERSION")===1){let i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=hb(this.gl,i),Os(this.gl,a))this.textureHalfFloatExtension=hb(this.gl,a);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Os(this.gl,r))this.colorBufferHalfFloatExtension=hb(this.gl,r);else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Os(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else if(Os(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=zse(this.gl),this.indexBuffer=Bse(this.gl),this.framebuffer=vse(this.gl),this.textureConfig=Hz(this.gl,this.textureHalfFloatExtension)}get debug(){return fe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;We(e,()=>e.finish()),We(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),We(e,()=>e.deleteFramebuffer(this.framebuffer)),We(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),We(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),We(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),Wse(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),Vse(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),jse(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),Kse(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),qse(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),Use(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),Hse(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(xM(this.gl,this.framebuffer),this.outputTexture=null),We(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>Jse(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,i,a){return Yse(this.gl,e,t,n,r,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return Xse(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=Zse(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let a=r.clientWaitSync(i,0,0);return a===r.ALREADY_SIGNALED||a===r.CONDITION_SATISFIED},t=i}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>Qse(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;this.vertexShader==null&&(this.vertexShader=Fse(t));let n=pse(t);We(t,()=>t.attachShader(n,this.vertexShader)),We(t,()=>t.attachShader(n,e)),hse(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&_k(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;We(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Gse(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(We(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&_k(this.gl,this.program),We(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?wse(this.gl,e,t):xse(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),We(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),_se(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,i]=n0(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&_k(this.gl,this.program),fb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}We(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),We(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=hb(this.gl,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.createQuery();return n.beginQuery(r.TIME_ELAPSED_EXT,i),i}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await M.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){let n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}else{let n=this.getQueryTimerExtensionWebGL1();return n.getQueryObjectEXT(e,n.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){let n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{let n=this.getQueryTimerExtensionWebGL1(),r=n.getQueryObjectEXT(e,n.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=Ftt(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:n}=this.itemsToPoll[t];n()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in fe().platform&&(n=fe().platform.setTimeoutCustom.bind(fe().platform)),M.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),kk(this.gl,e,this.framebuffer),this.debug&&fb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(kk(this.gl,this.outputTexture,this.framebuffer),this.debug&&fb(this.gl)):xM(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;kk(r,e,this.framebuffer),this.debug&&fb(r),this.outputTexture=e,We(r,()=>r.viewport(0,0,t,n)),We(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),We(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function Ftt(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}var{addImpl:ztt,bincountImpl:eoe,bincountReduceImpl:Btt,bitwiseAndImpl:Wtt,castImpl:Vtt,ceilImpl:jtt,concatImpl:Htt,equalImpl:Utt,expImpl:Gtt,expm1Impl:qtt,floorImpl:Ktt,gatherNdImpl:Ztt,gatherV2Impl:Xtt,greaterImpl:Jtt,greaterEqualImpl:Ytt,lessImpl:Qtt,lessEqualImpl:ent,linSpaceImpl:tnt,logImpl:nnt,maxImpl:rnt,maximumImpl:int,minimumImpl:ant,multiplyImpl:snt,negImpl:ont,notEqualImpl:lnt,prodImpl:unt,raggedGatherImpl:cnt,raggedRangeImpl:dnt,raggedTensorToTensorImpl:pnt,rangeImpl:hnt,rsqrtImpl:fnt,scatterImpl:mnt,sigmoidImpl:gnt,simpleAbsImpl:toe,sliceImpl:ynt,sparseFillEmptyRowsImpl:vnt,sparseReshapeImpl:bnt,sparseSegmentReductionImpl:noe,sqrtImpl:wnt,staticRegexReplaceImpl:xnt,stridedSliceImpl:_nt,stringNGramsImpl:knt,stringSplitImpl:Snt,stringToHashBucketFastImpl:Cnt,subImpl:Int,tileImpl:$nt,topKImpl:Tnt,transposeImpl:e3,uniqueImpl:Nnt}=Tz;function roe(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function fa(e,t){return t===1?[e]:roe(e,t)}function Ent(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}var Ont=class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ra(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let t=fa("rc",this.rank),n=jn(this.rank),r=this.getOutOfBoundsCondition(t),i=this.getSetup(t),a=this.getOutput(t);this.userCode=`
        void main() {
          ${n} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${n===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";let t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${n};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){let t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}},ioe=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length);let n="";for(let r=0;r<4;r++){let i="thisRC = rc;";r%2===1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        ${i}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${Pnt(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?qz():Gz(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${n}

        setOutput(result);
      }
    `}};function Pnt(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?Get(["r","c","d"],"inputShape"):um(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}var Mnt=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r=WU(t,n),i=VU(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let a=BU(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let o=this.freeTextures[i].pop();return this.usedTextures[i].push(o),o}let s;return r===Ei.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Ei.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Ei.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Ei.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Ei.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),s}releaseTexture(e,t,n,r){if(this.freeTextures==null)return;let i=WU(n,r),a=VU(t,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);let s=BU(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=fe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");o!==-1&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[a],u=l&&l.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function Ant(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function BU(e,t,n,r,i){let a=Rnt(t,r),s;if(i){let[l,u]=n0(e[0],e[1]);s=l*u}else{let[l,u]=rx(e[0],e[1]);s=l*u}let o=Ant(n,a);return s*o}function Rnt(e,t){switch(e){case Ei.PACKED_2X2_FLOAT32:return Yz(t);case Ei.PACKED_2X2_FLOAT16:return Qz(t);case Ei.UNPACKED_FLOAT32:return Zz(t);case Ei.UNPACKED_FLOAT16:return Xz(t);case Ei.PACKED_4X1_UNSIGNED_BYTE:return Jz(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function Dnt(e){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ei.PACKED_2X2_FLOAT32:Ei.UNPACKED_FLOAT32:e?Ei.PACKED_2X2_FLOAT16:Ei.UNPACKED_FLOAT16}function WU(e,t){if(e===Es.UPLOAD)return Ei.PACKED_2X2_FLOAT32;if(e===Es.RENDER||e==null)return Dnt(t);if(e===Es.DOWNLOAD||e===Es.PIXELS)return Ei.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function VU(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var Pl=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},xo="if (isnan(x)) return x;",Lnt="return x;",jU="return abs(x);",Fnt="return (x >= 0.0) ? x : (exp(x) - 1.0);",znt=xo+`
  return (x < 0.0) ? 0.0 : x;
`,Bnt=xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cc="return x;",Wnt="return 1.0 / (1.0 + exp(-1.0 * x));",Vnt="return x;",jnt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Hnt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Unt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Gnt="return 1.0 / (1.0 + exp(-1.0 * x));",Fc=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}},qnt=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length);let t=e.length,n=fa("rc",t),r=jn(t),i=Ent(t,n),a=n.slice(-2),s=t<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}},Knt=Yl.whereImpl,Znt=1e-7,Xnt=1e-4,OE={};function Jnt(e){return e in OE||(OE[e]={}),OE[e]}var Ynt=fe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Qnt=600;function ert(){return fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*Qnt/1024/1024}var t3=class aoe extends aw{nextDataId(){return aoe.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof Ik)n=t;else{let r=rl(fe().getNumber("WEBGL_VERSION"),t);n=new Ik(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let r=rl(fe().getNumber("WEBGL_VERSION"));n=new Ik(r),this.binaryCache=Jnt(fe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Mnt(this.gpgpu),this.numMBBeforeWarning=ert(),this.texData=new l$(this,eo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,r,i,a,s){let o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:t,texShape:[i,a]},l.texShape=[i,a];let u=mb(n),c=new zU(u,!1,s),d=this.runWebGLProgram(c,[o],r,[[i,a]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(t,n,r){if((fe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fe().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:t,usage:Es.UPLOAD,refCount:1}),i}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){let n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){let n=this.texData.get(t);n.refCount--}}move(t,n,r,i,a){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:i,values:n,usage:Es.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){let n=this.texData.get(t),{values:r,dtype:i,complexTensorInfos:a,slice:s,shape:o,isPacked:l}=n;if(s!=null){let p;l?p=new Fc(o,Cc):p=new Pl(o,Cc);let h=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),m}if(r!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return r;let u=this.activeTimers!=null,c;u&&(c=M.now());let d;if(i==="complex64"){let p=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);d=W.mergeRealAndImagArrays(p,h)}else d=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=M.now()-c),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){let m=this.pendingRead.get(t);return new Promise(g=>m.push(g))}let n=this.texData.get(t),{values:r,shape:i,slice:a,dtype:s,complexTensorInfos:o,isPacked:l}=n;if(a!=null){let m;l?m=new Fc(i,Cc):m=new Pl(i,Cc);let g=this.runWebGLProgram(m,[{dataId:t,shape:i,dtype:s}],s),y=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(t);if(fe().getBool("DEBUG")&&!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(s!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);let m=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(m.texture.texture,...O_(i))}this.pendingRead.set(t,[]),s!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(s==="complex64"){let m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),g=m[0],y=m[1];d=W.mergeRealAndImagArrays(g,y)}else if(u==null)d=this.getValuesFromTexture(t);else{let m=M.sizeFromShape(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){let m=this.gpgpu.gl;We(m,()=>m.deleteBuffer(u))}let p=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(m=>m(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&eo().removeDataId(t,this),this.pendingDeletes--),p}readToGPU(t,n={}){let r=this.texData.get(t),{values:i,shape:a,slice:s,dtype:o,isPacked:l,texture:u}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(s!=null){let h;l?h=new Fc(a,Cc):h=new Pl(a,Cc);let m=this.runWebGLProgram(h,[{dataId:t,shape:a,dtype:o}],o),g=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),g}if(u==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let c=this.decode(t,n.customTexShape),d=eo().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(t){let n=this.readSync(t.dataId);if(t.dtype==="string")try{let r=n.map(i=>M.decodeString(i));return Gt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Gt(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){let r=t[n];if(!lse(r))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){let{shape:n,dtype:r,isPacked:i}=this.texData.get(t),a=M.sizeFromShape(n);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let p=this.decode(t),h=this.texData.get(p.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...O_(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(p),m}let s=fe().getBool("WEBGL_PACK")&&i===!0,o=s?mb(n):n,l=s?new Rtt(o):new Att(o),u=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:t}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){let n=this.activeTimers,r=[],i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t();let a=M.flatten(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),s=M.flatten(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);let o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let l=await Promise.all(a);o.kernelMs=M.sum(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:s[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:M.now(),endMs:null}}endTimer(t){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=M.now(),t)}async getQueryTime(t){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);let n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);let{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){let{texture:n,dtype:r,texShape:i,usage:a,isPacked:s,slice:o}=this.texData.get(t),l=o&&o.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,s)));let c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=Ynt){return fe().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&M.sizeFromShape(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){W.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let n=t.dataSync();return Knt(t.shape,n)}packedUnaryOp(t,n,r){let i=new Fc(t.shape,n),a=this.compileAndRun(i,[t],r);return eo().makeTensorFromTensorInfo(a)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){let i=toe(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,i)}if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,jU,t.dtype);let n=new Pl(t.shape,jU),r=this.compileAndRun(n,[t]);return eo().makeTensorFromTensorInfo(r)}makeTensorInfo(t,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&M.isString(r[0])){let a=r.map(s=>M.encodeString(s));i=this.write(a,t,n)}else i=this.write(r,t,n);return this.texData.get(i).usage=null,{dataId:i,shape:t,dtype:n}}makeOutput(t,n,r){return eo().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,r),this)}unpackTensor(t){let n=new qnt(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){let n=new Ont(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)}packedReshape(t,n){let r=[wh(t.shape),...xh(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[wh(n),...xh(n)],s=new ioe(a,r),o=!0,l=[r],u=this.runWebGLProgram(s,[i],t.dtype,l,o);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){let r=this.texData.get(t),{isPacked:i,shape:a,dtype:s}=r;if(n!=null){let p=M.sizeFromShape(a),h=n[0]*n[1]*4;M.assert(p<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let o=mb(a),l;i?l=new Mtt(o):l=new Ptt(o);let u=!0,c=[n!=null?n:O_(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:s,dataId:t}],s,c,u,n);return{dtype:s,shape:a,dataId:d.dataId}}runWebGLProgram(t,n,r,i,a=!1,s){let o=this.makeTensorInfo(t.outputShape,r),l=this.texData.get(o.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===S1.DENSE){let v=s!=null?s:O_(t.outputShape);l.texShape=v.map(b=>b*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),M.sizeFromShape(o.shape)===0)return l.values=M.getTypedArrayFromDType(o.dtype,0),o;let u=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!t.packedInputs&&M.sizeFromShape(v.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!t.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!C1(b.shape,v.shape)){let _=v,k=v.shape;v.shape=b.shape,v=this.packedReshape(v,k),u.push(v),b=this.texData.get(v.dataId),_.shape=k}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(o.dataId);let d={shape:o.shape,texData:l,isUniform:!1},p=Ott(t,c,d),h=this.getAndSaveBinary(p,()=>Ntt(this.gpgpu,t,c,d)),m=this.activeTimers!=null,g;m&&(g=this.startTimer()),fe().get("ENGINE_COMPILE_ONLY")||Ett(this.gpgpu,h,c,d,i),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),m&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)}));let y=fe().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){let v=M.now();v-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){let v=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),v}return o}compileAndRun(t,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(t,n,r,i,a)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ue(()=>{if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){let t=fe().getBool("DEBUG");fe().set("DEBUG",!1);let n=this.abs(gt(1e-8)).dataSync()[0];if(fe().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Znt:Xnt}uploadToGPU(t){let n=this.texData.get(t),{shape:r,dtype:i,values:a,texture:s,usage:o,isPacked:l}=n;if(s!=null)return;let u=this.activeTimers!=null,c;u&&(c=M.now());let d=n.texShape;if(d==null&&(d=Cse(r,l),n.texShape=d),a!=null){let p=mb(r),h,m=d[1],g=d[0],y=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!y)&&([m,g]=n0(d[0],d[1])),l?h=new Ltt(p,y):h=new zU(p,y);let v=y?[g,m]:d,b=this.makeTensorInfo(v,i),_=this.texData.get(b.dataId);y?_.usage=Es.PIXELS:_.usage=Es.UPLOAD,_.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,g,a);let k=[[g,m]],S=this.runWebGLProgram(h,[b],i,k,!0),$=this.texData.get(S.dataId);n.texShape=$.texShape,n.isPacked=$.isPacked,n.usage=$.usage,fe().get("ENGINE_COMPILE_ONLY")?this.disposeData(S.dataId):(n.texture=$.texture,n.values=null,this.texData.delete(S.dataId)),this.disposeIntermediateTensorInfo(b),u&&(this.uploadWaitMs+=M.now()-c)}else{let p=this.acquireTexture(d,o,i,l);n.texture=p}}convertAndCacheOnCPU(t,n){let r=this.texData.get(t),{dtype:i}=r;return n!=null&&(r.values=trt(n,i)),r.values}acquireTexture(t,n,r,i){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,i)}computeBytes(t,n){return t[0]*t[1]*M.bytesPerElement(n)}checkCompileCompletion(){for(let[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){let t=[];if(this.gpgpu.parallelCompilationExtension){for(let[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(let[,n]of Object.entries(this.binaryCache)){let r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await HL(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(Uz(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);let{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:l}=Dse(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=r,t.infLoc=i,t.nanLoc=a,t.outShapeLocation=s,t.outShapeStridesLocation=o,t.outTexShapeLocation=l}}createTensorFromGPUData(t,n,r){t.channels=t.channels||"RGBA";let{texture:i,height:a,width:s,channels:o}=t,l=eo().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=l.writeTexture(i,n,r,a,s,o);return eo().makeTensorFromDataId(u,n,r,l)}};t3.nextDataId=0;function trt(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){let n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}var nrt="4.16.0";function soe(){fe().set("WEBGL_FORCE_F16_TEXTURES",!0)}Ow.isBrowser()&&I$("webgl",()=>new t3,2);var rrt={forceHalfFloat:soe},n3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,_h=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=W.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=ra(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}},dm=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`,l0=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=W.assertAndGetBroadcastShape(t,n);let i=this.outputShape.length;this.enableShapeUniforms=ra(i);let a="";if(r)if(i===0||M.sizeFromShape(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${jn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let s=fa("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}};function bs(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var irt={kernelName:hf,backendName:"webgl",kernelFunc:bs};function Vd(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,a=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(a.dataId),o=bs({inputs:{x:r},backend:n}),l=bs({inputs:{x:i},backend:n});return s.complexTensorInfos={real:o,imag:l},a}var art={kernelName:d$,backendName:"webgl",kernelFunc:Vd},ooe="return (a < 0.) ? b * a : a;",loe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function srt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:a}=r,s=n.makeTensorInfo([],"float32",M.createScalarValue(a,"float32")),o=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new l0(loe,i.shape,s.shape):new _h(ooe,i.shape,s.shape),l=n.runWebGLProgram(o,[i,s],"float32");return n.disposeIntermediateTensorInfo(s),l}var ort={kernelName:yf,backendName:"webgl",kernelFunc:srt},uoe="return (a < 0.) ? b * a : a;",coe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function lrt(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t,a=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new l0(coe,r.shape,i.shape):new _h(uoe,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}var urt={kernelName:Mf,backendName:"webgl",kernelFunc:lrt},u0="if (isnan(x)) return x;";function ln({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{let{x:s}=i,o=a,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&n!=null){let d=o.texData.get(s.dataId),p=n(d.values,l);return o.makeTensorInfo(s.shape,l,p)}let u=fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null,c;return u?c=new Fc(s.shape,t):c=new Pl(s.shape,e),o.runWebGLProgram(c,[s],l)}}function zi({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:s,backend:o})=>{let{a:l,b:u}=s,c=o;if(r&&l.dtype==="complex64"){let m=c.texData.get(l.dataId),g=c.texData.get(u.dataId),[y,v]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(_=>{let[k,S]=_,$={dataId:k.dataId,dtype:k.dtype,shape:l.shape},N={dataId:S.dataId,dtype:S.dtype,shape:u.shape},P=new _h(e,l.shape,u.shape);return c.runWebGLProgram(P,[$,N],zs(k.dtype,S.dtype))}),b=Vd({inputs:{real:y,imag:v},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(v),b}let d=a||zs(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&i!=null){let m=c.texData.get(l.dataId).values,g=c.texData.get(u.dataId).values,y=l.dtype==="string"?W.fromUint8ToStringArray(m):m,v=l.dtype==="string"?W.fromUint8ToStringArray(g):g,[b,_]=i(l.shape,u.shape,y,v,d),k=c.makeTensorInfo(_,d),S=c.texData.get(k.dataId);return S.values=b,k}let p=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null,h;return p?h=new l0(t,l.shape,u.shape,n):h=new _h(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function I1(e,t=!1){if(e==="linear")return t?Vnt:Lnt;if(e==="relu")return t?Hnt:znt;if(e==="elu")return t?jnt:Fnt;if(e==="relu6")return t?Unt:Bnt;if(e==="prelu")return t?coe:uoe;if(e==="leakyrelu")return t?loe:ooe;if(e==="sigmoid")return t?Gnt:Wnt;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var doe=class{constructor(e,t,n,r=!1,i=!1,a=!1,s=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=ra(this.outputShape.length);let u=r?e[1]:e[2],c=Math.ceil(u/2),d=r?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";s&&(o?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:l?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:g=`vec4 activation(vec4 x) {
          ${s}
        }`,y="result = activation(result);");let v=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",_="rc.x";e[0]<t[0]?b=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(_=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${c}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${_};
        for (int i = 0; i < ${c}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${p});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${m[0]});
          result += (${h[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}},HU={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},UU=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=W.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}},GU="return a * b;";function r3(e){let{inputs:t,backend:n}=e,{a:r,b:i}=t,a=W.upcastType(r.dtype,i.dtype);if(r.dtype==="complex64"){let o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),u=new UU(HU.REAL,r.shape,i.shape),c=new UU(HU.IMAG,r.shape,i.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),m=Vd({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}if(n.shouldExecuteOnCPU([r,i])){let o=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[u,c]=snt(r.shape,i.shape,o.values,l.values,a),d=n.makeTensorInfo(c,a),p=n.texData.get(d.dataId);return p.values=u,d}let s;return fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new l0(GU,r.shape,i.shape):s=new _h(GU,r.shape,i.shape),n.runWebGLProgram(s,[r,i],a)}var crt={kernelName:Nf,backendName:"webgl",kernelFunc:r3};function drt(e,t,n){let r=[wh(e.shape),...xh(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[wh(t),...xh(t)],s=new ioe(a,r),o=!0,l=[r],u=n.runWebGLProgram(s,[i],e.dtype,l,o);return{dataId:u.dataId,shape:t,dtype:u.dtype}}function ze(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:a}=r,s=n,o=M.sizeFromShape(i.shape),l=M.inferFromImplicitShape(a,o),u=M.sizeFromShape(l);M.assert(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let c=s.texData.get(i.dataId);return c.isPacked&&!C1(i.shape,l)&&!(c.texture!==null&&C1(c.shape,l))?drt(i,l,s):(s.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}var prt={kernelName:$v,backendName:"webgl",kernelFunc:ze},qU=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let s=Math.floor(n/4)*4,o=n%4,l="sumValue += dot(values, ones);";if(t!=null){let c=1/t;l=`sumValue += dot(values * ${M.isInt(c)?c.toPrecision(2):c}, ones);`}let u="";i%n>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${s};
        if (${o===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${o===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${o===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}},hrt=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let s="0.0",o="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",o="min"):t==="max"&&(s="-1.0 / 1e-20",o="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");let u=Math.floor(n/4)*4,c=n%4,d=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${o}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${o}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,p="vec4";t==="all"?(s="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):t==="any"&&(s="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");let h="";i%n>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${c===1}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${c===2}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${c===3}) {
          ${p} values = ${p}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${l});
      }
    `}};function frt(e){let t=[];for(;t.length===0||t[t.length-1].outSize!==1;){let n=t.length?t[t.length-1].outSize:e[1],r=W.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function pm(e,t,n,r){let i=frt(e.shape),a=e;for(let s=0;s<i.length;s++){let{inSize:o,windowSize:l,outSize:u}=i[s],c,d;n==="mean"?c=s===0?new qU({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},o):new qU({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u}):c=new hrt({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:u},n),d=a,a=r.runWebGLProgram(c,[a],t),d.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(d)}return a}var mrt=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;let r=jn(this.rank),i=grt(t);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}};function grt(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}var yrt=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=jn(this.rank),i=roe("rc",this.rank),a=new Array(this.rank);for(let u=0;u<t.length;u++)a[t[u]]=i[u];let s=`vec2(${a.slice(-2).join()})`,o=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${a.join()}), ${s})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${o}) {
        result[1] = ${l};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {
        result[2] = ${l};
        if(${o}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}};function ET(e,t,n){let r=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yrt(e.shape,t):new mrt(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function vrt(e,t,n,r){let i=t,a=e.shape.length,s=M.parseAxisParam(i,e.shape),o=s,l=W.getAxesPermutation(o,a),u=l!=null,c=e;u&&(c=ET(e,l,r),o=W.getInnerMostAxes(o.length,a)),W.assertAxesAreInnerMostDims("sum",o,a);let[d,p]=W.computeOutAndReduceShapes(c.shape,o),h=d;n&&(h=W.expandShapeToKeepDim(d,s));let m=M.sizeFromShape(p),g=M.sizeFromShape(e.shape)/m,y=ze({inputs:{x:c},attrs:{shape:[g,m]},backend:r}),v=C$(e.dtype),b=pm(y,v,"sum",r),_=ze({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(b),u&&r.disposeIntermediateTensorInfo(c),_}function OT(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r;return vrt(i,a,s,n)}var brt={kernelName:Xf,backendName:"webgl",kernelFunc:OT};function va(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:a}=r,s=n,o=i.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=i.shape[a[c]];let u;if(s.shouldExecuteOnCPU([i])){let c=s.texData.get(i.dataId).values,d=e3(c,i.shape,i.dtype,a,l);u=s.makeTensorInfo(l,i.dtype);let p=s.texData.get(u.dataId);p.values=d}else u=ET(i,a,s);return u}var wrt={kernelName:Cu,backendName:"webgl",kernelFunc:va},poe=1e3;function EI({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){let u=e.shape.length,c=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],p=r?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],m=r?t.shape[c-2]:t.shape[c-1],g=e.shape.slice(0,-2),y=t.shape.slice(0,-2),v=M.sizeFromShape(g),b=M.sizeFromShape(y),_=Uv.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,m]);M.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let k=n?[v,d,h]:[v,h,d],S=r?[b,m,p]:[b,p,m],$=ze({inputs:{x:e},backend:i,attrs:{shape:k}}),N=ze({inputs:{x:t},backend:i,attrs:{shape:S}}),P=[$,N],D=Math.max(v,b),O=n?$.shape[1]:$.shape[2],F=a!=null,E=s!=null,z=l==="leakyrelu",q=l!=null?I1(l,!0):null,K=F||E||z||q!=null,Z;if((h===1||m===1)&&O>poe&&K===!1){let V=$,ee=N;n&&(V=va({inputs:{x:$},backend:i,attrs:{perm:[0,2,1]}}),P.push(V)),r&&(ee=va({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),P.push(ee));let Y=m!==1,Q=m===1,oe=V;Y&&(oe=ze({inputs:{x:V},backend:i,attrs:{shape:[D,O,1]}}),P.push(oe));let pe=m===1?2:1,he=ee;Q&&(he=ze({inputs:{x:ee},backend:i,attrs:{shape:[D,1,O]}}),P.push(he));let ge=r3({inputs:{a:oe,b:he},backend:i});Z=OT({inputs:{x:ge},backend:i,attrs:{axis:pe,keepDims:!0}}),P.push(ge)}else{let V=zs(e.dtype,t.dtype),ee=new doe(k,S,[D,h,m],n,r,F,q,E,z),Y=[$,N];if(a!=null&&Y.push(a),E&&Y.push(s),z){let Q=i.makeTensorInfo([],"float32",M.createScalarValue(o,"float32"));Y.push(Q),P.push(Q)}Z=i.runWebGLProgram(ee,Y,V)}let te=ze({inputs:{x:Z},backend:i,attrs:{shape:_}});P.push(Z);for(let V of P)i.disposeIntermediateTensorInfo(V);return te}function xrt(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return EI({a:i,b:a,transposeA:l,transposeB:u,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:d,activation:c})}var _rt={kernelName:ih,backendName:"webgl",kernelFunc:xrt},KU="return abs(x);";function krt(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){let a=n.texData.get(r.dataId),s=toe(a.values);return n.makeTensorInfo(r.shape,r.dtype,s)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Fc(r.shape,KU):i=new Pl(r.shape,KU),n.runWebGLProgram(i,[r],r.dtype)}var Srt={kernelName:jy,backendName:"webgl",kernelFunc:krt},Crt=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Irt=ln({opSnippet:Crt}),$rt={kernelName:Lh,backendName:"webgl",kernelFunc:Irt},Trt=xo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,Nrt=ln({opSnippet:Trt}),Ert={kernelName:Fh,backendName:"webgl",kernelFunc:Nrt},ZU="return a + b;",Ort=zi({opSnippet:ZU,packedOpSnippet:ZU,supportsComplex:!0,cpuKernelImpl:ztt}),Prt={kernelName:Pd,backendName:"webgl",kernelFunc:Ort},Mrt=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((i,a)=>`T${a}`);let n=[];this.variableNames.forEach(i=>{n.push(`float v${i} = get${i}AtOutCoords();`)});let r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${n.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}},Art=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((i,a)=>`T${a}`);let n=[];this.variableNames.forEach(i=>{n.push(`vec4 v${i} = get${i}AtOutCoords();`)});let r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${n.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}};function $k(e){let{inputs:t,backend:n}=e,r=t;if(r.length===1)return bs({inputs:{x:r[0]},backend:n});if(r.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let o=Math.floor(r.length/2),l=$k({inputs:r.slice(0,o),backend:n}),u=$k({inputs:r.slice(o),backend:n});return $k({inputs:[l,u],backend:n})}let i=r.map(o=>o.dtype).reduce((o,l)=>zs(o,l)),a=r.map(o=>o.shape),s=fe().getBool("WEBGL_PACK")?new Art(r[0].shape,a):new Mrt(r[0].shape,a);return n.runWebGLProgram(s,r,i)}var Rrt={kernelName:zh,backendName:"webgl",kernelFunc:$k};function Drt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=M.parseAxisParam(a,i.shape),u=l,c=W.getAxesPermutation(u,o),d=i;c!=null&&(d=va({inputs:{x:i},backend:n,attrs:{perm:c}}),u=W.getInnerMostAxes(u.length,o)),W.assertAxesAreInnerMostDims("all",u,o);let[p,h]=W.computeOutAndReduceShapes(d.shape,u),m=M.sizeFromShape(h),g=ze({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=pm(g,g.dtype,"all",n),v;if(s){let b=W.expandShapeToKeepDim(p,l);v=ze({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=ze({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),v}var Lrt={kernelName:Hy,backendName:"webgl",kernelFunc:Drt};function Frt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=M.parseAxisParam(a,i.shape),u=l,c=W.getAxesPermutation(u,o),d=i;c!=null&&(d=va({inputs:{x:i},backend:n,attrs:{perm:c}}),u=W.getInnerMostAxes(u.length,o)),W.assertAxesAreInnerMostDims("any",u,o);let[p,h]=W.computeOutAndReduceShapes(d.shape,u),m=M.sizeFromShape(h),g=ze({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=pm(g,g.dtype,"any",n),v;if(s){let b=W.expandShapeToKeepDim(p,l);v=ze({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=ze({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),v}var zrt={kernelName:Uy,backendName:"webgl",kernelFunc:Frt},Brt=class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:i,outSize:a}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];let s=t==="max"?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${o};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}},Wrt=class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");let s=this.outputShape,o=s.length,l=jn(o),u=fa("coords",o),c,d;if(a===1){d=o+1;let N=jn(d);c=`
        ${N} sourceLocR = ${N}(${u.join()}, 0);
        ++${u[o-1]};
        ${N} sourceLocG = ${N}(${u.join()}, 0);
        ++${u[o-2]};
        ${N} sourceLocA = ${N}(${u.join()}, 0);
        --${u[o-1]};
        ${N} sourceLocB = ${N}(${u.join()}, 0);
        --${u[o-2]};`}else d=o,c=`
        ${l} sourceLocR = coords;
        ++${u[o-1]};
        ${l} sourceLocG = coords;
        ++${u[o-2]};
        ${l} sourceLocA = coords;
        --${u[o-1]};
        ${l} sourceLocB = coords;
        --${u[o-2]};`;let p=["x","y","z","w","u","v"].slice(0,d),h="."+p[d-1],m=p.map(N=>"int "+N),g=fa("sourceLocR",d-1).concat("inIdx.r"),y=fa("sourceLocG",d-1).concat("inIdx.g"),v=fa("sourceLocB",d-1).concat("inIdx.b"),b=fa("sourceLocA",d-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",k=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()})));`,S=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,$=r?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${p.join()}),
                                          vec2(${p.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${p.join()}),
                               vec2(${p.slice(-2).join()}));
      }
      ${$}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${u[o-1]} < ${s[o-1]-1};
        bool hasNextRow = ${u[o-2]} < ${s[o-2]-1};
        ${c}
        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},
          sourceLocB${h}, sourceLocA${h}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${S};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${k}
          vec4 candidate = ${S};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function hoe(e,t,n,r=null){let i=t.shape[0],a=t.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);let s=W.computeOptimalWindowSize(a),o={windowSize:s,inSize:a,batchSize:i,outSize:Math.ceil(a/s)},l=new Brt(o,n,r==null),u=[t];r!=null&&u.push(r);let c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;let d=hoe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function foe(e,t,n,r=null){let i=r!=null?r.shape:t.shape,a=i[i.length-1],s=W.computeOptimalWindowSize(a),o=new Wrt(i,s,n,r==null),l=r==null?[t]:[t,r],u=e.runWebGLProgram(o,l,"int32");if(u.shape.length===t.shape.length){let c=foe(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function moe(e,t,n,r){let i=[n];if(W.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!fe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let a=[],s=e.texData.get(t.dataId),o=s!==null&&s.isPacked,l=t;o&&(l=e.unpackTensor(t),a.push(l));let[u,c]=W.computeOutAndReduceShapes(l.shape,i),d=M.sizeFromShape(c),p=ze({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});a.push(p);let h=hoe(e,p,r);a.push(h);let m=ze({inputs:{x:h},backend:e,attrs:{shape:u}});return a.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}return foe(e,t,r)}function Vrt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r,s=M.parseAxisParam(a,i.shape),o=W.getAxesPermutation(s,i.shape.length),l=i,u=[];o!=null&&(l=va({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),s=W.getInnerMostAxes(s.length,l.shape.length)),W.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let c=moe(n,l,s[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}var jrt={kernelName:Gy,backendName:"webgl",kernelFunc:Vrt};function Hrt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a}=r,s=M.parseAxisParam(a,i.shape),o=W.getAxesPermutation(s,i.shape.length),l=i,u=[];o!=null&&(l=va({inputs:{x:i},backend:n,attrs:{perm:o}}),u.push(l),s=W.getInnerMostAxes(s.length,l.shape.length)),W.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let c=moe(n,l,s[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}var Urt={kernelName:qy,backendName:"webgl",kernelFunc:Hrt},Grt=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,qrt=ln({opSnippet:Grt}),Krt={kernelName:Bh,backendName:"webgl",kernelFunc:qrt},Zrt=xo+"return log(x + sqrt(x * x + 1.0));",Xrt=ln({opSnippet:Zrt}),Jrt={kernelName:Wh,backendName:"webgl",kernelFunc:Xrt},Yrt=xo+`
  return atan(x);
`,Qrt=ln({opSnippet:Yrt}),eit={kernelName:Vh,backendName:"webgl",kernelFunc:Qrt},tit=n3+`
  return atan(a, b);
`,nit=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dm+`
  return result;
`,rit=zi({opSnippet:tit,packedOpSnippet:nit}),iit={kernelName:Hh,backendName:"webgl",kernelFunc:rit},ait=xo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,sit=ln({opSnippet:ait}),oit={kernelName:jh,backendName:"webgl",kernelFunc:sit},$1=class{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let a=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;let m=t==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,v="0.0";if(m||(v="-1.0 / 1e-20"),n){let N=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${o});
        const ivec2 pads = ivec2(${p}, ${h});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${c};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?i?g:y:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let b="max",_=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(_="avgValue / max(count, 1.0)");let k=Math.floor(a/4)*4,S=a%4,$=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${p}, ${h});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${c};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${k}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${$}
          }

          int xC = xCCorner + ${k};
          if (${S===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${S===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${$}
          }
        }
        setOutput(${_});
      }
    `}},i3=class{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");let a=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,p=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;let b=t==="avg",_="0.0";if(b||(_="-1.0 / 1e-20"),n){let D=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${o}, ${l});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${p};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${h};
                wR += ${c}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${D} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let k="max",S=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(S="avgValue / max(count, 1.0)");let $=Math.floor(a/4)*4,N=a%4,P=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${o}, ${l});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${p};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h};
            wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${$}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${$};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${S});
      }
    `}};function lit(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;r0(i,"avgPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,u=1;M.assert(W.eitherStridesOrDilationsAreOne(s,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=W.computePool2DInfo(i.shape,a,s,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&M.arraysEqual(c.inShape,c.outShape))return bs({inputs:{x:i},backend:n});let d=new $1(c,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}var uit={kernelName:Uh,backendName:"webgl",kernelFunc:lit};function cit(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=W.computePool3DInfo(i.shape,a,s,c,o,l,u),p=new i3(d,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}var dit={kernelName:Ky,backendName:"webgl",kernelFunc:cit},pit=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=o-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${c});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},hit=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=c-1-e.padInfo.front,m=d-1-e.padInfo.top,g=p-1-e.padInfo.left,y=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(${h}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function fit(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=W.computePool3DInfo(s.shape,o,l,d,u,c),h=new hit(p);return n.runWebGLProgram(h,[i],s.dtype)}var mit={kernelName:lw,backendName:"webgl",kernelFunc:fit};function git(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a;r0([i,a],"avgPoolGrad");let{filterSize:o,strides:l,pad:u}=r,c=W.computePool2DInfo(s.shape,o,l,1,u),d=new pit(c);return n.runWebGLProgram(d,[i],s.dtype)}var yit={kernelName:ow,backendName:"webgl",kernelFunc:git};function vit(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:s,transposeB:o}=r;return EI({a:i,b:a,transposeA:s,transposeB:o,backend:n})}var bit={kernelName:Gh,backendName:"webgl",kernelFunc:vit},wit=class{constructor(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],W.assertAndGetBroadcastShape(e,t),W.assertAndGetBroadcastShape(e,n);let s="0.0";r!=null&&(W.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";i!=null&&(W.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${o};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}},xit=class{constructor(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],W.assertAndGetBroadcastShape(e,t),W.assertAndGetBroadcastShape(e,n);let s="vec4(0.0)";r!=null&&(W.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";i!=null&&(W.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${o};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}},_it=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:i,variance:a,offset:s,scale:o}=e;M.assert(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M.assert(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M.assert(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);let u=[r,i,a],c=null;s!=null&&(c=s.shape,u.push(s));let d=null;o!=null&&(d=o.shape,u.push(o));let p=fe().getBool("WEBGL_PACK_NORMALIZATION")?new xit(r.shape,i.shape,a.shape,c,d,l):new wit(r.shape,i.shape,a.shape,c,d,l);return t.runWebGLProgram(p,u,u[0].dtype)},kit={kernelName:df,backendName:"webgl",kernelFunc:_it},Sit=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=jn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=Cit(this.rank),r,i=e.map((a,s)=>`sourceLoc.${SM[s]} = start[${s}] + coords.${SM[s]};`);r=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${n}));
      }
    `}},SM=["x","y","z","w","u","v"];function Cit(e){if(e===1)return"sourceLoc";if(e<=6)return SM.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}var Iit=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=jn(this.rank),n=fa("coords",this.rank),r=fa("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,s=`
      result.x = ${a};
      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${a};
        --${r[this.rank-1]};
      }
    `,o=this.rank===1?"":`
      --${n[this.rank-1]};
      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${a};
        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${a};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((u,c)=>`start[${c}]`).join()});`:e.map((u,c)=>`${r[c]} = ${n[c]} + start[${c}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${s}
        ${o}
        setOutput(result);
      }
    `}};function $it(e,t,n,r){let i=r.texData.get(e.dataId),a=r.makeTensorInfo(n,e.dtype),s=r.texData.get(a.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=ti.computeFlatOffset(t,M.computeStrides(e.shape));i.slice&&(o+=i.slice.flatOffset),s.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||e.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),a}function c0(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,size:s}=r,[o,l]=ti.parseSliceParams(i,a,s);if(ti.assertParamsValid(i,o,l),M.sizeFromShape(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){let d=n.texData.get(i.dataId),p=ynt(d.values,o,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,p)}let{isPacked:u}=n.texData.get(i.dataId),c=ti.isSliceContinous(i.shape,o,l);if(u||!c){let d=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Iit(l):new Sit(l),p=[o];return n.runWebGLProgram(d,[i],i.dtype,p)}return n.uploadToGPU(i.dataId),$it(i,o,l,n)}var Tit={kernelName:Av,backendName:"webgl",kernelFunc:c0},Nit=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:s}=r;M.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=a.reduce((b,_)=>b*_),l=W.getReshaped(i.shape,a,o),u=W.getPermuted(l.length,a.length),c=W.getReshapedPermuted(i.shape,a,o),d=W.getSliceBeginCoords(s,a.length),p=W.getSliceSize(c,s,a.length),h=[],m=ze({inputs:{x:i},backend:n,attrs:{shape:l}}),g=va({inputs:{x:m},backend:n,attrs:{perm:u}}),y=ze({inputs:{x:g},backend:n,attrs:{shape:c}}),v=c0({inputs:{x:y},backend:n,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(y),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},Eit={kernelName:Zy,backendName:"webgl",kernelFunc:Nit};function Oit(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s}=r,o=n.readSync(i.dataId),l=n.readSync(a.dataId),u=eoe(o,l,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,u)}var Pit={kernelName:Xy,backendName:"webgl",kernelFunc:Oit},Mit=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Ait=`
  return float(int(a.r) & int(b.r));
`;function Rit(e){let{inputs:t,backend:n}=e,{a:r,b:i}=t,a=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=fe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||s===1){let l=n.texData.get(r.dataId).values,u=n.texData.get(i.dataId).values,[c,d]=Wtt(r.shape,i.shape,l,u,r.dtype),p=n.makeTensorInfo(d,r.dtype),h=n.texData.get(p.dataId);return h.values=c,p}let o;return a?o=new l0(Mit,r.shape,i.shape,!1):o=new _h(Ait,r.shape,i.shape),n.runWebGLProgram(o,[r,i],r.dtype)}var Dit={kernelName:Jy,backendName:"webgl",kernelFunc:Rit};function Lit(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.readSync(r.dataId),s=n.readSync(i.dataId),o=W.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}var Fit={kernelName:uw,backendName:"webgl",kernelFunc:Lit},zit="return float(a != b);",goe=zi({opSnippet:zit,cpuKernelImpl:lnt,dtype:"bool"}),Bit={kernelName:xv,backendName:"webgl",kernelFunc:goe};function ax(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return bs({inputs:{x:i.complexTensorInfos.real},backend:n})}var Wit={kernelName:k$,backendName:"webgl",kernelFunc:ax},Vit="return float(int(x));";function jit(e,t){let n=new Pl(e.shape,Vit),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function CM(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return bs({inputs:{x:i},backend:n});let s=yr(i.shape),o=CM({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Vd({inputs:{real:o,imag:s},backend:n});return s.dispose(),n.disposeIntermediateTensorInfo(o),l}if(i.dtype==="complex64"){let s=ax({inputs:{input:i},backend:n}),o=CM({inputs:{x:s},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(s),o}if(!M.hasEncodingLoss(i.dtype,a)){let s=bs({inputs:{x:i},backend:n});return{dataId:s.dataId,shape:s.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){let s=n.texData.get(i.dataId).values,[o,l,u]=Vtt(s,i.shape,i.dtype,a);return n.makeTensorInfo(o,l,u)}if(a==="int32")return jit(i,n);if(a==="bool"){let s=n.makeTensorInfo([],"bool",M.getTypedArrayFromDType("bool",1)),o=goe({inputs:{a:i,b:s},backend:n});return n.disposeIntermediateTensorInfo(s),o}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}var Hit={kernelName:qh,backendName:"webgl",kernelFunc:CM},XU="return ceil(x);",Uit=ln({opSnippet:XU,packedOpSnippet:XU,cpuKernelImpl:jtt}),Git={kernelName:Kh,backendName:"webgl",kernelFunc:Uit},qit=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}},Kit=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function Zit(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:a,clipValueMax:s}=r,o;fe().getBool("WEBGL_PACK_CLIP")?o=new Kit(i.shape):o=new qit(i.shape);let l=[[a],[s]];return n.runWebGLProgram(o,[i],i.dtype,l)}var Xit={kernelName:Md,backendName:"webgl",kernelFunc:Zit},Jit=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function JU(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function Yit(e){let{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),a=new Jit(r.shape),s=[JU(r,i.complexTensorInfos.real),JU(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,s,s[0].dtype)}var Qit={kernelName:cw,backendName:"webgl",kernelFunc:Yit},eat=class{constructor(e){this.outputShape=[],this.outputShape=W.computeOutShape(e,1),this.variableNames=e.map((a,s)=>`T${s}`);let t=new Array(e.length-1);t[0]=e[0][1];for(let a=1;a<t.length;a++)t[a]=t[a-1]+e[a][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<t.length;a++){let s=t[a-1];n.push(`else if (yC < ${t[a]}) setOutput(getT${a}(yR, yC-${s}));`)}let r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${n.join(`
        `)}
      }
    `}},tat=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=W.computeOutShape(e,t);let n=this.outputShape,r=n.length,i=jn(r),a=fa("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((m,g)=>`T${g}`);let o=new Array(e.length-1);o[0]=e[0][t];for(let m=1;m<o.length;m++)o[m]=o[m-1]+e[m][t];let l=s[t],u=s.slice(-2),c=s.join(),d=`if (${l} < ${o[0]}) {
        return getChannel(
            getT0(${c}), vec2(${u.join()}));
        }`;for(let m=1;m<o.length;m++){let g=o[m-1];d+=`
        if (${l} < ${o[m]}  && ${l} >= ${o[m-1]}) {
          return getChannel(
            getT${m}(${M_(s,l,g)}),
            vec2(${M_(u,l,g)}));
        }`}let p=o.length,h=o[o.length-1];d+=`
        return getChannel(
          getT${p}(${M_(s,l,h)}),
          vec2(${M_(u,l,h)}));`,this.userCode=`
      float getValue(${s.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[r-1]} = ${a[r-1]} + 1;
        if (${a[r-1]} < ${n[r-1]}) {
          result.g = getValue(${a});
        }

        ${a[r-2]} = ${a[r-2]} + 1;
        if (${a[r-2]} < ${n[r-2]}) {
          result.a = getValue(${a});
        }

        ${a[r-1]} = ${a[r-1]} - 1;
        if (${a[r-2]} < ${n[r-2]} &&
            ${a[r-1]} < ${n[r-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}};function M_(e,t,n){let r=e.indexOf(t);return e.map((i,a)=>a===r?`${i} - ${n}`:i).join()}function PT(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.texData.get(r.dataId);return bs({inputs:{x:i.complexTensorInfos.imag},backend:n})}var nat={kernelName:b$,backendName:"webgl",kernelFunc:PT};function gb(e,t,n){let r=e[0].dtype;if(r==="complex64"){let h=e.map(b=>ax({inputs:{input:b},backend:n})),m=e.map(b=>PT({inputs:{input:b},backend:n})),g=gb(h,t,n),y=gb(m,t,n),v=Vd({inputs:{real:g,imag:y},backend:n});return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),m.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),v}let i=n.shouldExecuteOnCPU(e);if(r==="string"&&(i=!0),i){let h=e.map(k=>{let S=[-1,M.sizeFromShape(k.shape.slice(t))];return ze({inputs:{x:k},backend:n,attrs:{shape:S}})}),m=h.map(k=>({vals:n.readSync(k.dataId),shape:k.shape})),g=W.computeOutShape(h.map(k=>k.shape),1),y=h[0].shape[0]===1,v=Htt(m,g,r,y),b=W.computeOutShape(e.map(k=>k.shape),t),_=n.makeTensorInfo(b,r,v);return h.forEach(k=>n.disposeIntermediateTensorInfo(k)),_}let a=e.filter(h=>M.sizeFromShape(h.shape)>0),s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){let h=s?new Pl(e[0].shape,Cc):new Fc(e[0].shape,Cc);return n.runWebGLProgram(h,e,r)}let o=fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){let h=[];for(let g=0;g<a.length;g+=o){let y=a.slice(g,g+o);h.push(gb(y,t,n))}let m=gb(h,t,n);for(let g of h)n.disposeIntermediateTensorInfo(g);return m}if(s){let h=new tat(a.map(m=>m.shape),t);return n.runWebGLProgram(h,a,r)}let{tensors2D:l,outShape:u}=rat(a,t,n),c=new eat(l.map(h=>h.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));let p=ze({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),p}function rat(e,t,n){let r=W.computeOutShape(e.map(i=>i.shape),t);return{tensors2D:e.map(i=>ze({inputs:{x:i},attrs:{shape:[-1,M.sizeFromShape(i.shape.slice(t))]},backend:n})),outShape:r}}function yoe(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,a=M.parseAxisParam(i,t[0].shape)[0],s=t.map(u=>u.shape);W.assertParamsConsistent(s,a);let o=W.computeOutShape(t.map(u=>u.shape),a);if(M.sizeFromShape(o)===0)return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(u=>M.sizeFromShape(u.shape)>0);return l.length===1?bs({inputs:{x:l[0]},backend:n}):gb(l,a,n)}var iat={kernelName:Yy,backendName:"webgl",kernelFunc:yoe},voe=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let a=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,b=g?3:1,_="",k="";n&&(r?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:_=`
          float activation(float x) {
            ${n}
          }
        `,k="result = activation(result);");let S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${a}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${p}; wC++) {
            int xC = xCCorner + wC * ${c};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${h}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${h}) *
                    getW(wR, wC, ${h}, d2);
              } else {
                dotProd +=
                    getX(batch, ${h}, xR, xC) *
                    getW(wR, wC, ${h}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${h}, d2),
                getW(wR, wC, ${h} + 1, d2),
                getW(wR, wC, ${h} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${h}),
                  getX(batch, xR, xC, ${h} + 1),
                  getX(batch, xR, xC, ${h} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${h}, xR, xC),
                  getX(batch, ${h} + 1, xR, xC),
                  getX(batch, ${h} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${S}
        ${k}
        setOutput(result);
      }
    `}},aat=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,p=e.filterWidth,h=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${s});
      const ivec3 pads = ivec3(${t}, ${n}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${c}; wF++) {
          int xF = xFCorner + wF * ${o};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${h}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${h}) *
                  getW(wF, wR, wC, ${h}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${h}),
                  getX(batch, xF, xR, xC, ${h} + 1),
                  getX(batch, xF, xR, xC, ${h} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${h}, d2),
                  getW(wF, wR, wC, ${h} + 1, d2),
                  getW(wF, wR, wC, ${h} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},boe=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ra(this.outputShape.length);let a=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=u,d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)d+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;d+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)d+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(c+1)/2;g++){let y=g*2;if(d+=`
           xC = xCCorner + ${y*o};
           `,s===1){if(y<u&&(a%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,o===1&&y>0?d+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){let v=a%2===0?M.nearestLargerEven(o):o;o%2===0&&a%2===1||o%2!==0&&a%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,o>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:d+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?d+=`
                     xC${y+1} = xTexelC${y};
                     `:d+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(a%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(d+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(d+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(d+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let p="",h="";n&&(r?p=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${n}
         }`:i?p=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${n}
         }`:p=`vec4 activation(vec4 x) {
           ${n}
         }`,h="result = activation(result);");let m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${p}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${h}
         setOutput(result);
       }
     `}},sat=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ra(this.outputShape.length);let{dataFormat:n}=t,r=Ia(),i=n==="channelsLast",a=i?1:2,s=i?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`,l="";for(let u=0;u<=1;u++)for(let c=0;c<=1;c++)l+=`
          blockIndex = rc.z + ${c};
          pos = rc.y + ${u};

          ${o}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+c}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+c}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${r.output} = result;
      }
    `}};function OI(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function woe({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){let l=e.shape,u=r.texData.get(e.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,h=n.dataFormat==="channelsLast",m=!1,g=!1,y,v=[];if(a!=null){let b=OI(a.shape,h);b!=null&&(a=ze({inputs:{x:a},backend:r,attrs:{shape:b}}),v.push(a))}if(i!=null){let b=OI(i.shape,h);b!=null&&(i=ze({inputs:{x:i},backend:r,attrs:{shape:b}}),v.push(i))}if(!((d===1||p===1)&&c>poe)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&M.arraysEqual(u.shape.slice(-3),l.slice(-3))){let b=l[0]*l[1]*(l[2]+1),_={dataId:e.dataId,shape:[1,b,n.inChannels],dtype:e.dtype},k=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,M.assert(C1(u.shape,_.shape),()=>`packed reshape ${u.shape} to ${_.shape} isn't free`);let S=ze({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(S);let $=EI({a:_,b:S,backend:r,transposeA:m,transposeB:g,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s}),N=r.texData.get($.dataId);M.assert(N.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=k,N.shape=n.outShape,y=bs({inputs:{x:$},backend:r}),y.shape=n.outShape,v.push($)}else{let b=n.outHeight*n.outWidth,_=ze({inputs:{x:e},backend:r,attrs:{shape:h?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),k=ze({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),S=EI({a:h?_:k,b:h?k:_,transposeA:!h,transposeB:g,backend:r,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s});y=ze({inputs:{x:S},backend:r,attrs:{shape:n.outShape}}),v.push(_),v.push(k),v.push(S)}for(let b of v)r.disposeIntermediateTensorInfo(b);return y}function xoe({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){let{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:p,dataFormat:h}=n,m=h==="channelsLast",g=l*u*c,y=p*d,v=[n.batchSize,g,y],b=!0,_=!1,k=[];if(a!=null){let V=OI(a.shape,m);V!=null&&(a=ze({inputs:{x:a},backend:r,attrs:{shape:V}}),k.push(a))}if(i!=null){let V=OI(i.shape,m);V!=null&&(i=ze({inputs:{x:i},backend:r,attrs:{shape:V}}),k.push(i))}let S=ze({inputs:{x:t},backend:r,attrs:{shape:[1,g,M.sizeFromShape(t.shape)/g]}});k.push(S);let $=new sat(v,n),N=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],P=r.runWebGLProgram($,[e],"float32",N),D=ze({inputs:{x:P},backend:r,attrs:{shape:v}});k.push(P),k.push(D);let O=i!=null,F=a!=null,E=o==="leakyrelu",z=o?I1(o,!0):null,q=new doe(m?D.shape:S.shape,m?S.shape:D.shape,m?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],b,_,O,z,F,E),K=m?[D,S]:[S,D];if(i&&K.push(i),F&&K.push(a),E){let V=r.makeTensorInfo([],"float32",M.createScalarValue(s,"float32"));K.push(V),k.push(V)}let Z=r.runWebGLProgram(q,K,"float32"),te=ze({inputs:{x:Z},backend:r,attrs:{shape:n.outShape}});k.push(Z);for(let V of k)r.disposeIntermediateTensorInfo(V);return te}function oat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=W.convertConv2DDataFormat(l),p=W.computeConv2DInfo(i.shape,a.shape,s,u,o,c,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=woe({x:i,filter:a,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){let g=new boe(p),y=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=n.runWebGLProgram(g,[i,a],"float32",y)}else if(fe().getBool("WEBGL_CONV_IM2COL"))h=xoe({x:i,filter:a,convInfo:p,backend:n});else{let g=new voe(p);h=n.runWebGLProgram(g,[i,a],"float32")}let m=ze({inputs:{x:h},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(h),m}var lat={kernelName:Zh,backendName:"webgl",kernelFunc:oat},uat=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},cat=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=a?1:2,u=a?2:3,c=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${c}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},dat=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${n} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},pat=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${o}, ${l}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${n}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${n} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function hat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=W.convertConv2DDataFormat(l),p=W.computeConv2DInfo(i.shape,c,s,1,o,u,!1,d),h=new uat(p);return n.runWebGLProgram(h,[i,a],"float32")}var fat={kernelName:p$,backendName:"webgl",kernelFunc:hat},mat=class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ra(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            int wCPerm = ${n} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function gat(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{inputShape:s,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=W.convertConv2DDataFormat(u),p=W.computeConv2DInfo(s,a.shape,o,1,l,c,!1,d);if(fe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new mat(p);return n.runWebGLProgram(m,[i,a],"float32",h)}else{let h=new cat(p);return n.runWebGLProgram(h,[i,a],"float32")}}var yat={kernelName:Xh,backendName:"webgl",kernelFunc:gat};function vat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r,u=W.computeConv3DInfo(i.shape,a.shape,s,l,o),c=new aat(u);return n.runWebGLProgram(c,[i,a],"float32")}var bat={kernelName:Jh,backendName:"webgl",kernelFunc:vat};function wat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,filterShape:l}=r,u=W.computeConv3DInfo(i.shape,l,s,1,o),c=new dat(u);return n.runWebGLProgram(c,[i,a],"float32")}var xat={kernelName:Qy,backendName:"webgl",kernelFunc:wat};function _at(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:s,strides:o,inputShape:l}=r,u=W.computeConv3DInfo(l,a.shape,o,1,s),c=new pat(u);return n.runWebGLProgram(c,[i,a],"float32")}var kat={kernelName:ev,backendName:"webgl",kernelFunc:_at},Sat=u0+`
  return cos(x);
`,Cat=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${dm}
  return result;
`,Iat=ln({opSnippet:Sat,packedOpSnippet:Cat}),$at={kernelName:Yh,backendName:"webgl",kernelFunc:Iat},Tat=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,Nat=ln({opSnippet:Tat}),Eat={kernelName:Qh,backendName:"webgl",kernelFunc:Nat},Oat=class{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,s,o,l]=e,[u]=t,[c,d]=n;this.outputShape=[u,c,d,l];let p=r==="bilinear"?1:0,[h,m]=[`${s-1}.0`,`${o-1}.0`],[g,y,v]=c>1?[`${(s-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[b,_,k]=d>1?[`${(o-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${_};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${h} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${k};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${p} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}},Pat=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:a,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:u}=r,c=new Oat(i.shape,a.shape,o,l,u);return n.runWebGLProgram(c,[i,a,s],"float32")},Mat={kernelName:nv,backendName:"webgl",kernelFunc:Pat},T1;(function(e){e.Prod="*",e.Sum="+"})(T1||(T1={}));var YU=class{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,a=this.op===T1.Prod?"1.0":"0.0",s=n?a:`getX(${QU(i,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1],l="",u="";n?(l=r?`end != ${o-1}`:"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${o}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${jn(i)} coords = getOutputCoords();
        int end = ${e8(i,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${u};
          ${e8(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${QU(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function QU(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function e8(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function _oe(e,t,n,r,i,a){let s=t.shape.length,o=W.getAxesPermutation([r],s),l=t;o!=null&&(l=va({inputs:{x:t},backend:n,attrs:{perm:o}}));let u=W.getInnerMostAxes(1,s)[0];if(u!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let c=l.shape[u],d=bs({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(c))-1;p++){let h=new YU(e,l.shape,!1,a),m=[[p]],g=d;d=n.runWebGLProgram(h,[d],d.dtype,m),n.disposeIntermediateTensorInfo(g)}if(i){let p=new YU(e,l.shape,i,a),h=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(o!=null){let p=W.getUndoAxesPermutation(o),h=va({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}function Aat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;return _oe(T1.Prod,i,n,a,s,o)}var Rat={kernelName:tv,backendName:"webgl",kernelFunc:Aat};function Dat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r;return _oe(T1.Sum,i,n,a,s,o)}var Lat={kernelName:ef,backendName:"webgl",kernelFunc:Dat};function Fat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:a}=t,{size:s,binaryOutput:o}=r;if(i.shape.length===1){let l=n.readSync(i.dataId),u=n.readSync(a.dataId),c=eoe(l,u,a.dtype,a.shape,s);return n.makeTensorInfo([s],a.dtype,c)}else if(i.shape.length===2){let l=n.bufferSync(i),u=n.bufferSync(a),c=Btt(l,u,s,o);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}var zat={kernelName:dw,backendName:"webgl",kernelFunc:Fat},Bat=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function Wat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:s}=r,o=i.shape[0],l=s==="NHWC"?i.shape[1]:i.shape[2],u=s==="NHWC"?i.shape[2]:i.shape[3],c=s==="NHWC"?i.shape[3]:i.shape[1],d=l*a,p=u*a,h=c/(a*a),m=s==="NHWC"?[o,d,p,h]:[o,h,d,p],g=new Bat(m,a,s);return n.runWebGLProgram(g,[i],i.dtype)}var Vat={kernelName:rv,backendName:"webgl",kernelFunc:Wat},koe=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ra(this.outputShape.length);let a=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",u="";n&&(r?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:l=`
          float activation(float x) {
            ${n}
          }
        `,u="result = activation(result);");let c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${c}
        ${u}
        setOutput(result);
      }
    `}},Soe=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ra(this.outputShape.length);let a=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c,p=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)p+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;p+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<c;y++)p+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;p+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(d+1)/2;y++){let v=y*2;if(p+=`
          xC = xCCorner + ${v*l};
          `,o===1){if(v<c&&(s%2===1?(p+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,l===1&&v>0?p+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:p+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):p+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<c)){let b=s%2===0?M.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,l>1?p+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:p+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):b===1?p+=`
                    xC${v+1} = xTexelC${v};
                    `:p+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<c&&(s%2===1?(p+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<c&&(p+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<c&&(p+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<c&&(p+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<c&&(p+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}p+=`
    }
  `,p+=`
      }
    `;let h="",m="";n&&(r?h=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:i?h=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:h=`vec4 activation(vec4 x) {
          ${n}
        }`,m="result = activation(result);");let g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${h}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${p}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}};function jat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:u}=r,c=l;c==null&&(c=[1,1]),M.assert(W.eitherStridesOrDilationsAreOne(s,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let d=W.computeConv2DInfo(i.shape,a.shape,s,c,o,u,!0),p;fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Soe(d):p=new koe(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,a],"float32",h)}var Hat={kernelName:tf,backendName:"webgl",kernelFunc:jat},Uat=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},Gat=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${o}; dm++) {
              int d2 = d1 * ${o} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function qat(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,d=W.computeConv2DInfo(i.shape,c,s,o,l,u,!0),p=new Uat(d);return n.runWebGLProgram(p,[i,a],"float32")}var Kat={kernelName:h$,backendName:"webgl",kernelFunc:qat};function Zat(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,d=W.computeConv2DInfo(c,a.shape,s,o,l,u,!0),p=new Gat(d);return n.runWebGLProgram(p,[i,a],"float32")}var Xat={kernelName:f$,backendName:"webgl",kernelFunc:Zat},Jat=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function Yat(e){let{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],a=M.sizeFromShape(r.shape),s=ze({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new Jat(a),l=n.runWebGLProgram(o,[s],s.dtype),u=ze({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}var Qat={kernelName:pw,backendName:"webgl",kernelFunc:Yat},est=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:u}=e,{top:c,left:d}=r;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${c}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${o}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${n}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function tst(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r,u=W.computeDilation2DInfo(i.shape,a.shape,s,o,"NHWC",l),c,d=new est(u);c=n.runWebGLProgram(d,[i,a],"float32");let p=ze({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),p}var nst={kernelName:nf,backendName:"webgl",kernelFunc:tst};function rst(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,a=t,{allDims:s,summedDims:o,idDims:l}=W.decodeEinsumEquation(i,a.length);W.checkEinsumDimSizes(s.length,l,a);let{path:u,steps:c}=W.getEinsumComputePath(o,l),d=c.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let y of c[g]){let{permutationIndices:v,expandDims:b}=W.getEinsumPermutation(h,l[y]),_;W.isIdentityPermutation(v)?_=a[y]:(_=va({inputs:{x:a[y]},backend:n,attrs:{perm:v}}),m.push(_));let k=_.shape.slice();for(let S=0;S<b.length;++S)k.splice(b[S],0,1);M.arraysEqual(_.shape,k)||(_=ze({inputs:{x:_},backend:n,attrs:{shape:k}}),m.push(_)),p===null?p=_:(p=r3({inputs:{a:_,b:p},backend:n}),m.push(p))}g<d-1&&(u[g]>=0&&(p=OT({inputs:{x:p},backend:n,attrs:{axis:u[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&n.disposeIntermediateTensorInfo(g);return p}var ist={kernelName:g$,backendName:"webgl",kernelFunc:rst},ast="return (x >= 0.0) ? x : (exp(x) - 1.0);",sst=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,ost=ln({opSnippet:ast,packedOpSnippet:sst}),lst={kernelName:af,backendName:"webgl",kernelFunc:ost},ust="return (b >= 0.0) ? a : a * (b + 1.0);",cst=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,dst=e=>{let{inputs:t,backend:n}=e,{dy:r,y:i}=t,a=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new l0(cst,r.shape,i.shape):new _h(ust,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},pst={kernelName:iv,backendName:"webgl",kernelFunc:dst},hst=`
  return vec4(equal(a, b));
`,fst="return float(a == b);",mst=zi({opSnippet:fst,packedOpSnippet:hst,dtype:"bool",cpuKernelImpl:Utt}),gst={kernelName:av,backendName:"webgl",kernelFunc:mst},yst=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${W.ERF_P};
  float a1 = ${W.ERF_A1};
  float a2 = ${W.ERF_A2};
  float a3 = ${W.ERF_A3};
  float a4 = ${W.ERF_A4};
  float a5 = ${W.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,vst=ln({opSnippet:yst}),bst={kernelName:sf,backendName:"webgl",kernelFunc:vst},wst=u0+`
  return exp(x);
`,xst=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Coe=ln({opSnippet:wst,packedOpSnippet:xst,cpuKernelImpl:Gtt,dtype:"float32"}),_st={kernelName:of,backendName:"webgl",kernelFunc:Coe};function IM(e){let{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:a}=t,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(M.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),ze({inputs:{x:a},backend:r,attrs:{shape:o}})}var kst={kernelName:sv,backendName:"webgl",kernelFunc:IM},t8="return exp(x) - 1.0;",Sst=ln({opSnippet:t8,packedOpSnippet:t8,cpuKernelImpl:qtt}),Cst={kernelName:lf,backendName:"webgl",kernelFunc:Sst},n8=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=n?`${r}.0`:"1.0",s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function Ioe(e,t,n){let r=n.texData.get(e.dataId),i=M.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],s=i/a,o=ze({inputs:{x:e},backend:n,attrs:{shape:[s,a]}}),l=o.shape,u=new n8("real",l,t),c=new n8("imag",l,t),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),m=Vd({inputs:{real:p,imag:h},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h);let g=ze({inputs:{x:m},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),g}function Ist(e){let{inputs:t,backend:n}=e,{input:r}=t;return Ioe(r,!1,n)}var $st={kernelName:y$,backendName:"webgl",kernelFunc:Ist},Tst=class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function sx(e){let{backend:t,attrs:n}=e,{shape:r,value:i}=n,{dtype:a}=n;if(a=a||M.inferDtype(i),a==="string"){let s=M.getArrayFromDType(a,M.sizeFromShape(r));return s.fill(i),t.makeTensorInfo(r,a,s)}else{let s=new Tst(r,i),o=[[i]];return t.runWebGLProgram(s,[],a,o)}}var Nst={kernelName:hw,backendName:"webgl",kernelFunc:sx},Est=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}},Ost={kernelName:ov,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,i=new Est(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}},r8="return floor(x);",Pst=ln({opSnippet:r8,packedOpSnippet:r8,cpuKernelImpl:Ktt}),Mst={kernelName:uf,backendName:"webgl",kernelFunc:Pst},Ast=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Rst=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Dst=zi({opSnippet:Ast,packedOpSnippet:Rst,dtype:"int32"}),Lst={kernelName:cf,backendName:"webgl",kernelFunc:Dst},Fst=class{constructor(e){this.variableNames=["A"];let t=Ia(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}},zst=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=Ia(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${n}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}},Bst={kernelName:lI,backendName:"webgl",kernelFunc:Wst},Um,PE=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Wst(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:i}=t,{numChannels:a}=r,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,u]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],d=[u,l,a];if(o||s){let g=fe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Um==null||g!==PE)&&(PE=g,Um=document.createElement("canvas").getContext("2d",{willReadFrequently:PE})),Um.canvas.width=l,Um.canvas.height=u,Um.drawImage(i,0,0,l,u),i=Um.canvas}let p=n.makeTensorInfo(c,"int32");n.texData.get(p.dataId).usage=Es.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),i);let h=fe().getBool("WEBGL_PACK")?new zst(d):new Fst(d),m=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),m}function Vst(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=r,g=W.convertConv2DDataFormat(c),y=W.computeConv2DInfo(i.shape,a.shape,l,d,u,p,!1,g),v,b=[],_=s!=null,k=o!=null,S=h==="leakyrelu",$=()=>{let P=[i,a],D=(O,F)=>{if(F==="NCHW"&&O.shape.length===1&&O.shape[0]!==1){let E=ze({inputs:{x:O},backend:n,attrs:{shape:[O.shape[0],1,1]}});return b.push(E),E}return O};if(_&&P.push(D(s,c)),k&&P.push(D(o,c)),S){let O=n.makeTensorInfo([],"float32",M.createScalarValue(m,"float32"));P.push(O),b.push(O)}return P};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))v=woe({x:i,filter:a,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else if(y.strideWidth<=2&&g==="channelsLast"&&fe().getBool("WEBGL_EXP_CONV")){let P=h?I1(h,!0):null,D=new boe(y,_,P,k,S),O=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],F=$();v=n.runWebGLProgram(D,F,"float32",O)}else if(fe().getBool("WEBGL_CONV_IM2COL"))v=xoe({x:i,filter:a,convInfo:y,backend:n,bias:s,activation:h,preluActivationWeights:o,leakyreluAlpha:m});else{let P=h?I1(h,!1):null,D=new voe(y,_,P,k,S),O=$();v=n.runWebGLProgram(D,O,"float32")}let N=ze({inputs:{x:v},backend:n,attrs:{shape:y.outShape}});return b.push(v),b.forEach(P=>n.disposeIntermediateTensorInfo(P)),N}var jst={kernelName:ah,backendName:"webgl",kernelFunc:Vst};function Hst(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=r,m=[],g=c;g==null&&(g=[1,1]),M.assert(W.eitherStridesOrDilationsAreOne(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);let y=W.computeConv2DInfo(i.shape,a.shape,l,g,u,d,!0),v=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,b=p?I1(p,v):null,_=[i,a],k=s!=null,S=o!=null,$=p==="leakyrelu";if(k&&_.push(s),S&&_.push(o),$){let O=n.makeTensorInfo([],"float32",M.createScalarValue(h,"float32"));_.push(O),m.push(O)}let N;v?N=new Soe(y,k,b,S,$):N=new koe(y,k,b,S,$);let P=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],D=n.runWebGLProgram(N,_,"float32",P);return m.forEach(O=>n.disposeIntermediateTensorInfo(O)),D}var Ust={kernelName:sh,backendName:"webgl",kernelFunc:Hst},Gst=class{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let i=jn(n.length),a=`
    int index;`;for(let s=0;s<this.sliceDim;s++)a+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function qst(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,a=i.shape,s=a[a.length-1],o=M.sizeFromShape(r.shape),[l,u,c,d]=W.prepareAndValidate(r,i),p=ze({inputs:{x:i},backend:n,attrs:{shape:[u,s]}}),h=ze({inputs:{x:r},backend:n,attrs:{shape:[M.sizeFromShape(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){let v=n.readSync(i.dataId),b=n.bufferSync(r),_=Ztt(v,b,r.dtype,u,s,c,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,_.values)}let m=new Gst(s,d,[u,c],r.shape),g=n.runWebGLProgram(m,[h,p],h.dtype),y=ze({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),y}var Kst={kernelName:uv,backendName:"webgl",kernelFunc:qst},Zst=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=jn(this.rank),r=Xst(e);this.userCode=`
      void main() {
        ${n} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}};function Xst(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}function $oe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:a}=t,{axis:s,batchDims:o}=r,l=M.parseAxisParam(s,i.shape)[0];if(fe().get("DEBUG")){let b=n.readSync(a.dataId),_=i.shape[l];for(let k=0;k<b.length;++k){let S=b[k];M.assert(S<=_-1&&S>=0,()=>`GatherV2: the index value ${S} is not in [0, ${_-1}]`)}}let u=W.segment_util.collectGatherOpShapeInfo(i,a,l,o),c=M.sizeFromShape(a.shape),d=[],p=ze({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=ze({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(p),d.push(h);let m=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){let b=n.bufferSync(h),_=n.bufferSync(p),k=Xtt(_,b,m);return d.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.makeTensorInfo(u.outputShape,k.dtype,k.values)}let g=new Zst(p.shape,m),y=n.runWebGLProgram(g,[p,h],p.dtype);d.push(y);let v=ze({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}var Jst={kernelName:lv,backendName:"webgl",kernelFunc:$oe},Yst="return float(a > b);",Qst=`
  return vec4(greaterThan(a, b));
`,eot=zi({opSnippet:Yst,packedOpSnippet:Qst,cpuKernelImpl:Jtt,dtype:"bool"}),tot={kernelName:cv,backendName:"webgl",kernelFunc:eot},not="return float(a >= b);",rot=`
  return vec4(greaterThanEqual(a, b));
`,iot=zi({opSnippet:not,packedOpSnippet:rot,dtype:"bool",cpuKernelImpl:Ytt}),aot={kernelName:pf,backendName:"webgl",kernelFunc:iot};function sot(e){let{inputs:t,backend:n}=e,{input:r}=t;return Ioe(r,!0,n)}var oot={kernelName:v$,backendName:"webgl",kernelFunc:sot},lot="return float(!isnan(x) && !isinf(x));",uot=ln({opSnippet:lot,dtype:"bool"}),cot={kernelName:ff,backendName:"webgl",kernelFunc:uot},dot="return float(isinf(x));",pot=ln({opSnippet:dot,dtype:"bool"}),hot={kernelName:mf,backendName:"webgl",kernelFunc:pot},fot="return float(isnan(x));",mot=ln({opSnippet:fot,dtype:"bool"}),got={kernelName:gf,backendName:"webgl",kernelFunc:mot},yot="return float(a < b);",vot=`
  return vec4(lessThan(a, b));
`,bot=zi({opSnippet:yot,packedOpSnippet:vot,cpuKernelImpl:Qtt,dtype:"bool"}),wot={kernelName:dv,backendName:"webgl",kernelFunc:bot},xot="return float(a <= b);",_ot=`
  return vec4(lessThanEqual(a, b));
`,kot=zi({opSnippet:xot,packedOpSnippet:_ot,cpuKernelImpl:ent,dtype:"bool"}),Sot={kernelName:pv,backendName:"webgl",kernelFunc:kot};function Cot(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:a}=n,s=tnt(r,i,a);return t.makeTensorInfo([s.length],"float32",s)}var Iot={kernelName:hv,backendName:"webgl",kernelFunc:Cot},$ot=u0+`
  return x < 0.0 ? 0./0. : log(x);
`,Tot=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,Not=ln({opSnippet:$ot,packedOpSnippet:Tot,cpuKernelImpl:nnt}),Eot={kernelName:vf,backendName:"webgl",kernelFunc:Not},Oot=u0+`
  return log(1.0 + x);
`,Pot=ln({opSnippet:Oot}),Mot={kernelName:bf,backendName:"webgl",kernelFunc:Pot},Aot="return float(a >= 1.0 && b >= 1.0);",Rot=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Dot=zi({opSnippet:Aot,packedOpSnippet:Rot,dtype:"bool"}),Lot={kernelName:fv,backendName:"webgl",kernelFunc:Dot},Fot="return float(!(x >= 1.0));",zot=ln({opSnippet:Fot}),Bot={kernelName:mv,backendName:"webgl",kernelFunc:zot},Wot="return float(a >= 1.0 || b >= 1.0);",Vot=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,jot=zi({opSnippet:Wot,packedOpSnippet:Vot,dtype:"bool"}),Hot={kernelName:gv,backendName:"webgl",kernelFunc:jot},Uot=class{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];let a=t,s=e[3]-1;this.outputShape=e;let o,l=`float(${n}) + float(${r}) * sum`;i===.5?o=`inversesqrt(${l})`:i===1?o=`1.0/(${l})`:o=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${o};
        setOutput(val);
      }
    `}},Got=class{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=t,s=e[3]-1;this.outputShape=e;let o,l=`float(${n}) + float(${r}) * sum`;i===.5?o=`inversesqrt(${l})`:i===1?o=`1.0/(${l})`:o=`exp(log(${l}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${o};
        setOutput(result);
      }
    `}},qot=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:s,alpha:o,beta:l}=r,u=fe().getBool("WEBGL_PACK_NORMALIZATION")?new Got(i.shape,a,s,o,l):new Uot(i.shape,a,s,o,l);return n.runWebGLProgram(u,[i],i.dtype)},Kot={kernelName:wf,backendName:"webgl",kernelFunc:qot},Zot=class{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${n});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}},Xot=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:s}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=r,d=new Zot(i.shape,o,l,u,c);return n.runWebGLProgram(d,[i,a,s],i.dtype)},Jot={kernelName:yv,backendName:"webgl",kernelFunc:Xot};function Yot(e,t,n,r){let i=M.sizeFromShape(t),a=M.sizeFromShape(e.shape)/i,s=ze({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),o=pm(s,e.dtype,"max",r),l=ze({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}function Toe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:a,keepDims:s}=r,o=i.shape.length,l=M.parseAxisParam(a,i.shape),u=l,c=W.getAxesPermutation(u,o),d=c!=null,p=n.shouldExecuteOnCPU([i]),h=i;if(d){if(p){let b=n.texData.get(h.dataId).values,_=new Array(o);for(let $=0;$<_.length;$++)_[$]=i.shape[c[$]];let k=e3(b,i.shape,i.dtype,c,_);h=n.makeTensorInfo(_,i.dtype);let S=n.texData.get(h.dataId);S.values=k}else h=ET(i,c,n);u=W.getInnerMostAxes(u.length,o)}W.assertAxesAreInnerMostDims("max",u,o);let[m,g]=W.computeOutAndReduceShapes(h.shape,u),y=m;s&&(y=W.expandShapeToKeepDim(m,l));let v;if(p){let b=n.texData.get(h.dataId).values,_=rnt(b,M.sizeFromShape(g),y,i.dtype);v=n.makeTensorInfo(y,i.dtype);let k=n.texData.get(v.dataId);k.values=_}else v=Yot(h,g,y,n);return d&&n.disposeIntermediateTensorInfo(h),v}var Qot={kernelName:xf,backendName:"webgl",kernelFunc:Toe},elt=n3+`
  return max(a, b);
`,tlt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dm+`
  return result;
`,nlt=zi({opSnippet:elt,packedOpSnippet:tlt,cpuKernelImpl:int}),rlt={kernelName:_f,backendName:"webgl",kernelFunc:nlt};function ilt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;r0(i,"maxPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r,u=1;M.assert(W.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=W.computePool2DInfo(i.shape,a,s,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&M.arraysEqual(c.inShape,c.outShape))return bs({inputs:{x:i},backend:n});let d=new $1(c,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}var alt={kernelName:kf,backendName:"webgl",kernelFunc:ilt};function slt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=W.computePool3DInfo(i.shape,a,s,c,o,u,l),p=new i3(d,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}var olt={kernelName:vv,backendName:"webgl",kernelFunc:slt},llt=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,s=i-1-e.padInfo.top,o=a-1-e.padInfo.left,l=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},ult=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=o-1-e.padInfo.front,d=l-1-e.padInfo.top,p=u-1-e.padInfo.left,h=o*l*u-1;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${d}, ${p});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${o};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${n}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${h} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function clt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,s=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],p=W.computePool3DInfo(s.shape,o,l,d,u,c),h=new i3(p,"max",!0),m=n.runWebGLProgram(h,[s],s.dtype),g=new ult(p),y=n.runWebGLProgram(g,[i,m],s.dtype);return n.disposeIntermediateTensorInfo(m),y}var dlt={kernelName:mw,backendName:"webgl",kernelFunc:clt};function plt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a,output:s}=t,o=a;r0([a,s],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,p=W.computePool2DInfo(o.shape,l,u,1,c,d),h=!0,m=new $1(p,"max",h),g=n.runWebGLProgram(m,[o],o.dtype),y=new llt(p),v=n.runWebGLProgram(y,[i,g],o.dtype);return n.disposeIntermediateTensorInfo(g),v}var hlt={kernelName:fw,backendName:"webgl",kernelFunc:plt};function flt(e,t,n,r){let i=new $1(n,"max",!1),a=r.runWebGLProgram(i,[e],"float32");i=new $1(n,"max",!0,!0,t);let s=r.runWebGLProgram(i,[e],"float32");return[a,s]}var mlt={kernelName:gw,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=t,l=n;M.assert(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let u=[1,1];M.assert(W.eitherStridesOrDilationsAreOne(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);let c=W.computePool2DInfo(r.shape,i,a,u,s),[d,p]=flt(r,o,c,l);return[d,p]}};function glt(e,t,n,r){let i=M.sizeFromShape(t),a=M.sizeFromShape(e.shape)/i,s=ze({inputs:{x:e},attrs:{shape:[a,i]},backend:r}),o=pm(s,"float32","mean",r),l=ze({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}var ylt={kernelName:Sf,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:i,axis:a}=t,s=n,o=r.shape.length,l=M.parseAxisParam(a,r.shape),u=l,c=W.getAxesPermutation(u,o),d=c!=null,p=s.shouldExecuteOnCPU([r]),h=[],m=r;if(d){if(p){let _=s.texData.get(m.dataId).values,k=new Array(o);for(let N=0;N<k.length;N++)k[N]=r.shape[c[N]];let S=e3(_,r.shape,r.dtype,c,k);m=s.makeTensorInfo(k,r.dtype);let $=s.texData.get(m.dataId);$.values=S}else m=ET(r,c,s);h.push(m),u=W.getInnerMostAxes(u.length,o)}W.assertAxesAreInnerMostDims("sum",u,o);let[g,y]=W.computeOutAndReduceShapes(m.shape,u),v=g;i&&(v=W.expandShapeToKeepDim(g,l));let b=glt(m,y,v,s);for(let _ of h)s.disposeIntermediateTensorInfo(_);return b}};function vlt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=M.parseAxisParam(a,i.shape),u=l,c=W.getAxesPermutation(u,o),d=i;c!=null&&(d=va({inputs:{x:i},backend:n,attrs:{perm:c}}),u=W.getInnerMostAxes(u.length,i.shape.length)),W.assertAxesAreInnerMostDims("min",u,o);let[p,h]=W.computeOutAndReduceShapes(d.shape,u),m=M.sizeFromShape(h),g=ze({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),y=pm(g,g.dtype,"min",n),v;if(s){let b=W.expandShapeToKeepDim(p,l);v=ze({inputs:{x:y},backend:n,attrs:{shape:b}})}else v=ze({inputs:{x:y},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),v}var blt={kernelName:Cf,backendName:"webgl",kernelFunc:vlt},wlt=n3+`
  return min(a, b);
`,xlt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dm+`
  return result;
`,_lt=zi({opSnippet:wlt,packedOpSnippet:xlt,cpuKernelImpl:ant}),klt={kernelName:If,backendName:"webgl",kernelFunc:_lt},Slt=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((u,c)=>u[0]+e[c]+u[1]);let r=e.length,i=jn(r),a=t.map(u=>u[0]).join(","),s=t.map((u,c)=>u[0]+e[c]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l=n==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${a};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${o}));
      }
    `}},Clt=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((h,m)=>h[0]+e[m]+h[1]);let r=e.length,i=jn(r),a=t.map(h=>h[0]).join(","),s=t.map((h,m)=>h[0]+e[m]).join(","),o=fa("rc",r),l=fa("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,c=r===1?"source":`vec2(${l.slice(-2).join()})`,d=n==="reflect"?0:1,p="";if(r===1){let h=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${o[r-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
      `}else{let h=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;p=`
        ${i} rc = outputLoc;
        ${h}
        result[0] = getChannel(getX(${l.join()}), ${c});
        ${o[r-1]} += 1;
        if(${u}) {
          ${h}
          result[1] = getChannel(getX(${l.join()}), ${c});
        }
        rc = outputLoc;
        ${o[r-2]} += 1;
        if(${o[r-2]} < ${this.outputShape[r-2]}) {
          ${h}
          result[2] = getChannel(getX(${l.join()}), ${c});
          ${o[r-1]} += 1;
          if(${u}) {
            ${h}
            result[3] = getChannel(getX(${l.join()}), ${c});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}},Ilt=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:i,mode:a}=n,s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Clt(r.shape,i,a):new Slt(r.shape,i,a);return t.runWebGLProgram(s,[r],r.dtype)},$lt={kernelName:$f,backendName:"webgl",kernelFunc:Ilt},Tlt=`if (b == 0.0) return NAN;
  return mod(a, b);`,Nlt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+dm+`
  return result;
`,Elt=zi({opSnippet:Tlt,packedOpSnippet:Nlt}),Olt={kernelName:Tf,backendName:"webgl",kernelFunc:Elt},Plt=class{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}},Mlt=`
if (a == b) {
  return 1.0;
};
return a / b;`,Alt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Noe=zi({opSnippet:Mlt,packedOpSnippet:Alt,checkOutOfBounds:!0}),Rlt={kernelName:rf,backendName:"webgl",kernelFunc:Noe},i8="return a - b;",Eoe=zi({opSnippet:i8,packedOpSnippet:i8,supportsComplex:!0,cpuKernelImpl:Int}),Dlt={kernelName:Qf,backendName:"webgl",kernelFunc:Eoe};function Ooe(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:a}=r,s=M.parseAxisParam([a],i.shape),o=Toe({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=W.expandShapeToKeepDim(o.shape,s),u=ze({inputs:{x:o},backend:n,attrs:{shape:l}}),c=Eoe({inputs:{a:i,b:u},backend:n}),d=Coe({inputs:{x:c},backend:n}),p=OT({inputs:{x:d},backend:n,attrs:{axis:s,keepDims:!1}}),h=ze({inputs:{x:p},backend:n,attrs:{shape:l}}),m=Noe({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}var Llt={kernelName:Jf,backendName:"webgl",kernelFunc:Ooe};function Flt(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:s,normalized:o}=r,l=o?i:Ooe({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new Plt(u,c,a),p=[[s]],h=n.runWebGLProgram(d,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),h}var zlt={kernelName:bv,backendName:"webgl",kernelFunc:Flt},Blt=xo+`
  return -x;
`,Wlt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Vlt(e){let{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){let a=n.texData.get(r.dataId),[s,o]=ont(a.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}let i;return fe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Fc(r.shape,Wlt):i=new Pl(r.shape,Blt),n.runWebGLProgram(i,[r],r.dtype)}var jlt={kernelName:wv,backendName:"webgl",kernelFunc:Vlt},Hlt=Yl.nonMaxSuppressionV3Impl;function Ult(e){W.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(a.dataId),{selectedIndices:d}=Hlt(u,c,s,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Glt={kernelName:_v,backendName:"webgl",kernelFunc:Ult},qlt=Yl.nonMaxSuppressionV4Impl;function Klt(e){W.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:p,validOutputs:h}=qlt(c,d,s,o,l,u);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}var Zlt={kernelName:kv,backendName:"webgl",kernelFunc:Klt},Xlt=Yl.nonMaxSuppressionV5Impl;function Jlt(e){W.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:a}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),d=n.readSync(a.dataId),p=s,h=o,m=l,g=u,{selectedIndices:y,selectedScores:v}=Xlt(c,d,p,h,m,g);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}var Ylt={kernelName:Sv,backendName:"webgl",kernelFunc:Jlt},Qlt=class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${n}),
                      float(index == coords.y)));
      }
    `}},eut=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:s,onValue:o,offValue:l}=r,u=M.sizeFromShape(i.shape),c=new Qlt(u,s,o,l),d=ze({inputs:{x:i},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(c,[d],a);n.disposeIntermediateTensorInfo(d);let h=[...i.shape,s],m=ze({inputs:{x:p},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(p),m},tut={kernelName:Ef,backendName:"webgl",kernelFunc:eut};function PI(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){let i=ax({inputs:{input:r},backend:n}),a=PI({inputs:{x:i},backend:n}),s=PT({inputs:{input:r},backend:n}),o=PI({inputs:{x:s},backend:n}),l=Vd({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return sx({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}var nut={kernelName:jv,backendName:"webgl",kernelFunc:PI};function Poe(e){let{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){let i=ax({inputs:{input:r},backend:n}),a=Poe({inputs:{x:i},backend:n}),s=PT({inputs:{input:r},backend:n}),o=PI({inputs:{x:s},backend:n}),l=Vd({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}else return sx({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}var rut={kernelName:Cv,backendName:"webgl",kernelFunc:Poe};function iut(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return IM({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let a=t[0].shape,s=t[0].dtype;t.forEach(c=>{M.assertShapesMatch(a,c.shape,"All tensors passed to stack must have matching shapes"),M.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=IM({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(d),d}),u=yoe({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}var aut={kernelName:Iv,backendName:"webgl",kernelFunc:iut},sut=class{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((l,u)=>l[0]+e[u]+l[1]);let r=e.length,i=jn(r),a=t.map(l=>l[0]).join(","),s=t.map((l,u)=>l[0]+e[u]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${a};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${s});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${o}));
        }
      }
    `}},out=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((m,g)=>m[0]+e[g]+m[1]);let r=e.length,i=jn(r),a=t.map(m=>m[0]).join(","),s=t.map((m,g)=>m[0]+e[g]).join(","),o=fa("rc",r),l=fa("source",r),u=`${o[r-1]} < ${this.outputShape[r-1]}`,c=r===1?"source":`vec2(${l.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${o[r-1]} += 1;
       if(${u}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${o[r-2]} += 1;
       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${o[r-1]} += 1;
         if(${u}) {`],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="";for(let m=0,g=r===1?2:4;m<g;m++)h+=`
        ${d[m]}
        if (${p}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${l.join()}), ${c});
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${s});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}},Moe=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:a,constantValue:s}=r;if(M.sizeFromShape(i.shape)===0){let u=a.map((c,d)=>c[0]+i.shape[d]+c[1]);return sx({backend:n,attrs:{shape:u,value:s,dtype:i.dtype}})}let o=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new out(i.shape,a,s):new sut(i.shape,a,s),l=[[s]];return n.runWebGLProgram(o,[i],i.dtype,l)},lut={kernelName:Of,backendName:"webgl",kernelFunc:Moe},uut=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,cut=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+dm+`
  return result;
`,dut=zi({opSnippet:uut,packedOpSnippet:cut}),put={kernelName:Pf,backendName:"webgl",kernelFunc:dut};function hut(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,keepDims:s}=r,o=i.shape.length,l=[],u=M.parseAxisParam(a,i.shape),c=u,d=W.getAxesPermutation(c,o),p=i;d!=null&&(p=va({inputs:{x:i},backend:n,attrs:{perm:d}}),c=W.getInnerMostAxes(c.length,o),l.push(p)),W.assertAxesAreInnerMostDims("prod",c,o);let h;if(n.shouldExecuteOnCPU([p])){let m=n.texData.get(p.dataId).values,{outVals:g,outShape:y,outDtype:v}=unt(p.shape,p.dtype,m,c);h=n.makeTensorInfo(y,v,g)}else{let[m,g]=W.computeOutAndReduceShapes(p.shape,c),y=M.sizeFromShape(g),v=ze({inputs:{x:p},backend:n,attrs:{shape:[-1,y]}}),b=C$(i.dtype),_=pm(v,b,"prod",n);h=ze({inputs:{x:_},backend:n,attrs:{shape:m}}),l.push(v),l.push(_)}if(s){l.push(h);let m=W.expandShapeToKeepDim(h.shape,u);h=ze({inputs:{x:h},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}var fut={kernelName:Af,backendName:"webgl",kernelFunc:hut};function mut(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=t,{outputRaggedRank:o}=r,l=i.map(v=>n.readSync(v.dataId)),u=i.map(v=>v.shape),c=n.readSync(a.dataId),d=n.readSync(s.dataId),[p,h,m]=cnt(l,u,c,a.shape,a.dtype,d,s.shape,o),g=p.map(v=>n.makeTensorInfo([v.length],"int32",v)),y=n.makeTensorInfo(m,a.dtype,h);return g.concat([y])}var gut={kernelName:w$,backendName:"webgl",kernelFunc:mut};function yut(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:a}=t,s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=dnt(s,r.shape,r.dtype,o,i.shape,l,a.shape),d=n.makeTensorInfo([u.length],"int32",u),p=n.makeTensorInfo([c.length],r.dtype,c);return[d,p]}var vut={kernelName:x$,backendName:"webgl",kernelFunc:yut};function but(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(a.dataId),d=n.readSync(s.dataId),p=o.map(y=>n.readSync(y.dataId)),h=o.map(y=>y.shape),[m,g]=pnt(u,i.shape,c,a.shape,a.dtype,d,s.shape,p,h,l);return n.makeTensorInfo(m,a.dtype,g)}var wut={kernelName:_$,backendName:"webgl",kernelFunc:but},Aoe=e=>{let{backend:t,attrs:n}=e,{start:r,stop:i,step:a,dtype:s}=n,o=hnt(r,i,a,s);return t.makeTensorInfo([o.length],s,o)},xut={kernelName:yw,backendName:"webgl",kernelFunc:Aoe},_ut="return 1.0 / x;",kut=ln({opSnippet:_ut}),Sut={kernelName:Rf,backendName:"webgl",kernelFunc:kut},Cut=xo+`
  return (x < 0.0) ? 0.0 : x;
`,Iut=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$ut=ln({opSnippet:Cut,packedOpSnippet:Iut}),Tut={kernelName:Df,backendName:"webgl",kernelFunc:$ut},Nut=xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Eut=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Out=ln({opSnippet:Nut,packedOpSnippet:Eut}),Put={kernelName:zf,backendName:"webgl",kernelFunc:Out},Mut=class{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,t,n,l];let u=[r&&t>1?s-1:s,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/c[0]},
          ${u[1]/c[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}},Aut=class{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,t,n,l];let u=[r&&t>1?s-1:s,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/c[0]},
          ${u[1]/c[1]},
          ${u[1]/c[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,
                                     ${o}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${n-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function Rut(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,u]=o,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Aut(i.shape,l,u,a,s):new Mut(i.shape,l,u,a,s);return n.runWebGLProgram(c,[i],"float32")}var Dut={kernelName:Ff,backendName:"webgl",kernelFunc:Rut},Lut=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,a,s]=e,o=[n&&a>1?r-1:r,n&&s>1?i-1:i],l=[n&&a>1?a-1:a,n&&s>1?s-1:s],u=o[0]/l[0],c=o[1]/l[1],d=1/u,p=1/c,h=Math.ceil(d)*2+2,m=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function Fut(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=new Lut(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}var zut={kernelName:Nv,backendName:"webgl",kernelFunc:Fut},But=class{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,t,n,l];let u=[r&&t>1?s-1:s,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0",p;i?p="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/c[0]},
          ${u[1]/c[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}},Wut=class{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,t,n,l];let u=[r&&t>1?s-1:s,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0",p;i?p="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/c[0]},
          ${u[1]/c[1]},
          ${u[1]/c[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,
                                     ${o}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${n-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function Vut(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,u]=o,c=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Wut(i.shape,l,u,a,s):new But(i.shape,l,u,a,s);return n.runWebGLProgram(c,[i],i.dtype)}var jut={kernelName:Lf,backendName:"webgl",kernelFunc:Vut},Hut=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,a,s]=e,o=[n&&a>1?r-1:r,n&&s>1?i-1:i],l=[n&&a>1?a-1:a,n&&s>1?s-1:s],u=o[0]/l[0],c=o[1]/l[1],d=1/u,p=1/c,h=Math.ceil(d)*2+2,m=Math.ceil(p)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${c});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${p});

        const int winHeight = int(${h});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${o[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${o[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${n} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${n} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function Uut(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=new Hut(a.shape,i.shape,s);return n.runWebGLProgram(o,[a],a.dtype)}var Gut={kernelName:Tv,backendName:"webgl",kernelFunc:Uut},qut=class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,n===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}let r=s=>t.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,i=e.map((s,o)=>r(o)).join(","),a=jn(n);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}},Kut=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;let r=fa("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,a=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,s=jn(n);n===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${o(r.slice())};
          if(${i}){
            result.g = ${l(r.slice())};
          }
          if(${a}) {
            result.b = ${u(r.slice())};
            if(${i}) {
              result.a = ${c(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function o(h){return d(h)}function l(h){return h[n-1]="("+h[n-1]+" + 1)",d(h)}function u(h){return h[n-2]="("+h[n-2]+" + 1)",d(h)}function c(h){return h[n-1]="("+h[n-1]+" + 1)",h[n-2]="("+h[n-2]+" + 1)",d(h)}function d(h){let m=e.map((v,b)=>p(b,h)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function p(h,m){return t.indexOf(h)!==-1&&e[h]!==1?`${e[h]} - ${m[h]} - 1`:`${m[h]}`}}};function Zut(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r,s=i.shape.length,o=M.parseAxisParam(a,i.shape);if(s===0)return bs({inputs:{x:i},backend:n});let l=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kut(i.shape,o):new qut(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}var Xut={kernelName:Bf,backendName:"webgl",kernelFunc:Zut},Jut=class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let i="";typeof t=="number"?i=`float outputValue = ${t.toFixed(2)};`:i=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}},Yut={kernelName:Hv,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:a,center:s}=t,o=n,l=new Jut(r.shape,a),[u,c]=W.getImageCenter(s,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,d)}},Qut=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,ect=ln({opSnippet:Qut}),tct={kernelName:Wf,backendName:"webgl",kernelFunc:ect},nct="return inversesqrt(x);",rct=ln({opSnippet:nct,cpuKernelImpl:fnt}),ict={kernelName:Vf,backendName:"webgl",kernelFunc:rct},a3=class{constructor(e,t,n,r,i,a,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let l=jn(i.length),u=jn(a.length),c="";n===1?c="i":n===2&&(c="i, j");let d=`getIndices(${c})`,p="";r===1?p="i":r===2&&(p="i, coords[1]");let h=`getUpdates(${p})`,m="";o&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,y=t>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}},act=class{constructor(e,t,n,r,i,a,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let l=jn(i.length),u=jn(a.length),c="";n===1?c="i":n===2&&(c="i, j");let d=`getIndices(${c})`,p="";r===1?p="i":r===2&&(p="i, coords[1]");let h=`getUpdates(${p})`,m="";o&&(m="coords[0], coords[1]");let g=`getDefaultValue(${m})`,y=t>1?"strides[j]":"strides",v=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${l} strides = ${l}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${h};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}};function sct(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:a}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=W.calculateShapes(a,i,s),p=[d/u,u];if(d===0)return n.makeTensorInfo(s,i.dtype);let h=ze({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),m=ze({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),y;fe().getBool("WEBGL_PACK")?y=new act(l,o,h.shape.length,m.shape.length,c,p):y=new a3(l,o,h.shape.length,m.shape.length,c,p);let v=n.runWebGLProgram(y,[m,h,g],m.dtype),b=ze({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),b}var oct={kernelName:Ev,backendName:"webgl",kernelFunc:sct},lct=class{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,s=fe().getNumber("WEBGL_VERSION")===2?i:a,o=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${o} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function uct(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:s}=r,o=new lct(i.shape[0],i.shape[1],a.shape[1],s),l=[[i.shape[1]]];return n.runWebGLProgram(o,[i,a],"int32",l)}var cct={kernelName:Pv,backendName:"webgl",kernelFunc:uct},dct=class{constructor(e,t,n){this.variableNames=["c","a","b"],this.outputShape=t;let r,i;if(n>4)throw Error(`Where for rank ${n} is not yet supported`);if(n===1)i="resRC",r="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[];for(let u=0;u<t.length;u++)l.push(`${s[u]}`),u<e&&o.push(`${s[u]}`);r=o.join(),i=l.join()}let a=jn(n);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}};function pct(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t,s=new dct(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(s,[r,i,a],zs(i.dtype,a.dtype))}var hct={kernelName:Mv,backendName:"webgl",kernelFunc:pct},fct=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${W.SELU_SCALEALPHA};
  float scale = ${W.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mct=ln({opSnippet:fct}),gct={kernelName:jf,backendName:"webgl",kernelFunc:mct},yct=u0+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,vct=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bct=ln({opSnippet:yct,packedOpSnippet:vct,cpuKernelImpl:gnt}),wct={kernelName:qf,backendName:"webgl",kernelFunc:bct},xct=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,_ct=ln({opSnippet:xct}),kct={kernelName:Gf,backendName:"webgl",kernelFunc:_ct},Sct=u0+`
  return sin(x);
`,Cct=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${dm}
  return result;
`,Ict=ln({opSnippet:Sct,packedOpSnippet:Cct}),$ct={kernelName:Hf,backendName:"webgl",kernelFunc:Ict},Tct=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Nct=ln({opSnippet:Tct}),Ect={kernelName:Uf,backendName:"webgl",kernelFunc:Nct},Oct=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Pct=ln({opSnippet:Oct}),Mct={kernelName:Kf,backendName:"webgl",kernelFunc:Pct},Act=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:s}=r;M.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=a.reduce((v,b)=>v*b),l=[[0,0]];l.push(...s);for(let v=1+a.length;v<i.shape.length;++v)l.push([0,0]);let u=[],c=Moe({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=W.getReshaped(c.shape,a,o,!1),p=W.getPermuted(d.length,a.length,!1),h=W.getReshapedPermuted(c.shape,a,o,!1),m=ze({inputs:{x:c},backend:n,attrs:{shape:d}}),g=va({inputs:{x:m},backend:n,attrs:{perm:p}}),y=ze({inputs:{x:g},backend:n,attrs:{shape:h}});return u.push(c),u.push(m),u.push(g),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},Rct={kernelName:Rv,backendName:"webgl",kernelFunc:Act};function Dct(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=t;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let o=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(a.dataId),c=n.readSync(s.dataId)[0],[d,p,h,m,g]=vnt(o,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],i.dtype,h),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(y=>Number(y)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}var Lct={kernelName:vw,backendName:"webgl",kernelFunc:Dct};function Fct(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=Array.from(n.readSync(i.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[u,c,d]=bnt(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}var zct={kernelName:Lv,backendName:"webgl",kernelFunc:Fct};function Bct(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);let s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=noe(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}var Wct={kernelName:bw,backendName:"webgl",kernelFunc:Bct};function Vct(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:a}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);let s=n.readSync(r.dataId),o=n.readSync(i.dataId),l=n.readSync(a.dataId),[u,c]=noe(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}var jct={kernelName:ww,backendName:"webgl",kernelFunc:Vct};function Hct(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=W.calculateShapes(a,i,o),h=!1;if(a.dtype==="string"){let v=n.bufferSync(i),b=n.bufferSync(a),_=M.decodeString(n.readSync(s.dataId)[0]),k=mnt(v,b,o,p,c,u,l,d,_,h);return n.makeTensorInfo(o,k.dtype,k.values)}let m=new a3(u,l,i.shape.length,a.shape.length,d,[p,1],h),g=n.runWebGLProgram(m,[a,i,s],a.dtype),y=ze({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(g),y}var Uct={kernelName:Fv,backendName:"webgl",kernelFunc:Hct};function Gct(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:s}=r,o=M.parseAxisParam(s,i.shape)[0],l=W.prepareSplitSize(i,a,o),u=i.shape.length,c=new Array(u).fill(0),d=i.shape.slice();return l.map(p=>{let h=[...d];h[o]=p;let m=c0({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});return c[o]+=p,m})}var qct={kernelName:Dv,backendName:"webgl",kernelFunc:Gct},a8="return sqrt(x);",Kct=ln({opSnippet:a8,packedOpSnippet:a8,cpuKernelImpl:wnt}),Zct={kernelName:Zf,backendName:"webgl",kernelFunc:Kct},Xct="return x * x;",Jct=ln({opSnippet:Xct}),Yct={kernelName:xw,backendName:"webgl",kernelFunc:Jct},s8="return (a - b) * (a - b);",Qct=zi({opSnippet:s8,packedOpSnippet:s8}),edt={kernelName:Yf,backendName:"webgl",kernelFunc:Qct};function tdt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");let a=n.readSync(i.dataId),s=W.fromUint8ToStringArray(a),o=xnt(s,"string",r);return n.makeTensorInfo(i.shape,"string",o)}var ndt={kernelName:_w,backendName:"webgl",kernelFunc:tdt};function rdt({inputs:e,attrs:t,backend:n}){let{x:r}=e,i=xo+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,a=new Pl(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}var idt={kernelName:Rd,backendName:"webgl",kernelFunc:rdt},adt=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,i=jn(n.length),a=jn(n.length),s="";if(r===1)s="coords * strides + begin";else{let o=0;s=n.map((l,u)=>(o++,n.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${o-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${t});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}};function sdt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:a,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:_,strides:k}=ti.sliceInfo(i.shape,a,s,o,l,u,c,d,p),S;if(g)S=ze({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||v){M.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let N=ti.computeOutShape(b,_,k),P=c0({inputs:{x:i},backend:n,attrs:{begin:b,size:N}});S=ze({inputs:{x:P},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(P)}else if(n.shouldExecuteOnCPU([i])){let N=n.readSync(i.dataId),P=Gt(i.shape,i.dtype,N),D=_nt(h,P,k,b);S=n.makeTensorInfo(m,i.dtype,D.values)}else{let N=new adt(b,k,h);S=n.runWebGLProgram(N,[i],i.dtype)}let $=ze({inputs:{x:S},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(S),$}var odt={kernelName:zv,backendName:"webgl",kernelFunc:sdt};function ldt(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=t,p=n.readSync(c.dataId),h=n.readSync(d.dataId),[m,g]=knt(p,h,i,a,s,o,l,u);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}var udt={kernelName:kw,backendName:"webgl",kernelFunc:ldt};function cdt(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=n.readSync(a.dataId),l=n.readSync(s.dataId)[0],[u,c,d]=Snt(o,l,i),p=c.length;return[n.makeTensorInfo([p,2],"int32",u),n.makeTensorInfo([p],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}var ddt={kernelName:Sw,backendName:"webgl",kernelFunc:cdt};function pdt(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(a.dataId),o=Cnt(s,i);return n.makeTensorInfo(a.shape,"int32",o)}var hdt={kernelName:Cw,backendName:"webgl",kernelFunc:pdt},fdt="return tan(x);",mdt=ln({opSnippet:fdt}),gdt={kernelName:em,backendName:"webgl",kernelFunc:mdt},ydt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,vdt=ln({opSnippet:ydt}),bdt={kernelName:tm,backendName:"webgl",kernelFunc:vdt};function wdt(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:a,updates:s}=t,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=W.calculateShapes(s,a,i.shape),p=[d/u,u];if(d===0)return n.makeTensorInfo(i.shape,a.dtype);let h=ze({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),m=ze({inputs:{x:s},backend:n,attrs:{shape:[l,u]}}),g=ze({inputs:{x:i},backend:n,attrs:{shape:p}}),y=new a3(l,o,h.shape.length,m.shape.length,c,p,!1,!0),v=n.runWebGLProgram(y,[m,h,g],g.dtype),b=ze({inputs:{x:v},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),b}var xdt={kernelName:Ov,backendName:"webgl",kernelFunc:wdt},_dt=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;let r=jn(this.rank),i=kdt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}};function kdt(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}function Roe(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){let o=n.readSync(i.dataId),l=i.dtype==="string"?o.map(d=>M.decodeString(d)):o,u=Gt(i.shape,i.dtype,l),c=$nt(u,a);return n.makeTensorInfo(c.shape,c.dtype,c.values)}let s=new _dt(i.shape,a);return n.runWebGLProgram(s,[i],i.dtype)}var Sdt={kernelName:Ad,backendName:"webgl",kernelFunc:Roe},Cdt=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},Idt=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function op(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function o8(e){let t=1;for(;t<e;)t*=2;return t}function $dt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:a,sorted:s}=r,o=fe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=fe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<o||a>l){let D=n.readSync(i.dataId),[O,F]=Tnt(D,u,i.dtype,a,s);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(a===0)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[i,sx({attrs:{shape:u,dtype:"int32",value:0},backend:n})];let d=n.texData.get(i.dataId),p=d!==null&&d.isPacked,h=p?n.unpackTensor(i):i,m=M.sizeFromShape(u)/c,g=ze({inputs:{x:h},attrs:{shape:[m,c]},backend:n});p&&op(n,h);let y=o8(a),v=o8(c),b=null,_=()=>b===null?[g,g]:[g,b],k=(D,O,F)=>{let E=_(),z=new Cdt(F),q=[[c],[b===null?1:0],[Number.NEGATIVE_INFINITY],[D],[O]],K=b;b=n.runWebGLProgram(z,E,"int32",q),op(n,K)};for(let D=1;D<y;D*=2){let O=D*2;for(let F=D;F>=1;F/=2)k(O,F,[m,v])}for(let D=v;D>y;D/=2){let O=_(),F=new Idt([m,D/2]),E=[[c],[b===null?1:0],[y]],z=b;b=n.runWebGLProgram(F,O,"int32",E),op(n,z);let q=y/2,K=q*2;for(let Z=q;Z>=1;Z/=2)k(K,Z,b.shape)}let S=b;b=c0({inputs:{x:b},backend:n,attrs:{begin:0,size:[m,a]}}),op(n,S);let $=$oe({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});op(n,g);let N=u.slice(0,-1);N.push(a),S=b,b=ze({inputs:{x:b},attrs:{shape:N},backend:n}),op(n,S);let P=$;return $=ze({inputs:{x:$},attrs:{shape:N},backend:n}),op(n,P),[$,b]}var Tdt={kernelName:Bv,backendName:"webgl",kernelFunc:$dt},Ndt=class{constructor(e,t,n,r,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let s=n==="nearest"?1:2,o;switch(r){case"constant":o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4;break;default:o=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${o} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function Edt(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:a}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=r,[c,d,p,h]=i.shape,[m,g]=u!=null?u:[d,p],y=[c,m,g,h],v=new Ndt(d,p,s,o,l,y);return n.runWebGLProgram(v,[i,a],"float32")}var Odt={kernelName:Wv,backendName:"webgl",kernelFunc:Edt};function Pdt(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t;r0(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:u}=Nnt(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}var Mdt={kernelName:Iw,backendName:"webgl",kernelFunc:Pdt};function Adt(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i,o=s.shape.length,l=i.shape[a],u=new Array(o-1),c=0;for(let g=0;g<o;g++)g!==a&&(u[c++]=s.shape[g]);let d=[],p=new Array(o).fill(0),h=s.shape.slice();h[a]=1;let m=new Array(l);for(let g=0;g<m.length;g++){p[a]=g;let y=c0({inputs:{x:s},backend:n,attrs:{begin:p,size:h}}),v=ze({inputs:{x:y},backend:n,attrs:{shape:u}});m[g]=v,d.push(y)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}var Rdt={kernelName:Vv,backendName:"webgl",kernelFunc:Adt},Ddt=class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,s=a*Math.ceil(i/n);this.outputShape=[r,s];let o="0.0",l="sumValue",u=Math.floor(n/4)*4,c=n%4,d=`
        sumValue += dot(values, segFilter);
    `,p="";i%n>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let h="";i%n>0&&(h=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${o};

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${n}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${c===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${l});
      }
    `}};function Ldt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:a}=t,{numSegments:s}=r,o=i.shape.length,l=[],u=0,c=W.getAxesPermutation([u],o),d=i;c!=null&&(d=va({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(d),u=W.getInnerMostAxes(1,o)[0]);let p=W.segment_util.computeOutShape(d.shape,u,s),h=M.sizeFromShape([d.shape[u]]),m=ze({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(m);let g=C$(i.dtype),y=(k,S,$,N,P)=>{let D=k.shape[0],O=k.shape[1],F=W.segment_util.segOpComputeOptimalWindowSize(O,P),E={windowSize:F,inSize:O,batchSize:D,numSegments:P},z=new Ddt(E,S),q=n.compileAndRun(z,[k,$],N);if(l.push(q),q.shape[1]===P)return q;let K=Aoe({backend:n,attrs:{start:0,stop:P,step:1,dtype:"float32"}}),Z=Roe({inputs:{x:K},backend:n,attrs:{reps:[O/F]}});return l.push(K),l.push(Z),y(q,S,Z,N,P)},v=y(m,"unsortedSegmentSum",a,g,s),b=ze({inputs:{x:v},backend:n,attrs:{shape:p}}),_=b;if(c!=null){l.push(b);let k=W.getUndoAxesPermutation(c);_=va({inputs:{x:_},backend:n,attrs:{perm:k}})}return l.forEach(k=>n.disposeIntermediateTensorInfo(k)),_}var Fdt={kernelName:$w,backendName:"webgl",kernelFunc:Ldt},zdt=[_rt,Srt,$rt,Ert,Prt,Rrt,Lrt,zrt,jrt,Urt,Krt,Jrt,eit,iit,oit,uit,dit,mit,yit,bit,kit,Eit,Pit,Dit,Fit,Hit,Git,Xit,art,Qit,iat,lat,fat,yat,bat,xat,kat,$at,Eat,Mat,Rat,Lat,zat,Vat,Hat,Kat,Xat,Qat,nst,ist,lst,pst,gst,bst,_st,kst,Cst,$st,Nst,Ost,Mst,Lst,Bst,jst,Ust,Kst,Jst,tot,aot,irt,oot,nat,cot,hot,got,ort,wot,Sot,Iot,Eot,Mot,Lot,Bot,Hot,Kot,Jot,Qot,rlt,alt,olt,dlt,hlt,mlt,ylt,blt,klt,$lt,Olt,zlt,crt,jlt,Glt,Zlt,Ylt,Bit,tut,rut,aut,lut,put,urt,fut,gut,vut,wut,xut,Wit,Rlt,Sut,Tut,Put,prt,Dut,zut,jut,Gut,Xut,Yut,tct,ict,oct,cct,hct,gct,wct,kct,$ct,Ect,Tit,Llt,Mct,Rct,Lct,zct,Wct,jct,Uct,qct,Zct,Yct,edt,ndt,idt,odt,udt,ddt,hdt,Dlt,brt,gdt,bdt,xdt,Sdt,Tdt,Odt,wrt,Mdt,Rdt,Fdt,nut];for(let e of zdt)Tw(e);var hn;(function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"})(hn||(hn={}));var N1;(function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"})(N1||(N1={}));var Doe;function Bdt(e){Doe=e.wasm.cwrap(ih,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function Wdt(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=t;if(i.dtype!=="float32"||a.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r,p=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(a.dataId).id,m=0;if(s!=null){let P=n.dataIdMap.get(s.dataId);if(P.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${P.shape.length}.`);m=P.id}let g=o==null?0:n.dataIdMap.get(o.dataId).id,y=N1[c];if(y==null)throw new Error(`${c} activation not yet supported for FusedConv2D in the wasm backend.`);let v=l?i.shape[2]:i.shape[1],b=u?a.shape[1]:a.shape[2],_=Uv.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)),k=n.makeOutput([..._,v,b],i.dtype),S=n.dataIdMap.get(k.dataId).id,$=new Uint8Array(new Int32Array(i.shape).buffer),N=new Uint8Array(new Int32Array(a.shape).buffer);return Doe(p,$,i.shape.length,h,N,a.shape.length,l,u,y,m,g,d||0,S),k}var Vdt={kernelName:ih,backendName:"wasm",setupFunc:Bdt,kernelFunc:Wdt};function on(e,t){let n;function r(a){n=a.wasm.cwrap(e,null,["number","number","number"])}function i(a){let{backend:s,inputs:{x:o}}=a,l=s.dataIdMap.get(o.dataId).id,u=s.makeOutput(o.shape,t||o.dtype),c=s.dataIdMap.get(u.dataId).id;return M.sizeFromShape(u.shape)===0||n(l,hn[o.dtype],c),u}return{kernelName:e,backendName:"wasm",setupFunc:r,kernelFunc:i}}var jdt=on(jy),Hdt=on(Lh),Udt=on(Fh);function Hr(e,t,n){let r;function i(s){r=s.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])}function a(s){let{backend:o,inputs:l}=s,{a:u,b:c}=l,d=o.dataIdMap.get(u.dataId).id,p=o.dataIdMap.get(c.dataId).id,h=n!=null?n:u.dtype,m=W.assertAndGetBroadcastShape(u.shape,c.shape),g=o.makeOutput(m,h);if(M.sizeFromShape(m)===0)return g;let y=new Uint8Array(new Int32Array(u.shape).buffer),v=new Uint8Array(new Int32Array(c.shape).buffer),b=o.dataIdMap.get(g.dataId).id;return r(d,y,u.shape.length,p,v,c.shape.length,hn[u.dtype],b),g}return{kernelName:e,backendName:"wasm",setupFunc:i,kernelFunc:a}}var Gdt=Hr(Pd),Loe;function qdt(e){Loe=e.wasm.cwrap(zh,null,["array","number","number","number"])}function Kdt(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(M.sizeFromShape(r.shape)===0)return r;let i=t.map(o=>n.dataIdMap.get(o.dataId).id),a=new Uint8Array(new Int32Array(i).buffer),s=n.dataIdMap.get(r.dataId).id;return Loe(a,i.length,hn[r.dtype],s),r}var Zdt={kernelName:zh,backendName:"wasm",setupFunc:qdt,kernelFunc:Kdt};function MT(e){let{inputs:{x:t},backend:n}=e;if(t.dtype==="string")return ma(n.readSync(t.dataId),t.shape,t.dtype);let r=n.makeOutput(t.shape,t.dtype),i=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(i),r}var Xdt={kernelName:hf,backendName:"wasm",kernelFunc:MT},Foe;function Jdt(e){Foe=e.wasm.cwrap(Cu,null,["number","array","number","number","number","array","number"])}function xd(e){let{inputs:t,backend:n,attrs:r}=e,[i,a]=Qdt(t.x.shape,r.perm),s=!0;for(let m=0;m<a.length;m++)a[m]!==m&&(s=!1);let o=Ydt(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:i,dtype:t.x.dtype};if(s){let m=MT({inputs:t,backend:n});return m.shape=o,m}let u=n.makeOutput(o,l.dtype),c=n.dataIdMap.get(l.dataId).id,d=n.dataIdMap.get(u.dataId).id,p=new Uint8Array(new Int32Array(a).buffer),h=new Uint8Array(new Int32Array(l.shape).buffer);return Foe(c,h,l.shape.length,hn[l.dtype],d,p,a.length),u}function Ydt(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}function Qdt(e,t){let n=[],r=[];for(let i=0;i<e.length;++i)e[i]!==1&&n.push(e[i]),e[t[i]]!==1&&r.push(t[i]);for(let i=0;i<r.length;++i){let a=-1;for(let s=0;s<r.length;++s)r[s]>=i&&(a===-1||r[a]>r[s])&&(a=s);r[a]=i}return[n,r]}var ept={kernelName:Cu,backendName:"wasm",kernelFunc:xd,setupFunc:Jdt};function jd(e,t,n){let r=e.shape,i=e.shape.length,a=M.parseAxisParam(t,r),s=a,o=W.getAxesPermutation(s,i),l=null,u=!1;if(o!=null){let c=new Array(i);for(let p=0;p<c.length;p++)c[p]=r[o[p]];s=W.getInnerMostAxes(s.length,i),l=xd({inputs:{x:e},attrs:{perm:o},backend:n});let d=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==d&&(u=!0)}return{transposed:l,originalAxes:a,axes:s,inputWasTransposed:u}}var zoe;function tpt(e){zoe=e.wasm.cwrap(Hy,null,["number, number, number"])}function npt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=jd(s,i,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let h=l.shape.length;W.assertAxesAreInnerMostDims("all",c,h);let[m,g]=W.computeOutAndReduceShapes(l.shape,c),y=M.sizeFromShape(g),v=t.makeOutput(m,s.dtype);if(M.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;zoe(o,y,b)}if(p&&t.disposeData(u.dataId),a){let b=W.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var rpt={kernelName:Hy,backendName:"wasm",setupFunc:tpt,kernelFunc:npt},Boe;function ipt(e){Boe=e.wasm.cwrap(Uy,null,["number, number, number"])}function apt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=jd(s,i,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let h=l.shape.length;W.assertAxesAreInnerMostDims("any",c,h);let[m,g]=W.computeOutAndReduceShapes(l.shape,c),y=M.sizeFromShape(g),v=t.makeOutput(m,s.dtype);if(M.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;Boe(o,y,b)}if(p&&t.disposeData(u.dataId),a){let b=W.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var spt={kernelName:Uy,backendName:"wasm",setupFunc:ipt,kernelFunc:apt};function Woe(e){let t;function n(i){t=i.wasm.cwrap(e,null,["number","number","number","number","number"])}function r(i){let{backend:a,inputs:s,attrs:o}=i,{axis:l}=o,{x:u}=s,c=a.dataIdMap.get(u.dataId).id,d=c,p=u,{transposed:h,axes:m,inputWasTransposed:g}=jd(u,l,a);if(g){let S=a.dataIdMap.get(h.dataId).id;S!==c&&(p=h,d=S)}let y=p.shape.slice(0,-1),v=a.makeOutput(y,"int32"),b=a.dataIdMap.get(v.dataId).id,_=M.sizeFromShape(v.shape),k=p.shape[m[0]];return t(d,hn[p.dtype],_,k,b),g&&a.disposeData(h.dataId),v}return{kernelName:e,backendName:"wasm",setupFunc:n,kernelFunc:r}}var opt=Woe(Gy),lpt=Woe(qy),upt=on(Bh),cpt=on(Wh),dpt=on(Vh),ppt=Hr(Hh),hpt=on(jh),Voe;function fpt(e){Voe=e.wasm.cwrap(Uh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function mpt(e){let{inputs:t,attrs:n,backend:r}=e,i=t.x,a=r.dataIdMap.get(i.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=n,c=W.computePool2DInfo(i.shape,s,o,1,l,u),d=c.filterHeight,p=c.filterWidth,h=c.padInfo.top,m=c.padInfo.right,g=c.padInfo.bottom,y=c.padInfo.left,v=c.strideHeight,b=c.strideWidth,_=c.inChannels;if(c.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);if(c.dilationWidth!==1||c.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${c.dilationHeight}, ${c.dilationWidth}].`);let k=r.makeOutput(c.outShape,"float32"),S=r.dataIdMap.get(k.dataId).id;return Voe(a,i.shape[0],i.shape[1],i.shape[2],d,p,h,m,g,y,v,b,_,S),k}var gpt={kernelName:Uh,backendName:"wasm",setupFunc:fpt,kernelFunc:mpt},joe;function ypt(e){joe=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function vpt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=W.computePool3DInfo(i.shape,a,s,1,o,l,u),d=n.makeOutput(c.outShape,i.dtype);return joe(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}var bpt={kernelName:Ky,backendName:"wasm",setupFunc:ypt,kernelFunc:vpt},Hoe;function wpt(e){Hoe=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function xpt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r,c=W.computePool3DInfo(a.shape,s,o,1,l,u),d=n.makeOutput(a.shape,a.dtype);return Hoe(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left,c.filterDepth,c.filterHeight,c.filterWidth),d}var _pt={kernelName:lw,backendName:"wasm",setupFunc:wpt,kernelFunc:xpt},Uoe;function kpt(e){Uoe=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Spt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l}=r,u=W.computePool2DInfo(a.shape,s,o,1,l),c=n.makeOutput(a.shape,a.dtype);return Uoe(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left,u.filterHeight,u.filterWidth),c}var Cpt={kernelName:ow,backendName:"wasm",setupFunc:kpt,kernelFunc:Spt};function za(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:i}=n,a=M.sizeFromShape(r.shape),s=M.inferFromImplicitShape(i,a);return M.assert(a===M.sizeFromShape(s),()=>`new shape: ${s}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var Ipt={kernelName:$v,backendName:"wasm",kernelFunc:za},Goe;function $pt(e){Goe=e.wasm.cwrap(Gh,null,["number","array","number","number","array","number","number","number","number"])}function Tpt(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:a}=t,{transposeA:s,transposeB:o}=r;if(i.dtype!=="float32"||a.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=i.shape.length,u=a.shape.length,c=s?i.shape[l-2]:i.shape[l-1],d=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-1]:i.shape[l-2],h=o?a.shape[u-2]:a.shape[u-1],m=i.shape.slice(0,-2),g=a.shape.slice(0,-2),y=M.sizeFromShape(m),v=M.sizeFromShape(g),b=Uv.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([p,h]);M.assert(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);let _=s?[y,c,p]:[y,p,c],k=o?[v,h,d]:[v,d,h],S=za({inputs:{x:i},backend:n,attrs:{shape:_}}),$=za({inputs:{x:a},backend:n,attrs:{shape:k}}),N=n.dataIdMap.get(S.dataId).id,P=n.dataIdMap.get($.dataId).id,D=s?S.shape[2]:S.shape[1],O=o?$.shape[1]:$.shape[2],F=Math.max(y,v),E=n.makeOutput([F,D,O],S.dtype),z=n.dataIdMap.get(E.dataId).id,q=new Uint8Array(new Int32Array(S.shape).buffer),K=new Uint8Array(new Int32Array($.shape).buffer);return Goe(N,q,S.shape.length,P,K,$.shape.length,s,o,z),n.disposeData(S.dataId),n.disposeData($.dataId),E.shape=b,E}var Npt={kernelName:Gh,backendName:"wasm",setupFunc:$pt,kernelFunc:Tpt};function kh(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:i}=e,[a,s]=ti.parseSliceParams(t,n,r),o=ti.isSliceContinous(t.shape,a,s),l=i.readSync(t.dataId),u=i.makeOutput(s,t.dtype),c=M.computeStrides(t.shape),d=i.dataIdMap.get(u.dataId);if(o){let m=ti.computeFlatOffset(a,c);return t.dtype==="string"?d.stringBytes=l.slice(m,m+M.sizeFromShape(s)):i.typedArrayFromHeap(u).set(l.subarray(m,m+M.sizeFromShape(s))),u}if(t.dtype==="string"){let m=II(l,a,s,t.shape,t.dtype);return d.stringBytes=m,u}let p=i.typedArrayFromHeap(u),h=t.shape.length;if(h===2)Ept(l,c[0],p,a,s);else if(h===3)Opt(l,c[0],c[1],p,a,s);else if(h===4)Ppt(l,c[0],c[1],c[2],p,a,s);else{let m=II(l,a,s,t.shape,t.dtype);p.set(m)}return u}function Ept(e,t,n,r,i){let a=0,s=r[0],o=r[1],l=s+i[0];for(let u=s;u<l;u++){let c=u*t+o;n.set(e.subarray(c,c+i[1]),a),a+=i[1]}}function Opt(e,t,n,r,i,a){let s=0,o=i[0],l=i[1],u=i[2],c=o+a[0],d=l+a[1];for(let p=o;p<c;p++)for(let h=l;h<d;h++){let m=p*t+h*n+u;r.set(e.subarray(m,m+a[2]),s),s+=a[2]}}function Ppt(e,t,n,r,i,a,s){let o=0,l=a[0],u=a[1],c=a[2],d=l+s[0],p=u+s[1],h=c+s[2],m=a[3];for(let g=l;g<d;g++)for(let y=u;y<p;y++)for(let v=c;v<h;v++){let b=g*t+y*n+v*r+m;i.set(e.subarray(b,b+s[3]),o),o+=s[3]}}var Mpt={kernelName:Av,backendName:"wasm",kernelFunc:kh};function Apt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,crops:s}=r,o=a.reduce((v,b)=>v*b),l=W.getReshaped(i.shape,a,o),u=W.getPermuted(l.length,a.length),c=W.getReshapedPermuted(i.shape,a,o),d=W.getSliceBeginCoords(s,a.length),p=W.getSliceSize(c,s,a.length),h=za({inputs:{x:i},backend:n,attrs:{shape:l}}),m=xd({inputs:{x:h},backend:n,attrs:{perm:u}}),g=za({inputs:{x:m},backend:n,attrs:{shape:c}}),y=kh({inputs:{x:g},backend:n,attrs:{begin:d,size:p}});return n.disposeData(h.dataId),n.disposeData(m.dataId),n.disposeData(g.dataId),y}var Rpt={kernelName:Zy,backendName:"wasm",kernelFunc:Apt},qoe;function Dpt(e){qoe=e.wasm.cwrap(Xy,null,["number","number","boolean","number","number","number"])}function Lpt(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,weights:a}=n,{size:s}=r,o=a.shape.reduce((d,p)=>d*p,1)!==0,l=i.shape.length===1?[s]:[i.shape[0],s],u=t.makeOutput(l,a.dtype);function c(d){return t.dataIdMap.get(d.dataId).id}return qoe(c(i),s,o,c(a),hn[a.dtype],c(u)),u}var Fpt={kernelName:Xy,backendName:"wasm",setupFunc:Dpt,kernelFunc:Lpt},zpt=Hr(Jy);function Bpt(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,a=n.typedArrayFromHeap(r),s=n.typedArrayFromHeap(i),o=W.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return n.makeOutput([o.length],"int32",void 0,new Int32Array(o))}var Wpt={kernelName:uw,backendName:"wasm",kernelFunc:Bpt};function Hd(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,i=r.makeOutput(t.shape,n),a=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(i).set(a),i}var Vpt={kernelName:qh,backendName:"wasm",kernelFunc:Hd},jpt=on(Kh),Koe;function Hpt(e){Koe=e.wasm.cwrap(Md,null,["number","number","number","number"])}function Upt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:a,clipValueMax:s}=r,o=n.dataIdMap.get(i.dataId).id,l=n.makeOutput(i.shape,i.dtype),u=n.dataIdMap.get(l.dataId).id;return Koe(o,a,s,u),l}var Gpt={kernelName:Md,backendName:"wasm",setupFunc:Hpt,kernelFunc:Upt};function Zoe(e){let{inputs:t,backend:n}=e,r=M.parseAxisParam(e.attrs.axis,t[0].shape)[0],i=t.map(h=>h.shape);W.assertParamsConsistent(i,r);let a=W.computeOutShape(t.map(h=>h.shape),r),s=t.filter(h=>M.sizeFromShape(h.shape)>0);if(s.length===1)return MT({inputs:{x:s[0]},backend:n});let o=n.makeOutput(a,t[0].dtype);if(M.sizeFromShape(a)===0)return o;if(s[0].dtype==="string"){let h=s.map(_=>{let k=[-1,M.sizeFromShape(_.shape.slice(r))];return za({inputs:{x:_},backend:n,attrs:{shape:k}})}),m=h.map(_=>({vals:n.readSync(_.dataId),shape:_.shape}));a=W.computeOutShape(h.map(_=>_.shape),1);let g=h[0].shape[0]===1,y=Oz(m,a,t[0].dtype,g),v=W.computeOutShape(s.map(_=>_.shape),r);o.shape=v;let b=n.dataIdMap.get(o.dataId);return b.stringBytes=W.fromStringArrayToUint8(y),h.forEach(_=>n.disposeData(_.dataId)),o}let l=M.sizeFromShape(s[0].shape.slice(0,r)),u=0,c=s.map(h=>{let m=M.sizeFromShape(h.shape.slice(r));return u+=m,m}),d=s.map(h=>n.typedArrayFromHeap(h)),p=n.typedArrayFromHeap(o);for(let h=0;h<l;h++){let m=h*u;for(let g=0;g<d.length;g++){let y=c[g],v=h*y,b=d[g].subarray(v,v+y);p.set(b,m),m+=y}}return o}var qpt={kernelName:Yy,backendName:"wasm",kernelFunc:Zoe},Xoe;function Kpt(e){Xoe=e.wasm.cwrap(Zh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Zpt(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:a}=t,s=r.dataIdMap.get(i.dataId).id,o=r.dataIdMap.get(a.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d,dataFormat:p}=n,h=W.convertConv2DDataFormat(p),m=W.computeConv2DInfo(i.shape,a.shape,l,u,c,d,!1,h),g=m.filterHeight,y=m.filterWidth,v=m.padInfo.top,b=m.padInfo.right,_=m.padInfo.bottom,k=m.padInfo.left,S=m.dilationHeight,$=m.dilationWidth,N=m.strideHeight,P=m.strideWidth,D=m.inChannels,O=m.outChannels,F=m.padInfo.type==="SAME"?1:0;if(m.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${m.dataFormat}'. Please use 'channelsLast'.`);let E=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(E.dataId).id;return Xoe(s,i.shape[0],i.shape[1],i.shape[2],o,g,y,v,b,_,k,F,S,$,N,P,D,O,z),E}var Xpt={kernelName:Zh,backendName:"wasm",setupFunc:Kpt,kernelFunc:Zpt},Joe;function Jpt(e){Joe=e.wasm.cwrap(Xh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Ypt(e){let{backend:t,inputs:n,attrs:r}=e,{dy:i,filter:a}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:u,inputShape:c}=r,d=1,p=W.convertConv2DDataFormat(l),h=W.computeConv2DInfo(c,a.shape,s,d,o,u,!1,p),{batchSize:m,filterHeight:g,filterWidth:y,inChannels:v,inHeight:b,inWidth:_,outChannels:k,outHeight:S,outWidth:$,strideHeight:N,strideWidth:P}=h,D=g-1-h.padInfo.top,O=y-1-h.padInfo.left,F=h.dataFormat==="channelsLast",E=M.computeStrides(h.inShape),z=M.computeStrides(i.shape),[q,K,Z]=M.computeStrides(a.shape),te=E[0],V=F?E[1]:E[2],ee=F?E[2]:1,Y=F?1:E[1],Q=z[0],oe=F?z[1]:z[2],pe=F?z[2]:1,he=F?1:z[1],ge=t.makeOutput(h.inShape,"float32"),_e=t.dataIdMap.get(ge.dataId).id,Ne=t.dataIdMap.get(i.dataId).id,Se=t.dataIdMap.get(a.dataId).id;return Joe(Ne,Se,m,g,y,b,_,v,S,$,k,N,P,D,O,q,K,Z,te,V,ee,Y,Q,oe,pe,he,_e),ge}var Qpt={kernelName:Xh,backendName:"wasm",setupFunc:Jpt,kernelFunc:Ypt},Yoe;function eht(e){Yoe=e.wasm.cwrap(Jh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function tht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r;if(i.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${i.dtype}`);if(a.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let u=W.computeConv3DInfo(i.shape,a.shape,s,l,o),c=n.makeOutput(u.outShape,i.dtype);return Yoe(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var nht={kernelName:Jh,backendName:"wasm",setupFunc:eht,kernelFunc:tht},Qoe;function rht(e){Qoe=e.wasm.cwrap(Qy,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function iht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:a}=t,{strides:s,pad:o,filterShape:l}=r;if(i.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${i.dtype}`);if(a.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let u=W.computeConv3DInfo(i.shape,l,s,1,o),c=n.makeOutput(u.filterShape,a.dtype);return Qoe(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var aht={kernelName:Qy,backendName:"wasm",setupFunc:rht,kernelFunc:iht},ele;function sht(e){ele=e.wasm.cwrap(ev,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function oht(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:a}=t,{pad:s,strides:o,inputShape:l}=r;if(i.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${i.dtype}`);if(a.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let u=W.computeConv3DInfo(l,a.shape,o,1,s),c=n.makeOutput(u.inShape,i.dtype);return ele(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}var lht={kernelName:ev,backendName:"wasm",setupFunc:sht,kernelFunc:oht},uht=on(Yh),cht=on(Qh),$M;(function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"})($M||($M={}));var tle;function dht(e){tle=e.wasm.cwrap(nv,null,["number","number","number","number","array","number","number","number","number","number"])}function pht(e){let{backend:t,inputs:n,attrs:r}=e,{method:i,extrapolationValue:a,cropSize:s}=r,{image:o,boxes:l,boxInd:u}=n,c=l.shape[0],[d,p]=s,h=[c,d,p,o.shape[3]],m=t.dataIdMap.get(o.dataId),g;o.dtype!=="float32"&&(g=Hd({backend:t,inputs:{x:o},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(g.dataId));let y=m.id,v=t.dataIdMap.get(l.dataId).id,b=t.dataIdMap.get(u.dataId).id,_=t.makeOutput(h,"float32"),k=t.dataIdMap.get(_.dataId).id,S=new Uint8Array(new Int32Array(o.shape).buffer);return tle(y,v,b,c,S,d,p,$M[i],a,k),g!=null&&t.disposeData(g.dataId),_}var hht={kernelName:nv,backendName:"wasm",setupFunc:dht,kernelFunc:pht},nle;function fht(e){nle=e.wasm.cwrap(tv,null,["number","number","number","number","number","number"])}function mht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r,l=i.shape.length;M.assert(i.dtype==="float32"||i.dtype==="int32",()=>`cumprod does not support ${i.dtype} tensors in the WASM backend`);let u=W.getAxesPermutation([a],l),c=i;u!==null&&(c=xd({inputs:{x:i},attrs:{perm:u},backend:n}));let d=W.getInnerMostAxes(1,l)[0];W.assertAxesAreInnerMostDims("cumprod",[d],l);let p=n.makeOutput(c.shape,c.dtype),h=c.shape[d],m=n.dataIdMap.get(c.dataId).id,g=n.dataIdMap.get(p.dataId).id;nle(m,s?1:0,o?1:0,h,g,hn[i.dtype]);let y=p;if(u!==null){let v=W.getUndoAxesPermutation(u);y=xd({inputs:{x:p},attrs:{perm:v},backend:n}),n.disposeData(c.dataId),n.disposeData(p.dataId)}return y}var ght={kernelName:tv,backendName:"wasm",setupFunc:fht,kernelFunc:mht},rle;function yht(e){rle=e.wasm.cwrap(ef,null,["number","number","number","number","number","number"])}function vht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:a,exclusive:s,reverse:o}=r,l=i.shape.length;M.assert(i.dtype==="float32"||i.dtype==="int32",()=>`cumsum does not support ${i.dtype} tensors in the WASM backend`);let u=W.getAxesPermutation([a],l),c=i;u!==null&&(c=xd({inputs:{x:i},attrs:{perm:u},backend:n}));let d=W.getInnerMostAxes(1,l)[0];W.assertAxesAreInnerMostDims("cumsum",[d],l);let p=n.makeOutput(c.shape,c.dtype),h=c.shape[d],m=n.dataIdMap.get(c.dataId).id,g=n.dataIdMap.get(p.dataId).id;rle(m,s?1:0,o?1:0,h,g,hn[i.dtype]);let y=p;if(u!==null){let v=W.getUndoAxesPermutation(u);y=xd({inputs:{x:p},attrs:{perm:v},backend:n}),n.disposeData(c.dataId),n.disposeData(p.dataId)}return y}var bht={kernelName:ef,backendName:"wasm",setupFunc:yht,kernelFunc:vht},ile;function wht(e){ile=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function xht(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,weights:a}=n,{size:s,binaryOutput:o}=r,l=a.shape.reduce((p,h)=>p*h,1)!==0,u=i.shape.length===1?[s]:[i.shape[0],s],c=t.makeOutput(u,a.dtype);function d(p){return t.dataIdMap.get(p.dataId).id}return ile(d(i),new Uint8Array(new Int32Array(i.shape).buffer),i.shape.length,s,l,d(a),hn[a.dtype],o,d(c)),c}var _ht={kernelName:dw,backendName:"wasm",setupFunc:wht,kernelFunc:xht},ale;function kht(e){ale=e.wasm.cwrap(rv,null,["number","number","number","array","number","array","array","number","number"])}function Sht(e){let{backend:t,inputs:n,attrs:r}=e,{x:i}=n,{blockSize:a,dataFormat:s}=r,o=i.shape[0],l=s==="NHWC"?i.shape[1]:i.shape[2],u=s==="NHWC"?i.shape[2]:i.shape[3],c=s==="NHWC"?i.shape[3]:i.shape[1],d=l*a,p=u*a,h=c/(a*a),m=s==="NHWC"?[o,d,p,h]:[o,h,d,p],g=t.makeOutput(m,"float32"),y=t.dataIdMap.get(i.dataId).id,v=new Uint8Array(new Int32Array(M.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(m).buffer),_=new Uint8Array(new Int32Array(M.computeStrides(m)).buffer),k=t.dataIdMap.get(g.dataId).id;return ale(y,a,s==="NHWC"?1:0,v,i.shape.length-1,b,_,m.length,k),g}var Cht={kernelName:rv,backendName:"wasm",setupFunc:kht,kernelFunc:Sht},sle;function Iht(e){sle=e.wasm.cwrap(tf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function $ht(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:a}=t,s=r.dataIdMap.get(i.dataId).id,o=r.dataIdMap.get(a.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:d}=n,p=u==null?[1,1]:u,h=W.computeConv2DInfo(i.shape,a.shape,l,p,c,d,!0),m=h.filterHeight,g=h.filterWidth,y=h.padInfo.top,v=h.padInfo.right,b=h.padInfo.bottom,_=h.padInfo.left,k=h.dilationHeight,S=h.dilationWidth,$=h.strideHeight,N=h.strideWidth,P=h.inChannels,D=h.outChannels,O=h.padInfo.type==="SAME"?1:0;if(h.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);let F=r.makeOutput(h.outShape,"float32"),E=r.dataIdMap.get(F.dataId).id;return sle(s,i.shape[0],i.shape[1],i.shape[2],o,m,g,y,v,b,_,O,k,S,$,N,P,D,E),F}var Tht={kernelName:tf,backendName:"wasm",setupFunc:Iht,kernelFunc:$ht},ole;function Nht(e){ole=e.wasm.cwrap("Diag",null,["number","number","number","number"])}function Eht(e){let{inputs:t,backend:n}=e,{x:r}=t,i=M.sizeFromShape(r.shape),a=n.makeOutput([...r.shape,...r.shape],r.dtype);return ole(n.dataIdMap.get(r.dataId).id,hn[r.dtype],i,n.dataIdMap.get(a.dataId).id),a}var Oht={kernelName:pw,backendName:"wasm",setupFunc:Nht,kernelFunc:Eht},lle;function Pht(e){lle=e.wasm.cwrap(nf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Mht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a}=t,{strides:s,pad:o,dilations:l}=r;if(i.dtype!==a.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${i.dtype} and ${a.dtype}`);let u=W.computeDilation2DInfo(i.shape,a.shape,s,o,"NHWC",l),c=n.makeOutput(u.outShape,i.dtype);return lle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,hn[i.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),c}var Aht={kernelName:nf,backendName:"wasm",setupFunc:Pht,kernelFunc:Mht},ule;function Rht(e){ule=e.wasm.cwrap(ay,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function Dht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,dy:s}=t,{strides:o,pad:l,dilations:u}=r;if(i.dtype!==a.dtype||i.dtype!==s.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${a.dtype}, and ${s.dtype}`);let c=W.computeDilation2DInfo(i.shape,a.shape,o,l,"NHWC",u),d=n.makeOutput(a.shape,a.dtype);return ule(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,hn[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),d}var Lht={kernelName:ay,backendName:"wasm",setupFunc:Rht,kernelFunc:Dht},cle;function Fht(e){cle=e.wasm.cwrap(iy,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function zht(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:a,dy:s}=t,{strides:o,pad:l,dilations:u}=r;if(i.dtype!==a.dtype||i.dtype!==s.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${a.dtype}, and ${s.dtype}`);let c=W.computeDilation2DInfo(i.shape,a.shape,o,l,"NHWC",u),d=n.makeOutput(i.shape,i.dtype);return cle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,hn[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),d}var Bht={kernelName:iy,backendName:"wasm",setupFunc:Fht,kernelFunc:zht},Wht=on(af),dle;function Vht(e){dle=e.wasm.cwrap(iv,null,["number","number","number"])}function jht(e){let{inputs:t,backend:n}=e,{dy:r,y:i}=t,a=n.makeOutput(i.shape,"float32"),s=o=>n.dataIdMap.get(o.dataId).id;return dle(s(i),s(r),s(a)),a}var Hht={kernelName:iv,backendName:"wasm",setupFunc:Vht,kernelFunc:jht},Uht=!1,Ght=Hr(av,Uht,"bool"),qht=on(sf),Kht=on(of,"float32");function TM(e){let{inputs:t,attrs:n,backend:r}=e,{input:i}=t,{dim:a}=n,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(M.assert(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),za({inputs:{x:i},backend:r,attrs:{shape:o}})}var Zht={kernelName:sv,backendName:"wasm",kernelFunc:TM},Xht=on(lf,"float32");function ple(e){let{attrs:{shape:t,value:n},backend:r}=e,{attrs:{dtype:i}}=e;i=i||M.inferDtype(n);let a=r.makeOutput(t,i);return r.typedArrayFromHeap(a).fill(n),a}var Jht={kernelName:hw,backendName:"wasm",kernelFunc:ple},hle;function Yht(e){hle=e.wasm.cwrap(ov,null,["number","number","number","number","number","number"])}function Qht(e){let{inputs:t,backend:n}=e,{image:r}=t,i=n.makeOutput(r.shape,r.dtype),a=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(i.dataId).id,[o,l,u,c]=r.shape;return hle(a,o,l,u,c,s),i}var eft={kernelName:ov,backendName:"wasm",kernelFunc:Qht,setupFunc:Yht},tft=on(uf),nft=Hr(cf),fle;function rft(e){fle=e.wasm.cwrap(df,null,["number","number","number","number","number","number","number"])}function ift(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:i}=r,{x:a,mean:s,variance:o,offset:l,scale:u}=n,c=t.dataIdMap.get(a.dataId).id,d=t.dataIdMap.get(s.dataId).id,p=t.dataIdMap.get(o.dataId).id,h=l!=null?t.dataIdMap.get(l.dataId).id:0,m=u!=null?t.dataIdMap.get(u.dataId).id:0,g=t.makeOutput(a.shape,a.dtype);if(M.sizeFromShape(a.shape)===0)return g;let y=t.dataIdMap.get(g.dataId).id;return fle(c,d,p,h,m,i,y),g}var aft={kernelName:df,backendName:"wasm",setupFunc:rft,kernelFunc:ift},mle;function sft(e){mle=e.wasm.cwrap(ah,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function oft(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=n,g=W.computeConv2DInfo(i.shape,a.shape,l,c,u,p),y=N1[h];if(y==null)throw new Error(`${h} activation not yet supported for FusedConv2D in the wasm backend.`);let v=r.dataIdMap.get(i.dataId).id,b=r.dataIdMap.get(a.dataId).id,_=g.outChannels,k=0;if(s!=null){let pe=r.dataIdMap.get(s.dataId);if(pe.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${pe.shape.length}.`);if(pe.shape[0]!==_)throw new Error(`FusedConv2D bias shape (${pe.shape}) does not match the number of output channels (${_})`);k=pe.id}let S=g.filterHeight,$=g.filterWidth,N=g.padInfo.top,P=g.padInfo.right,D=g.padInfo.bottom,O=g.padInfo.left,F=g.dilationHeight,E=g.dilationWidth,z=g.strideHeight,q=g.strideWidth,K=g.inChannels,Z=g.padInfo.type==="SAME"?1:0,te=g.batchSize,V=g.inHeight,ee=g.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let Y=r.makeOutput(g.outShape,"float32"),Q=r.dataIdMap.get(Y.dataId).id,oe=o==null?0:r.dataIdMap.get(o.dataId).id;return mle(v,te,V,ee,b,S,$,k,N,P,D,O,Z,F,E,z,q,K,_,y,oe,m||0,Q),Y}var lft={kernelName:ah,backendName:"wasm",setupFunc:sft,kernelFunc:oft},gle;function uft(e){gle=e.wasm.cwrap(sh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function cft(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=t,{strides:l,pad:u,dilations:c,dataFormat:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=n,g=W.computeConv2DInfo(i.shape,a.shape,l,c,u,p,!0),y=N1[h];if(y==null)throw new Error(`${h} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);let v=r.dataIdMap.get(i.dataId).id,b=r.dataIdMap.get(a.dataId).id,_=g.outChannels,k=0;if(s!=null){let pe=r.dataIdMap.get(s.dataId);if(pe.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${pe.shape.length}.`);if(pe.shape[0]!==_)throw new Error(`FusedDepthwiseConv2D bias shape (${pe.shape}) does not match the number of output channels (${_})`);k=pe.id}let S=g.filterHeight,$=g.filterWidth,N=g.padInfo.top,P=g.padInfo.right,D=g.padInfo.bottom,O=g.padInfo.left,F=g.dilationHeight,E=g.dilationWidth,z=g.strideHeight,q=g.strideWidth,K=g.inChannels,Z=g.padInfo.type==="SAME"?1:0,te=g.batchSize,V=g.inHeight,ee=g.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);let Y=r.makeOutput(g.outShape,"float32"),Q=r.dataIdMap.get(Y.dataId).id,oe=o==null?0:r.dataIdMap.get(o.dataId).id;return gle(v,te,V,ee,b,S,$,k,N,P,D,O,Z,F,E,z,q,K,_,y,oe,m||0,Q),Y}var dft={kernelName:sh,backendName:"wasm",setupFunc:uft,kernelFunc:cft},yle;function pft(e){yle=e.wasm.cwrap(uv,null,["number","number","number","number","number","number","array","number"])}function hft(e){let{backend:t,inputs:n}=e,{params:r,indices:i}=n,[a,s,o,l]=jL.prepareAndValidate(r,i),u=t.makeOutput(a,r.dtype);if(s===0)return u;let c=i.shape,d=c[c.length-1],p=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(i.dataId).id,m=new Uint8Array(new Int32Array(l).buffer),g=t.dataIdMap.get(u.dataId).id;return yle(p,hn[r.dtype],h,s,d,o,m,g),u}var fft={kernelName:uv,backendName:"wasm",setupFunc:pft,kernelFunc:hft},vle;function mft(e){vle=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function gft(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,indices:a}=n,{axis:s,batchDims:o}=r,l=M.parseAxisParam(s,i.shape)[0],u=t.readSync(a.dataId),c=i.shape[l];for(let N=0;N<u.length;++N){let P=u[N];M.assert(P<=c-1&&P>=0,()=>`GatherV2: the index value ${P} is not in [0, ${c-1}]`)}let d=W.segment_util.collectGatherOpShapeInfo(i,a,l,o),p=za({inputs:{x:i},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),h=M.sizeFromShape(a.shape),m=za({inputs:{x:a},attrs:{shape:[d.batchSize,h/d.batchSize]},backend:t}),g=[d.batchSize,d.outerSize,h/d.batchSize,d.sliceSize],y=t.makeOutput(g,i.dtype);if(M.sizeFromShape(i.shape)===0)return y;let v=p.shape.length-1,b=t.dataIdMap.get(p.dataId).id,_=t.dataIdMap.get(m.dataId).id,k=t.dataIdMap.get(y.dataId).id,S=new Uint8Array(new Int32Array(M.computeStrides(p.shape)).buffer),$=new Uint8Array(new Int32Array(M.computeStrides(g)).buffer);return vle(b,hn[i.dtype],S,v,_,d.batchSize,$,k),t.disposeData(p.dataId),t.disposeData(m.dataId),y.shape=d.outputShape,y}var yft={kernelName:lv,backendName:"wasm",setupFunc:mft,kernelFunc:gft},vft=!1,bft=Hr(cv,vft,"bool"),wft=!1,xft=Hr(pf,wft,"bool"),_ft=on(ff,"bool"),kft=on(mf,"bool"),Sft=on(gf,"bool"),ble;function Cft(e){ble=e.wasm.cwrap(yf,null,["number","number","number","number"])}function Ift(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,i=r.dataIdMap.get(t.dataId).id,a=r.makeOutput(t.shape,"float32");if(M.sizeFromShape(t.shape)!==0){let s=r.dataIdMap.get(a.dataId).id;ble(i,hn[t.dtype],n,s)}return a}var $ft={kernelName:yf,backendName:"wasm",setupFunc:Cft,kernelFunc:Ift},Tft=!1,Nft=Hr(dv,Tft,"bool"),Eft=!1,Oft=Hr(pv,Eft,"bool"),wle;function Pft(e){wle=e.wasm.cwrap(hv,null,["number","number","number","number"])}function Mft(e){let{attrs:t,backend:n}=e,{start:r,stop:i,num:a}=t,s=Math.floor(a),o=n.makeOutput([s],"float32");return wle(n.dataIdMap.get(o.dataId).id,r,i,s),o}var Aft={kernelName:hv,backendName:"wasm",setupFunc:Pft,kernelFunc:Mft},Rft=on(vf),Dft=on(bf),Lft=!1,Fft=Hr(fv,Lft,"bool"),zft=on(mv),Bft=!1,Wft=Hr(gv,Bft,"bool"),Vft=!1,jft=Hr(xee,Vft,"bool"),xle;function Hft(e){xle=e.wasm.cwrap(wf,null,["number","number","number","number","number","number","number"])}function Uft(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:a,bias:s,alpha:o,beta:l}=r;if(i.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");let u=n.makeOutput(i.shape,i.dtype);return xle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,i.shape[3],a,s,o,l),u}var Gft={kernelName:wf,backendName:"wasm",setupFunc:Hft,kernelFunc:Uft},_le;function qft(e){_le=e.wasm.cwrap(yv,null,["number","number","number","number","number","number","number","number","number"])}function Kft(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,y:a,dy:s}=t,{depthRadius:o,bias:l,alpha:u,beta:c}=r;if(i.dtype!=="float32"||a.dtype!=="float32"||s.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let d=n.makeOutput(i.shape,i.dtype);return _le(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,s.shape[3],o,l,u,c),d}var Zft={kernelName:yv,backendName:"wasm",setupFunc:qft,kernelFunc:Kft},kle;function Xft(e){kle=e.wasm.cwrap(xf,null,["number","number","number","number"])}function Jft(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:u,axes:c,originalAxes:d,inputWasTransposed:p}=jd(s,i,t);if(p){let b=t.dataIdMap.get(u.dataId).id;l=u,o=b}let h=l.shape.length;W.assertAxesAreInnerMostDims("max",c,h);let[m,g]=W.computeOutAndReduceShapes(l.shape,c),y=M.sizeFromShape(g),v=t.makeOutput(m,s.dtype);if(M.sizeFromShape(l.shape)!==0){let b=t.dataIdMap.get(v.dataId).id;kle(o,hn[s.dtype],y,b)}if(p&&t.disposeData(u.dataId),a){let b=W.expandShapeToKeepDim(v.shape,d);v.shape=b}return v}var Yft={kernelName:xf,backendName:"wasm",setupFunc:Xft,kernelFunc:Jft},Qft=Hr(_f),Sle;function emt(e){Sle=e.wasm.cwrap(kf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function tmt(e){let{inputs:t,attrs:n,backend:r}=e,i=t.x,a=r.dataIdMap.get(i.dataId).id;M.assert(i.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${i.dtype}.`);let{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=n,c=W.computePool2DInfo(i.shape,s,o,1,l,u),d=c.filterHeight,p=c.filterWidth,h=c.padInfo.top,m=c.padInfo.right,g=c.padInfo.bottom,y=c.padInfo.left,v=c.dilationHeight,b=c.dilationWidth,_=c.strideHeight,k=c.strideWidth,S=c.inChannels,$=c.outChannels;if(c.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);let N=r.makeOutput(c.outShape,"float32"),P=r.dataIdMap.get(N.dataId).id;return Sle(a,i.shape[0],i.shape[1],i.shape[2],d,p,h,m,g,y,v,b,_,k,S,$,P),N}var nmt={kernelName:kf,backendName:"wasm",setupFunc:emt,kernelFunc:tmt},Cle;function rmt(e){Cle=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function imt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=W.computePool3DInfo(i.shape,a,s,1,o,l,u),d=n.makeOutput(c.outShape,i.dtype);return Cle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}var amt={kernelName:vv,backendName:"wasm",setupFunc:rmt,kernelFunc:imt},Ile;function smt(e){Ile=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function omt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r,c=W.computePool3DInfo(a.shape,s,o,1,l,u),d=n.makeOutput(a.shape,a.dtype);return Ile(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),d}var lmt={kernelName:mw,backendName:"wasm",setupFunc:smt,kernelFunc:omt},$le;function umt(e){$le=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function cmt(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:a}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:u}=r,c=W.computePool2DInfo(a.shape,s,o,1,l,u),d=n.makeOutput(a.shape,a.dtype);return $le(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),d}var dmt={kernelName:fw,backendName:"wasm",setupFunc:umt,kernelFunc:cmt},Tle;function pmt(e){Tle=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function hmt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:a,strides:s,pad:o,includeBatchInIndex:l}=r;M.assert(i.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);let u=[1,1];M.assert(W.eitherStridesOrDilationsAreOne(s,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let c=W.computePool2DInfo(i.shape,a,s,[1,1],o),d=n.makeOutput(c.outShape,i.dtype),p=n.makeOutput(c.outShape,"int32");return Tle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(p.dataId).id,hn[i.dtype],l,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),[d,p]}var fmt={kernelName:gw,backendName:"wasm",setupFunc:pmt,kernelFunc:hmt},Nle;function mmt(e){Nle=e.wasm.cwrap(Sf,null,["number, number, number"])}function gmt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=jd(s,i,t),m=d;if(h){let k=t.dataIdMap.get(c.dataId).id;k!==o&&(u=c,l=k,m=W.getInnerMostAxes(m.length,u.shape.length))}W.assertAxesAreInnerMostDims("mean",m,u.shape.length);let[g,y]=W.computeOutAndReduceShapes(u.shape,m),v=M.sizeFromShape(y),b=u;u.dtype!=="float32"&&(b=Hd({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(b.dataId).id);let _=t.makeOutput(g,"float32");if(M.sizeFromShape(u.shape)!==0){let k=t.dataIdMap.get(_.dataId).id;Nle(l,v,k)}if(h&&t.disposeData(c.dataId),a){let k=W.expandShapeToKeepDim(_.shape,p);_.shape=k}return u.dtype!=="float32"&&t.disposeData(b.dataId),_}var ymt={kernelName:Sf,backendName:"wasm",setupFunc:mmt,kernelFunc:gmt},Ele;function vmt(e){Ele=e.wasm.cwrap(Cf,null,["number","number","number","number"])}function bmt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=jd(s,i,t);if(h){let _=t.dataIdMap.get(c.dataId).id;_!==o&&(u=c,l=_)}let m=u.shape.length;W.assertAxesAreInnerMostDims("min",d,m);let[g,y]=W.computeOutAndReduceShapes(u.shape,d),v=M.sizeFromShape(y),b=t.makeOutput(g,u.dtype);if(M.sizeFromShape(u.shape)!==0){let _=t.dataIdMap.get(b.dataId).id;Ele(l,hn[s.dtype],v,_)}if(h&&t.disposeData(c.dataId),a){let _=W.expandShapeToKeepDim(b.shape,p);b.shape=_}return b}var wmt={kernelName:Cf,backendName:"wasm",setupFunc:vmt,kernelFunc:bmt},xmt=Hr(If),NM;(function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"})(NM||(NM={}));var Ole;function _mt(e){Ole=e.wasm.cwrap($f,null,["number","array","number","number","array","array","number","number"])}function kmt(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:i}}=e,a=r.map((m,g)=>m[0]+t.shape[g]+m[1]),s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(a,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=r.map(m=>m[0]),d=r.map(m=>m[1]),p=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(d).buffer);return Ole(s,u,t.shape.length,hn[t.dtype],p,h,NM[i],l),o}var Smt={kernelName:$f,backendName:"wasm",kernelFunc:kmt,setupFunc:_mt},Ple;function Cmt(e){Ple=e.wasm.cwrap(Jf,null,["number","number","number","number"])}function Mle(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,i=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(a.dataId).id,o=n.shape[r],l=M.sizeFromShape(n.shape)/o;return M.sizeFromShape(a.shape)===0||Ple(i,s,o,l),a}var Imt={kernelName:Jf,backendName:"wasm",setupFunc:Cmt,kernelFunc:Mle},Ale;function $mt(e){Ale=e.wasm.cwrap(bv,null,["number","number","number","number","number","number"])}function Tmt(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:a,seed:s,normalized:o}=r;if(i.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${i.dtype}`);let l=o?i:Mle({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),[u,c]=l.shape,d=n.makeOutput([u,a],"int32");return Ale(n.dataIdMap.get(l.dataId).id,u,c,a,s,n.dataIdMap.get(d.dataId).id),o||n.disposeData(l.dataId),d}var Nmt={kernelName:bv,backendName:"wasm",setupFunc:$mt,kernelFunc:Tmt},Emt=Hr(Tf),Omt=Hr(Nf),Pmt=on(wv);function s3(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],i=n[1],a=n[2],s=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:i,pSelectedScores:a,pValidOutputs:s}}var Rle;function Mmt(e){Rle=e.wasm.cwrap(_v,"number",["number","number","number","number","number"])}function Amt(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s}=r,{boxes:o,scores:l}=n,u=t.dataIdMap.get(o.dataId).id,c=t.dataIdMap.get(l.dataId).id,d=Rle(u,c,a,i,s),{pSelectedIndices:p,selectedSize:h,pSelectedScores:m,pValidOutputs:g}=s3(t,d);return t.wasm._free(m),t.wasm._free(g),t.makeOutput([h],"int32",p)}var Rmt={kernelName:_v,backendName:"wasm",setupFunc:Mmt,kernelFunc:Amt},Dle;function Dmt(e){Dle=e.wasm.cwrap(kv,"number",["number","number","number","number","number","bool"])}function Lmt(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s,padToMaxOutputSize:o}=r,{boxes:l,scores:u}=n,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=Dle(c,d,a,i,s,o),{pSelectedIndices:h,selectedSize:m,pSelectedScores:g,pValidOutputs:y}=s3(t,p);t.wasm._free(g);let v=t.makeOutput([m],"int32",h),b=t.makeOutput([],"int32",y);return[v,b]}var Fmt={kernelName:kv,backendName:"wasm",setupFunc:Dmt,kernelFunc:Lmt},Lle;function zmt(e){Lle=e.wasm.cwrap(Sv,"number",["number","number","number","number","number","number"])}function Bmt(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s,softNmsSigma:o}=r,{boxes:l,scores:u}=n,c=t.dataIdMap.get(l.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=Lle(c,d,a,i,s,o),{pSelectedIndices:h,selectedSize:m,pSelectedScores:g,pValidOutputs:y}=s3(t,p);t.wasm._free(y);let v=t.makeOutput([m],"int32",h),b=t.makeOutput([m],"float32",g);return[v,b]}var Wmt={kernelName:Sv,backendName:"wasm",setupFunc:zmt,kernelFunc:Bmt},Vmt=!1,jmt=Hr(xv,Vmt,"bool"),Fle;function Hmt(e){Fle=e.wasm.cwrap(Ef,null,["number","number","number","number","number"])}function Umt(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:a,depth:s,onValue:o,offValue:l}=r,u=n.makeOutput([...i.shape,s],a),c=n.dataIdMap.get(u.dataId).id,d=n.dataIdMap.get(i.dataId).id;return Fle(d,s,o,l,c),u}var Gmt={kernelName:Ef,backendName:"wasm",setupFunc:Hmt,kernelFunc:Umt};function qmt(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}var Kmt={kernelName:Cv,backendName:"wasm",kernelFunc:qmt};function Zmt(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(t.length===1)return TM({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let a=t[0].shape,s=t[0].dtype;t.forEach(c=>{M.assertShapesMatch(a,c.shape,"All tensors passed to stack must have matching shapes"),M.assert(s===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(c=>{let d=TM({inputs:{input:c},backend:n,attrs:{dim:i}});return o.push(d),d}),u=Zoe({inputs:l,backend:n,attrs:{axis:i}});return o.forEach(c=>n.disposeData(c.dataId)),u}var Xmt={kernelName:Iv,backendName:"wasm",kernelFunc:Zmt},zle;function Jmt(e){zle=e.wasm.cwrap(Of,null,["number","array","number","number","array","array","number","number"])}function Ymt(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:i}}=e,a=r.map((m,g)=>m[0]+t.shape[g]+m[1]);if(M.sizeFromShape(t.shape)===0)return ple({backend:n,attrs:{shape:a,value:i,dtype:t.dtype}});let s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(a,t.dtype),l=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=r.map(m=>m[0]),d=r.map(m=>m[1]),p=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(d).buffer);return zle(s,u,t.shape.length,hn[t.dtype],p,h,i,l),o}var Ble={kernelName:Of,backendName:"wasm",kernelFunc:Ymt,setupFunc:Jmt},Qmt=Hr(Pf),Wle;function egt(e){Wle=e.wasm.cwrap(Mf,null,["number","number","number"])}function tgt(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t,a=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(i.dataId).id,o=a,l=r,u=l;l.dtype!=="float32"&&(u=Hd({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),o=n.dataIdMap.get(u.dataId).id);let c=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(c.dataId).id;return Wle(o,s,d),l.dtype!=="float32"&&n.disposeData(u.dataId),c}var ngt={kernelName:Mf,backendName:"wasm",setupFunc:egt,kernelFunc:tgt},Vle;function rgt(e){Vle=e.wasm.cwrap(Af,null,["number","number","number","number"])}function igt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=jd(s,i,t),m=d;if(h){let _=t.dataIdMap.get(c.dataId).id;_!==o&&(u=c,l=_,m=W.getInnerMostAxes(m.length,u.shape.length))}W.assertAxesAreInnerMostDims("prod",m,u.shape.length);let[g,y]=W.computeOutAndReduceShapes(u.shape,m),v=M.sizeFromShape(y),b=t.makeOutput(g,u.dtype);if(M.sizeFromShape(u.shape)!==0){let _=t.dataIdMap.get(b.dataId).id;Vle(l,v,hn[b.dtype],_)}if(h&&t.disposeData(c.dataId),a){let _=W.expandShapeToKeepDim(b.shape,p);b.shape=_}return b}var agt={kernelName:Af,backendName:"wasm",setupFunc:rgt,kernelFunc:igt},sgt=e=>{let{backend:t,attrs:n}=e,{start:r,stop:i,step:a,dtype:s}=n,o=Az(r,i,a,s),l=t.makeOutput([o.length],s);return t.typedArrayFromHeap(l).set(o),l},ogt={kernelName:yw,backendName:"wasm",kernelFunc:sgt},lgt=Hr(rf),ugt=on(Rf),cgt=on(Df),dgt=on(zf),jle;function pgt(e){jle=e.wasm.cwrap(Ff,null,["number","number","number","number","number","number","number","number","number","number"])}function hgt(e){let{backend:t,inputs:n,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,u]=o,[c,d,p,h]=i.shape,m=[c,l,u,h],g=t.dataIdMap.get(i.dataId),y;g.dtype!=="float32"&&(y=Hd({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(y.dataId));let v=g.id,b=t.makeOutput(m,"float32");if(M.sizeFromShape(i.shape)===0)return b;let _=t.dataIdMap.get(b.dataId).id;return jle(v,c,d,p,h,l,u,a?1:0,s?1:0,_),y!=null&&t.disposeData(y.dataId),b}var fgt={kernelName:Ff,backendName:"wasm",setupFunc:pgt,kernelFunc:hgt},Hle;function mgt(e){Hle=e.wasm.cwrap(Nv,null,["number","number","number","array","array","boolean"])}function ggt(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=n.makeOutput(i.shape,"float32"),l=n.dataIdMap.get(i.dataId),u;return l.dtype!=="float32"&&(u=Hd({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(u.dataId)),Hle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),u!=null&&n.disposeData(u.dataId),o}var ygt={kernelName:Nv,backendName:"wasm",setupFunc:mgt,kernelFunc:ggt},Ule;function vgt(e){Ule=e.wasm.cwrap(Lf,null,["number","number","number","number","number","number","number","number","number","number"])}function bgt(e){let{backend:t,inputs:n,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,u]=o,[c,d,p,h]=i.shape,m=[c,l,u,h],g=t.makeOutput(m,"float32");if(M.sizeFromShape(i.shape)===0)return g;let y=t.dataIdMap.get(i.dataId),v;y.dtype!=="float32"&&(v=Hd({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(v.dataId));let b=y.id,_=t.dataIdMap.get(g.dataId).id;return Ule(b,c,d,p,h,l,u,a?1:0,s?1:0,_),v!=null&&t.disposeData(v.dataId),g}var wgt={kernelName:Lf,backendName:"wasm",setupFunc:vgt,kernelFunc:bgt},Gle;function xgt(e){Gle=e.wasm.cwrap(Tv,null,["number","number","number","array","array","boolean"])}function _gt(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:a}=t,{alignCorners:s}=r,o=n.makeOutput(i.shape,"float32"),l=n.dataIdMap.get(i.dataId),u;return l.dtype!=="float32"&&(u=Hd({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(u.dataId)),Gle(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),u!=null&&n.disposeData(u.dataId),o}var kgt={kernelName:Tv,backendName:"wasm",setupFunc:xgt,kernelFunc:_gt},qle;function Sgt(e){qle=e.wasm.cwrap(Bf,null,["number","array","number","array","number","number"])}function Cgt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:a}=r,s=M.parseAxisParam(a,i.shape);if(i.shape.length===0)return MT({inputs:{x:i},backend:n});let o=n.makeOutput(i.shape,i.dtype),l=n.dataIdMap.get(i.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(s).buffer),d=new Uint8Array(new Int32Array(i.shape).buffer);qle(l,c,s.length,d,i.shape.length,u);let p=za({inputs:{x:o},attrs:{shape:i.shape},backend:n});return n.disposeData(o.dataId),p}var Igt={kernelName:Bf,backendName:"wasm",kernelFunc:Cgt,setupFunc:Sgt},Kle;function $gt(e){Kle=e.wasm.cwrap(Hv,null,["number","number","number","number","number","number","number","number","array","number","number"])}function Tgt(e){let{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{radians:a,fillValue:s,center:o}=r,l=n.makeOutput(i.shape,i.dtype),u=n.dataIdMap.get(i.dataId).id,c=n.dataIdMap.get(l.dataId).id,[d,p,h,m]=i.shape,[g,y]=W.getImageCenter(o,p,h),v=s===0,b=255,_=typeof s=="number"?[s,s,s,v?0:b]:[...s,b],k=new Uint8Array(new Int32Array(_).buffer);return Kle(u,d,p,h,m,a,g,y,k,_.length,c),l}var Ngt={kernelName:Hv,backendName:"wasm",kernelFunc:Tgt,setupFunc:$gt},Egt=on(Wf),Ogt=on(Vf),Zle;function Pgt(e){Zle=e.wasm.cwrap(Ev,null,["number","number","number","number","number","number","array","number","number"])}function Mgt(e){let{backend:t,inputs:n,attrs:r}=e,{indices:i,updates:a}=n,{shape:s}=r,o=t.makeOutput(s,a.dtype);if(M.sizeFromShape(s)===0)return o;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Z$.calculateShapes(a,i,s),h=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(o.dataId).id;return Zle(h,m,hn[a.dtype],l,u,c,g,p,y),o}var Agt={kernelName:Ev,backendName:"wasm",setupFunc:Pgt,kernelFunc:Mgt},Xle;function Rgt(e){Xle=e.wasm.cwrap(Pv,null,["number","number","number","number","number","number","bool","number"])}function Dgt(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:a}=t,{side:s}=r;if(i.dtype!==a.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${i.dtype} and ${a.dtype}`);let o=n.makeOutput(a.shape,"int32");function l(u){return n.dataIdMap.get(u.dataId).id}return Xle(l(i),l(a),i.shape[0],i.shape[1],a.shape[1],hn[i.dtype],s==="left",l(o)),o}var Lgt={kernelName:Pv,backendName:"wasm",setupFunc:Rgt,kernelFunc:Dgt},Jle;function Fgt(e){Jle=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function zgt(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:a}=t,s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(i.shape,i.dtype),c=n.dataIdMap.get(u.dataId).id,d=r.shape.length,p=i.shape.length,h=d===0||d>1||p===1?1:M.sizeFromShape(i.shape.slice(1));return Jle(s,o,l,h,c),u}var Bgt={kernelName:Mv,backendName:"wasm",kernelFunc:zgt,setupFunc:Fgt},Wgt=on(jf),Yle;function Vgt(e){Yle=e.wasm.cwrap(qf,null,["number","number"])}function jgt(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),a=t.dataIdMap.get(i.dataId).id;return M.sizeFromShape(i.shape)===0||Yle(r,a),i}var Hgt={kernelName:"Sigmoid",backendName:"wasm",setupFunc:Vgt,kernelFunc:jgt},Ugt=on(Gf),Ggt=on(Hf),qgt=on(Uf),Kgt=on(Kf);function Zgt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:a,paddings:s}=r,o=M.sizeFromShape(a),l=[[0,0]];l.push(...s);for(let y=1+a.length;y<i.shape.length;++y)l.push([0,0]);let u=Ble.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=W.getReshaped(u.shape,a,o,!1),d=W.getPermuted(c.length,a.length,!1),p=W.getReshapedPermuted(u.shape,a,o,!1),h=za({inputs:{x:u},backend:n,attrs:{shape:c}}),m=xd({inputs:{x:h},backend:n,attrs:{perm:d}}),g=za({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(u.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),g}var Xgt={kernelName:Rv,backendName:"wasm",kernelFunc:Zgt},Qle;function Jgt(e){Qle=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function Ygt(e){let{backend:t,inputs:n}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=n,o=r.shape[0],l=r.shape[1],u=t.readSync(a.dataId)[0],c=[o+u,l],d=t.dataIdMap.get(r.dataId).id,p=t.dataIdMap.get(i.dataId).id,h=t.dataIdMap.get(s.dataId).id,m=t.makeOutput(c,r.dtype),g=t.dataIdMap.get(m.dataId).id,y=t.makeOutput(c.slice(0,1),i.dtype),v=t.dataIdMap.get(y.dataId).id,b=t.makeOutput([u],"bool"),_=t.dataIdMap.get(b.dataId).id,k=t.makeOutput([o],r.dtype),S=t.dataIdMap.get(k.dataId).id,$=t.makeOutput([4],"int32"),N=t.dataIdMap.get($.dataId).id,P=Qle(d,p,hn[i.dtype],o,u,l,h,g,v,_,S,N),D=t.readSync($.dataId),O;switch(D[0]){case 1:{O=W.getSparseFillEmptyRowsIndicesDenseShapeMismatch(D[1]);break}case 2:{O=W.getSparseFillEmptyRowsNegativeIndexErrorMessage(D[1],D[2]);break}case 3:O=W.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(D[1],D[2],D[3]);break;default:O=""}if(t.disposeData($.dataId),O)throw t.disposeData(m.dataId),t.disposeData(y.dataId),t.disposeData(b.dataId),t.disposeData(k.dataId),new Error(O);let F=m,E=y;return P!==c[0]&&(F=kh({inputs:{x:m},attrs:{begin:0,size:[P,l]},backend:t}),E=kh({inputs:{x:y},attrs:{begin:0,size:P},backend:t}),t.disposeData(m.dataId),t.disposeData(y.dataId)),[F,E,b,k]}var Qgt={kernelName:vw,backendName:"wasm",setupFunc:Jgt,kernelFunc:Ygt},eue;function eyt(e){eue=e.wasm.cwrap(Lv,null,["number","number","number","number","number","number","number"])}function tyt(e){let{backend:t,inputs:n}=e,{inputIndices:r,inputShape:i,newShape:a}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(a.dataId).id,u=r.shape[0],c=M.sizeFromShape(a.shape),d=t.makeOutput([u,c],r.dtype),p=t.dataIdMap.get(d.dataId).id,h=t.makeOutput([c],a.dtype),m=t.dataIdMap.get(h.dataId).id,g=t.makeOutput([3],"int32"),y=t.dataIdMap.get(g.dataId).id;eue(s,o,l,u,p,m,y);let v=t.readSync(g.dataId),b;switch(v[0]){case 0:{b=W.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(v[1],v[2]);break}case 1:{b=W.getSparseReshapeNegativeOutputDimErrorMessage(v[1],v[2]);break}case 2:b=W.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let _=Array.from(t.readSync(i.dataId)),k=Array.from(t.readSync(h.dataId));b=W.getSparseReshapeInputOutputMultipleErrorMessage(_,k);break}case 4:{let _=Array.from(t.readSync(i.dataId)),k=Array.from(t.readSync(h.dataId));b=W.getSparseReshapeInputOutputMismatchErrorMessage(_,k);break}default:b=""}if(t.disposeData(g.dataId),b)throw t.disposeData(d.dataId),t.disposeData(h.dataId),new Error(b);return[d,h]}var nyt={kernelName:Lv,backendName:"wasm",setupFunc:eyt,kernelFunc:tyt},tue;function nue(e){tue=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function rue(e,t){let{backend:n,inputs:r}=e,{data:i,indices:a,segmentIds:s}=r,o=a.shape[0],l=n.readSync(s.dataId,o-1,o)[0],u=o>0?l+1:0;if(u<0)throw new Error(W.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let c=i.shape.slice();c[0]=u;let d=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(c,i.dtype),g=n.dataIdMap.get(m.dataId).id,y=n.makeOutput([4],"int32"),v=n.dataIdMap.get(y.dataId).id;tue(d,hn[i.dtype],i.shape[0],p,h,g,v,t,0);let b=n.readSync(y.dataId),_;switch(b[0]){case 0:{_=W.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break}case 1:{_=W.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break}case 2:_=W.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:_=W.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:_=""}if(n.disposeData(y.dataId),_)throw n.disposeData(m.dataId),new Error(_);return m}function ryt(e){return rue(e,!0)}var iyt={kernelName:bw,backendName:"wasm",setupFunc:nue,kernelFunc:ryt};function ayt(e){return rue(e,!1)}var syt={kernelName:ww,backendName:"wasm",setupFunc:nue,kernelFunc:ayt},iue;function oyt(e){iue=e.wasm.cwrap(Fv,null,["number","number","number","number","number","number","number","number","array","number","number"])}function lyt(e){let{backend:t,inputs:n,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=n,{outputShape:o}=r,l=t.makeOutput(o,s.dtype);if(M.sizeFromShape(o)===0)return l;let{sliceRank:u,numUpdates:c,sliceSize:d,strides:p,outputSize:h}=W.calculateShapes(a,i,o),m=t.dataIdMap.get(i.dataId).id,g=t.dataIdMap.get(a.dataId).id,y=t.dataIdMap.get(s.dataId).id,v=new Uint8Array(new Int32Array(p).buffer),b=t.dataIdMap.get(l.dataId).id;return iue(m,g,a.shape.length,y,hn[s.dtype],u,c,d,v,h,b),l}var uyt={kernelName:Fv,backendName:"wasm",setupFunc:oyt,kernelFunc:lyt};function cyt(e){let{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{numOrSizeSplits:a,axis:s}=n,o=M.parseAxisParam(s,i.shape)[0],l=W.prepareSplitSize(i,a,o),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(d=>{let p=[...c];p[o]=d;let h=kh({inputs:{x:i},attrs:{begin:u,size:p},backend:r});return u[o]+=d,h})}var dyt={kernelName:Dv,backendName:"wasm",kernelFunc:cyt},pyt=on(Zf),hyt=on(xw),fyt=Hr(Yf),aue;function myt(e){aue=e.wasm.cwrap(Rd,null,["number","number","number","number"])}function gyt(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:i}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),l=t.dataIdMap.get(o.dataId).id;return aue(s,i,hn[a.dtype],l),o}var yyt={kernelName:Rd,backendName:"wasm",setupFunc:myt,kernelFunc:gyt},sue;function vyt(e){sue=e.wasm.cwrap(zv,null,["number","array","number","array","array","array","array","array","number","number"])}function byt(e){let{backend:t,inputs:n,attrs:r}=e,{x:i}=n,{begin:a,end:s,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:_,strides:k}=ti.sliceInfo(i.shape,a,s,o,l,u,c,d,p),S;if(g)S=za({inputs:{x:i},backend:t,attrs:{shape:m}});else if(y||v){M.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let $=ti.computeOutShape(b,_,k),N=kh({inputs:{x:i},backend:t,attrs:{begin:b,size:$}});S=za({inputs:{x:N},backend:t,attrs:{shape:m}}),t.disposeData(N.dataId)}else{let $=t.makeOutput(h,"float32"),N=t.dataIdMap.get(i.dataId).id,P=new Uint8Array(new Int32Array(M.computeStrides(i.shape)).buffer),D=new Uint8Array(new Int32Array(b).buffer),O=new Uint8Array(new Int32Array(_).buffer),F=new Uint8Array(new Int32Array(k).buffer),E=new Uint8Array(new Int32Array(h).buffer),z=new Uint8Array(new Int32Array(M.computeStrides(h)).buffer),q=t.dataIdMap.get($.dataId).id;sue(N,P,i.shape.length,D,O,F,E,z,h.length,q),S=za({inputs:{x:$},backend:t,attrs:{shape:m}}),t.disposeData($.dataId)}return S}var wyt={kernelName:zv,backendName:"wasm",setupFunc:vyt,kernelFunc:byt};function xyt(e){let{backend:t,inputs:n,attrs:r}=e,{data:i,dataSplits:a}=n,{separator:s,nGramWidths:o,leftPad:l,rightPad:u,padWidth:c,preserveShortSequences:d}=r,p=t.readSync(i.dataId),h=t.readSync(a.dataId),[m,g]=Dz(p,h,s,o,l,u,c,d),y=t.makeOutput([m.length],"string"),v=t.dataIdMap.get(y.dataId);v.stringBytes=m;let b=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(b).set(g),[y,b]}var _yt={kernelName:kw,backendName:"wasm",kernelFunc:xyt};function kyt(e){let{backend:t,inputs:n,attrs:r}=e,{input:i,delimiter:a}=n,{skipEmpty:s}=r,o=t.readSync(i.dataId),l=t.readSync(a.dataId),[u,c,d]=Lz(o,l[0],s),p=c.length,h=t.makeOutput([p,2],"int32");t.typedArrayFromHeap(h).set(u);let m=t.makeOutput([p],"string"),g=t.dataIdMap.get(m.dataId);g.stringBytes=c;let y=t.makeOutput([2],"int32");return t.typedArrayFromHeap(y).set(d),[h,m,y]}var Syt={kernelName:Sw,backendName:"wasm",kernelFunc:kyt};function Cyt(e){let{backend:t,inputs:n,attrs:r}=e,{input:i}=n,{numBuckets:a}=r,s=t.readSync(i.dataId),o=Fz(s,a),l=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(l).set(o),l}var Iyt={kernelName:Cw,backendName:"wasm",kernelFunc:Cyt},$yt=Hr(Qf),oue;function Tyt(e){oue=e.wasm.cwrap(Xf,null,["number","number","number","number"])}function Nyt(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,u=s,{transposed:c,axes:d,originalAxes:p,inputWasTransposed:h}=jd(s,i,t),m=d;if(h){let _=t.dataIdMap.get(c.dataId).id;_!==o&&(u=c,l=_,m=W.getInnerMostAxes(m.length,u.shape.length))}W.assertAxesAreInnerMostDims("sum",m,u.shape.length);let[g,y]=W.computeOutAndReduceShapes(u.shape,m),v=M.sizeFromShape(y),b=t.makeOutput(g,u.dtype);if(M.sizeFromShape(u.shape)!==0){let _=t.dataIdMap.get(b.dataId).id;oue(l,v,hn[b.dtype],_)}if(h&&t.disposeData(c.dataId),a){let _=W.expandShapeToKeepDim(b.shape,p);b.shape=_}return b}var Eyt={kernelName:Xf,backendName:"wasm",setupFunc:Tyt,kernelFunc:Nyt},Oyt=on(em),Pyt=on(tm),lue;function Myt(e){lue=e.wasm.cwrap(Ov,null,["number","number","number","number","number","number","array","number","number","number"])}function Ayt(e){let{backend:t,inputs:n,attrs:r}=e,{tensor:i,indices:a,updates:s}=n,o=t.makeOutput(i.shape,i.dtype);if(M.sizeFromShape(i.shape)===0)return o;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:p}=Z$.calculateShapes(s,a,i.shape),h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(s.dataId).id,g=t.dataIdMap.get(i.dataId).id,y=new Uint8Array(new Int32Array(d).buffer),v=t.dataIdMap.get(o.dataId).id;return lue(h,m,hn[s.dtype],l,u,c,y,p,v,g),o}var Ryt={kernelName:Ov,backendName:"wasm",setupFunc:Myt,kernelFunc:Ayt},uue;function Dyt(e){uue=e.wasm.cwrap(Ad,null,["number","array","number","array","number","number"])}function Lyt(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,a=n.dataIdMap.get(i.dataId).id,{reps:s}=r,o=new Array(i.shape.length);for(let p=0;p<o.length;p++)o[p]=i.shape[p]*s[p];let l=new Uint8Array(new Int32Array(i.shape).buffer),u=new Uint8Array(new Int32Array(o).buffer),c=n.makeOutput(o,i.dtype),d=n.dataIdMap.get(c.dataId).id;return uue(a,l,i.shape.length,u,o.length,hn[c.dtype],d),c}var Fyt={kernelName:Ad,backendName:"wasm",setupFunc:Dyt,kernelFunc:Lyt},cue;function zyt(e){cue=e.wasm.cwrap(Bv,null,["number","array","number","number","number","bool","number","number"])}var Byt=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{k:i,sorted:a}=n,s=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=i;let u=t.makeOutput(l,r.dtype),c=t.dataIdMap.get(u.dataId).id,d=t.makeOutput(l,"int32"),p=t.dataIdMap.get(d.dataId).id;return cue(s,o,r.shape.length,hn[r.dtype],i,a,c,p),[u,d]},Wyt={kernelName:Bv,backendName:"wasm",setupFunc:zyt,kernelFunc:Byt},due;function Vyt(e){due=e.wasm.cwrap(Wv,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function jyt(e){let{backend:t,inputs:n,attrs:r}=e,{image:i,transforms:a}=n,{interpolation:s,fillMode:o,fillValue:l,outputShape:u}=r,[c,d,p,h]=i.shape,[m,g]=u!=null?u:[d,p],y=[c,m,g,h],v=new Uint8Array(new Int32Array(M.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(M.computeStrides(y)).buffer),_=t.makeOutput(y,i.dtype),k=t.dataIdMap.get(_.dataId).id,S=t.dataIdMap.get(i.dataId).id,$=t.dataIdMap.get(a.dataId).id,N=s==="nearest"?1:2,P;switch(o){case"constant":P=1;break;case"reflect":P=2;break;case"wrap":P=3;break;case"nearest":P=4;break;default:P=1;break}return due(S,$,a.shape[0]>1,c,m,g,h,p,d,v,i.shape.length-1,b,y.length-1,N,P,l,k),_}var Hyt={kernelName:Wv,backendName:"wasm",setupFunc:Vyt,kernelFunc:jyt};function Uyt(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:a}=t,{outputValues:s,outputShape:o,indices:l}=Bz(r.readSync(a.dataId),i,a.shape,a.dtype);return[r.makeOutput(o,a.dtype,void 0,s),r.makeOutput([l.length],"int32",void 0,l)]}var Gyt={kernelName:Iw,backendName:"wasm",kernelFunc:Uyt};function qyt(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i.shape[a],o=i.shape.length,l=new Array(o-1),u=0;for(let h=0;h<o;h++)h!==a&&(l[u++]=i.shape[h]);let c=new Array(s),d=new Array(o).fill(0),p=i.shape.slice();p[a]=1;for(let h=0;h<c.length;h++)d[a]=h,c[h]=kh({inputs:{x:i},attrs:{begin:d,size:p},backend:n});return c.map(({dataId:h,dtype:m})=>({dataId:h,dtype:m,shape:l}))}var Kyt={kernelName:Vv,backendName:"wasm",kernelFunc:qyt};function Zyt(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}var Xyt={kernelName:jv,backendName:"wasm",kernelFunc:Zyt},Jyt=[Vdt,jdt,Hdt,Udt,Gdt,Zdt,rpt,spt,opt,lpt,upt,cpt,dpt,ppt,hpt,gpt,Cpt,bpt,_pt,Npt,Rpt,Fpt,zpt,Wpt,Vpt,jpt,Gpt,qpt,Xpt,Qpt,nht,aht,lht,uht,cht,hht,ght,bht,_ht,Cht,Tht,Oht,Aht,Lht,Bht,Wht,Hht,Ght,qht,Kht,Zht,Xht,Jht,eft,tft,nft,aft,lft,dft,fft,yft,bft,xft,Xdt,_ft,kft,Sft,$ft,Nft,Oft,Aft,Dft,Rft,Fft,zft,Wft,jft,Gft,Zft,Yft,Qft,nmt,amt,lmt,dmt,fmt,ymt,wmt,xmt,Smt,Nmt,Emt,Omt,Pmt,Rmt,Fmt,Wmt,jmt,Gmt,Kmt,Xmt,Ble,Qmt,ngt,agt,ogt,lgt,ugt,cgt,dgt,Ipt,fgt,ygt,wgt,kgt,Igt,Ngt,Egt,Ogt,Agt,Lgt,Bgt,Wgt,Hgt,Ugt,Ggt,qgt,Mpt,Imt,Kgt,Xgt,Qgt,nyt,iyt,syt,uyt,dyt,pyt,hyt,fyt,yyt,wyt,_yt,Syt,Iyt,$yt,Eyt,Oyt,Pyt,Ryt,Fyt,Wyt,Hyt,ept,Gyt,Kyt,Xyt];for(let e of Jyt)Tw(e);var EM=fe();EM.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}});EM.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(EM.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var l8=Od(PLe()),Yyt=Od(MLe()),u8=Od(ALe()),c8=l8.default||l8,Qyt=u8.default||u8,pue=class extends aw{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(hue),OM=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new l$(this,eo())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=M.now();return e(),{kernelMs:M.now()-t}}move(e,t,n,r,i){let a=this.dataIdNextNumber++;if(r==="string"){let u=t;this.dataIdMap.set(e,{id:a,stringBytes:u,shape:n,dtype:r,memoryOffset:null,refCount:i});return}let s=M.sizeFromShape(n),o=s*M.bytesPerElement(r),l=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:a,memoryOffset:l,shape:n,dtype:r,refCount:i}),this.wasm.tfjs.registerTensor(a,s,l),t!=null&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e,t,n){let{memoryOffset:r,dtype:i,shape:a,stringBytes:s}=this.dataIdMap.get(e);if(i==="string")return(t==null||t===0)&&(n==null||n>=s.length)?s:s.slice(t,n);t=t||0,n=n||M.sizeFromShape(a);let o=M.bytesPerElement(i),l=this.wasm.HEAPU8.slice(r+t*o,r+n*o);return nvt(l.buffer,i)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);t!=null&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,r){let i;if(n==null)i=this.write(r!=null?r:null,e,t);else{let a=this.dataIdNextNumber++;i={id:a},this.dataIdMap.set(i,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});let s=M.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,s,n)}return{dataId:i,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:i}=this.dataIdMap.get(n),a=M.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,i,a);case"int32":return new Int32Array(r,i,a);case"bool":return new Uint8Array(r,i,a);default:throw new Error(`Unknown dtype ${t}`)}}};function evt(e){return(t,n)=>(M.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a(`failed to load wasm binary file at '${e}'`),r.arrayBuffer().then(i=>{WebAssembly.instantiate(i,t).then(a=>{n(a.instance,a.module)})})}),{})}function d8(e,t,n){if(MI!=null)return MI;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),Rb!=null&&Rb[r]!=null?Rb[r]:n+r}async function tvt(){let[e,t]=await Promise.all([fe().getAsync("WASM_HAS_SIMD_SUPPORT"),fe().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let i={};i.locateFile=(o,l)=>{if(o.endsWith(".worker.js")){let u=Yyt.wasmWorkerContents.replace(/\n/g,"\\n"),c=new Blob([u],{type:"application/javascript"});return URL.createObjectURL(c)}return o.endsWith(".wasm")?d8(e,t,yb!=null?yb:l):l+o},o3&&(i.instantiateWasm=evt(d8(e,t,yb!=null?yb:"")));let a=!1;i.onAbort=()=>{a||Db||(Db=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))};let s;t&&e&&MI==null?(i.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+c8.toString()],{type:"text/javascript"}),s=c8(i)):s=Qyt(i),s.then(o=>{a=!0,Db=!1;let l=null;o.tfjs={init:o.cwrap("init",null,[]),initWithThreadsCount:o.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:o.cwrap("get_threads_count","number",[]),registerTensor:o.cwrap("register_tensor",null,["number","number","number"]),disposeData:o.cwrap("dispose_data",l,["number"]),dispose:o.cwrap("dispose",l,[])},n({wasm:o})}).catch(r)})}function nvt(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}var rvt=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],MI=null,yb=null,Rb={},Db=!1,o3=!1;function ivt(e,t=!1){if(Dee("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Db)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");MI=e,o3=t}function avt(e,t=!1){if(Db)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof e=="string")yb=e;else{Rb=e;let n=rvt.filter(r=>Rb[r]==null);if(n.length>0)throw new Error(`There were no entries found for the following binaries: ${n.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}o3=t}var hue=-1,OM=-1;function svt(e){hue=e}function ovt(){if(OM===-1)throw new Error("WASM backend not initialized.");return OM}var lvt="4.16.0",uvt=2;I$("wasm",async()=>{let{wasm:e}=await tvt();return new pue(e)},uvt);var p8="4.16.0",cvt="4.16.0",dvt="4.16.0",pvt="4.16.0",hvt="4.16.0",fvt={tfjs:p8,"tfjs-core":p8,"tfjs-converter":cvt,"tfjs-backend-cpu":dvt,"tfjs-backend-webgl":pvt,"tfjs-backend-wasm":hvt},mvt={};fD(mvt,{AnchorPosition:()=>Eue,DrawBox:()=>Mue,DrawBoxOptions:()=>Pue,DrawFaceLandmarks:()=>Jue,DrawFaceLandmarksOptions:()=>Xue,DrawTextField:()=>h3,DrawTextFieldOptions:()=>p3,drawContour:()=>bc,drawDetections:()=>Tvt,drawFaceExpressions:()=>Wvt,drawFaceLandmarks:()=>jvt});function bc(e,t,n=!1){if(e.beginPath(),t.slice(1).forEach(({x:r,y:i},a)=>{let s=t[a];e.moveTo(s.x,s.y),e.lineTo(r,i)}),n){let r=t[t.length-1],i=t[0];if(!r||!i)return;e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}var gvt={};fD(gvt,{computeReshapedDimensions:()=>yue,getCenterPoint:()=>l3,isDimensions:()=>MM,isEven:()=>PM,isFloat:()=>gue,isTensor:()=>d0,isTensor1D:()=>yvt,isTensor2D:()=>mue,isTensor3D:()=>ox,isTensor4D:()=>$u,isValidNumber:()=>Vp,isValidProbablitiy:()=>vvt,range:()=>wy,round:()=>AT});var Dg=class fue{constructor(t,n){if(!Vp(t)||!Vp(n))throw new Error(`Dimensions.constructor - expected width and height to be valid numbers, instead have ${JSON.stringify({width:t,height:n})}`);this._width=t,this._height=n}get width(){return this._width}get height(){return this._height}reverse(){return new fue(1/this.width,1/this.height)}};function d0(e,t){return e instanceof zt&&e.shape.length===t}function yvt(e){return d0(e,1)}function mue(e){return d0(e,2)}function ox(e){return d0(e,3)}function $u(e){return d0(e,4)}function gue(e){return e%1!==0}function PM(e){return e%2===0}function AT(e,t=2){let n=10**t;return Math.floor(e*n)/n}function MM(e){return e&&e.width&&e.height}function yue({width:e,height:t},n){let r=n/Math.max(t,e);return new Dg(Math.round(e*r),Math.round(t*r))}function l3(e){return e.reduce((t,n)=>t.add(n),new Fn(0,0)).div(new Fn(e.length,e.length))}function wy(e,t,n){return Array(e).fill(0).map((r,i)=>t+i*n)}function Vp(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||e===0}function vvt(e){return Vp(e)&&e>=0&&e<=1}var Fn=class mp{constructor(t,n){this._x=t,this._y=n}get x(){return this._x}get y(){return this._y}add(t){return new mp(this.x+t.x,this.y+t.y)}sub(t){return new mp(this.x-t.x,this.y-t.y)}mul(t){return new mp(this.x*t.x,this.y*t.y)}div(t){return new mp(this.x/t.x,this.y/t.y)}abs(){return new mp(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new mp(Math.floor(this.x),Math.floor(this.y))}},Sh=class Po{static isRect(t){return!!t&&[t.x,t.y,t.width,t.height].every(Vp)}static assertIsValidBox(t,n,r=!1){if(!Po.isRect(t))throw new Error(`${n} - invalid box: ${JSON.stringify(t)}, expected object with properties x, y, width, height`);if(!r&&(t.width<0||t.height<0))throw new Error(`${n} - width (${t.width}) and height (${t.height}) must be positive numbers`)}constructor(t,n=!0){let r=t||{},i=[r.left,r.top,r.right,r.bottom].every(Vp),a=[r.x,r.y,r.width,r.height].every(Vp);if(!a&&!i)throw new Error(`Box.constructor - expected box to be IBoundingBox | IRect, instead have ${JSON.stringify(r)}`);let[s,o,l,u]=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top];Po.assertIsValidBox({x:s,y:o,width:l,height:u},"Box.constructor",n),this._x=s,this._y=o,this._width=l,this._height=u}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new Fn(this.left,this.top)}get topRight(){return new Fn(this.right,this.top)}get bottomLeft(){return new Fn(this.left,this.bottom)}get bottomRight(){return new Fn(this.right,this.bottom)}round(){let[t,n,r,i]=[this.x,this.y,this.width,this.height].map(a=>Math.round(a));return new Po({x:t,y:n,width:r,height:i})}floor(){let[t,n,r,i]=[this.x,this.y,this.width,this.height].map(a=>Math.floor(a));return new Po({x:t,y:n,width:r,height:i})}toSquare(){let{x:t,y:n,width:r,height:i}=this,a=Math.abs(r-i);return r<i&&(t-=a/2,r+=a),i<r&&(n-=a/2,i+=a),new Po({x:t,y:n,width:r,height:i})}rescale(t){let n=MM(t)?t.width:t,r=MM(t)?t.height:t;return new Po({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})}pad(t,n){let[r,i,a,s]=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new Po({x:r,y:i,width:a,height:s})}clipAtImageBorders(t,n){let{x:r,y:i,right:a,bottom:s}=this,o=Math.max(r,0),l=Math.max(i,0),u=a-o,c=s-l,d=Math.min(u,t-o),p=Math.min(c,n-l);return new Po({x:o,y:l,width:d,height:p}).floor()}shift(t,n){let{width:r,height:i}=this,a=this.x+t,s=this.y+n;return new Po({x:a,y:s,width:r,height:i})}padAtBorders(t,n){let r=this.width+1,i=this.height+1,a=1,s=1,o=r,l=i,u=this.left,c=this.top,d=this.right,p=this.bottom;return d>n&&(o=-d+n+r,d=n),p>t&&(l=-p+t+i,p=t),u<1&&(l=2-u,u=1),c<1&&(l=2-c,c=1),{dy:s,edy:l,dx:a,edx:o,y:c,ey:p,x:u,ex:d,w:r,h:i}}calibrate(t){return new Po({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()}},vue=class extends Sh{constructor(e,t,n,r,i=!1){super({left:e,top:t,right:n,bottom:r},i)}},bue=class wue{constructor(t,n,r,i,a){this._imageDims=new Dg(a.width,a.height),this._score=t,this._classScore=n,this._className=r,this._box=new Sh(i).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new Sh(this._box).rescale(this.imageDims.reverse())}forSize(t,n){return new wue(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})}},il=class xue extends bue{constructor(t,n,r){super(t,t,"",n,r)}forSize(t,n){let{score:r,relativeBox:i,imageDims:a}=super.forSize(t,n);return new xue(r,i,a)}};function bvt(e,t,n=!0){let r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),i=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),a=r*i;return n?a/(e.area+t.area-a):a/Math.min(e.area,t.area)}function wvt(e){let t=e.map(o=>o.x),n=e.map(o=>o.y),r=t.reduce((o,l)=>l<o?l:o,1/0),i=n.reduce((o,l)=>l<o?l:o,1/0),a=t.reduce((o,l)=>o<l?l:o,0),s=n.reduce((o,l)=>o<l?l:o,0);return new vue(r,i,a,s)}function xvt(e,t,n,r=!0){let i=t.map((s,o)=>({score:s,boxIndex:o})).sort((s,o)=>s.score-o.score).map(s=>s.boxIndex),a=[];for(;i.length>0;){let s=i.pop();a.push(s);let o=i,l=[];for(let u=0;u<o.length;u++){let c=o[u],d=e[s],p=e[c];l.push(bvt(d,p,r))}i=i.filter((u,c)=>l[c]<=n)}return a}function lx(e,t){return ue(()=>{let[n,r,i]=t,a=ps([...e.shape.slice(0,3),1],n,"float32"),s=ps([...e.shape.slice(0,3),1],r,"float32"),o=ps([...e.shape.slice(0,3),1],i,"float32"),l=Wn([a,s,o],3);return Ve(e,l)})}function _vt(e,t=!1){return ue(()=>{let[n,r]=e.shape.slice(1);if(n===r)return e;let i=Math.abs(n-r),a=Math.round(i*(t?.5:1)),s=n>r?2:1,o=d=>{let p=e.shape.slice();return p[s]=d,ps(p,0,"float32")},l=o(a),u=i-l.shape[s],c=[t&&u?o(u):null,e,l].filter(d=>!!d).map(d=>Ae(d,"float32"));return Wn(c,s)})}function ME(e){return 1/(1+Math.exp(-e))}var _ue=class extends Sh{constructor(e,t,n,r,i=!1){super({x:e,y:t,width:n,height:r},i)}},kvt=.5,Svt=.43,Cvt=.45,AI=class{constructor(e,t,n=new Fn(0,0)){let{width:r,height:i}=t;this._imgDims=new Dg(r,i),this._shift=n,this._positions=e.map(a=>a.mul(new Fn(r,i)).add(n))}get shift(){return new Fn(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new Fn(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new Fn(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){let i=e instanceof il?e.box.floor():new Sh(e);return this.shiftBy(i.x,i.y).align(null,t)}let{useDlibAlignment:n,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...t};return n?this.alignDlib():this.alignMinBbox(r)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,n,r]=e,i=c=>r.sub(c).magnitude(),a=(i(t)+i(n))/2,s=Math.floor(a/Cvt),o=l3(e),l=Math.floor(Math.max(0,o.x-kvt*s)),u=Math.floor(Math.max(0,o.y-Svt*s));return new _ue(l,u,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+u))}alignMinBbox(e){let t=wvt(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},kue=class extends AI{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(l3)}},h8=class{constructor(e,t){this._label=e,this._distance=t}get label(){return this._label}get distance(){return this._distance}toString(e=!0){return`${this.label}${e?` (${AT(this.distance)})`:""}`}},A_=class Sue{constructor(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(r=>!(r instanceof Float32Array)))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}get label(){return this._label}get descriptors(){return this._descriptors}toJSON(){return{label:this.label,descriptors:this.descriptors.map(t=>Array.from(t))}}static fromJSON(t){let n=t.descriptors.map(r=>new Float32Array(r));return new Sue(t.label,n)}};function RI(e){return e.detection instanceof il}function Cue(e,t){return{...e,detection:t}}function Iue(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function u3(){return typeof global=="object"&&typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function $ue(e){let t="";if(!e&&u3())try{e=cLe("fs")}catch(n){t=n.toString()}return{readFile:e?n=>new Promise((r,i)=>{e.readFile(n,(a,s)=>a?i(a):r(s))}):()=>{throw new Error(`readFile - failed to require fs in nodejs environment with error: ${t}`)}}}function Tue(){let e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=global.Video||global.HTMLVideoElement,r=()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},i=()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=()=>{if(n)return new n;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},s=global.fetch,o=$ue();return{Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:r,createImageElement:i,createVideoElement:a,fetch:s,...o}}function Nue(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}var ui;function Ivt(){if(!ui)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return ui}function AM(e){ui=e}function c3(){return Nue()?AM(Iue()):u3()?AM(Tue()):null}function $vt(e){if(ui||c3(),!ui)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=ui.Canvas,Image:n=ui.Image}=e;ui.Canvas=t,ui.Image=n,ui.createCanvasElement=e.createCanvasElement||(()=>new t),ui.createImageElement=e.createImageElement||(()=>new n),ui.ImageData=e.ImageData||ui.ImageData,ui.Video=e.Video||ui.Video,ui.fetch=e.fetch||ui.fetch,ui.readFile=e.readFile||ui.readFile}var ba={getEnv:Ivt,setEnv:AM,initialize:c3,createBrowserEnv:Iue,createFileSystem:$ue,createNodejsEnv:Tue,monkeyPatch:$vt,isBrowser:Nue,isNodejs:u3};c3();function d3(e){return!ba.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function _d(e){let{Canvas:t,CanvasRenderingContext2D:n}=ba.getEnv();if(e instanceof n)return e;let r=d3(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let i=r.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var Eue=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e))(Eue||{}),p3=class{constructor(e={}){let{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:i,fontStyle:a,padding:s}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=a||"Georgia",this.padding=s||4}},h3=class Oue{constructor(t,n,r={}){this.text=typeof t=="string"?[t]:t instanceof Oue?t.text:t,this.anchor=n,this.options=new p3(r)}measureWidth(t){let{padding:n}=this.options;return this.text.map(r=>t.measureText(r).width).reduce((r,i)=>r<i?i:r,0)+2*n}measureHeight(){let{fontSize:t,padding:n}=this.options;return this.text.length*t+2*n}getUpperLeft(t,n){let{anchorPosition:r}=this.options,i=r==="BOTTOM_RIGHT"||r==="TOP_RIGHT",a=r==="BOTTOM_LEFT"||r==="BOTTOM_RIGHT",s=this.measureWidth(t),o=this.measureHeight(),l=i?this.anchor.x-s:this.anchor.x,u=a?this.anchor.y-o:this.anchor.y;if(n){let{width:c,height:d}=n,p=Math.max(Math.min(l,c-s),0),h=Math.max(Math.min(u,d-o),0);return{x:p,y:h}}return{x:l,y:u}}draw(t){let n=d3(t),r=_d(n),{backgroundColor:i,fontColor:a,fontSize:s,fontStyle:o,padding:l}=this.options;r.font=`${s}px ${o}`;let u=this.measureWidth(r),c=this.measureHeight();r.fillStyle=i;let d=this.getUpperLeft(r,n);r.fillRect(d.x,d.y,u,c),r.fillStyle=a,this.text.forEach((p,h)=>{let m=l+d.x,g=l+d.y+(h+1)*s;r.fillText(p,m,g)})}},Pue=class{constructor(e={}){let{boxColor:t,lineWidth:n,label:r,drawLabelOptions:i}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;let a={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new p3({...a,...i})}},Mue=class{constructor(e,t={}){this.box=new Sh(e),this.options=new Pue(t)}draw(e){let t=_d(e),{boxColor:n,lineWidth:r}=this.options,{x:i,y:a,width:s,height:o}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(i,a,s,o);let{label:l}=this.options;l&&new h3([l],{x:i-r/2,y:a},this.options.drawLabelOptions).draw(e)}};function Tvt(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof il?n.score:RI(n)?n.detection.score:void 0,i=n instanceof il?n.box:RI(n)?n.detection.box:new Sh(n),a=r?`${AT(r)}`:void 0;new Mue(i,{label:a}).draw(e)})}function Aue(e){let{Image:t,Video:n}=ba.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function Nvt(e){return new Promise((t,n)=>{(e instanceof ba.getEnv().Canvas||Aue(e))&&t(null);function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",i),a.currentTarget.removeEventListener("error",r),n(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",i),a.currentTarget.removeEventListener("error",r),t(a))}e.addEventListener("load",i),e.addEventListener("error",r)})}function Evt(e){return new Promise((t,n)=>{e instanceof Blob||n(new Error("bufferToImage - expected buf to be of type: Blob"));let r=new FileReader;r.onload=()=>{typeof r.result!="string"&&n(new Error("bufferToImage - expected reader.result to be a string, in onload"));let i=ba.getEnv().createImageElement();i.onload=()=>t(i),i.onerror=n,i.src=r.result},r.onerror=n,r.readAsDataURL(e)})}function Rue(e){let{Image:t,Video:n}=ba.getEnv();return e instanceof t?new Dg(e.naturalWidth,e.naturalHeight):e instanceof n?new Dg(e.videoWidth,e.videoHeight):new Dg(e.width,e.height)}function DI({width:e,height:t}){let{createCanvasElement:n}=ba.getEnv(),r=n();return r.width=e,r.height=t,r}function Due(e,t){let{ImageData:n}=ba.getEnv();if(!(e instanceof n)&&!Aue(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:i}=t||Rue(e),a=DI({width:r,height:i});return e instanceof n?_d(a).putImageData(e,0,0):_d(a).drawImage(e,0,0,r,i),a}async function Ovt(e,t){let n=t||ba.getEnv().createCanvasElement(),[r,i,a]=e.shape.slice($u(e)?1:0),s=ue(()=>e.as3D(r,i,a).toInt());return await qw.toPixels(s,n),s.dispose(),n}function f8(e){let{Image:t,Canvas:n,Video:r}=ba.getEnv();return e instanceof t||e instanceof n||e instanceof r}function Pvt(e,t,n=!1){let{Image:r,Canvas:i}=ba.getEnv();if(!(e instanceof r||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return DI({width:1,height:1});let a=Rue(e),s=t/Math.max(a.height,a.width),o=s*a.width,l=s*a.height,u=DI({width:t,height:t}),c=e instanceof i?e:Due(e),d=Math.abs(o-l)/2,p=n&&o<l?d:0,h=n&&l<o?d:0;return c.width>0&&c.height>0&&_d(u).drawImage(c,p,h,o,l),u}var LI=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error(`NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ${e}`);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((n,r)=>{if(ox(n)){this._imageTensors[r]=n,this._inputDimensions[r]=n.shape;return}if($u(n)){let a=n.shape[0];if(a!==1)throw new Error(`NetInput - tf.Tensor4D with batchSize ${a} passed, but not supported in input array`);this._imageTensors[r]=n,this._inputDimensions[r]=n.shape.slice(1);return}let i=n instanceof ba.getEnv().Canvas?n:Due(n);this._canvases[r]=i,this._inputDimensions[r]=[i.height,i.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return wy(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");let t=this.getInputWidth(e),n=this.getInputHeight(e);return yue({width:t,height:n},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,ue(()=>{let n=wy(this.batchSize,0,1).map(r=>{let i=this.getInput(r);if(i instanceof zt){let a=$u(i)?i:gi(i);return a=_vt(a,t),(a.shape[1]!==e||a.shape[2]!==e)&&(a=Ns.resizeBilinear(a,[e,e],!1,!1)),a.as3D(e,e,3)}if(i instanceof ba.getEnv().Canvas)return qw.fromPixels(Pvt(i,e,t));throw new Error(`toBatchTensor - at batchIdx ${r}, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ${i}`)});return Wr(n.map(r=>Ae(r,"float32"))).as4D(this.batchSize,e,e,3)})}};async function wa(e){if(e instanceof LI)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let n=i=>Array.isArray(e)?` at input index ${i}:`:"",r=t.map(d3);return r.forEach((i,a)=>{if(!f8(i)&&!ox(i)&&!$u(i))throw typeof t[a]=="string"?new Error(`toNetInput -${n(a)} string passed, but could not resolve HTMLElement for element id ${t[a]}`):new Error(`toNetInput -${n(a)} expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id`);if($u(i)){let s=i.shape[0];if(s!==1)throw new Error(`toNetInput -${n(a)} tf.Tensor4D with batchSize ${s} passed, but not supported in input array`)}}),await Promise.all(r.map(i=>f8(i)&&Nvt(i))),new LI(r,Array.isArray(e))}async function f3(e,t){let{Canvas:n}=ba.getEnv(),r=e;if(!(e instanceof n)){let a=await wa(e);if(a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let s=a.getInput(0);r=s instanceof n?s:await Ovt(s)}let i=_d(r);return t.map(a=>a instanceof il?a.forSize(r.width,r.height).box.floor():a).map(a=>a.clipAtImageBorders(r.width,r.height)).map(({x:a,y:s,width:o,height:l})=>{let u=DI({width:o,height:l});return o>0&&l>0&&_d(u).putImageData(i.getImageData(a,s,o,l),0,0),u})}async function m3(e,t){if(!ox(e)&&!$u(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if($u(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return ue(()=>{let[n,r,i]=e.shape.slice($u(e)?1:0);return t.map(a=>a instanceof il?a.forSize(r,n).box:a).map(a=>a.clipAtImageBorders(r,n)).filter(a=>a.width>0&&a.height>0).map(({x:a,y:s,width:o,height:l})=>Jv(e.as3D(n,r,i),[s,a,0],[l,o,i]))})}async function Lue(e,t){let{fetch:n}=ba.getEnv(),r=await n(e,t);if(!(r.status<400))throw new Error(`failed to fetch: (${r.status}) ${r.statusText}, from url: ${r.url}`);return r}async function m8(e){let t=await Lue(e),n=await t.blob();if(!n.type.startsWith("image/"))throw new Error(`fetchImage - expected blob type to be of type image/*, instead have: ${n.type}, for url: ${t.url}`);return Evt(n)}async function Mvt(e){return(await Lue(e)).json()}function Fue(e,t){let n=`${t}-weights_manifest.json`;if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:`/${n}`};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");let i=e.split("/").filter(o=>o),a=e.endsWith(".json")?i[i.length-1]:n,s=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return s=e.startsWith("/")?`/${s}`:s,{modelBaseUri:s,manifestUri:s==="/"?`/${a}`:`${s}/${a}`}}async function Avt(e,t){let{manifestUri:n,modelBaseUri:r}=Fue(e,t),i=await Mvt(n);return Oi.loadWeights(i,r)}var Ud=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){let{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof oh)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof oh))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{let n=ma(t.dataSync());t.dispose(),this.reassignParamFromPath(e,n)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error(`param tensor has already been disposed for path ${t.path}`);t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){if(e instanceof Float32Array){this.extractWeights(e);return}await this.loadFromUri(e)}async loadFromUri(e){if(e&&typeof e!="string")throw new Error(`${this._name}.loadFromUri - expected model uri`);let t=await Avt(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&typeof e!="string")throw new Error(`${this._name}.loadFromDisk - expected model file path`);let{readFile:t}=ba.getEnv(),{manifestUri:n,modelBaseUri:r}=Fue(e,this.getDefaultModelName()),i=l=>Promise.all(l.map(u=>t(u).then(c=>typeof c=="string"?Buffer.from(c):c.buffer))),a=Oi.weightsLoaderFactory(i),s=JSON.parse((await t(n)).toString()),o=await a(s,r);this.loadFromWeightMap(o)}loadFromWeightMap(e){let{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){let{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((i,a)=>{if(!i.nextObj.hasOwnProperty(a))throw new Error(`traversePropertyPath - object does not have property ${a}, for path ${e}`);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!n||!r||!(n[r]instanceof zt))throw new Error(`traversePropertyPath - parameter is not a tensor, for path ${e}`);return{obj:n,objProp:r}}};function Ps(e,t,n){return ue(()=>{let r=Xv(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=we(r,t.bias),r})}function AE(e,t,n=!1){return ue(()=>{let r=On(n?we(ya(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Ps(e,t.conv0,[2,2])),i=Ps(r,t.conv1,[1,1]),a=On(we(r,i)),s=Ps(a,t.conv2,[1,1]);return On(we(r,we(i,s)))})}function R_(e,t,n=!1,r=!0){return ue(()=>{let i=On(n?we(ya(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Ps(e,t.conv0,r?[2,2]:[1,1])),a=Ps(i,t.conv1,[1,1]),s=On(we(i,a)),o=Ps(s,t.conv2,[1,1]),l=On(we(i,we(a,o))),u=Ps(l,t.conv3,[1,1]);return On(we(i,we(a,we(o,u))))})}function Lb(e,t,n="same",r=!1){return ue(()=>{let i=we(ya(e,t.filters,[1,1],n),t.bias);return r?On(i):i})}function Gd(e,t){Object.keys(e).forEach(n=>{t.some(r=>r.originalPath===n)||e[n].dispose()})}function g3(e,t){return(n,r,i,a)=>{let s=md(e(n*r*i*i),[i,i,n,r]),o=$n(e(r));return t.push({paramPath:`${a}/filters`},{paramPath:`${a}/bias`}),{filters:s,bias:o}}}function zue(e,t){return(n,r,i)=>{let a=Bl(e(n*r),[n,r]),s=$n(e(r));return t.push({paramPath:`${i}/weights`},{paramPath:`${i}/bias`}),{weights:a,bias:s}}}var Bue=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function y3(e,t){return(n,r,i)=>{let a=md(e(9*n),[3,3,n,1]),s=md(e(n*r),[1,1,n,r]),o=$n(e(r));return t.push({paramPath:`${i}/depthwise_filter`},{paramPath:`${i}/pointwise_filter`},{paramPath:`${i}/bias`}),new Bue(a,s,o)}}function v3(e){return t=>{let n=e(`${t}/depthwise_filter`,4),r=e(`${t}/pointwise_filter`,4),i=e(`${t}/bias`,1);return new Bue(n,r,i)}}function hm(e,t){return(n,r,i)=>{let a=e[n];if(!d0(a,r))throw new Error(`expected weightMap[${n}] to be a Tensor${r}D, instead have ${a}`);return t.push({originalPath:n,paramPath:i||n}),a}}function qd(e){let t=e;function n(i){let a=t.slice(0,i);return t=t.slice(i),a}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function Wue(e,t){let n=g3(e,t),r=y3(e,t);function i(s,o,l,u=!1){let c=u?n(s,o,3,`${l}/conv0`):r(s,o,`${l}/conv0`),d=r(o,o,`${l}/conv1`),p=r(o,o,`${l}/conv2`);return{conv0:c,conv1:d,conv2:p}}function a(s,o,l,u=!1){let{conv0:c,conv1:d,conv2:p}=i(s,o,l,u),h=r(o,o,`${l}/conv3`);return{conv0:c,conv1:d,conv2:p,conv3:h}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function Rvt(e){let t=[],{extractWeights:n,getRemainingWeights:r}=qd(e),{extractDenseBlock4Params:i}=Wue(n,t),a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),o=i(64,128,"dense2"),l=i(128,256,"dense3");if(r().length!==0)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:o,dense3:l}}}function Vue(e){return t=>{let n=e(`${t}/filters`,4),r=e(`${t}/bias`,1);return{filters:n,bias:r}}}function jue(e,t){let n=hm(e,t),r=Vue(n),i=v3(n);function a(o,l=!1){let u=l?r(`${o}/conv0`):i(`${o}/conv0`),c=i(`${o}/conv1`),d=i(`${o}/conv2`);return{conv0:u,conv1:c,conv2:d}}function s(o,l=!1){let u=l?r(`${o}/conv0`):i(`${o}/conv0`),c=i(`${o}/conv1`),d=i(`${o}/conv2`),p=i(`${o}/conv3`);return{conv0:u,conv1:c,conv2:d,conv3:p}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:s}}function Dvt(e){let t=[],{extractDenseBlock4Params:n}=jue(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Gd(e,t),{params:r,paramMappings:t}}var Hue=class extends Ud{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return ue(()=>{let n=Ae(e.toBatchTensor(112,!0),"float32"),r=lx(n,[122.782,117.001,104.298]).div(255),i=R_(r,t.dense0,!0);return i=R_(i,t.dense1),i=R_(i,t.dense2),i=R_(i,t.dense3),i=Xu(i,[7,7],[2,2],"valid"),i})}async forward(e){return this.forwardInput(await wa(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return Dvt(e)}extractParams(e){return Rvt(e)}};function RM(e,t){return ue(()=>we(jt(e,t.weights),t.bias))}function Lvt(e,t,n){let r=[],{extractWeights:i,getRemainingWeights:a}=qd(e),s=zue(i,r)(t,n,"fc");if(a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{paramMappings:r,params:{fc:s}}}function Fvt(e){let t=[],n=hm(e,t);function r(a){let s=n(`${a}/weights`,2),o=n(`${a}/bias`,1);return{weights:s,bias:o}}let i={fc:r("fc")};return Gd(e,t),{params:i,paramMappings:t}}function Uue(e){let t={},n={};return Object.keys(e).forEach(r=>{let i=r.startsWith("fc")?n:t;i[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var Gue=class extends Ud{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(`${this._name} - load model before inference`);return ue(()=>{let n=e instanceof LI?this.faceFeatureExtractor.forwardInput(e):e;return RM(n.as2D(n.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return Lvt(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=Uue(e);return this.faceFeatureExtractor.loadFromWeightMap(t),Fvt(n)}extractParams(e){let t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)}},g8=["neutral","happy","sad","angry","fearful","disgusted","surprised"],b3=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,e.length!==7)throw new Error(`FaceExpressions.constructor - expected probabilities.length to be 7, have: ${e.length}`);g8.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return g8.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}},zvt=class extends Gue{constructor(e=new Hue){super("FaceExpressionNet",e)}forwardInput(e){return ue(()=>zd(this.runNet(e)))}async forward(e){return this.forwardInput(await wa(e))}async predictExpressions(e){let t=await wa(e),n=await this.forwardInput(t),r=await Promise.all($r(n).map(async a=>{let s=a.dataSync();return a.dispose(),s}));n.dispose();let i=r.map(a=>new b3(a));return t.isBatchInput?i:i[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}};function Bvt(e){return e.expressions instanceof b3}function que(e,t){return{...e,expressions:t}}function Wvt(e,t,n=.1,r){(Array.isArray(t)?t:[t]).forEach(i=>{let a=i instanceof b3?i:Bvt(i)?i.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let s=a.asSortedArray().filter(l=>l.probability>n),o=RI(i)?i.detection.box.bottomLeft:r||new Fn(0,0);new h3(s.map(l=>`${l.expression} (${AT(l.probability)})`),o).draw(e)})}function Kue(e){return RI(e)&&e.landmarks instanceof AI&&e.unshiftedLandmarks instanceof AI&&e.alignedRect instanceof il}function Vvt(e){let t=l=>l*180/Math.PI,n=(l,u)=>Math.sqrt((l.x-u.x)**2+(l.y-u.y)**2),r={roll:void 0,pitch:void 0,yaw:void 0},i=(l,u,c)=>{let d=Math.floor(l.x-u.x),p=Math.floor(u.x-c.x);return d-p},a=(l,u)=>{let c=Math.hypot(u.x-l.x,u.y-l.y),d=u.y-l.y,p=Math.asin(d/c),h=t(p),m=Math.floor(90-h),g=u.x-l.x<0?-1:1;return m*g},s=(l,u,c)=>{let d=n(l,c),p=new Fn((l.x+c.x)/2,(l.y+c.y)/2),h=n(u,p),m=Math.atan(h/d),g=Math.floor(t(m)),y=p.y-u.y<0?-1:1;return g*y};if(!e||!e.positions||e.positions.length!==68)return r;let o=e.positions;return r.roll=a(o[27],o[66]),r.pitch=s(o[14],o[30],o[2]),r.yaw=i(o[14],o[33],o[2]),r}function Zue(e,t){let{box:n}=e.detection,r=t.shiftBy(n.x,n.y),i=r.align(),{imageDims:a}=e.detection,s=new il(e.detection.score,i.rescale(a.reverse()),a),o=Vvt(t);return{...e,landmarks:r,unshiftedLandmarks:t,alignedRect:s,angle:o}}var Xue=class{constructor(e={}){let{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:i,pointSize:a,pointColor:s}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=a||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},Jue=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new Xue(t)}draw(e){let t=_d(e),{drawLines:n,drawPoints:r,lineWidth:i,lineColor:a,pointSize:s,pointColor:o}=this.options;if(n&&this.faceLandmarks instanceof kue&&(t.strokeStyle=a,t.lineWidth=i,bc(t,this.faceLandmarks.getJawOutline()),bc(t,this.faceLandmarks.getLeftEyeBrow()),bc(t,this.faceLandmarks.getRightEyeBrow()),bc(t,this.faceLandmarks.getNose()),bc(t,this.faceLandmarks.getLeftEye(),!0),bc(t,this.faceLandmarks.getRightEye(),!0),bc(t,this.faceLandmarks.getMouth(),!0)),r){t.strokeStyle=o,t.fillStyle=o;let l=u=>{t.beginPath(),t.arc(u.x,u.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(l)}}};function jvt(e,t){(Array.isArray(t)?t:[t]).forEach(n=>{let r=n instanceof AI?n:Kue(n)?n.landmarks:void 0;if(!r)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new Jue(r).draw(e)})}function Hvt(e,t){let n=g3(e,t),r=y3(e,t);function i(s,o,l){let u=r(s,o,`${l}/separable_conv0`),c=r(o,o,`${l}/separable_conv1`),d=n(s,o,1,`${l}/expansion_conv`);return{separable_conv0:u,separable_conv1:c,expansion_conv:d}}function a(s,o){let l=r(s,s,`${o}/separable_conv0`),u=r(s,s,`${o}/separable_conv1`),c=r(s,s,`${o}/separable_conv2`);return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:a}}function Uvt(e,t){let n=[],{extractWeights:r,getRemainingWeights:i}=qd(e),{extractConvParams:a,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=Hvt(r,n),u=a(3,32,3,"entry_flow/conv_in"),c=o(32,64,"entry_flow/reduction_block_0"),d=o(64,128,"entry_flow/reduction_block_1"),p={conv_in:u,reduction_block_0:c,reduction_block_1:d},h={};wy(t,0,1).forEach(v=>{h[`main_block_${v}`]=l(128,`middle_flow/main_block_${v}`)});let m=o(128,256,"exit_flow/reduction_block"),g=s(256,512,"exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};if(i().length!==0)throw new Error(`weights remaing after extract: ${i().length}`);return{paramMappings:n,params:{entry_flow:p,middle_flow:h,exit_flow:y}}}function Gvt(e,t){let n=hm(e,t),r=Vue(n),i=v3(n);function a(o){let l=i(`${o}/separable_conv0`),u=i(`${o}/separable_conv1`),c=r(`${o}/expansion_conv`);return{separable_conv0:l,separable_conv1:u,expansion_conv:c}}function s(o){let l=i(`${o}/separable_conv0`),u=i(`${o}/separable_conv1`),c=i(`${o}/separable_conv2`);return{separable_conv0:l,separable_conv1:u,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:s}}function qvt(e,t){let n=[],{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:s}=Gvt(e,n),o=r("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),u=a("entry_flow/reduction_block_1"),c={conv_in:o,reduction_block_0:l,reduction_block_1:u},d={};wy(t,0,1).forEach(g=>{d[`main_block_${g}`]=s(`middle_flow/main_block_${g}`)});let p=a("exit_flow/reduction_block"),h=i("exit_flow/separable_conv"),m={reduction_block:p,separable_conv:h};return Gd(e,n),{params:{entry_flow:c,middle_flow:d,exit_flow:m},paramMappings:n}}function Yue(e,t,n){return we(ya(e,t.filters,n,"same"),t.bias)}function RE(e,t,n=!0){let r=n?On(e):e;return r=Ps(r,t.separable_conv0,[1,1]),r=Ps(On(r),t.separable_conv1,[1,1]),r=ci(r,[3,3],[2,2],"same"),r=we(r,Yue(e,t.expansion_conv,[2,2])),r}function Kvt(e,t){let n=Ps(On(e),t.separable_conv0,[1,1]);return n=Ps(On(n),t.separable_conv1,[1,1]),n=Ps(On(n),t.separable_conv2,[1,1]),n=we(n,e),n}var Zvt=class extends Ud{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return ue(()=>{let n=Ae(e.toBatchTensor(112,!0),"float32"),r=lx(n,[122.782,117.001,104.298]).div(255),i=On(Yue(r,t.entry_flow.conv_in,[2,2]));return i=RE(i,t.entry_flow.reduction_block_0,!1),i=RE(i,t.entry_flow.reduction_block_1),wy(this._numMainBlocks,0,1).forEach(a=>{i=Kvt(i,t.middle_flow[`main_block_${a}`])}),i=RE(i,t.exit_flow.reduction_block),i=On(Ps(i,t.exit_flow.separable_conv,[1,1])),i})}async forward(e){return this.forwardInput(await wa(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return qvt(e,this._numMainBlocks)}extractParams(e){return Uvt(e,this._numMainBlocks)}};function Xvt(e){let t=[],{extractWeights:n,getRemainingWeights:r}=qd(e),i=zue(n,t),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(r().length!==0)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}function Jvt(e){let t=[],n=hm(e,t);function r(a){let s=n(`${a}/weights`,2),o=n(`${a}/bias`,1);return{weights:s,bias:o}}let i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Gd(e,t),{params:i,paramMappings:t}}var Yvt=(e=>(e.FEMALE="female",e.MALE="male",e))(Yvt||{}),Qvt=class extends Ud{constructor(e=new Zvt(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(`${this._name} - load model before inference`);return ue(()=>{let n=e instanceof LI?this.faceFeatureExtractor.forwardInput(e):e,r=Xu(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1),i=RM(r,t.fc.age).as1D(),a=RM(r,t.fc.gender);return{age:i,gender:a}})}forwardInput(e){return ue(()=>{let{age:t,gender:n}=this.runNet(e);return{age:t,gender:zd(n)}})}async forward(e){return this.forwardInput(await wa(e))}async predictAgeAndGender(e){let t=await wa(e),n=await this.forwardInput(t),r=$r(n.age),i=$r(n.gender),a=r.map((o,l)=>({ageTensor:o,genderTensor:i[l]})),s=await Promise.all(a.map(async({ageTensor:o,genderTensor:l})=>{let u=o.dataSync()[0],c=l.dataSync()[0],d=c>.5,p=d?"male":"female",h=d?c:1-c;return o.dispose(),l.dispose(),{age:u,gender:p,genderProbability:h}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?s:s[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return Xvt(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=Uue(e);return this.faceFeatureExtractor.loadFromWeightMap(t),Jvt(n)}extractParams(e){let t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}},Que=class extends Gue{postProcess(e,t,n){let r=n.map(({width:a,height:s})=>{let o=t/Math.max(s,a);return{width:a*o,height:s*o}}),i=r.length;return ue(()=>{let a=(u,c)=>Wr([ps([68],u,"float32"),ps([68],c,"float32")],1).as2D(1,136).as1D(),s=(u,c)=>{let{width:d,height:p}=r[u];return c(d,p)?Math.abs(d-p)/2:0},o=u=>s(u,(c,d)=>c<d),l=u=>s(u,(c,d)=>d<c);return e.mul(ps([i,136],t,"float32")).sub(Wr(Array.from(Array(i),(u,c)=>a(o(c),l(c))))).div(Wr(Array.from(Array(i),(u,c)=>a(r[c].width,r[c].height))))})}forwardInput(e){return ue(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([n,r])=>({height:n,width:r})))})}async forward(e){return this.forwardInput(await wa(e))}async detectLandmarks(e){let t=await wa(e),n=ue(()=>$r(this.forwardInput(t))),r=await Promise.all(n.map(async(i,a)=>{let s=Array.from(i.dataSync()),o=s.filter((u,c)=>PM(c)),l=s.filter((u,c)=>!PM(c));return new kue(Array(68).fill(0).map((u,c)=>new Fn(o[c],l[c])),{height:t.getInputHeight(a),width:t.getInputWidth(a)})}));return n.forEach(i=>i.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},e0t=class extends Que{constructor(e=new Hue){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};function t0t(e){let t=[],{extractDenseBlock3Params:n}=jue(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Gd(e,t),{params:r,paramMappings:t}}function n0t(e){let t=[],{extractWeights:n,getRemainingWeights:r}=qd(e),{extractDenseBlock3Params:i}=Wue(n,t),a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),o=i(64,128,"dense2");if(r().length!==0)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:o}}}var r0t=class extends Ud{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return ue(()=>{let n=Ae(e.toBatchTensor(112,!0),"float32"),r=lx(n,[122.782,117.001,104.298]).div(255),i=AE(r,t.dense0,!0);return i=AE(i,t.dense1),i=AE(i,t.dense2),i=Xu(i,[14,14],[2,2],"valid"),i})}async forward(e){return this.forwardInput(await wa(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return t0t(e)}extractParams(e){return n0t(e)}},i0t=class extends Que{constructor(e=new r0t){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}};function a0t(e,t){return we(se(e,t.weights),t.biases)}function w3(e,t,n,r,i="same"){let{filters:a,bias:s}=t.conv,o=ya(e,a,n,i);return o=we(o,s),o=a0t(o,t.scale),r?On(o):o}function s0t(e,t){return w3(e,t,[1,1],!0)}function ece(e,t){return w3(e,t,[1,1],!1)}function tce(e,t){return w3(e,t,[2,2],!0,"valid")}function o0t(e,t){function n(o,l,u){let c=e(o),d=c.length/(l*u*u);if(gue(d))throw new Error(`depth has to be an integer: ${d}, weights.length: ${c.length}, numFilters: ${l}, filterSize: ${u}`);return ue(()=>Ht(md(c,[l,d,u,u]),[2,3,1,0]))}function r(o,l,u,c){let d=n(o,l,u),p=$n(e(l));return t.push({paramPath:`${c}/filters`},{paramPath:`${c}/bias`}),{filters:d,bias:p}}function i(o,l){let u=$n(e(o)),c=$n(e(o));return t.push({paramPath:`${l}/weights`},{paramPath:`${l}/biases`}),{weights:u,biases:c}}function a(o,l,u,c){let d=r(o,l,u,`${c}/conv`),p=i(l,`${c}/scale`);return{conv:d,scale:p}}function s(o,l,u,c,d=!1){let p=a((d?.5:1)*o,l,u,`${c}/conv1`),h=a(o,l,u,`${c}/conv2`);return{conv1:p,conv2:h}}return{extractConvLayerParams:a,extractResidualLayerParams:s}}function l0t(e){let{extractWeights:t,getRemainingWeights:n}=qd(e),r=[],{extractConvLayerParams:i,extractResidualLayerParams:a}=o0t(t,r),s=i(4704,32,7,"conv32_down"),o=a(9216,32,3,"conv32_1"),l=a(9216,32,3,"conv32_2"),u=a(9216,32,3,"conv32_3"),c=a(36864,64,3,"conv64_down",!0),d=a(36864,64,3,"conv64_1"),p=a(36864,64,3,"conv64_2"),h=a(36864,64,3,"conv64_3"),m=a(147456,128,3,"conv128_down",!0),g=a(147456,128,3,"conv128_1"),y=a(147456,128,3,"conv128_2"),v=a(589824,256,3,"conv256_down",!0),b=a(589824,256,3,"conv256_1"),_=a(589824,256,3,"conv256_2"),k=a(589824,256,3,"conv256_down_out"),S=ue(()=>Ht(Bl(t(256*128),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),n().length!==0)throw new Error(`weights remaing after extract: ${n().length}`);return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:u,conv64_down:c,conv64_1:d,conv64_2:p,conv64_3:h,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:v,conv256_1:b,conv256_2:_,conv256_down_out:k,fc:S},paramMappings:r}}function u0t(e,t){let n=hm(e,t);function r(s){let o=n(`${s}/scale/weights`,1),l=n(`${s}/scale/biases`,1);return{weights:o,biases:l}}function i(s){let o=n(`${s}/conv/filters`,4),l=n(`${s}/conv/bias`,1),u=r(s);return{conv:{filters:o,bias:l},scale:u}}function a(s){return{conv1:i(`${s}/conv1`),conv2:i(`${s}/conv2`)}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function c0t(e){let t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=u0t(e,t),i=n("conv32_down"),a=r("conv32_1"),s=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),u=r("conv64_1"),c=r("conv64_2"),d=r("conv64_3"),p=r("conv128_down"),h=r("conv128_1"),m=r("conv128_2"),g=r("conv256_down"),y=r("conv256_1"),v=r("conv256_2"),b=r("conv256_down_out"),{fc:_}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!mue(_))throw new Error(`expected weightMap[fc] to be a Tensor2D, instead have ${_}`);let k={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:u,conv64_2:c,conv64_3:d,conv128_down:p,conv128_1:h,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:v,conv256_down_out:b,fc:_};return Gd(e,t),{params:k,paramMappings:t}}function fl(e,t){let n=s0t(e,t.conv1);return n=ece(n,t.conv2),n=we(n,e),n=On(n),n}function D_(e,t){let n=tce(e,t.conv1);n=ece(n,t.conv2);let r=Xu(e,2,2,"valid"),i=yr(r.shape),a=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){let s=[...n.shape];s[1]=1;let o=yr(s);n=Wn([n,o],1);let l=[...n.shape];l[2]=1;let u=yr(l);n=Wn([n,u],2)}return r=a?Wn([r,i],3):r,n=we(r,n),n=On(n),n}var d0t=class extends Ud{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return ue(()=>{let n=Ae(e.toBatchTensor(150,!0),"float32"),r=lx(n,[122.782,117.001,104.298]).div(255),i=tce(r,t.conv32_down);i=ci(i,3,2,"valid"),i=fl(i,t.conv32_1),i=fl(i,t.conv32_2),i=fl(i,t.conv32_3),i=D_(i,t.conv64_down),i=fl(i,t.conv64_1),i=fl(i,t.conv64_2),i=fl(i,t.conv64_3),i=D_(i,t.conv128_down),i=fl(i,t.conv128_1),i=fl(i,t.conv128_2),i=D_(i,t.conv256_down),i=fl(i,t.conv256_1),i=fl(i,t.conv256_2),i=D_(i,t.conv256_down_out);let a=i.mean([1,2]);return jt(a,t.fc)})}async forward(e){return this.forwardInput(await wa(e))}async computeFaceDescriptor(e){var t;if((t=e==null?void 0:e.shape)!=null&&t.some(a=>a<=0))return new Float32Array(128);let n=await wa(e),r=ue(()=>$r(this.forwardInput(n))),i=await Promise.all(r.map(a=>a.data()));return r.forEach(a=>a.dispose()),n.isBatchInput?i:i[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return c0t(e)}extractParams(e){return l0t(e)}};function nce(e,t){return{...e,descriptor:t}}function rce(e,t){return{...e,age:t}}function ice(e,t,n){return{...e,gender:t,genderProbability:n}}function p0t(e,t){function n(l,u){let c=md(e(9*l),[3,3,l,1]),d=$n(e(l)),p=$n(e(l)),h=$n(e(l)),m=$n(e(l));return t.push({paramPath:`${u}/filters`},{paramPath:`${u}/batch_norm_scale`},{paramPath:`${u}/batch_norm_offset`},{paramPath:`${u}/batch_norm_mean`},{paramPath:`${u}/batch_norm_variance`}),{filters:c,batch_norm_scale:d,batch_norm_offset:p,batch_norm_mean:h,batch_norm_variance:m}}function r(l,u,c,d,p){let h=md(e(l*u*c*c),[c,c,l,u]),m=$n(e(u));return t.push({paramPath:`${d}/filters`},{paramPath:`${d}/${p?"batch_norm_offset":"bias"}`}),{filters:h,bias:m}}function i(l,u,c,d){let{filters:p,bias:h}=r(l,u,c,d,!0);return{filters:p,batch_norm_offset:h}}function a(l,u,c){let d=n(l,`${c}/depthwise_conv`),p=i(l,u,1,`${c}/pointwise_conv`);return{depthwise_conv:d,pointwise_conv:p}}function s(){let l=i(3,32,3,"mobilenetv1/conv_0"),u=a(32,64,"mobilenetv1/conv_1"),c=a(64,128,"mobilenetv1/conv_2"),d=a(128,128,"mobilenetv1/conv_3"),p=a(128,256,"mobilenetv1/conv_4"),h=a(256,256,"mobilenetv1/conv_5"),m=a(256,512,"mobilenetv1/conv_6"),g=a(512,512,"mobilenetv1/conv_7"),y=a(512,512,"mobilenetv1/conv_8"),v=a(512,512,"mobilenetv1/conv_9"),b=a(512,512,"mobilenetv1/conv_10"),_=a(512,512,"mobilenetv1/conv_11"),k=a(512,1024,"mobilenetv1/conv_12"),S=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:h,conv_6:m,conv_7:g,conv_8:y,conv_9:v,conv_10:b,conv_11:_,conv_12:k,conv_13:S}}function o(){let l=i(1024,256,1,"prediction_layer/conv_0"),u=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),d=i(128,256,3,"prediction_layer/conv_3"),p=i(256,128,1,"prediction_layer/conv_4"),h=i(128,256,3,"prediction_layer/conv_5"),m=i(256,64,1,"prediction_layer/conv_6"),g=i(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),b=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),_=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),S=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),$=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),P=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),O=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),F=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor");return{conv_0:l,conv_1:u,conv_2:c,conv_3:d,conv_4:p,conv_5:h,conv_6:m,conv_7:g,box_predictor_0:{box_encoding_predictor:y,class_predictor:v},box_predictor_1:{box_encoding_predictor:b,class_predictor:_},box_predictor_2:{box_encoding_predictor:k,class_predictor:S},box_predictor_3:{box_encoding_predictor:$,class_predictor:N},box_predictor_4:{box_encoding_predictor:P,class_predictor:D},box_predictor_5:{box_encoding_predictor:O,class_predictor:F}}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:o}}function h0t(e){let t=[],{extractWeights:n,getRemainingWeights:r}=qd(e),{extractMobilenetV1Params:i,extractPredictionLayerParams:a}=p0t(n,t),s=i(),o=a(),l={extra_dim:K$(n(5118*4),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),r().length!==0)throw new Error(`weights remaing after extract: ${r().length}`);return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:t}}function f0t(e,t){let n=hm(e,t);function r(u,c,d){let p=n(`${u}/Conv2d_${c}_pointwise/weights`,4,`${d}/filters`),h=n(`${u}/Conv2d_${c}_pointwise/convolution_bn_offset`,1,`${d}/batch_norm_offset`);return{filters:p,batch_norm_offset:h}}function i(u){let c=`mobilenetv1/conv_${u}`,d=`MobilenetV1/Conv2d_${u}_depthwise`,p=`${c}/depthwise_conv`,h=`${c}/pointwise_conv`,m=n(`${d}/depthwise_weights`,4,`${p}/filters`),g=n(`${d}/BatchNorm/gamma`,1,`${p}/batch_norm_scale`),y=n(`${d}/BatchNorm/beta`,1,`${p}/batch_norm_offset`),v=n(`${d}/BatchNorm/moving_mean`,1,`${p}/batch_norm_mean`),b=n(`${d}/BatchNorm/moving_variance`,1,`${p}/batch_norm_variance`);return{depthwise_conv:{filters:m,batch_norm_scale:g,batch_norm_offset:y,batch_norm_mean:v,batch_norm_variance:b},pointwise_conv:r("MobilenetV1",u,h)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function s(u,c){let d=n(`${u}/weights`,4,`${c}/filters`),p=n(`${u}/biases`,1,`${c}/bias`);return{filters:d,bias:p}}function o(u){let c=s(`Prediction/BoxPredictor_${u}/BoxEncodingPredictor`,`prediction_layer/box_predictor_${u}/box_encoding_predictor`),d=s(`Prediction/BoxPredictor_${u}/ClassPredictor`,`prediction_layer/box_predictor_${u}/class_predictor`);return{box_encoding_predictor:c,class_predictor:d}}function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:l}}function m0t(e){let t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=f0t(e,t),i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!ox(i))throw new Error(`expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ${i}`);let a={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:i}};return Gd(e,t),{params:a,paramMappings:t}}function vl(e,t,n){return ue(()=>{let r=ya(e,t.filters,n,"same");return r=we(r,t.batch_norm_offset),Qi(r,0,6)})}var g0t=.0010000000474974513;function y0t(e,t,n){return ue(()=>{let r=rm(e,t.filters,n,"same");return r=nm(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,g0t),Qi(r,0,6)})}function v0t(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}function b0t(e,t){return ue(()=>{let n,r=vl(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((i,a)=>{let s=a+1,o=v0t(s);r=y0t(r,i.depthwise_conv,o),r=vl(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function w0t(e,t,n){let r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),p=(s-i)*(o-a),h=(c-l)*(d-u);if(p<=0||h<=0)return 0;let m=Math.max(i,l),g=Math.max(a,u),y=Math.min(s,c),v=Math.min(o,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+h-b)}function x0t(e,t,n,r,i){let a=e.shape[0],s=Math.min(n,a),o=t.map((c,d)=>({score:c,boxIndex:d})).filter(c=>c.score>i).sort((c,d)=>d.score-c.score),l=c=>c<=r?1:0,u=[];return o.forEach(c=>{if(u.length>=s)return;let d=c.score;for(let p=u.length-1;p>=0;--p){let h=w0t(e,c.boxIndex,u[p]);if(h!==0&&(c.score*=l(h),c.score<=i))break}d===c.score&&u.push(c.boxIndex)}),u}function _0t(e){let t=$r(Ht(e,[1,0])),n=[Ve(t[2],t[0]),Ve(t[3],t[1])],r=[we(t[0],Qe(n[0],2)),we(t[1],Qe(n[1],2))];return{sizes:n,centers:r}}function k0t(e,t){let{sizes:n,centers:r}=_0t(e),i=$r(Ht(t,[1,0])),a=Qe(se(ea(Qe(i[2],5)),n[0]),2),s=we(se(Qe(i[0],10),n[0]),r[0]),o=Qe(se(ea(Qe(i[3],5)),n[1]),2),l=we(se(Qe(i[1],10),n[1]),r[1]);return Ht(Wr([Ve(s,a),Ve(l,o),we(s,a),we(l,o)]),[1,0])}function S0t(e,t,n){return ue(()=>{let r=e.shape[0],i=k0t(le(ls(n.extra_dim,[r,1,1]),[-1,4]),le(e,[-1,4]));i=le(i,[r,i.shape[0]/r,4]);let a=co(nn(t,[0,0,1],[-1,-1,-1])),s=nn(a,[0,0,0],[-1,-1,1]);s=le(s,[r,s.shape[1]]);let o=$r(i),l=$r(s);return{boxes:o,scores:l}})}function Gm(e,t){return ue(()=>{let n=e.shape[0],r=le(Lb(e,t.box_encoding_predictor),[n,-1,1,4]),i=le(Lb(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function C0t(e,t,n){return ue(()=>{let r=vl(e,n.conv_0,[1,1]),i=vl(r,n.conv_1,[2,2]),a=vl(i,n.conv_2,[1,1]),s=vl(a,n.conv_3,[2,2]),o=vl(s,n.conv_4,[1,1]),l=vl(o,n.conv_5,[2,2]),u=vl(l,n.conv_6,[1,1]),c=vl(u,n.conv_7,[2,2]),d=Gm(t,n.box_predictor_0),p=Gm(e,n.box_predictor_1),h=Gm(i,n.box_predictor_2),m=Gm(s,n.box_predictor_3),g=Gm(l,n.box_predictor_4),y=Gm(c,n.box_predictor_5),v=Wn([d.boxPredictionEncoding,p.boxPredictionEncoding,h.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding],1),b=Wn([d.classPrediction,p.classPrediction,h.classPrediction,m.classPrediction,g.classPrediction,y.classPrediction],1);return{boxPredictions:v,classPredictions:b}})}var Ch=class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(`${this._name} - expected minConfidence to be a number between 0 and 1`);if(typeof this._maxResults!="number")throw new Error(`${this._name} - expected maxResults to be a number`)}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},I0t=class extends Ud{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return ue(()=>{let n=Ae(e.toBatchTensor(512,!1),"float32"),r=Ve(Qe(n,127.5),1),i=b0t(r,t.mobilenetv1),{boxPredictions:a,classPredictions:s}=C0t(i.out,i.conv11,t.prediction_layer);return S0t(a,s,t.output_layer)})}async forward(e){return this.forwardInput(await wa(e))}async locateFaces(e,t={}){let{maxResults:n,minConfidence:r}=new Ch(t),i=await wa(e),{boxes:a,scores:s}=this.forwardInput(i),o=a[0],l=s[0];for(let v=1;v<a.length;v++)a[v].dispose(),s[v].dispose();let u=Array.from(l.dataSync()),c=x0t(o,u,n,.5,r),d=i.getReshapedInputDimensions(0),p=i.inputSize,h=p/d.width,m=p/d.height,g=o.arraySync(),y=c.map(v=>{let[b,_]=[Math.max(0,g[v][0]),Math.min(1,g[v][2])].map($=>$*m),[k,S]=[Math.max(0,g[v][1]),Math.min(1,g[v][3])].map($=>$*h);return new il(u[v],new _ue(k,b,S-k,_-b),{height:i.getInputHeight(0),width:i.getInputWidth(0)})});return o.dispose(),l.dispose(),y}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return m0t(e)}extractParams(e){return h0t(e)}},$0t=.4,T0t=[new Fn(.738768,.874946),new Fn(2.42204,2.65704),new Fn(4.30971,7.04493),new Fn(10.246,4.59428),new Fn(12.6868,11.8741)],N0t=[new Fn(1.603231,2.094468),new Fn(6.041143,7.080126),new Fn(2.882459,3.518061),new Fn(4.266906,5.178857),new Fn(9.041765,10.66308)],E0t=[117.001,114.697,97.404],O0t="tiny_yolov2_model",P0t="tiny_yolov2_separable_conv_model",L_=e=>typeof e=="number";function M0t(e){if(!e)throw new Error(`invalid config: ${e}`);if(typeof e.withSeparableConvs!="boolean")throw new Error(`config.withSeparableConvs has to be a boolean, have: ${e.withSeparableConvs}`);if(!L_(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error(`config.iouThreshold has to be a number between [0, 1], have: ${e.iouThreshold}`);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(t=>typeof t=="string"))throw new Error(`config.classes has to be an array class names: string[], have: ${JSON.stringify(e.classes)}`);if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(t=>t||{}).every(t=>L_(t.x)&&L_(t.y)))throw new Error(`config.anchors has to be an array of { x: number, y: number }, have: ${JSON.stringify(e.anchors)}`);if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(L_)))throw new Error(`config.meanRgb has to be an array of shape [number, number, number], have: ${JSON.stringify(e.meanRgb)}`)}function x3(e){return ue(()=>{let t=se(e,gt(.10000000149011612));return we(On(Ve(e,t)),t)})}function hc(e,t){return ue(()=>{let n=sl(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ya(n,t.conv.filters,[1,1],"valid"),n=Ve(n,t.bn.sub),n=se(n,t.bn.truediv),n=we(n,t.conv.bias),x3(n)})}function fc(e,t){return ue(()=>{let n=sl(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Xv(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=we(n,t.bias),x3(n)})}function A0t(e,t){let n=g3(e,t);function r(s,o){let l=$n(e(s)),u=$n(e(s));return t.push({paramPath:`${o}/sub`},{paramPath:`${o}/truediv`}),{sub:l,truediv:u}}function i(s,o,l){let u=n(s,o,3,`${l}/conv`),c=r(o,`${l}/bn`);return{conv:u,bn:c}}let a=y3(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function R0t(e,t,n,r){let{extractWeights:i,getRemainingWeights:a}=qd(e),s=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:u}=A0t(i,s),c;if(t.withSeparableConvs){let[d,p,h,m,g,y,v,b,_]=r,k=t.isFirstLayerConv2d?o(d,p,3,"conv0"):u(d,p,"conv0"),S=u(p,h,"conv1"),$=u(h,m,"conv2"),N=u(m,g,"conv3"),P=u(g,y,"conv4"),D=u(y,v,"conv5"),O=b?u(v,b,"conv6"):void 0,F=_?u(b,_,"conv7"):void 0,E=o(_||b||v,5*n,1,"conv8");c={conv0:k,conv1:S,conv2:$,conv3:N,conv4:P,conv5:D,conv6:O,conv7:F,conv8:E}}else{let[d,p,h,m,g,y,v,b,_]=r,k=l(d,p,"conv0"),S=l(p,h,"conv1"),$=l(h,m,"conv2"),N=l(m,g,"conv3"),P=l(g,y,"conv4"),D=l(y,v,"conv5"),O=l(v,b,"conv6"),F=l(b,_,"conv7"),E=o(_,5*n,1,"conv8");c={conv0:k,conv1:S,conv2:$,conv3:N,conv4:P,conv5:D,conv6:O,conv7:F,conv8:E}}if(a().length!==0)throw new Error(`weights remaing after extract: ${a().length}`);return{params:c,paramMappings:s}}function D0t(e,t){let n=hm(e,t);function r(o){let l=n(`${o}/sub`,1),u=n(`${o}/truediv`,1);return{sub:l,truediv:u}}function i(o){let l=n(`${o}/filters`,4),u=n(`${o}/bias`,1);return{filters:l,bias:u}}function a(o){let l=i(`${o}/conv`),u=r(`${o}/bn`);return{conv:l,bn:u}}let s=v3(n);return{extractConvParams:i,extractConvWithBatchNormParams:a,extractSeparableConvParams:s}}function L0t(e,t){let n=[],{extractConvParams:r,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}=D0t(e,n),s;if(t.withSeparableConvs){let o=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?r("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:o>7?a("conv6"):void 0,conv7:o>8?a("conv7"):void 0,conv8:r("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:r("conv8")};return Gd(e,n),{params:s,paramMappings:n}}var _3=class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(`${this._name} - expected inputSize to be a number divisible by 32`);if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(`${this._name} - expected scoreThreshold to be a number between 0 and 1`)}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},ace=class sce extends Ud{constructor(t){super("TinyYolov2"),M0t(t),this._config=t}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(t,n){let r=hc(t,n.conv0);return r=ci(r,[2,2],[2,2],"same"),r=hc(r,n.conv1),r=ci(r,[2,2],[2,2],"same"),r=hc(r,n.conv2),r=ci(r,[2,2],[2,2],"same"),r=hc(r,n.conv3),r=ci(r,[2,2],[2,2],"same"),r=hc(r,n.conv4),r=ci(r,[2,2],[2,2],"same"),r=hc(r,n.conv5),r=ci(r,[2,2],[1,1],"same"),r=hc(r,n.conv6),r=hc(r,n.conv7),Lb(r,n.conv8,"valid",!1)}runMobilenet(t,n){let r=this.config.isFirstLayerConv2d?x3(Lb(t,n.conv0,"valid",!1)):fc(t,n.conv0);return r=ci(r,[2,2],[2,2],"same"),r=fc(r,n.conv1),r=ci(r,[2,2],[2,2],"same"),r=fc(r,n.conv2),r=ci(r,[2,2],[2,2],"same"),r=fc(r,n.conv3),r=ci(r,[2,2],[2,2],"same"),r=fc(r,n.conv4),r=ci(r,[2,2],[2,2],"same"),r=fc(r,n.conv5),r=ci(r,[2,2],[1,1],"same"),r=n.conv6?fc(r,n.conv6):r,r=n.conv7?fc(r,n.conv7):r,Lb(r,n.conv8,"valid",!1)}forwardInput(t,n){let{params:r}=this;if(!r)throw new Error("TinyYolov2 - load model before inference");return ue(()=>{let i=Ae(t.toBatchTensor(n,!1),"float32");return i=this.config.meanRgb?lx(i,this.config.meanRgb):i,i=i.div(255),this.config.withSeparableConvs?this.runMobilenet(i,r):this.runTinyYolov2(i,r)})}async forward(t,n){return this.forwardInput(await wa(t),n)}async detect(t,n={}){let{inputSize:r,scoreThreshold:i}=new _3(n),a=await wa(t),s=await this.forwardInput(a,r),o=ue(()=>$r(s)[0].expandDims()),l={width:a.getInputWidth(0),height:a.getInputHeight(0)},u=await this.extractBoxes(o,a.getReshapedInputDimensions(0),i);s.dispose(),o.dispose();let c=u.map(m=>m.box),d=u.map(m=>m.score),p=u.map(m=>m.classScore),h=u.map(m=>this.config.classes[m.label]);return xvt(c.map(m=>m.rescale(r)),d,this.config.iouThreshold,!0).map(m=>new bue(d[m],p[m],h[m],c[m],l))}getDefaultModelName(){return""}extractParamsFromWeightMap(t){return L0t(t,this.config)}extractParams(t){let n=this.config.filterSizes||sce.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(r!==7&&r!==8&&r!==9)throw new Error(`TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ${r} filterSizes in config`);return R0t(t,this.config,this.boxEncodingSize,n)}async extractBoxes(t,n,r){let{width:i,height:a}=n,s=Math.max(i,a),o=s/i,l=s/a,u=t.shape[1],c=this.config.anchors.length,[d,p,h]=ue(()=>{let v=t.reshape([u,u,c,this.boxEncodingSize]),b=v.slice([0,0,0,0],[u,u,c,4]),_=v.slice([0,0,0,4],[u,u,c,1]),k=this.withClassScores?zd(v.slice([0,0,0,5],[u,u,c,this.config.classes.length]),3):gt(0);return[b,_,k]}),m=[],g=await p.array(),y=await d.array();for(let v=0;v<u;v++)for(let b=0;b<u;b++)for(let _=0;_<c;_++){let k=ME(g[v][b][_][0]);if(!r||k>r){let S=(b+ME(y[v][b][_][0]))/u*o,$=(v+ME(y[v][b][_][1]))/u*l,N=Math.exp(y[v][b][_][2])*this.config.anchors[_].x/u*o,P=Math.exp(y[v][b][_][3])*this.config.anchors[_].y/u*l,D=S-N/2,O=$-P/2,F={row:v,col:b,anchor:_},{classScore:E,label:z}=this.withClassScores?await this.extractPredictedClass(h,F):{classScore:1,label:0};m.push({box:new vue(D,O,D+N,O+P),score:k,classScore:k*E,label:z,...F})}}return d.dispose(),p.dispose(),h.dispose(),m}async extractPredictedClass(t,n){let{row:r,col:i,anchor:a}=n,s=await t.array();return Array(this.config.classes.length).fill(0).map((o,l)=>s[r][i][a][l]).map((o,l)=>({classScore:o,label:l})).reduce((o,l)=>o.classScore>l.classScore?o:l)}};ace.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var oce=ace,F0t=class extends oce{constructor(e=!0){let t={withSeparableConvs:e,iouThreshold:$0t,classes:["face"],...e?{anchors:N0t,meanRgb:E0t}:{anchors:T0t,withClassScores:!0}};super(t)}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new il(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?P0t:O0t}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},z0t=class extends _3{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},ux=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function RT(e,t,n,r,i=({alignedRect:a})=>a){let a=e.map(l=>Kue(l)?i(l):l.detection),s=r||(t instanceof zt?await m3(t,a):await f3(t,a)),o=await n(s);return s.forEach(l=>l instanceof zt&&l.dispose()),o}async function k3(e,t,n,r,i){return RT([e],t,async a=>n(a[0]),r,i)}var B0t=.4,W0t=[new Fn(1.603231,2.094468),new Fn(6.041143,7.080126),new Fn(2.882459,3.518061),new Fn(4.266906,5.178857),new Fn(9.041765,10.66308)],V0t=[117.001,114.697,97.404],j0t=class extends oce{constructor(){let e={withSeparableConvs:!0,iouThreshold:B0t,classes:["face"],anchors:W0t,meanRgb:V0t,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};super(e)}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(n=>new il(n.score,n.relativeBox,{width:n.imageWidth,height:n.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},hs={ssdMobilenetv1:new I0t,tinyFaceDetector:new j0t,tinyYolov2:new F0t,faceLandmark68Net:new e0t,faceLandmark68TinyNet:new i0t,faceRecognitionNet:new d0t,faceExpressionNet:new zvt,ageGenderNet:new Qvt},lce=class extends ux{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},S3=class extends lce{async run(){let e=await this.parentTask,t=await RT(e,this.input,async n=>Promise.all(n.map(r=>hs.faceExpressionNet.predictExpressions(r))),this.extractedFaces);return e.map((n,r)=>que(n,t[r]))}withAgeAndGender(){return new T3(this,this.input)}},C3=class extends lce{async run(){let e=await this.parentTask;if(!e)return;let t=await k3(e,this.input,n=>hs.faceExpressionNet.predictExpressions(n),this.extractedFaces);return que(e,t)}withAgeAndGender(){return new N3(this,this.input)}},I3=class extends S3{withAgeAndGender(){return new E3(this,this.input)}withFaceDescriptors(){return new P3(this,this.input)}},$3=class extends C3{withAgeAndGender(){return new O3(this,this.input)}withFaceDescriptor(){return new M3(this,this.input)}},uce=class extends ux{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},T3=class extends uce{async run(){let e=await this.parentTask,t=await RT(e,this.input,async n=>Promise.all(n.map(r=>hs.ageGenderNet.predictAgeAndGender(r))),this.extractedFaces);return e.map((n,r)=>{let{age:i,gender:a,genderProbability:s}=t[r];return rce(ice(n,a,s),i)})}withFaceExpressions(){return new S3(this,this.input)}},N3=class extends uce{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:n,genderProbability:r}=await k3(e,this.input,i=>hs.ageGenderNet.predictAgeAndGender(i),this.extractedFaces);return rce(ice(e,n,r),t)}withFaceExpressions(){return new C3(this,this.input)}},E3=class extends T3{withFaceExpressions(){return new I3(this,this.input)}withFaceDescriptors(){return new P3(this,this.input)}},O3=class extends N3{withFaceExpressions(){return new $3(this,this.input)}withFaceDescriptor(){return new M3(this,this.input)}},cce=class extends ux{constructor(e,t){super(),this.parentTask=e,this.input=t}},P3=class extends cce{async run(){let e=await this.parentTask;return(await RT(e,this.input,t=>Promise.all(t.map(n=>hs.faceRecognitionNet.computeFaceDescriptor(n))),null,t=>t.landmarks.align(null,{useDlibAlignment:!0}))).map((t,n)=>nce(e[n],t))}withFaceExpressions(){return new I3(this,this.input)}withAgeAndGender(){return new E3(this,this.input)}},M3=class extends cce{async run(){let e=await this.parentTask;if(!e)return;let t=await k3(e,this.input,n=>hs.faceRecognitionNet.computeFaceDescriptor(n),null,n=>n.landmarks.align(null,{useDlibAlignment:!0}));return nce(e,t)}withFaceExpressions(){return new $3(this,this.input)}withAgeAndGender(){return new O3(this,this.input)}},dce=class extends ux{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=n}get landmarkNet(){return this.useTinyLandmarkNet?hs.faceLandmark68TinyNet:hs.faceLandmark68Net}},H0t=class extends dce{async run(){let e=await this.parentTask,t=e.map(i=>i.detection),n=this.input instanceof zt?await m3(this.input,t):await f3(this.input,t),r=await Promise.all(n.map(i=>this.landmarkNet.detectLandmarks(i)));return n.forEach(i=>i instanceof zt&&i.dispose()),e.filter((i,a)=>r[a]).map((i,a)=>Zue(i,r[a]))}withFaceExpressions(){return new I3(this,this.input)}withAgeAndGender(){return new E3(this,this.input)}withFaceDescriptors(){return new P3(this,this.input)}},U0t=class extends dce{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,n=this.input instanceof zt?await m3(this.input,[t]):await f3(this.input,[t]),r=await this.landmarkNet.detectLandmarks(n[0]);return n.forEach(i=>i instanceof zt&&i.dispose()),Zue(e,r)}withFaceExpressions(){return new $3(this,this.input)}withAgeAndGender(){return new O3(this,this.input)}withFaceDescriptor(){return new M3(this,this.input)}},pce=class extends ux{constructor(e,t=new Ch){super(),this.input=e,this.options=t}},hce=class extends pce{async run(){let{input:e,options:t}=this,n;if(t instanceof z0t)n=hs.tinyFaceDetector.locateFaces(e,t);else if(t instanceof Ch)n=hs.ssdMobilenetv1.locateFaces(e,t);else if(t instanceof _3)n=hs.tinyYolov2.locateFaces(e,t);else throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");return n}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(n=>e(n.map(r=>Cue({},r)))).catch(n=>t(n))})}withFaceLandmarks(e=!1){return new H0t(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new S3(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new T3(this.runAndExtendWithFaceDetections(),this.input)}},G0t=class extends pce{async run(){let e=await new hce(this.input,this.options),t=e[0];return e.forEach(n=>{n.score>t.score&&(t=n)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?Cue({},t):void 0)})}withFaceLandmarks(e=!1){return new U0t(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new C3(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new N3(this.runAndExtendWithFaceDetection(),this.input)}};function q0t(e,t=new Ch){return new G0t(e,t)}function K0t(e,t=new Ch){return new hce(e,t)}function Z0t(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");let n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((i,a)=>i-r[a]).reduce((i,a)=>i+a*a,0))}var X0t=class fce{constructor(t,n=.6){this._distanceThreshold=n;let r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");let i=1,a=()=>`person ${i++}`;this._labeledDescriptors=r.map(s=>{if(s instanceof A_)return s;if(s instanceof Float32Array)return new A_(a(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new A_(a(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}get labeledDescriptors(){return this._labeledDescriptors}get distanceThreshold(){return this._distanceThreshold}computeMeanDistance(t,n){return n.map(r=>Z0t(r,t)).reduce((r,i)=>r+i,0)/(n.length||1)}matchDescriptor(t){return this.labeledDescriptors.map(({descriptors:n,label:r})=>new h8(r,this.computeMeanDistance(t,n))).reduce((n,r)=>n.distance<r.distance?n:r)}findBestMatch(t){let n=this.matchDescriptor(t);return n.distance<this._distanceThreshold?n:new h8("unknown",n.distance)}toJSON(){return{distanceThreshold:this._distanceThreshold,labeledDescriptors:this._labeledDescriptors.map(t=>t.toJSON())}}static fromJSON(t){let n=t.labeledDescriptors.map(r=>A_.fromJSON(r));return new fce(n,t.distanceThreshold)}};function J0t({image:e,opened:t,close:n}){const{profiles:r,updateProfile:i}=Us(),{updateTab:a}=gn(),[s,o]=I.exports.useState(),[l,u]=I.exports.useState(!1);I.exports.useEffect(()=>{e&&o(e)},[e]);const c=()=>{n(),Ee("hideUI"),Ee("takePhoto","facialRecognition")};I.exports.useEffect(()=>{(async()=>{try{await Promise.all([hs.ssdMobilenetv1.loadFromUri("models"),hs.faceLandmark68Net.loadFromUri("models"),hs.faceRecognitionNet.loadFromUri("models")])}catch(h){console.error("Failed to load models:",h)}})()},[]);const d=async()=>{if(!(!s||!ny(s)||l)){u(!0);try{const p=await m8(s),h=await K0t(p,new Ch).withFaceLandmarks().withFaceDescriptors();if(h.length===0){u(!1);return}let m=!1;for(const g of r)if(!!g.image)try{const y=await m8(g.image),v=await q0t(y,new Ch).withFaceLandmarks().withFaceDescriptor();if(!v||!v.descriptor)continue;const _=new X0t([v]).findBestMatch(h[0].descriptor);if(_&&_.distance<.6){m=!0,n(),Ee("getProfile",g.identifier).then(k=>{!k||!g.identifier||i(g.identifier,k)}),a({title:"profiles",component:x(A3,{profileId:g.identifier})});break}}catch(y){console.error("Error processing reference image:",y)}u(!1)}catch(p){u(!1),console.error("Error processing image:",p)}}};return x(nr,{title:j.facial_recognition,opened:t,onClose:n,centered:!0,children:B(Ce,{spacing:20,w:"100%",children:[ny(s)&&x(Yn,{src:s,size:"100%"}),x(Ze,{label:j.image_url,placeholder:j.url,value:s,onChange:p=>o(p.currentTarget.value),rightSection:x(Le,{onClick:c,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:d,disabled:l,children:l?j.searching:j.search})})]})})}function mce(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,{open:i,close:a}]=Tr(!1),[s,o]=I.exports.useState(),[l,u]=I.exports.useState([{type:"tags",value:""}]),[c,d]=I.exports.useState();return wt("photoTaken",p=>{p.page==="facialRecognition"&&(d(p.url),i())}),B(Fe,{children:[x(_a,{title:j.profiles,searchQuery:e,filterInputs:l,filters:s,setFilterInputs:u,setSearchQuery:t,setFilters:o,openFacialRecognition:i}),x(lLe,{searchQuery:n,filters:s}),x(J0t,{image:c,opened:r,close:a})]})}function A3({profileId:e}){const{profiles:t,updateProfile:n}=Us(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(v=>v.identifier===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image),[d,p]=I.exports.useState(i==null?void 0:i.notes),[h]=Kt(d,1e3);I.exports.useEffect(()=>{a(t.find(v=>v.identifier===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{d!==(i==null?void 0:i.notes)&&p(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&h&&n(i.identifier,{notes:h})},[h]);const m=I.exports.useCallback(()=>{r({title:"profiles",component:x(mce,{})})},[i,r]),g=I.exports.useCallback(()=>{const v={...i,notes:d};Ee("saveProfile",v).then(()=>{i!=null&&i.identifier&&n(i.identifier,{notes:d}),Ir(j.mdt,j.saved_successfully)})},[i,d]),y=()=>{l(),Ee("hideUI"),Ee("takePhoto","profile")};return wt("photoTaken",v=>{v.page==="profile"&&(o(),c(v.url))}),B(Fe,{children:[i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,align:"flex-start",children:[B(me,{w:"100%",position:"apart",children:[B(xt,{radius:"sm",children:["ID: ",i.identifier]}),B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:m,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(Gs,{})})]})]}),x(me,{w:"100%",position:"apart",children:B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.player_name,variant:"filled",readOnly:!0,value:i.name,size:"xs"}),x(Ze,{label:j.dob,variant:"filled",readOnly:!0,value:i.dob,size:"xs"}),x(Ze,{label:j.phone_number,variant:"filled",readOnly:!0,value:i.phoneNumber,size:"xs"}),x(Ze,{label:j.gender,variant:"filled",readOnly:!0,value:j[i.gender],size:"xs"}),i.fingerprint&&x(Ze,{label:j.fingerprint,variant:"filled",readOnly:!0,value:i.fingerprint,size:"xs"}),i.bloodType&&x(Ze,{label:j.bloodType,variant:"filled",readOnly:!0,value:i.bloodType,size:"xs"}),i.points&&x(Ze,{label:j.license_points,variant:"filled",readOnly:!0,value:i.points,size:"xs"})]})})]})}),x(xs,{w:"100%",label:j.notes,minRows:25,maxLength:5e4,value:d,onChange:v=>p(v.currentTarget.value)})]})}),x(ll,{page:"profile",sidebar:i.sideBarData,pageId:i.identifier,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,onChange:v=>c(v.currentTarget.value),rightSection:x(Le,{onClick:y,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.identifier,{image:u}))},children:j.confirm})})]})})]})}function Y0t({searchQuery:e}){const{properties:t,updateProperty:n}=r$(),{updateTab:r}=gn(),i=I.exports.useMemo(()=>t.filter(s=>{var o,l;return((o=s==null?void 0:s.owner)==null?void 0:o.toLowerCase().includes(e.toLowerCase()))||((l=s==null?void 0:s.name)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))}),[e,t]),a=({index:s,style:o})=>{const l=i[s];return x("div",{style:{...o},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getProperty",l.id).then(u=>{!u||!l.id||n(l.id,u)}),r({title:"properties",component:x(yce,{propertyId:l.id})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:l.image}),B(Ce,{spacing:1,children:[x(Te,{fw:600,size:16,children:l.name}),x(Te,{fw:500,size:12,color:"gray.5",children:l.owner})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:i.length,itemSize:110,width:"100%",children:a})}function gce(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200);return B(Fe,{children:[x(_a,{title:j.properties,searchQuery:e,setSearchQuery:t}),x(Y0t,{searchQuery:n})]})}function yce({propertyId:e}){const{properties:t,updateProperty:n}=r$(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(v=>v.id===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image),[d,p]=I.exports.useState(i==null?void 0:i.notes),[h]=Kt(d,1e3);I.exports.useEffect(()=>{a(t.find(v=>v.id===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{d!==(i==null?void 0:i.notes)&&p(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&h&&n(i.id,{notes:h})},[h]);const m=I.exports.useCallback(()=>{r({title:"properties",component:x(gce,{})})},[i,r]),g=I.exports.useCallback(()=>{const v={...i,notes:d};Ee("saveProperty",v).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{notes:d}),Ir(j.mdt,j.saved_successfully)})},[i,d]),y=()=>{l(),Ee("hideUI"),Ee("takePhoto","property")};return wt("photoTaken",v=>{v.page==="property"&&(o(),c(v.url))}),B(Fe,{children:[i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,style:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.property_name,variant:"filled",value:i.name,size:"xs",rightSection:i.coords&&x(Le,{size:20,color:"blue",variant:"subtle",onClick:()=>Ee("setMarker",i.coords),children:x(kRe,{})}),readOnly:!0,w:167}),x(Ze,{label:j.owner,variant:"filled",value:i.owner,readOnly:!0,size:"xs"})]})})]}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:m,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(Gs,{})})]})})]}),x(xs,{w:"100%",label:j.notes,minRows:28,maxLength:5e4,value:d,onChange:v=>p(v.currentTarget.value)})]})}),x(ll,{page:"property",sidebar:i.sideBarData,pageId:i.id,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.address,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,onChange:v=>c(v.currentTarget.value),rightSection:x(Le,{onClick:y,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.id,{image:u}))},children:j.confirm})})]})})]})}function Q0t({searchQuery:e,filters:t}){const{evidence:n,updateEvidence:r}=tw(),{updateTab:i}=gn(),{dateFormat:a}=Zt(),s=I.exports.useMemo(()=>n.filter(l=>{var d,p,h;if(!l||Object.keys(l).length===0||!(l!=null&&l.name)||!(l!=null&&l.id)||!By(l))return!1;const u=((d=l==null?void 0:l.name)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l==null?void 0:l.creator)==null?void 0:p.toLowerCase().includes(e.toLowerCase()))||((h=l==null?void 0:l.id)==null?void 0:h.toString())===e;if(!t)return u;const c=t.every(m=>{if(!l.sideBarData)return!1;let g;if(m.type in l.sideBarData?g=l.sideBarData[m.type]:g=l[m.type],Array.isArray(g)&&g.length>0){if(typeof g[0]=="object")return g.some(y=>Object.values(y).some(v=>typeof v=="string"?v.toLowerCase().includes(m.value.toLowerCase()):!1));if(typeof g[0]=="string")return g.some(y=>y.toLowerCase().includes(m.value.toLowerCase()))}return typeof g=="string"?g.toLowerCase().includes(m.value.toLowerCase()):!1});return u&&c}).sort((l,u)=>u.id-l.id),[e,t,n]),o=({index:l,style:u})=>{const c=s[l];return c.id<=-1||!c||Object.keys(c).length===0||!(c!=null&&c.id)||!(c!=null&&c.name)||c.id<=-1?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getEvidence",c.id).then(d=>{!d||!c.id||r(c.id,d)}),i({title:"evidence",component:x(R3,{evidenceId:c.id})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:c.image}),B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:c.name}),B(xt,{radius:"sm",children:["ID: ",c.id]})]}),B(Te,{fw:500,size:12,color:"gray.5",children:[c.creator," - ",new Date(c.date*1e3).toLocaleString([],a||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}function DM(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"creator",value:""},{type:"tags",value:""}]),{updateTab:o}=gn(),l=()=>{Ee("createEvidence").then(u=>{!u||o({title:"evidence",component:x(R3,{evidenceId:u.id})})})};return B(Fe,{children:[x(_a,{title:j.evidence,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setFilters:i,setSearchQuery:t,createNew:l}),x(Q0t,{searchQuery:n,filters:r})]})}function R3({evidenceId:e}){const{evidence:t,updateEvidence:n}=tw(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find($=>$.id===e)),[s,{open:o,close:l}]=Tr(!1),{dateFormat:u}=Zt(),[c,d]=I.exports.useState(i==null?void 0:i.image),[p,h]=I.exports.useState(i==null?void 0:i.notes),[m,g]=I.exports.useState(i==null?void 0:i.name),[y]=Kt(m,500),[v]=Kt(p,1e3);I.exports.useEffect(()=>{a(t.find($=>$.id===e))},[t]),I.exports.useEffect(()=>{d(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{p!==(i==null?void 0:i.notes)&&h(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&v&&n(i.id,{notes:v})},[v]),I.exports.useEffect(()=>{i&&y&&n(i.id,{name:y})},[y]);const b=I.exports.useCallback(()=>{r({title:"evidence",component:x(DM,{})})},[i,r]),_=I.exports.useCallback(()=>{const $={...i,notes:p};Ee("saveEvidence",$).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{notes:p}),Ir(j.mdt,j.saved_successfully)})},[i,p]),k=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeEvidence",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"evidence",component:x(DM,{})})}})},[i,r]),S=()=>{l(),Ee("hideUI"),Ee("takePhoto","evidence")};return wt("photoTaken",$=>{$.page==="evidence"&&(o(),d($.url))}),B(Fe,{children:[i&&x(Fe,{children:B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[B(me,{w:"85%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.evidence_name,variant:"filled",value:m,onChange:$=>g($.currentTarget.value),size:"xs"}),x(Ze,{label:j.creator,variant:"filled",readOnly:!0,value:i.creator,size:"xs"}),x(Ze,{label:j.date,variant:"filled",readOnly:!0,value:new Date(i.date*1e3).toLocaleString([],u||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),size:"xs"})]})})]}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:b,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:_,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:k,children:x(vo,{})})]})})]}),x(xs,{w:"100%",label:j.notes,minRows:28,maxLength:5e4,value:p,onChange:$=>h($.currentTarget.value)})]})}),x(ll,{page:"evidence",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:c,onChange:$=>d($.currentTarget.value),rightSection:x(Le,{onClick:S,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.id,{image:c}))},children:j.confirm})})]})})]})}function ebt({searchQuery:e,filters:t}){const{reports:n,updateReport:r}=Gu(),{updateTab:i}=gn(),{dateFormat:a}=Zt(),s=I.exports.useMemo(()=>n.filter(l=>{var d,p,h,m,g,y,v,b;if(!l||Object.keys(l).length===0||!(l!=null&&l.title)||!(l!=null&&l.id)||!By(l))return!1;const u=((d=l==null?void 0:l.title)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l==null?void 0:l.id)==null?void 0:p.toString())===e||(l==null?void 0:l.sideBarData)&&(((m=(h=l==null?void 0:l.sideBarData)==null?void 0:h.officers)==null?void 0:m.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())}))||((y=(g=l==null?void 0:l.sideBarData)==null?void 0:g.suspects)==null?void 0:y.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())}))||((b=(v=l==null?void 0:l.sideBarData)==null?void 0:v.civilians)==null?void 0:b.some(_=>{var k;return(k=_==null?void 0:_.name)==null?void 0:k.toLowerCase().includes(e.toLowerCase())})));if(!t)return u;const c=t.every(_=>{if(!l.sideBarData)return!1;let k;if(_.type in l.sideBarData?k=l==null?void 0:l.sideBarData[_.type]:k=l[_.type],Array.isArray(k)&&k.length>0){if(typeof k[0]=="object")return k.some(S=>Object.values(S).some($=>typeof $=="string"?$.toLowerCase().includes(_.value.toLowerCase()):!1));if(typeof k[0]=="string")return k.some(S=>S.toLowerCase().includes(_.value.toLowerCase()))}return typeof k=="string"?k.toLowerCase().includes(_.value.toLowerCase()):!1});return u&&c}).sort((l,u)=>u.id-l.id),[e,t,n]),o=({index:l,style:u})=>{const c=s[l];return!c||Object.keys(c).length===0||!(c!=null&&c.title)||!(c!=null&&c.id)||c.id<=-1?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{!(c!=null&&c.id)||(Ee("getReport",c.id).then(d=>{!d||!c.id||r(c.id,d)}),i({title:"reports",component:x(F1,{reportId:c==null?void 0:c.id})}))},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:c.title||j.unknown}),B(xt,{radius:"sm",children:["ID: ",c.id]})]}),c.sideBarData.officers&&c.sideBarData.officers.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.officers_list," ",c.sideBarData.officers.map(d=>d.name).join(", ")]}),c.sideBarData.suspects&&c.sideBarData.suspects.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.suspects_list," ",c.sideBarData.suspects.map(d=>d.name).join(", ")]}),x(Te,{fw:500,size:12,color:"gray.5",children:new Date(c.date*1e3).toLocaleString([],a||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}function LM(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"creator",value:""},{type:"tags",value:""},{type:"officers",value:""},{type:"suspects",value:""},{type:"civilians",value:""}]),{updateTab:o}=gn(),l=()=>{Ee("createReport").then(u=>{!u||o({title:"reports",component:x(F1,{reportId:u.id})})})};return B(Fe,{children:[x(_a,{title:j.reports,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setSearchQuery:t,setFilters:i,createNew:l}),x(ebt,{searchQuery:n,filters:r})]})}function Ui(e){this.content=e}Ui.prototype={constructor:Ui,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),a=r.content.slice();return i==-1?a.push(n||e,t):(a[i+1]=t,n&&(a[i]=n)),new Ui(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Ui(n)},addToStart:function(e,t){return new Ui([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Ui(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),a=r.find(e);return i.splice(a==-1?i.length:a,0,t,n),new Ui(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Ui.from(e),e.size?new Ui(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Ui.from(e),e.size?new Ui(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Ui.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Ui.from=function(e){if(e instanceof Ui)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Ui(t)};function vce(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),a=t.child(r);if(i==a){n+=i.nodeSize;continue}if(!i.sameMarkup(a))return n;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)n++;return n}if(i.content.size||a.content.size){let s=vce(i.content,a.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function bce(e,t,n,r){for(let i=e.childCount,a=t.childCount;;){if(i==0||a==0)return i==a?null:{a:n,b:r};let s=e.child(--i),o=t.child(--a),l=s.nodeSize;if(s==o){n-=l,r-=l;continue}if(!s.sameMarkup(o))return{a:n,b:r};if(s.isText&&s.text!=o.text){let u=0,c=Math.min(s.text.length,o.text.length);for(;u<c&&s.text[s.text.length-u-1]==o.text[o.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||o.content.size){let u=bce(s.content,o.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class Me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,a){for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;if(u>t&&r(l,i+o,a||null,s)!==!1&&l.content.size){let c=o+1;l.nodesBetween(Math.max(0,t-c),Math.min(l.content.size,n-c),r,i+c)}o=u}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let a="",s=!0;return this.nodesBetween(t,n,(o,l)=>{let u=o.isText?o.text.slice(Math.max(t,l)-l,n-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(s?s=!1:a+=r),a+=u},0),a}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),a=1);a<t.content.length;a++)i.push(t.content[a]);return new Me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let a=0,s=0;s<n;a++){let o=this.content[a],l=s+o.nodeSize;l>t&&((s<t||l>n)&&(o.isText?o=o.cut(Math.max(0,t-s),Math.min(o.text.length,n-s)):o=o.cut(Math.max(0,t-s-1),Math.min(o.content.size,n-s-1))),r.push(o),i+=o.nodeSize),s=l}return new Me(r,i)}cutByIndex(t,n){return t==n?Me.empty:t==0&&n==this.content.length?this:new Me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new Me(i,a)}addToStart(t){return new Me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return vce(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return bce(this,t,n,r)}findIndex(t,n=-1){if(t==0)return F_(0,t);if(t==this.size)return F_(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let r=0,i=0;;r++){let a=this.child(r),s=i+a.nodeSize;if(s>=t)return s==t||n>0?F_(r+1,s):F_(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return Me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Me.empty;let n,r=0;for(let i=0;i<t.length;i++){let a=t[i];r+=a.nodeSize,i&&a.isText&&t[i-1].sameMarkup(a)?(n||(n=t.slice(0,i)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new Me(n||t,r)}static from(t){if(!t)return Me.empty;if(t instanceof Me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Me.empty=new Me([],0);const DE={index:0,offset:0};function F_(e,t){return DE.index=e,DE.offset=t,DE}function FI(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!FI(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!FI(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class In{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let a=t[i];if(this.eq(a))return t;if(this.type.excludes(a.type))n||(n=t.slice(0,i));else{if(a.type.excludes(this.type))return t;!r&&a.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&FI(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return In.none;if(t instanceof In)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}}In.none=[];class zI extends Error{}class Ye{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=xce(this.content,t+this.openStart,n);return r&&new Ye(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ye(wce(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ye.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ye(Me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let a=t.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=t.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new Ye(t,r,i)}}Ye.empty=new Ye(Me.empty,0,0);function wce(e,t,n){let{index:r,offset:i}=e.findIndex(t),a=e.maybeChild(r),{index:s,offset:o}=e.findIndex(n);if(i==t||a.isText){if(o!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,a.copy(wce(a.content,t-i-1,n-i-1)))}function xce(e,t,n,r){let{index:i,offset:a}=e.findIndex(t),s=e.maybeChild(i);if(a==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let o=xce(s.content,t-a-1,n);return o&&e.replaceChild(i,s.copy(o))}function tbt(e,t,n){if(n.openStart>e.depth)throw new zI("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new zI("Inconsistent open depths");return _ce(e,t,n,0)}function _ce(e,t,n,r){let i=e.index(r),a=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=_ce(e,t,n,r+1);return a.copy(a.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let s=e.parent,o=s.content;return Hp(s,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}else{let{start:s,end:o}=nbt(n,e);return Hp(a,Sce(e,s,o,t,r))}else return Hp(a,BI(e,t,r))}function kce(e,t){if(!t.type.compatibleContent(e.type))throw new zI("Cannot join "+t.type.name+" onto "+e.type.name)}function FM(e,t,n){let r=e.node(n);return kce(r,t.node(n)),r}function jp(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Fb(e,t,n,r){let i=(t||e).node(n),a=0,s=t?t.index(n):i.childCount;e&&(a=e.index(n),e.depth>n?a++:e.textOffset&&(jp(e.nodeAfter,r),a++));for(let o=a;o<s;o++)jp(i.child(o),r);t&&t.depth==n&&t.textOffset&&jp(t.nodeBefore,r)}function Hp(e,t){return e.type.checkContent(t),e.copy(t)}function Sce(e,t,n,r,i){let a=e.depth>i&&FM(e,t,i+1),s=r.depth>i&&FM(n,r,i+1),o=[];return Fb(null,e,i,o),a&&s&&t.index(i)==n.index(i)?(kce(a,s),jp(Hp(a,Sce(e,t,n,r,i+1)),o)):(a&&jp(Hp(a,BI(e,t,i+1)),o),Fb(t,n,i,o),s&&jp(Hp(s,BI(n,r,i+1)),o)),Fb(r,null,i,o),new Me(o)}function BI(e,t,n){let r=[];if(Fb(null,e,n,r),e.depth>n){let i=FM(e,t,n+1);jp(Hp(i,BI(e,t,n+1)),r)}return Fb(t,null,n,r),new Me(r)}function nbt(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let a=n-1;a>=0;a--)i=t.node(a).copy(Me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class E1{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let a=0;a<t;a++)i+=r.child(a).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return In.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let o=r;r=i,i=o}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new WI(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,a=n;for(let s=t;;){let{index:o,offset:l}=s.content.findIndex(a),u=a-l;if(r.push(s,o,i+l),!u||(s=s.child(o),s.isText))break;a=u-1,i+=l+1}return new E1(n,r,a)}static resolveCached(t,n){for(let i=0;i<LE.length;i++){let a=LE[i];if(a.pos==n&&a.doc==t)return a}let r=LE[FE]=E1.resolve(t,n);return FE=(FE+1)%rbt,r}}let LE=[],FE=0,rbt=12;class WI{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ibt=Object.create(null);class Vl{constructor(t,n,r,i=In.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||Me.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&FI(this.attrs,n||t.defaultAttrs||ibt)&&In.sameSet(this.marks,r||In.none)}copy(t=null){return t==this.content?this:new Vl(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Vl(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ye.empty;let i=this.resolve(t),a=this.resolve(n),s=r?0:i.sharedDepth(n),o=i.start(s),u=i.node(s).content.cut(i.pos-o,a.pos-o);return new Ye(u,i.depth-s,a.depth-s)}replace(t,n,r){return tbt(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return E1.resolveCached(this,t)}resolveNoCache(t){return E1.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Cce(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=Me.empty,i=0,a=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,i,a),o=s&&s.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(t).matchType(r),s=a&&a.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=In.none;for(let n=0;n<this.marks.length;n++)t=this.marks[n].addToSet(t);if(!In.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=Me.fromJSON(t,n.content);return t.nodeType(n.type).create(n.attrs,i,r)}}Vl.prototype.text=void 0;class VI extends Vl{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Cce(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new VI(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new VI(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Cce(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Ih{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new abt(t,n);if(r.next==null)return Ih.empty;let i=Ice(r);r.next&&r.err("Unexpected trailing text");let a=pbt(dbt(i));return hbt(a,r),a}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let a=n;i&&a<r;a++)i=i.matchType(t.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function a(s,o){let l=s.matchFragment(t,r);if(l&&(!n||l.validEnd))return Me.from(o.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:c,next:d}=s.next[u];if(!(c.isText||c.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let p=a(d,o.concat(c));if(p)return p}}return null}return a(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(t)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||l.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return a}).join(`
`)}}Ih.empty=new Ih(!0);class abt{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Ice(e){let t=[];do t.push(sbt(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function sbt(e){let t=[];do t.push(obt(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function obt(e){let t=cbt(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=lbt(e,t);else break;return t}function y8(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function lbt(e,t){let n=y8(e),r=n;return e.eat(",")&&(e.next!="}"?r=y8(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function ubt(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let a in n){let s=n[a];s.groups.indexOf(t)>-1&&i.push(s)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function cbt(e){if(e.eat("(")){let t=Ice(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=ubt(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function dbt(e){let t=[[]];return i(a(e,0),n()),t;function n(){return t.push([])-1}function r(s,o,l){let u={term:l,to:o};return t[s].push(u),u}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(a(u,o)),[]);if(s.type=="seq")for(let l=0;;l++){let u=a(s.exprs[l],o);if(l==s.exprs.length-1)return u;i(u,o=n())}else if(s.type=="star"){let l=n();return r(o,l),i(a(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(a(s.expr,o),l),i(a(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let u=0;u<s.min;u++){let c=n();i(a(s.expr,l),c),l=c}if(s.max==-1)i(a(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let c=n();r(l,c),i(a(s.expr,l),c),l=c}return[r(l)]}else{if(s.type=="name")return[r(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function $ce(e,t){return t-e}function v8(e,t){let n=[];return r(t),n.sort($ce);function r(i){let a=e[i];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&n.indexOf(l)==-1&&r(l)}}}function pbt(e){let t=Object.create(null);return n(v8(e,0));function n(r){let i=[];r.forEach(s=>{e[s].forEach(({term:o,to:l})=>{if(!o)return;let u;for(let c=0;c<i.length;c++)i[c][0]==o&&(u=i[c][1]);v8(e,l).forEach(c=>{u||i.push([o,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let a=t[r.join(",")]=new Ih(r.indexOf(e.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort($ce);a.next.push({type:i[s][0],next:t[o.join(",")]||n(o)})}return a}}function hbt(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:u}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),r.indexOf(u)==-1&&r.push(u)}a&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Tce(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Nce(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let a=e[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Ece(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new fbt(e[n]);return t}class jI{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ece(r.attrs),this.defaultAttrs=Tce(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ih.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Nce(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vl(this,this.computeAttrs(t),Me.from(n),In.setFrom(r))}createChecked(t=null,n,r){return n=Me.from(n),this.checkContent(n),new Vl(this,this.computeAttrs(t),n,In.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=Me.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),a=i&&i.fillBefore(Me.empty,!0);return a?new Vl(this,t,n.append(a),In.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:In.none:t}static compile(t,n){let r=Object.create(null);t.forEach((a,s)=>r[a]=new jI(a,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class fbt{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class DT{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=Ece(i.attrs),this.excluded=null;let a=Tce(this.attrs);this.instance=a?new In(this,a):null}create(t=null){return!t&&this.instance?this.instance:new In(this,Nce(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((a,s)=>r[a]=new DT(a,i++,n,s)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}excludes(t){return this.excluded.indexOf(t)>-1}}class mbt{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Ui.from(t.nodes),n.marks=Ui.from(t.marks||{}),this.nodes=jI.compile(this.spec.nodes,this),this.marks=DT.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=Ih.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?b8(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:b8(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof jI){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new VI(r,r.defaultAttrs,t,In.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeFromJSON(t){return Vl.fromJSON(this,t)}markFromJSON(t){return In.fromJSON(this,t)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function b8(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],a=e.marks[i],s=a;if(a)n.push(a);else for(let o in e.marks){let l=e.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function gbt(e){return e.tag!=null}function ybt(e){return e.style!=null}class xy{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{gbt(r)?this.tags.push(r):ybt(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=t.nodes[r.node];return i.contentMatch.matchType(i)})}parse(t,n={}){let r=new x8(this,n,!1);return r.addAll(t,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new x8(this,n,!0);return r.addAll(t,n.from,n.to),Ye.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(wbt(t,a.tag)&&(a.namespace===void 0||t.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(t);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(t,n,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||o.length>t.length&&(o.charCodeAt(t.length)!=61||o.slice(t.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let n=[];function r(i){let a=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let o=n[s];if((o.priority==null?50:o.priority)<a)break}n.splice(s,0,i)}for(let i in t.marks){let a=t.marks[i].spec.parseDOM;a&&a.forEach(s=>{r(s=_8(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let a=t.nodes[i].spec.parseDOM;a&&a.forEach(s=>{r(s=_8(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new xy(t,xy.schemaRules(t)))}}const Oce={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},vbt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Pce={ol:!0,ul:!0},HI=1,UI=2,zb=4;function w8(e,t,n){return t!=null?(t?HI:0)|(t==="full"?UI:0):e&&e.whitespace=="pre"?HI|UI:n&~zb}class z_{constructor(t,n,r,i,a,s,o){this.type=t,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=a,this.options=o,this.content=[],this.activeMarks=In.none,this.stashMarks=[],this.match=s||(o&zb?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&HI)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let n=Me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(Me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(t){for(let n=this.stashMarks.length-1;n>=0;n--)if(t.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(t){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):xbt(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Oce.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class x8{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,a,s=w8(null,n.preserveWhitespace,0)|(r?zb:0);i?a=new z_(i.type,i.attrs,In.none,In.none,!0,n.topMatch||i.type.contentMatch,s):r?a=new z_(null,null,In.none,In.none,!0,null,s):a=new z_(t.schema.topNodeType,null,In.none,In.none,!0,null,s),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){t.nodeType==3?this.addTextNode(t):t.nodeType==1&&this.addElement(t)}withStyleRules(t,n){let r=t.style;if(!r||!r.length)return n();let i=this.readStyles(t.style);if(!i)return;let[a,s]=i,o=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],o);for(let l=0;l<a.length;l++)this.addPendingMark(a[l]);n();for(let l=0;l<a.length;l++)this.removePendingMark(a[l],o);for(let l=0;l<s.length;l++)this.addPendingMark(s[l])}addTextNode(t){let n=t.nodeValue,r=this.top;if(r.options&UI||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&HI)r.options&UI?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],a=t.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(t)}else this.findInside(t)}addElement(t,n){let r=t.nodeName.toLowerCase(),i;Pce.hasOwnProperty(r)&&this.parser.normalizeLists&&bbt(t);let a=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(i=this.parser.matchTag(t,this,n));if(a?a.ignore:vbt.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(t=a.skip);let s,o=this.top,l=this.needsBlock;if(Oce.hasOwnProperty(r))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),s=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t);return}a&&a.skip?this.addAll(t):this.withStyleRules(t,()=>this.addAll(t)),s&&this.sync(o),this.needsBlock=l}else this.withStyleRules(t,()=>{this.addElementByRule(t,a,a.consuming===!1?i:void 0)})}leafFallback(t){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`))}ignoreFallback(t){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(t){let n=In.none,r=In.none;for(let i=0,a=t.length;i<a;i++){let s=t.item(i);for(let o=void 0;;){let l=this.parser.matchStyle(s,t.getPropertyValue(s),this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(u=>{l.clearMark(u)&&(r=u.addToSet(r))}):n=this.parser.schema.marks[l.mark].create(l.attrs).addToSet(n),l.consuming===!1)o=l;else break}}return[n,r]}addElementByRule(t,n,r){let i,a,s;n.node?(a=this.parser.schema.nodes[n.node],a.isLeaf?this.insertNode(a.create(n.attrs))||this.leafFallback(t):i=this.enter(a,n.attrs||null,n.preserveWhitespace)):(s=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(s));let o=this.top;if(a&&a.isLeaf)this.findInside(t);else if(r)this.addElement(t,r);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=t;typeof n.contentElement=="string"?l=t.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(t):n.contentElement&&(l=n.contentElement),this.findAround(t,l,!0),this.addAll(l)}i&&this.sync(o)&&this.open--,s&&this.removePendingMark(s,o)}addAll(t,n,r){let i=n||0;for(let a=n?t.childNodes[n]:t.firstChild,s=r==null?null:t.childNodes[r];a!=s;a=a.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(a);this.findAtPoint(t,i)}findPlace(t){let n,r;for(let i=this.open;i>=0;i--){let a=this.nodes[i],s=a.findWrapping(t);if(s&&(!n||n.length>s.length)&&(n=s,r=a,!s.length)||a.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(t)){this.closeExtra();let n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));let r=n.activeMarks;for(let i=0;i<t.marks.length;i++)(!n.type||n.type.allowsMarkType(t.marks[i].type))&&(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}enter(t,n,r){let i=this.findPlace(t.create(n));return i&&this.enterInner(t,n,!0,r),i}enterInner(t,n=null,r=!1,i){this.closeExtra();let a=this.top;a.applyPending(t),a.match=a.match&&a.match.matchType(t);let s=w8(t,i,a.options);a.options&zb&&a.content.length==0&&(s|=zb),this.nodes.push(new z_(t,n,a.activeMarks,a.pendingMarks,r,null,s)),this.open++}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let n=this.open;n>=0;n--)if(this.nodes[n]==t)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let u=n[o];if(u==""){if(o==n.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let c=l>0||l==0&&i?this.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!c||c.name!=u&&c.groups.indexOf(u)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(t){let n=_bt(t,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let s=i.popFromStashMark(t);s&&i.type&&i.type.allowsMarkType(s.type)&&(i.activeMarks=s.addToSet(i.activeMarks))}if(i==n)break}}}function bbt(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Pce.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function wbt(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function _8(e){let t={};for(let n in e)t[n]=e[n];return t}function xbt(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:u,next:c}=o.edge(l);if(u==t||a.indexOf(c)<0&&s(c))return!0}};if(s(i.contentMatch))return!0}}function _bt(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}class Ml{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=zE(n).createDocumentFragment());let i=r,a=[];return t.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(a[o][0])||u.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],c=this.serializeMark(u,s.isInline,n);c&&(a.push([u,i]),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=Ml.renderSpec(zE(n),this.nodes[t.type.name](t));if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let a=this.serializeMark(t.marks[i],t.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&Ml.renderSpec(zE(r),i(t,n))}static renderSpec(t,n,r=null){if(typeof n=="string")return{dom:t.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],a=i.indexOf(" ");a>0&&(r=i.slice(0,a),i=i.slice(a+1));let s,o=r?t.createElementNS(r,i):t.createElement(i),l=n[1],u=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){u=2;for(let c in l)if(l[c]!=null){let d=c.indexOf(" ");d>0?o.setAttributeNS(c.slice(0,d),c.slice(d+1),l[c]):o.setAttribute(c,l[c])}}for(let c=u;c<n.length;c++){let d=n[c];if(d===0){if(c<n.length-1||c>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}else{let{dom:p,contentDOM:h}=Ml.renderSpec(t,d,r);if(o.appendChild(p),h){if(s)throw new RangeError("Multiple content holes");s=h}}}return{dom:o,contentDOM:s}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ml(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=k8(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return k8(t.marks)}}function k8(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function zE(e){return e.document||window.document}const Mce=65535,Ace=Math.pow(2,16);function kbt(e,t){return e+t*Ace}function S8(e){return e&Mce}function Sbt(e){return(e-(e&Mce))/Ace}const Rce=1,Dce=2,Tk=4,Lce=8;class zM{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Lce)>0}get deletedBefore(){return(this.delInfo&(Rce|Tk))>0}get deletedAfter(){return(this.delInfo&(Dce|Tk))>0}get deletedAcross(){return(this.delInfo&Tk)>0}}class $s{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&$s.empty)return $s.empty}recover(t){let n=0,r=S8(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Sbt(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[o+a],c=this.ranges[o+s],d=l+u;if(t<=d){let p=u?t==l?-1:t==d?1:n:n,h=l+i+(p<0?0:c);if(r)return h;let m=t==(n<0?l:d)?null:kbt(o/3,t-l),g=t==l?Dce:t==d?Rce:Tk;return(n<0?t!=l:t!=d)&&(g|=Lce),new zM(h,g,m)}i+=c-u}return r?t+i:new zM(t+i,0,null)}touches(t,n){let r=0,i=S8(n),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?r:0);if(l>t)break;let u=this.ranges[o+a],c=l+u;if(t<=c&&o==i*3)return!0;r+=this.ranges[o+s]-u}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),u=this.ranges[i+n],c=this.ranges[i+r];t(o,o+u,l,l+c),a+=c-u}}invert(){return new $s(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?$s.empty:new $s(t<0?[0,-t,0]:[0,0,t])}}$s.empty=new $s([]);class Lg{constructor(t=[],n,r=0,i=t.length){this.maps=t,this.mirror=n,this.from=r,this.to=i}slice(t=0,n=this.maps.length){return new Lg(this.maps,this.mirror,t,n)}copy(){return new Lg(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,n){this.to=this.maps.push(t),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(t){for(let n=0,r=this.maps.length;n<t.maps.length;n++){let i=t.getMirror(n);this.appendMap(t.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this.maps.length+t.maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Lg;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let a=this.from;a<this.to;a++){let s=this.maps[a],o=s.mapResult(t,n);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,t=this.maps[l].recover(o.recover);continue}}i|=o.delInfo,t=o.pos}return r?t:new zM(t,i,null)}}const BE=Object.create(null);class $a{getMap(){return $s.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=BE[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in BE)throw new RangeError("Duplicate use of step JSON ID "+t);return BE[t]=n,n.prototype.jsonID=t,n}}class ei{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new ei(t,null)}static fail(t){return new ei(null,t)}static fromReplace(t,n,r,i){try{return ei.ok(t.replace(n,r,i))}catch(a){if(a instanceof zI)return ei.fail(a.message);throw a}}}function D3(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let a=e.child(i);a.content.size&&(a=a.copy(D3(a.content,t,a))),a.isInline&&(a=t(a,n,i)),r.push(a)}return Me.fromArray(r)}class zc extends $a{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new Ye(D3(n.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return ei.fromReplace(t,this.from,this.to,a)}invert(){return new Al(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new zc(n.pos,r.pos,this.mark)}merge(t){return t instanceof zc&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new zc(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zc(n.from,n.to,t.markFromJSON(n.mark))}}$a.jsonID("addMark",zc);class Al extends $a{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ye(D3(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return ei.fromReplace(t,this.from,this.to,r)}invert(){return new zc(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Al(n.pos,r.pos,this.mark)}merge(t){return t instanceof Al&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Al(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Al(n.from,n.to,t.markFromJSON(n.mark))}}$a.jsonID("removeMark",Al);class Bc extends $a{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return ei.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ei.fromReplace(t,this.pos,this.pos+1,new Ye(Me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Bc(this.pos,n.marks[i]);return new Bc(this.pos,this.mark)}}return new _y(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Bc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Bc(n.pos,t.markFromJSON(n.mark))}}$a.jsonID("addNodeMark",Bc);class _y extends $a{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return ei.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ei.fromReplace(t,this.pos,this.pos+1,new Ye(Me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Bc(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new _y(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _y(n.pos,t.markFromJSON(n.mark))}}$a.jsonID("removeNodeMark",_y);class Ti extends $a{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&BM(t,this.from,this.to)?ei.fail("Structure replace would overwrite content"):ei.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new $s([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ti(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ti(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(t){if(!(t instanceof Ti)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ye.empty:new Ye(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ti(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ye.empty:new Ye(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ti(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ti(n.from,n.to,Ye.fromJSON(t,n.slice),!!n.structure)}}$a.jsonID("replace",Ti);class Ai extends $a{constructor(t,n,r,i,a,s,o=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(t){if(this.structure&&(BM(t,this.from,this.gapFrom)||BM(t,this.gapTo,this.to)))return ei.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ei.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ei.fromReplace(t,this.from,this.to,r):ei.fail("Content does not fit in gap")}getMap(){return new $s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ai(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||a>r.pos?null:new Ai(n.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ai(n.from,n.to,n.gapFrom,n.gapTo,Ye.fromJSON(t,n.slice),n.insert,!!n.structure)}}$a.jsonID("replaceAround",Ai);function BM(e,t,n){let r=e.resolve(t),i=n-t,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Cbt(e,t,n,r){let i=[],a=[],s,o;e.doc.nodesBetween(t,n,(l,u,c)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let p=Math.max(u,t),h=Math.min(u+l.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(s&&s.to==p&&s.mark.eq(d[g])?s.to=h:i.push(s=new Al(p,h,d[g])));o&&o.to==p?o.to=h:a.push(o=new zc(p,h,r))}}),i.forEach(l=>e.step(l)),a.forEach(l=>e.step(l))}function Ibt(e,t,n,r){let i=[],a=0;e.doc.nodesBetween(t,n,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(r instanceof DT){let u=s.marks,c;for(;c=r.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(o+s.nodeSize,n);for(let c=0;c<l.length;c++){let d=l[c],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==a-1&&d.eq(i[h].style)&&(p=m)}p?(p.to=u,p.step=a):i.push({style:d,from:Math.max(o,t),to:u,step:a})}}}),i.forEach(s=>e.step(new Al(s.from,s.to,s.style)))}function Fce(e,t,n,r=n.contentMatch,i=!0){let a=e.doc.nodeAt(t),s=[],o=t+1;for(let l=0;l<a.childCount;l++){let u=a.child(l),c=o+u.nodeSize,d=r.matchType(u.type);if(!d)s.push(new Ti(o,c,Ye.empty));else{r=d;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||e.step(new Al(o,c,u.marks[p]));if(i&&u.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(u.text);)m||(m=new Ye(Me.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Ti(o+p.index,o+p.index+p[0].length,m))}}o=c}if(!r.validEnd){let l=r.fillBefore(Me.empty,!0);e.replace(o,o,new Ye(l,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function $bt(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function p0(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),a=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(a,s,n))return r;if(r==0||i.type.spec.isolating||!$bt(i,a,s))break}return null}function Tbt(e,t,n){let{$from:r,$to:i,depth:a}=t,s=r.before(a+1),o=i.after(a+1),l=s,u=o,c=Me.empty,d=0;for(let m=a,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,c=Me.from(r.node(m).copy(c)),d++):l--;let p=Me.empty,h=0;for(let m=a,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=Me.from(i.node(m).copy(p)),h++):u++;e.step(new Ai(l,u,s,o,new Ye(c.append(p),d,h),c.size-d,!0))}function L3(e,t,n=null,r=e){let i=Nbt(e,t),a=i&&Ebt(r,t);return a?i.map(C8).concat({type:t,attrs:n}).concat(a.map(C8)):null}function C8(e){return{type:e,attrs:null}}function Nbt(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.contentMatchAt(r).findWrapping(t);if(!a)return null;let s=a.length?a[0]:t;return n.canReplaceWith(r,i,s)?a:null}function Ebt(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.child(r),s=t.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function Obt(e,t,n){let r=Me.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let o=n[s].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Me.from(n[s].type.create(n[s].attrs,r))}let i=t.start,a=t.end;e.step(new Ai(i,a,i,a,new Ye(r,0,0),n.length,!0))}function Pbt(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(t,n,(s,o)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&Rbt(e.doc,e.mapping.slice(a).map(o),r)){let l=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!h?l=!1:!p&&h&&(l=!0)}l===!1&&Abt(e,s,o,a),Fce(e,e.mapping.slice(a).map(o,1),r,void 0,l===null);let u=e.mapping.slice(a),c=u.map(o,1),d=u.map(o+s.nodeSize,1);return e.step(new Ai(c,d,c+1,d-1,new Ye(Me.from(r.create(i,null,s.marks)),0,0),1,!0)),l===!0&&Mbt(e,s,o,a),!1}})}function Mbt(e,t,n,r){t.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=e.mapping.slice(r).map(n+1+a+s.index);e.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function Abt(e,t,n,r){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=e.mapping.slice(r).map(n+1+a);e.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function Rbt(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Dbt(e,t,n,r,i){let a=e.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let s=n.create(r,null,i||a.marks);if(a.isLeaf)return e.replaceWith(t,t+a.nodeSize,s);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ai(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new Ye(Me.from(s),0,0),1,!0))}function Fg(e,t,n=1,r){let i=e.resolve(t),a=i.depth-n,s=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=n-2;u>a;u--,c--){let d=i.node(u),p=i.index(u);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(p,d.childCount),m=r&&r[c+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[c]||d;if(!d.canReplace(p+1,d.childCount)||!g.type.validContent(h))return!1}let o=i.indexAfter(a),l=r&&r[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function Lbt(e,t,n=1,r){let i=e.doc.resolve(t),a=Me.empty,s=Me.empty;for(let o=i.depth,l=i.depth-n,u=n-1;o>l;o--,u--){a=Me.from(i.node(o).copy(a));let c=r&&r[u];s=Me.from(c?c.type.create(c.attrs,s):i.node(o).copy(s))}e.step(new Ti(t,t,new Ye(a.append(s),n,n),!0))}function Kd(e,t){let n=e.resolve(t),r=n.index();return zce(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function zce(e,t){return!!(e&&t&&!e.isLeaf&&e.canAppend(t))}function LT(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let a,s,o=r.index(i);if(i==r.depth?(a=r.nodeBefore,s=r.nodeAfter):n>0?(a=r.node(i+1),o++,s=r.node(i).maybeChild(o)):(a=r.node(i).maybeChild(o-1),s=r.node(i+1)),a&&!a.isTextblock&&zce(a,s)&&r.node(i).canReplace(o,o+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function Fbt(e,t,n){let r=new Ti(t-n,t+n,Ye.empty,!0);e.step(r)}function zbt(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,n))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,n))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function Bce(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let a=0;a<n.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let s=r.depth;s>=0;s--){let o=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(o>0?1:0),u=r.node(s),c=!1;if(a==1)c=u.canReplace(l,l,i);else{let d=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=d&&u.canReplaceWith(l,l,d[0])}if(c)return o==0?r.pos:o<0?r.before(s+1):r.after(s+1)}return null}function FT(e,t,n=t,r=Ye.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),a=e.resolve(n);return Wce(i,a,r)?new Ti(t,n,r):new Bbt(i,a,r).fit()}function Wce(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class Bbt{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Me.empty;for(let i=0;i<=t.depth;i++){let a=t.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=Me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let a=this.placed,s=r.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new Ye(a,s,o);return t>-1?new Ai(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ti(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let a=n.firstChild;if(n.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){t=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=WE(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:u}=this.frontier[o],c,d=null;if(n==1&&(s?u.matchType(s.type)||(d=u.fillBefore(Me.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:o,parent:a,inject:d};if(n==2&&s&&(c=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:o,parent:a,wrap:c};if(a&&u.matchType(a.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=WE(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ye(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=WE(t,n);if(i.childCount<=1&&n>0){let a=t.size-n<=n+i.size;this.unplaced=new Ye(vb(t,n-1,1),n-1,a?n-1:r)}else this.unplaced=new Ye(vb(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let s=this.unplaced,o=r?r.content:s.content,l=s.openStart-t,u=0,c=[],{match:d,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)c.push(i.child(g));d=d.matchFragment(i)}let h=o.size+t-(s.content.size-s.openEnd);for(;u<o.childCount;){let g=o.child(u),y=d.matchType(g.type);if(!y)break;u++,(u>1||l==0||g.content.size)&&(d=y,c.push(Vce(g.mark(p.allowedMarks(g.marks)),u==1?l:0,u==o.childCount?h:-1)))}let m=u==o.childCount;m||(h=-1),this.placed=bb(this.placed,n,Me.from(c)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=o;g<h;g++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=m?t==0?Ye.empty:new Ye(vb(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new Ye(vb(s.content,t,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!VE(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],a=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),s=VE(t,n,i,r,a);if(!!s){for(let o=n-1;o>=0;o--){let{match:l,type:u}=this.frontier[o],c=VE(t,o,u,l,!0);if(!c||c.childCount)continue e}return{depth:n,fit:s,move:a?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=bb(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,a)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=bb(this.placed,this.depth,Me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Me.empty,!0);n.childCount&&(this.placed=bb(this.placed,this.frontier.length,n))}}function vb(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(vb(e.firstChild.content,t-1,n)))}function bb(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(bb(e.lastChild.content,t-1,n)))}function WE(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Vce(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Vce(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(Me.empty,!0)))),e.copy(r)}function VE(e,t,n,r,i){let a=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==a.childCount&&!n.compatibleContent(a.type))return null;let o=r.fillBefore(a.content,!0,s);return o&&!Wbt(n,a.content,s)?o:null}function Wbt(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function Vbt(e){return e.spec.defining||e.spec.definingForContent}function jbt(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),a=e.doc.resolve(n);if(Wce(i,a,r))return e.step(new Ti(t,n,r));let s=Hce(i,e.doc.resolve(n));s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(o),u=[],c=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(u.push(m),h==r.openStart)break;p=m.content}for(let p=c-1;p>=0;p--){let h=u[p],m=Vbt(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(o)-1)))c=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+c+1)%(r.openStart+1),m=u[h];if(!!m)for(let g=0;g<s.length;g++){let y=s[(g+l)%s.length],v=!0;y<0&&(v=!1,y=-y);let b=i.node(y-1),_=i.index(y-1);if(b.canReplaceWith(_,_,m.type,m.marks))return e.replace(i.before(y),v?a.after(y):n,new Ye(jce(r.content,0,r.openStart,h),h,r.openEnd))}}let d=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>d));p--){let h=s[p];h<0||(t=i.before(h),n=a.after(h))}}function jce(e,t,n,r,i){if(t<n){let a=e.firstChild;e=e.replaceChild(0,a.copy(jce(a.content,t+1,n,r,a)))}if(t>r){let a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(Me.empty,!0))}return e}function Hbt(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=zbt(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Ye(Me.from(r),0,0))}function Ubt(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),a=Hce(r,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||r.node(o).type.contentMatch.validEnd)return e.delete(r.start(o),i.end(o));if(o>0&&(l||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return e.delete(r.before(o),i.after(o))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}function Hce(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let a=e.start(i);if(a<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(a==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==a-1)&&n.push(i)}return n}class zg extends $a{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return ei.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return ei.fromReplace(t,this.pos,this.pos+1,new Ye(Me.from(i),0,n.isLeaf?0:1))}getMap(){return $s.empty}invert(t){return new zg(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new zg(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new zg(n.pos,n.attr,n.value)}}$a.jsonID("attr",zg);class O1 extends $a{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return ei.ok(r)}getMap(){return $s.empty}invert(t){return new O1(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new O1(n.attr,n.value)}}$a.jsonID("docAttr",O1);let ky=class extends Error{};ky=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};ky.prototype=Object.create(Error.prototype);ky.prototype.constructor=ky;ky.prototype.name="TransformError";class Gbt{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Lg}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new ky(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ye.empty){let i=FT(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Ye(Me.from(r),0,0))}delete(t,n){return this.replace(t,n,Ye.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return jbt(this,t,n,r),this}replaceRangeWith(t,n,r){return Hbt(this,t,n,r),this}deleteRange(t,n){return Ubt(this,t,n),this}lift(t,n){return Tbt(this,t,n),this}join(t,n=1){return Fbt(this,t,n),this}wrap(t,n){return Obt(this,t,n),this}setBlockType(t,n=t,r,i=null){return Pbt(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return Dbt(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new zg(t,n,r)),this}setDocAttribute(t,n){return this.step(new O1(t,n)),this}addNodeMark(t,n){return this.step(new Bc(t,n)),this}removeNodeMark(t,n){if(!(n instanceof In)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n=n.isInSet(r.marks),!n)return this}return this.step(new _y(t,n)),this}split(t,n=1,r){return Lbt(this,t,n,r),this}addMark(t,n,r){return Cbt(this,t,n,r),this}removeMark(t,n,r){return Ibt(this,t,n,r),this}clearIncompatible(t,n,r){return Fce(this,t,n,r),this}}const jE=Object.create(null);class en{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new qbt(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ye.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let a=t.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],c=t.mapping.slice(a);t.replaceRange(c.map(l.pos),c.map(u.pos),o?Ye.empty:n),o==0&&T8(t,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=t.mapping.slice(r),u=l.map(s.pos),c=l.map(o.pos);a?t.deleteRange(u,c):(t.replaceRangeWith(u,c,n),T8(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ut(t):tg(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let a=t.depth-1;a>=0;a--){let s=n<0?tg(t.node(0),t.node(a),t.before(a+1),t.index(a),n,r):tg(t.node(0),t.node(a),t.after(a+1),t.index(a)+1,n,r);if(s)return s}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Uo(t.node(0))}static atStart(t){return tg(t,t,0,0,1)||new Uo(t)}static atEnd(t){return tg(t,t,t.content.size,t.childCount,-1)||new Uo(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=jE[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in jE)throw new RangeError("Duplicate use of selection JSON ID "+t);return jE[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ut.between(this.$anchor,this.$head).getBookmark()}}en.prototype.visible=!0;class qbt{constructor(t,n){this.$from=t,this.$to=n}}let I8=!1;function $8(e){!I8&&!e.parent.inlineContent&&(I8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ut extends en{constructor(t,n=t){$8(t),$8(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return en.near(r);let i=t.resolve(n.map(this.anchor));return new Ut(i.parent.inlineContent?i:r,r)}replace(t,n=Ye.empty){if(super.replace(t,n),n==Ye.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ut&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new zT(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ut(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let a=en.findFrom(n,r,!0)||en.findFrom(n,-r,!0);if(a)n=a.$head;else return en.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(en.findFrom(t,-r,!0)||en.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ut(t,n)}}en.jsonID("text",Ut);class zT{constructor(t,n){this.anchor=t,this.head=n}map(t){return new zT(t.map(this.anchor),t.map(this.head))}resolve(t){return Ut.between(t.resolve(this.anchor),t.resolve(this.head))}}class It extends en{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),a=t.resolve(i);return r?en.near(a):new It(a)}content(){return new Ye(Me.from(this.node),0,0)}eq(t){return t instanceof It&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new F3(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new It(t.resolve(n.anchor))}static create(t,n){return new It(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}It.prototype.visible=!1;en.jsonID("node",It);class F3{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new zT(r,r):new F3(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&It.isSelectable(r)?new It(n):en.near(n)}}class Uo extends en{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ye.empty){if(n==Ye.empty){t.delete(0,t.doc.content.size);let r=en.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Uo(t)}map(t){return new Uo(t)}eq(t){return t instanceof Uo}getBookmark(){return Kbt}}en.jsonID("all",Uo);const Kbt={map(){return this},resolve(e){return new Uo(e)}};function tg(e,t,n,r,i,a=!1){if(t.inlineContent)return Ut.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let o=t.child(s);if(o.isAtom){if(!a&&It.isSelectable(o))return It.create(e,n-(i<0?o.nodeSize:0))}else{let l=tg(e,o,n+i,i<0?o.childCount:0,i,a);if(l)return l}n+=o.nodeSize*i}return null}function T8(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Ti||i instanceof Ai))return;let a=e.mapping.maps[r],s;a.forEach((o,l,u,c)=>{s==null&&(s=c)}),e.setSelection(en.near(e.doc.resolve(s),n))}const N8=1,B_=2,E8=4;class Zbt extends Gbt{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|N8)&~B_,this.storedMarks=null,this}get selectionSet(){return(this.updated&N8)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=B_,this}ensureMarks(t){return In.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&B_)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~B_,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||In.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r==null?n:r,!t)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(n);a=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,a)),this.selection.empty||this.setSelection(en.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=E8,this}get scrolledIntoView(){return(this.updated&E8)>0}}function O8(e,t){return!t||!e?e:e.bind(t)}class wb{constructor(t,n,r){this.name=t,this.init=O8(n.init,r),this.apply=O8(n.apply,r)}}const Xbt=[new wb("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new wb("selection",{init(e,t){return e.selection||en.atStart(t.doc)},apply(e){return e.selection}}),new wb("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new wb("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class HE{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Xbt.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new wb(r.key,r.spec.state,r))})}}class yg{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,c=l<n.length&&o.spec.appendTransaction.call(o,l?n.slice(l):n,u,r);if(c&&r.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),a=!0}i&&(i[s]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new yg(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];n[a.name]=a.apply(t,this[a.name],this,n)}return n}get tr(){return new Zbt(this)}static create(t){let n=new HE(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new yg(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new HE(this.schema,t.plugins),r=n.fields,i=new yg(n);for(let a=0;a<r.length;a++){let s=r[a].name;i[s]=this.hasOwnProperty(s)?this[s]:r[a].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],a=i.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new HE(t.schema,t.plugins),a=new yg(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=Vl.fromJSON(t.schema,n.doc);else if(s.name=="selection")a.selection=en.fromJSON(a.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let o in r){let l=r[o],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){a[s.name]=u.fromJSON.call(l,t,n[o],a);return}}a[s.name]=s.init(t,a)}}),a}}function Uce(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Uce(i,t,{})),n[r]=i}return n}class Ks{constructor(t){this.spec=t,this.props={},t.props&&Uce(t.props,this,this.props),this.key=t.key?t.key.key:Gce("plugin")}getState(t){return t[this.key]}}const UE=Object.create(null);function Gce(e){return e in UE?e+"$"+ ++UE[e]:(UE[e]=0,e+"$")}class nc{constructor(t="key"){this.key=Gce(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Ki=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},P1=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let WM=null;const pu=function(e,t,n){let r=WM||(WM=document.createRange());return r.setEnd(e,n==null?e.nodeValue.length:n),r.setStart(e,t||0),r},Jbt=function(){WM=null},$h=function(e,t,n,r){return n&&(P8(e,t,n,r,-1)||P8(e,t,n,r,1))},Ybt=/^(img|br|input|textarea|hr)$/i;function P8(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Nl(e))){let a=e.parentNode;if(!a||a.nodeType!=1||cx(e)||Ybt.test(e.nodeName)||e.contentEditable=="false")return!1;t=Ki(e)+(i<0?0:1),e=a}else if(e.nodeType==1){if(e=e.childNodes[t+(i<0?-1:0)],e.contentEditable=="false")return!1;t=i<0?Nl(e):0}else return!1}}function Nl(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Qbt(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Nl(e)}else if(e.parentNode&&!cx(e))t=Ki(e),e=e.parentNode;else return null}}function e1t(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!cx(e))t=Ki(e)+1,e=e.parentNode;else return null}}function t1t(e,t,n){for(let r=t==0,i=t==Nl(e);r||i;){if(e==n)return!0;let a=Ki(e);if(e=e.parentNode,!e)return!1;r=r&&a==0,i=i&&a==Nl(e)}}function cx(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const BT=function(e){return e.focusNode&&$h(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function _p(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function n1t(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function r1t(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Gl=typeof navigator<"u"?navigator:null,M8=typeof document<"u"?document:null,Zd=Gl&&Gl.userAgent||"",VM=/Edge\/(\d+)/.exec(Zd),qce=/MSIE \d/.exec(Zd),jM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zd),fs=!!(qce||jM||VM),nd=qce?document.documentMode:jM?+jM[1]:VM?+VM[1]:0,al=!fs&&/gecko\/(\d+)/i.test(Zd);al&&+(/Firefox\/(\d+)/.exec(Zd)||[0,0])[1];const HM=!fs&&/Chrome\/(\d+)/.exec(Zd),Ra=!!HM,i1t=HM?+HM[1]:0,ja=!fs&&!!Gl&&/Apple Computer/.test(Gl.vendor),Sy=ja&&(/Mobile\/\w+/.test(Zd)||!!Gl&&Gl.maxTouchPoints>2),no=Sy||(Gl?/Mac/.test(Gl.platform):!1),a1t=Gl?/Win/.test(Gl.platform):!1,Lo=/Android \d/.test(Zd),dx=!!M8&&"webkitFontSmoothing"in M8.documentElement.style,s1t=dx?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function o1t(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function uu(e,t){return typeof e=="number"?e:e[t]}function l1t(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function A8(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument;for(let s=n||e.dom;s;s=P1(s)){if(s.nodeType!=1)continue;let o=s,l=o==a.body,u=l?o1t(a):l1t(o),c=0,d=0;if(t.top<u.top+uu(r,"top")?d=-(u.top-t.top+uu(i,"top")):t.bottom>u.bottom-uu(r,"bottom")&&(d=t.bottom-t.top>u.bottom-u.top?t.top+uu(i,"top")-u.top:t.bottom-u.bottom+uu(i,"bottom")),t.left<u.left+uu(r,"left")?c=-(u.left-t.left+uu(i,"left")):t.right>u.right-uu(r,"right")&&(c=t.right-u.right+uu(i,"right")),c||d)if(l)a.defaultView.scrollBy(c,d);else{let p=o.scrollLeft,h=o.scrollTop;d&&(o.scrollTop+=d),c&&(o.scrollLeft+=c);let m=o.scrollLeft-p,g=o.scrollTop-h;t={left:t.left-m,top:t.top-g,right:t.right-m,bottom:t.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function u1t(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let a=(t.left+t.right)/2,s=n+1;s<Math.min(innerHeight,t.bottom);s+=5){let o=e.root.elementFromPoint(a,s);if(!o||o==e.dom||!e.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=n-20){r=o,i=l.top;break}}return{refDOM:r,refTop:i,stack:Kce(e.dom)}}function Kce(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=P1(r));return t}function c1t({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Zce(n,r==0?0:r-t)}function Zce(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:a}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=a&&(r.scrollLeft=a)}}let qm=null;function d1t(e){if(e.setActive)return e.setActive();if(qm)return e.focus(qm);let t=Kce(e);e.focus(qm==null?{get preventScroll(){return qm={preventScroll:!0},!0}}:void 0),qm||(qm=!1,Zce(t,0))}function Xce(e,t){let n,r=2e8,i,a=0,s=t.top,o=t.top,l,u;for(let c=e.firstChild,d=0;c;c=c.nextSibling,d++){let p;if(c.nodeType==1)p=c.getClientRects();else if(c.nodeType==3)p=pu(c).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=s&&m.bottom>=o){s=Math.max(m.bottom,s),o=Math.min(m.top,o);let g=m.left>t.left?m.left-t.left:m.right<t.left?t.left-m.right:0;if(g<r){n=c,r=g,i=g&&n.nodeType==3?{left:m.right<t.left?m.right:m.left,top:t.top}:t,c.nodeType==1&&g&&(a=d+(t.left>=(m.left+m.right)/2?1:0));continue}}else m.top>t.top&&!l&&m.left<=t.left&&m.right>=t.left&&(l=c,u={left:Math.max(m.left,Math.min(m.right,t.left)),top:m.top});!n&&(t.left>=m.right&&t.top>=m.top||t.left>=m.left&&t.top>=m.bottom)&&(a=d+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?p1t(n,i):!n||r&&n.nodeType==1?{node:e,offset:a}:Xce(n,i)}function p1t(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let a=wc(r,1);if(a.top!=a.bottom&&z3(t,a))return{node:e,offset:i+(t.left>=(a.left+a.right)/2?1:0)}}return{node:e,offset:0}}function z3(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function h1t(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function f1t(e,t,n){let{node:r,offset:i}=Xce(t,n),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(r,i,a)}function m1t(e,t,n,r){let i=-1;for(let a=t,s=!1;a!=e.dom;){let o=e.docView.nearestDesc(a,!0);if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)){let l=o.dom.getBoundingClientRect();if(o.node.isBlock&&o.parent&&(!s&&l.left>r.left||l.top>r.top?i=o.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText)return(o.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?o.posBefore:o.posAfter}a=o.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function Jce(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),a=i;;){let s=e.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(z3(t,u))return Jce(s,t,u)}}if((a=(a+1)%r)==i)break}return e}function g1t(e,t){let n=e.dom.ownerDocument,r,i=0,a=r1t(n,t.left,t.top);a&&({node:r,offset:i}=a);let s=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),o;if(!s||!e.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=e.dom.getBoundingClientRect();if(!z3(t,u)||(s=Jce(e.dom,t,u),!s))return null}if(ja)for(let u=s;r&&u;u=P1(u))u.draggable&&(r=void 0);if(s=h1t(s,t),r){if(al&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let u;dx&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=m1t(e,r,i,t))}o==null&&(o=f1t(e,s,t));let l=e.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function R8(e){return e.top<e.bottom||e.left<e.right}function wc(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(R8(r))return r}return Array.prototype.find.call(n,R8)||e.getBoundingClientRect()}const y1t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Yce(e,t,n){let{node:r,offset:i,atom:a}=e.docView.domFromPos(t,n<0?-1:1),s=dx||al;if(r.nodeType==3)if(s&&(y1t.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=wc(pu(r,i,i),n);if(al&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=wc(pu(r,i-1,i-1),-1);if(u.top==l.top){let c=wc(pu(r,i,i+1),-1);if(c.top!=l.top)return eb(c,c.left<u.left)}}return l}else{let l=i,u=i,c=n<0?1:-1;return n<0&&!i?(u++,c=-1):n>=0&&i==r.nodeValue.length?(l--,c=1):n<0?l--:u++,eb(wc(pu(r,l,u),c),c<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(a==null&&i&&(n<0||i==Nl(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return GE(l.getBoundingClientRect(),!1)}if(a==null&&i<Nl(r)){let l=r.childNodes[i];if(l.nodeType==1)return GE(l.getBoundingClientRect(),!0)}return GE(r.getBoundingClientRect(),n>=0)}if(a==null&&i&&(n<0||i==Nl(r))){let l=r.childNodes[i-1],u=l.nodeType==3?pu(l,Nl(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return eb(wc(u,1),!1)}if(a==null&&i<Nl(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?pu(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return eb(wc(u,-1),!0)}return eb(wc(r.nodeType==3?pu(r):r,-n),n>=0)}function eb(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function GE(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Qce(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function v1t(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return Qce(e,t,()=>{let{node:a}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=e.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=Yce(e,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=pu(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(n=="up"?s.top-c.top>(c.bottom-s.top)*2:c.bottom-s.bottom>(s.bottom-c.top)*2))return!1}}return!0})}const b1t=/[\u0590-\u08ac]/;function w1t(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,s=i==r.parent.content.size,o=e.domSelection();return!b1t.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?a:s:Qce(e,t,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:d}=e.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",n,"character");let h=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:m,focusOffset:g}=e.domSelectionRange(),y=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{o.collapse(c,d),l&&(l!=c||u!=d)&&o.extend&&o.extend(l,u)}catch{}return p!=null&&(o.caretBidiLevel=p),y})}let D8=null,L8=null,F8=!1;function x1t(e,t,n){return D8==t&&L8==n?F8:(D8=t,L8=n,F8=n=="up"||n=="down"?v1t(e,t,n):w1t(e,t,n))}const po=0,z8=1,Ep=2,ql=3;class px{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=po,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let a,s;if(t==this.contentDOM)a=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(t==this.contentDOM)a=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;a=t.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Ki(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let a=t;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return(i==null?r>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!n||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return a}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],a=r+i.size;if(r==t&&a!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<a)return i.descAt(t-r-i.border);r=a}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],o=a+s.size;if(o>t||s instanceof tde){i=t-a;break}a=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof ede&&a.side>=0;r--);if(n<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&n&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?Ki(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?Ki(a.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=r,o=0;;o++){let l=this.children[o],u=s+l.size;if(i==-1&&t<=u){let c=s+l.border;if(t>=c&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,n,c);t=s;for(let d=o;d>0;d--){let p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Ki(p.dom)+1;break}t-=p.size}i==-1&&(i=0)}if(i>-1&&(u>n||o==this.children.length-1)){n=u;for(let c=o+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){a=Ki(d.dom);break}n+=d.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:a}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let a=Math.min(t,n),s=Math.max(t,n);for(let p=0,h=0;p<this.children.length;p++){let m=this.children[p],g=h+m.size;if(a>h&&s<g)return m.setSelection(t-h-m.border,n-h-m.border,r,i);h=g}let o=this.domFromPos(t,t?-1:1),l=n==t?o:this.domFromPos(n,n?-1:1),u=r.getSelection(),c=!1;if((al||ja)&&t==n){let{node:p,offset:h}=o;if(p.nodeType==3){if(c=!!(h&&p.nodeValue[h-1]==`
`),c&&h==p.nodeValue.length)for(let m=p,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(o=l={node:g.parentNode,offset:Ki(g)+1});break}let y=m.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let m=p.childNodes[h-1];c=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(al&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||c&&ja)&&$h(o.node,o.offset,u.anchorNode,u.anchorOffset)&&$h(l.node,l.offset,u.focusNode,u.focusOffset))return;let d=!1;if((u.extend||t==n)&&!c){u.collapse(o.node,o.offset);try{t!=n&&u.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(t>n){let h=o;o=l,l=h}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],s=r+a.size;if(r==s?t<=s&&n>=r:t<s&&n>r){let o=r+a.border,l=s-a.border;if(t>=o&&n<=l){this.dirty=t==r||n==s?Ep:z8,t==o&&n==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=ql:a.markDirty(t-o,n-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ep:ql}r=s}this.dirty=Ep}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ep:z8;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class ede extends px{constructor(t,n,r,i){let a,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=n,this.widget=n,a=this}matchesWidget(t){return this.dirty==po&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class _1t extends px{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Th extends px{constructor(t,n,r,i){super(t,[],r,i),this.mark=n}static create(t,n,r,i){let a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return(!s||!s.dom)&&(s=Ml.renderSpec(document,n.type.spec.toDOM(n,r))),new Th(t,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&ql||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ql&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=po){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=po}}slice(t,n,r){let i=Th.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;n<s&&(a=qM(a,n,s,r)),t>0&&(a=qM(a,0,t,r));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}}class rd extends px{constructor(t,n,r,i,a,s,o,l,u){super(t,[],a,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(t,n,r,i,a,s){let o=a.nodeViews[n.type.name],l,u=o&&o(n,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Ml.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let p=c;return c=ide(c,r,n),u?l=new k1t(t,n,r,i,c,d||null,p,u,a,s+1):n.isText?new WT(t,n,r,i,c,p,a):new rd(t,n,r,i,c,d||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>Me.empty)}return t}matchesNode(t,n,r){return this.dirty==po&&t.eq(this.node)&&GM(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,a=t.composing?this.localCompositionInfo(t,n):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new C1t(this,s&&s.node,t);T1t(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,t):u.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?In.none:this.node.child(c).marks,r,t),l.placeWidget(u,t,i)},(u,c,d,p)=>{l.syncToMarks(u.marks,r,t);let h;l.findNodeMatch(u,c,d,p)||o&&t.state.selection.from>i&&t.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(u,c,d,h,t)||l.updateNextNode(u,c,d,t,p,i)||l.addNode(u,c,d,t,i),i+=u.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ep)&&(s&&this.protectLocalComposition(t,s),nde(this.contentDOM,this.children,t),Sy&&N1t(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ut)||r<n||i>n+this.node.content.size)return null;let a=t.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=E1t(this.node.content,s,r-n,i-n);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new _1t(this,a,n,i);t.input.compositionNodes.push(s),this.children=qM(this.children,r,r+i.length,t,s)}update(t,n,r,i){return this.dirty==ql||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=po}updateOuterDeco(t){if(GM(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rde(this.dom,this.nodeDOM,UM(this.outerDeco,this.node,n),UM(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function B8(e,t,n,r,i){ide(r,t,e);let a=new rd(void 0,e,t,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class WT extends rd{constructor(t,n,r,i,a,s,o){super(t,n,r,i,a,null,s,o,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ql||this.dirty!=po&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=po||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=po,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),a=document.createTextNode(i.text);return new WT(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ql)}get domAtom(){return!1}isText(t){return this.node.text==t}}class tde extends px{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==po&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class k1t extends rd{constructor(t,n,r,i,a,s,o,l,u,c){super(t,n,r,i,a,s,o,u,c),this.spec=l}update(t,n,r,i){if(this.dirty==ql)return!1;if(this.spec.update){let a=this.spec.update(t,n,r);return a&&this.updateInner(t,n,r,i),a}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function nde(e,t,n){let r=e.firstChild,i=!1;for(let a=0;a<t.length;a++){let s=t[a],o=s.dom;if(o.parentNode==e){for(;o!=r;)r=W8(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(o,r);if(s instanceof Th){let l=r?r.previousSibling:e.lastChild;nde(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}for(;r;)r=W8(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Bb=function(e){e&&(this.nodeName=e)};Bb.prototype=Object.create(null);const Op=[new Bb];function UM(e,t,n){if(e.length==0)return Op;let r=n?Op[0]:new Bb,i=[r];for(let a=0;a<e.length;a++){let s=e[a].type.attrs;if(!!s){s.nodeName&&i.push(r=new Bb(s.nodeName));for(let o in s){let l=s[o];l!=null&&(n&&i.length==1&&i.push(r=new Bb(t.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+l:o=="style"?r.style=(r.style?r.style+";":"")+l:o!="nodeName"&&(r[o]=l))}}}return i}function rde(e,t,n,r){if(n==Op&&r==Op)return t;let i=t;for(let a=0;a<r.length;a++){let s=r[a],o=n[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=e&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=Op[0]),i=l}S1t(i,o||Op[0],s)}return i}function S1t(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&e.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&e.classList.add(i[a]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function ide(e,t,n){return rde(e,e,Op,UM(t,n,e.nodeType!=1))}function GM(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function W8(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class C1t{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=I1t(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,a=this.stack.length>>1,s=Math.min(a,t.length);for(;i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=po,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<t.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(t[a])&&!this.isLocked(u.dom)){o=l;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let l=Th.create(this.top,t[a],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,a++}}findNodeMatch(t,n,r,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,n,r))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let u=this.top.children[o];if(u.matchesNode(t,n,r)&&!this.preMatch.matched.has(u)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(t,n,r,i,a){let s=this.top.children[i];return s.dirty==ql&&s.dom==s.contentDOM&&(s.dirty=Ep),s.update(t,n,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof rd){let u=this.preMatch.matched.get(l);if(u!=null&&u!=a)return!1;let c=l.dom,d,p=this.isLocked(c)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=ql&&GM(n,l.outerDeco));if(!p&&l.update(t,n,r,i))return this.destroyBetween(this.index,o),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!p&&(d=this.recreateWrapper(l,t,n,r,i,s)))return this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ep,d.updateChildren(i,s+1),d.dirty=po),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,a,s){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content))return null;let o=rd.create(this.top,n,r,i,a,s);if(o.contentDOM){o.children=t.children,t.children=[];for(let l of o.children)l.parent=o}return t.destroy(),o}addNode(t,n,r,i,a){let s=rd.create(this.top,t,n,r,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new ede(this.top,t,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Th;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof WT)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((ja||Ra)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tde(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function I1t(e,t){let n=t,r=n.children.length,i=e.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(r){let u=n.children[r-1];if(u instanceof Th)n=u,r=u.children.length;else{o=u,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(!!l){if(l!=e.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function $1t(e,t){return e.type.side-t.type.side}function T1t(e,t,n,r){let i=t.locals(e),a=0;if(i.length==0){for(let u=0;u<e.childCount;u++){let c=e.child(u);r(c,i,t.forChild(a,c),u),a+=c.nodeSize}return}let s=0,o=[],l=null;for(let u=0;;){let c,d;for(;s<i.length&&i[s].to==a;){let y=i[s++];y.widget&&(c?(d||(d=[c])).push(y):c=y)}if(c)if(d){d.sort($1t);for(let y=0;y<d.length;y++)n(d[y],u,!!l)}else n(c,u,!!l);let p,h;if(l)h=-1,p=l,l=null;else if(u<e.childCount)h=u,p=e.child(u++);else break;for(let y=0;y<o.length;y++)o[y].to<=a&&o.splice(y--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let m=a+p.nodeSize;if(p.isText){let y=m;s<i.length&&i[s].from<y&&(y=i[s].from);for(let v=0;v<o.length;v++)o[v].to<y&&(y=o[v].to);y<m&&(l=p.cut(y-a),p=p.cut(0,y-a),m=y,h=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=p.isInline&&!p.isLeaf?o.filter(y=>!y.inline):o.slice();r(p,g,t.forChild(a,p),h),a=m}}function N1t(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function E1t(e,t,n,r){for(let i=0,a=0;i<e.childCount&&a<=r;){let s=e.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let u=e.child(i++);if(a+=u.nodeSize,!u.isText)break;l+=u.text}if(a>=n){if(a>=r&&l.slice(r-t.length-o,r-o)==t)return r-t.length;let u=o<r?l.lastIndexOf(t,r-o-1):-1;if(u>=0&&u+t.length+o>=n)return o+u;if(n==r&&l.length>=r+t.length-o&&l.slice(r-o,r-o+t.length)==t)return r}}return-1}function qM(e,t,n,r,i){let a=[];for(let s=0,o=0;s<e.length;s++){let l=e[s],u=o,c=o+=l.size;u>=n||c<=t?a.push(l):(u<t&&a.push(l.slice(0,t-u,r)),i&&(a.push(i),i=void 0),c>n&&a.push(l.slice(n-u,l.size,r)))}return a}function B3(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),a=i&&i.size==0,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let o=r.resolve(s),l,u;if(BT(n)){for(l=o;i&&!i.node;)i=i.parent;let c=i.node;if(i&&c.isAtom&&It.isSelectable(c)&&i.parent&&!(c.isInline&&t1t(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;u=new It(s==d?o:r.resolve(d))}}else{let c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null;l=r.resolve(c)}if(!u){let c=t=="pointer"||e.state.selection.head<o.pos&&!a?1:-1;u=W3(e,l,o,c)}return u}function ade(e){return e.editable?e.hasFocus():ode(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Tu(e,t=!1){let n=e.state.selection;if(sde(e,n),!!ade(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Ra){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&$h(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)P1t(e);else{let{anchor:r,head:i}=n,a,s;V8&&!(n instanceof Ut)&&(n.$from.parent.inlineContent||(a=j8(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=j8(e,n.to))),e.docView.setSelection(r,i,e.root,t),V8&&(a&&H8(a),s&&H8(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&O1t(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const V8=ja||Ra&&i1t<63;function j8(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(ja&&i&&i.contentEditable=="false")return qE(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return qE(i);if(a)return qE(a)}}function qE(e){return e.contentEditable="true",ja&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function H8(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function O1t(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!ade(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function P1t(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,Ki(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&fs&&nd<=11&&(r.disabled=!0,r.disabled=!1)}function sde(e,t){if(t instanceof It){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(U8(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else U8(e)}function U8(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function W3(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ut.between(t,n,r)}function G8(e){return e.editable&&!e.hasFocus()?!1:ode(e)}function ode(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function M1t(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return $h(t.node,t.offset,n.anchorNode,n.anchorOffset)}function KM(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),a=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return a&&en.findFrom(a,t)}function Ic(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function q8(e,t,n){let r=e.state.selection;if(r instanceof Ut)if(n.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=e.state.doc.resolve(i.pos+a.nodeSize*(t<0?-1:1));return Ic(e,new Ut(r.$anchor,s))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=KM(e.state,t);return i&&i instanceof It?Ic(e,i):!1}else if(!(no&&n.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=t<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=e.docView.descAt(o))&&!s.contentDOM?It.isSelectable(a)?Ic(e,new It(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i)):dx?Ic(e,new Ut(e.state.doc.resolve(t<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof It&&r.node.isInline)return Ic(e,new Ut(t>0?r.$to:r.$from));{let i=KM(e.state,t);return i?Ic(e,i):!1}}}function GI(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Wb(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Km(e,t){return t<0?A1t(e):R1t(e)}function A1t(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,a,s=!1;for(al&&n.nodeType==1&&r<GI(n)&&Wb(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Wb(o,-1))i=n,a=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(lde(n))break;{let o=n.previousSibling;for(;o&&Wb(o,-1);)i=n.parentNode,a=Ki(o),o=o.previousSibling;if(o)n=o,r=GI(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?ZM(e,n,r):i&&ZM(e,i,a)}function R1t(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=GI(n),a,s;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Wb(o,1))a=n,s=++r;else break}else{if(lde(n))break;{let o=n.nextSibling;for(;o&&Wb(o,1);)a=o.parentNode,s=Ki(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=GI(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}a&&ZM(e,a,s)}function lde(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function D1t(e,t){for(;e&&t==e.childNodes.length&&!cx(e);)t=Ki(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function L1t(e,t){for(;e&&!t&&!cx(e);)t=Ki(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function ZM(e,t,n){if(t.nodeType!=3){let a,s;(s=D1t(t,n))?(t=s,n=0):(a=L1t(t,n))&&(t=a,n=a.nodeValue.length)}let r=e.domSelection();if(BT(r)){let a=document.createRange();a.setEnd(t,n),a.setStart(t,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Tu(e)},50)}function K8(e,t){let n=e.state.doc.resolve(t);if(!(Ra||a1t)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let a=e.coordsAtPos(t-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(t<n.end()){let a=e.coordsAtPos(t+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function Z8(e,t,n){let r=e.state.selection;if(r instanceof Ut&&!r.empty||n.indexOf("s")>-1||no&&n.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let s=KM(e.state,t);if(s&&s instanceof It)return Ic(e,s)}if(!i.parent.inlineContent){let s=t<0?i:a,o=r instanceof Uo?en.near(s,t):en.findFrom(s,t);return o?Ic(e,o):!1}return!1}function X8(e,t){if(!(e.state.selection instanceof Ut))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let a=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let s=e.state.tr;return t<0?s.delete(n.pos-a.nodeSize,n.pos):s.delete(n.pos,n.pos+a.nodeSize),e.dispatch(s),!0}return!1}function J8(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function F1t(e){if(!ja||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;J8(e,r,"true"),setTimeout(()=>J8(e,r,"false"),20)}return!1}function z1t(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function B1t(e,t){let n=t.keyCode,r=z1t(t);if(n==8||no&&n==72&&r=="c")return X8(e,-1)||Km(e,-1);if(n==46&&!t.shiftKey||no&&n==68&&r=="c")return X8(e,1)||Km(e,1);if(n==13||n==27)return!0;if(n==37||no&&n==66&&r=="c"){let i=n==37?K8(e,e.state.selection.from)=="ltr"?-1:1:-1;return q8(e,i,r)||Km(e,i)}else if(n==39||no&&n==70&&r=="c"){let i=n==39?K8(e,e.state.selection.from)=="ltr"?1:-1:1;return q8(e,i,r)||Km(e,i)}else{if(n==38||no&&n==80&&r=="c")return Z8(e,-1,r)||Km(e,-1);if(n==40||no&&n==78&&r=="c")return F1t(e)||Z8(e,1,r)||Km(e,1);if(r==(no?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ude(e,t){e.someProp("transformCopied",h=>{t=h(t,e)});let n=[],{content:r,openStart:i,openEnd:a}=t;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=e.someProp("clipboardSerializer")||Ml.fromSchema(e.state.schema),o=mde(),l=o.createElement("div");l.appendChild(s.serializeFragment(r,{document:o}));let u=l.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=fde[u.nodeName.toLowerCase()]);){for(let h=c.length-1;h>=0;h--){let m=o.createElement(c[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${a}${d?` -${d}`:""} ${JSON.stringify(n)}`);let p=e.someProp("clipboardTextSerializer",h=>h(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:p,slice:t}}function cde(e,t,n,r,i){let a=i.parent.type.spec.code,s,o;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",p=>{t=p(t,a||r,e)}),a)return t?new Ye(Me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):Ye.empty;let d=e.someProp("clipboardTextParser",p=>p(t,i,r,e));if(d)o=d;else{let p=i.marks(),{schema:h}=e.state,m=Ml.fromSchema(h);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=s.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(h.text(g,p)))})}}else e.someProp("transformPastedHTML",d=>{n=d(n,e)}),s=j1t(n),dx&&H1t(s);let u=s&&s.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(e.someProp("clipboardParser")||e.someProp("domParser")||xy.fromSchema(e.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||c),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!W1t.test(p.parentNode.nodeName)?{ignore:!0}:null}})),c)o=U1t(Y8(o,+c[1],+c[2]),c[4]);else if(o=Ye.maxOpen(V1t(o.content,i),!0),o.openStart||o.openEnd){let d=0,p=0;for(let h=o.content.firstChild;d<o.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=o.content.lastChild;p<o.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);o=Y8(o,d,p)}return e.someProp("transformPasted",d=>{o=d(o,e)}),o}const W1t=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function V1t(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),a,s=[];if(e.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),u;if(!l)return s=null;if(u=s.length&&a.length&&pde(l,a,o,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=hde(s[s.length-1],a.length));let c=dde(o,l);s.push(c),i=i.matchType(c.type),a=l}}),s)return Me.from(s)}return e}function dde(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,Me.from(e));return e}function pde(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let a=pde(e,t,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(Me.from(dde(n,e,i+1))))}}function hde(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,hde(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(Me.empty,!0);return e.copy(n.append(r))}function XM(e,t,n,r,i,a){let s=t<0?e.firstChild:e.lastChild,o=s.content;return e.childCount>1&&(a=0),i<r-1&&(o=XM(o,t,n,r,i+1,a)),i>=n&&(o=t<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(Me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(o))}function Y8(e,t,n){return t<e.openStart&&(e=new Ye(XM(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ye(XM(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const fde={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Q8=null;function mde(){return Q8||(Q8=document.implementation.createHTMLDocument("title"))}function j1t(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=mde().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&fde[r[1].toLowerCase()])&&(e=i.map(a=>"<"+a+">").join("")+e+i.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=e,i)for(let a=0;a<i.length;a++)n=n.querySelector(i[a])||n;return n}function H1t(e){let t=e.querySelectorAll(Ra?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function U1t(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:a,openEnd:s}=e;for(let o=r.length-2;o>=0;o-=2){let l=n.nodes[r[o]];if(!l||l.hasRequiredAttrs())break;i=Me.from(l.create(r[o+1],i)),a++,s++}return new Ye(i,a,s)}const Ha={},Ua={},G1t={touchstart:!0,touchmove:!0};class q1t{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function K1t(e){for(let t in Ha){let n=Ha[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{X1t(e,r)&&!V3(e,r)&&(e.editable||!(r.type in Ua))&&n(e,r)},G1t[t]?{passive:!0}:void 0)}ja&&e.dom.addEventListener("input",()=>null),JM(e)}function Wc(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Z1t(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function JM(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>V3(e,r))})}function V3(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function X1t(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function J1t(e,t){!V3(e,t)&&Ha[t.type]&&(e.editable||!(t.type in Ua))&&Ha[t.type](e,t)}Ua.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!yde(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Lo&&Ra&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Sy&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,_p(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||B1t(e,n)?n.preventDefault():Wc(e,"key")};Ua.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ua.keypress=(e,t)=>{let n=t;if(yde(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||no&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ut)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",a=>a(e,r.$from.pos,r.$to.pos,i))&&e.dispatch(e.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function VT(e){return{left:e.clientX,top:e.clientY}}function Y1t(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function j3(e,t,n,r,i){if(r==-1)return!1;let a=e.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(e.someProp(t,o=>s>a.depth?o(e,n,a.nodeAfter,a.before(s),i,!0):o(e,n,a.node(s),a.before(s),i,!1)))return!0;return!1}function Bg(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);n=="pointer"&&r.setMeta("pointer",!0),e.dispatch(r)}function Q1t(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&It.isSelectable(r)?(Bg(e,new It(n),"pointer"),!0):!1}function ewt(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof It&&(r=n.node);let a=e.state.doc.resolve(t);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(It.isSelectable(o)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?i=a.before(n.$from.depth):i=a.before(s);break}}return i!=null?(Bg(e,It.create(e.state.doc,i),"pointer"),!0):!1}function twt(e,t,n,r,i){return j3(e,"handleClickOn",t,n,r)||e.someProp("handleClick",a=>a(e,t,r))||(i?ewt(e,n):Q1t(e,n))}function nwt(e,t,n,r){return j3(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function rwt(e,t,n,r){return j3(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||iwt(e,n,r)}function iwt(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Bg(e,Ut.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(t);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Bg(e,Ut.create(r,o+1,o+1+s.content.size),"pointer");else if(It.isSelectable(s))Bg(e,It.create(r,o),"pointer");else continue;return!0}}function H3(e){return qI(e)}const gde=no?"metaKey":"ctrlKey";Ha.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=H3(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&Y1t(n,e.input.lastClick)&&!n[gde]&&(e.input.lastClick.type=="singleClick"?a="doubleClick":e.input.lastClick.type=="doubleClick"&&(a="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a};let s=e.posAtCoords(VT(n));!s||(a=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new awt(e,s,n,!!r)):(a=="doubleClick"?nwt:rwt)(e,s.pos,s.inside,n)?n.preventDefault():Wc(e,"pointer"))};class awt{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[gde],this.allowDefault=r.shiftKey;let a,s;if(n.inside>-1)a=t.state.doc.nodeAt(n.inside),s=n.inside;else{let c=t.state.doc.resolve(n.pos);a=c.parent,s=c.depth?c.before():0}const o=i?null:r.target,l=o?t.docView.nearestDesc(o,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=t.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||u instanceof It&&u.from<=s&&u.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&al&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wc(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Tu(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(VT(t))),this.updateAllowDefault(t),this.allowDefault||!n?Wc(this.view,"pointer"):twt(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||ja&&this.mightDrag&&!this.mightDrag.node.isAtom||Ra&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bg(this.view,en.near(this.view.state.doc.resolve(n.pos)),"pointer"),t.preventDefault()):Wc(this.view,"pointer")}move(t){this.updateAllowDefault(t),Wc(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Ha.touchstart=e=>{e.input.lastTouch=Date.now(),H3(e),Wc(e,"pointer")};Ha.touchmove=e=>{e.input.lastTouch=Date.now(),Wc(e,"pointer")};Ha.contextmenu=e=>H3(e);function yde(e,t){return e.composing?!0:ja&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const swt=Lo?5e3:-1;Ua.compositionstart=Ua.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),qI(e,!0),e.markCursor=null;else if(qI(e),al&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){e.domSelection().collapse(s,s.nodeValue.length);break}else i=s,a=-1}}e.input.composing=!0}vde(e,swt)};Ua.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,vde(e,20))};function vde(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>qI(e),t))}function bde(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=lwt());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function owt(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=Qbt(t.focusNode,t.focusOffset),r=e1t(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,a=e.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function lwt(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function qI(e,t=!1){if(!(Lo&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),bde(e),t||e.docView&&e.docView.dirty){let n=B3(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function uwt(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const M1=fs&&nd<15||Sy&&s1t<604;Ha.copy=Ua.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let a=M1?null:n.clipboardData,s=r.content(),{dom:o,text:l}=ude(e,s);a?(n.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):uwt(e,o),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function cwt(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function dwt(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?A1(e,r.value,null,i,t):A1(e,r.textContent,r.innerHTML,i,t)},50)}function A1(e,t,n,r,i){let a=cde(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",l=>l(e,i,a||Ye.empty)))return!0;if(!a)return!1;let s=cwt(a),o=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(a);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wde(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ua.paste=(e,t)=>{let n=t;if(e.composing&&!Lo)return;let r=M1?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&A1(e,wde(r),r.getData("text/html"),i,n)?n.preventDefault():dwt(e,n)};class xde{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const _de=no?"altKey":"ctrlKey";Ha.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,a=i.empty?null:e.posAtCoords(VT(n)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof It?i.to-1:i.to))){if(r&&r.mightDrag)s=It.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=e.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=e.docView&&(s=It.create(e.state.doc,d.posBefore))}}let o=(s||e.state.selection).content(),{dom:l,text:u,slice:c}=ude(e,o);n.dataTransfer.clearData(),n.dataTransfer.setData(M1?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",M1||n.dataTransfer.setData("text/plain",u),e.dragging=new xde(c,!n[_de],s)};Ha.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ua.dragover=Ua.dragenter=(e,t)=>t.preventDefault();Ua.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(VT(n));if(!i)return;let a=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",m=>{s=m(s,e)}):s=cde(e,wde(n.dataTransfer),M1?null:n.dataTransfer.getData("text/html"),!1,a);let o=!!(r&&!n[_de]);if(e.someProp("handleDrop",m=>m(e,n,s||Ye.empty,o))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?Bce(e.state.doc,a.pos,s):a.pos;l==null&&(l=a.pos);let u=e.state.tr;if(o){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let c=u.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=u.doc;if(d?u.replaceRangeWith(c,c,s.content.firstChild):u.replaceRange(c,c,s),u.doc.eq(p))return;let h=u.doc.resolve(c);if(d&&It.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new It(h));else{let m=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((g,y,v,b)=>m=b),u.setSelection(W3(e,h,u.doc.resolve(m)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))};Ha.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Tu(e)},20))};Ha.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Ha.beforeinput=(e,t)=>{if(Ra&&Lo&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",a=>a(e,_p(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ua)Ha[e]=Ua[e];function R1(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class KI{constructor(t,n){this.toDOM=t,this.spec=n||Up,this.side=this.spec.side||0}map(t,n,r,i){let{pos:a,deleted:s}=t.mapResult(n.from+i,this.side<0?-1:1);return s?null:new oo(a-r,a-r,this)}valid(){return!0}eq(t){return this==t||t instanceof KI&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&R1(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class id{constructor(t,n){this.attrs=t,this.spec=n||Up}map(t,n,r,i){let a=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new oo(a,s,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof id&&R1(this.attrs,t.attrs)&&R1(this.spec,t.spec)}static is(t){return t.type instanceof id}destroy(){}}class U3{constructor(t,n){this.attrs=t,this.spec=n||Up}map(t,n,r,i){let a=t.mapResult(n.from+i,1);if(a.deleted)return null;let s=t.mapResult(n.to+i,-1);return s.deleted||s.pos<=a.pos?null:new oo(a.pos-r,s.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),a;return i==n.from&&!(a=t.child(r)).isText&&i+a.nodeSize==n.to}eq(t){return this==t||t instanceof U3&&R1(this.attrs,t.attrs)&&R1(this.spec,t.spec)}destroy(){}}class oo{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new oo(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new oo(t,t,new KI(n,r))}static inline(t,n,r,i){return new oo(t,n,new id(r,i))}static node(t,n,r,i){return new oo(t,n,new U3(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof id}get widget(){return this.type instanceof KI}}const ng=[],Up={};class hi{constructor(t,n){this.local=t.length?t:ng,this.children=n.length?n:ng}static create(t,n){return n.length?ZI(n,t,0,Up):ua}find(t,n,r){let i=[];return this.findInner(t==null?0:t,n==null?1e9:n,i,0,r),i}findInner(t,n,r,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=n&&o.to>=t&&(!a||a(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>t){let o=this.children[s]+1;this.children[s+2].findInner(t-o,n-o,r,i+o,a)}}map(t,n,r){return this==ua||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Up)}mapInner(t,n,r,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(t,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?pwt(this.children,s||[],t,n,r,i,a):s?new hi(s.sort(Gp),ng):ua}add(t,n){return n.length?this==ua?hi.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,a=0;t.forEach((o,l)=>{let u=l+r,c;if(!!(c=Sde(n,o,u))){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,c,u+1):i.splice(a,0,l,l+o.nodeSize,ZI(c,o,u+1,Up)),a+=3}});let s=kde(a?Cde(n):n,-r);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||s.splice(o--,1);return new hi(s.length?this.local.concat(s).sort(Gp):this.local,i||this.children)}remove(t){return t.length==0||this==ua?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let s,o=r[a]+n,l=r[a+1]+n;for(let c=0,d;c<t.length;c++)(d=t[c])&&d.from>o&&d.to<l&&(t[c]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[a+2].removeInner(s,o+1);u!=ua?r[a+2]=u:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<t.length;a++)if(s=t[a])for(let o=0;o<i.length;o++)i[o].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new hi(i,r):ua}forChild(t,n){if(this==ua)return this;if(n.isLeaf)return hi.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(r=this.children[o+2]);break}let a=t+1,s=a+n.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof id){let u=Math.max(a,l.from)-a,c=Math.min(s,l.to)-a;u<c&&(i||(i=[])).push(l.copy(u,c))}}if(i){let o=new hi(i.sort(Gp),ng);return r?new Oc([o,r]):o}return r||ua}eq(t){if(this==t)return!0;if(!(t instanceof hi)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return G3(this.localsInner(t))}localsInner(t){if(this==ua)return ng;if(t.inlineContent||!this.local.some(id.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof id||n.push(this.local[r]);return n}}hi.empty=new hi([],[]);hi.removeOverlap=G3;const ua=hi.empty;class Oc{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Up));return Oc.from(r)}forChild(t,n){if(n.isLeaf)return hi.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(t,n);a!=ua&&(a instanceof Oc?r=r.concat(a.members):r.push(a))}return Oc.from(r)}eq(t){if(!(t instanceof Oc)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(t);if(!!a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let s=0;s<a.length;s++)n.push(a[s])}}return n?G3(r?n:n.sort(Gp)):ng}static from(t){switch(t.length){case 0:return ua;case 1:return t[0];default:return new Oc(t.every(n=>n instanceof hi)?t:t.reduce((n,r)=>n.concat(r instanceof hi?r:r.members),[]))}}}function pwt(e,t,n,r,i,a,s){let o=e.slice();for(let u=0,c=a;u<n.maps.length;u++){let d=0;n.maps[u].forEach((p,h,m,g)=>{let y=g-m-(h-p);for(let v=0;v<o.length;v+=3){let b=o[v+1];if(b<0||p>b+c-d)continue;let _=o[v]+c-d;h>=_?o[v+1]=p<=_?-2:-1:p>=c&&y&&(o[v]+=y,o[v+1]+=y)}d+=y}),c=n.maps[u].map(c,-1)}let l=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){l=!0,o[u+1]=-1;continue}let c=n.map(e[u]+a),d=c-i;if(d<0||d>=r.content.size){l=!0;continue}let p=n.map(e[u+1]+a,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(d),y=r.maybeChild(m);if(y&&g==d&&g+y.nodeSize==h){let v=o[u+2].mapInner(n,y,c+1,e[u]+a+1,s);v!=ua?(o[u]=d,o[u+1]=h,o[u+2]=v):(o[u+1]=-2,l=!0)}else l=!0}if(l){let u=hwt(o,e,t,n,i,a,s),c=ZI(u,r,0,s);t=c.local;for(let d=0;d<o.length;d+=3)o[d+1]<0&&(o.splice(d,3),d-=3);for(let d=0,p=0;d<c.children.length;d+=3){let h=c.children[d];for(;p<o.length&&o[p]<h;)p+=3;o.splice(p,0,c.children[d],c.children[d+1],c.children[d+2])}}return new hi(t.sort(Gp),o)}function kde(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new oo(i.from+t,i.to+t,i.type))}return n}function hwt(e,t,n,r,i,a,s){function o(l,u){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(r,i,u);d?n.push(d):s.onRemove&&s.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)o(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<e.length;l+=3)e[l+1]==-1&&o(e[l+2],t[l]+a+1);return n}function Sde(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let a=0,s;a<e.length;a++)(s=e[a])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),e[a]=null);return i}function Cde(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function ZI(e,t,n,r){let i=[],a=!1;t.forEach((o,l)=>{let u=Sde(e,o,l+n);if(u){a=!0;let c=ZI(u,o,n+l+1,r);c!=ua&&i.push(l,l+o.nodeSize,c)}});let s=kde(a?Cde(e):e,-n).sort(Gp);for(let o=0;o<s.length;o++)s[o].type.valid(t,s[o])||(r.onRemove&&r.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new hi(s,i):ua}function Gp(e,t){return e.from-t.from||e.to-t.to}function G3(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let a=t[i];if(a.from==r.from){a.to!=r.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,r.to),eG(t,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,a.from),eG(t,i,r.copy(a.from,r.to)));break}}}return t}function eG(e,t,n){for(;t<e.length&&Gp(n,e[t])>0;)t++;e.splice(t,0,n)}function KE(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=ua&&t.push(r)}),e.cursorWrapper&&t.push(hi.create(e.state.doc,[e.cursorWrapper.deco])),Oc.from(t)}const fwt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mwt=fs&&nd<=11;class gwt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class ywt{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gwt,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);fs&&nd<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mwt&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fwt)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(!!G8(this.view)){if(this.suppressingSelectionUpdates)return Tu(this.view);if(fs&&nd<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&$h(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let a=t.focusNode;a;a=P1(a))n.add(a);for(let a=t.anchorNode;a;a=P1(a))if(n.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&G8(t)&&!this.ignoreSelectionChange(r),a=-1,s=-1,o=!1,l=[];if(t.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],l);d&&(a=a<0?d.from:Math.min(d.from,a),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(o=!0))}if(al&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,p]=c;d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let p of c){let h=p.parentNode;h&&h.nodeName=="LI"&&(!d||wwt(t,d)!=h)&&p.remove()}}}let u=null;a<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&BT(r)&&(u=B3(t))&&u.eq(en.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Tu(t),this.currentSelection.set(r),t.scrollToSelection()):(a>-1||i)&&(a>-1&&(t.docView.markDirty(a,s),vwt(t)),this.handleDOMChange(a,s,o,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Tu(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let c=0;c<t.addedNodes.length;c++){let d=t.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,a=t.nextSibling;if(fs&&nd<=11&&t.addedNodes.length)for(let c=0;c<t.addedNodes.length;c++){let{previousSibling:d,nextSibling:p}=t.addedNodes[c];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==t.target?Ki(i)+1:0,o=r.localPosFromDOM(t.target,s,-1),l=a&&a.parentNode==t.target?Ki(a):t.target.childNodes.length,u=r.localPosFromDOM(t.target,l,1);return{from:o,to:u}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let tG=new WeakMap,nG=!1;function vwt(e){if(!tG.has(e)&&(tG.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=al,nG)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),nG=!0}}function rG(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,a=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return $h(s.node,s.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function bwt(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return rG(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?rG(e,n):null}function wwt(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xwt(e,t,n){let{node:r,fromOffset:i,toOffset:a,from:s,to:o}=e.docView.parseRange(t,n),l=e.domSelectionRange(),u,c=l.anchorNode;if(c&&e.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],BT(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Ra&&e.input.lastKeyCode===8)for(let y=a;y>i;y--){let v=r.childNodes[y-1],b=v.pmViewDesc;if(v.nodeName=="BR"&&!b){a=y;break}if(!b||b.size)break}let d=e.state.doc,p=e.someProp("domParser")||xy.fromSchema(e.state.schema),h=d.resolve(s),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:a,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:_wt,context:h});if(u&&u[0].pos!=null){let y=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=y),m={anchor:y+s,head:v+s}}return{doc:g,sel:m,from:s,to:o}}function _wt(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(ja&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||ja&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const kwt=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Swt(e,t,n,r,i){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let D=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,O=B3(e,D);if(O&&!e.state.selection.eq(O)){if(Ra&&Lo&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",E=>E(e,_p(13,"Enter"))))return;let F=e.state.tr.setSelection(O);D=="pointer"?F.setMeta("pointer",!0):D=="key"&&F.scrollIntoView(),a&&F.setMeta("composition",a),e.dispatch(F)}return}let s=e.state.doc.resolve(t),o=s.sharedDepth(n);t=s.before(o+1),n=e.state.doc.resolve(n).after(o+1);let l=e.state.selection,u=xwt(e,t,n),c=e.state.doc,d=c.slice(u.from,u.to),p,h;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(p=e.state.selection.to,h="end"):(p=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let m=$wt(d.content,u.doc.content,u.from,p,h);if((Sy&&e.input.lastIOSEnter>Date.now()-225||Lo)&&i.some(D=>D.nodeType==1&&!kwt.test(D.nodeName))&&(!m||m.endA>=m.endB)&&e.someProp("handleKeyDown",D=>D(e,_p(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Ut&&!l.empty&&l.$head.sameParent(l.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let D=iG(e,e.state.doc,u.sel);if(D&&!D.eq(e.state.selection)){let O=e.state.tr.setSelection(D);a&&O.setMeta("composition",a),e.dispatch(O)}}return}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&m.start==m.endB&&e.state.selection instanceof Ut&&(m.start>e.state.selection.from&&m.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?m.start=e.state.selection.from:m.endA<e.state.selection.to&&m.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(m.endB+=e.state.selection.to-m.endA,m.endA=e.state.selection.to)),fs&&nd<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" \xA0"&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),y=u.doc.resolveNoCache(m.endB-u.from),v=c.resolve(m.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=m.endA,_;if((Sy&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!b&&g.pos<u.doc.content.size&&!g.sameParent(y)&&(_=en.findFrom(u.doc.resolve(g.pos+1),1,!0))&&_.head==y.pos)&&e.someProp("handleKeyDown",D=>D(e,_p(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>m.start&&Iwt(c,m.start,m.endA,g,y)&&e.someProp("handleKeyDown",D=>D(e,_p(8,"Backspace")))){Lo&&Ra&&e.domObserver.suppressSelectionUpdates();return}Ra&&Lo&&m.endB==m.start&&(e.input.lastAndroidDelete=Date.now()),Lo&&!b&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,y=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(D){return D(e,_p(13,"Enter"))})},20));let k=m.start,S=m.endA,$,N,P;if(b){if(g.pos==y.pos)fs&&nd<=11&&g.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Tu(e),20)),$=e.state.tr.delete(k,S),N=c.resolve(m.start).marksAcross(c.resolve(m.endA));else if(m.endA==m.endB&&(P=Cwt(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start()))))$=e.state.tr,P.type=="add"?$.addMark(k,S,P.mark):$.removeMark(k,S,P.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let D=g.parent.textBetween(g.parentOffset,y.parentOffset);if(e.someProp("handleTextInput",O=>O(e,k,S,D)))return;$=e.state.tr.insertText(D,k,S)}}if($||($=e.state.tr.replace(k,S,u.doc.slice(m.start-u.from,m.endB-u.from))),u.sel){let D=iG(e,$.doc,u.sel);D&&!(Ra&&Lo&&e.composing&&D.empty&&(m.start!=m.endB||e.input.lastAndroidDelete<Date.now()-100)&&(D.head==k||D.head==$.mapping.map(S)-1)||fs&&D.empty&&D.head==k)&&$.setSelection(D)}N&&$.ensureMarks(N),a&&$.setMeta("composition",a),e.dispatch($.scrollIntoView())}function iG(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:W3(e,t.resolve(n.anchor),t.resolve(n.head))}function Cwt(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,a=r,s,o,l;for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);for(let c=0;c<n.length;c++)a=n[c].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=c=>c.mark(o.addToSet(c.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=c=>c.mark(o.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<t.childCount;c++)u.push(l(t.child(c)));if(Me.from(u).eq(e))return{mark:o,type:s}}function Iwt(e,t,n,r,i){if(n-t<=i.pos-r.pos||ZE(r,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!r.parent.isTextblock){let o=a.nodeAfter;return o!=null&&n==t+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=e.resolve(ZE(a,!0,!0));return!s.parent.isTextblock||s.pos>n||ZE(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ZE(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let a=e.node(r).maybeChild(e.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function $wt(e,t,n,r,i){let a=e.findDiffStart(t,n);if(a==null)return null;let{a:s,b:o}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));r-=s+l-a}if(s<a&&e.size<t.size){let l=r<=a&&r>=s?a-r:0;a-=l,a&&a<t.size&&aG(t.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=r<=a&&r>=o?a-r:0;a-=l,a&&a<e.size&&aG(e.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function aG(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Twt{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new q1t,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(cG),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=lG(this),oG(this),this.nodeViews=uG(this),this.docView=B8(this.state.doc,sG(this),KE(this),this.dom,this),this.domObserver=new ywt(this,(r,i,a,s)=>Swt(this,r,i,a,s)),this.domObserver.start(),K1t(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&JM(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(cG),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,a=!1,s=!1;t.storedMarks&&this.composing&&(bde(this),s=!0),this.state=t;let o=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=uG(this);Ewt(h,this.nodeViews)&&(this.nodeViews=h,a=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&JM(this),this.editable=lG(this),oG(this);let l=KE(this),u=sG(this),c=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=a||!this.docView.matchesNode(t.doc,u,l);(d||!t.selection.eq(i.selection))&&(s=!0);let p=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&u1t(this);if(s){this.domObserver.stop();let h=d&&(fs||Ra)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&Nwt(i.selection,t.selection);if(d){let m=Ra?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=owt(this)),(a||!this.docView.update(t.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=B8(t.doc,u,l,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&M1t(this))?Tu(this,h):(sde(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),((r=this.dragging)===null||r===void 0?void 0:r.node)&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():p&&c1t(p)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof It){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&A8(this,n.getBoundingClientRect(),t)}else A8(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new xde(t.slice,t.move,i<0?void 0:It.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[t];if(o!=null&&(i=n?n(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[t];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(fs){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&d1t(this.dom),Tu(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return g1t(this,t)}coordsAtPos(t,n=1){return Yce(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return x1t(this,n||this.state,t)}pasteHTML(t,n){return A1(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return A1(this,t,null,!0,n||new ClipboardEvent("paste"))}destroy(){!this.docView||(Z1t(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],KE(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Jbt())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return J1t(this,t)}dispatch(t){let n=this._props.dispatchTransaction;n?n.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return ja&&this.root.nodeType===11&&n1t(this.dom.ownerDocument)==this.dom&&bwt(this,t)||t}domSelection(){return this.root.getSelection()}}function sG(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[oo.node(0,e.state.doc.content.size,t)]}function oG(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:oo.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function lG(e){return!e.someProp("editable",t=>t(e.state)===!1)}function Nwt(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function uG(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Ewt(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function cG(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var kd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},XI={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Owt=typeof navigator<"u"&&/Mac/.test(navigator.platform),Pwt=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zi=0;Zi<10;Zi++)kd[48+Zi]=kd[96+Zi]=String(Zi);for(var Zi=1;Zi<=24;Zi++)kd[Zi+111]="F"+Zi;for(var Zi=65;Zi<=90;Zi++)kd[Zi]=String.fromCharCode(Zi+32),XI[Zi]=String.fromCharCode(Zi);for(var XE in kd)XI.hasOwnProperty(XE)||(XI[XE]=kd[XE]);function Mwt(e){var t=Owt&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Pwt&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?XI:kd)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Awt=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Rwt(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<t.length-1;o++){let l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))Awt?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function Dwt(e){let t=Object.create(null);for(let n in e)t[Rwt(n)]=e[n];return t}function JE(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Lwt(e){return new Ks({props:{handleKeyDown:Ide(e)}})}function Ide(e){let t=Dwt(e);return function(n,r){let i=Mwt(r),a,s=t[JE(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=t[JE(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(a=kd[r.keyCode])&&a!=i){let o=t[JE(a,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}const Fwt=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function $de(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const zwt=(e,t,n)=>{let r=$de(e,n);if(!r)return!1;let i=q3(r);if(!i){let s=r.blockRange(),o=s&&p0(s);return o==null?!1:(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(!a.type.spec.isolating&&Ode(e,i,t))return!0;if(r.parent.content.size==0&&(Cy(a,"end")||It.isSelectable(a))){let s=FT(e.doc,r.before(),r.after(),Ye.empty);if(s&&s.slice.size<s.to-s.from){if(t){let o=e.tr.step(s);o.setSelection(Cy(a,"end")?en.findFrom(o.doc.resolve(o.mapping.map(i.pos,-1)),-1):It.create(o.doc,i.pos-a.nodeSize)),t(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},Bwt=(e,t,n)=>{let r=$de(e,n);if(!r)return!1;let i=q3(r);return i?Tde(e,i,t):!1},Wwt=(e,t,n)=>{let r=Nde(e,n);if(!r)return!1;let i=K3(r);return i?Tde(e,i,t):!1};function Tde(e,t,n){let r=t.nodeBefore,i=r,a=t.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let c=i.lastChild;if(!c)return!1;i=c}let s=t.nodeAfter,o=s,l=t.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let c=o.firstChild;if(!c)return!1;o=c}let u=FT(e.doc,a,l,Ye.empty);if(!u||u.from!=a||u instanceof Ti&&u.slice.size>=l-a)return!1;if(n){let c=e.tr.step(u);c.setSelection(Ut.create(c.doc,a)),n(c.scrollIntoView())}return!0}function Cy(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Vwt=(e,t,n)=>{let{$head:r,empty:i}=e.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;a=q3(r)}let s=a&&a.nodeBefore;return!s||!It.isSelectable(s)?!1:(t&&t(e.tr.setSelection(It.create(e.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function q3(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Nde(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const jwt=(e,t,n)=>{let r=Nde(e,n);if(!r)return!1;let i=K3(r);if(!i)return!1;let a=i.nodeAfter;if(Ode(e,i,t))return!0;if(r.parent.content.size==0&&(Cy(a,"start")||It.isSelectable(a))){let s=FT(e.doc,r.before(),r.after(),Ye.empty);if(s&&s.slice.size<s.to-s.from){if(t){let o=e.tr.step(s);o.setSelection(Cy(a,"start")?en.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):It.create(o.doc,o.mapping.map(i.pos))),t(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},Hwt=(e,t,n)=>{let{$head:r,empty:i}=e.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;a=K3(r)}let s=a&&a.nodeAfter;return!s||!It.isSelectable(s)?!1:(t&&t(e.tr.setSelection(It.create(e.doc,a.pos)).scrollIntoView()),!0)};function K3(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Uwt=(e,t)=>{let n=e.selection,r=n instanceof It,i;if(r){if(n.node.isTextblock||!Kd(e.doc,n.from))return!1;i=n.from}else if(i=LT(e.doc,n.from,-1),i==null)return!1;if(t){let a=e.tr.join(i);r&&a.setSelection(It.create(a.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},Gwt=(e,t)=>{let n=e.selection,r;if(n instanceof It){if(n.node.isTextblock||!Kd(e.doc,n.to))return!1;r=n.to}else if(r=LT(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},qwt=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),a=i&&p0(i);return a==null?!1:(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},Kwt=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Ede(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Zwt=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),a=n.indexAfter(-1),s=Ede(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(t){let o=n.after(),l=e.tr.replaceWith(o,o,s.createAndFill());l.setSelection(en.near(l.doc.resolve(o),1)),t(l.scrollIntoView())}return!0},Xwt=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Uo||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=Ede(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=e.tr.insert(s,a.createAndFill());o.setSelection(Ut.create(o.doc,s+1)),t(o.scrollIntoView())}return!0},Jwt=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(Fg(e.doc,a))return t&&t(e.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),i=r&&p0(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},Ywt=(e,t)=>{let{$from:n,to:r}=e.selection,i,a=n.sharedDepth(r);return a==0?!1:(i=n.before(a),t&&t(e.tr.setSelection(It.create(e.doc,i))),!0)};function Qwt(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,a=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(a-1,a)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(i.isTextblock||Kd(e.doc,t.pos))?!1:(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0)}function Ode(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,a,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Qwt(e,t,n))return!0;let o=t.parent.canReplace(t.index(),t.index()+1);if(o&&(a=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(a[0]||i.type).validEnd){if(n){let d=t.pos+i.nodeSize,p=Me.empty;for(let g=a.length-1;g>=0;g--)p=Me.from(a[g].create(null,p));p=Me.from(r.copy(p));let h=e.tr.step(new Ai(t.pos-1,d,t.pos,d,new Ye(p,1,0),a.length,!0)),m=d+2*a.length;Kd(h.doc,m)&&h.join(m),n(h.scrollIntoView())}return!0}let l=en.findFrom(t,1),u=l&&l.$from.blockRange(l.$to),c=u&&p0(u);if(c!=null&&c>=t.depth)return n&&n(e.tr.lift(u,c).scrollIntoView()),!0;if(o&&Cy(i,"start",!0)&&Cy(r,"end")){let d=r,p=[];for(;p.push(d),!d.isTextblock;)d=d.lastChild;let h=i,m=1;for(;!h.isTextblock;h=h.firstChild)m++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(n){let g=Me.empty;for(let v=p.length-1;v>=0;v--)g=Me.from(p[v].copy(g));let y=e.tr.step(new Ai(t.pos-p.length,t.pos+i.nodeSize,t.pos+m,t.pos+i.nodeSize-m,new Ye(g,p.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function Pde(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(n&&n(t.tr.setSelection(Ut.create(t.doc,e<0?i.start(a):i.end(a)))),!0):!1}}const ext=Pde(-1),txt=Pde(1);function nxt(e,t=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a),o=s&&L3(s,e,t);return o?(r&&r(n.tr.wrap(s,o).scrollIntoView()),!0):!1}}function dG(e,t=null){return function(n,r){let i=!1;for(let a=0;a<n.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[a];n.doc.nodesBetween(s,o,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(e,t)))if(l.type==e)i=!0;else{let c=n.doc.resolve(u),d=c.index();i=c.parent.canReplaceWith(d,d+1,e)}})}if(!i)return!1;if(r){let a=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];a.setBlockType(o,l,e,t)}r(a.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function rxt(e,t=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a),o=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(e)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let c=n.doc.resolve(s.start-2);l=new WI(c,c,s.depth),s.endIndex<s.parent.childCount&&(s=new WI(i,n.doc.resolve(a.end(s.depth)),s.depth)),o=!0}let u=L3(l,e,t,s);return u?(r&&r(ixt(n.tr,s,u,o,e).scrollIntoView()),!0):!1}}function ixt(e,t,n,r,i){let a=Me.empty;for(let c=n.length-1;c>=0;c--)a=Me.from(n[c].type.create(n[c].attrs,a));e.step(new Ai(t.start-(r?2:0),t.end,t.start,t.end,new Ye(a,0,0),n.length,!0));let s=0;for(let c=0;c<n.length;c++)n[c].type==i&&(s=c+1);let o=n.length-s,l=t.start+n.length-(r?2:0),u=t.parent;for(let c=t.startIndex,d=t.endIndex,p=!0;c<d;c++,p=!1)!p&&Fg(e.doc,l,o)&&(e.split(l,o),l+=2*o),l+=u.child(c).nodeSize;return e}function axt(e){return function(t,n){let{$from:r,$to:i}=t.selection,a=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==e);return a?n?r.node(a.depth-1).type==e?sxt(t,n,e,a):oxt(t,n,a):!0:!1}}function sxt(e,t,n,r){let i=e.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(i.step(new Ai(a-1,s,a,s,new Ye(Me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new WI(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const o=p0(r);if(o==null)return!1;i.lift(r,o);let l=i.mapping.map(a,-1)-1;return Kd(i.doc,l)&&i.join(l),t(i.scrollIntoView()),!0}function oxt(e,t,n){let r=e.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let a=r.doc.resolve(n.start),s=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,l=n.endIndex==i.childCount,u=a.node(-1),c=a.index(-1);if(!u.canReplace(c+(o?0:1),c+1,s.content.append(l?Me.empty:Me.from(i))))return!1;let d=a.pos,p=d+s.nodeSize;return r.step(new Ai(d-(o?1:0),p+(l?1:0),d+1,p-1,new Ye((o?Me.empty:Me.from(i.copy(Me.empty))).append(l?Me.empty:Me.from(i.copy(Me.empty))),o?0:1,l?0:1),o?0:1)),t(r.scrollIntoView()),!0}function lxt(e){return function(t,n){let{$from:r,$to:i}=t.selection,a=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==e);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=e)return!1;if(n){let u=l.lastChild&&l.lastChild.type==o.type,c=Me.from(u?e.create():null),d=new Ye(Me.from(e.create(null,Me.from(o.type.create(null,c)))),u?3:1,0),p=a.start,h=a.end;n(t.tr.step(new Ai(p-(u?3:1),h,p,h,d,1,!0)).scrollIntoView())}return!0}}function jT(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}class HT{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:i}=n,{tr:a}=r,s=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...c)=>{const d=l(...c)(s);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:i,state:a}=this,{view:s}=i,o=[],l=!!t,u=t||a.tr,c=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...g)=>{const y=this.buildProps(u,n),v=h(...g)(y);return o.push(v),d}])),run:c};return d}createCan(t){const{rawCommands:n,state:r}=this,i=!1,a=t||r.tr,s=this.buildProps(a,i);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...c)=>u(...c)({...s,dispatch:void 0})])),chain:()=>this.createChain(a,i)}}buildProps(t,n=!0){const{rawCommands:r,editor:i,state:a}=this,{view:s}=i,o={tr:t,editor:i,view:s,state:jT({state:a,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t,n),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...c)=>u(...c)(o)]))}};return o}}class uxt{constructor(){this.callbacks={}}on(t,n){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(n),this}emit(t,...n){const r=this.callbacks[t];return r&&r.forEach(i=>i.apply(this,n)),this}off(t,n){const r=this.callbacks[t];return r&&(n?this.callbacks[t]=r.filter(i=>i!==n):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function pt(e,t,n){return e.config[t]===void 0&&e.parent?pt(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?pt(e.parent,t,n):null}):e.config[t]}function UT(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Mde(e){const t=[],{nodeExtensions:n,markExtensions:r}=UT(e),i=[...n,...r],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=pt(s,"addGlobalAttributes",o);if(!l)return;l().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([p,h])=>{t.push({type:d,name:p,attribute:{...a,...h}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=pt(s,"addAttributes",o);if(!l)return;const u=l();Object.entries(u).forEach(([c,d])=>{const p={...a,...d};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),(p==null?void 0:p.isRequired)&&(p==null?void 0:p.default)===void 0&&delete p.default,t.push({type:s.name,name:c,attribute:p})})}),t}function Li(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function pr(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const o=a?a.split(" "):[],l=r[i]?r[i].split(" "):[],u=o.filter(c=>!l.includes(c));r[i]=[...l,...u].join(" ")}else i==="style"?r[i]=[r[i],a].join("; "):r[i]=a}),r},{})}function YM(e,t){return t.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>pr(n,r),{})}function Ade(e){return typeof e=="function"}function Qt(e,t=void 0,...n){return Ade(e)?t?e.bind(t)(...n):e(...n):e}function cxt(e={}){return Object.keys(e).length===0&&e.constructor===Object}function dxt(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function pG(e,t){return e.style?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(n):dxt(n.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...r,...i}}}}function hG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&cxt(n)?!1:n!=null))}function pxt(e,t){var n;const r=Mde(e),{nodeExtensions:i,markExtensions:a}=UT(e),s=(n=i.find(u=>pt(u,"topNode")))===null||n===void 0?void 0:n.name,o=Object.fromEntries(i.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},p=e.reduce((v,b)=>{const _=pt(b,"extendNodeSchema",d);return{...v,..._?_(u):{}}},{}),h=hG({...p,content:Qt(pt(u,"content",d)),marks:Qt(pt(u,"marks",d)),group:Qt(pt(u,"group",d)),inline:Qt(pt(u,"inline",d)),atom:Qt(pt(u,"atom",d)),selectable:Qt(pt(u,"selectable",d)),draggable:Qt(pt(u,"draggable",d)),code:Qt(pt(u,"code",d)),defining:Qt(pt(u,"defining",d)),isolating:Qt(pt(u,"isolating",d)),attrs:Object.fromEntries(c.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),m=Qt(pt(u,"parseHTML",d));m&&(h.parseDOM=m.map(v=>pG(v,c)));const g=pt(u,"renderHTML",d);g&&(h.toDOM=v=>g({node:v,HTMLAttributes:YM(v,c)}));const y=pt(u,"renderText",d);return y&&(h.toText=y),[u.name,h]})),l=Object.fromEntries(a.map(u=>{const c=r.filter(y=>y.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:t},p=e.reduce((y,v)=>{const b=pt(v,"extendMarkSchema",d);return{...y,...b?b(u):{}}},{}),h=hG({...p,inclusive:Qt(pt(u,"inclusive",d)),excludes:Qt(pt(u,"excludes",d)),group:Qt(pt(u,"group",d)),spanning:Qt(pt(u,"spanning",d)),code:Qt(pt(u,"code",d)),attrs:Object.fromEntries(c.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),m=Qt(pt(u,"parseHTML",d));m&&(h.parseDOM=m.map(y=>pG(y,c)));const g=pt(u,"renderHTML",d);return g&&(h.toDOM=y=>g({mark:y,HTMLAttributes:YM(y,c)})),[u.name,h]}));return new mbt({topNode:s,nodes:o,marks:l})}function YE(e,t){return t.nodes[e]||t.marks[e]||null}function fG(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}const hxt=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,a,s,o)=>{var l,u;const c=((u=(l=i.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";n+=c.slice(0,Math.max(0,r-a))}),n};function Z3(e){return Object.prototype.toString.call(e)==="[object RegExp]"}class GT{constructor(t){this.find=t.find,this.handler=t.handler}}const fxt=(e,t)=>{if(Z3(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function W_(e){var t;const{editor:n,from:r,to:i,text:a,rules:s,plugin:o}=e,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!!(!((t=u.nodeBefore||u.nodeAfter)===null||t===void 0)&&t.marks.find(p=>p.type.spec.code)))return!1;let c=!1;const d=hxt(u)+a;return s.forEach(p=>{if(c)return;const h=fxt(d,p.find);if(!h)return;const m=l.state.tr,g=jT({state:l.state,transaction:m}),y={from:r-(h[0].length-a.length),to:i},{commands:v,chain:b,can:_}=new HT({editor:n,state:g});p.handler({state:g,range:y,match:h,commands:v,chain:b,can:_})===null||!m.steps.length||(m.setMeta(o,{transform:m,from:r,to:i,text:a}),l.dispatch(m),c=!0)}),c}function mxt(e){const{editor:t,rules:n}=e,r=new Ks({state:{init(){return null},apply(i,a){const s=i.getMeta(r);if(s)return s;const o=i.getMeta("applyInputRules");return!!o&&setTimeout(()=>{const{from:u,text:c}=o,d=u+c.length;W_({editor:t,from:u,to:d,text:c,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return W_({editor:t,from:a,to:s,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&W_({editor:t,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?W_({editor:t,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function gxt(e){return typeof e=="number"}class yxt{constructor(t){this.find=t.find,this.handler=t.handler}}const vxt=(e,t,n)=>{if(Z3(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=e,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function bxt(e){const{editor:t,state:n,from:r,to:i,rule:a,pasteEvent:s,dropEvent:o}=e,{commands:l,chain:u,can:c}=new HT({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const g=Math.max(r,m),y=Math.min(i,m+h.content.size),v=h.textBetween(g-m,y-m,void 0,"\uFFFC");vxt(v,a.find,s).forEach(_=>{if(_.index===void 0)return;const k=g+_.index+1,S=k+_[0].length,$={from:n.tr.mapping.map(k),to:n.tr.mapping.map(S)},N=a.handler({state:n,range:$,match:_,commands:l,chain:u,can:c,pasteEvent:s,dropEvent:o});d.push(N)})}),d.every(h=>h!==null)}const wxt=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)===null||t===void 0||t.setData("text/html",e),n};function xxt(e){const{editor:t,rules:n}=e;let r=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:c,from:d,to:p,rule:h,pasteEvt:m})=>{const g=c.tr,y=jT({state:c,transaction:g});if(!(!bxt({editor:t,state:y,from:Math.max(d-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:o})||!g.steps.length))return o=typeof DragEvent<"u"?new DragEvent("drop"):null,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g};return n.map(c=>new Ks({view(d){const p=h=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(h.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",p),{destroy(){window.removeEventListener("dragstart",p)}}},props:{handleDOMEvents:{drop:(d,p)=>(a=r===d.dom.parentElement,o=p,!1),paste:(d,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,p,h)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!a,v=m.getMeta("applyPasteRules"),b=!!v;if(!g&&!y&&!b)return;if(b){const{from:S,text:$}=v,N=S+$.length,P=wxt($);return l({rule:c,state:h,from:S,to:{b:N},pasteEvt:P})}const _=p.doc.content.findDiffStart(h.doc.content),k=p.doc.content.findDiffEnd(h.doc.content);if(!(!gxt(_)||!k||_===k.b))return l({rule:c,state:h,from:_,to:k,pasteEvt:s})}}))}function _xt(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return[...new Set(t)]}class vg{constructor(t,n){this.splittableMarks=[],this.editor=n,this.extensions=vg.resolve(t),this.schema=pxt(this.extensions,n),this.setupExtensions()}static resolve(t){const n=vg.sort(vg.flatten(t)),r=_xt(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=pt(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(t){return t.sort((r,i)=>{const a=pt(r,"priority")||100,s=pt(i,"priority")||100;return a>s?-1:a<s?1:0})}get commands(){return this.extensions.reduce((t,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:YE(n.name,this.schema)},i=pt(n,"addCommands",r);return i?{...t,...i()}:t},{})}get plugins(){const{editor:t}=this,n=vg.sort([...this.extensions].reverse()),r=[],i=[],a=n.map(s=>{const o={name:s.name,options:s.options,storage:s.storage,editor:t,type:YE(s.name,this.schema)},l=[],u=pt(s,"addKeyboardShortcuts",o);let c={};if(s.type==="mark"&&s.config.exitable&&(c.ArrowRight=()=>Ga.handleExit({editor:t,mark:s})),u){const g=Object.fromEntries(Object.entries(u()).map(([y,v])=>[y,()=>v({editor:t})]));c={...c,...g}}const d=Lwt(c);l.push(d);const p=pt(s,"addInputRules",o);fG(s,t.options.enableInputRules)&&p&&r.push(...p());const h=pt(s,"addPasteRules",o);fG(s,t.options.enablePasteRules)&&h&&i.push(...h());const m=pt(s,"addProseMirrorPlugins",o);if(m){const g=m();l.push(...g)}return l}).flat();return[mxt({editor:t,rules:r}),...xxt({editor:t,rules:i}),...a]}get attributes(){return Mde(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:n}=UT(this.extensions);return Object.fromEntries(n.filter(r=>!!pt(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),a={name:r.name,options:r.options,storage:r.storage,editor:t,type:Li(r.name,this.schema)},s=pt(r,"addNodeView",a);if(!s)return[];const o=(l,u,c,d)=>{const p=YM(l,i);return s()({editor:t,node:l,getPos:c,decorations:d,HTMLAttributes:p,extension:r})};return[r.name,o]}))}setupExtensions(){this.extensions.forEach(t=>{var n;this.editor.extensionStorage[t.name]=t.storage;const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:YE(t.name,this.schema)};t.type==="mark"&&((n=Qt(pt(t,"keepOnSplit",r)))!==null&&n!==void 0?n:!0)&&this.splittableMarks.push(t.name);const i=pt(t,"onBeforeCreate",r),a=pt(t,"onCreate",r),s=pt(t,"onUpdate",r),o=pt(t,"onSelectionUpdate",r),l=pt(t,"onTransaction",r),u=pt(t,"onFocus",r),c=pt(t,"onBlur",r),d=pt(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}}function kxt(e){return Object.prototype.toString.call(e).slice(8,-1)}function QE(e){return kxt(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function qT(e,t){const n={...e};return QE(e)&&QE(t)&&Object.keys(t).forEach(r=>{QE(t[r])?r in e?n[r]=qT(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}class xa{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(pt(this,"addOptions",{name:this.name}))),this.storage=Qt(pt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new xa(t)}configure(t={}){const n=this.extend();return n.parent=this.parent,n.options=qT(this.options,t),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new xa({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(pt(n,"addOptions",{name:n.name})),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}}function Rde(e,t,n){const{from:r,to:i}=t,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let o="";return e.nodesBetween(r,i,(l,u,c,d)=>{var p;l.isBlock&&u>r&&(o+=a);const h=s==null?void 0:s[l.type.name];if(h)return c&&(o+=h({node:l,pos:u,parent:c,index:d,range:t})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)===null||p===void 0?void 0:p.slice(Math.max(r,u)-u,i-u))}),o}function Dde(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}const Sxt=xa.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ks({key:new nc("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:a}=i,s=Math.min(...a.map(c=>c.$from.pos)),o=Math.max(...a.map(c=>c.$to.pos)),l=Dde(n);return Rde(r,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Cxt=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Ixt=(e=!1)=>({commands:t})=>t.setContent("",e),$xt=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:a,$to:s})=>{e.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:u,mapping:c}=t,d=u.resolve(c.map(l)),p=u.resolve(c.map(l+o.nodeSize)),h=d.blockRange(p);if(!h)return;const m=p0(h);if(o.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,g)}(m||m===0)&&t.lift(h,m)})}),!0},Txt=e=>t=>e(t),Nxt=()=>({state:e,dispatch:t})=>Xwt(e,t),Ext=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,a=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const s=r.mapping.map(t);return r.insert(s,a.content),r.setSelection(new Ut(r.doc.resolve(s-1))),!0},Oxt=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(t){const o=i.before(a),l=i.after(a);e.delete(o,l).scrollIntoView()}return!0}return!1},Pxt=e=>({tr:t,state:n,dispatch:r})=>{const i=Li(e,n.schema),a=t.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(r){const l=a.before(s),u=a.after(s);t.delete(l,u).scrollIntoView()}return!0}return!1},Mxt=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},Axt=()=>({state:e,dispatch:t})=>Fwt(e,t),Rxt=()=>({commands:e})=>e.keyboardShortcut("Enter"),Dxt=()=>({state:e,dispatch:t})=>Zwt(e,t);function JI(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:Z3(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function QM(e,t,n={}){return e.find(r=>r.type===t&&JI(r.attrs,n))}function Lxt(e,t,n={}){return!!QM(e,t,n)}function X3(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&r.offset!==0&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const i=QM([...r.node.marks],t,n);if(!i)return;let a=r.index,s=e.start()+r.offset,o=a+1,l=s+r.node.nodeSize;for(QM([...r.node.marks],t,n);a>0&&i.isInSet(e.parent.child(a-1).marks);)a-=1,s-=e.parent.child(a).nodeSize;for(;o<e.parent.childCount&&Lxt([...e.parent.child(o).marks],t,n);)l+=e.parent.child(o).nodeSize,o+=1;return{from:s,to:l}}function Xd(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}const Fxt=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const a=Xd(e,r.schema),{doc:s,selection:o}=n,{$from:l,from:u,to:c}=o;if(i){const d=X3(l,a,t);if(d&&d.from<=u&&d.to>=c){const p=Ut.create(s,d.from,d.to);n.setSelection(p)}}return!0},zxt=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function Lde(e){return e instanceof Ut}function Pp(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function Fde(e,t=null){if(!t)return null;const n=en.atStart(e),r=en.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,a=r.to;return t==="all"?Ut.create(e,Pp(0,i,a),Pp(e.content.size,i,a)):Ut.create(e,Pp(t,i,a),Pp(t,i,a))}function J3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Bxt=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:a})=>{t={scrollIntoView:!0,...t};const s=()=>{J3()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(a&&e===null&&!Lde(n.state.selection))return s(),!0;const o=Fde(i.doc,e)||n.state.selection,l=n.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},Wxt=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),Vxt=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),zde=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&zde(r)}return e};function mG(e){const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return zde(n)}function YI(e,t,n){n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{return Array.isArray(e)&&e.length>0?Me.fromArray(e.map(s=>t.nodeFromJSON(s))):t.nodeFromJSON(e)}catch(a){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",a),YI("",t,n)}if(i){const a=xy.fromSchema(t);return n.slice?a.parseSlice(mG(e),n.parseOptions).content:a.parse(mG(e),n.parseOptions)}return YI("",t,n)}function jxt(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Ti||i instanceof Ai))return;const a=e.mapping.maps[r];let s=0;a.forEach((o,l,u,c)=>{s===0&&(s=c)}),e.setSelection(en.near(e.doc.resolve(s),n))}const Hxt=e=>e.toString().startsWith("<"),Uxt=(e,t,n)=>({tr:r,dispatch:i,editor:a})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const s=YI(t,a.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(s.toString()==="<>")return!0;let{from:o,to:l}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},u=!0,c=!0;if((Hxt(s)?s:[s]).forEach(h=>{h.check(),u=u?h.isText&&h.marks.length===0:!1,c=c?h.isBlock:!1}),o===l&&c){const{parent:h}=r.doc.resolve(o);h.isTextblock&&!h.type.spec.code&&!h.childCount&&(o-=1,l+=1)}let p;u?(Array.isArray(t)?p=t.map(h=>h.text||"").join(""):typeof t=="object"&&!!t&&!!t.text?p=t.text:p=t,r.insertText(p,o,l)):(p=s,r.replaceWith(o,l,p)),n.updateSelection&&jxt(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:o,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:o,text:p})}return!0},Gxt=()=>({state:e,dispatch:t})=>Uwt(e,t),qxt=()=>({state:e,dispatch:t})=>Gwt(e,t),Kxt=()=>({state:e,dispatch:t})=>zwt(e,t),Zxt=()=>({state:e,dispatch:t})=>jwt(e,t),Xxt=()=>({tr:e,state:t,dispatch:n})=>{try{const r=LT(t.doc,t.selection.$from.pos,-1);return r==null?!1:(e.join(r,2),n&&n(e),!0)}catch{return!1}},Jxt=()=>({state:e,dispatch:t,tr:n})=>{try{const r=LT(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},Yxt=()=>({state:e,dispatch:t})=>Bwt(e,t),Qxt=()=>({state:e,dispatch:t})=>Wwt(e,t);function Bde(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function e_t(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<t.length-1;o+=1){const l=t[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))J3()||Bde()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}const t_t=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const a=e_t(e).split(/-(?!$)/),s=a.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,o))});return l==null||l.steps.forEach(u=>{const c=u.map(r.mapping);c&&i&&r.maybeStep(c)}),!0};function D1(e,t,n={}){const{from:r,to:i,empty:a}=e.selection,s=t?Li(t,e.schema):null,o=[];e.doc.nodesBetween(r,i,(d,p)=>{if(d.isText)return;const h=Math.max(r,p),m=Math.min(i,p+d.nodeSize);o.push({node:d,from:h,to:m})});const l=i-r,u=o.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>JI(d.node.attrs,n,{strict:!1}));return a?!!u.length:u.reduce((d,p)=>d+p.to-p.from,0)>=l}const n_t=(e,t={})=>({state:n,dispatch:r})=>{const i=Li(e,n.schema);return D1(n,i,t)?qwt(n,r):!1},r_t=()=>({state:e,dispatch:t})=>Jwt(e,t),i_t=e=>({state:t,dispatch:n})=>{const r=Li(e,t.schema);return axt(r)(t,n)},a_t=()=>({state:e,dispatch:t})=>Kwt(e,t);function KT(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function gG(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}const s_t=(e,t)=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=KT(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(a=Li(e,r.schema)),o==="mark"&&(s=Xd(e,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,c)=>{a&&a===u.type&&n.setNodeMarkup(c,void 0,gG(u.attrs,t)),s&&u.marks.length&&u.marks.forEach(d=>{s===d.type&&n.addMark(c,c+u.nodeSize,s.create(gG(d.attrs,t)))})})}),!0):!1},o_t=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),l_t=()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size}),u_t=()=>({state:e,dispatch:t})=>Vwt(e,t),c_t=()=>({state:e,dispatch:t})=>Hwt(e,t),d_t=()=>({state:e,dispatch:t})=>Ywt(e,t),p_t=()=>({state:e,dispatch:t})=>txt(e,t),h_t=()=>({state:e,dispatch:t})=>ext(e,t);function Wde(e,t,n={}){return YI(e,t,{slice:!1,parseOptions:n})}const f_t=(e,t=!1,n={})=>({tr:r,editor:i,dispatch:a})=>{const{doc:s}=r,o=Wde(e,i.schema,n);return a&&r.replaceWith(0,s.content.size,o).setMeta("preventUpdate",!t),!0};function hx(e,t){const n=Xd(t,e.schema),{from:r,to:i,empty:a}=e.selection,s=[];a?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function m_t(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function g_t(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Y3(e){return t=>g_t(t.$from,e)}function y_t(e,t){const n=Ml.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function v_t(e,t){const n={from:0,to:e.content.size};return Rde(e,n,t)}function b_t(e,t){const n=Li(t,e.schema),{from:r,to:i}=e.selection,a=[];e.doc.nodesBetween(r,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===n.name);return s?{...s.attrs}:{}}function w_t(e,t){const n=KT(typeof t=="string"?t:t.name,e.schema);return n==="node"?b_t(e,t):n==="mark"?hx(e,t):{}}function Vde(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const a=n.resolve(e-1),s=X3(a,i.type);!s||r.push({mark:i,...s})}):n.nodesBetween(e,t,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),r}function Nk(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(a=>a.type===t&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}function eA(e,t,n={}){const{empty:r,ranges:i}=e.selection,a=t?Xd(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>a?a.name===d.type.name:!0).find(d=>JI(d.attrs,n,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:d,$to:p})=>{const h=d.pos,m=p.pos;e.doc.nodesBetween(h,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(h,y),b=Math.min(m,y+g.nodeSize),_=b-v;s+=_,o.push(...g.marks.map(k=>({mark:k,from:v,to:b})))})}),s===0)return!1;const l=o.filter(d=>a?a.name===d.mark.type.name:!0).filter(d=>JI(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),u=o.filter(d=>a?d.mark.type!==a&&d.mark.type.excludes(a):!0).reduce((d,p)=>d+p.to-p.from,0);return(l>0?l+u:l)>=s}function x_t(e,t,n={}){if(!t)return D1(e,null,n)||eA(e,null,n);const r=KT(t,e.schema);return r==="node"?D1(e,t,n):r==="mark"?eA(e,t,n):!1}function yG(e,t){const{nodeExtensions:n}=UT(t),r=n.find(s=>s.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=Qt(pt(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function __t(e){var t;const n=(t=e.type.createAndFill())===null||t===void 0?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function k_t(e,t,n){var r;const{selection:i}=t;let a=null;if(Lde(i)&&(a=i.$cursor),a){const o=(r=e.storedMarks)!==null&&r!==void 0?r:a.marks();return!!n.isInSet(o)||!o.some(l=>l.type.excludes(n))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let u=o.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(o.pos,l.pos,(c,d,p)=>{if(u)return!1;if(c.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(c.marks)||!c.marks.some(g=>g.type.excludes(n));u=h&&m}return!u}),u})}const S_t=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=n,{empty:s,ranges:o}=a,l=Xd(e,r.schema);if(i)if(s){const u=hx(r,l);n.addStoredMark(l.create({...u,...t}))}else o.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(p,h)=>{const m=Math.max(h,c),g=Math.min(h+p.nodeSize,d);p.marks.find(v=>v.type===l)?p.marks.forEach(v=>{l===v.type&&n.addMark(m,g,l.create({...v.attrs,...t}))}):n.addMark(m,g,l.create(t))})});return k_t(r,n,l)},C_t=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),I_t=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const a=Li(e,n.schema);return a.isTextblock?i().command(({commands:s})=>dG(a,t)(n)?!0:s.clearNodes()).command(({state:s})=>dG(a,t)(s,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},$_t=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Pp(e,0,r.content.size),a=It.create(r,i);t.setSelection(a)}return!0},T_t=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:a}=typeof e=="number"?{from:e,to:e}:e,s=Ut.atStart(r).from,o=Ut.atEnd(r).to,l=Pp(i,s,o),u=Pp(a,s,o),c=Ut.create(r,l,u);t.setSelection(c)}return!0},N_t=e=>({state:t,dispatch:n})=>{const r=Li(e,t.schema);return lxt(r)(t,n)};function vG(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t==null?void 0:t.includes(i.type.name));e.tr.ensureMarks(r)}}const E_t=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:a,doc:s}=t,{$from:o,$to:l}=a,u=i.extensionManager.attributes,c=Nk(u,o.node().type.name,o.node().attrs);if(a instanceof It&&a.node.isBlock)return!o.parentOffset||!Fg(s,o.pos)?!1:(r&&(e&&vG(n,i.extensionManager.splittableMarks),t.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(r){const d=l.parentOffset===l.parent.content.size;a instanceof Ut&&t.deleteSelection();const p=o.depth===0?void 0:m_t(o.node(-1).contentMatchAt(o.indexAfter(-1)));let h=d&&p?[{type:p,attrs:c}]:void 0,m=Fg(t.doc,t.mapping.map(o.pos),1,h);if(!h&&!m&&Fg(t.doc,t.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:c}]:void 0),m&&(t.split(t.mapping.map(o.pos),1,h),p&&!d&&!o.parentOffset&&o.parent.type!==p)){const g=t.mapping.map(o.before()),y=t.doc.resolve(g);o.node(-1).canReplaceWith(y.index(),y.index()+1,p)&&t.setNodeMarkup(t.mapping.map(o.before()),p)}e&&vG(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return!0},O_t=e=>({tr:t,state:n,dispatch:r,editor:i})=>{var a;const s=Li(e,n.schema),{$from:o,$to:l}=n.selection,u=n.selection.node;if(u&&u.isBlock||o.depth<2||!o.sameParent(l))return!1;const c=o.node(-1);if(c.type!==s)return!1;const d=i.extensionManager.attributes;if(o.parent.content.size===0&&o.node(-1).childCount===o.indexAfter(-1)){if(o.depth===2||o.node(-3).type!==s||o.index(-2)!==o.node(-2).childCount-1)return!1;if(r){let y=Me.empty;const v=o.index(-1)?1:o.index(-2)?2:3;for(let N=o.depth-v;N>=o.depth-3;N-=1)y=Me.from(o.node(N).copy(y));const b=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3,_=Nk(d,o.node().type.name,o.node().attrs),k=((a=s.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(_))||void 0;y=y.append(Me.from(s.createAndFill(null,k)||void 0));const S=o.before(o.depth-(v-1));t.replace(S,o.after(-b),new Ye(y,4-v,0));let $=-1;t.doc.nodesBetween(S,t.doc.content.size,(N,P)=>{if($>-1)return!1;N.isTextblock&&N.content.size===0&&($=P+1)}),$>-1&&t.setSelection(Ut.near(t.doc.resolve($))),t.scrollIntoView()}return!0}const p=l.pos===o.end()?c.contentMatchAt(0).defaultType:null,h=Nk(d,c.type.name,c.attrs),m=Nk(d,o.node().type.name,o.node().attrs);t.delete(o.pos,l.pos);const g=p?[{type:s,attrs:h},{type:p,attrs:m}]:[{type:s,attrs:h}];if(!Fg(t.doc,o.pos,2))return!1;if(r){const{selection:y,storedMarks:v}=n,{splittableMarks:b}=i.extensionManager,_=v||y.$to.parentOffset&&y.$from.marks();if(t.split(o.pos,2,g).scrollIntoView(),!_||!r)return!0;const k=_.filter(S=>b.includes(S.type.name));t.ensureMarks(k)}return!0},eO=(e,t)=>{const n=Y3(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Kd(e.doc,n.pos)&&e.join(n.pos),!0},tO=(e,t)=>{const n=Y3(s=>s.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Kd(e.doc,r)&&e.join(r),!0},P_t=(e,t,n,r={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:u,can:c})=>{const{extensions:d,splittableMarks:p}=i.extensionManager,h=Li(e,s.schema),m=Li(t,s.schema),{selection:g,storedMarks:y}=s,{$from:v,$to:b}=g,_=v.blockRange(b),k=y||g.$to.parentOffset&&g.$from.marks();if(!_)return!1;const S=Y3($=>yG($.type.name,d))(g);if(_.depth>=1&&S&&_.depth-S.depth<=1){if(S.node.type===h)return u.liftListItem(m);if(yG(S.node.type.name,d)&&h.validContent(S.node.content)&&o)return l().command(()=>(a.setNodeMarkup(S.pos,h),!0)).command(()=>eO(a,h)).command(()=>tO(a,h)).run()}return!n||!k||!o?l().command(()=>c().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>eO(a,h)).command(()=>tO(a,h)).run():l().command(()=>{const $=c().wrapInList(h,r),N=k.filter(P=>p.includes(P.type.name));return a.ensureMarks(N),$?!0:u.clearNodes()}).wrapInList(h,r).command(()=>eO(a,h)).command(()=>tO(a,h)).run()},M_t=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=n,s=Xd(e,r.schema);return eA(r,s,t)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,t)},A_t=(e,t,n={})=>({state:r,commands:i})=>{const a=Li(e,r.schema),s=Li(t,r.schema);return D1(r,a,n)?i.setNode(s):i.setNode(a,n)},R_t=(e,t={})=>({state:n,commands:r})=>{const i=Li(e,n.schema);return D1(n,i,t)?r.lift(i):r.wrapIn(i,t)},D_t=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let a;if(i.spec.isInputRules&&(a=i.getState(e))){if(t){const s=e.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},L_t=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(a=>{e.removeMark(a.$from.pos,a.$to.pos)}),!0},F_t=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=t,{selection:o}=n,l=Xd(e,r.schema),{$from:u,empty:c,ranges:d}=o;if(!i)return!0;if(c&&s){let{from:p,to:h}=o;const m=(a=u.marks().find(y=>y.type===l))===null||a===void 0?void 0:a.attrs,g=X3(u,l,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,l)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},z_t=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=KT(typeof e=="string"?e:e.name,r.schema);return o?(o==="node"&&(a=Li(e,r.schema)),o==="mark"&&(s=Xd(e,r.schema)),i&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,c=l.$to.pos;r.doc.nodesBetween(u,c,(d,p)=>{a&&a===d.type&&n.setNodeMarkup(p,void 0,{...d.attrs,...t}),s&&d.marks.length&&d.marks.forEach(h=>{if(s===h.type){const m=Math.max(p,u),g=Math.min(p+d.nodeSize,c);n.addMark(m,g,s.create({...h.attrs,...t}))}})})}),!0):!1},B_t=(e,t={})=>({state:n,dispatch:r})=>{const i=Li(e,n.schema);return nxt(i,t)(n,r)},W_t=(e,t={})=>({state:n,dispatch:r})=>{const i=Li(e,n.schema);return rxt(i,t)(n,r)};var V_t=Object.freeze({__proto__:null,blur:Cxt,clearContent:Ixt,clearNodes:$xt,command:Txt,createParagraphNear:Nxt,cut:Ext,deleteCurrentNode:Oxt,deleteNode:Pxt,deleteRange:Mxt,deleteSelection:Axt,enter:Rxt,exitCode:Dxt,extendMarkRange:Fxt,first:zxt,focus:Bxt,forEach:Wxt,insertContent:Vxt,insertContentAt:Uxt,joinUp:Gxt,joinDown:qxt,joinBackward:Kxt,joinForward:Zxt,joinItemBackward:Xxt,joinItemForward:Jxt,joinTextblockBackward:Yxt,joinTextblockForward:Qxt,keyboardShortcut:t_t,lift:n_t,liftEmptyBlock:r_t,liftListItem:i_t,newlineInCode:a_t,resetAttributes:s_t,scrollIntoView:o_t,selectAll:l_t,selectNodeBackward:u_t,selectNodeForward:c_t,selectParentNode:d_t,selectTextblockEnd:p_t,selectTextblockStart:h_t,setContent:f_t,setMark:S_t,setMeta:C_t,setNode:I_t,setNodeSelection:$_t,setTextSelection:T_t,sinkListItem:N_t,splitBlock:E_t,splitListItem:O_t,toggleList:P_t,toggleMark:M_t,toggleNode:A_t,toggleWrap:R_t,undoInputRule:D_t,unsetAllMarks:L_t,unsetMark:F_t,updateAttributes:z_t,wrapIn:B_t,wrapInList:W_t});const j_t=xa.create({name:"commands",addCommands(){return{...V_t}}}),H_t=xa.create({name:"editable",addProseMirrorPlugins(){return[new Ks({key:new nc("editable"),props:{editable:()=>this.editor.options.editable}})]}}),U_t=xa.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ks({key:new nc("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),G_t=xa.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:u}=o,{empty:c,$anchor:d}=l,{pos:p,parent:h}=d,m=d.parent.isTextblock&&p>0?o.doc.resolve(p-1):d,g=m.parent.type.spec.isolating,y=d.pos-d.parentOffset,v=g&&m.parent.childCount===1?y===d.pos:en.atStart(u).from===p;return!c||!h.type.isTextblock||h.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return J3()||Bde()?a:i},addProseMirrorPlugins(){return[new Ks({key:new nc("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some(m=>m.docChanged)&&!t.doc.eq(n.doc)))return;const{empty:i,from:a,to:s}=t.selection,o=en.atStart(t.doc).from,l=en.atEnd(t.doc).to;if(i||!(a===o&&s===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const d=n.tr,p=jT({state:n,transaction:d}),{commands:h}=new HT({editor:this.editor,state:p});if(h.clearNodes(),!!d.steps.length)return d}})]}}),q_t=xa.create({name:"tabindex",addProseMirrorPlugins(){return[new Ks({key:new nc("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class kp{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new kp(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new kp(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new kp(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,a=this.pos+r+1,s=this.resolvedPos.doc.resolve(a);if(!i&&s.depth<=this.depth)return;const o=new kp(s,this.editor,i,i?n:null);i&&(o.actualDepth=this.depth+1),t.push(new kp(s,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const a=i.node.attrs,s=Object.keys(n);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===t&&a.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(t,n,r))))}),i}setAttribute(t){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,t).setTextSelection(n.from).run()}}const K_t=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Z_t(e,t,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}class X_t extends uxt{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Z_t(K_t,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,n=!0){this.setOptions({editable:t}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,n){const r=Ade(n)?n(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(t){if(this.isDestroyed)return;const n=typeof t=="string"?`${t}$`:t.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var t,n;const i=[...this.options.enableCoreExtensions?[H_t,Sxt.configure({blockSeparator:(n=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),j_t,U_t,G_t,q_t]:[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new vg(i,this)}createCommandManager(){this.commandManager=new HT({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Wde(this.options.content,this.schema,this.options.parseOptions),n=Fde(t,this.options.autofocus);this.view=new Twt(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:yg.create({doc:t,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(s=>{var o;return(o=this.capturedTransaction)===null||o===void 0?void 0:o.step(s)});return}const n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=t.getMeta("focus"),a=t.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:t}),a&&this.emit("blur",{editor:this,event:a.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return w_t(this.state,t)}isActive(t,n){const r=typeof t=="string"?t:null,i=typeof t=="string"?n:t;return x_t(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return y_t(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:n=`

`,textSerializers:r={}}=t||{};return v_t(this.state.doc,{blockSeparator:n,textSerializers:{...Dde(this.schema),...r}})}get isEmpty(){return __t(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(t,n))||null}$nodes(t,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(t,n))||null}$pos(t){const n=this.state.doc.resolve(t);return new kp(n,this)}get $doc(){return this.$pos(0)}}function Nh(e){return new GT({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Qt(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=t,s=r[r.length-1],o=r[0];if(s){const l=o.search(/\S/),u=n.from+o.indexOf(s),c=u+s.length;if(Vde(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(g=>g===e.type&&g!==h.mark.type)).filter(h=>h.to>u).length)return null;c<n.to&&a.delete(c,n.to),u>n.from&&a.delete(n.from+l,u);const p=n.from+l+s.length;a.addMark(n.from+l,p,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}function jde(e){return new GT({find:e.find,handler:({state:t,range:n,match:r})=>{const i=Qt(e.getAttributes,void 0,r)||{},{tr:a}=t,s=n.from;let o=n.to;const l=e.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=s+u;c>o?c=o:o=c+r[1].length;const d=r[0][r[0].length-1];a.insertText(d,s+r[0].length-1),a.replaceWith(c,o,l)}else r[0]&&a.insert(s-1,e.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o));a.scrollIntoView()}})}function tA(e){return new GT({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),a=Qt(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,a)}})}function L1(e){return new GT({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const a=Qt(e.getAttributes,void 0,r)||{},s=t.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),u=l&&L3(l,e.type,a);if(!u)return null;if(s.wrap(l,u),e.keepMarks&&e.editor){const{selection:d,storedMarks:p}=t,{splittableMarks:h}=e.editor.extensionManager,m=p||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(y=>h.includes(y.type.name));s.ensureMarks(g)}}if(e.keepAttributes){const d=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,a).run()}const c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&Kd(s.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,c))&&s.join(n.from-1)}})}class Ga{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(pt(this,"addOptions",{name:this.name}))),this.storage=Qt(pt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ga(t)}configure(t={}){const n=this.extend();return n.options=qT(this.options,t),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new Ga({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(pt(n,"addOptions",{name:n.name})),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}}class ta{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(pt(this,"addOptions",{name:this.name}))),this.storage=Qt(pt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new ta(t)}configure(t={}){const n=this.extend();return n.options=qT(this.options,t),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new ta({...this.config,...t});return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(pt(n,"addOptions",{name:n.name})),n.storage=Qt(pt(n,"addStorage",{name:n.name,options:n.options})),n}}function Eh(e){return new yxt({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const a=Qt(e.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];let u=n.to;if(o){const c=l.search(/\S/),d=n.from+l.indexOf(o),p=d+o.length;if(Vde(n.from,n.to,t.doc).filter(m=>m.mark.type.excluded.find(y=>y===e.type&&y!==m.mark.type)).filter(m=>m.to>d).length)return null;p<n.to&&s.delete(p,n.to),d>n.from&&s.delete(n.from+c,d),u=n.from+c+o.length,s.addMark(n.from+c,u,e.type.create(a||{})),s.removeStoredMark(e.type)}}})}const J_t=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},Y_t=({renderers:e})=>x(Fe,{children:Object.entries(e).map(([t,n])=>Ob.createPortal(n.reactElement,n.element,t))});class Q_t extends kr.Component{constructor(t){super(t),this.editorContentRef=kr.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:t}=this.props;if(t&&t.options.element){if(t.contentComponent)return;const n=this.editorContentRef.current;n.append(...t.options.element.childNodes),t.setOptions({element:n}),t.contentComponent=this,t.createNodeViews(),this.initialized=!0}}maybeFlushSync(t){this.initialized?Kl.exports.flushSync(t):t()}setRenderer(t,n){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[t]:n}}))})}removeRenderer(t){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>{const r={...n};return delete r[t],{renderers:r}})})}componentWillUnmount(){const{editor:t}=this.props;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:t,innerRef:n,...r}=this.props;return B(Fe,{children:[x("div",{ref:J_t(n,this.editorContentRef),...r}),x(Y_t,{renderers:this.state.renderers})]})}}const ekt=I.exports.forwardRef((e,t)=>{const n=kr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return x(Q_t,{innerRef:t,...e},n)}),tkt=kr.memo(ekt);class nkt extends X_t{constructor(){super(...arguments),this.contentComponent=null}}const fm=(e={},t=[])=>{const n=I.exports.useRef(null),[,r]=I.exports.useState({}),{onBeforeCreate:i,onBlur:a,onCreate:s,onDestroy:o,onFocus:l,onSelectionUpdate:u,onTransaction:c,onUpdate:d}=e,p=I.exports.useRef(i),h=I.exports.useRef(a),m=I.exports.useRef(s),g=I.exports.useRef(o),y=I.exports.useRef(l),v=I.exports.useRef(u),b=I.exports.useRef(c),_=I.exports.useRef(d);return I.exports.useEffect(()=>{!n.current||(i&&(n.current.off("beforeCreate",p.current),n.current.on("beforeCreate",i),p.current=i),a&&(n.current.off("blur",h.current),n.current.on("blur",a),h.current=a),s&&(n.current.off("create",m.current),n.current.on("create",s),m.current=s),o&&(n.current.off("destroy",g.current),n.current.on("destroy",o),g.current=o),l&&(n.current.off("focus",y.current),n.current.on("focus",l),y.current=l),u&&(n.current.off("selectionUpdate",v.current),n.current.on("selectionUpdate",u),v.current=u),c&&(n.current.off("transaction",b.current),n.current.on("transaction",c),b.current=c),d&&(n.current.off("update",_.current),n.current.on("update",d),_.current=d))},[i,a,s,o,l,u,c,d,n.current]),I.exports.useEffect(()=>{let k=!0;const S=new nkt(e);return n.current=S,n.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{k&&r({})})})}),()=>{k=!1,S.destroy()}},t),n.current},rkt=I.exports.createContext({editor:null});rkt.Consumer;const ikt=I.exports.createContext({onDragStart:void 0}),akt=()=>I.exports.useContext(ikt);kr.forwardRef((e,t)=>{const{onDragStart:n}=akt(),r=e.as||"div";return x(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});const skt=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,okt=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,mm=Ga.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Nh({find:skt,type:this.type})]},addPasteRules(){return[Eh({find:okt,type:this.type})]}}),lkt=/^\s*>\s$/,ukt=ta.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[L1({find:lkt,type:this.type})]}}),ckt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dkt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,pkt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hkt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fkt=Ga.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Nh({find:ckt,type:this.type}),Nh({find:pkt,type:this.type})]},addPasteRules(){return[Eh({find:dkt,type:this.type}),Eh({find:hkt,type:this.type})]}}),mkt=ta.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",pr(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bG=Ga.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=hx(e,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}}),wG=/^\s*([-+*])\s$/,gkt=ta.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mkt.name,this.editor.getAttributes(bG.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=L1({find:wG,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=L1({find:wG,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(bG.name),editor:this.editor})),[e]}}),ykt=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,vkt=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,bkt=Ga.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Nh({find:ykt,type:this.type})]},addPasteRules(){return[Eh({find:vkt,type:this.type})]}}),wkt=/^```([a-z]+)?[\s\n]$/,xkt=/^~~~([a-z]+)?[\s\n]$/,_kt=ta.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,a=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",pr(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:e.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:a}=n;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0||r.nodeAt(o)?!1:e.commands.exitCode()}}},addInputRules(){return[tA({find:wkt,type:this.type,getAttributes:e=>({language:e[1]})}),tA({find:xkt,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ks({key:new nc("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i==null?void 0:i.mode;if(!n||!a)return!1;const{tr:s}=e.state;return e.state.selection.from===e.state.doc.nodeSize-(1+e.state.selection.$to.depth*2)?s.insert(e.state.selection.from-1,this.type.create({language:a})):s.replaceSelectionWith(this.type.create({language:a})),s.setSelection(Ut.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,`
`)),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),kkt=ta.create({name:"doc",topNode:!0,content:"block+"});function Skt(e={}){return new Ks({view(t){return new Ckt(t,e)}})}class Ckt{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return t.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r;if(n){let o=t.nodeBefore,l=t.nodeAfter;if(o||l){let u=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0));if(u){let c=u.getBoundingClientRect(),d=o?c.bottom:c.top;o&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:c.left,right:c.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let o=this.editorView.coordsAtPos(this.cursorPos);r={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let a,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")a=-pageXOffset,s=-pageYOffset;else{let o=i.getBoundingClientRect();a=o.left-i.scrollLeft,s=o.top-i.scrollTop}this.element.style.left=r.left-a+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!a){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=Bce(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const Ikt=xa.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Skt(this.options)]}});class Pr extends en{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Pr.valid(r)?new Pr(r):en.near(r)}content(){return Ye.empty}eq(t){return t instanceof Pr&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Pr(t.resolve(n.pos))}getBookmark(){return new Q3(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!$kt(t)||!Tkt(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Pr.valid(t))return t;let i=t.pos,a=null;for(let s=t.depth;;s--){let o=t.node(s);if(n>0?t.indexAfter(s)<o.childCount:t.index(s)>0){a=o.child(n>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=n;let l=t.doc.resolve(i);if(Pr.valid(l))return l}for(;;){let s=n>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!It.isSelectable(a)){t=t.doc.resolve(i+a.nodeSize*n),r=!1;continue e}break}a=s,i+=n;let o=t.doc.resolve(i);if(Pr.valid(o))return o}return null}}}Pr.prototype.visible=!1;Pr.findFrom=Pr.findGapCursorFrom;en.jsonID("gapcursor",Pr);class Q3{constructor(t){this.pos=t}map(t){return new Q3(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Pr.valid(n)?new Pr(n):en.near(n)}}function $kt(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Tkt(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Nkt(){return new Ks({props:{decorations:Mkt,createSelectionBetween(e,t,n){return t.pos==n.pos&&Pr.valid(n)?new Pr(n):null},handleClick:Okt,handleKeyDown:Ekt,handleDOMEvents:{beforeinput:Pkt}}})}const Ekt=Ide({ArrowLeft:V_("horiz",-1),ArrowRight:V_("horiz",1),ArrowUp:V_("vert",-1),ArrowDown:V_("vert",1)});function V_(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,a){let s=r.selection,o=t>0?s.$to:s.$from,l=s.empty;if(s instanceof Ut){if(!a.endOfTextblock(n)||o.depth==0)return!1;l=!1,o=r.doc.resolve(t>0?o.after():o.before())}let u=Pr.findGapCursorFrom(o,t,l);return u?(i&&i(r.tr.setSelection(new Pr(u))),!0):!1}}function Okt(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Pr.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&It.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Pr(r))),!0)}function Pkt(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Pr))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=Me.empty;for(let s=r.length-1;s>=0;s--)i=Me.from(r[s].createAndFill(null,i));let a=e.state.tr.replace(n.pos,n.pos,new Ye(i,0,0));return a.setSelection(Ut.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function Mkt(e){if(!(e.selection instanceof Pr))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",hi.create(e.doc,[oo.widget(e.selection.head,t,{key:"gapcursor"})])}const Akt=xa.create({name:"gapCursor",addProseMirrorPlugins(){return[Nkt()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Qt(pt(e,"allowGapCursor",n)))!==null&&t!==void 0?t:null}}}),Rkt=ta.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",pr(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:a}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&s){const d=l.filter(p=>o.includes(p.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Dkt=ta.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,pr(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>tA({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var QI=200,Ri=function(){};Ri.prototype.append=function(t){return t.length?(t=Ri.from(t),!this.length&&t||t.length<QI&&this.leafAppend(t)||this.length<QI&&t.leafPrepend(this)||this.appendInner(t)):this};Ri.prototype.prepend=function(t){return t.length?Ri.from(t).append(this):this};Ri.prototype.appendInner=function(t){return new Lkt(this,t)};Ri.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ri.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ri.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ri.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ri.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,s){return i.push(t(a,s))},n,r),i};Ri.from=function(t){return t instanceof Ri?t:t&&t.length?new Hde(t):Ri.empty};var Hde=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new t(this.values.slice(i,a))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=QI)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=QI)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ri);Ri.empty=new Hde([]);var Lkt=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(r,Math.min(i,o),a,s)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ri);const Fkt=500;class Fo{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;n&&(i=this.remapping(r,this.items.length),a=i.maps.length);let s=t.tr,o,l,u=[],c=[];return this.items.forEach((d,p)=>{if(!d.step){i||(i=this.remapping(r,p+1),a=i.maps.length),a--,c.push(d);return}if(i){c.push(new bl(d.map));let h=d.step.map(i.slice(a)),m;h&&s.maybeStep(h).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],u.push(new bl(m,void 0,void 0,u.length+c.length))),a--,m&&i.appendMap(m,a)}else s.maybeStep(d.step);if(d.selection)return o=i?d.selection.map(i.slice(a)):d.selection,l=new Fo(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(t,n,r,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let c=0;c<t.steps.length;c++){let d=t.steps[c].invert(t.docs[c]),p=new bl(t.mapping.maps[c],d,n),h;(h=l&&l.merge(p))&&(p=h,c?a.pop():o=o.slice(0,o.length-1)),a.push(p),n&&(s++,n=void 0),i||(l=p)}let u=s-r.depth;return u>Bkt&&(o=zkt(o,u),s-=u),new Fo(o.append(a),s)}remapping(t,n){let r=new Lg;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},t,n),r}addMaps(t){return this.eventCount==0?this:new Fo(this.items.append(t.map(n=>new bl(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),a=t.mapping,s=t.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=n;this.items.forEach(p=>{let h=a.getMirror(--l);if(h==null)return;s=Math.min(s,h);let m=a.maps[h];if(p.step){let g=t.steps[h].invert(t.docs[h]),y=p.selection&&p.selection.map(a.slice(l+1,h));y&&o++,r.push(new bl(m,g,y))}else r.push(new bl(m))},i);let u=[];for(let p=n;p<s;p++)u.push(new bl(a.maps[p]));let c=this.items.slice(0,i).append(u).append(r),d=new Fo(c,o);return d.emptyItemCount()>Fkt&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=t)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let c=s.selection&&s.selection.map(n.slice(r));c&&a++;let d=new bl(u.invert(),l,c),p,h=i.length-1;(p=i.length&&i[h].merge(d))?i[h]=p:i.push(d)}}else s.map&&r--},this.items.length,0),new Fo(Ri.from(i.reverse()),a)}}Fo.empty=new Fo(Ri.empty,0);function zkt(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class bl{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new bl(n.getMap().invert(),n,this.selection)}}}class $c{constructor(t,n,r,i,a){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const Bkt=20;function Wkt(e,t,n,r){let i=n.getMeta(qp),a;if(i)return i.historyState;n.getMeta(Hkt)&&(e=new $c(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(s&&s.getMeta(qp))return s.getMeta(qp).redo?new $c(e.done.addTransform(n,void 0,r,Ek(t)),e.undone,xG(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new $c(e.done,e.undone.addTransform(n,void 0,r,Ek(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),l=e.prevTime==0||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Vkt(n,e.prevRanges)),u=s?nO(e.prevRanges,n.mapping):xG(n.mapping.maps[n.steps.length-1]);return new $c(e.done.addTransform(n,l?t.selection.getBookmark():void 0,r,Ek(t)),Fo.empty,u,n.time,o==null?e.prevComposition:o)}else return(a=n.getMeta("rebased"))?new $c(e.done.rebased(n,a),e.undone.rebased(n,a),nO(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new $c(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),nO(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Vkt(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<t.length;a+=2)r<=t[a+1]&&i>=t[a]&&(n=!0)}),n}function xG(e){let t=[];return e.forEach((n,r,i,a)=>t.push(i,a)),t}function nO(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),a=t.map(e[r+1],-1);i<=a&&n.push(i,a)}return n}function jkt(e,t,n){let r=Ek(t),i=qp.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,r),l=new $c(n?o:a.remaining,n?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(qp,{redo:n,historyState:l})}let rO=!1,_G=null;function Ek(e){let t=e.plugins;if(_G!=t){rO=!1,_G=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){rO=!0;break}}return rO}const qp=new nc("history"),Hkt=new nc("closeHistory");function Ukt(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ks({key:qp,state:{init(){return new $c(Fo.empty,Fo.empty,null,0,-1)},apply(t,n,r){return Wkt(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Gde:r=="historyRedo"?qde:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Ude(e,t){return(n,r)=>{let i=qp.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let a=jkt(i,n,e);a&&r(t?a.scrollIntoView():a)}return!0}}const Gde=Ude(!1,!0),qde=Ude(!0,!0),Gkt=xa.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Gde(e,t),redo:()=>({state:e,dispatch:t})=>qde(e,t)}},addProseMirrorPlugins(){return[Ukt(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),qkt=ta.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",pr(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{$to:n}=t.selection,r=e();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:a})=>{var s;if(a){const{$to:o}=i.selection,l=o.end();if(o.nodeAfter)o.nodeAfter.isTextblock?i.setSelection(Ut.create(i.doc,o.pos+1)):o.nodeAfter.isBlock?i.setSelection(It.create(i.doc,o.pos)):i.setSelection(Ut.create(i.doc,o.pos));else{const u=(s=o.parent.type.contentMatch.defaultType)===null||s===void 0?void 0:s.create();u&&(i.insert(l,u),i.setSelection(Ut.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[jde({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Kkt=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Zkt=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Xkt=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Jkt=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Ykt=Ga.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Nh({find:Kkt,type:this.type}),Nh({find:Xkt,type:this.type})]},addPasteRules(){return[Eh({find:Zkt,type:this.type}),Eh({find:Jkt,type:this.type})]}}),Qkt=ta.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",pr(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),eSt=ta.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",pr(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kG=Ga.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=hx(e,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}}),SG=/^(\d+)\.\s$/,tSt=ta.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",pr(this.options.HTMLAttributes,n),0]:["ol",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(eSt.name,this.editor.getAttributes(kG.name)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=L1({find:SG,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=L1({find:SG,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(kG.name)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),nSt=ta.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),rSt=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,iSt=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,aSt=Ga.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Nh({find:rSt,type:this.type})]},addPasteRules(){return[Eh({find:iSt,type:this.type})]}}),sSt=ta.create({name:"text",group:"inline"}),gm=xa.create({name:"starterKit",addExtensions(){var e,t,n,r,i,a,s,o,l,u,c,d,p,h,m,g,y,v;const b=[];return this.options.blockquote!==!1&&b.push(ukt.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bold!==!1&&b.push(fkt.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.bulletList!==!1&&b.push(gkt.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&b.push(bkt.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&b.push(_kt.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&b.push(kkt.configure((a=this.options)===null||a===void 0?void 0:a.document)),this.options.dropcursor!==!1&&b.push(Ikt.configure((s=this.options)===null||s===void 0?void 0:s.dropcursor)),this.options.gapcursor!==!1&&b.push(Akt.configure((o=this.options)===null||o===void 0?void 0:o.gapcursor)),this.options.hardBreak!==!1&&b.push(Rkt.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&b.push(Dkt.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&b.push(Gkt.configure((c=this.options)===null||c===void 0?void 0:c.history)),this.options.horizontalRule!==!1&&b.push(qkt.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&b.push(Ykt.configure((p=this.options)===null||p===void 0?void 0:p.italic)),this.options.listItem!==!1&&b.push(Qkt.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&b.push(tSt.configure((m=this.options)===null||m===void 0?void 0:m.orderedList)),this.options.paragraph!==!1&&b.push(nSt.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&b.push(aSt.configure((y=this.options)===null||y===void 0?void 0:y.strike)),this.options.text!==!1&&b.push(sSt.configure((v=this.options)===null||v===void 0?void 0:v.text)),b}}),ym=Ga.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),vm=xa.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${e.textAlign}`}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),bm=Ga.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return e!=="super"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sup",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),wm=Ga.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return e!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:e}){return["sub",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),oSt=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,eB=ta.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",pr(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[jde({find:oSt,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),xm=eB.extend({addAttributes(){return{src:{default:null},alt:{default:null},style:{default:"width: 100%; height: auto; cursor: pointer;",parseHTML:e=>{const t=e.getAttribute("width");return t?`width: ${t}px; height: auto; cursor: pointer;`:`${e.style.cssText}`}},title:{default:null},loading:{default:null},srcset:{default:null},sizes:{default:null},crossorigin:{default:null},usemap:{default:null},ismap:{default:null},width:{default:null},height:{default:null},referrerpolicy:{default:null},longdesc:{default:null},decoding:{default:null},class:{default:null},id:{default:null},name:{default:null},draggable:{default:!0},tabindex:{default:null},"aria-label":{default:null},"aria-labelledby":{default:null},"aria-describedby":{default:null}}},addNodeView(){return({node:e,editor:t,getPos:n})=>{const{view:r,options:{editable:i}}=t,{style:a}=e.attrs,s=document.createElement("div"),o=document.createElement("div"),l=document.createElement("img"),u="width: 24px; height: 24px; cursor: pointer;",c=()=>{if(typeof n=="function"){const v=Object.assign(Object.assign({},e.attrs),{style:`${l.style.cssText}`});r.dispatch(r.state.tr.setNodeMarkup(n(),null,v))}},d=()=>{const v=document.createElement("div"),b=document.createElement("img"),_=document.createElement("img"),k=document.createElement("img"),S=N=>{N.target.style.opacity=.3},$=N=>{N.target.style.opacity=1};v.setAttribute("style","position: absolute; top: 0%; left: 50%; width: 100px; height: 25px; z-index: 999; background-color: rgba(255, 255, 255, 0.7); border-radius: 4px; border: 2px solid #6C6C6C; cursor: pointer; transform: translate(-50%, -50%); display: flex; justify-content: space-between; align-items: center; padding: 0 10px;"),b.setAttribute("src","https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_left/default/20px.svg"),b.setAttribute("style",u),b.addEventListener("mouseover",S),b.addEventListener("mouseout",$),_.setAttribute("src","https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_center/default/20px.svg"),_.setAttribute("style",u),_.addEventListener("mouseover",S),_.addEventListener("mouseout",$),k.setAttribute("src","https://fonts.gstatic.com/s/i/short-term/release/materialsymbolsoutlined/format_align_right/default/20px.svg"),k.setAttribute("style",u),k.addEventListener("mouseover",S),k.addEventListener("mouseout",$),b.addEventListener("click",()=>{l.setAttribute("style",`${l.style.cssText} margin: 0 auto 0 0;`),c()}),_.addEventListener("click",()=>{l.setAttribute("style",`${l.style.cssText} margin: 0 auto;`),c()}),k.addEventListener("click",()=>{l.setAttribute("style",`${l.style.cssText} margin: 0 0 0 auto;`),c()}),v.appendChild(b),v.appendChild(_),v.appendChild(k),o.appendChild(v)};if(s.setAttribute("style","display: flex;"),s.appendChild(o),o.setAttribute("style",`${a}`),o.appendChild(l),Object.entries(e.attrs).forEach(([v,b])=>{b!=null&&l.setAttribute(v,b)}),!i)return{dom:l};const p=["top: -4px; left: -4px; cursor: nwse-resize;","top: -4px; right: -4px; cursor: nesw-resize;","bottom: -4px; left: -4px; cursor: nesw-resize;","bottom: -4px; right: -4px; cursor: nwse-resize;"];let h=!1,m,g,y;return o.addEventListener("click",()=>{if(o.childElementCount>3)for(let v=0;v<5;v++)o.removeChild(o.lastChild);d(),o.setAttribute("style",`position: relative; border: 1px dashed #6C6C6C; ${a} cursor: pointer;`),Array.from({length:4},(v,b)=>{const _=document.createElement("div");_.setAttribute("style",`position: absolute; width: 9px; height: 9px; border: 1.5px solid #6C6C6C; border-radius: 50%; ${p[b]}`),_.addEventListener("mousedown",k=>{k.preventDefault(),h=!0,m=k.clientX,g=o.offsetWidth,y=o.offsetHeight;const S=N=>{if(!h)return;const P=b%2===0?-(N.clientX-m):N.clientX-m,D=g/y,O=g+P,F=O/D;o.style.width=O+"px",o.style.height=F+"px",l.style.width=O+"px",l.style.height=F+"px"},$=()=>{h&&(h=!1),c(),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",$)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",$)}),o.appendChild(_)})}),document.addEventListener("click",v=>{const b=v.target;if(!(o.contains(b)||b.style.cssText===u)){const k=o.getAttribute("style"),S=k==null?void 0:k.replace("border: 1px dashed #6C6C6C;","");if(o.setAttribute("style",S),o.childElementCount>3)for(let $=0;$<5;$++)o.removeChild(o.lastChild)}}),{dom:s}}}}),h0=Ga.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:e=>e.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["span",pr(this.options.HTMLAttributes,e),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:e,commands:t})=>{const n=hx(e,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:t.unsetMark(this.name)}}}}),f0=xa.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;return(t=e.style.color)===null||t===void 0?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:`color: ${e.color}`}:{}}}}]},addCommands(){return{setColor:e=>({chain:t})=>t().setMark("textStyle",{color:e}).run(),unsetColor:()=>({chain:e})=>e().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),_m=xa.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;return((e==null?void 0:e.mode)||this.options.mode)==="textSize"?t.textBetween(0,t.content.size,void 0," ").length:t.nodeSize},this.storage.words=e=>{const t=(e==null?void 0:e.node)||this.editor.state.doc;return t.textBetween(0,t.content.size," "," ").split(" ").filter(i=>i!=="").length}},addProseMirrorPlugins(){return[new Ks({key:new nc("characterCount"),filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const r=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=n||r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r||!e.getMeta("paste"))return!1;const s=e.selection.$head.pos,o=i-n,l=s-o,u=s;return e.deleteRange(l,u),!(this.storage.characters({node:e.doc})>n)}})]}}),[lSt,Jd]=Ay("RichTextEditor was not found in tree");var uSt=Object.defineProperty,CG=Object.getOwnPropertySymbols,cSt=Object.prototype.hasOwnProperty,dSt=Object.prototype.propertyIsEnumerable,IG=(e,t,n)=>t in e?uSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iO=(e,t)=>{for(var n in t||(t={}))cSt.call(t,n)&&IG(e,n,t[n]);if(CG)for(var n of CG(t))dSt.call(t,n)&&IG(e,n,t[n]);return e};function pSt(e,t){if(!e)return null;const n=t.colorScheme==="dark"?5:7;return{pre:{background:t.colorScheme==="dark"?t.colors.dark[8]:t.fn.rgba(t.colors.gray[0],.65),borderRadius:t.fn.radius(),color:t.colorScheme==="dark"?t.colors.dark[0]:t.colors.gray[9],fontFamily:t.fontFamilyMonospace,padding:`${t.spacing.md} ${t.spacing.xl}`,"& code":{background:"none",color:"inherit",fontSize:t.fontSizes.sm,padding:0}," & .hljs-comment, & .hljs-quote":{color:t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[5]},"& .hljs-variable, & .hljs-template-variable, & .hljs-attribute, & .hljs-tag, & .hljs-name, & .hljs-regexp, & .hljs-link, & .hljs-name, & .hljs-selector-id, & .hljs-selector-class":{color:t.colors.red[n]},"& .hljs-number, & .hljs-meta, & .hljs-built_in, & .hljs-builtin-name, & .hljs-literal, & .hljs-type, & .hljs-params":{color:t.colors[t.colorScheme==="dark"?"cyan":"blue"][n]},"& .hljs-string, & .hljs-symbol, & .hljs-bullet":{color:t.colors.red[n]},"& .hljs-title, & .hljs-section":{color:t.colors[t.colorScheme==="dark"?"yellow":"pink"][n]},"& .hljs-keyword, & .hljs-selector-tag":{color:t.colors.violet[n]},"& .hljs-emphasis":{fontStyle:"italic"},"& .hljs-strong":{fontWeight:700}}}}function hSt(e){return e?{"& li > p":{margin:0},"& ul li, & ol li":{marginTop:G(2)},"& ul, & ol":{marginTop:G(5),marginBottom:G(5)},"& p":{marginBottom:G(7)},"& h1, & h2, & h3, & h4, & h5, & h6, & p":{marginTop:0}}:null}var fSt=tt((e,{withCodeHighlightStyles:t,withTypographyStyles:n})=>({typographyStylesProvider:iO({},hSt(n)),content:iO({backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,borderRadius:e.fn.radius(),"& .ProseMirror":{outline:0,padding:e.spacing.md},"& .ProseMirror > *:last-child":{marginBottom:0},"& .ProseMirror p.is-editor-empty:first-of-type::before":iO({content:"attr(data-placeholder)",pointerEvents:"none",userSelect:"none",float:"left",height:0},e.fn.placeholderStyles())},pSt(t,e))}));const mSt=fSt;var gSt=Object.defineProperty,e2=Object.getOwnPropertySymbols,Kde=Object.prototype.hasOwnProperty,Zde=Object.prototype.propertyIsEnumerable,$G=(e,t,n)=>t in e?gSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ySt=(e,t)=>{for(var n in t||(t={}))Kde.call(t,n)&&$G(e,n,t[n]);if(e2)for(var n of e2(t))Zde.call(t,n)&&$G(e,n,t[n]);return e},vSt=(e,t)=>{var n={};for(var r in e)Kde.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&e2)for(var r of e2(e))t.indexOf(r)<0&&Zde.call(e,r)&&(n[r]=e[r]);return n};const bSt={},Xde=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorContent",bSt,e),{className:r}=n,i=vSt(n,["className"]),{editor:a,withCodeHighlightStyles:s,withTypographyStyles:o,classNames:l,styles:u,unstyled:c,variant:d}=Jd(),{classes:p,cx:h}=mSt({withCodeHighlightStyles:s,withTypographyStyles:o},{name:"RichTextEditor",classNames:l,styles:u,unstyled:c,variant:d});return x($Q,{className:h(p.typographyStylesProvider,r),unstyled:!o||c,ref:t,children:x(vt,{...ySt({component:tkt,editor:a,className:p.content},i)})})});Xde.displayName="@mantine/tiptap/Content";var wSt=Object.defineProperty,TG=Object.getOwnPropertySymbols,xSt=Object.prototype.hasOwnProperty,_St=Object.prototype.propertyIsEnumerable,NG=(e,t,n)=>t in e?wSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EG=(e,t)=>{for(var n in t||(t={}))xSt.call(t,n)&&NG(e,n,t[n]);if(TG)for(var n of TG(t))_St.call(t,n)&&NG(e,n,t[n]);return e},kSt=tt(e=>{const t=e.fn.variant({variant:"light"});return{control:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,minWidth:G(26),height:G(26),display:"flex",justifyContent:"center",alignItems:"center",border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderRadius:e.fn.radius(),cursor:"default","&[data-interactive]":EG({cursor:"pointer"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),"&[data-active]":{backgroundColor:t.background,color:t.color,"&:hover":EG({},e.fn.hover({backgroundColor:t.hover}))}}}});const SSt=kSt;var CSt=Object.defineProperty,t2=Object.getOwnPropertySymbols,Jde=Object.prototype.hasOwnProperty,Yde=Object.prototype.propertyIsEnumerable,OG=(e,t,n)=>t in e?CSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ISt=(e,t)=>{for(var n in t||(t={}))Jde.call(t,n)&&OG(e,n,t[n]);if(t2)for(var n of t2(t))Yde.call(t,n)&&OG(e,n,t[n]);return e},$St=(e,t)=>{var n={};for(var r in e)Jde.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&t2)for(var r of t2(e))t.indexOf(r)<0&&Yde.call(e,r)&&(n[r]=e[r]);return n};const TSt={interactive:!0},fx=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorControl",TSt,e),{className:r,active:i,children:a,interactive:s}=n,o=$St(n,["className","active","children","interactive"]),{classNames:l,styles:u,unstyled:c,variant:d}=Jd(),{classes:p,cx:h}=SSt(null,{name:"RichTextEditor",classNames:l,styles:u,unstyled:c,variant:d});return x(Z1,{...ISt({className:h(p.control,r),"data-rich-text-editor-control":!0,tabIndex:s?0:-1,"data-interactive":s||void 0,"data-active":i||void 0,"aria-pressed":i&&s||void 0,"aria-hidden":!s||void 0,ref:t,unstyled:c},o),children:a})});fx.displayName="@mantine/tiptap/Control";var NSt=tt(e=>({controlsGroup:{display:"flex","& [data-rich-text-editor-control]":{borderRadius:0,"&:not(:last-of-type)":{borderRight:0},"&:last-of-type":{borderTopRightRadius:e.fn.radius(),borderBottomRightRadius:e.fn.radius()},"&:first-of-type":{borderTopLeftRadius:e.fn.radius(),borderBottomLeftRadius:e.fn.radius()}}}}));const ESt=NSt;var OSt=Object.defineProperty,n2=Object.getOwnPropertySymbols,Qde=Object.prototype.hasOwnProperty,epe=Object.prototype.propertyIsEnumerable,PG=(e,t,n)=>t in e?OSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PSt=(e,t)=>{for(var n in t||(t={}))Qde.call(t,n)&&PG(e,n,t[n]);if(n2)for(var n of n2(t))epe.call(t,n)&&PG(e,n,t[n]);return e},MSt=(e,t)=>{var n={};for(var r in e)Qde.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&n2)for(var r of n2(e))t.indexOf(r)<0&&epe.call(e,r)&&(n[r]=e[r]);return n};const ASt={},tpe=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorControlsGroup",ASt,e),{className:r,children:i}=n,a=MSt(n,["className","children"]),{classNames:s,styles:o,unstyled:l}=Jd(),{classes:u,cx:c}=ESt(null,{name:"RichTextEditor",classNames:s,styles:o,unstyled:l});return x(vt,{...PSt({className:c(u.controlsGroup,r),ref:t},a),children:i})});tpe.displayName="@mantine/tiptap/ControlsGroup";var RSt=tt((e,{sticky:t,stickyOffset:n})=>({toolbar:{position:t?"sticky":"static",top:t?G(n):void 0,padding:`${e.spacing.xs} ${e.spacing.md}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,zIndex:1,borderTopRightRadius:e.fn.radius(),borderTopLeftRadius:e.fn.radius(),borderBottom:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`}}));const DSt=RSt;var LSt=Object.defineProperty,r2=Object.getOwnPropertySymbols,npe=Object.prototype.hasOwnProperty,rpe=Object.prototype.propertyIsEnumerable,MG=(e,t,n)=>t in e?LSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FSt=(e,t)=>{for(var n in t||(t={}))npe.call(t,n)&&MG(e,n,t[n]);if(r2)for(var n of r2(t))rpe.call(t,n)&&MG(e,n,t[n]);return e},zSt=(e,t)=>{var n={};for(var r in e)npe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&r2)for(var r of r2(e))t.indexOf(r)<0&&rpe.call(e,r)&&(n[r]=e[r]);return n};const BSt={stickyOffset:0},ipe=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorToolbar",BSt,e),{className:r,children:i,sticky:a,stickyOffset:s}=n,o=zSt(n,["className","children","sticky","stickyOffset"]),l=Jd(),{classes:u,cx:c}=DSt({sticky:a,stickyOffset:s},{name:"RichTextEditor",classNames:l.classNames,styles:l.styles,unstyled:l.unstyled,variant:l.variant});return x(me,{...FSt({className:c(u.toolbar,r),ref:t},o),children:i})});ipe.displayName="@mantine/tiptap/Toolbar";const WSt={linkControlLabel:"Link",colorPickerControlLabel:"Text color",highlightControlLabel:"Highlight text",colorControlLabel:e=>`Set text color ${e}`,boldControlLabel:"Bold",italicControlLabel:"Italic",underlineControlLabel:"Underline",strikeControlLabel:"Strikethrough",clearFormattingControlLabel:"Clear formatting",unlinkControlLabel:"Remove link",bulletListControlLabel:"Bullet list",orderedListControlLabel:"Ordered list",h1ControlLabel:"Heading 1",h2ControlLabel:"Heading 2",h3ControlLabel:"Heading 3",h4ControlLabel:"Heading 4",h5ControlLabel:"Heading 5",h6ControlLabel:"Heading 6",blockquoteControlLabel:"Blockquote",alignLeftControlLabel:"Align text: left",alignCenterControlLabel:"Align text: center",alignRightControlLabel:"Align text: right",alignJustifyControlLabel:"Align text: justify",codeControlLabel:"Code",codeBlockControlLabel:"Code block",subscriptControlLabel:"Subscript",superscriptControlLabel:"Superscript",unsetColorControlLabel:"Unset color",hrControlLabel:"Horizontal line",linkEditorInputLabel:"Enter URL",linkEditorInputPlaceholder:"https://example.com/",linkEditorExternalLink:"Open link in a new tab",linkEditorInternalLink:"Open link in the same tab",linkEditorSave:"Save",colorPickerCancel:"Cancel",colorPickerClear:"Clear color",colorPickerColorPicker:"Color picker",colorPickerPalette:"Color palette",colorPickerSave:"Save",colorPickerColorLabel:e=>`Set text color ${e}`};var VSt=tt(e=>({root:{position:"relative",border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderRadius:e.fn.radius()}}));const jSt=VSt;var HSt=Object.defineProperty,i2=Object.getOwnPropertySymbols,ape=Object.prototype.hasOwnProperty,spe=Object.prototype.propertyIsEnumerable,AG=(e,t,n)=>t in e?HSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,USt=(e,t)=>{for(var n in t||(t={}))ape.call(t,n)&&AG(e,n,t[n]);if(i2)for(var n of i2(t))spe.call(t,n)&&AG(e,n,t[n]);return e},GSt=(e,t)=>{var n={};for(var r in e)ape.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&i2)for(var r of i2(e))t.indexOf(r)<0&&spe.call(e,r)&&(n[r]=e[r]);return n};const tB=I.exports.forwardRef((e,t)=>{var n=e,{className:r,active:i,icon:a}=n,s=GSt(n,["className","active","icon"]);return x(fx,{...USt({active:i,ref:t},s),children:x(a,{size:"1rem"})})});tB.displayName="@mantine/tiptap/ControlBase";var qSt=Object.defineProperty,RG=Object.getOwnPropertySymbols,KSt=Object.prototype.hasOwnProperty,ZSt=Object.prototype.propertyIsEnumerable,DG=(e,t,n)=>t in e?qSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XSt=(e,t)=>{for(var n in t||(t={}))KSt.call(t,n)&&DG(e,n,t[n]);if(RG)for(var n of RG(t))ZSt.call(t,n)&&DG(e,n,t[n]);return e};function rr({label:e,isActive:t,operation:n,icon:r}){return I.exports.forwardRef((i,a)=>{const{editor:s,labels:o}=Jd(),l=o[e];return x(tB,{...XSt({"aria-label":l,title:l,active:t!=null&&t.name?s==null?void 0:s.isActive(t.name,t.attributes):!1,ref:a,onClick:()=>s==null?void 0:s.chain().focus()[n.name](n.attributes).run(),icon:r},i)})})}var JSt=Object.defineProperty,YSt=Object.defineProperties,QSt=Object.getOwnPropertyDescriptors,LG=Object.getOwnPropertySymbols,eCt=Object.prototype.hasOwnProperty,tCt=Object.prototype.propertyIsEnumerable,FG=(e,t,n)=>t in e?JSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ir=(e,t)=>{for(var n in t||(t={}))eCt.call(t,n)&&FG(e,n,t[n]);if(LG)for(var n of LG(t))tCt.call(t,n)&&FG(e,n,t[n]);return e},ar=(e,t)=>YSt(e,QSt(t));const nCt=rr({label:"boldControlLabel",icon:e=>x(YAe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"bold"},operation:{name:"toggleBold"}}),rCt=rr({label:"italicControlLabel",icon:e=>x(vRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"italic"},operation:{name:"toggleItalic"}}),iCt=rr({label:"underlineControlLabel",icon:e=>x(ARe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"underline"},operation:{name:"toggleUnderline"}}),aCt=rr({label:"strikeControlLabel",icon:e=>x(ERe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"strike"},operation:{name:"toggleStrike"}}),sCt=rr({label:"clearFormattingControlLabel",icon:e=>x(rRe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"unsetAllMarks"}}),oCt=rr({label:"unlinkControlLabel",icon:e=>x(RRe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"unsetLink"}}),lCt=rr({label:"bulletListControlLabel",icon:e=>x(_Re,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"bulletList"},operation:{name:"toggleBulletList"}}),uCt=rr({label:"orderedListControlLabel",icon:e=>x(xRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"orderedList"},operation:{name:"toggleOrderedList"}}),cCt=rr({label:"h1ControlLabel",icon:e=>x(dRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:1}},operation:{name:"toggleHeading",attributes:{level:1}}}),dCt=rr({label:"h2ControlLabel",icon:e=>x(pRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:2}},operation:{name:"toggleHeading",attributes:{level:2}}}),pCt=rr({label:"h3ControlLabel",icon:e=>x(hRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:3}},operation:{name:"toggleHeading",attributes:{level:3}}}),hCt=rr({label:"h4ControlLabel",icon:e=>x(fRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:4}},operation:{name:"toggleHeading",attributes:{level:4}}}),fCt=rr({label:"h5ControlLabel",icon:e=>x(mRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:5}},operation:{name:"toggleHeading",attributes:{level:5}}}),mCt=rr({label:"h6ControlLabel",icon:e=>x(gRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"heading",attributes:{level:6}},operation:{name:"toggleHeading",attributes:{level:6}}}),gCt=rr({label:"blockquoteControlLabel",icon:e=>x(JAe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"blockquote"},operation:{name:"toggleBlockquote"}}),yCt=rr({label:"alignLeftControlLabel",icon:e=>x(ZAe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"setTextAlign",attributes:"left"}}),vCt=rr({label:"alignRightControlLabel",icon:e=>x(XAe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"setTextAlign",attributes:"right"}}),bCt=rr({label:"alignCenterControlLabel",icon:e=>x(qAe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"setTextAlign",attributes:"center"}}),wCt=rr({label:"alignJustifyControlLabel",icon:e=>x(KAe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"setTextAlign",attributes:"justify"}}),xCt=rr({label:"subscriptControlLabel",icon:e=>x(ORe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"subscript"},operation:{name:"toggleSubscript"}}),_Ct=rr({label:"superscriptControlLabel",icon:e=>x(PRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"superscript"},operation:{name:"toggleSuperscript"}}),kCt=rr({label:"codeControlLabel",icon:e=>x(zQ,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"code"},operation:{name:"toggleCode"}}),SCt=rr({label:"codeBlockControlLabel",icon:e=>x(zQ,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"codeBlock"},operation:{name:"toggleCodeBlock"}}),CCt=rr({label:"highlightControlLabel",icon:e=>x(yRe,{...ar(ir({},e),{stroke:1.5})}),isActive:{name:"highlight"},operation:{name:"toggleHighlight"}}),ICt=rr({label:"hrControlLabel",icon:e=>x(bRe,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"setHorizontalRule"}}),$Ct=rr({label:"unsetColorControlLabel",icon:e=>x(FQ,{...ar(ir({},e),{stroke:1.5})}),operation:{name:"unsetColor"}});var TCt=Object.defineProperty,zG=Object.getOwnPropertySymbols,NCt=Object.prototype.hasOwnProperty,ECt=Object.prototype.propertyIsEnumerable,BG=(e,t,n)=>t in e?TCt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,OCt=(e,t)=>{for(var n in t||(t={}))NCt.call(t,n)&&BG(e,n,t[n]);if(zG)for(var n of zG(t))ECt.call(t,n)&&BG(e,n,t[n]);return e},PCt=tt(e=>{const t=e.fn.variant({variant:"light"});return{linkEditor:{display:"flex"},linkEditorInput:{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},linkEditorExternalControl:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):e.white,border:`${G(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,height:G(24),width:G(24),display:"flex",justifyContent:"center",alignItems:"center",borderRadius:e.fn.radius(),"&[data-active]":OCt({backgroundColor:t.background,borderColor:t.border,color:t.color},e.fn.hover({background:t.hover}))},linkEditorSave:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}});const MCt=PCt;var ACt=Object.defineProperty,RCt=Object.defineProperties,DCt=Object.getOwnPropertyDescriptors,a2=Object.getOwnPropertySymbols,ope=Object.prototype.hasOwnProperty,lpe=Object.prototype.propertyIsEnumerable,WG=(e,t,n)=>t in e?ACt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nA=(e,t)=>{for(var n in t||(t={}))ope.call(t,n)&&WG(e,n,t[n]);if(a2)for(var n of a2(t))lpe.call(t,n)&&WG(e,n,t[n]);return e},LCt=(e,t)=>RCt(e,DCt(t)),upe=(e,t)=>{var n={};for(var r in e)ope.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&a2)for(var r of a2(e))t.indexOf(r)<0&&lpe.call(e,r)&&(n[r]=e[r]);return n};const FCt=e=>{var t=e,{size:n}=t,r=upe(t,["size"]);return x(wRe,{...nA({size:n,stroke:1.5},r)})},zCt={initialExternal:!1},BCt=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorLinkControl",zCt,e),{icon:r,popoverProps:i,disableTooltips:a,initialExternal:s}=n,o=upe(n,["icon","popoverProps","disableTooltips","initialExternal"]),{editor:l,labels:u,classNames:c,styles:d,unstyled:p,variant:h}=Jd(),{classes:m}=MCt(null,{name:"RichTextEditor",classNames:c,styles:d,unstyled:p,variant:h}),[g,y]=Y0e(""),[v,b]=I.exports.useState(s),[_,{open:k,close:S}]=Tr(!1),$=()=>{k();const O=l==null?void 0:l.getAttributes("link");y((O==null?void 0:O.href)||""),b((O==null?void 0:O.target)==="_blank")},N=()=>{S(),y(""),b(s)},P=()=>{N(),g===""?l.chain().focus().extendMarkRange("link").unsetLink().run():l.chain().focus().extendMarkRange("link").setLink({href:g,target:v?"_blank":null}).run()},D=O=>{O.key==="Enter"&&(O.preventDefault(),P())};return cS("edit-link",$,!1),B(La,{...nA({trapFocus:!0,shadow:"md",withinPortal:!0,opened:_,onClose:N,offset:-44,zIndex:1e4,unstyled:p},i),children:[x(La.Target,{children:x(tB,{...LCt(nA({icon:r||FCt,"aria-label":u.linkControlLabel,title:u.linkControlLabel,onClick:$,active:l==null?void 0:l.isActive("link"),unstyled:p},o),{ref:t})})}),x(La.Dropdown,{sx:O=>({backgroundColor:O.colorScheme==="dark"?O.colors.dark[7]:O.white}),children:B("div",{className:m.linkEditor,children:[x(Ze,{placeholder:u.linkEditorInputPlaceholder,"aria-label":u.linkEditorInputLabel,type:"url",value:g,onChange:y,classNames:{input:m.linkEditorInput},onKeyDown:D,unstyled:p,rightSection:x(is,{label:v?u.linkEditorExternalLink:u.linkEditorInternalLink,events:{hover:!0,focus:!0,touch:!0},withinPortal:!0,withArrow:!0,disabled:a,unstyled:p,zIndex:1e4,children:x(Z1,{onClick:()=>b(O=>!O),"data-active":v||void 0,className:m.linkEditorExternalControl,unstyled:p,children:x(oRe,{size:G(14),stroke:1.5})})})}),x(Ct,{variant:"default",onClick:P,className:m.linkEditorSave,unstyled:p,children:u.linkEditorSave})]})})]})});var WCt=Object.defineProperty,VCt=Object.defineProperties,jCt=Object.getOwnPropertyDescriptors,s2=Object.getOwnPropertySymbols,cpe=Object.prototype.hasOwnProperty,dpe=Object.prototype.propertyIsEnumerable,VG=(e,t,n)=>t in e?WCt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aO=(e,t)=>{for(var n in t||(t={}))cpe.call(t,n)&&VG(e,n,t[n]);if(s2)for(var n of s2(t))dpe.call(t,n)&&VG(e,n,t[n]);return e},HCt=(e,t)=>VCt(e,jCt(t)),UCt=(e,t)=>{var n={};for(var r in e)cpe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&s2)for(var r of s2(e))t.indexOf(r)<0&&dpe.call(e,r)&&(n[r]=e[r]);return n};const GCt={},ppe=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorColorPickerControl",GCt,e),{popoverProps:r,colors:i,colorPickerProps:a}=n,s=UCt(n,["popoverProps","colors","colorPickerProps"]),{editor:o,labels:l,unstyled:u}=Jd(),[c,{toggle:d,close:p}]=Tr(!1),[h,m]=I.exports.useState("palette"),g=Za(),y=(o==null?void 0:o.getAttributes("textStyle").color)||(g.colorScheme==="dark"?g.colors.dark[1]:g.black),v=(k,S=!0)=>{o.chain().focus().setColor(k).run(),S&&p()},b=()=>{o.chain().focus().unsetColor().run(),p()},_=i.map((k,S)=>x(c1,{component:"button",color:k,onClick:()=>v(k),size:26,radius:"xs",sx:{cursor:"pointer"},title:l.colorPickerColorLabel(k),"aria-label":l.colorPickerColorLabel(k),unstyled:u},S));return B(La,{...aO({opened:c,withinPortal:!0,trapFocus:!0,onClose:p,unstyled:u},r),children:[x(La.Target,{children:x(fx,{...HCt(aO({"aria-label":l.colorPickerControlLabel,title:l.colorPickerControlLabel},s),{ref:t,onClick:d}),children:x(c1,{color:y,size:14,unstyled:u})})}),B(La.Dropdown,{sx:()=>({backgroundColor:g.colorScheme==="dark"?g.colors.dark[7]:g.white}),children:[h==="palette"&&x(VY,{cols:7,spacing:2,children:_}),h==="colorPicker"&&x(ZR,{...aO({defaultValue:y,onChange:k=>v(k,!1),unstyled:u},a)}),x(is.Group,{closeDelay:200,children:B(me,{position:"right",spacing:"xs",mt:"sm",children:[h==="palette"&&x(Le,{variant:"default",onClick:p,unstyled:u,title:l.colorPickerCancel,"aria-label":l.colorPickerCancel,children:x(pi,{stroke:1.5,size:"1rem"})}),x(Le,{variant:"default",onClick:b,unstyled:u,title:l.colorPickerClear,"aria-label":l.colorPickerClear,children:x(FQ,{stroke:1.5,size:"1rem"})}),h==="palette"?x(Le,{variant:"default",onClick:()=>m("colorPicker"),unstyled:u,title:l.colorPickerColorPicker,"aria-label":l.colorPickerColorPicker,children:x(aRe,{stroke:1.5,size:"1rem"})}):x(Le,{variant:"default",onClick:()=>m("palette"),unstyled:u,"aria-label":l.colorPickerPalette,title:l.colorPickerPalette,children:x($Re,{stroke:1.5,size:"1rem"})}),h==="colorPicker"&&x(Le,{variant:"default",onClick:p,unstyled:u,title:l.colorPickerSave,"aria-label":l.colorPickerSave,children:x(eRe,{stroke:1.5,size:"1rem"})})]})})]})]})});ppe.displayName="@mantine/tiptap/ColorPickerControl";var qCt=Object.defineProperty,KCt=Object.defineProperties,ZCt=Object.getOwnPropertyDescriptors,o2=Object.getOwnPropertySymbols,hpe=Object.prototype.hasOwnProperty,fpe=Object.prototype.propertyIsEnumerable,jG=(e,t,n)=>t in e?qCt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XCt=(e,t)=>{for(var n in t||(t={}))hpe.call(t,n)&&jG(e,n,t[n]);if(o2)for(var n of o2(t))fpe.call(t,n)&&jG(e,n,t[n]);return e},JCt=(e,t)=>KCt(e,ZCt(t)),YCt=(e,t)=>{var n={};for(var r in e)hpe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&o2)for(var r of o2(e))t.indexOf(r)<0&&fpe.call(e,r)&&(n[r]=e[r]);return n};const QCt={},eIt=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditorColorControl",QCt,e),{color:r}=n,i=YCt(n,["color"]),{editor:a,labels:s,unstyled:o}=Jd(),l=(a==null?void 0:a.getAttributes("textStyle").color)||null,u=s.colorControlLabel(r);return x(fx,{...JCt(XCt({active:l===r,"aria-label":u,title:u,onClick:()=>a.chain().focus().setColor(r).run()},i),{ref:t}),children:x(c1,{color:r,size:14,unstyled:o})})});var tIt=Object.defineProperty,nIt=Object.defineProperties,rIt=Object.getOwnPropertyDescriptors,l2=Object.getOwnPropertySymbols,mpe=Object.prototype.hasOwnProperty,gpe=Object.prototype.propertyIsEnumerable,HG=(e,t,n)=>t in e?tIt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sO=(e,t)=>{for(var n in t||(t={}))mpe.call(t,n)&&HG(e,n,t[n]);if(l2)for(var n of l2(t))gpe.call(t,n)&&HG(e,n,t[n]);return e},iIt=(e,t)=>nIt(e,rIt(t)),aIt=(e,t)=>{var n={};for(var r in e)mpe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&l2)for(var r of l2(e))t.indexOf(r)<0&&gpe.call(e,r)&&(n[r]=e[r]);return n};const sIt={withCodeHighlightStyles:!0,withTypographyStyles:!0},st=I.exports.forwardRef((e,t)=>{const n=Ue("RichTextEditor",sIt,e),{editor:r,children:i,className:a,labels:s,withCodeHighlightStyles:o,withTypographyStyles:l,classNames:u,styles:c,unstyled:d,variant:p}=n,h=aIt(n,["editor","children","className","labels","withCodeHighlightStyles","withTypographyStyles","classNames","styles","unstyled","variant"]),{classes:m,cx:g}=jSt(null,{name:"RichTextEditor",classNames:u,styles:c,unstyled:d,variant:p}),y=I.exports.useMemo(()=>sO(sO({},WSt),s),[s]);return x(lSt,{value:{editor:r,labels:y,withCodeHighlightStyles:o,withTypographyStyles:l,classNames:u,styles:c,unstyled:d,variant:p},children:x(vt,{...iIt(sO({className:g(m.root,a)},h),{ref:t}),children:i})})});st.Content=Xde;st.Control=fx;st.ControlsGroup=tpe;st.Toolbar=ipe;st.Bold=nCt;st.Italic=rCt;st.Strikethrough=aCt;st.Underline=iCt;st.ClearFormatting=sCt;st.H1=cCt;st.H2=dCt;st.H3=pCt;st.H4=hCt;st.H5=fCt;st.H6=mCt;st.BulletList=lCt;st.OrderedList=uCt;st.Link=BCt;st.Unlink=oCt;st.Blockquote=gCt;st.AlignLeft=yCt;st.AlignRight=vCt;st.AlignCenter=bCt;st.AlignJustify=wCt;st.Superscript=_Ct;st.Subscript=xCt;st.Code=kCt;st.CodeBlock=SCt;st.ColorPicker=ppe;st.Color=eIt;st.Highlight=CCt;st.Hr=ICt;st.UnsetColor=$Ct;st.displayName="@mantine/tiptap/RichTextEditor";function km({editor:e}){const[t,n]=I.exports.useState(0);return I.exports.useEffect(()=>{const r=()=>{const s=window.innerHeight;let o;s>=919?o=625-.9*(919-s):s>838?o=625-2.444*(919-s):s>662?o=427-.898*(838-s):(s>486,o=269-.886*(662-s)),o-=80,n(Math.max(o,0))};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),x(UR,{children:B(st,{editor:e,w:"44vw",children:[B(st.Toolbar,{sticky:!0,stickyOffset:60,children:[B(st.ControlsGroup,{children:[x(st.Bold,{}),x(st.Italic,{}),x(st.Underline,{}),x(st.Strikethrough,{}),x(st.ClearFormatting,{}),x(st.Highlight,{}),x(st.Code,{})]}),B(st.ControlsGroup,{children:[x(st.H1,{}),x(st.H2,{}),x(st.H3,{}),x(st.H4,{})]}),B(st.ControlsGroup,{children:[x(st.Blockquote,{}),x(st.Hr,{}),x(st.BulletList,{}),x(st.OrderedList,{}),x(st.Subscript,{}),x(st.Superscript,{})]}),B(st.ControlsGroup,{children:[x(st.AlignLeft,{}),x(st.AlignCenter,{}),x(st.AlignJustify,{}),x(st.AlignRight,{})]}),B(st.ControlsGroup,{children:[x(st.ColorPicker,{colors:["#25262b","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),x(st.UnsetColor,{})]})]}),x(st.Content,{style:{height:`${t}px`,overflow:"auto"}})]})})}function F1({reportId:e}){const{reports:t,updateReport:n}=Gu(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(b=>b.id===e)),{dateFormat:s}=Zt(),[o,l]=I.exports.useState(i==null?void 0:i.title),[u]=Kt(o,500),c=I.exports.useRef(0),[d]=Kt(c.current,2500),p=I.exports.useRef(!1);I.exports.useEffect(()=>{const b=t.find(_=>_.id===e);b&&(a(b),!p.current&&h&&b.content&&(p.current=!0,h.commands.setContent(b.content)))},[t,e]);const h=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),xm,_m.configure({limit:1e5})],content:i==null?void 0:i.content}),m=I.exports.useRef(!1);I.exports.useEffect(()=>{!h||!(i!=null&&i.content)||m.current||(m.current=!0,h.commands.setContent(i.content),i!=null&&i.title&&l(i.title))},[h,i]),I.exports.useEffect(()=>{!i||n(i.id,{...i,title:u})},[u]),I.exports.useEffect(()=>{const b=h==null?void 0:h.getHTML();!i||b===void 0||n(i.id,{...i,content:h==null?void 0:h.getHTML()})},[d]),I.exports.useEffect(()=>{if(h){const b=()=>{c.current++};return h.on("update",b),()=>{h.off("update",b)}}},[h]),I.exports.useEffect(()=>{h&&h.setOptions({editorProps:{handlePaste:(b,_,k)=>{const S=_.clipboardData,$=S==null?void 0:S.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test($||"")&&$?(_.preventDefault(),h.commands.setImage({src:$}),!0):!1}}})},[h]);const g=I.exports.useCallback(()=>{r({title:"reports",component:x(LM,{})})},[i,r]),y=I.exports.useCallback(()=>{const b={...i,title:o,content:h==null?void 0:h.getHTML()};Ee("saveReport",b).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{title:o,content:h==null?void 0:h.getHTML()}),Ir(j.mdt,j.saved_successfully)})},[i,o,h]),v=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeReport",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"reports",component:x(LM,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,h:"100%",style:{alignItems:"start"},children:[B(Ce,{w:"59%",h:"100%",justify:"flex-start",spacing:10,children:[x(Bt,{w:"100%",h:80,color:"dark.6",radius:"xs",px:10,shadow:"xs",children:B(Ce,{h:"100%",justify:"center",spacing:5,children:[B(me,{position:"apart",children:[x(Ze,{variant:"filled",value:o||"",onChange:b=>l(b.currentTarget.value),sx:{input:{fontSize:18,fontWeight:630}},w:"60%"}),B(me,{spacing:10,children:[B(xt,{radius:"sm",children:["ID: ",i.id===-1&&"Temporary"||i.id]}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:y,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:v,children:x(vo,{})})]})]}),B(Te,{fw:550,size:12,color:"gray.6",children:[i.creator," - ",new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})}),x(Bt,{w:"100%",h:"100%",color:"dark.7",radius:"xs",p:20,shadow:"xs",children:x(km,{editor:h})})]}),x(ll,{page:"report",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function oIt({searchQuery:e}){const{policeReports:t,updatePoliceReport:n}=d1(),{updateTab:r}=gn(),{dateFormat:i}=Zt(),a=I.exports.useMemo(()=>t.filter(o=>{var l,u,c,d;return((l=o==null?void 0:o.title)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))||((u=o==null?void 0:o.creator)==null?void 0:u.toLowerCase().includes(e.toLowerCase()))||((c=o==null?void 0:o.phoneNumber)==null?void 0:c.toLowerCase().includes(e.toLowerCase()))||((d=o==null?void 0:o.id)==null?void 0:d.toString().includes(e.toLowerCase()))}).sort((o,l)=>l.id-o.id),[e,t]),s=({index:o,style:l})=>{const u=a[o];return!u||Object.keys(u).length===0||!(u!=null&&u.title)||!(u!=null&&u.id)||u.id<=-1||!By(u)?null:x("div",{style:{...l},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getPoliceReport",u.id).then(c=>{!c||!u.id||n(u.id,c)}),r({title:"policeReports",component:x(ype,{reportId:u.id})})},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[x(Te,{fw:600,size:16,children:u.title}),u.creator&&x(Te,{size:12,color:"gray.5",children:u.creator}),x(Te,{fw:500,size:12,color:"gray.5",children:new Date(u.date*1e3).toLocaleString([],i||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:a.length,itemSize:110,width:"100%",children:s})}function rA(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200);return B(Fe,{children:[x(_a,{title:j.policeReports,searchQuery:e,setSearchQuery:t}),x(oIt,{searchQuery:n})]})}function ype({reportId:e}){const{policeReports:t,updatePoliceReport:n}=d1(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(u=>u.id===e)),{dateFormat:s}=Zt();I.exports.useEffect(()=>{a(t.find(u=>u.id===e))},[t]);const o=I.exports.useCallback(()=>{Ee("savePoliceReport",i).then(()=>{Ir(j.mdt,j.saved_successfully)})},[i]),l=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removePoliceReport",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"policeReports",component:x(rA,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[x(me,{w:"85%",children:x(Ce,{w:"70%",h:160,align:"flex-start",justify:"flex-start",spacing:0,children:x(Mn,{h:"100%",scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.title,variant:"filled",value:i.title,size:"xs",readOnly:!0}),x(Ze,{label:j.date,variant:"filled",value:new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),size:"xs",readOnly:!0}),x(Ze,{label:j.creator,variant:"filled",value:i.creator,size:"xs",readOnly:!0,disabled:!i.creator}),x(Ze,{label:j.phone_number,variant:"filled",value:i.phoneNumber,size:"xs",readOnly:!0,disabled:!i.phoneNumber})]})})})}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:()=>{r({title:"policeReports",component:x(rA,{})})},children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:o,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:l,children:x(vo,{})})]})})]}),x(xs,{label:"Notes",minRows:28,value:i.content,readOnly:!0})]})}),x(ll,{page:"policeReport",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function u2({pageId:e,currentUrl:t,currentPhotos:n,updateData:r}){const[i,a]=I.exports.useState(t||""),s=()=>{Tn.closeAll(),Ee("hideUI"),Ee("takePhoto","photos")};return x(Fe,{children:B(Ce,{spacing:20,children:[x(Ze,{label:j.url,placeholder:j.url,value:i,onChange:o=>a(o.currentTarget.value),rightSection:x(Le,{onClick:s,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{if(!i)return;r(e,{sideBarData:{photos:[...n||[],i]}}),Tn.closeAll()},children:j.confirm})})]})})}function lIt({searchQuery:e,filters:t}){const{weapons:n,updateWeapon:r}=nw(),{updateTab:i}=gn(),{dateFormat:a}=Zt(),s=I.exports.useMemo(()=>n.filter(l=>{var d,p,h,m,g;if(!l||Object.keys(l).length===0||!(l!=null&&l.name)||!(l!=null&&l.id)||!By(l))return!1;const u=((d=l==null?void 0:l.name)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l==null?void 0:l.creator)==null?void 0:p.toLowerCase().includes(e.toLowerCase()))||((h=l==null?void 0:l.sideBarData)==null?void 0:h.owners)&&Array.isArray(l.sideBarData.owners)&&l.sideBarData.owners.some(y=>{var v;return(v=y==null?void 0:y.name)==null?void 0:v.toLowerCase().includes(e.toLowerCase())})||((m=l==null?void 0:l.serial)==null?void 0:m.toLowerCase().includes(e.toLowerCase()))||((g=l==null?void 0:l.id)==null?void 0:g.toString())===e;if(!t)return u;const c=t.every(y=>{if(!(l!=null&&l.sideBarData))return!1;let v;if(y.type in l.sideBarData?v=l.sideBarData[y.type]:v=l[y.type],Array.isArray(v)&&v.length>0){if(typeof v[0]=="object")return v==null?void 0:v.some(b=>{var _;return(_=Object.values(b))==null?void 0:_.some(k=>typeof k=="string"?k==null?void 0:k.toLowerCase().includes(y.value.toLowerCase()):!1)});if(typeof v[0]=="string")return v==null?void 0:v.some(b=>b==null?void 0:b.toLowerCase().includes(y.value.toLowerCase()))}return typeof v=="string"?v==null?void 0:v.toLowerCase().includes(y.value.toLowerCase()):!1});return u&&c}).sort((l,u)=>u.id-l.id),[e,t,n]),o=({index:l,style:u})=>{var d,p,h;const c=s[l];return!c||Object.keys(c).length===0||!(c!=null&&c.id)||!(c!=null&&c.name)||c.id<=-1?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getWeapon",c.id).then(m=>{!m||!c.id||r(c.id,m)}),i({title:"weapons",component:x(nB,{weaponId:c.id})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:c.image}),B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:(c==null?void 0:c.name)||j.unknown}),B(xt,{radius:"sm",children:["ID: ",c.id||j.unknown]})]}),((d=c==null?void 0:c.sideBarData)==null?void 0:d.owners)&&c.sideBarData.owners.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.owners_list," ",(h=(p=c==null?void 0:c.sideBarData)==null?void 0:p.owners)==null?void 0:h.map(m=>m.name).join(", ")]}),B(Te,{fw:500,size:12,color:"gray.5",children:[c.creator," - ",new Date(c.date*1e3).toLocaleString([],a||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}function iA(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"creator",value:""},{type:"tags",value:""},{type:"owners",value:""}]),{updateTab:o}=gn(),l=()=>{Ee("createWeapon").then(u=>{!u||o({title:"weapons",component:x(nB,{weaponId:u.id})})})};return B(Fe,{children:[x(_a,{title:j.weapons,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setFilters:i,setSearchQuery:t,createNew:l}),x(lIt,{searchQuery:n,filters:r})]})}function nB({weaponId:e}){const{weapons:t,updateWeapon:n}=nw(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(D=>D.id===e)),[s,{open:o,close:l}]=Tr(!1),{dateFormat:u}=Zt(),[c,d]=I.exports.useState(i==null?void 0:i.image),[p,h]=I.exports.useState(i==null?void 0:i.notes),[m,g]=I.exports.useState(i==null?void 0:i.name),[y,v]=I.exports.useState(i==null?void 0:i.serial),[b]=Kt(p,1e3),[_]=Kt(m,500),[k]=Kt(y,500);I.exports.useEffect(()=>{a(t.find(D=>D.id===e))},[t]),I.exports.useEffect(()=>{d(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{p!==(i==null?void 0:i.notes)&&h(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&b&&n(i.id,{notes:b})},[b]),I.exports.useEffect(()=>{i&&_&&n(i.id,{name:_})},[_]),I.exports.useEffect(()=>{i&&k&&n(i.id,{serial:k})},[k]);const S=I.exports.useCallback(()=>{r({title:"weapons",component:x(iA,{})})},[i,r]),$=I.exports.useCallback(()=>{const D={...i,name:m,serial:y,notes:p};Ee("saveWeapon",D).then(()=>{i!=null&&i.id&&n(i.id,{name:m,serial:y,notes:p}),Ir(j.mdt,j.saved_successfully)})},[i,p]),N=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeWeapon",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"weapons",component:x(iA,{})})}})},[i,r]),P=()=>{l(),Ee("hideUI"),Ee("takePhoto","weapon")};return wt("photoTaken",D=>{D.page==="weapon"&&(o(),d(D.url))}),B(Fe,{children:[i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[B(me,{w:"85%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.weapon_name,variant:"filled",value:m,onChange:D=>g(D.currentTarget.value),size:"xs"}),x(Ze,{label:j.creator,variant:"filled",readOnly:!0,value:i.creator,size:"xs"}),x(Ze,{label:j.date,variant:"filled",readOnly:!0,value:new Date(i.date*1e3).toLocaleString([],u||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),size:"xs"}),x(Ze,{label:j.serial_number,variant:"filled",value:y,onChange:D=>v(D.currentTarget.value),size:"xs"})]})})]}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:S,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:$,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:N,children:x(vo,{})})]})})]}),x(xs,{w:"100%",label:j.notes,minRows:28,maxLength:5e4,value:p,onChange:D=>h(D.currentTarget.value)})]})}),x(ll,{page:"weapon",sidebar:i.sideBarData,pageId:i.id,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:c,onChange:D=>d(D.currentTarget.value),rightSection:x(Le,{onClick:P,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.id,{image:c}))},children:j.confirm})})]})})]})}function uIt({currentWeapons:e,pageId:t,updateData:n}){const[r,i]=I.exports.useState([]),{weapons:a}=nw();I.exports.useEffect(()=>{i(e.map(o=>o.toString()))},[]);const s=()=>{const o=r.map(l=>parseInt(l,10));n(t,{sideBarData:{weapons:o}}),Tn.closeAll()};return x(Fe,{children:B(Ce,{spacing:20,children:[x(Ru,{data:a.map(o=>({value:o.id.toString(),label:`${o.name} (ID: ${o.id})`})),value:r,onChange:i,placeholder:j.select_weapons,searchable:!0,clearable:!0,withinPortal:!0,nothingFound:j.nothing_found,limit:25}),x(me,{position:"right",children:x(Ct,{onClick:s,children:j.confirm})})]})})}function cIt({pageTitle:e,sidebar:t,pageId:n,updateData:r}){const[i,{toggle:a}]=Tr(!1),{addTab:s}=gn(),{updateVehicle:o}=Rh(),{employees:l}=Qo(),{players:u}=rD(),{incidents:c,updateIncident:d}=Ed(),{reports:p,updateReport:h}=Gu(),{policeReports:m}=d1(),{updateProfile:g}=Us(),{updateProperty:y}=r$(),{weapons:v,updateWeapon:b}=nw(),{evidence:_,updateEvidence:k}=tw(),{updatePoliceReport:S}=d1(),{tags:$}=Fy(),N=(O,F)=>{const E=async(z,q,K,Z)=>{const te=await z(O);!te||!r||(q(O,te),s({title:Z,component:K}))};switch(t.title){case"vehicles":E(z=>Ee("getVehicle",z),o,x(hD,{vehiclePlate:O}),"vehicles");break;case"properties":E(z=>Ee("getProperty",z),y,x(yce,{propertyId:O}),"properties");break;case"weapons":E(z=>Ee("getWeapon",z),b,x(nB,{weaponId:O}),"weapons");break;case"evidence":E(z=>Ee("getEvidence",z),k,x(R3,{evidenceId:O}),"evidence");break;case"linkedReports":E(z=>Ee("getReport",z),h,x(F1,{reportId:O}),"reports");break;case"linkedIncidents":case"warrants":case"bolos":F?E(z=>Ee("getReport",z),h,x(F1,{reportId:O}),"reports"):E(z=>Ee("getIncident",z),d,x(mx,{incidentId:O}),"incidents");break;case"linkedPoliceReports":E(z=>Ee("getPoliceReport",z),S,x(ype,{reportId:O}),"policeReports");break;case"linkedProfiles":case"employees":case"officers":case"suspects":case"criminals":case"civilians":case"owners":E(z=>Ee("getProfile",z),g,x(A3,{profileId:O}),"profiles");break}},P=()=>{if(!r)return;const O=F=>{Tn.open({centered:!0,title:j[t.title],children:F})};switch(t.title){case"tags":O(x(ZQ,{currentTags:t.data,pageId:n,updateData:r}));break;case"licenses":O(x(gDe,{currentLicenses:t.data,pageId:n,updateData:r}));break;case"evidence":O(x(yDe,{currentEvidence:t.data,pageId:n,updateData:r}));break;case"weapons":O(x(uIt,{currentWeapons:t.data,pageId:n,updateData:r}));break;case"vehicles":O(x(vDe,{currentVehicles:t.data,pageId:n,updateData:r}));break;case"officers":case"criminals":case"suspects":case"civilians":case"owners":O(x(ty,{title:t.title,allPlayers:t.title==="officers"?l:u,currentPlayers:t.data,pageId:n,updateData:r}));break;case"linkedProfiles":O(x(ty,{title:t.title,allPlayers:u,currentPlayers:t.data,pageId:n,includeReason:!0,updateData:r}));break;case"linkedIncidents":O(x(vk,{title:t.title,allReports:c,currentReports:t.data,pageId:n,updateData:r}));break;case"linkedReports":O(x(vk,{title:t.title,allReports:p,currentReports:t.data,pageId:n,updateData:r}));break;case"linkedPoliceReports":O(x(vk,{title:t.title,allReports:m,currentReports:t.data,pageId:n,updateData:r}));break;case"photos":O(x(u2,{pageId:n,currentPhotos:t.data,updateData:r}));break}};t.title==="photos"&&wt("photoTaken",O=>{!r||O.page!=="photos"||Tn.open({centered:!0,title:t.title,children:x(u2,{pageId:n,currentUrl:O.url,currentPhotos:t.data,updateData:r})})});const D=O=>{if(!r)return;const F=(E,z)=>{r(n,{sideBarData:{[E]:t.data.filter(z)}})};switch(t.title){case"tags":F(t.title,E=>E!==O);break;case"licenses":F(t.title,E=>E!==O);break;case"officers":case"suspects":case"criminals":case"civilians":case"owners":case"linkedProfiles":F(t.title,E=>E.identifier!==O);break;case"vehicles":F(t.title,E=>E.plate!==O);break;case"evidence":case"weapons":F(t.title,E=>E!==O);break;default:F(t.title,E=>E.id!==O);break}};return B(Fe,{children:[x(Bt,{w:"100%",h:50,bg:"dark.7",radius:"xs",shadow:"xs",onClick:a,style:{cursor:"pointer"},mb:10,children:B(me,{position:"apart",h:"100%",px:15,children:[x(Te,{size:15,fw:450,children:j[t.title]}),(t.title==="linkedProfiles"||t.title==="tags"||t.title==="licenses"||t.title==="officers"||t.title==="suspects"||t.title==="criminals"||t.title==="civilians"||t.title==="evidence"||t.title==="photos"||t.title==="owners"||e!=="vehicle"&&e!=="profile"&&e!=="evidence"&&e!=="weapon"&&(t.title==="vehicles"||t.title==="linkedIncidents"||t.title==="linkedReports"||t.title==="linkedPoliceReports"||t.title==="weapons"))&&x(Le,{color:"blue",variant:"subtle",onClick:O=>{O.stopPropagation(),P()},children:x(zy,{})})]})}),x(Fe,{children:x(U2,{in:i,children:x(Mn.Autosize,{mah:500,type:"always",scrollbarSize:3,pb:15,children:x(me,{spacing:10,pb:5,children:(!(t!=null&&t.data)&&(t==null?void 0:t.data)!==0||Array.isArray(t.data)&&t.data.length===0)&&x(xt,{color:"dark",children:j.no_sidebar_data.format(j[t.title])})||(t.title==="jobs"||t.title==="charges")&&t.data.map((O,F)=>x(xt,{children:O},F))||t.title==="tags"&&r&&t.data.map((O,F)=>{const E=$.find(z=>z.name===O);return E?x(xt,{style:{backgroundColor:E.color,color:"#ced4da",textShadow:"0px 1px 2px rgba(0, 0, 0, 1.0"},rightSection:x(Le,{size:14,variant:"transparent",onClick:()=>D(O),children:x(pi,{})}),children:O},F):null})||t.title==="criminals"&&r&&t.data.map((O,F)=>x(Fe,{children:x(iLe,{index:F,incidentId:n,item:O,handleBadgeRemove:D})}))||t.title==="vehicles"&&r&&t.data.map((O,F)=>x(Fe,{children:x(sLe,{pageTitle:e,index:F,pageId:n,item:O,canAddBOLO:e!=="profile",handleBadgeRemove:D})}))||(t.title==="driving"||t.title==="shooting"||t.title==="professionalism"||t.title==="generalKnowledge"||t.title==="reports"||t.title==="radio")&&r&&x(aee,{sidebar:t,pageId:n,updateData:r})||(t.title==="officers"||t.title==="suspects"||t.title==="civilians"||t.title==="owners")&&r&&t.data.map((O,F)=>x(xt,{style:{cursor:"pointer"},onClick:()=>N(O.identifier),rightSection:x(Le,{size:14,variant:"transparent",onClick:E=>{E.stopPropagation(),D(O.identifier)},children:x(pi,{})}),children:O.name},F))||t.title==="licenses"&&r&&t.data.map((O,F)=>x(xt,{rightSection:x(Le,{size:14,variant:"transparent",onClick:()=>D(O),children:x(pi,{})}),children:O},F))||t.title==="properties"&&t.data.map((O,F)=>B(xt,{onClick:()=>N(O.id),style:{cursor:"pointer"},children:[O.name," (ID: ",O.id,")"]},F))||t.title==="employees"&&t.data.map((O,F)=>x(xt,{onClick:()=>N(O.identifier),style:{cursor:"pointer"},children:O.name},F))||t.title==="evidence"&&t.data.map((O,F)=>{const E=_.find(z=>z.id===O);return E?x(is,{p:5,label:x("img",{src:E.image,width:250}),position:"left",color:"dark.6",hidden:!ny(E.image),withArrow:!0,withinPortal:!0,children:B(xt,{onClick:()=>N(O),style:{cursor:"pointer"},rightSection:x(Le,{size:14,variant:"transparent",onClick:z=>{z.stopPropagation(),D(O)},children:x(pi,{})}),children:[E.name," - (ID: ",O,")"]})},F):null})||t.title==="weapons"&&t.data.map((O,F)=>{const E=v.find(z=>z.id===O);return E?x(is,{p:5,label:x("img",{src:E.image,width:250}),position:"left",color:"dark.6",hidden:!ny(E.image),withArrow:!0,withinPortal:!0,children:B(xt,{onClick:()=>N(O),style:{cursor:"pointer"},rightSection:e!=="profile"&&x(Le,{size:14,variant:"transparent",onClick:z=>{z.stopPropagation(),D(O)},children:x(pi,{})}),children:[E.name," - (ID: ",O,")"]})},F):null})||(t.title==="linkedReports"||t.title==="linkedIncidents"||t.title==="linkedPoliceReports")&&Og(t.data).map((O,F)=>{let E=null;return t.title==="linkedReports"?E=p.find(z=>z.id===O):t.title==="linkedIncidents"?E=c.find(z=>z.id===O):t.title==="linkedPoliceReports"&&(E=m.find(z=>z.id===O)),E?x(xt,{onClick:()=>N(O),style:{cursor:"pointer"},rightSection:e!=="evidence"&&e!=="weapon"&&e!=="profile"&&e!=="vehicle"&&x(Le,{size:14,onClick:z=>{z.stopPropagation(),D(O)},children:x(pi,{})}),children:`${E.title} (ID: ${O})`},F):null})||t.title==="warrants"&&t.data.map((O,F)=>B(xt,{onClick:()=>N(O.incidentId),style:{cursor:"pointer"},children:[O.incidentTitle," (ID: ",O.incidentId,")"]},F))||t.title==="bolos"&&t.data.map((O,F)=>B(xt,{onClick:()=>N(O.id,O.isReport),style:{cursor:"pointer"},children:[O.id," (ID: ",O.title,")"]},F))||t.title==="linkedProfiles"&&t.data.map((O,F)=>B(xt,{onClick:()=>N(O.identifier),style:{cursor:"pointer"},rightSection:x(Le,{size:14,variant:"transparent",onClick:E=>{E.stopPropagation(),D(O.identifier)},children:x(pi,{})}),children:[O.name,": ",O.reason]},F))||t.title==="photos"&&t.data.map((O,F)=>x(is,{p:5,label:x("img",{src:O,width:576}),position:"left",color:"dark.6",withArrow:!0,withinPortal:!0,children:x(ws,{src:O,maw:192,style:{cursor:"pointer"},onClick:()=>{!r||Tn.openConfirmModal({title:j.are_you_sure,centered:!0,children:x(Te,{size:"sm",children:j.are_you_sure_remove_photo}),labels:{confirm:j.confirm,cancel:j.cancel},onConfirm:()=>r(n,{sideBarData:{photos:t.data.filter(E=>E!==E)}})})}})},F))||t.data.map((O,F)=>x(xt,{children:O},F))})})})})]})}function ll({page:e,sidebar:t,pageId:n,updateData:r}){var s;const{sidebarOrder:i}=Zt();if(!t||((s=Object.keys(t))==null?void 0:s.length)<=0)return null;const a=Object.keys(t).filter(o=>i.includes(o)).sort((o,l)=>{const u=i.indexOf(o),c=i.indexOf(l);return(u===-1?i.length:u)-(c===-1?i.length:c)});return x(Mn,{w:"38%",h:"81vh",type:"never",children:x(Ce,{justify:"flex-start",h:"100%",spacing:0,children:a.map((o,l)=>x(cIt,{pageTitle:e,sidebar:{title:o,data:t[o]},pageId:n,updateData:r},l))})})}function mx({incidentId:e}){const{incidents:t,updateIncident:n}=Ed(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(b=>b.id===e)),{dateFormat:s}=Zt(),[o,l]=I.exports.useState(i==null?void 0:i.title),[u]=Kt(o,500),c=I.exports.useRef(0),[d]=Kt(c.current,2500),p=I.exports.useRef(!1);I.exports.useEffect(()=>{const b=t.find(_=>_.id===e);b&&(a(b),!p.current&&h&&b.content&&(p.current=!0,h.commands.setContent(b.content)))},[t,e]);const h=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),xm,_m.configure({limit:1e5})],content:i==null?void 0:i.content}),m=I.exports.useRef(!1);I.exports.useEffect(()=>{!h||!(i!=null&&i.content)||m.current||(m.current=!0,h.commands.setContent(i.content),i!=null&&i.title&&l(i.title))},[h,i]),I.exports.useEffect(()=>{!i||n(i.id,{...i,title:u})},[u]),I.exports.useEffect(()=>{const b=h==null?void 0:h.getHTML();!i||b===void 0||n(i.id,{...i,content:h==null?void 0:h.getHTML()})},[d]),I.exports.useEffect(()=>{if(h){const b=()=>{c.current++};return h.on("update",b),()=>{h.off("update",b)}}},[h]),I.exports.useEffect(()=>{h&&h.setOptions({editorProps:{handlePaste:(b,_,k)=>{const S=_.clipboardData,$=S==null?void 0:S.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test($||"")&&$?(_.preventDefault(),h.commands.setImage({src:$}),!0):!1}}})},[h]);const g=I.exports.useCallback(()=>{r({title:"incidents",component:x(TP,{})})},[i,r]),y=I.exports.useCallback(()=>{const b={...i,title:o,content:h==null?void 0:h.getHTML()};Ee("saveIncident",b).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{title:o,content:h==null?void 0:h.getHTML()}),Ir(j.mdt,j.saved_successfully)})},[i,o,h]),v=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeIncident",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"incidents",component:x(TP,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,h:"100%",style:{alignItems:"start"},children:[B(Ce,{w:"59%",h:"100%",justify:"flex-start",spacing:10,children:[x(Bt,{w:"100%",h:80,color:"dark.6",radius:"xs",px:10,shadow:"xs",children:B(Ce,{h:"100%",justify:"center",spacing:5,children:[B(me,{position:"apart",children:[x(Ze,{variant:"filled",value:o||"",onChange:b=>l(b.currentTarget.value),sx:{input:{fontSize:18,fontWeight:630}},w:"60%"}),B(me,{spacing:10,children:[B(xt,{radius:"sm",children:["ID: ",i.id===-1&&"Temporary"||i.id]}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:y,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:v,children:x(vo,{})})]})]}),B(Te,{fw:550,size:12,color:"gray.6",children:[i.creator," - ",new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})}),x(Bt,{w:"100%",h:"100%",color:"dark.7",radius:"xs",p:20,shadow:"xs",children:x(km,{editor:h})})]}),x(ll,{page:"incident",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function Xi(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function dIt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const j_=43200,UG=1440;let pIt={};function hIt(){return pIt}function GG(e){const t=Xi(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ok(e,t){const n=Xi(e),r=Xi(t),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function fIt(e){return dIt(e,Date.now())}function mIt(e,t){const n=Xi(e),r=Xi(t),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function gIt(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function yIt(e,t){return+Xi(e)-+Xi(t)}function vIt(e){const t=Xi(e);return t.setHours(23,59,59,999),t}function bIt(e){const t=Xi(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wIt(e){const t=Xi(e);return+vIt(t)==+bIt(t)}function xIt(e,t){const n=Xi(e),r=Xi(t),i=Ok(n,r),a=Math.abs(mIt(n,r));let s;if(a<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let o=Ok(n,r)===-i;wIt(Xi(e))&&a===1&&Ok(e,r)===1&&(o=!1),s=i*(a-Number(o))}return s===0?0:s}function _It(e,t,n){const r=yIt(e,t)/1e3;return gIt(n==null?void 0:n.roundingMethod)(r)}const kIt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},SIt=(e,t,n)=>{let r;const i=kIt[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function oO(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const CIt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},IIt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$It={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TIt={date:oO({formats:CIt,defaultWidth:"full"}),time:oO({formats:IIt,defaultWidth:"full"}),dateTime:oO({formats:$It,defaultWidth:"full"})},NIt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EIt=(e,t,n,r)=>NIt[e];function tb(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[s]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const OIt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PIt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MIt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AIt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},RIt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DIt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LIt=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FIt={ordinalNumber:LIt,era:tb({values:OIt,defaultWidth:"wide"}),quarter:tb({values:PIt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:tb({values:MIt,defaultWidth:"wide"}),day:tb({values:AIt,defaultWidth:"wide"}),dayPeriod:tb({values:RIt,defaultWidth:"wide",formattingValues:DIt,defaultFormattingWidth:"wide"})};function nb(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?BIt(o,d=>d.test(s)):zIt(o,d=>d.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=t.slice(s.length);return{value:u,rest:c}}}function zIt(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function BIt(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function WIt(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let s=e.valueCallback?e.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(i.length);return{value:s,rest:o}}}const VIt=/^(\d+)(th|st|nd|rd)?/i,jIt=/\d+/i,HIt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},UIt={any:[/^b/i,/^(a|c)/i]},GIt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qIt={any:[/1/i,/2/i,/3/i,/4/i]},KIt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ZIt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XIt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JIt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},YIt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},QIt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},e2t={ordinalNumber:WIt({matchPattern:VIt,parsePattern:jIt,valueCallback:e=>parseInt(e,10)}),era:nb({matchPatterns:HIt,defaultMatchWidth:"wide",parsePatterns:UIt,defaultParseWidth:"any"}),quarter:nb({matchPatterns:GIt,defaultMatchWidth:"wide",parsePatterns:qIt,defaultParseWidth:"any",valueCallback:e=>e+1}),month:nb({matchPatterns:KIt,defaultMatchWidth:"wide",parsePatterns:ZIt,defaultParseWidth:"any"}),day:nb({matchPatterns:XIt,defaultMatchWidth:"wide",parsePatterns:JIt,defaultParseWidth:"any"}),dayPeriod:nb({matchPatterns:YIt,defaultMatchWidth:"any",parsePatterns:QIt,defaultParseWidth:"any"})},t2t={code:"en-US",formatDistance:SIt,formatLong:TIt,formatRelative:EIt,localize:FIt,match:e2t,options:{weekStartsOn:0,firstWeekContainsDate:1}};function n2t(e,t,n){var m,g;const r=hIt(),i=(g=(m=n==null?void 0:n.locale)!=null?m:r.locale)!=null?g:t2t,a=2520,s=Ok(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s});let l,u;s>0?(l=Xi(t),u=Xi(e)):(l=Xi(e),u=Xi(t));const c=_It(u,l),d=(GG(u)-GG(l))/1e3,p=Math.round((c-d)/60);let h;if(p<2)return n!=null&&n.includeSeconds?c<5?i.formatDistance("lessThanXSeconds",5,o):c<10?i.formatDistance("lessThanXSeconds",10,o):c<20?i.formatDistance("lessThanXSeconds",20,o):c<40?i.formatDistance("halfAMinute",0,o):c<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):p===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",p,o);if(p<45)return i.formatDistance("xMinutes",p,o);if(p<90)return i.formatDistance("aboutXHours",1,o);if(p<UG){const y=Math.round(p/60);return i.formatDistance("aboutXHours",y,o)}else{if(p<a)return i.formatDistance("xDays",1,o);if(p<j_){const y=Math.round(p/UG);return i.formatDistance("xDays",y,o)}else if(p<j_*2)return h=Math.round(p/j_),i.formatDistance("aboutXMonths",h,o)}if(h=xIt(u,l),h<12){const y=Math.round(p/j_);return i.formatDistance("xMonths",y,o)}else{const y=h%12,v=Math.trunc(h/12);return y<3?i.formatDistance("aboutXYears",v,o):y<9?i.formatDistance("overXYears",v,o):i.formatDistance("almostXYears",v+1,o)}}function rB(e,t){return n2t(e,fIt(e),t)}function r2t(){const{addTab:e}=gn(),{profiles:t}=Us(),[n,r]=I.exports.useState(t.filter(c=>{var d;return((d=c.sideBarData)==null?void 0:d.warrants)&&c.sideBarData.warrants.length>0})),[i,a]=I.exports.useState(""),[s]=Kt(i,200);I.exports.useEffect(()=>{r(t.filter(c=>{var d;return((d=c.sideBarData)==null?void 0:d.warrants)&&c.sideBarData.warrants.length>0}))},[t]);const o=I.exports.useMemo(()=>n.filter(c=>{var d,p;return((d=c==null?void 0:c.name)==null?void 0:d.toLowerCase().includes(s.toLowerCase()))||((p=c==null?void 0:c.identifier)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))}),[s,n]),l=I.exports.useMemo(()=>o.flatMap(c=>{var d,p;return(p=(d=c.sideBarData)==null?void 0:d.warrants)==null?void 0:p.map(h=>({...h,profile:c}))}),[o]),u=({index:c,style:d})=>{const p=l[c],h=p==null?void 0:p.profile;return!p||!h?null:B("div",{style:d,children:[x(Ct,{w:"100%",h:70,variant:"subtle",color:"gray",styles:{inner:{justifyContent:"start"}},leftIcon:x(Yn,{size:40,src:h.image}),onClick:()=>e({title:"incidents",component:x(mx,{incidentId:p.incidentId})}),children:B(Ce,{w:"100%",spacing:1,align:"flex-start",children:[p.expires&&B(xt,{color:"gray",px:5,children:[j.expires," ",rB(p.expires,{addSuffix:!0})]}),x(Te,{fw:650,size:15,children:h.name}),B(Te,{size:13,style:{wordBreak:"break-all"},children:[p.incidentTitle," (ID: ",p.incidentId,")"]})]})}),x(Fs,{w:"90%",ml:"5%"})]},`${h.identifier}-${p.incidentId}`)};return x(Bt,{w:450,h:"50%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.warrants}),x(Bt,{h:"30vh",p:"sm",bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-start",spacing:10,children:[x(Ze,{placeholder:j.search,rightSection:x(a$,{}),w:"100%",value:i,onChange:c=>a(c.currentTarget.value)}),n.length===0?x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"10vh",children:j.no_warrants_yet}):x(na,{height:innerHeight*.3,itemCount:l.length,itemSize:75,width:"100%",children:u})]})})]})})}function i2t(){const{addTab:e}=gn(),{vehicles:t}=Rh(),{updateIncident:n}=Ed(),{updateReport:r}=Gu(),[i,a]=I.exports.useState(t.filter(p=>{var h;return((h=p.sideBarData)==null?void 0:h.bolos)&&p.sideBarData.bolos.length>0})),[s,o]=I.exports.useState(""),[l]=Kt(s,200);I.exports.useEffect(()=>{a(t.filter(p=>{var h;return((h=p.sideBarData)==null?void 0:h.bolos)&&p.sideBarData.bolos.length>0}))},[t]);const u=I.exports.useMemo(()=>i.filter(p=>{var h,m,g;return((h=p==null?void 0:p.name)==null?void 0:h.toLowerCase().includes(l.toLowerCase()))||((m=p==null?void 0:p.owner)==null?void 0:m.toLowerCase().includes(l.toLowerCase()))||((g=p==null?void 0:p.plate)==null?void 0:g.toLowerCase().includes(l.toLowerCase()))}),[l,i]),c=I.exports.useMemo(()=>u.flatMap(p=>{var h,m;return(m=(h=p.sideBarData)==null?void 0:h.bolos)==null?void 0:m.map(g=>({...g,vehicle:p}))}),[u]),d=({index:p,style:h})=>{const m=c[p],g=m==null?void 0:m.vehicle;return!m||!g?null:B("div",{style:h,children:[x(Ct,{h:70,w:"100%",variant:"subtle",color:"gray",styles:{inner:{justifyContent:"start"}},leftIcon:x(Yn,{size:40,src:g.image}),onClick:()=>{m.isReport?(Ee("getReport",m.id).then(y=>{!y||!m.id||r(m.id,y)}),e({title:"reports",component:x(F1,{reportId:m.id})})):(Ee("getIncident",m.id).then(y=>{!y||!m.id||n(m.id,y)}),e({title:"incidents",component:x(mx,{incidentId:m.id})}))},children:B(Ce,{w:"100%",spacing:1,align:"flex-start",children:[m.expires&&B(xt,{color:"gray",px:5,children:[j.expires," ",rB(m.expires,{addSuffix:!0})]}),B(Te,{fw:650,size:15,children:[g.name," [",g.plate,"]"]}),B(Te,{size:13,style:{wordBreak:"break-all"},children:[m.title," (ID: ",m.id,")"]})]})}),x(Fs,{w:"90%",ml:"5%"})]},`${g.plate}-${m.id}`)};return x(Bt,{w:450,h:"50%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.bolos}),x(Bt,{h:"30vh",p:"sm",bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-start",spacing:10,children:[x(Ze,{placeholder:j.search,rightSection:x(a$,{}),w:"100%",value:s,onChange:p=>o(p.currentTarget.value)}),i.length===0?x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"10vh",children:j.no_bolos_yet}):x(na,{height:innerHeight*.3,itemCount:c.length,itemSize:75,width:"100%",children:d})]})})]})})}function a2t(){return x(UR,{children:B(me,{position:"apart",spacing:30,h:"80vh",style:{overflow:"auto"},children:[x(LRe,{}),x(FRe,{}),B(Ce,{spacing:30,h:"100%",children:[x(r2t,{}),x(i2t,{})]})]})})}function vpe(e,t){const n=I.exports.useRef(t);I.exports.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}const s2t=1;function o2t(e){return Object.freeze({__version:s2t,map:e})}function l2t(e,t){return Object.freeze({...e,...t})}const bpe=I.exports.createContext(null),wpe=bpe.Provider;function xpe(){const e=I.exports.useContext(bpe);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function u2t(e){function t(n,r){const{instance:i,context:a}=e(n).current;return I.exports.useImperativeHandle(r,()=>i),n.children==null?null:x(wpe,{value:a,children:n.children})}return I.exports.forwardRef(t)}function c2t(e){function t(n,r){const[i,a]=I.exports.useState(!1),{instance:s}=e(n,a).current;I.exports.useImperativeHandle(r,()=>s),I.exports.useEffect(function(){i&&s.update()},[s,i,n.children]);const o=s._contentNode;return o?Kl.exports.createPortal(n.children,o):null}return I.exports.forwardRef(t)}function d2t(e){function t(n,r){const{instance:i}=e(n).current;return I.exports.useImperativeHandle(r,()=>i),null}return I.exports.forwardRef(t)}function _pe(e,t){const n=I.exports.useRef();I.exports.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function iB(e,t){var r;const n=(r=e.pane)!=null?r:t.pane;return n?{...e,pane:n}:e}function p2t(e,t){return function(r,i){const a=xpe(),s=e(iB(r,a),a);return vpe(a.map,r.attribution),_pe(s.current,r.eventHandlers),t(s.current,a,r,i),s}}var Sd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(rfe,function(n){var r="1.9.4";function i(f){var w,C,T,R;for(C=1,T=arguments.length;C<T;C++){R=arguments[C];for(w in R)f[w]=R[w]}return f}var a=Object.create||function(){function f(){}return function(w){return f.prototype=w,new f}}();function s(f,w){var C=Array.prototype.slice;if(f.bind)return f.bind.apply(f,C.call(arguments,1));var T=C.call(arguments,2);return function(){return f.apply(w,T.length?T.concat(C.call(arguments)):arguments)}}var o=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++o),f._leaflet_id}function u(f,w,C){var T,R,H,ae;return ae=function(){T=!1,R&&(H.apply(C,R),R=!1)},H=function(){T?R=arguments:(f.apply(C,arguments),setTimeout(ae,w),T=!0)},H}function c(f,w,C){var T=w[1],R=w[0],H=T-R;return f===T&&C?f:((f-R)%H+H)%H+R}function d(){return!1}function p(f,w){if(w===!1)return f;var C=Math.pow(10,w===void 0?6:w);return Math.round(f*C)/C}function h(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function m(f){return h(f).split(/\s+/)}function g(f,w){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?a(f.options):{});for(var C in w)f.options[C]=w[C];return f.options}function y(f,w,C){var T=[];for(var R in f)T.push(encodeURIComponent(C?R.toUpperCase():R)+"="+encodeURIComponent(f[R]));return(!w||w.indexOf("?")===-1?"?":"&")+T.join("&")}var v=/\{ *([\w_ -]+) *\}/g;function b(f,w){return f.replace(v,function(C,T){var R=w[T];if(R===void 0)throw new Error("No value provided for variable "+C);return typeof R=="function"&&(R=R(w)),R})}var _=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function k(f,w){for(var C=0;C<f.length;C++)if(f[C]===w)return C;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var N=0;function P(f){var w=+new Date,C=Math.max(0,16-(w-N));return N=w+C,window.setTimeout(f,C)}var D=window.requestAnimationFrame||$("RequestAnimationFrame")||P,O=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function F(f,w,C){if(C&&D===P)f.call(w);else return D.call(window,s(f,w))}function E(f){f&&O.call(window,f)}var z={__proto__:null,extend:i,create:a,bind:s,get lastId(){return o},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:p,trim:h,splitWords:m,setOptions:g,getParamString:y,template:b,isArray:_,indexOf:k,emptyImageUrl:S,requestFn:D,cancelFn:O,requestAnimFrame:F,cancelAnimFrame:E};function q(){}q.extend=function(f){var w=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},C=w.__super__=this.prototype,T=a(C);T.constructor=w,w.prototype=T;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(w[R]=this[R]);return f.statics&&i(w,f.statics),f.includes&&(K(f.includes),i.apply(null,[T].concat(f.includes))),i(T,f),delete T.statics,delete T.includes,T.options&&(T.options=C.options?a(C.options):{},i(T.options,f.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){C.callInitHooks&&C.callInitHooks.call(this),this._initHooksCalled=!0;for(var H=0,ae=T._initHooks.length;H<ae;H++)T._initHooks[H].call(this)}},w},q.include=function(f){var w=this.prototype.options;return i(this.prototype,f),f.options&&(this.prototype.options=w,this.mergeOptions(f.options)),this},q.mergeOptions=function(f){return i(this.prototype.options,f),this},q.addInitHook=function(f){var w=Array.prototype.slice.call(arguments,1),C=typeof f=="function"?f:function(){this[f].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(C),this};function K(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=_(f)?f:[f];for(var w=0;w<f.length;w++)f[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(f,w,C){if(typeof f=="object")for(var T in f)this._on(T,f[T],w);else{f=m(f);for(var R=0,H=f.length;R<H;R++)this._on(f[R],w,C)}return this},off:function(f,w,C){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var T in f)this._off(T,f[T],w);else{f=m(f);for(var R=arguments.length===1,H=0,ae=f.length;H<ae;H++)R?this._off(f[H]):this._off(f[H],w,C)}return this},_on:function(f,w,C,T){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(f,w,C)===!1){C===this&&(C=void 0);var R={fn:w,ctx:C};T&&(R.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(R)}},_off:function(f,w,C){var T,R,H;if(!!this._events&&(T=this._events[f],!!T)){if(arguments.length===1){if(this._firingCount)for(R=0,H=T.length;R<H;R++)T[R].fn=d;delete this._events[f];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var ae=this._listens(f,w,C);if(ae!==!1){var ye=T[ae];this._firingCount&&(ye.fn=d,this._events[f]=T=T.slice()),T.splice(ae,1)}}},fire:function(f,w,C){if(!this.listens(f,C))return this;var T=i({},w,{type:f,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var R=this._events[f];if(R){this._firingCount=this._firingCount+1||1;for(var H=0,ae=R.length;H<ae;H++){var ye=R[H],be=ye.fn;ye.once&&this.off(f,be,ye.ctx),be.call(ye.ctx||this,T)}this._firingCount--}}return C&&this._propagateEvent(T),this},listens:function(f,w,C,T){typeof f!="string"&&console.warn('"string" type argument expected');var R=w;typeof w!="function"&&(T=!!w,R=void 0,C=void 0);var H=this._events&&this._events[f];if(H&&H.length&&this._listens(f,R,C)!==!1)return!0;if(T){for(var ae in this._eventParents)if(this._eventParents[ae].listens(f,w,C,T))return!0}return!1},_listens:function(f,w,C){if(!this._events)return!1;var T=this._events[f]||[];if(!w)return!!T.length;C===this&&(C=void 0);for(var R=0,H=T.length;R<H;R++)if(T[R].fn===w&&T[R].ctx===C)return R;return!1},once:function(f,w,C){if(typeof f=="object")for(var T in f)this._on(T,f[T],w,!0);else{f=m(f);for(var R=0,H=f.length;R<H;R++)this._on(f[R],w,C,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var w in this._eventParents)this._eventParents[w].fire(f.type,i({layer:f.target,propagatedFrom:f.target},f),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var te=q.extend(Z);function V(f,w,C){this.x=C?Math.round(f):f,this.y=C?Math.round(w):w}var ee=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(f){return this.clone()._add(Y(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(Y(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new V(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new V(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(f){f=Y(f);var w=f.x-this.x,C=f.y-this.y;return Math.sqrt(w*w+C*C)},equals:function(f){return f=Y(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=Y(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function Y(f,w,C){return f instanceof V?f:_(f)?new V(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new V(f.x,f.y):new V(f,w,C)}function Q(f,w){if(!!f)for(var C=w?[f,w]:f,T=0,R=C.length;T<R;T++)this.extend(C[T])}Q.prototype={extend:function(f){var w,C;if(!f)return this;if(f instanceof V||typeof f[0]=="number"||"x"in f)w=C=Y(f);else if(f=oe(f),w=f.min,C=f.max,!w||!C)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=C.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(C.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(C.y,this.max.y)),this},getCenter:function(f){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var w,C;return typeof f[0]=="number"||f instanceof V?f=Y(f):f=oe(f),f instanceof Q?(w=f.min,C=f.max):w=C=f,w.x>=this.min.x&&C.x<=this.max.x&&w.y>=this.min.y&&C.y<=this.max.y},intersects:function(f){f=oe(f);var w=this.min,C=this.max,T=f.min,R=f.max,H=R.x>=w.x&&T.x<=C.x,ae=R.y>=w.y&&T.y<=C.y;return H&&ae},overlaps:function(f){f=oe(f);var w=this.min,C=this.max,T=f.min,R=f.max,H=R.x>w.x&&T.x<C.x,ae=R.y>w.y&&T.y<C.y;return H&&ae},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var w=this.min,C=this.max,T=Math.abs(w.x-C.x)*f,R=Math.abs(w.y-C.y)*f;return oe(Y(w.x-T,w.y-R),Y(C.x+T,C.y+R))},equals:function(f){return f?(f=oe(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function oe(f,w){return!f||f instanceof Q?f:new Q(f,w)}function pe(f,w){if(!!f)for(var C=w?[f,w]:f,T=0,R=C.length;T<R;T++)this.extend(C[T])}pe.prototype={extend:function(f){var w=this._southWest,C=this._northEast,T,R;if(f instanceof ge)T=f,R=f;else if(f instanceof pe){if(T=f._southWest,R=f._northEast,!T||!R)return this}else return f?this.extend(_e(f)||he(f)):this;return!w&&!C?(this._southWest=new ge(T.lat,T.lng),this._northEast=new ge(R.lat,R.lng)):(w.lat=Math.min(T.lat,w.lat),w.lng=Math.min(T.lng,w.lng),C.lat=Math.max(R.lat,C.lat),C.lng=Math.max(R.lng,C.lng)),this},pad:function(f){var w=this._southWest,C=this._northEast,T=Math.abs(w.lat-C.lat)*f,R=Math.abs(w.lng-C.lng)*f;return new pe(new ge(w.lat-T,w.lng-R),new ge(C.lat+T,C.lng+R))},getCenter:function(){return new ge((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ge(this.getNorth(),this.getWest())},getSouthEast:function(){return new ge(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof ge||"lat"in f?f=_e(f):f=he(f);var w=this._southWest,C=this._northEast,T,R;return f instanceof pe?(T=f.getSouthWest(),R=f.getNorthEast()):T=R=f,T.lat>=w.lat&&R.lat<=C.lat&&T.lng>=w.lng&&R.lng<=C.lng},intersects:function(f){f=he(f);var w=this._southWest,C=this._northEast,T=f.getSouthWest(),R=f.getNorthEast(),H=R.lat>=w.lat&&T.lat<=C.lat,ae=R.lng>=w.lng&&T.lng<=C.lng;return H&&ae},overlaps:function(f){f=he(f);var w=this._southWest,C=this._northEast,T=f.getSouthWest(),R=f.getNorthEast(),H=R.lat>w.lat&&T.lat<C.lat,ae=R.lng>w.lng&&T.lng<C.lng;return H&&ae},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,w){return f?(f=he(f),this._southWest.equals(f.getSouthWest(),w)&&this._northEast.equals(f.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(f,w){return f instanceof pe?f:new pe(f,w)}function ge(f,w,C){if(isNaN(f)||isNaN(w))throw new Error("Invalid LatLng object: ("+f+", "+w+")");this.lat=+f,this.lng=+w,C!==void 0&&(this.alt=+C)}ge.prototype={equals:function(f,w){if(!f)return!1;f=_e(f);var C=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return C<=(w===void 0?1e-9:w)},toString:function(f){return"LatLng("+p(this.lat,f)+", "+p(this.lng,f)+")"},distanceTo:function(f){return Se.distance(this,_e(f))},wrap:function(){return Se.wrapLatLng(this)},toBounds:function(f){var w=180*f/40075017,C=w/Math.cos(Math.PI/180*this.lat);return he([this.lat-w,this.lng-C],[this.lat+w,this.lng+C])},clone:function(){return new ge(this.lat,this.lng,this.alt)}};function _e(f,w,C){return f instanceof ge?f:_(f)&&typeof f[0]!="object"?f.length===3?new ge(f[0],f[1],f[2]):f.length===2?new ge(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new ge(f.lat,"lng"in f?f.lng:f.lon,f.alt):w===void 0?null:new ge(f,w,C)}var Ne={latLngToPoint:function(f,w){var C=this.projection.project(f),T=this.scale(w);return this.transformation._transform(C,T)},pointToLatLng:function(f,w){var C=this.scale(w),T=this.transformation.untransform(f,C);return this.projection.unproject(T)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var w=this.projection.bounds,C=this.scale(f),T=this.transformation.transform(w.min,C),R=this.transformation.transform(w.max,C);return new Q(T,R)},infinite:!1,wrapLatLng:function(f){var w=this.wrapLng?c(f.lng,this.wrapLng,!0):f.lng,C=this.wrapLat?c(f.lat,this.wrapLat,!0):f.lat,T=f.alt;return new ge(C,w,T)},wrapLatLngBounds:function(f){var w=f.getCenter(),C=this.wrapLatLng(w),T=w.lat-C.lat,R=w.lng-C.lng;if(T===0&&R===0)return f;var H=f.getSouthWest(),ae=f.getNorthEast(),ye=new ge(H.lat-T,H.lng-R),be=new ge(ae.lat-T,ae.lng-R);return new pe(ye,be)}},Se=i({},Ne,{wrapLng:[-180,180],R:6371e3,distance:function(f,w){var C=Math.PI/180,T=f.lat*C,R=w.lat*C,H=Math.sin((w.lat-f.lat)*C/2),ae=Math.sin((w.lng-f.lng)*C/2),ye=H*H+Math.cos(T)*Math.cos(R)*ae*ae,be=2*Math.atan2(Math.sqrt(ye),Math.sqrt(1-ye));return this.R*be}}),Re=6378137,Ke={R:Re,MAX_LATITUDE:85.0511287798,project:function(f){var w=Math.PI/180,C=this.MAX_LATITUDE,T=Math.max(Math.min(C,f.lat),-C),R=Math.sin(T*w);return new V(this.R*f.lng*w,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(f){var w=180/Math.PI;return new ge((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*w,f.x*w/this.R)},bounds:function(){var f=Re*Math.PI;return new Q([-f,-f],[f,f])}()};function it(f,w,C,T){if(_(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=w,this._c=C,this._d=T}it.prototype={transform:function(f,w){return this._transform(f.clone(),w)},_transform:function(f,w){return w=w||1,f.x=w*(this._a*f.x+this._b),f.y=w*(this._c*f.y+this._d),f},untransform:function(f,w){return w=w||1,new V((f.x/w-this._b)/this._a,(f.y/w-this._d)/this._c)}};function Xe(f,w,C,T){return new it(f,w,C,T)}var at=i({},Se,{code:"EPSG:3857",projection:Ke,transformation:function(){var f=.5/(Math.PI*Ke.R);return Xe(f,.5,-f,.5)}()}),He=i({},at,{code:"EPSG:900913"});function _t(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function mt(f,w){var C="",T,R,H,ae,ye,be;for(T=0,H=f.length;T<H;T++){for(ye=f[T],R=0,ae=ye.length;R<ae;R++)be=ye[R],C+=(R?"L":"M")+be.x+" "+be.y;C+=w?Be.svg?"z":"x":""}return C||"M0 0"}var ht=document.documentElement.style,Lt="ActiveXObject"in window,Un=Lt&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),bn=Jt("webkit"),tn=Jt("android"),Mt=Jt("android 2")||Jt("android 3"),sr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Rn=tn&&Jt("Google")&&sr<537&&!("AudioNode"in window),wn=!!window.opera,un=!kt&&Jt("chrome"),cn=Jt("gecko")&&!bn&&!wn&&!Lt,Er=!un&&Jt("safari"),ki=Jt("phantom"),Qn="OTransition"in ht,Ta=navigator.platform.indexOf("Win")===0,yn=Lt&&"transition"in ht,Ge="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mt,rt="MozPerspective"in ht,Si=!window.L_DISABLE_3D&&(yn||Ge||rt)&&!Qn&&!ki,Dn=typeof orientation<"u"||Jt("mobile"),qn=Dn&&bn,ai=Dn&&Ge,Ur=!window.PointerEvent&&window.MSPointerEvent,hr=!!(window.PointerEvent||Ur),wr="ontouchstart"in window||!!window.TouchEvent,si=!window.L_NO_TOUCH&&(wr||hr),xn=Dn&&wn,_n=Dn&&cn,ve=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ie=function(){var f=!1;try{var w=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",d,w),window.removeEventListener("testPassiveEventSupport",d,w)}catch{}return f}(),Je=function(){return!!document.createElement("canvas").getContext}(),J=!!(document.createElementNS&&_t("svg").createSVGRect),At=!!J&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ft=!J&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var w=f.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),St=navigator.platform.indexOf("Mac")===0,bt=navigator.platform.indexOf("Linux")===0;function Jt(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Be={ie:Lt,ielt9:Un,edge:kt,webkit:bn,android:tn,android23:Mt,androidStock:Rn,opera:wn,chrome:un,gecko:cn,safari:Er,phantom:ki,opera12:Qn,win:Ta,ie3d:yn,webkit3d:Ge,gecko3d:rt,any3d:Si,mobile:Dn,mobileWebkit:qn,mobileWebkit3d:ai,msPointer:Ur,pointer:hr,touch:si,touchNative:wr,mobileOpera:xn,mobileGecko:_n,retina:ve,passiveEvents:Ie,canvas:Je,svg:J,vml:Ft,inlineSvg:At,mac:St,linux:bt},oi=Be.msPointer?"MSPointerDown":"pointerdown",ko=Be.msPointer?"MSPointerMove":"pointermove",Ss=Be.msPointer?"MSPointerUp":"pointerup",nt=Be.msPointer?"MSPointerCancel":"pointercancel",Nt={touchstart:oi,touchmove:ko,touchend:Ss,touchcancel:nt},Ln={touchstart:tu,touchmove:eu,touchend:eu,touchcancel:eu},Et={},So=!1;function Bi(f,w,C){return w==="touchstart"&&Co(),Ln[w]?(C=Ln[w].bind(this,C),f.addEventListener(Nt[w],C,!1),C):(console.warn("wrong event specified:",w),d)}function Sm(f,w,C){if(!Nt[w]){console.warn("wrong event specified:",w);return}f.removeEventListener(Nt[w],C,!1)}function g0(f){Et[f.pointerId]=f}function y0(f){Et[f.pointerId]&&(Et[f.pointerId]=f)}function er(f){delete Et[f.pointerId]}function Co(){So||(document.addEventListener(oi,g0,!0),document.addEventListener(ko,y0,!0),document.addEventListener(Ss,er,!0),document.addEventListener(nt,er,!0),So=!0)}function eu(f,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var C in Et)w.touches.push(Et[C]);w.changedTouches=[w],f(w)}}function tu(f,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&qr(w),eu(f,w)}function v0(f){var w={},C,T;for(T in f)C=f[T],w[T]=C&&C.bind?C.bind(f):C;return f=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Yd=200;function b0(f,w){f.addEventListener("dblclick",w);var C=0,T;function R(H){if(H.detail!==1){T=H.detail;return}if(!(H.pointerType==="mouse"||H.sourceCapabilities&&!H.sourceCapabilities.firesTouchEvents)){var ae=vx(H);if(!(ae.some(function(be){return be instanceof HTMLLabelElement&&be.attributes.for})&&!ae.some(function(be){return be instanceof HTMLInputElement||be instanceof HTMLSelectElement}))){var ye=Date.now();ye-C<=Yd?(T++,T===2&&w(v0(H))):T=1,C=ye}}}return f.addEventListener("click",R),{dblclick:w,simDblclick:R}}function w0(f,w){f.removeEventListener("dblclick",w.dblclick),f.removeEventListener("click",w.simDblclick)}var Qd=ep(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wi=ep(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yt=Wi==="webkitTransition"||Wi==="OTransition"?Wi+"End":"transitionend";function kn(f){return typeof f=="string"?document.getElementById(f):f}function Gr(f,w){var C=f.style[w]||f.currentStyle&&f.currentStyle[w];if((!C||C==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(f,null);C=T?T[w]:null}return C==="auto"?null:C}function Wt(f,w,C){var T=document.createElement(f);return T.className=w||"",C&&C.appendChild(T),T}function fn(f){var w=f.parentNode;w&&w.removeChild(f)}function Vi(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function Na(f){var w=f.parentNode;w&&w.lastChild!==f&&w.appendChild(f)}function ia(f){var w=f.parentNode;w&&w.firstChild!==f&&w.insertBefore(f,w.firstChild)}function x0(f,w){if(f.classList!==void 0)return f.classList.contains(w);var C=Cm(f);return C.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(C)}function Vt(f,w){if(f.classList!==void 0)for(var C=m(w),T=0,R=C.length;T<R;T++)f.classList.add(C[T]);else if(!x0(f,w)){var H=Cm(f);_0(f,(H?H+" ":"")+w)}}function fr(f,w){f.classList!==void 0?f.classList.remove(w):_0(f,h((" "+Cm(f)+" ").replace(" "+w+" "," ")))}function _0(f,w){f.className.baseVal===void 0?f.className=w:f.className.baseVal=w}function Cm(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function Ja(f,w){"opacity"in f.style?f.style.opacity=w:"filter"in f.style&&tN(f,w)}function tN(f,w){var C=!1,T="DXImageTransform.Microsoft.Alpha";try{C=f.filters.item(T)}catch{if(w===1)return}w=Math.round(w*100),C?(C.Enabled=w!==100,C.Opacity=w):f.style.filter+=" progid:"+T+"(opacity="+w+")"}function ep(f){for(var w=document.documentElement.style,C=0;C<f.length;C++)if(f[C]in w)return f[C];return!1}function Zs(f,w,C){var T=w||new V(0,0);f.style[Qd]=(Be.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(C?" scale("+C+")":"")}function xr(f,w){f._leaflet_pos=w,Be.any3d?Zs(f,w):(f.style.left=w.x+"px",f.style.top=w.y+"px")}function ul(f){return f._leaflet_pos||new V(0,0)}var rc,nu,Im;if("onselectstart"in document)rc=function(){ce(window,"selectstart",qr)},nu=function(){je(window,"selectstart",qr)};else{var ic=ep(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rc=function(){if(ic){var f=document.documentElement.style;Im=f[ic],f[ic]="none"}},nu=function(){ic&&(document.documentElement.style[ic]=Im,Im=void 0)}}function tp(){ce(window,"dragstart",qr)}function ac(){je(window,"dragstart",qr)}var ru,sc;function $m(f){for(;f.tabIndex===-1;)f=f.parentNode;!f.style||(iu(),ru=f,sc=f.style.outlineStyle,f.style.outlineStyle="none",ce(window,"keydown",iu))}function iu(){!ru||(ru.style.outlineStyle=sc,ru=void 0,sc=void 0,je(window,"keydown",iu))}function np(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function k0(f){var w=f.getBoundingClientRect();return{x:w.width/f.offsetWidth||1,y:w.height/f.offsetHeight||1,boundingClientRect:w}}var ne={__proto__:null,TRANSFORM:Qd,TRANSITION:Wi,TRANSITION_END:yt,get:kn,getStyle:Gr,create:Wt,remove:fn,empty:Vi,toFront:Na,toBack:ia,hasClass:x0,addClass:Vt,removeClass:fr,setClass:_0,getClass:Cm,setOpacity:Ja,testProp:ep,setTransform:Zs,setPosition:xr,getPosition:ul,get disableTextSelection(){return rc},get enableTextSelection(){return nu},disableImageDrag:tp,enableImageDrag:ac,preventOutline:$m,restoreOutline:iu,getSizedParentNode:np,getScale:k0};function ce(f,w,C,T){if(w&&typeof w=="object")for(var R in w)qe(f,R,w[R],C);else{w=m(w);for(var H=0,ae=w.length;H<ae;H++)qe(f,w[H],C,T)}return this}var Pe="_leaflet_events";function je(f,w,C,T){if(arguments.length===1)Ot(f),delete f[Pe];else if(w&&typeof w=="object")for(var R in w)ft(f,R,w[R],C);else if(w=m(w),arguments.length===2)Ot(f,function(ye){return k(w,ye)!==-1});else for(var H=0,ae=w.length;H<ae;H++)ft(f,w[H],C,T);return this}function Ot(f,w){for(var C in f[Pe]){var T=C.split(/\d/)[0];(!w||w(T))&&ft(f,T,null,null,C)}}var Pt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qe(f,w,C,T){var R=w+l(C)+(T?"_"+l(T):"");if(f[Pe]&&f[Pe][R])return this;var H=function(ye){return C.call(T||f,ye||window.event)},ae=H;!Be.touchNative&&Be.pointer&&w.indexOf("touch")===0?H=Bi(f,w,H):Be.touch&&w==="dblclick"?H=b0(f,H):"addEventListener"in f?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?f.addEventListener(Pt[w]||w,H,Be.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(H=function(ye){ye=ye||window.event,nN(f,ye)&&ae(ye)},f.addEventListener(Pt[w],H,!1)):f.addEventListener(w,ae,!1):f.attachEvent("on"+w,H),f[Pe]=f[Pe]||{},f[Pe][R]=H}function ft(f,w,C,T,R){R=R||w+l(C)+(T?"_"+l(T):"");var H=f[Pe]&&f[Pe][R];if(!H)return this;!Be.touchNative&&Be.pointer&&w.indexOf("touch")===0?Sm(f,w,H):Be.touch&&w==="dblclick"?w0(f,H):"removeEventListener"in f?f.removeEventListener(Pt[w]||w,H,!1):f.detachEvent("on"+w,H),f[Pe][R]=null}function vn(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function ji(f){return qe(f,"wheel",vn),this}function Ea(f){return ce(f,"mousedown touchstart dblclick contextmenu",vn),f._leaflet_disable_click=!0,this}function qr(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Io(f){return qr(f),vn(f),this}function vx(f){if(f.composedPath)return f.composedPath();for(var w=[],C=f.target;C;)w.push(C),C=C.parentNode;return w}function aa(f,w){if(!w)return new V(f.clientX,f.clientY);var C=k0(w),T=C.boundingClientRect;return new V((f.clientX-T.left)/C.x-w.clientLeft,(f.clientY-T.top)/C.y-w.clientTop)}var oc=Be.linux&&Be.chrome?window.devicePixelRatio:Be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function S0(f){return Be.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/oc:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function nN(f,w){var C=w.relatedTarget;if(!C)return!0;try{for(;C&&C!==f;)C=C.parentNode}catch{return!1}return C!==f}var dhe={__proto__:null,on:ce,off:je,stopPropagation:vn,disableScrollPropagation:ji,disableClickPropagation:Ea,preventDefault:qr,stop:Io,getPropagationPath:vx,getMousePosition:aa,getWheelDelta:S0,isExternalTarget:nN,addListener:ce,removeListener:je},fB=te.extend({run:function(f,w,C,T){this.stop(),this._el=f,this._inProgress=!0,this._duration=C||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=ul(f),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(f){var w=+new Date-this._startTime,C=this._duration*1e3;w<C?this._runFrame(this._easeOut(w/C),f):(this._runFrame(1),this._complete())},_runFrame:function(f,w){var C=this._startPos.add(this._offset.multiplyBy(f));w&&C._round(),xr(this._el,C),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),dn=te.extend({options:{crs:at,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,w){w=g(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(_e(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wi&&Be.any3d&&!Be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ce(this._proxy,yt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,w,C){if(w=w===void 0?this._zoom:this._limitZoom(w),f=this._limitCenter(_e(f),w,this.options.maxBounds),C=C||{},this._stop(),this._loaded&&!C.reset&&C!==!0){C.animate!==void 0&&(C.zoom=i({animate:C.animate},C.zoom),C.pan=i({animate:C.animate,duration:C.duration},C.pan));var T=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,w,C.zoom):this._tryAnimatedPan(f,C.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(f,w,C.pan&&C.pan.noMoveStart),this},setZoom:function(f,w){return this._loaded?this.setView(this.getCenter(),f,{zoom:w}):(this._zoom=f,this)},zoomIn:function(f,w){return f=f||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,w)},zoomOut:function(f,w){return f=f||(Be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,w)},setZoomAround:function(f,w,C){var T=this.getZoomScale(w),R=this.getSize().divideBy(2),H=f instanceof V?f:this.latLngToContainerPoint(f),ae=H.subtract(R).multiplyBy(1-1/T),ye=this.containerPointToLatLng(R.add(ae));return this.setView(ye,w,{zoom:C})},_getBoundsCenterZoom:function(f,w){w=w||{},f=f.getBounds?f.getBounds():he(f);var C=Y(w.paddingTopLeft||w.padding||[0,0]),T=Y(w.paddingBottomRight||w.padding||[0,0]),R=this.getBoundsZoom(f,!1,C.add(T));if(R=typeof w.maxZoom=="number"?Math.min(w.maxZoom,R):R,R===1/0)return{center:f.getCenter(),zoom:R};var H=T.subtract(C).divideBy(2),ae=this.project(f.getSouthWest(),R),ye=this.project(f.getNorthEast(),R),be=this.unproject(ae.add(ye).divideBy(2).add(H),R);return{center:be,zoom:R}},fitBounds:function(f,w){if(f=he(f),!f.isValid())throw new Error("Bounds are not valid.");var C=this._getBoundsCenterZoom(f,w);return this.setView(C.center,C.zoom,w)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,w){return this.setView(f,this._zoom,{pan:w})},panBy:function(f,w){if(f=Y(f).round(),w=w||{},!f.x&&!f.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fB,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){Vt(this._mapPane,"leaflet-pan-anim");var C=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,C,w.duration||.25,w.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,w,C){if(C=C||{},C.animate===!1||!Be.any3d)return this.setView(f,w,C);this._stop();var T=this.project(this.getCenter()),R=this.project(f),H=this.getSize(),ae=this._zoom;f=_e(f),w=w===void 0?ae:w;var ye=Math.max(H.x,H.y),be=ye*this.getZoomScale(ae,w),Oe=R.distanceTo(T)||1,et=1.42,Tt=et*et;function rn(Kr){var Ex=Kr?-1:1,Qhe=Kr?be:ye,efe=be*be-ye*ye+Ex*Tt*Tt*Oe*Oe,tfe=2*Qhe*Tt*Oe,hN=efe/tfe,KB=Math.sqrt(hN*hN+1)-hN,nfe=KB<1e-9?-18:Math.log(KB);return nfe}function Oa(Kr){return(Math.exp(Kr)-Math.exp(-Kr))/2}function Ci(Kr){return(Math.exp(Kr)+Math.exp(-Kr))/2}function Js(Kr){return Oa(Kr)/Ci(Kr)}var Ya=rn(0);function Mm(Kr){return ye*(Ci(Ya)/Ci(Ya+et*Kr))}function Zhe(Kr){return ye*(Ci(Ya)*Js(Ya+et*Kr)-Oa(Ya))/Tt}function Xhe(Kr){return 1-Math.pow(1-Kr,1.5)}var Jhe=Date.now(),GB=(rn(1)-Ya)/et,Yhe=C.duration?1e3*C.duration:1e3*GB*.8;function qB(){var Kr=(Date.now()-Jhe)/Yhe,Ex=Xhe(Kr)*GB;Kr<=1?(this._flyToFrame=F(qB,this),this._move(this.unproject(T.add(R.subtract(T).multiplyBy(Zhe(Ex)/Oe)),ae),this.getScaleZoom(ye/Mm(Ex),ae),{flyTo:!0})):this._move(f,w)._moveEnd(!0)}return this._moveStart(!0,C.noMoveStart),qB.call(this),this},flyToBounds:function(f,w){var C=this._getBoundsCenterZoom(f,w);return this.flyTo(C.center,C.zoom,w)},setMaxBounds:function(f){return f=he(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var w=this.options.minZoom;return this.options.minZoom=f,this._loaded&&w!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var w=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&w!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,w){this._enforcingBounds=!0;var C=this.getCenter(),T=this._limitCenter(C,this._zoom,he(f));return C.equals(T)||this.panTo(T,w),this._enforcingBounds=!1,this},panInside:function(f,w){w=w||{};var C=Y(w.paddingTopLeft||w.padding||[0,0]),T=Y(w.paddingBottomRight||w.padding||[0,0]),R=this.project(this.getCenter()),H=this.project(f),ae=this.getPixelBounds(),ye=oe([ae.min.add(C),ae.max.subtract(T)]),be=ye.getSize();if(!ye.contains(H)){this._enforcingBounds=!0;var Oe=H.subtract(ye.getCenter()),et=ye.extend(H).getSize().subtract(be);R.x+=Oe.x<0?-et.x:et.x,R.y+=Oe.y<0?-et.y:et.y,this.panTo(this.unproject(R),w),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=i({animate:!1,pan:!0},f===!0?{animate:!0}:f);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var C=this.getSize(),T=w.divideBy(2).round(),R=C.divideBy(2).round(),H=T.subtract(R);return!H.x&&!H.y?this:(f.animate&&f.pan?this.panBy(H):(f.pan&&this._rawPanBy(H),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:C}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=i({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=s(this._handleGeolocationResponse,this),C=s(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,C,f):navigator.geolocation.getCurrentPosition(w,C,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(!!this._container._leaflet_id){var w=f.code,C=f.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+C+"."})}},_handleGeolocationResponse:function(f){if(!!this._container._leaflet_id){var w=f.coords.latitude,C=f.coords.longitude,T=new ge(w,C),R=T.toBounds(f.coords.accuracy*2),H=this._locateOptions;if(H.setView){var ae=this.getBoundsZoom(R);this.setView(T,H.maxZoom?Math.min(ae,H.maxZoom):ae)}var ye={latlng:T,bounds:R,timestamp:f.timestamp};for(var be in f.coords)typeof f.coords[be]=="number"&&(ye[be]=f.coords[be]);this.fire("locationfound",ye)}},addHandler:function(f,w){if(!w)return this;var C=this[f]=new w(this);return this._handlers.push(C),this.options[f]&&C.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)fn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,w){var C="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),T=Wt("div",C,w||this._mapPane);return f&&(this._panes[f]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),w=this.unproject(f.getBottomLeft()),C=this.unproject(f.getTopRight());return new pe(w,C)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,w,C){f=he(f),C=Y(C||[0,0]);var T=this.getZoom()||0,R=this.getMinZoom(),H=this.getMaxZoom(),ae=f.getNorthWest(),ye=f.getSouthEast(),be=this.getSize().subtract(C),Oe=oe(this.project(ye,T),this.project(ae,T)).getSize(),et=Be.any3d?this.options.zoomSnap:1,Tt=be.x/Oe.x,rn=be.y/Oe.y,Oa=w?Math.max(Tt,rn):Math.min(Tt,rn);return T=this.getScaleZoom(Oa,T),et&&(T=Math.round(T/(et/100))*(et/100),T=w?Math.ceil(T/et)*et:Math.floor(T/et)*et),Math.max(R,Math.min(H,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,w){var C=this._getTopLeftPoint(f,w);return new Q(C,C.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,w){var C=this.options.crs;return w=w===void 0?this._zoom:w,C.scale(f)/C.scale(w)},getScaleZoom:function(f,w){var C=this.options.crs;w=w===void 0?this._zoom:w;var T=C.zoom(f*C.scale(w));return isNaN(T)?1/0:T},project:function(f,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(_e(f),w)},unproject:function(f,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(Y(f),w)},layerPointToLatLng:function(f){var w=Y(f).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(f){var w=this.project(_e(f))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(_e(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(he(f))},distance:function(f,w){return this.options.crs.distance(_e(f),_e(w))},containerPointToLayerPoint:function(f){return Y(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return Y(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var w=this.containerPointToLayerPoint(Y(f));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_e(f)))},mouseEventToContainerPoint:function(f){return aa(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var w=this._container=kn(f);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ce(w,"scroll",this._onScroll,this),this._containerId=l(w)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Be.any3d,Vt(f,"leaflet-container"+(Be.touch?" leaflet-touch":"")+(Be.retina?" leaflet-retina":"")+(Be.ielt9?" leaflet-oldie":"")+(Be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Gr(f,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xr(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Vt(f.markerPane,"leaflet-zoom-hide"),Vt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,w,C){xr(this._mapPane,new V(0,0));var T=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var R=this._zoom!==w;this._moveStart(R,C)._move(f,w)._moveEnd(R),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(f,w){return f&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(f,w,C,T){w===void 0&&(w=this._zoom);var R=this._zoom!==w;return this._zoom=w,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),T?C&&C.pinch&&this.fire("zoom",C):((R||C&&C.pinch)&&this.fire("zoom",C),this.fire("move",C)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){xr(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var w=f?je:ce;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),Be.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,w){for(var C=[],T,R=w==="mouseout"||w==="mouseover",H=f.target||f.srcElement,ae=!1;H;){if(T=this._targets[l(H)],T&&(w==="click"||w==="preclick")&&this._draggableMoved(T)){ae=!0;break}if(T&&T.listens(w,!0)&&(R&&!nN(H,f)||(C.push(T),R))||H===this._container)break;H=H.parentNode}return!C.length&&!ae&&!R&&this.listens(w,!0)&&(C=[this]),C},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var w=f.target||f.srcElement;if(!(!this._loaded||w._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(w))){var C=f.type;C==="mousedown"&&$m(w),this._fireDOMEvent(f,C)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,w,C){if(f.type==="click"){var T=i({},f);T.type="preclick",this._fireDOMEvent(T,T.type,C)}var R=this._findEventTargets(f,w);if(C){for(var H=[],ae=0;ae<C.length;ae++)C[ae].listens(w,!0)&&H.push(C[ae]);R=H.concat(R)}if(!!R.length){w==="contextmenu"&&qr(f);var ye=R[0],be={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var Oe=ye.getLatLng&&(!ye._radius||ye._radius<=10);be.containerPoint=Oe?this.latLngToContainerPoint(ye.getLatLng()):this.mouseEventToContainerPoint(f),be.layerPoint=this.containerPointToLayerPoint(be.containerPoint),be.latlng=Oe?ye.getLatLng():this.layerPointToLatLng(be.layerPoint)}for(ae=0;ae<R.length;ae++)if(R[ae].fire(w,be,!0),be.originalEvent._stopped||R[ae].options.bubblingMouseEvents===!1&&k(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,w=this._handlers.length;f<w;f++)this._handlers[f].disable()},whenReady:function(f,w){return this._loaded?f.call(w||this,{target:this}):this.on("load",f,w),this},_getMapPanePos:function(){return ul(this._mapPane)||new V(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,w){var C=f&&w!==void 0?this._getNewPixelOrigin(f,w):this.getPixelOrigin();return C.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,w){var C=this.getSize()._divideBy(2);return this.project(f,w)._subtract(C)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,w,C){var T=this._getNewPixelOrigin(C,w);return this.project(f,w)._subtract(T)},_latLngBoundsToNewLayerBounds:function(f,w,C){var T=this._getNewPixelOrigin(C,w);return oe([this.project(f.getSouthWest(),w)._subtract(T),this.project(f.getNorthWest(),w)._subtract(T),this.project(f.getSouthEast(),w)._subtract(T),this.project(f.getNorthEast(),w)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,w,C){if(!C)return f;var T=this.project(f,w),R=this.getSize().divideBy(2),H=new Q(T.subtract(R),T.add(R)),ae=this._getBoundsOffset(H,C,w);return Math.abs(ae.x)<=1&&Math.abs(ae.y)<=1?f:this.unproject(T.add(ae),w)},_limitOffset:function(f,w){if(!w)return f;var C=this.getPixelBounds(),T=new Q(C.min.add(f),C.max.add(f));return f.add(this._getBoundsOffset(T,w))},_getBoundsOffset:function(f,w,C){var T=oe(this.project(w.getNorthEast(),C),this.project(w.getSouthWest(),C)),R=T.min.subtract(f.min),H=T.max.subtract(f.max),ae=this._rebound(R.x,-H.x),ye=this._rebound(R.y,-H.y);return new V(ae,ye)},_rebound:function(f,w){return f+w>0?Math.round(f-w)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(w))},_limitZoom:function(f){var w=this.getMinZoom(),C=this.getMaxZoom(),T=Be.any3d?this.options.zoomSnap:1;return T&&(f=Math.round(f/T)*T),Math.max(w,Math.min(C,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){fr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,w){var C=this._getCenterOffset(f)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(C)?!1:(this.panBy(C,w),!0)},_createAnimProxy:function(){var f=this._proxy=Wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(w){var C=Qd,T=this._proxy.style[C];Zs(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),T===this._proxy.style[C]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),w=this.getZoom();Zs(this._proxy,this.project(f,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,w,C){if(this._animatingZoom)return!0;if(C=C||{},!this._zoomAnimated||C.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(w),R=this._getCenterOffset(f)._divideBy(1-1/T);return C.animate!==!0&&!this.getSize().contains(R)?!1:(F(function(){this._moveStart(!0,C.noMoveStart||!1)._animateZoom(f,w,!0)},this),!0)},_animateZoom:function(f,w,C,T){!this._mapPane||(C&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=w,Vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:w,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&fr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function phe(f,w){return new dn(f,w)}var $o=q.extend({options:{position:"topright"},initialize:function(f){g(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var w=this._map;return w&&w.removeControl(this),this.options.position=f,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var w=this._container=this.onAdd(f),C=this.getPosition(),T=f._controlCorners[C];return Vt(w,"leaflet-control"),C.indexOf("bottom")!==-1?T.insertBefore(w,T.firstChild):T.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),C0=function(f){return new $o(f)};dn.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},w="leaflet-",C=this._controlContainer=Wt("div",w+"control-container",this._container);function T(R,H){var ae=w+R+" "+w+H;f[R+H]=Wt("div",ae,C)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)fn(this._controlCorners[f]);fn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var mB=$o.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,w,C,T){return C<T?-1:T<C?1:0}},initialize:function(f,w,C){g(this,C),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in f)this._addLayer(f[T],T);for(T in w)this._addLayer(w[T],T,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return $o.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,w){return this._addLayer(f,w),this._map?this._update():this},addOverlay:function(f,w){return this._addLayer(f,w,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var w=this._getLayer(l(f));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){Vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(Vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):fr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return fr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",w=this._container=Wt("div",f),C=this.options.collapsed;w.setAttribute("aria-haspopup",!0),Ea(w),ji(w);var T=this._section=Wt("section",f+"-list");C&&(this._map.on("click",this.collapse,this),ce(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=Wt("a",f+"-toggle",w);R.href="#",R.title="Layers",R.setAttribute("role","button"),ce(R,{keydown:function(H){H.keyCode===13&&this._expandSafely()},click:function(H){qr(H),this._expandSafely()}},this),C||this.expand(),this._baseLayersList=Wt("div",f+"-base",T),this._separator=Wt("div",f+"-separator",T),this._overlaysList=Wt("div",f+"-overlays",T),w.appendChild(T)},_getLayer:function(f){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&l(this._layers[w].layer)===f)return this._layers[w]},_addLayer:function(f,w,C){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:w,overlay:C}),this.options.sortLayers&&this._layers.sort(s(function(T,R){return this.options.sortFunction(T.layer,R.layer,T.name,R.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vi(this._baseLayersList),Vi(this._overlaysList),this._layerControlInputs=[];var f,w,C,T,R=0;for(C=0;C<this._layers.length;C++)T=this._layers[C],this._addItem(T),w=w||T.overlay,f=f||!T.overlay,R+=T.overlay?0:1;return this.options.hideSingleBase&&(f=f&&R>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=w&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var w=this._getLayer(l(f.target)),C=w.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;C&&this._map.fire(C,w)},_createRadioElement:function(f,w){var C='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(w?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=C,T.firstChild},_addItem:function(f){var w=document.createElement("label"),C=this._map.hasLayer(f.layer),T;f.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=C):T=this._createRadioElement("leaflet-base-layers_"+l(this),C),this._layerControlInputs.push(T),T.layerId=l(f.layer),ce(T,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+f.name;var H=document.createElement("span");w.appendChild(H),H.appendChild(T),H.appendChild(R);var ae=f.overlay?this._overlaysList:this._baseLayersList;return ae.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,w,C,T=[],R=[];this._handlingClick=!0;for(var H=f.length-1;H>=0;H--)w=f[H],C=this._getLayer(w.layerId).layer,w.checked?T.push(C):w.checked||R.push(C);for(H=0;H<R.length;H++)this._map.hasLayer(R[H])&&this._map.removeLayer(R[H]);for(H=0;H<T.length;H++)this._map.hasLayer(T[H])||this._map.addLayer(T[H]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,w,C,T=this._map.getZoom(),R=f.length-1;R>=0;R--)w=f[R],C=this._getLayer(w.layerId).layer,w.disabled=C.options.minZoom!==void 0&&T<C.options.minZoom||C.options.maxZoom!==void 0&&T>C.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,ce(f,"click",qr),this.expand();var w=this;setTimeout(function(){je(f,"click",qr),w._preventClick=!1})}}),hhe=function(f,w,C){return new mB(f,w,C)},rN=$o.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var w="leaflet-control-zoom",C=Wt("div",w+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,w+"-in",C,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,w+"-out",C,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),C},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,w,C,T,R){var H=Wt("a",C,T);return H.innerHTML=f,H.href="#",H.title=w,H.setAttribute("role","button"),H.setAttribute("aria-label",w),Ea(H),ce(H,"click",Io),ce(H,"click",R,this),ce(H,"click",this._refocusOnMap,this),H},_updateDisabled:function(){var f=this._map,w="leaflet-disabled";fr(this._zoomInButton,w),fr(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(Vt(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(Vt(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});dn.mergeOptions({zoomControl:!0}),dn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new rN,this.addControl(this.zoomControl))});var fhe=function(f){return new rN(f)},gB=$o.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var w="leaflet-control-scale",C=Wt("div",w),T=this.options;return this._addScales(T,w+"-line",C),f.on(T.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),C},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,w,C){f.metric&&(this._mScale=Wt("div",w,C)),f.imperial&&(this._iScale=Wt("div",w,C))},_update:function(){var f=this._map,w=f.getSize().y/2,C=f.distance(f.containerPointToLatLng([0,w]),f.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(C)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var w=this._getRoundNum(f),C=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,C,w/f)},_updateImperial:function(f){var w=f*3.2808399,C,T,R;w>5280?(C=w/5280,T=this._getRoundNum(C),this._updateScale(this._iScale,T+" mi",T/C)):(R=this._getRoundNum(w),this._updateScale(this._iScale,R+" ft",R/w))},_updateScale:function(f,w,C){f.style.width=Math.round(this.options.maxWidth*C)+"px",f.innerHTML=w},_getRoundNum:function(f){var w=Math.pow(10,(Math.floor(f)+"").length-1),C=f/w;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:1,w*C}}),mhe=function(f){return new gB(f)},ghe='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',iN=$o.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Be.inlineSvg?ghe+" ":"")+"Leaflet</a>"},initialize:function(f){g(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Wt("div","leaflet-control-attribution"),Ea(this._container);for(var w in f._layers)f._layers[w].getAttribution&&this.addAttribution(f._layers[w].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(!!this._map){var f=[];for(var w in this._attributions)this._attributions[w]&&f.push(w);var C=[];this.options.prefix&&C.push(this.options.prefix),f.length&&C.push(f.join(", ")),this._container.innerHTML=C.join(' <span aria-hidden="true">|</span> ')}}});dn.mergeOptions({attributionControl:!0}),dn.addInitHook(function(){this.options.attributionControl&&new iN().addTo(this)});var yhe=function(f){return new iN(f)};$o.Layers=mB,$o.Zoom=rN,$o.Scale=gB,$o.Attribution=iN,C0.layers=hhe,C0.zoom=fhe,C0.scale=mhe,C0.attribution=yhe;var cl=q.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cl.addTo=function(f,w){return f.addHandler(w,this),this};var vhe={Events:Z},yB=Be.touch?"touchstart mousedown":"mousedown",lc=te.extend({options:{clickTolerance:3},initialize:function(f,w,C,T){g(this,T),this._element=f,this._dragStartTarget=w||f,this._preventOutline=C},enable:function(){this._enabled||(ce(this._dragStartTarget,yB,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(lc._dragging===this&&this.finishDrag(!0),je(this._dragStartTarget,yB,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(!!this._enabled&&(this._moved=!1,!x0(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){lc._dragging===this&&this.finishDrag();return}if(!(lc._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(lc._dragging=this,this._preventOutline&&$m(this._element),tp(),rc(),!this._moving)){this.fire("down");var w=f.touches?f.touches[0]:f,C=np(this._element);this._startPoint=new V(w.clientX,w.clientY),this._startPos=ul(this._element),this._parentScale=k0(C);var T=f.type==="mousedown";ce(document,T?"mousemove":"touchmove",this._onMove,this),ce(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(!!this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var w=f.touches&&f.touches.length===1?f.touches[0]:f,C=new V(w.clientX,w.clientY)._subtract(this._startPoint);!C.x&&!C.y||Math.abs(C.x)+Math.abs(C.y)<this.options.clickTolerance||(C.x/=this._parentScale.x,C.y/=this._parentScale.y,qr(f),this._moved||(this.fire("dragstart"),this._moved=!0,Vt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(C),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),xr(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(f){fr(document.body,"leaflet-dragging"),this._lastTarget&&(fr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),je(document,"mousemove touchmove",this._onMove,this),je(document,"mouseup touchend touchcancel",this._onUp,this),ac(),nu();var w=this._moved&&this._moving;this._moving=!1,lc._dragging=!1,w&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function vB(f,w,C){var T,R=[1,4,2,8],H,ae,ye,be,Oe,et,Tt,rn;for(H=0,et=f.length;H<et;H++)f[H]._code=rp(f[H],w);for(ye=0;ye<4;ye++){for(Tt=R[ye],T=[],H=0,et=f.length,ae=et-1;H<et;ae=H++)be=f[H],Oe=f[ae],be._code&Tt?Oe._code&Tt||(rn=bx(Oe,be,Tt,w,C),rn._code=rp(rn,w),T.push(rn)):(Oe._code&Tt&&(rn=bx(Oe,be,Tt,w,C),rn._code=rp(rn,w),T.push(rn)),T.push(be));f=T}return f}function bB(f,w){var C,T,R,H,ae,ye,be,Oe,et;if(!f||f.length===0)throw new Error("latlngs not passed");Xs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Tt=_e([0,0]),rn=he(f),Oa=rn.getNorthWest().distanceTo(rn.getSouthWest())*rn.getNorthEast().distanceTo(rn.getNorthWest());Oa<1700&&(Tt=aN(f));var Ci=f.length,Js=[];for(C=0;C<Ci;C++){var Ya=_e(f[C]);Js.push(w.project(_e([Ya.lat-Tt.lat,Ya.lng-Tt.lng])))}for(ye=be=Oe=0,C=0,T=Ci-1;C<Ci;T=C++)R=Js[C],H=Js[T],ae=R.y*H.x-H.y*R.x,be+=(R.x+H.x)*ae,Oe+=(R.y+H.y)*ae,ye+=ae*3;ye===0?et=Js[0]:et=[be/ye,Oe/ye];var Mm=w.unproject(Y(et));return _e([Mm.lat+Tt.lat,Mm.lng+Tt.lng])}function aN(f){for(var w=0,C=0,T=0,R=0;R<f.length;R++){var H=_e(f[R]);w+=H.lat,C+=H.lng,T++}return _e([w/T,C/T])}var bhe={__proto__:null,clipPolygon:vB,polygonCenter:bB,centroid:aN};function wB(f,w){if(!w||!f.length)return f.slice();var C=w*w;return f=_he(f,C),f=xhe(f,C),f}function xB(f,w,C){return Math.sqrt(I0(f,w,C,!0))}function whe(f,w,C){return I0(f,w,C)}function xhe(f,w){var C=f.length,T=typeof Uint8Array!=void 0+""?Uint8Array:Array,R=new T(C);R[0]=R[C-1]=1,sN(f,R,w,0,C-1);var H,ae=[];for(H=0;H<C;H++)R[H]&&ae.push(f[H]);return ae}function sN(f,w,C,T,R){var H=0,ae,ye,be;for(ye=T+1;ye<=R-1;ye++)be=I0(f[ye],f[T],f[R],!0),be>H&&(ae=ye,H=be);H>C&&(w[ae]=1,sN(f,w,C,T,ae),sN(f,w,C,ae,R))}function _he(f,w){for(var C=[f[0]],T=1,R=0,H=f.length;T<H;T++)khe(f[T],f[R])>w&&(C.push(f[T]),R=T);return R<H-1&&C.push(f[H-1]),C}var _B;function kB(f,w,C,T,R){var H=T?_B:rp(f,C),ae=rp(w,C),ye,be,Oe;for(_B=ae;;){if(!(H|ae))return[f,w];if(H&ae)return!1;ye=H||ae,be=bx(f,w,ye,C,R),Oe=rp(be,C),ye===H?(f=be,H=Oe):(w=be,ae=Oe)}}function bx(f,w,C,T,R){var H=w.x-f.x,ae=w.y-f.y,ye=T.min,be=T.max,Oe,et;return C&8?(Oe=f.x+H*(be.y-f.y)/ae,et=be.y):C&4?(Oe=f.x+H*(ye.y-f.y)/ae,et=ye.y):C&2?(Oe=be.x,et=f.y+ae*(be.x-f.x)/H):C&1&&(Oe=ye.x,et=f.y+ae*(ye.x-f.x)/H),new V(Oe,et,R)}function rp(f,w){var C=0;return f.x<w.min.x?C|=1:f.x>w.max.x&&(C|=2),f.y<w.min.y?C|=4:f.y>w.max.y&&(C|=8),C}function khe(f,w){var C=w.x-f.x,T=w.y-f.y;return C*C+T*T}function I0(f,w,C,T){var R=w.x,H=w.y,ae=C.x-R,ye=C.y-H,be=ae*ae+ye*ye,Oe;return be>0&&(Oe=((f.x-R)*ae+(f.y-H)*ye)/be,Oe>1?(R=C.x,H=C.y):Oe>0&&(R+=ae*Oe,H+=ye*Oe)),ae=f.x-R,ye=f.y-H,T?ae*ae+ye*ye:new V(R,H)}function Xs(f){return!_(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function SB(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xs(f)}function CB(f,w){var C,T,R,H,ae,ye,be,Oe;if(!f||f.length===0)throw new Error("latlngs not passed");Xs(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var et=_e([0,0]),Tt=he(f),rn=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());rn<1700&&(et=aN(f));var Oa=f.length,Ci=[];for(C=0;C<Oa;C++){var Js=_e(f[C]);Ci.push(w.project(_e([Js.lat-et.lat,Js.lng-et.lng])))}for(C=0,T=0;C<Oa-1;C++)T+=Ci[C].distanceTo(Ci[C+1])/2;if(T===0)Oe=Ci[0];else for(C=0,H=0;C<Oa-1;C++)if(ae=Ci[C],ye=Ci[C+1],R=ae.distanceTo(ye),H+=R,H>T){be=(H-T)/R,Oe=[ye.x-be*(ye.x-ae.x),ye.y-be*(ye.y-ae.y)];break}var Ya=w.unproject(Y(Oe));return _e([Ya.lat+et.lat,Ya.lng+et.lng])}var She={__proto__:null,simplify:wB,pointToSegmentDistance:xB,closestPointOnSegment:whe,clipSegment:kB,_getEdgeIntersection:bx,_getBitCode:rp,_sqClosestPointOnSegment:I0,isFlat:Xs,_flat:SB,polylineCenter:CB},oN={project:function(f){return new V(f.lng,f.lat)},unproject:function(f){return new ge(f.y,f.x)},bounds:new Q([-180,-90],[180,90])},lN={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var w=Math.PI/180,C=this.R,T=f.lat*w,R=this.R_MINOR/C,H=Math.sqrt(1-R*R),ae=H*Math.sin(T),ye=Math.tan(Math.PI/4-T/2)/Math.pow((1-ae)/(1+ae),H/2);return T=-C*Math.log(Math.max(ye,1e-10)),new V(f.lng*w*C,T)},unproject:function(f){for(var w=180/Math.PI,C=this.R,T=this.R_MINOR/C,R=Math.sqrt(1-T*T),H=Math.exp(-f.y/C),ae=Math.PI/2-2*Math.atan(H),ye=0,be=.1,Oe;ye<15&&Math.abs(be)>1e-7;ye++)Oe=R*Math.sin(ae),Oe=Math.pow((1-Oe)/(1+Oe),R/2),be=Math.PI/2-2*Math.atan(H*Oe)-ae,ae+=be;return new ge(ae*w,f.x*w/C)}},Che={__proto__:null,LonLat:oN,Mercator:lN,SphericalMercator:Ke},Ihe=i({},Se,{code:"EPSG:3395",projection:lN,transformation:function(){var f=.5/(Math.PI*lN.R);return Xe(f,.5,-f,.5)}()}),IB=i({},Se,{code:"EPSG:4326",projection:oN,transformation:Xe(1/180,1,-1/180,.5)}),$he=i({},Ne,{projection:oN,transformation:Xe(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,w){var C=w.lng-f.lng,T=w.lat-f.lat;return Math.sqrt(C*C+T*T)},infinite:!0});Ne.Earth=Se,Ne.EPSG3395=Ihe,Ne.EPSG3857=at,Ne.EPSG900913=He,Ne.EPSG4326=IB,Ne.Simple=$he;var To=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var w=f.target;if(!!w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var C=this.getEvents();w.on(C,this),this.once("remove",function(){w.off(C,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});dn.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var w=l(f);return this._layers[w]?this:(this._layers[w]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var w=l(f);return this._layers[w]?(this._loaded&&f.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,w){for(var C in this._layers)f.call(w,this._layers[C]);return this},_addLayers:function(f){f=f?_(f)?f:[f]:[];for(var w=0,C=f.length;w<C;w++)this.addLayer(f[w])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var w=l(f);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,w=-1/0,C=this._getZoomSpan();for(var T in this._zoomBoundLayers){var R=this._zoomBoundLayers[T].options;f=R.minZoom===void 0?f:Math.min(f,R.minZoom),w=R.maxZoom===void 0?w:Math.max(w,R.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=f===1/0?void 0:f,C!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tm=To.extend({initialize:function(f,w){g(this,w),this._layers={};var C,T;if(f)for(C=0,T=f.length;C<T;C++)this.addLayer(f[C])},addLayer:function(f){var w=this.getLayerId(f);return this._layers[w]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var w=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(f){var w=typeof f=="number"?f:this.getLayerId(f);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var w=Array.prototype.slice.call(arguments,1),C,T;for(C in this._layers)T=this._layers[C],T[f]&&T[f].apply(T,w);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,w){for(var C in this._layers)f.call(w,this._layers[C]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),The=function(f,w){return new Tm(f,w)},au=Tm.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),Tm.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),Tm.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new pe;for(var w in this._layers){var C=this._layers[w];f.extend(C.getBounds?C.getBounds():C.getLatLng())}return f}}),Nhe=function(f,w){return new au(f,w)},Nm=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){g(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,w){var C=this._getIconUrl(f);if(!C){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(C,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(T,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(f,w){var C=this.options,T=C[w+"Size"];typeof T=="number"&&(T=[T,T]);var R=Y(T),H=Y(w==="shadow"&&C.shadowAnchor||C.iconAnchor||R&&R.divideBy(2,!0));f.className="leaflet-marker-"+w+" "+(C.className||""),H&&(f.style.marginLeft=-H.x+"px",f.style.marginTop=-H.y+"px"),R&&(f.style.width=R.x+"px",f.style.height=R.y+"px")},_createImg:function(f,w){return w=w||document.createElement("img"),w.src=f,w},_getIconUrl:function(f){return Be.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Ehe(f){return new Nm(f)}var $0=Nm.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof $0.imagePath!="string"&&($0.imagePath=this._detectIconPath()),(this.options.imagePath||$0.imagePath)+Nm.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var w=function(C,T,R){var H=T.exec(C);return H&&H[R]};return f=w(f,/^url\((['"])?(.+)\1\)$/,2),f&&w(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Wt("div","leaflet-default-icon-path",document.body),w=Gr(f,"background-image")||Gr(f,"backgroundImage");if(document.body.removeChild(f),w=this._stripUrl(w),w)return w;var C=document.querySelector('link[href$="leaflet.css"]');return C?C.href.substring(0,C.href.length-11-1):""}}),$B=cl.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new lc(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Vt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&fr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var w=this._marker,C=w._map,T=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,H=ul(w._icon),ae=C.getPixelBounds(),ye=C.getPixelOrigin(),be=oe(ae.min._subtract(ye).add(R),ae.max._subtract(ye).subtract(R));if(!be.contains(H)){var Oe=Y((Math.max(be.max.x,H.x)-be.max.x)/(ae.max.x-be.max.x)-(Math.min(be.min.x,H.x)-be.min.x)/(ae.min.x-be.min.x),(Math.max(be.max.y,H.y)-be.max.y)/(ae.max.y-be.max.y)-(Math.min(be.min.y,H.y)-be.min.y)/(ae.min.y-be.min.y)).multiplyBy(T);C.panBy(Oe,{animate:!1}),this._draggable._newPos._add(Oe),this._draggable._startPos._add(Oe),xr(w._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=F(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,f)))},_onDrag:function(f){var w=this._marker,C=w._shadow,T=ul(w._icon),R=w._map.layerPointToLatLng(T);C&&xr(C,T),w._latlng=R,f.latlng=R,f.oldLatLng=this._oldLatLng,w.fire("move",f).fire("drag",f)},_onDragEnd:function(f){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),wx=To.extend({options:{icon:new $0,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,w){g(this,w),this._latlng=_e(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var w=this._latlng;return this._latlng=_e(f),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),C=f.icon.createIcon(this._icon),T=!1;C!==this._icon&&(this._icon&&this._removeIcon(),T=!0,f.title&&(C.title=f.title),C.tagName==="IMG"&&(C.alt=f.alt||"")),Vt(C,w),f.keyboard&&(C.tabIndex="0",C.setAttribute("role","button")),this._icon=C,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ce(C,"focus",this._panOnFocus,this);var R=f.icon.createShadow(this._shadow),H=!1;R!==this._shadow&&(this._removeShadow(),H=!0),R&&(Vt(R,w),R.alt=""),this._shadow=R,f.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&H&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&je(this._icon,"focus",this._panOnFocus,this),fn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&xr(this._icon,f),this._shadow&&xr(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(w)},_initInteraction:function(){if(!!this.options.interactive&&(Vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$B)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $B(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Ja(this._icon,f),this._shadow&&Ja(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(!!f){var w=this.options.icon.options,C=w.iconSize?Y(w.iconSize):Y(0,0),T=w.iconAnchor?Y(w.iconAnchor):Y(0,0);f.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:C.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ohe(f,w){return new wx(f,w)}var uc=To.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return g(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),xx=uc.extend({options:{fill:!0,radius:10},initialize:function(f,w){g(this,w),this._latlng=_e(f),this._radius=this.options.radius},setLatLng:function(f){var w=this._latlng;return this._latlng=_e(f),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var w=f&&f.radius||this._radius;return uc.prototype.setStyle.call(this,f),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,w=this._radiusY||f,C=this._clickTolerance(),T=[f+C,w+C];this._pxBounds=new Q(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Phe(f,w){return new xx(f,w)}var uN=xx.extend({initialize:function(f,w,C){if(typeof w=="number"&&(w=i({},C,{radius:w})),g(this,w),this._latlng=_e(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new pe(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:uc.prototype.setStyle,_project:function(){var f=this._latlng.lng,w=this._latlng.lat,C=this._map,T=C.options.crs;if(T.distance===Se.distance){var R=Math.PI/180,H=this._mRadius/Se.R/R,ae=C.project([w+H,f]),ye=C.project([w-H,f]),be=ae.add(ye).divideBy(2),Oe=C.unproject(be).lat,et=Math.acos((Math.cos(H*R)-Math.sin(w*R)*Math.sin(Oe*R))/(Math.cos(w*R)*Math.cos(Oe*R)))/R;(isNaN(et)||et===0)&&(et=H/Math.cos(Math.PI/180*w)),this._point=be.subtract(C.getPixelOrigin()),this._radius=isNaN(et)?0:be.x-C.project([Oe,f-et]).x,this._radiusY=be.y-ae.y}else{var Tt=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=C.latLngToLayerPoint(this._latlng),this._radius=this._point.x-C.latLngToLayerPoint(Tt).x}this._updateBounds()}});function Mhe(f,w,C){return new uN(f,w,C)}var su=uc.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,w){g(this,w),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var w=1/0,C=null,T=I0,R,H,ae=0,ye=this._parts.length;ae<ye;ae++)for(var be=this._parts[ae],Oe=1,et=be.length;Oe<et;Oe++){R=be[Oe-1],H=be[Oe];var Tt=T(f,R,H,!0);Tt<w&&(w=Tt,C=T(f,R,H))}return C&&(C.distance=Math.sqrt(w)),C},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return CB(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,w){return w=w||this._defaultShape(),f=_e(f),w.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new pe,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return Xs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var w=[],C=Xs(f),T=0,R=f.length;T<R;T++)C?(w[T]=_e(f[T]),this._bounds.extend(w[T])):w[T]=this._convertLatLngs(f[T]);return w},_project:function(){var f=new Q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),w=new V(f,f);!this._rawPxBounds||(this._pxBounds=new Q([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(f,w,C){var T=f[0]instanceof ge,R=f.length,H,ae;if(T){for(ae=[],H=0;H<R;H++)ae[H]=this._map.latLngToLayerPoint(f[H]),C.extend(ae[H]);w.push(ae)}else for(H=0;H<R;H++)this._projectLatlngs(f[H],w,C)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,C,T,R,H,ae,ye,be;for(C=0,R=0,H=this._rings.length;C<H;C++)for(be=this._rings[C],T=0,ae=be.length;T<ae-1;T++)ye=kB(be[T],be[T+1],f,T,!0),ye&&(w[R]=w[R]||[],w[R].push(ye[0]),(ye[1]!==be[T+1]||T===ae-2)&&(w[R].push(ye[1]),R++))}},_simplifyPoints:function(){for(var f=this._parts,w=this.options.smoothFactor,C=0,T=f.length;C<T;C++)f[C]=wB(f[C],w)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,w){var C,T,R,H,ae,ye,be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(C=0,H=this._parts.length;C<H;C++)for(ye=this._parts[C],T=0,ae=ye.length,R=ae-1;T<ae;R=T++)if(!(!w&&T===0)&&xB(f,ye[R],ye[T])<=be)return!0;return!1}});function Ahe(f,w){return new su(f,w)}su._flat=SB;var Em=su.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bB(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var w=su.prototype._convertLatLngs.call(this,f),C=w.length;return C>=2&&w[0]instanceof ge&&w[0].equals(w[C-1])&&w.pop(),w},_setLatLngs:function(f){su.prototype._setLatLngs.call(this,f),Xs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,w=this.options.weight,C=new V(w,w);if(f=new Q(f.min.subtract(C),f.max.add(C)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,R=this._rings.length,H;T<R;T++)H=vB(this._rings[T],f,!0),H.length&&this._parts.push(H)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var w=!1,C,T,R,H,ae,ye,be,Oe;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(H=0,be=this._parts.length;H<be;H++)for(C=this._parts[H],ae=0,Oe=C.length,ye=Oe-1;ae<Oe;ye=ae++)T=C[ae],R=C[ye],T.y>f.y!=R.y>f.y&&f.x<(R.x-T.x)*(f.y-T.y)/(R.y-T.y)+T.x&&(w=!w);return w||su.prototype._containsPoint.call(this,f,!0)}});function Rhe(f,w){return new Em(f,w)}var ou=au.extend({initialize:function(f,w){g(this,w),this._layers={},f&&this.addData(f)},addData:function(f){var w=_(f)?f:f.features,C,T,R;if(w){for(C=0,T=w.length;C<T;C++)R=w[C],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var H=this.options;if(H.filter&&!H.filter(f))return this;var ae=_x(f,H);return ae?(ae.feature=Cx(f),ae.defaultOptions=ae.options,this.resetStyle(ae),H.onEachFeature&&H.onEachFeature(f,ae),this.addLayer(ae)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=i({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(w){this._setLayerStyle(w,f)},this)},_setLayerStyle:function(f,w){f.setStyle&&(typeof w=="function"&&(w=w(f.feature)),f.setStyle(w))}});function _x(f,w){var C=f.type==="Feature"?f.geometry:f,T=C?C.coordinates:null,R=[],H=w&&w.pointToLayer,ae=w&&w.coordsToLatLng||cN,ye,be,Oe,et;if(!T&&!C)return null;switch(C.type){case"Point":return ye=ae(T),TB(H,f,ye,w);case"MultiPoint":for(Oe=0,et=T.length;Oe<et;Oe++)ye=ae(T[Oe]),R.push(TB(H,f,ye,w));return new au(R);case"LineString":case"MultiLineString":return be=kx(T,C.type==="LineString"?0:1,ae),new su(be,w);case"Polygon":case"MultiPolygon":return be=kx(T,C.type==="Polygon"?1:2,ae),new Em(be,w);case"GeometryCollection":for(Oe=0,et=C.geometries.length;Oe<et;Oe++){var Tt=_x({geometry:C.geometries[Oe],type:"Feature",properties:f.properties},w);Tt&&R.push(Tt)}return new au(R);case"FeatureCollection":for(Oe=0,et=C.features.length;Oe<et;Oe++){var rn=_x(C.features[Oe],w);rn&&R.push(rn)}return new au(R);default:throw new Error("Invalid GeoJSON object.")}}function TB(f,w,C,T){return f?f(w,C):new wx(C,T&&T.markersInheritOptions&&T)}function cN(f){return new ge(f[1],f[0],f[2])}function kx(f,w,C){for(var T=[],R=0,H=f.length,ae;R<H;R++)ae=w?kx(f[R],w-1,C):(C||cN)(f[R]),T.push(ae);return T}function dN(f,w){return f=_e(f),f.alt!==void 0?[p(f.lng,w),p(f.lat,w),p(f.alt,w)]:[p(f.lng,w),p(f.lat,w)]}function Sx(f,w,C,T){for(var R=[],H=0,ae=f.length;H<ae;H++)R.push(w?Sx(f[H],Xs(f[H])?0:w-1,C,T):dN(f[H],T));return!w&&C&&R.length>0&&R.push(R[0].slice()),R}function Om(f,w){return f.feature?i({},f.feature,{geometry:w}):Cx(w)}function Cx(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var pN={toGeoJSON:function(f){return Om(this,{type:"Point",coordinates:dN(this.getLatLng(),f)})}};wx.include(pN),uN.include(pN),xx.include(pN),su.include({toGeoJSON:function(f){var w=!Xs(this._latlngs),C=Sx(this._latlngs,w?1:0,!1,f);return Om(this,{type:(w?"Multi":"")+"LineString",coordinates:C})}}),Em.include({toGeoJSON:function(f){var w=!Xs(this._latlngs),C=w&&!Xs(this._latlngs[0]),T=Sx(this._latlngs,C?2:w?1:0,!0,f);return w||(T=[T]),Om(this,{type:(C?"Multi":"")+"Polygon",coordinates:T})}}),Tm.include({toMultiPoint:function(f){var w=[];return this.eachLayer(function(C){w.push(C.toGeoJSON(f).geometry.coordinates)}),Om(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(f){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(f);var C=w==="GeometryCollection",T=[];return this.eachLayer(function(R){if(R.toGeoJSON){var H=R.toGeoJSON(f);if(C)T.push(H.geometry);else{var ae=Cx(H);ae.type==="FeatureCollection"?T.push.apply(T,ae.features):T.push(ae)}}}),C?Om(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function NB(f,w){return new ou(f,w)}var Dhe=NB,Ix=To.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,w,C){this._url=f,this._bounds=he(w),g(this,C)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&Na(this._image),this},bringToBack:function(){return this._map&&ia(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=he(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",w=this._image=f?this._url:Wt("img");if(Vt(w,"leaflet-image-layer"),this._zoomAnimated&&Vt(w,"leaflet-zoom-animated"),this.options.className&&Vt(w,this.options.className),w.onselectstart=d,w.onmousemove=d,w.onload=s(this.fire,this,"load"),w.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(f){var w=this._map.getZoomScale(f.zoom),C=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Zs(this._image,C,w)},_reset:function(){var f=this._image,w=new Q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),C=w.getSize();xr(f,w.min),f.style.width=C.x+"px",f.style.height=C.y+"px"},_updateOpacity:function(){Ja(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Lhe=function(f,w,C){return new Ix(f,w,C)},EB=Ix.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",w=this._image=f?this._url:Wt("video");if(Vt(w,"leaflet-image-layer"),this._zoomAnimated&&Vt(w,"leaflet-zoom-animated"),this.options.className&&Vt(w,this.options.className),w.onselectstart=d,w.onmousemove=d,w.onloadeddata=s(this.fire,this,"load"),f){for(var C=w.getElementsByTagName("source"),T=[],R=0;R<C.length;R++)T.push(C[R].src);this._url=C.length>0?T:[w.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var H=0;H<this._url.length;H++){var ae=Wt("source");ae.src=this._url[H],w.appendChild(ae)}}});function Fhe(f,w,C){return new EB(f,w,C)}var OB=Ix.extend({_initImage:function(){var f=this._image=this._url;Vt(f,"leaflet-image-layer"),this._zoomAnimated&&Vt(f,"leaflet-zoom-animated"),this.options.className&&Vt(f,this.options.className),f.onselectstart=d,f.onmousemove=d}});function zhe(f,w,C){return new OB(f,w,C)}var dl=To.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,w){f&&(f instanceof ge||_(f))?(this._latlng=_e(f),g(this,w)):(g(this,f),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Ja(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Ja(this._container,1),this.bringToFront(),this.options.interactive&&(Vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Ja(this._container,0),this._removeTimeout=setTimeout(s(fn,void 0,this._container),200)):fn(this._container),this.options.interactive&&(fr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=_e(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Na(this._container),this},bringToBack:function(){return this._map&&ia(this._container),this},_prepareOpen:function(f){var w=this._source;if(!w._map)return!1;if(w instanceof au){w=null;var C=this._source._layers;for(var T in C)if(C[T]._map){w=C[T];break}if(!w)return!1;this._source=w}if(!f)if(w.getCenter)f=w.getCenter();else if(w.getLatLng)f=w.getLatLng();else if(w.getBounds)f=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var f=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")f.innerHTML=w;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var f=this._map.latLngToLayerPoint(this._latlng),w=Y(this.options.offset),C=this._getAnchor();this._zoomAnimated?xr(this._container,f.add(C)):w=w.add(f).add(C);var T=this._containerBottom=-w.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=T+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});dn.include({_initOverlay:function(f,w,C,T){var R=w;return R instanceof f||(R=new f(T).setContent(w)),C&&R.setLatLng(C),R}}),To.include({_initOverlay:function(f,w,C,T){var R=C;return R instanceof f?(g(R,T),R._source=this):(R=w&&!T?w:new f(T,this),R.setContent(C)),R}});var $x=dl.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,dl.prototype.openOn.call(this,f)},onAdd:function(f){dl.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof uc||this._source.on("preclick",vn))},onRemove:function(f){dl.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof uc||this._source.off("preclick",vn))},getEvents:function(){var f=dl.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",w=this._container=Wt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),C=this._wrapper=Wt("div",f+"-content-wrapper",w);if(this._contentNode=Wt("div",f+"-content",C),Ea(w),ji(this._contentNode),ce(w,"contextmenu",vn),this._tipContainer=Wt("div",f+"-tip-container",w),this._tip=Wt("div",f+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=Wt("a",f+"-close-button",w);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',ce(T,"click",function(R){qr(R),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,w=f.style;w.width="",w.whiteSpace="nowrap";var C=f.offsetWidth;C=Math.min(C,this.options.maxWidth),C=Math.max(C,this.options.minWidth),w.width=C+1+"px",w.whiteSpace="",w.height="";var T=f.offsetHeight,R=this.options.maxHeight,H="leaflet-popup-scrolled";R&&T>R?(w.height=R+"px",Vt(f,H)):fr(f,H),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),C=this._getAnchor();xr(this._container,w.add(C))},_adjustPan:function(){if(!!this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,w=parseInt(Gr(this._container,"marginBottom"),10)||0,C=this._container.offsetHeight+w,T=this._containerWidth,R=new V(this._containerLeft,-C-this._containerBottom);R._add(ul(this._container));var H=f.layerPointToContainerPoint(R),ae=Y(this.options.autoPanPadding),ye=Y(this.options.autoPanPaddingTopLeft||ae),be=Y(this.options.autoPanPaddingBottomRight||ae),Oe=f.getSize(),et=0,Tt=0;H.x+T+be.x>Oe.x&&(et=H.x+T-Oe.x+be.x),H.x-et-ye.x<0&&(et=H.x-ye.x),H.y+C+be.y>Oe.y&&(Tt=H.y+C-Oe.y+be.y),H.y-Tt-ye.y<0&&(Tt=H.y-ye.y),(et||Tt)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([et,Tt]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Bhe=function(f,w){return new $x(f,w)};dn.mergeOptions({closePopupOnClick:!0}),dn.include({openPopup:function(f,w,C){return this._initOverlay($x,f,w,C).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),To.include({bindPopup:function(f,w){return this._popup=this._initOverlay($x,this._popup,f,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof au||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Io(f);var w=f.layer||f.target;if(this._popup._source===w&&!(w instanceof uc)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=w,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var Tx=dl.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){dl.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){dl.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=dl.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",w=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Wt("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var w,C,T=this._map,R=this._container,H=T.latLngToContainerPoint(T.getCenter()),ae=T.layerPointToContainerPoint(f),ye=this.options.direction,be=R.offsetWidth,Oe=R.offsetHeight,et=Y(this.options.offset),Tt=this._getAnchor();ye==="top"?(w=be/2,C=Oe):ye==="bottom"?(w=be/2,C=0):ye==="center"?(w=be/2,C=Oe/2):ye==="right"?(w=0,C=Oe/2):ye==="left"?(w=be,C=Oe/2):ae.x<H.x?(ye="right",w=0,C=Oe/2):(ye="left",w=be+(et.x+Tt.x)*2,C=Oe/2),f=f.subtract(Y(w,C,!0)).add(et).add(Tt),fr(R,"leaflet-tooltip-right"),fr(R,"leaflet-tooltip-left"),fr(R,"leaflet-tooltip-top"),fr(R,"leaflet-tooltip-bottom"),Vt(R,"leaflet-tooltip-"+ye),xr(R,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Ja(this._container,f)},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(w)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Whe=function(f,w){return new Tx(f,w)};dn.include({openTooltip:function(f,w,C){return this._initOverlay(Tx,f,w,C).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),To.include({bindTooltip:function(f,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tx,this._tooltip,f,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var w=f?"off":"on",C={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?C.add=this._openTooltip:(C.mouseover=this._openTooltip,C.mouseout=this.closeTooltip,C.click=this._openTooltip,this._map?this._addFocusListeners():C.add=this._addFocusListeners),this._tooltip.options.sticky&&(C.mousemove=this._moveTooltip),this[w](C),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof au||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var w=typeof f.getElement=="function"&&f.getElement();w&&(ce(w,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),ce(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var w=typeof f.getElement=="function"&&f.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var w=f.latlng,C,T;this._tooltip.options.sticky&&f.originalEvent&&(C=this._map.mouseEventToContainerPoint(f.originalEvent),T=this._map.containerPointToLayerPoint(C),w=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(w)}});var PB=Nm.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var w=f&&f.tagName==="DIV"?f:document.createElement("div"),C=this.options;if(C.html instanceof Element?(Vi(w),w.appendChild(C.html)):w.innerHTML=C.html!==!1?C.html:"",C.bgPos){var T=Y(C.bgPos);w.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function Vhe(f){return new PB(f)}Nm.Default=$0;var T0=To.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){g(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),fn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Na(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ia(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof V?f:new V(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var w=this.getPane().children,C=-f(-1/0,1/0),T=0,R=w.length,H;T<R;T++)H=w[T].style.zIndex,w[T]!==this._container&&H&&(C=f(C,+H));isFinite(C)&&(this.options.zIndex=C+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!Be.ielt9){Ja(this._container,this.options.opacity);var f=+new Date,w=!1,C=!1;for(var T in this._tiles){var R=this._tiles[T];if(!(!R.current||!R.loaded)){var H=Math.min(1,(f-R.loaded)/200);Ja(R.el,H),H<1?w=!0:(R.active?C=!0:this._onOpaqueTile(R),R.active=!0)}}C&&!this._noPrune&&this._pruneTiles(),w&&(E(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,w=this.options.maxZoom;if(f!==void 0){for(var C in this._levels)C=Number(C),this._levels[C].el.children.length||C===f?(this._levels[C].el.style.zIndex=w-Math.abs(f-C),this._onUpdateLevel(C)):(fn(this._levels[C].el),this._removeTilesAtZoom(C),this._onRemoveLevel(C),delete this._levels[C]);var T=this._levels[f],R=this._map;return T||(T=this._levels[f]={},T.el=Wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=w,T.origin=R.project(R.unproject(R.getPixelOrigin()),f).round(),T.zoom=f,this._setZoomTransform(T,R.getCenter(),R.getZoom()),d(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(!!this._map){var f,w,C=this._map.getZoom();if(C>this.options.maxZoom||C<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)w=this._tiles[f],w.retain=w.current;for(f in this._tiles)if(w=this._tiles[f],w.current&&!w.active){var T=w.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var w in this._tiles)this._tiles[w].coords.z===f&&this._removeTile(w)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)fn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,w,C,T){var R=Math.floor(f/2),H=Math.floor(w/2),ae=C-1,ye=new V(+R,+H);ye.z=+ae;var be=this._tileCoordsToKey(ye),Oe=this._tiles[be];return Oe&&Oe.active?(Oe.retain=!0,!0):(Oe&&Oe.loaded&&(Oe.retain=!0),ae>T?this._retainParent(R,H,ae,T):!1)},_retainChildren:function(f,w,C,T){for(var R=2*f;R<2*f+2;R++)for(var H=2*w;H<2*w+2;H++){var ae=new V(R,H);ae.z=C+1;var ye=this._tileCoordsToKey(ae),be=this._tiles[ye];if(be&&be.active){be.retain=!0;continue}else be&&be.loaded&&(be.retain=!0);C+1<T&&this._retainChildren(R,H,C+1,T)}},_resetView:function(f){var w=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var w=this.options;return w.minNativeZoom!==void 0&&f<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<f?w.maxNativeZoom:f},_setView:function(f,w,C,T){var R=Math.round(w);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var H=this.options.updateWhenZooming&&R!==this._tileZoom;(!T||H)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(f),C||this._pruneTiles(),this._noPrune=!!C),this._setZoomTransforms(f,w)},_setZoomTransforms:function(f,w){for(var C in this._levels)this._setZoomTransform(this._levels[C],f,w)},_setZoomTransform:function(f,w,C){var T=this._map.getZoomScale(C,f.zoom),R=f.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(w,C)).round();Be.any3d?Zs(f.el,R,T):xr(f.el,R)},_resetGrid:function(){var f=this._map,w=f.options.crs,C=this._tileSize=this.getTileSize(),T=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,w.wrapLng[0]],T).x/C.x),Math.ceil(f.project([0,w.wrapLng[1]],T).x/C.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([w.wrapLat[0],0],T).y/C.x),Math.ceil(f.project([w.wrapLat[1],0],T).y/C.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var w=this._map,C=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),T=w.getZoomScale(C,this._tileZoom),R=w.project(f,this._tileZoom).floor(),H=w.getSize().divideBy(T*2);return new Q(R.subtract(H),R.add(H))},_update:function(f){var w=this._map;if(!!w){var C=this._clampZoom(w.getZoom());if(f===void 0&&(f=w.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(f),R=this._pxBoundsToTileRange(T),H=R.getCenter(),ae=[],ye=this.options.keepBuffer,be=new Q(R.getBottomLeft().subtract([ye,-ye]),R.getTopRight().add([ye,-ye]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Oe in this._tiles){var et=this._tiles[Oe].coords;(et.z!==this._tileZoom||!be.contains(new V(et.x,et.y)))&&(this._tiles[Oe].current=!1)}if(Math.abs(C-this._tileZoom)>1){this._setView(f,C);return}for(var Tt=R.min.y;Tt<=R.max.y;Tt++)for(var rn=R.min.x;rn<=R.max.x;rn++){var Oa=new V(rn,Tt);if(Oa.z=this._tileZoom,!!this._isValidTile(Oa)){var Ci=this._tiles[this._tileCoordsToKey(Oa)];Ci?Ci.current=!0:ae.push(Oa)}}if(ae.sort(function(Ya,Mm){return Ya.distanceTo(H)-Mm.distanceTo(H)}),ae.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Js=document.createDocumentFragment();for(rn=0;rn<ae.length;rn++)this._addTile(ae[rn],Js);this._level.el.appendChild(Js)}}}},_isValidTile:function(f){var w=this._map.options.crs;if(!w.infinite){var C=this._globalTileRange;if(!w.wrapLng&&(f.x<C.min.x||f.x>C.max.x)||!w.wrapLat&&(f.y<C.min.y||f.y>C.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(f);return he(this.options.bounds).overlaps(T)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var w=this._map,C=this.getTileSize(),T=f.scaleBy(C),R=T.add(C),H=w.unproject(T,f.z),ae=w.unproject(R,f.z);return[H,ae]},_tileCoordsToBounds:function(f){var w=this._tileCoordsToNwSe(f),C=new pe(w[0],w[1]);return this.options.noWrap||(C=this._map.wrapLatLngBounds(C)),C},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var w=f.split(":"),C=new V(+w[0],+w[1]);return C.z=+w[2],C},_removeTile:function(f){var w=this._tiles[f];!w||(fn(w.el),delete this._tiles[f],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){Vt(f,"leaflet-tile");var w=this.getTileSize();f.style.width=w.x+"px",f.style.height=w.y+"px",f.onselectstart=d,f.onmousemove=d,Be.ielt9&&this.options.opacity<1&&Ja(f,this.options.opacity)},_addTile:function(f,w){var C=this._getTilePos(f),T=this._tileCoordsToKey(f),R=this.createTile(this._wrapCoords(f),s(this._tileReady,this,f));this._initTile(R),this.createTile.length<2&&F(s(this._tileReady,this,f,null,R)),xr(R,C),this._tiles[T]={el:R,coords:f,current:!0},w.appendChild(R),this.fire("tileloadstart",{tile:R,coords:f})},_tileReady:function(f,w,C){w&&this.fire("tileerror",{error:w,tile:C,coords:f});var T=this._tileCoordsToKey(f);C=this._tiles[T],C&&(C.loaded=+new Date,this._map._fadeAnimated?(Ja(C.el,0),E(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(C.active=!0,this._pruneTiles()),w||(Vt(C.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:C.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Be.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var w=new V(this._wrapX?c(f.x,this._wrapX):f.x,this._wrapY?c(f.y,this._wrapY):f.y);return w.z=f.z,w},_pxBoundsToTileRange:function(f){var w=this.getTileSize();return new Q(f.min.unscaleBy(w).floor(),f.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function jhe(f){return new T0(f)}var Pm=T0.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,w){this._url=f,w=g(this,w),w.detectRetina&&Be.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,w){return this._url===f&&w===void 0&&(w=!0),this._url=f,w||this.redraw(),this},createTile:function(f,w){var C=document.createElement("img");return ce(C,"load",s(this._tileOnLoad,this,w,C)),ce(C,"error",s(this._tileOnError,this,w,C)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(C.referrerPolicy=this.options.referrerPolicy),C.alt="",C.src=this.getTileUrl(f),C},getTileUrl:function(f){var w={r:Be.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var C=this._globalTileRange.max.y-f.y;this.options.tms&&(w.y=C),w["-y"]=C}return b(this._url,i(w,this.options))},_tileOnLoad:function(f,w){Be.ielt9?setTimeout(s(f,this,null,w),0):f(null,w)},_tileOnError:function(f,w,C){var T=this.options.errorTileUrl;T&&w.getAttribute("src")!==T&&(w.src=T),f(C,w)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,w=this.options.maxZoom,C=this.options.zoomReverse,T=this.options.zoomOffset;return C&&(f=w-f),f+T},_getSubdomain:function(f){var w=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var f,w;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(w=this._tiles[f].el,w.onload=d,w.onerror=d,!w.complete)){w.src=S;var C=this._tiles[f].coords;fn(w),delete this._tiles[f],this.fire("tileabort",{tile:w,coords:C})}},_removeTile:function(f){var w=this._tiles[f];if(!!w)return w.el.setAttribute("src",S),T0.prototype._removeTile.call(this,f)},_tileReady:function(f,w,C){if(!(!this._map||C&&C.getAttribute("src")===S))return T0.prototype._tileReady.call(this,f,w,C)}});function MB(f,w){return new Pm(f,w)}var AB=Pm.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,w){this._url=f;var C=i({},this.defaultWmsParams);for(var T in w)T in this.options||(C[T]=w[T]);w=g(this,w);var R=w.detectRetina&&Be.retina?2:1,H=this.getTileSize();C.width=H.x*R,C.height=H.y*R,this.wmsParams=C},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,Pm.prototype.onAdd.call(this,f)},getTileUrl:function(f){var w=this._tileCoordsToNwSe(f),C=this._crs,T=oe(C.project(w[0]),C.project(w[1])),R=T.min,H=T.max,ae=(this._wmsVersion>=1.3&&this._crs===IB?[R.y,R.x,H.y,H.x]:[R.x,R.y,H.x,H.y]).join(","),ye=Pm.prototype.getTileUrl.call(this,f);return ye+y(this.wmsParams,ye,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ae},setParams:function(f,w){return i(this.wmsParams,f),w||this.redraw(),this}});function Hhe(f,w){return new AB(f,w)}Pm.WMS=AB,MB.wms=Hhe;var lu=To.extend({options:{padding:.1},initialize:function(f){g(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,w){var C=this._map.getZoomScale(w,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,w),H=T.multiplyBy(-C).add(R).subtract(this._map._getNewPixelOrigin(f,w));Be.any3d?Zs(this._container,H,C):xr(this._container,H)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,w=this._map.getSize(),C=this._map.containerPointToLayerPoint(w.multiplyBy(-f)).round();this._bounds=new Q(C,C.add(w.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),RB=lu.extend({options:{tolerance:0},getEvents:function(){var f=lu.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){lu.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");ce(f,"mousemove",this._onMouseMove,this),ce(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ce(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,fn(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var w in this._layers)f=this._layers[w],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lu.prototype._update.call(this);var f=this._bounds,w=this._container,C=f.getSize(),T=Be.retina?2:1;xr(w,f.min),w.width=T*C.x,w.height=T*C.y,w.style.width=C.x+"px",w.style.height=C.y+"px",Be.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){lu.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var w=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var w=f._order,C=w.next,T=w.prev;C?C.prev=T:this._drawLast=T,T?T.next=C:this._drawFirst=C,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var w=f.options.dashArray.split(/[, ]+/),C=[],T,R;for(R=0;R<w.length;R++){if(T=Number(w[R]),isNaN(T))return;C.push(T)}f.options._dashArray=C}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){!this._map||(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var w=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Q,this._redrawBounds.extend(f._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(f._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var w=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,w=this._redrawBounds;if(this._ctx.save(),w){var C=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,C.x,C.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)f=T.layer,(!w||f._pxBounds&&f._pxBounds.intersects(w))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,w){if(!!this._drawing){var C,T,R,H,ae=f._parts,ye=ae.length,be=this._ctx;if(!!ye){for(be.beginPath(),C=0;C<ye;C++){for(T=0,R=ae[C].length;T<R;T++)H=ae[C][T],be[T?"lineTo":"moveTo"](H.x,H.y);w&&be.closePath()}this._fillStroke(be,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var w=f._point,C=this._ctx,T=Math.max(Math.round(f._radius),1),R=(Math.max(Math.round(f._radiusY),1)||T)/T;R!==1&&(C.save(),C.scale(1,R)),C.beginPath(),C.arc(w.x,w.y/R,T,0,Math.PI*2,!1),R!==1&&C.restore(),this._fillStroke(C,f)}},_fillStroke:function(f,w){var C=w.options;C.fill&&(f.globalAlpha=C.fillOpacity,f.fillStyle=C.fillColor||C.color,f.fill(C.fillRule||"evenodd")),C.stroke&&C.weight!==0&&(f.setLineDash&&f.setLineDash(w.options&&w.options._dashArray||[]),f.globalAlpha=C.opacity,f.lineWidth=C.weight,f.strokeStyle=C.color,f.lineCap=C.lineCap,f.lineJoin=C.lineJoin,f.stroke())},_onClick:function(f){for(var w=this._map.mouseEventToLayerPoint(f),C,T,R=this._drawFirst;R;R=R.next)C=R.layer,C.options.interactive&&C._containsPoint(w)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(C))&&(T=C);this._fireEvent(T?[T]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,w)}},_handleMouseOut:function(f){var w=this._hoveredLayer;w&&(fr(this._container,"leaflet-interactive"),this._fireEvent([w],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,w){if(!this._mouseHoverThrottled){for(var C,T,R=this._drawFirst;R;R=R.next)C=R.layer,C.options.interactive&&C._containsPoint(w)&&(T=C);T!==this._hoveredLayer&&(this._handleMouseOut(f),T&&(Vt(this._container,"leaflet-interactive"),this._fireEvent([T],f,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,w,C){this._map._fireDOMEvent(w,C||w.type,f)},_bringToFront:function(f){var w=f._order;if(!!w){var C=w.next,T=w.prev;if(C)C.prev=T;else return;T?T.next=C:C&&(this._drawFirst=C),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(f)}},_bringToBack:function(f){var w=f._order;if(!!w){var C=w.next,T=w.prev;if(T)T.next=C;else return;C?C.prev=T:T&&(this._drawLast=T),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(f)}}});function DB(f){return Be.canvas?new RB(f):null}var N0=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uhe={_initContainer:function(){this._container=Wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(lu.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var w=f._container=N0("shape");Vt(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",f._path=N0("path"),w.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var w=f._container;this._container.appendChild(w),f.options.interactive&&f.addInteractiveTarget(w)},_removePath:function(f){var w=f._container;fn(w),f.removeInteractiveTarget(w),delete this._layers[l(f)]},_updateStyle:function(f){var w=f._stroke,C=f._fill,T=f.options,R=f._container;R.stroked=!!T.stroke,R.filled=!!T.fill,T.stroke?(w||(w=f._stroke=N0("stroke")),R.appendChild(w),w.weight=T.weight+"px",w.color=T.color,w.opacity=T.opacity,T.dashArray?w.dashStyle=_(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=T.lineCap.replace("butt","flat"),w.joinstyle=T.lineJoin):w&&(R.removeChild(w),f._stroke=null),T.fill?(C||(C=f._fill=N0("fill")),R.appendChild(C),C.color=T.fillColor||T.color,C.opacity=T.fillOpacity):C&&(R.removeChild(C),f._fill=null)},_updateCircle:function(f){var w=f._point.round(),C=Math.round(f._radius),T=Math.round(f._radiusY||C);this._setPath(f,f._empty()?"M0 0":"AL "+w.x+","+w.y+" "+C+","+T+" 0,"+65535*360)},_setPath:function(f,w){f._path.v=w},_bringToFront:function(f){Na(f._container)},_bringToBack:function(f){ia(f._container)}},Nx=Be.vml?N0:_t,E0=lu.extend({_initContainer:function(){this._container=Nx("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Nx("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fn(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lu.prototype._update.call(this);var f=this._bounds,w=f.getSize(),C=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,C.setAttribute("width",w.x),C.setAttribute("height",w.y)),xr(C,f.min),C.setAttribute("viewBox",[f.min.x,f.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(f){var w=f._path=Nx("path");f.options.className&&Vt(w,f.options.className),f.options.interactive&&Vt(w,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){fn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var w=f._path,C=f.options;!w||(C.stroke?(w.setAttribute("stroke",C.color),w.setAttribute("stroke-opacity",C.opacity),w.setAttribute("stroke-width",C.weight),w.setAttribute("stroke-linecap",C.lineCap),w.setAttribute("stroke-linejoin",C.lineJoin),C.dashArray?w.setAttribute("stroke-dasharray",C.dashArray):w.removeAttribute("stroke-dasharray"),C.dashOffset?w.setAttribute("stroke-dashoffset",C.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),C.fill?(w.setAttribute("fill",C.fillColor||C.color),w.setAttribute("fill-opacity",C.fillOpacity),w.setAttribute("fill-rule",C.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(f,w){this._setPath(f,mt(f._parts,w))},_updateCircle:function(f){var w=f._point,C=Math.max(Math.round(f._radius),1),T=Math.max(Math.round(f._radiusY),1)||C,R="a"+C+","+T+" 0 1,0 ",H=f._empty()?"M0 0":"M"+(w.x-C)+","+w.y+R+C*2+",0 "+R+-C*2+",0 ";this._setPath(f,H)},_setPath:function(f,w){f._path.setAttribute("d",w)},_bringToFront:function(f){Na(f._path)},_bringToBack:function(f){ia(f._path)}});Be.vml&&E0.include(Uhe);function LB(f){return Be.svg||Be.vml?new E0(f):null}dn.include({getRenderer:function(f){var w=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var w=this._paneRenderers[f];return w===void 0&&(w=this._createRenderer({pane:f}),this._paneRenderers[f]=w),w},_createRenderer:function(f){return this.options.preferCanvas&&DB(f)||LB(f)}});var FB=Em.extend({initialize:function(f,w){Em.prototype.initialize.call(this,this._boundsToLatLngs(f),w)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=he(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function Ghe(f,w){return new FB(f,w)}E0.create=Nx,E0.pointsToPath=mt,ou.geometryToLayer=_x,ou.coordsToLatLng=cN,ou.coordsToLatLngs=kx,ou.latLngToCoords=dN,ou.latLngsToCoords=Sx,ou.getFeature=Om,ou.asFeature=Cx,dn.mergeOptions({boxZoom:!0});var zB=cl.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rc(),tp(),this._startPoint=this._map.mouseEventToContainerPoint(f),ce(document,{contextmenu:Io,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Wt("div","leaflet-zoom-box",this._container),Vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var w=new Q(this._point,this._startPoint),C=w.getSize();xr(this._box,w.min),this._box.style.width=C.x+"px",this._box.style.height=C.y+"px"},_finish:function(){this._moved&&(fn(this._box),fr(this._container,"leaflet-crosshair")),nu(),ac(),je(document,{contextmenu:Io,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var w=new pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});dn.addInitHook("addHandler","boxZoom",zB),dn.mergeOptions({doubleClickZoom:!0});var BB=cl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var w=this._map,C=w.getZoom(),T=w.options.zoomDelta,R=f.originalEvent.shiftKey?C-T:C+T;w.options.doubleClickZoom==="center"?w.setZoom(R):w.setZoomAround(f.containerPoint,R)}});dn.addInitHook("addHandler","doubleClickZoom",BB),dn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var WB=cl.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new lc(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}Vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){fr(this._map._container,"leaflet-grab"),fr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=he(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var w=this._lastTime=+new Date,C=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(C),this._times.push(w),this._prunePositions(w)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,w){return f-(f-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;f.x<w.min.x&&(f.x=this._viscousLimit(f.x,w.min.x)),f.y<w.min.y&&(f.y=this._viscousLimit(f.y,w.min.y)),f.x>w.max.x&&(f.x=this._viscousLimit(f.x,w.max.x)),f.y>w.max.y&&(f.y=this._viscousLimit(f.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,w=Math.round(f/2),C=this._initialWorldOffset,T=this._draggable._newPos.x,R=(T-w+C)%f+w-C,H=(T+w+C)%f-w-C,ae=Math.abs(R+C)<Math.abs(H+C)?R:H;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ae},_onDragEnd:function(f){var w=this._map,C=w.options,T=!C.inertia||f.noInertia||this._times.length<2;if(w.fire("dragend",f),T)w.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),H=(this._lastTime-this._times[0])/1e3,ae=C.easeLinearity,ye=R.multiplyBy(ae/H),be=ye.distanceTo([0,0]),Oe=Math.min(C.inertiaMaxSpeed,be),et=ye.multiplyBy(Oe/be),Tt=Oe/(C.inertiaDeceleration*ae),rn=et.multiplyBy(-Tt/2).round();!rn.x&&!rn.y?w.fire("moveend"):(rn=w._limitOffset(rn,w.options.maxBounds),F(function(){w.panBy(rn,{duration:Tt,easeLinearity:ae,noMoveStart:!0,animate:!0})}))}}});dn.addInitHook("addHandler","dragging",WB),dn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var VB=cl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),ce(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,w=document.documentElement,C=f.scrollTop||w.scrollTop,T=f.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(T,C)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var w=this._panKeys={},C=this.keyCodes,T,R;for(T=0,R=C.left.length;T<R;T++)w[C.left[T]]=[-1*f,0];for(T=0,R=C.right.length;T<R;T++)w[C.right[T]]=[f,0];for(T=0,R=C.down.length;T<R;T++)w[C.down[T]]=[0,f];for(T=0,R=C.up.length;T<R;T++)w[C.up[T]]=[0,-1*f]},_setZoomDelta:function(f){var w=this._zoomKeys={},C=this.keyCodes,T,R;for(T=0,R=C.zoomIn.length;T<R;T++)w[C.zoomIn[T]]=f;for(T=0,R=C.zoomOut.length;T<R;T++)w[C.zoomOut[T]]=-f},_addHooks:function(){ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var w=f.keyCode,C=this._map,T;if(w in this._panKeys){if(!C._panAnim||!C._panAnim._inProgress)if(T=this._panKeys[w],f.shiftKey&&(T=Y(T).multiplyBy(3)),C.options.maxBounds&&(T=C._limitOffset(Y(T),C.options.maxBounds)),C.options.worldCopyJump){var R=C.wrapLatLng(C.unproject(C.project(C.getCenter()).add(T)));C.panTo(R)}else C.panBy(T)}else if(w in this._zoomKeys)C.setZoom(C.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&C._popup&&C._popup.options.closeOnEscapeKey)C.closePopup();else return;Io(f)}}});dn.addInitHook("addHandler","keyboard",VB),dn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var jB=cl.extend({addHooks:function(){ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var w=S0(f),C=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var T=Math.max(C-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),T),Io(f)},_performZoom:function(){var f=this._map,w=f.getZoom(),C=this._map.options.zoomSnap||0;f._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,H=C?Math.ceil(R/C)*C:R,ae=f._limitZoom(w+(this._delta>0?H:-H))-w;this._delta=0,this._startTime=null,ae&&(f.options.scrollWheelZoom==="center"?f.setZoom(w+ae):f.setZoomAround(this._lastMousePos,w+ae))}});dn.addInitHook("addHandler","scrollWheelZoom",jB);var qhe=600;dn.mergeOptions({tapHold:Be.touchNative&&Be.safari&&Be.mobile,tapTolerance:15});var HB=cl.extend({addHooks:function(){ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var w=f.touches[0];this._startPos=this._newPos=new V(w.clientX,w.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(ce(document,"touchend",qr),ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),qhe),ce(document,"touchend touchcancel contextmenu",this._cancel,this),ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){je(document,"touchend",qr),je(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),je(document,"touchend touchcancel contextmenu",this._cancel,this),je(document,"touchmove",this._onMove,this)},_onMove:function(f){var w=f.touches[0];this._newPos=new V(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,w){var C=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});C._simulated=!0,w.target.dispatchEvent(C)}});dn.addInitHook("addHandler","tapHold",HB),dn.mergeOptions({touchZoom:Be.touch,bounceAtZoomLimits:!0});var UB=cl.extend({addHooks:function(){Vt(this._map._container,"leaflet-touch-zoom"),ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){fr(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var w=this._map;if(!(!f.touches||f.touches.length!==2||w._animatingZoom||this._zooming)){var C=w.mouseEventToContainerPoint(f.touches[0]),T=w.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(C.add(T)._divideBy(2))),this._startDist=C.distanceTo(T),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),ce(document,"touchmove",this._onTouchMove,this),ce(document,"touchend touchcancel",this._onTouchEnd,this),qr(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var w=this._map,C=w.mouseEventToContainerPoint(f.touches[0]),T=w.mouseEventToContainerPoint(f.touches[1]),R=C.distanceTo(T)/this._startDist;if(this._zoom=w.getScaleZoom(R,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&R<1||this._zoom>w.getMaxZoom()&&R>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var H=C._add(T)._divideBy(2)._subtract(this._centerPoint);if(R===1&&H.x===0&&H.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(H),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var ae=s(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(ae,this,!0),qr(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,E(this._animRequest),je(document,"touchmove",this._onTouchMove,this),je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});dn.addInitHook("addHandler","touchZoom",UB),dn.BoxZoom=zB,dn.DoubleClickZoom=BB,dn.Drag=WB,dn.Keyboard=VB,dn.ScrollWheelZoom=jB,dn.TapHold=HB,dn.TouchZoom=UB,n.Bounds=Q,n.Browser=Be,n.CRS=Ne,n.Canvas=RB,n.Circle=uN,n.CircleMarker=xx,n.Class=q,n.Control=$o,n.DivIcon=PB,n.DivOverlay=dl,n.DomEvent=dhe,n.DomUtil=ne,n.Draggable=lc,n.Evented=te,n.FeatureGroup=au,n.GeoJSON=ou,n.GridLayer=T0,n.Handler=cl,n.Icon=Nm,n.ImageOverlay=Ix,n.LatLng=ge,n.LatLngBounds=pe,n.Layer=To,n.LayerGroup=Tm,n.LineUtil=She,n.Map=dn,n.Marker=wx,n.Mixin=vhe,n.Path=uc,n.Point=V,n.PolyUtil=bhe,n.Polygon=Em,n.Polyline=su,n.Popup=$x,n.PosAnimation=fB,n.Projection=Che,n.Rectangle=FB,n.Renderer=lu,n.SVG=E0,n.SVGOverlay=OB,n.TileLayer=Pm,n.Tooltip=Tx,n.Transformation=it,n.Util=z,n.VideoOverlay=EB,n.bind=s,n.bounds=oe,n.canvas=DB,n.circle=Mhe,n.circleMarker=Phe,n.control=C0,n.divIcon=Vhe,n.extend=i,n.featureGroup=Nhe,n.geoJSON=NB,n.geoJson=Dhe,n.gridLayer=jhe,n.icon=Ehe,n.imageOverlay=Lhe,n.latLng=_e,n.latLngBounds=he,n.layerGroup=The,n.map=phe,n.marker=Ohe,n.point=Y,n.polygon=Rhe,n.polyline=Ahe,n.popup=Bhe,n.rectangle=Ghe,n.setOptions=g,n.stamp=l,n.svg=LB,n.svgOverlay=zhe,n.tileLayer=MB,n.tooltip=Whe,n.transformation=Xe,n.version=r,n.videoOverlay=Fhe;var Khe=window.L;n.noConflict=function(){return window.L=Khe,this},window.L=n})})(Sd,Sd.exports);const H_=Sd.exports;function aB(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function sB(e,t){return t==null?function(r,i){const a=I.exports.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=I.exports.useRef();a.current||(a.current=e(r,i));const s=I.exports.useRef(r),{instance:o}=a.current;return I.exports.useEffect(function(){s.current!==r&&(t(o,r,s.current),s.current=r)},[o,r,i]),a}}function h2t(e,t){I.exports.useEffect(function(){var i;return((i=t.layerContainer)!=null?i:t.map).addLayer(e.instance),function(){var s;(s=t.layerContainer)==null||s.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function kpe(e){return function(n){const r=xpe(),i=e(iB(n,r),r);return vpe(r.map,n.attribution),_pe(i.current,n.eventHandlers),h2t(i.current,r),i}}function f2t(e,t){const n=sB(e,t),r=kpe(n);return u2t(r)}function m2t(e,t){const n=sB(e),r=p2t(n,t);return c2t(r)}function g2t(e,t){const n=sB(e,t),r=kpe(n);return d2t(r)}function y2t(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function v2t({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:s,style:o,whenReady:l,zoom:u,...c},d){const[p]=I.exports.useState({className:i,id:a,style:o}),[h,m]=I.exports.useState(null);I.exports.useImperativeHandle(d,()=>{var v;return(v=h==null?void 0:h.map)!=null?v:null},[h]);const g=I.exports.useCallback(v=>{if(v!==null&&h===null){const b=new Sd.exports.Map(v,c);n!=null&&u!=null?b.setView(n,u):e!=null&&b.fitBounds(e,t),l!=null&&b.whenReady(l),m(o2t(b))}},[]);I.exports.useEffect(()=>()=>{h==null||h.map.remove()},[h]);const y=h?x(wpe,{value:h,children:r}):s!=null?s:null;return x("div",{...p,ref:g,children:y})}const b2t=I.exports.forwardRef(v2t),w2t=f2t(function({position:t,...n},r){const i=new Sd.exports.Marker(t,n);return aB(i,l2t(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),x2t=m2t(function(t,n){const r=new Sd.exports.Popup(t,n.overlayContainer);return aB(r,n)},function(t,n,{position:r},i){I.exports.useEffect(function(){const{instance:s}=t;function o(u){u.popup===s&&(s.update(),i(!0))}function l(u){u.popup===s&&i(!1)}return n.map.on({popupopen:o,popupclose:l}),n.overlayContainer==null?(r!=null&&s.setLatLng(r),s.openOn(n.map)):n.overlayContainer.bindPopup(s),function(){var c;n.map.off({popupopen:o,popupclose:l}),(c=n.overlayContainer)==null||c.unbindPopup(),n.map.removeLayer(s)}},[t,n,i,r])}),_2t=g2t(function({url:t,...n},r){const i=new Sd.exports.TileLayer(t,iB(n,r));return aB(i,r)},function(t,n,r){y2t(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)});const Spe=Nr(e=>({units:[],addUnit:t=>e(n=>({units:[...n.units,t]})),setUnits:t=>e({units:t})}));function k2t(){const{units:e,setUnits:t}=Spe();return I.exports.useEffect(()=>{Ee("getActiveUnits").then(n=>{!n||t(n)})},[]),x(Fe,{children:B(Ce,{justify:"flex-start",spacing:10,h:"100%",w:"49%",children:[x(Bt,{w:"100%",h:40,color:"dark.6",radius:"xs",py:5,px:10,shadow:"xs",children:x(me,{h:"100%",children:x(Te,{fw:650,size:20,children:j.active_units})})}),x(Mn,{h:"100%",scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{spacing:10,children:e&&e.length>0&&e.map((n,r)=>x(Bt,{w:"100%",color:"dark.6",radius:"md",p:25,shadow:"md",children:B(me,{children:[x(xt,{color:"blue",variant:"filled",children:n.callsign}),x(Te,{fw:600,children:n.name})]})},r))})})]})})}function S2t(){const{calls:e}=sD();return B(Ce,{justify:"flex-start",spacing:10,h:"100%",w:"49%",children:[x(Bt,{w:"100%",h:40,color:"dark.6",radius:"xs",py:5,px:10,shadow:"xs",children:x(me,{h:"100%",children:x(Te,{fw:650,size:20,children:j.calls})})}),x(Mn,{h:500,scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{spacing:10,children:e&&e.length>0&&e.map((t,n)=>x(Bt,{w:"100%",color:"dark.6",radius:"md",p:10,shadow:"md",children:B(Ce,{spacing:0,h:"100%",children:[B(me,{spacing:5,children:[x(xt,{color:"blue",variant:"filled",children:(t==null?void 0:t.id)||"-1"}),t.callsign&&x(xt,{color:"blue",variant:"filled",children:t.callsign}),x(Te,{fw:650,children:t.title})]}),t.location&&B(me,{spacing:5,children:[x(SRe,{size:16}),x(Te,{fw:600,size:14,children:t.location})]}),t.gender&&B(me,{spacing:5,children:[x(cRe,{size:16}),x(Te,{fw:600,size:14,children:t.gender})]}),t.vehicle&&B(me,{spacing:5,children:[x(LQ,{size:16}),B(Te,{fw:600,size:14,children:[t.vehicle.color," ",t.vehicle.model," [",t.vehicle.plate,"]"]})]}),t.weapon&&B(me,{spacing:5,children:[x(MRe,{size:16}),x(Te,{fw:600,size:14,children:t.weapon})]}),x(Ce,{justify:"flex-end",h:"100%",children:x(Te,{fw:500,size:13,color:"gray.5",children:rB(t.timestamp,{addSuffix:!0,includeSeconds:!0})})})]})},n))})})]})}var lr="-ms-",Vb="-moz-",Nn="-webkit-",Cpe="comm",ZT="rule",oB="decl",C2t="@import",Ipe="@keyframes",I2t="@layer",$pe=Math.abs,lB=String.fromCharCode,aA=Object.assign;function $2t(e,t){return $i(e,0)^45?(((t<<2^$i(e,0))<<2^$i(e,1))<<2^$i(e,2))<<2^$i(e,3):0}function Tpe(e){return e.trim()}function hu(e,t){return(e=t.exec(e))?e[0]:e}function Yt(e,t,n){return e.replace(t,n)}function Pk(e,t,n){return e.indexOf(t,n)}function $i(e,t){return e.charCodeAt(t)|0}function Iy(e,t,n){return e.slice(t,n)}function Il(e){return e.length}function Npe(e){return e.length}function xb(e,t){return t.push(e),e}function T2t(e,t){return e.map(t).join("")}function qG(e,t){return e.filter(function(n){return!hu(n,t)})}var XT=1,$y=1,Epe=0,go=0,Xr=0,m0="";function JT(e,t,n,r,i,a,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:XT,column:$y,length:s,return:"",siblings:o}}function xc(e,t){return aA(JT("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Zm(e){for(;e.root;)e=xc(e.root,{children:[e]});xb(e,e.siblings)}function N2t(){return Xr}function E2t(){return Xr=go>0?$i(m0,--go):0,$y--,Xr===10&&($y=1,XT--),Xr}function Go(){return Xr=go<Epe?$i(m0,go++):0,$y++,Xr===10&&($y=1,XT++),Xr}function Kp(){return $i(m0,go)}function Mk(){return go}function YT(e,t){return Iy(m0,e,t)}function sA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O2t(e){return XT=$y=1,Epe=Il(m0=e),go=0,[]}function P2t(e){return m0="",e}function lO(e){return Tpe(YT(go-1,oA(e===91?e+2:e===40?e+1:e)))}function M2t(e){for(;(Xr=Kp())&&Xr<33;)Go();return sA(e)>2||sA(Xr)>3?"":" "}function A2t(e,t){for(;--t&&Go()&&!(Xr<48||Xr>102||Xr>57&&Xr<65||Xr>70&&Xr<97););return YT(e,Mk()+(t<6&&Kp()==32&&Go()==32))}function oA(e){for(;Go();)switch(Xr){case e:return go;case 34:case 39:e!==34&&e!==39&&oA(Xr);break;case 40:e===41&&oA(e);break;case 92:Go();break}return go}function R2t(e,t){for(;Go()&&e+Xr!==47+10;)if(e+Xr===42+42&&Kp()===47)break;return"/*"+YT(t,go-1)+"*"+lB(e===47?e:Go())}function D2t(e){for(;!sA(Kp());)Go();return YT(e,go)}function L2t(e){return P2t(Ak("",null,null,null,[""],e=O2t(e),0,[0],e))}function Ak(e,t,n,r,i,a,s,o,l){for(var u=0,c=0,d=s,p=0,h=0,m=0,g=1,y=1,v=1,b=0,_="",k=i,S=a,$=r,N=_;y;)switch(m=b,b=Go()){case 40:if(m!=108&&$i(N,d-1)==58){Pk(N+=Yt(lO(b),"&","&\f"),"&\f",$pe(u?o[u-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:N+=lO(b);break;case 9:case 10:case 13:case 32:N+=M2t(m);break;case 92:N+=A2t(Mk()-1,7);continue;case 47:switch(Kp()){case 42:case 47:xb(F2t(R2t(Go(),Mk()),t,n,l),l);break;default:N+="/"}break;case 123*g:o[u++]=Il(N)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+c:v==-1&&(N=Yt(N,/\f/g,"")),h>0&&Il(N)-d&&xb(h>32?ZG(N+";",r,n,d-1,l):ZG(Yt(N," ","")+";",r,n,d-2,l),l);break;case 59:N+=";";default:if(xb($=KG(N,t,n,u,c,i,o,_,k=[],S=[],d,a),a),b===123)if(c===0)Ak(N,t,$,$,k,a,d,o,S);else switch(p===99&&$i(N,3)===110?100:p){case 100:case 108:case 109:case 115:Ak(e,$,$,r&&xb(KG(e,$,$,0,0,i,o,_,i,k=[],d,S),S),i,S,d,o,r?k:S);break;default:Ak(N,$,$,$,[""],S,0,o,S)}}u=c=h=0,g=v=1,_=N="",d=s;break;case 58:d=1+Il(N),h=m;default:if(g<1){if(b==123)--g;else if(b==125&&g++==0&&E2t()==125)continue}switch(N+=lB(b),b*g){case 38:v=c>0?1:(N+="\f",-1);break;case 44:o[u++]=(Il(N)-1)*v,v=1;break;case 64:Kp()===45&&(N+=lO(Go())),p=Kp(),c=d=Il(_=N+=D2t(Mk())),b++;break;case 45:m===45&&Il(N)==2&&(g=0)}}return a}function KG(e,t,n,r,i,a,s,o,l,u,c,d){for(var p=i-1,h=i===0?a:[""],m=Npe(h),g=0,y=0,v=0;g<r;++g)for(var b=0,_=Iy(e,p+1,p=$pe(y=s[g])),k=e;b<m;++b)(k=Tpe(y>0?h[b]+" "+_:Yt(_,/&\f/g,h[b])))&&(l[v++]=k);return JT(e,t,n,i===0?ZT:o,l,u,c,d)}function F2t(e,t,n,r){return JT(e,t,n,Cpe,lB(N2t()),Iy(e,2,-2),0,r)}function ZG(e,t,n,r,i){return JT(e,t,n,oB,Iy(e,0,r),Iy(e,r+1,-1),r,i)}function Ope(e,t,n){switch($2t(e,t)){case 5103:return Nn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nn+e+e;case 4789:return Vb+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Nn+e+Vb+e+lr+e+e;case 5936:switch($i(e,t+11)){case 114:return Nn+e+lr+Yt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Nn+e+lr+Yt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Nn+e+lr+Yt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Nn+e+lr+e+e;case 6165:return Nn+e+lr+"flex-"+e+e;case 5187:return Nn+e+Yt(e,/(\w+).+(:[^]+)/,Nn+"box-$1$2"+lr+"flex-$1$2")+e;case 5443:return Nn+e+lr+"flex-item-"+Yt(e,/flex-|-self/g,"")+(hu(e,/flex-|baseline/)?"":lr+"grid-row-"+Yt(e,/flex-|-self/g,""))+e;case 4675:return Nn+e+lr+"flex-line-pack"+Yt(e,/align-content|flex-|-self/g,"")+e;case 5548:return Nn+e+lr+Yt(e,"shrink","negative")+e;case 5292:return Nn+e+lr+Yt(e,"basis","preferred-size")+e;case 6060:return Nn+"box-"+Yt(e,"-grow","")+Nn+e+lr+Yt(e,"grow","positive")+e;case 4554:return Nn+Yt(e,/([^-])(transform)/g,"$1"+Nn+"$2")+e;case 6187:return Yt(Yt(Yt(e,/(zoom-|grab)/,Nn+"$1"),/(image-set)/,Nn+"$1"),e,"")+e;case 5495:case 3959:return Yt(e,/(image-set\([^]*)/,Nn+"$1$`$1");case 4968:return Yt(Yt(e,/(.+:)(flex-)?(.*)/,Nn+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nn+e+e;case 4200:if(!hu(e,/flex-|baseline/))return lr+"grid-column-align"+Iy(e,t)+e;break;case 2592:case 3360:return lr+Yt(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,i){return t=i,hu(r.props,/grid-\w+-end/)})?~Pk(e+(n=n[t].value),"span",0)?e:lr+Yt(e,"-start","")+e+lr+"grid-row-span:"+(~Pk(n,"span",0)?hu(n,/\d+/):+hu(n,/\d+/)-+hu(e,/\d+/))+";":lr+Yt(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return hu(r.props,/grid-\w+-start/)})?e:lr+Yt(Yt(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return Yt(e,/(.+)-inline(.+)/,Nn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Il(e)-1-t>6)switch($i(e,t+1)){case 109:if($i(e,t+4)!==45)break;case 102:return Yt(e,/(.+:)(.+)-([^]+)/,"$1"+Nn+"$2-$3$1"+Vb+($i(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Pk(e,"stretch",0)?Ope(Yt(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return Yt(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,a,s,o,l,u){return lr+i+":"+a+u+(s?lr+i+"-span:"+(o?l:+l-+a)+u:"")+e});case 4949:if($i(e,t+6)===121)return Yt(e,":",":"+Nn)+e;break;case 6444:switch($i(e,$i(e,14)===45?18:11)){case 120:return Yt(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Nn+($i(e,14)===45?"inline-":"")+"box$3$1"+Nn+"$2$3$1"+lr+"$2box$3")+e;case 100:return Yt(e,":",":"+lr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Yt(e,"scroll-","scroll-snap-")+e}return e}function c2(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function z2t(e,t,n,r){switch(e.type){case I2t:if(e.children.length)break;case C2t:case oB:return e.return=e.return||e.value;case Cpe:return"";case Ipe:return e.return=e.value+"{"+c2(e.children,r)+"}";case ZT:if(!Il(e.value=e.props.join(",")))return""}return Il(n=c2(e.children,r))?e.return=e.value+"{"+n+"}":""}function B2t(e){var t=Npe(e);return function(n,r,i,a){for(var s="",o=0;o<t;o++)s+=e[o](n,r,i,a)||"";return s}}function W2t(e){return function(t){t.root||(t=t.return)&&e(t)}}function V2t(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case oB:e.return=Ope(e.value,e.length,n);return;case Ipe:return c2([xc(e,{value:Yt(e.value,"@","@"+Nn)})],r);case ZT:if(e.length)return T2t(n=e.props,function(i){switch(hu(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Zm(xc(e,{props:[Yt(i,/:(read-\w+)/,":"+Vb+"$1")]})),Zm(xc(e,{props:[i]})),aA(e,{props:qG(n,r)});break;case"::placeholder":Zm(xc(e,{props:[Yt(i,/:(plac\w+)/,":"+Nn+"input-$1")]})),Zm(xc(e,{props:[Yt(i,/:(plac\w+)/,":"+Vb+"$1")]})),Zm(xc(e,{props:[Yt(i,/:(plac\w+)/,lr+"input-$1")]})),Zm(xc(e,{props:[i]})),aA(e,{props:qG(n,r)});break}return""})}}var Ty=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Ppe="active",Mpe="data-styled-version",QT="6.1.11",uB=`/*!sc*/
`,cB=typeof window<"u"&&"HTMLElement"in window,j2t=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1),eN=Object.freeze([]),Ny=Object.freeze({});function H2t(e,t,n){return n===void 0&&(n=Ny),e.theme!==n.theme&&e.theme||t||n.theme}var Ape=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),U2t=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,G2t=/(^-|-$)/g;function XG(e){return e.replace(U2t,"-").replace(G2t,"")}var q2t=/(a)(d)/gi,U_=52,JG=function(e){return String.fromCharCode(e+(e>25?39:97))};function lA(e){var t,n="";for(t=Math.abs(e);t>U_;t=t/U_|0)n=JG(t%U_)+n;return(JG(t%U_)+n).replace(q2t,"$1-$2")}var uO,Rpe=5381,bg=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Dpe=function(e){return bg(Rpe,e)};function K2t(e){return lA(Dpe(e)>>>0)}function Z2t(e){return e.displayName||e.name||"Component"}function cO(e){return typeof e=="string"&&!0}var Lpe=typeof Symbol=="function"&&Symbol.for,Fpe=Lpe?Symbol.for("react.memo"):60115,X2t=Lpe?Symbol.for("react.forward_ref"):60112,J2t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Y2t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zpe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Q2t=((uO={})[X2t]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uO[Fpe]=zpe,uO);function YG(e){return("type"in(t=e)&&t.type.$$typeof)===Fpe?zpe:"$$typeof"in e?Q2t[e.$$typeof]:J2t;var t}var e$t=Object.defineProperty,t$t=Object.getOwnPropertyNames,QG=Object.getOwnPropertySymbols,n$t=Object.getOwnPropertyDescriptor,r$t=Object.getPrototypeOf,e7=Object.prototype;function Bpe(e,t,n){if(typeof t!="string"){if(e7){var r=r$t(t);r&&r!==e7&&Bpe(e,r,n)}var i=t$t(t);QG&&(i=i.concat(QG(t)));for(var a=YG(e),s=YG(t),o=0;o<i.length;++o){var l=i[o];if(!(l in Y2t||n&&n[l]||s&&l in s||a&&l in a)){var u=n$t(t,l);try{e$t(e,l,u)}catch{}}}}return e}function Ey(e){return typeof e=="function"}function dB(e){return typeof e=="object"&&"styledComponentId"in e}function Mp(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function t7(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function z1(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function uA(e,t,n){if(n===void 0&&(n=!1),!n&&!z1(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=uA(e[r],t[r]);else if(z1(t))for(var r in t)e[r]=uA(e[r],t[r]);return e}function pB(e,t){Object.defineProperty(e,"toString",{value:t})}function gx(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var i$t=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,a=i;t>=a;)if((a<<=1)<0)throw gx(16,"".concat(t));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var s=i;s<a;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(t+1),l=(s=0,n.length);s<l;s++)this.tag.insertRule(o,n[s])&&(this.groupSizes[t]++,o++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n;this.groupSizes[t]=0;for(var a=r;a<i;a++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],i=this.indexOfGroup(t),a=i+r,s=i;s<a;s++)n+="".concat(this.tag.getRule(s)).concat(uB);return n},e}(),Rk=new Map,d2=new Map,Dk=1,G_=function(e){if(Rk.has(e))return Rk.get(e);for(;d2.has(Dk);)Dk++;var t=Dk++;return Rk.set(e,t),d2.set(t,e),t},a$t=function(e,t){Dk=t+1,Rk.set(e,t),d2.set(t,e)},s$t="style[".concat(Ty,"][").concat(Mpe,'="').concat(QT,'"]'),o$t=new RegExp("^".concat(Ty,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),l$t=function(e,t,n){for(var r,i=n.split(","),a=0,s=i.length;a<s;a++)(r=i[a])&&e.registerName(t,r)},u$t=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(uB),i=[],a=0,s=r.length;a<s;a++){var o=r[a].trim();if(o){var l=o.match(o$t);if(l){var u=0|parseInt(l[1],10),c=l[2];u!==0&&(a$t(c,u),l$t(e,c,l[3]),e.getTag().insertRules(u,i)),i.length=0}else i.push(o)}}};function c$t(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Wpe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(o){var l=Array.from(o.querySelectorAll("style[".concat(Ty,"]")));return l[l.length-1]}(n),a=i!==void 0?i.nextSibling:null;r.setAttribute(Ty,Ppe),r.setAttribute(Mpe,QT);var s=c$t();return s&&r.setAttribute("nonce",s),n.insertBefore(r,a),r},d$t=function(){function e(t){this.element=Wpe(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,a=r.length;i<a;i++){var s=r[i];if(s.ownerNode===n)return s}throw gx(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),p$t=function(){function e(t){this.element=Wpe(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),h$t=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),n7=cB,f$t={isServer:!cB,useCSSOMInjection:!j2t},Vpe=function(){function e(t,n,r){t===void 0&&(t=Ny),n===void 0&&(n={});var i=this;this.options=Mr(Mr({},f$t),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&cB&&n7&&(n7=!1,function(a){for(var s=document.querySelectorAll(s$t),o=0,l=s.length;o<l;o++){var u=s[o];u&&u.getAttribute(Ty)!==Ppe&&(u$t(a,u),u.parentNode&&u.parentNode.removeChild(u))}}(this)),pB(this,function(){return function(a){for(var s=a.getTag(),o=s.length,l="",u=function(d){var p=function(v){return d2.get(v)}(d);if(p===void 0)return"continue";var h=a.names.get(p),m=s.getGroup(d);if(h===void 0||m.length===0)return"continue";var g="".concat(Ty,".g").concat(d,'[id="').concat(p,'"]'),y="";h!==void 0&&h.forEach(function(v){v.length>0&&(y+="".concat(v,","))}),l+="".concat(m).concat(g,'{content:"').concat(y,'"}').concat(uB)},c=0;c<o;c++)u(c);return l}(i)})}return e.registerId=function(t){return G_(t)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(Mr(Mr({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new h$t(i):r?new d$t(i):new p$t(i)}(this.options),new i$t(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(G_(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(G_(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(G_(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),m$t=/&/g,g$t=/^\s*\/\/.*$/gm;function jpe(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=jpe(n.children,t)),n})}function y$t(e){var t,n,r,i=e===void 0?Ny:e,a=i.options,s=a===void 0?Ny:a,o=i.plugins,l=o===void 0?eN:o,u=function(p,h,m){return m.startsWith(n)&&m.endsWith(n)&&m.replaceAll(n,"").length>0?".".concat(t):p},c=l.slice();c.push(function(p){p.type===ZT&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(m$t,n).replace(r,u))}),s.prefix&&c.push(V2t),c.push(z2t);var d=function(p,h,m,g){h===void 0&&(h=""),m===void 0&&(m=""),g===void 0&&(g="&"),t=g,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var y=p.replace(g$t,""),v=L2t(m||h?"".concat(m," ").concat(h," { ").concat(y," }"):y);s.namespace&&(v=jpe(v,s.namespace));var b=[];return c2(v,B2t(c.concat(W2t(function(_){return b.push(_)})))),b};return d.hash=l.length?l.reduce(function(p,h){return h.name||gx(15),bg(p,h.name)},Rpe).toString():"",d}var v$t=new Vpe,cA=y$t(),Hpe=kr.createContext({shouldForwardProp:void 0,styleSheet:v$t,stylis:cA});Hpe.Consumer;kr.createContext(void 0);function r7(){return I.exports.useContext(Hpe)}var b$t=function(){function e(t,n){var r=this;this.inject=function(i,a){a===void 0&&(a=cA);var s=r.name+a.hash;i.hasNameForId(r.id,s)||i.insertRules(r.id,s,a(r.rules,s,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,pB(this,function(){throw gx(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=cA),this.name+t.hash},e}(),w$t=function(e){return e>="A"&&e<="Z"};function i7(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;w$t(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Upe=function(e){return e==null||e===!1||e===""},Gpe=function(e){var t,n,r=[];for(var i in e){var a=e[i];e.hasOwnProperty(i)&&!Upe(a)&&(Array.isArray(a)&&a.isCss||Ey(a)?r.push("".concat(i7(i),":"),a,";"):z1(a)?r.push.apply(r,s1(s1(["".concat(i," {")],Gpe(a),!1),["}"],!1)):r.push("".concat(i7(i),": ").concat((t=i,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in tK||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Zp(e,t,n,r){if(Upe(e))return[];if(dB(e))return[".".concat(e.styledComponentId)];if(Ey(e)){if(!Ey(a=e)||a.prototype&&a.prototype.isReactComponent||!t)return[e];var i=e(t);return Zp(i,t,n,r)}var a;return e instanceof b$t?n?(e.inject(n,r),[e.getName(r)]):[e]:z1(e)?Gpe(e):Array.isArray(e)?Array.prototype.concat.apply(eN,e.map(function(s){return Zp(s,t,n,r)})):[e.toString()]}function x$t(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Ey(n)&&!dB(n))return!1}return!0}var _$t=Dpe(QT),k$t=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&x$t(t),this.componentId=n,this.baseHash=bg(_$t,n),this.baseStyle=r,Vpe.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Mp(i,this.staticRulesId);else{var a=t7(Zp(this.rules,t,n,r)),s=lA(bg(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,s)){var o=r(a,".".concat(s),void 0,this.componentId);n.insertRules(this.componentId,s,o)}i=Mp(i,s),this.staticRulesId=s}else{for(var l=bg(this.baseHash,r.hash),u="",c=0;c<this.rules.length;c++){var d=this.rules[c];if(typeof d=="string")u+=d;else if(d){var p=t7(Zp(d,t,n,r));l=bg(l,p+c),u+=p}}if(u){var h=lA(l>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),i=Mp(i,h)}}return i},e}(),qpe=kr.createContext(void 0);qpe.Consumer;var dO={};function S$t(e,t,n){var r=dB(e),i=e,a=!cO(e),s=t.attrs,o=s===void 0?eN:s,l=t.componentId,u=l===void 0?function(k,S){var $=typeof k!="string"?"sc":XG(k);dO[$]=(dO[$]||0)+1;var N="".concat($,"-").concat(K2t(QT+$+dO[$]));return S?"".concat(S,"-").concat(N):N}(t.displayName,t.parentComponentId):l,c=t.displayName,d=c===void 0?function(k){return cO(k)?"styled.".concat(k):"Styled(".concat(Z2t(k),")")}(e):c,p=t.displayName&&t.componentId?"".concat(XG(t.displayName),"-").concat(t.componentId):t.componentId||u,h=r&&i.attrs?i.attrs.concat(o).filter(Boolean):o,m=t.shouldForwardProp;if(r&&i.shouldForwardProp){var g=i.shouldForwardProp;if(t.shouldForwardProp){var y=t.shouldForwardProp;m=function(k,S){return g(k,S)&&y(k,S)}}else m=g}var v=new k$t(n,p,r?i.componentStyle:void 0);function b(k,S){return function($,N,P){var D=$.attrs,O=$.componentStyle,F=$.defaultProps,E=$.foldedComponentIds,z=$.styledComponentId,q=$.target,K=kr.useContext(qpe),Z=r7(),te=$.shouldForwardProp||Z.shouldForwardProp,V=H2t(N,K,F)||Ny,ee=function(ge,_e,Ne){for(var Se,Re=Mr(Mr({},_e),{className:void 0,theme:Ne}),Ke=0;Ke<ge.length;Ke+=1){var it=Ey(Se=ge[Ke])?Se(Re):Se;for(var Xe in it)Re[Xe]=Xe==="className"?Mp(Re[Xe],it[Xe]):Xe==="style"?Mr(Mr({},Re[Xe]),it[Xe]):it[Xe]}return _e.className&&(Re.className=Mp(Re.className,_e.className)),Re}(D,N,V),Y=ee.as||q,Q={};for(var oe in ee)ee[oe]===void 0||oe[0]==="$"||oe==="as"||oe==="theme"&&ee.theme===V||(oe==="forwardedAs"?Q.as=ee.forwardedAs:te&&!te(oe,Y)||(Q[oe]=ee[oe]));var pe=function(ge,_e){var Ne=r7(),Se=ge.generateAndInjectStyles(_e,Ne.styleSheet,Ne.stylis);return Se}(O,ee),he=Mp(E,z);return pe&&(he+=" "+pe),ee.className&&(he+=" "+ee.className),Q[cO(Y)&&!Ape.has(Y)?"class":"className"]=he,Q.ref=P,I.exports.createElement(Y,Q)}(_,k,S)}b.displayName=d;var _=kr.forwardRef(b);return _.attrs=h,_.componentStyle=v,_.displayName=d,_.shouldForwardProp=m,_.foldedComponentIds=r?Mp(i.foldedComponentIds,i.styledComponentId):"",_.styledComponentId=p,_.target=r?i.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=r?function(S){for(var $=[],N=1;N<arguments.length;N++)$[N-1]=arguments[N];for(var P=0,D=$;P<D.length;P++)uA(S,D[P],!0);return S}({},i.defaultProps,k):k}}),pB(_,function(){return".".concat(_.styledComponentId)}),a&&Bpe(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function a7(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var s7=function(e){return Object.assign(e,{isCss:!0})};function C$t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ey(e)||z1(e))return s7(Zp(a7(eN,s1([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?Zp(r):s7(Zp(a7(r,t)))}function dA(e,t,n){if(n===void 0&&(n=Ny),!t)throw gx(1,t);var r=function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return e(t,n,C$t.apply(void 0,s1([i],a,!1)))};return r.attrs=function(i){return dA(e,t,Mr(Mr({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return dA(e,t,Mr(Mr({},n),i))},r}var Kpe=function(e){return dA(S$t,e)},Zpe=Kpe;Ape.forEach(function(e){Zpe[e]=Kpe(e)});const o7=e=>{const[t,n]=e;return[n,t]},I$t=117.3,$$t=172.8,T$t=.02072,N$t=.0205,E$t=-5661,O$t=6692,P$t=-4060,M$t=8430,A$t=H_.extend({},H_.CRS.Simple,{projection:H_.Projection.LonLat,scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/.6931471805599453},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},transformation:new H_.Transformation(T$t,I$t,-N$t,$$t),infinite:!0}),l7=[[P$t,E$t],[M$t,O$t]],R$t=Zpe(b2t)`
  .leaflet-control-attribution {
    display: none !important;
  }
`,D$t=new Sd.exports.Icon({iconUrl:"https://cdn.iconscout.com/icon/free/png-256/free-pin-locate-marker-location-navigation-16-28668.png",iconSize:[24,24],iconAnchor:[13,15],popupAnchor:[0,-25]});function Xpe(){const[e,t]=I.exports.useState([]),[n,r]=I.exports.useState(!1),[i,a]=I.exports.useState(""),[s,o]=I.exports.useState(null),{units:l}=Spe(),{calls:u}=sD(),c=()=>{s&&i.trim()!==""&&(t([...e,{position:s,name:i}]),a(""),r(!1))};return I.exports.useEffect(()=>{if(!l)return;const d=e.filter(h=>!h.isOfficer),p=l&&l.length>0&&l.map(h=>({position:o7(h.coords),name:h.callsign&&h.callsign!=="N/A"?`${h.name} - ${h.callsign}`:h.name,isOfficer:!0}))||[];t([...d,...p])},[l]),I.exports.useEffect(()=>{if(!u)return;const d=e.filter(h=>!h.isCall),p=u&&u.length>0&&u.map(h=>({position:o7(h.coords),name:h.title,isCall:!0}))||[];t([...d,...p])},[u]),B(Fe,{children:[B(me,{w:"100%",style:{alignItems:"start"},children:[B(R$t,{crs:A$t,center:[0,0],minZoom:2,zoom:3,maxZoom:5,maxBounds:l7,maxBoundsViscosity:1,style:{height:"80vh",width:"35vw"},children:[x(_2t,{url:"tiles/{z}/{x}/{y}.png",bounds:l7,noWrap:!0}),e.map((d,p)=>x(w2t,{position:d.position,icon:D$t,children:x(x2t,{children:d.name})},p))]}),B(me,{w:"53%",h:"80vh",spacing:15,style:{alignItems:"start"},children:[x(k2t,{}),x(S2t,{})]})]}),x(nr,{opened:n,onClose:()=>r(!1),title:j.add_marker,centered:!0,children:B(Ce,{spacing:20,children:[x(Ze,{label:j.marker_name,placeholder:j.marker_name,value:i,onChange:d=>a(d.currentTarget.value)}),x(me,{position:"right",children:x(Ct,{onClick:c,children:j.add})})]})})]})}function Jpe({reportId:e}){const{trainingReports:t,updateTrainingReport:n}=ew(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(b=>b.id===e)),{dateFormat:s}=Zt(),[o,l]=I.exports.useState(i==null?void 0:i.title),[u]=Kt(o,500),c=I.exports.useRef(0),[d]=Kt(c.current,2500),p=I.exports.useRef(!1);I.exports.useEffect(()=>{const b=t.find(_=>_.id===e);b&&(a(b),!p.current&&h&&b.content&&(p.current=!0,h.commands.setContent(b.content)))},[t,e]);const h=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),eB,xm,_m.configure({limit:1e5})],content:i==null?void 0:i.content}),m=I.exports.useRef(!1);I.exports.useEffect(()=>{!h||!(i!=null&&i.content)||m.current||(m.current=!0,h.commands.setContent(i.content),i!=null&&i.title&&l(i.title))},[h,i]),I.exports.useEffect(()=>{!i||n(i.id,{...i,title:u})},[u]),I.exports.useEffect(()=>{const b=h==null?void 0:h.getHTML();!i||b===void 0||n(i.id,{...i,content:h==null?void 0:h.getHTML()})},[d]),I.exports.useEffect(()=>{if(h){const b=()=>{c.current++};return h.on("update",b),()=>{h.off("update",b)}}},[h]),I.exports.useEffect(()=>{h&&h.setOptions({editorProps:{handlePaste:(b,_,k)=>{const S=_.clipboardData,$=S==null?void 0:S.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test($||"")&&$?(_.preventDefault(),h.commands.setImage({src:$}),!0):!1}}})},[h]);const g=I.exports.useCallback(()=>{r({title:"trainingReports",component:x(pA,{})})},[i,r]),y=I.exports.useCallback(()=>{const b={...i,title:o,content:h==null?void 0:h.getHTML()};Ee("saveTrainingReport",b).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{title:o,content:h==null?void 0:h.getHTML()}),Ir(j.mdt,j.saved_successfully)})},[i,o,h]),v=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeTrainingReport",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"trainingReports",component:x(pA,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,h:"100%",style:{alignItems:"start"},children:[B(Ce,{w:"59%",h:"100%",spacing:10,children:[x(Bt,{w:"100%",h:80,color:"dark.6",radius:"xs",px:10,shadow:"xs",children:B(Ce,{h:"100%",justify:"center",spacing:5,children:[B(me,{position:"apart",children:[x(Ze,{variant:"filled",value:o,onChange:b=>l(b.currentTarget.value),sx:{input:{fontSize:18,fontWeight:630}},w:"60%"}),B(me,{spacing:10,children:[B(xt,{radius:"sm",children:["ID: ",i.id]}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:y,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:v,children:x(vo,{})})]})]}),B(Te,{fw:550,size:12,color:"gray.6",children:[i.creator," - ",new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})," - ",j.trainee.format(i.trainee)]})]})}),x(Bt,{w:"100%",h:"72%",color:"dark.7",radius:"xs",p:20,shadow:"xs",children:x(km,{editor:h})})]}),x(ll,{page:"trainingReport",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function L$t({searchQuery:e}){const{updateTab:t}=gn(),{trainingReports:n,updateTrainingReport:r}=ew(),{dateFormat:i}=Zt(),a=I.exports.useMemo(()=>n.filter(o=>{var l,u,c;return((l=o==null?void 0:o.creator)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))||((u=o==null?void 0:o.officer)==null?void 0:u.toLowerCase().includes(e.toLowerCase()))||((c=o==null?void 0:o.id)==null?void 0:c.toString())===e}).sort((o,l)=>l.id-o.id),[e,n]),s=({index:o,style:l})=>{const u=a[o];return!u||Object.keys(u).length===0||!(u!=null&&u.title)||!(u!=null&&u.id)||u.id<=-1||!By(u)?null:x("div",{style:{...l},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getTrainingReport",u.id).then(c=>{!c||!u.id||r(u.id,c)}),t({title:"trainingReports",component:x(Jpe,{reportId:u.id})})},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:u.title||j.unknown}),B(xt,{radius:"sm",children:["ID: ",u.id]})]}),B(Te,{fw:500,size:12,color:"gray.5",children:[u.creator," - ",new Date(u.date*1e3).toLocaleString([],i||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})," - ",j.trainee.format(u.trainee)]})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:a.length,itemSize:110,width:"100%",children:s})}function pA(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,{open:i,close:a}]=Tr(!1),[s,o]=I.exports.useState(),{employees:l,minTrainingReportGrade:u,maxTraineeGrade:c}=Qo(),{playerGrade:d,isBoss:p}=Zt(),{updateTab:h}=gn(),m=()=>{i()};return I.exports.useEffect(()=>{!s||s===""||Ee("createTrainingReport",s).then(g=>{!g||h({title:"trainingReports",component:x(Jpe,{reportId:g.id})})})},[s]),B(Fe,{children:[x(_a,{title:j.trainingReports,searchQuery:e,setSearchQuery:t,createNew:d>=u?m:void 0}),p&&x(L$t,{searchQuery:n}),x(nr,{opened:r,onClose:a,title:j.new_training_report,centered:!0,children:x(ty,{allPlayers:l.filter(g=>g.gradeNumber<=c),setTrainee:o})})]})}function F$t({businessName:e}){const{businesses:t,updateBusiness:n}=nD(),{updateTab:r}=gn(),[i,a]=I.exports.useState(t.find(v=>v.name===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image),[d,p]=I.exports.useState(i==null?void 0:i.notes),[h]=Kt(d,1e3);I.exports.useEffect(()=>{a(t.find(v=>v.name===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{d!==(i==null?void 0:i.notes)&&p(i==null?void 0:i.notes)},[i]),I.exports.useEffect(()=>{i&&h&&n(i.name,{notes:h})},[h]);const m=I.exports.useCallback(()=>{r({title:"businesses",component:x(Ype,{})})},[i,r]),g=I.exports.useCallback(()=>{const v={...i,notes:d};Ee("saveBusiness",v).then(()=>{i!=null&&i.name&&n(i==null?void 0:i.name,{notes:d}),Ir(j.mdt,j.saved_successfully)})},[i,d]),y=()=>{l(),Ee("hideUI"),Ee("takePhoto","business")};return wt("photoTaken",v=>{v.page==="business"&&(o(),c(v.url))}),B(Fe,{children:[i&&x(Fe,{children:B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,children:[B(me,{w:"100%",position:"apart",children:[B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,style:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:x(me,{w:"100%",spacing:10,children:x(Ze,{label:j.business_name,readOnly:!0,variant:"filled",value:i.label,size:"xs"})})})]}),x(Ce,{h:160,justify:"flex-start",children:B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:m,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(Gs,{})})]})})]}),x(xs,{w:"100%",label:j.notes,minRows:28,maxLength:5e4,value:d,onChange:v=>p(v.currentTarget.value)})]})}),x(ll,{page:"business",sidebar:i.sideBarData,pageId:i.name,updateData:n})]})}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.label,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,onChange:v=>c(v.currentTarget.value),rightSection:x(Le,{onClick:y,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.name,{image:u}))},children:j.confirm})})]})})]})}function z$t({searchQuery:e}){const{businesses:t,updateBusiness:n}=nD(),{updateTab:r}=gn(),i=I.exports.useMemo(()=>t.filter(s=>{var o,l;return((o=s==null?void 0:s.label)==null?void 0:o.toLowerCase().includes(e.toLowerCase()))||((l=s==null?void 0:s.address)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))}).sort((s,o)=>{var l;return(l=s.label)==null?void 0:l.localeCompare(o.label)}),[e,t]),a=({index:s,style:o})=>{const l=i[s];return x("div",{style:{...o},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getBusiness",l.name).then(u=>{!u||!l.name||n(l.name,u)}),r({title:"businesses",component:x(F$t,{businessName:l.name})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:l.image}),x(Ce,{spacing:1,children:x(Te,{fw:600,size:16,children:l.label})})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:i.length,itemSize:110,width:"100%",children:a})}function Ype(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200);return B(Fe,{children:[x(_a,{title:j.businesses,searchQuery:e,setSearchQuery:t}),x(z$t,{searchQuery:n})]})}function B$t({identifier:e,currentCallsign:t}){const[n,r]=I.exports.useState(t);return B(Ce,{spacing:20,children:[x(Ze,{label:j.callsign,placeholder:j.callsign,value:n,onChange:i=>r(i.currentTarget.value)}),x(me,{position:"right",children:x(Ct,{onClick:()=>{Tn.closeAll(),Ee("updateEmployeeCallsign",{identifier:e,callsign:n,page:"police"})},children:j.confirm})})]})}function W$t({identifier:e,currentNotes:t}){const[n,r]=I.exports.useState(t);return B(Ce,{spacing:20,children:[x(xs,{label:j.notes,placeholder:j.notes,rows:4,value:n,onChange:i=>r(i.currentTarget.value)}),x(me,{position:"right",children:x(Ct,{onClick:()=>{Tn.closeAll(),Ee("updateEmployeeNotes",{identifier:e,notes:n,page:"police"})},children:j.confirm})})]})}function V$t({identifier:e,currentImage:t}){const[n,r]=I.exports.useState(t),i=()=>{Tn.closeAll(),Ee("hideUI"),Ee("takePhoto","employee")};return B(Ce,{spacing:20,children:[x(Ze,{label:j.image_url,placeholder:j.url,value:n,onChange:a=>r(a.currentTarget.value),rightSection:x(Le,{onClick:i,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{Tn.closeAll(),Ee("updateEmployeeImage",{identifier:e,image:n,page:"police"})},children:j.confirm})})]})}function j$t({searchQuery:e,setSearchQuery:t}){return x(Bt,{w:"100%",color:"dark.6",radius:"xs",py:5,px:10,shadow:"xs",mb:10,children:B(me,{position:"apart",h:"100%",children:[x(Te,{fw:650,size:24,children:j.employees}),x(Ze,{placeholder:j.search,rightSection:x(a$,{}),w:400,value:e,onChange:n=>t(n.currentTarget.value)})]})})}function Qpe(){const{identifier:e,isBoss:t,lastEmployeeIdentifier:n,setLastEmployeeIdentifier:r}=Zt(),{employees:i,licenses:a}=Qo(),[s,o]=I.exports.useState(""),[l]=Kt(s,200),[u,c]=I.exports.useState({key:"name",direction:"ascending"}),{status:d}=Qo(),p=(S,$,N)=>{Ee("updateEmployeeLicenses",{identifier:S,license:$,newValue:N,page:"police"})},h=S=>{let $="ascending";u.key===S&&u.direction==="ascending"&&($="descending"),c({key:S,direction:$})},g=[...i].sort((S,$)=>u.direction==="ascending"?S[u.key]>$[u.key]?1:-1:u.direction==="descending"?S[u.key]<$[u.key]?1:-1:0).filter(S=>S.name.toLowerCase().includes(l.toLowerCase())),y=(S,$)=>x("th",{onClick:()=>h($),style:{cursor:"pointer",width:"150px"},children:B(me,{spacing:5,children:[S,u.key===$&&(u.direction==="ascending"?x(nRe,{}):x(tRe,{}))]})}),v=(S,$)=>{Ee("updateEmployeeStatus",{identifier:S,status:$})},b=(S,$)=>{Tn.open({centered:!0,title:j.edit_callsign,children:x(B$t,{identifier:S,currentCallsign:$})})},_=(S,$)=>{Tn.open({centered:!0,title:j.edit_notes,children:x(W$t,{identifier:S,currentNotes:$})})},k=(S,$)=>{r(S),Tn.open({centered:!0,title:j.edit_image,children:x(V$t,{identifier:S,currentImage:$})})};return wt("photoTaken",S=>{!n||S.page==="employee"&&k(n,S.url)}),B(Fe,{children:[x(j$t,{searchQuery:s,setSearchQuery:o}),x(Mn,{px:10,h:"76vh",children:B(cQ,{children:[x("thead",{children:B("tr",{children:[x("th",{children:j.image}),y(j.player_name,"name"),y(j.callsign,"callsign"),y(j.phone,"phoneNumber"),y(j.grade,"grade"),y(j.grade_number,"gradeNumber"),y(j.status,"status"),a&&a.map((S,$)=>x("th",{children:S},$)),x("th",{children:j.notes})]})}),x("tbody",{children:g.map(S=>{const $=t;return B("tr",{children:[x("td",{width:70,children:x(is,{p:5,label:x("img",{src:S.image,width:150}),position:"top",color:"dark.6",hidden:!ny(S.image),withArrow:!0,withinPortal:!0,children:x(Yn,{src:S.image,onClick:()=>{$&&k(S.identifier,S.image)},sx:{cursor:$?"pointer":"default"}})})}),x("td",{width:200,children:S.name}),x("td",{width:80,children:x(Te,{style:{cursor:$?"pointer":"default"},onClick:()=>{$&&b(S.identifier,S.callsign)},children:S.callsign||"-"})}),x("td",{width:80,children:S.phoneNumber}),x("td",{width:100,children:S.grade}),x("td",{width:250,children:S.gradeNumber}),x("td",{width:200,children:x(YR,{variant:"filled",value:S.status,data:d,onChange:N=>v(S.identifier,N||""),withinPortal:!0,disabled:!$})}),a&&a.map((N,P)=>x("td",{width:120,children:x(Qg,{checked:(S==null?void 0:S.licenses)&&S.licenses[N],onChange:()=>p(S.identifier,N,!((S==null?void 0:S.licenses)&&S.licenses[N])),disabled:!$})},P)),x("td",{width:400,children:x(Te,{style:{cursor:$?"pointer":"default"},onClick:()=>{$&&_(S.identifier,S.notes)},children:S.notes||"-"})})]},S.identifier)})})]})})]})}const ehe=Nr(e=>({laws:[],addLaw:t=>e(n=>({laws:[...n.laws,t]})),updateLaw:(t,n)=>e(r=>({laws:r.laws.map(a=>{if(a.id===t){let s=!1,o={...a};if(n.sideBarData){const l={...a.sideBarData,...n.sideBarData};JSON.stringify(l)!==JSON.stringify(a.sideBarData)&&(o.sideBarData=l,s=!0)}for(const l in n)l!=="sideBarData"&&a[l]!==n[l]&&(o[l]=n[l],s=!0);return s?o:a}return a})})),setLaws:t=>e({laws:t}),removeLaw:t=>e(n=>({laws:n.laws.filter(r=>r.id!==t)}))}));function H$t({isCitizen:e,opened:t,law:n,close:r}){if(!n)return null;const[i,a]=I.exports.useState(n.name),{isBoss:s}=Zt(),o=!e&&s;I.exports.useEffect(()=>{a(n.name)},[n]);const l=fm({extensions:[gm,ym,bm,wm,mm,vm.configure({types:["heading","paragraph"]}),xm,_m.configure({limit:1e5})],editable:o});I.exports.useEffect(()=>{Ee("getLaw",n.id).then(d=>{l==null||l.commands.setContent(d.description)})},[l,n.id]);const u=()=>{!i||!(l!=null&&l.getHTML())||(Ee("updateLaw",{id:n.id,name:i,description:l==null?void 0:l.getHTML()}),r())},c=()=>{r(),Ee("removeLaw",n.id).then(()=>{Ir(j.mdt,j.removed_successfully)})};return x(nr,{size:"51%",centered:!0,title:j.law.format(n.id),opened:t,onClose:r,children:B(Ce,{spacing:10,children:[x(Ze,{label:j.law_name,placeholder:j.law_name,value:i,onChange:d=>a(d.currentTarget.value),readOnly:!o,rightSection:o&&x(Le,{onClick:c,children:x(vo,{})})}),B(Ce,{spacing:2,children:[x(Te,{fw:650,size:14,children:j.description}),o&&x(km,{editor:l})||x(Bt,{fz:"sm",h:"64vh",bg:"dark.6",radius:"xs",withBorder:!0,style:{whiteSpace:"pre-wrap",overflow:"auto",userSelect:"text",wordWrap:"break-word"},children:x(st,{editor:l,sx:{border:0},w:"44vw",children:x(st.Content,{bg:"none",style:{height:"64vh",overflow:"auto"}})})})]}),o&&x(me,{position:"right",children:x(Ct,{onClick:u,children:j.save})})]})})}function U$t({isCitizen:e,searchQuery:t}){const{laws:n}=ehe(),[r,{open:i,close:a}]=Tr(!1),[s,o]=I.exports.useState(null),{dateFormat:l}=Zt(),u=I.exports.useMemo(()=>n.filter(d=>{var p,h;return((p=d==null?void 0:d.name)==null?void 0:p.toLowerCase().includes(t.toLowerCase()))||((h=d==null?void 0:d.id)==null?void 0:h.toString())===t}).sort((d,p)=>p.id-d.id),[n,t]),c=({index:d,style:p})=>{const h=u[d];return x("div",{style:{...p},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{o(h),i()},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:h.name}),B(xt,{radius:"sm",children:["ID: ",h.id]})]}),x(Te,{fw:500,size:12,color:"gray.5",children:new Date(h.date*1e3).toLocaleString([],l||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})})})};return B(Fe,{children:[x(na,{height:window.innerHeight*.77,itemCount:u.length,itemSize:110,width:"100%",children:c}),x(H$t,{isCitizen:e,opened:r,law:s,close:a})]})}function G$t({opened:e,close:t}){const[n,r]=I.exports.useState(),i=()=>{!n||!(a!=null&&a.getHTML())||(Ee("createLaw",{name:n,description:a==null?void 0:a.getHTML()}),t())},a=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),xm,_m.configure({limit:1e5})],content:""});return I.exports.useEffect(()=>{r(void 0),a==null||a.commands.setContent("")},[e]),I.exports.useEffect(()=>{a&&a.setOptions({editorProps:{handlePaste:(s,o,l)=>{const u=o.clipboardData,c=u==null?void 0:u.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test(c||"")&&c?(o.preventDefault(),a.commands.setImage({src:c}),!0):!1}}})},[a]),x(nr,{size:"51%",centered:!0,title:j.create_law,opened:e,onClose:t,children:B(Ce,{spacing:10,children:[x(Ze,{label:j.law_name,placeholder:j.law_name,value:n,onChange:s=>r(s.currentTarget.value)}),B(Ce,{spacing:2,children:[x(Te,{fw:650,size:14,children:j.description}),x(km,{editor:a})]}),x(me,{position:"right",children:x(Ct,{onClick:i,children:j.confirm})})]})})}function the({isCitizen:e}){const[t,n]=I.exports.useState(""),[r]=Kt(t,200),[i,{open:a,close:s}]=Tr(!1),o=()=>{a()};return B(Fe,{children:[x(_a,{title:j.legislation,searchQuery:t,setSearchQuery:n,createNew:e?void 0:o}),x(U$t,{isCitizen:e,searchQuery:r}),x(G$t,{opened:i,close:s})]})}function q$t(){const{tabs:e,activeTab:t,initialTab:n,updateTab:r,setTabs:i,setInitialTab:a,setActiveTab:s}=gn(),{policePages:o}=Zt(),l=[{name:"home",icon:x(CP,{}),component:x(a2t,{})},{name:"profiles",icon:x(oD,{}),component:x(mce,{})},{name:"vehicles",icon:x(LQ,{}),component:x(iee,{})},{name:"properties",icon:x(CP,{}),component:x(gce,{})},{name:"businesses",icon:x(QAe,{}),component:x(Ype,{})},{name:"incidents",icon:x(GAe,{}),component:x(TP,{})},{name:"reports",icon:x(VQ,{}),component:x(LM,{})},{name:"trainingReports",icon:x(HQ,{}),component:x(pA,{})},{name:"policeReports",icon:x(CRe,{}),component:x(rA,{})},{name:"evidence",icon:x(DRe,{}),component:x(DM,{})},{name:"weapons",icon:x(IRe,{}),component:x(iA,{})},{name:"map",icon:x(WQ,{}),component:x(Xpe,{})},{name:"charges",icon:x(eI,{}),component:x(pD,{})},{name:"legislation",icon:x(BQ,{}),component:x(the,{})},{name:"employees",icon:x(UQ,{}),component:x(Qpe,{})}];I.exports.useEffect(()=>{var h;if(n)return;const c=(h=l.find(m=>m.name===o[0]))==null?void 0:h.component,d=Du(),p={id:d,title:o[0],component:c};a(p),i([p]),s(d)},[o]);const u=c=>{r({title:c.name,component:c.component})};return B(Fe,{children:[x(Mn,{w:220,h:"84vh",bg:"dark.7",px:10,py:10,scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{h:"100%",spacing:5,align:"flex-start",children:l.map((c,d)=>{var m;if(!o.includes(c.name))return;const h=((m=e.find(g=>g.id===t))==null?void 0:m.title)===c.name;return x(Ct,{leftIcon:c.icon,color:"gray",variant:h?"light":"subtle",w:"100%",h:40,px:10,styles:{inner:{justifyContent:"start"}},onClick:()=>u(c),children:j[c.name]},d)})})}),x(Fs,{orientation:"vertical",color:"dark.6"})]})}function K$t(){const{tabs:e,activeTab:t,setActiveTab:n,removeTab:r,addTab:i}=gn(),{employees:a}=Qo(),{identifier:s,dateFormat:o,images:l}=Zt(),[u,c]=I.exports.useState(j.officer),[d,p]=I.exports.useState();I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);c((b==null?void 0:b.name)||j.officer),p(b==null?void 0:b.image)},[]),I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);p(b==null?void 0:b.image)},[a]);var[h,m]=I.exports.useState(new Date);I.exports.useEffect(()=>{const b=setInterval(()=>{m(new Date)},6e4);return()=>clearInterval(b)},[]);const g=I.exports.useRef(null),y=I.exports.useRef({}),v=b=>{g.current&&(g.current.scrollLeft-=.2*b.deltaY)};return B(Fe,{children:[x(vt,{h:70,bg:"dark.7",pr:20,pl:0,children:B(me,{h:"100%",position:"apart",children:[B(me,{w:"70%",spacing:0,children:[x(me,{w:"18.5%",position:l&&l.police&&"center"||"left",children:l&&l.police?x(ws,{src:l.police,width:95,height:60,fit:"contain"}):x(t$,{order:1,pl:20,children:j.police})}),x(bi,{value:t,onTabChange:n,mt:28,defaultValue:"gallery",children:B(me,{w:"100%",spacing:10,children:[x(Mn,{maw:900,type:"never",onWheel:v,viewportRef:g,children:x(bi.List,{sx:{flexFlow:"row",borderBottom:"0px"},children:e.map(b=>x(bi.Tab,{py:10,value:b.id,ref:_=>y.current[b.id]=_,mb:0,rightSection:x(Le,{color:"blue",className:"remove-icon",variant:"subtle",size:20,onClick:_=>{_.stopPropagation(),r(b.id)},children:x(pi,{size:14})}),children:j[b.title]},b.id))})}),x(Le,{ml:10,onClick:()=>{i(),setTimeout(()=>{const b=e[e.length-1].id;y.current[b]&&y.current[b].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},0)},children:x(zy,{})})]})})]}),B(me,{spacing:10,children:[B(Ce,{align:"flex-end",spacing:0,children:[x(Te,{fw:650,size:20,children:u}),x(Te,{fw:600,size:13,color:"gray.5",children:h.toLocaleString([],o||o||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),x(Yn,{size:40,src:d})]})]})}),x(Fs,{color:"dark.6"})]})}function Z$t(){const{tabs:e,activeTab:t,setActiveTab:n}=gn();return x(bi,{value:t,onTabChange:n,children:e.map(r=>x(bi.Panel,{value:r.id,children:r.component},r.id))})}const _o=tD((e,t)=>({tabs:[],initialTab:null,activeTab:null,setInitialTab:n=>e({initialTab:n}),setTabs:n=>e({tabs:n}),addTab:n=>{if(!t().initialTab&&!n)return;const i=Du();e(a=>{var s;return{tabs:[...a.tabs,{id:i,title:(n==null?void 0:n.title)||((s=a.initialTab)==null?void 0:s.title)||"",component:(n==null?void 0:n.component)||a.initialTab&&a.initialTab.component}],activeTab:i}})},removeTab:n=>{const r=t();if(!!r.initialTab){if(r.tabs.length===1){r.updateTab({title:r.initialTab.title,component:r.initialTab.component});return}e(i=>{const a=i.tabs.filter(o=>o.id!==n),s=i.activeTab===n&&a.length>0?a[0].id:i.activeTab;return{tabs:a,activeTab:s}})}},setActiveTab:n=>e({activeTab:n}),updateTab:n=>{const r=Du();e(i=>({tabs:i.tabs.map(a=>a.id===i.activeTab?{...n,id:r}:a),activeTab:r}))}}));function X$t(){const{messages:e}=iD(),[t,n]=I.exports.useState(""),r=I.exports.useRef(null),{employees:i}=Qo(),a=()=>{t.trim()!==""&&(Ee("addChatMessage",t),n(""))};return I.exports.useEffect(()=>{r.current&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})},[e]),x(Bt,{w:710,h:"100%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.chat}),x(Bt,{h:"72vh",p:20,bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-end",spacing:10,children:[x(Mn,{h:"100%",scrollbarSize:0,viewportRef:r,children:x(Ce,{justify:"flex-end",spacing:15,h:"100%",children:!e||e.length===0&&x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"30vh",children:j.no_messages_yet})||x(Fe,{children:e.map((s,o)=>{const l=i.find(u=>u.identifier===s.from);return B(Ce,{w:"100%",spacing:1,children:[B(me,{spacing:8,sx:{alignItems:"end"},children:[x(Yn,{src:l==null?void 0:l.image,size:28,radius:"md"}),x(Te,{fw:650,size:15,children:l==null?void 0:l.name}),x(Te,{fw:400,size:10,color:"gray.6",children:new Date(s.timestamp*1e3).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),x(Te,{size:13,style:{wordBreak:"break-all"},children:s.message})]},o)})})})}),x(me,{align:"center",w:"100%",children:x(Ze,{w:"100%",placeholder:j.write,value:t,onChange:s=>n(s.target.value),onKeyDown:s=>{s.key==="Enter"&&a()},rightSection:x(Le,{variant:"subtle",color:"blue",onClick:a,children:x(s$,{size:20})})})})]})})]})})}function J$t(){const{announcements:e}=aD(),{isBoss:t,dateFormat:n}=Zt(),[r,i]=I.exports.useState(""),a=I.exports.useRef(null),s=()=>{if(r.trim()!==""){const c=r.replace(/\n/g,"<br>");Ee("createAnnouncement",c),i("")}},o=I.exports.useCallback(c=>{const d=e.find(p=>p.id===c);d&&Ee("toggleAnnouncementPin",{id:c,pinned:!d.pinned,page:"ambulance"})},[e]),l=I.exports.useCallback(c=>{Ee("removeAnnouncement",{id:c,page:"ambulance"})},[]),u=[...e].sort((c,d)=>c.pinned&&!d.pinned?-1:!c.pinned&&d.pinned?1:new Date(d.date).getTime()-new Date(c.date).getTime());return x(Bt,{w:710,h:"100%",shadow:"sm",p:"sm",children:B(Ce,{p:20,pt:0,h:"100%",children:[x(Te,{fw:700,size:20,align:"center",children:j.announcements}),x(Bt,{h:"72vh",p:20,bg:"dark.8",withBorder:!0,children:B(Ce,{h:"100%",justify:"flex-end",spacing:10,children:[x(Mn,{h:"100%",scrollbarSize:0,viewportRef:a,children:x(Ce,{justify:"flex-end",spacing:15,h:"100%",children:!u||u.length===0?x(Te,{fw:450,size:14,align:"center",color:"gray.6",mt:"30vh",children:j.no_announcements_yet}):x(Fe,{children:u.map((c,d)=>B(Ce,{w:"100%",spacing:1,children:[B(me,{spacing:8,sx:{alignItems:"end"},children:[t&&B(Fe,{children:[x(Le,{variant:"light",color:"red",onClick:()=>l(c.id),children:x(vo,{size:20})}),x(Le,{variant:c.pinned?"filled":"light",color:"blue",onClick:()=>o(c.id),children:x(jQ,{size:20})})]}),x(Yn,{size:28,radius:"md"}),x(Te,{fw:650,size:15,children:c.creator}),x(Te,{fw:400,size:10,color:"gray.6",children:new Date(c.date*1e3).toLocaleString([],n||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),x(Te,{size:13,style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:c.message.replace(/\n/g,"<br>")}}),x(Fs,{mt:15,w:"80%",ml:"10%",color:"dark.5"})]},d))})})}),x(me,{align:"center",w:"100%",children:x(xs,{w:"100%",placeholder:j.write,rightSection:x(Le,{variant:"subtle",color:"blue",onClick:s,children:x(s$,{size:20})}),disabled:!t,autosize:!0,rows:2,minRows:1,maxRows:4,value:r,onChange:c=>i(c.target.value),onKeyDown:c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),s())}})})]})})]})})}function Y$t(){return x(UR,{children:B(me,{position:"apart",spacing:30,h:"80vh",style:{overflow:"auto"},children:[x(X$t,{}),x(J$t,{})]})})}function nhe({profileId:e}){const{profiles:t,updateProfile:n}=Us(),{updateTab:r}=_o(),[i,a]=I.exports.useState(t.find(v=>v.identifier===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image),[d,p]=I.exports.useState(i==null?void 0:i.notes),[h]=Kt(d,1e3);I.exports.useEffect(()=>{a(t.find(v=>v.identifier===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]),I.exports.useEffect(()=>{i&&h&&n(i.identifier,{notes:h})},[h]);const m=I.exports.useCallback(()=>{r({title:"profiles",component:x(rhe,{})})},[i,r]),g=I.exports.useCallback(()=>{const v={...i,notes:d};Ee("saveProfile",v).then(()=>{i!=null&&i.identifier&&n(i==null?void 0:i.identifier,{notes:d}),Ir(j.mdt,j.saved_successfully)})},[i,d]),y=()=>{l(),Ee("hideUI"),Ee("takePhoto","profile")};return wt("photoTaken",v=>{v.page==="profile"&&(o(),c(v.url))}),B(Fe,{children:[i&&B(me,{spacing:20,children:[x(Bt,{w:"59%",h:"81vh",color:"dark.6",radius:"xs",p:18,shadow:"xs",style:{overflow:"scroll"},children:B(Ce,{w:"100%",spacing:25,align:"flex-start",children:[B(me,{w:"100%",position:"apart",children:[B(xt,{radius:"sm",children:["ID: ",i.identifier]}),B(me,{spacing:10,children:[x(Le,{variant:"subtle",color:"blue",onClick:m,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(Gs,{})})]})]}),x(me,{w:"100%",position:"apart",children:B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.player_name,variant:"filled",readOnly:!0,value:i.name,size:"xs"}),x(Ze,{label:j.dob,variant:"filled",readOnly:!0,value:i.dob,size:"xs"}),x(Ze,{label:j.phone_number,variant:"filled",readOnly:!0,value:i.phoneNumber,size:"xs"}),x(Ze,{label:j.gender,variant:"filled",readOnly:!0,value:j[i.gender],size:"xs"}),i.fingerprint&&x(Ze,{label:j.fingerprint,variant:"filled",readOnly:!0,value:i.fingerprint,size:"xs"}),i.bloodType&&x(Ze,{label:j.bloodType,variant:"filled",readOnly:!0,value:i.bloodType,size:"xs"})]})})]})}),x(xs,{w:"100%",label:j.notes,minRows:25,maxLength:5e4,value:d,onChange:v=>p(v.currentTarget.value)})]})}),x(ll,{page:"profile",sidebar:i.sideBarData,pageId:i.identifier,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,onChange:v=>c(v.currentTarget.value),rightSection:x(Le,{onClick:y,children:x(Zl,{})})}),x(me,{position:"right",children:x(Ct,{onClick:()=>{!i||(l(),n(i.identifier,{image:u}))},children:j.confirm})})]})})]})}function Q$t({searchQuery:e,filters:t}){const{profiles:n,updateProfile:r}=Us(),{updateTab:i}=_o(),a=I.exports.useMemo(()=>n.filter(o=>{var c,d,p;const l=((c=o.name)==null?void 0:c.toLowerCase().includes(e.toLowerCase()))||((d=o.identifier)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=o.fingerprint)==null?void 0:p.toLowerCase().includes(e.toLowerCase()));if(!t)return l;const u=t.every(h=>{if(!o.sideBarData)return!1;let m;if(h.type in o.sideBarData?m=o.sideBarData[h.type]:m=o[h.type],Array.isArray(m)&&m.length>0){if(typeof m[0]=="object")return m.some(g=>Object.values(g).some(y=>typeof y=="string"?y.toLowerCase().includes(h.value.toLowerCase()):!1));if(typeof m[0]=="string")return m.some(g=>g.toLowerCase().includes(h.value.toLowerCase()))}return typeof m=="string"?m.toLowerCase().includes(h.value.toLowerCase()):!1});return l&&u}),[e,t,n]),s=({index:o,style:l})=>{const u=a[o];return x("div",{style:{...l},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getProfile",u.identifier).then(c=>{!c||!u.identifier||r(u.identifier,c)}),i({title:"profiles",component:x(nhe,{profileId:u.identifier})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:u.image}),B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:u.name}),B(xt,{radius:"sm",children:["ID: ",u.identifier]})]}),x(Te,{fw:500,size:12,color:"gray.5",children:u.dob})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:a.length,itemSize:110,width:"100%",children:s})}function rhe(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200);Tr(!1);const[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"tags",value:""}]);return B(Fe,{children:[x(_a,{title:j.profiles,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setSearchQuery:t,setFilters:i}),x(Q$t,{searchQuery:n,filters:r})]})}function eTt({pageTitle:e,sidebar:t,pageId:n,updateData:r}){const[i,{toggle:a}]=Tr(!1),{addTab:s}=_o(),{reports:o,updateReport:l}=Gu(),{updateProfile:u}=Us(),{employees:c}=Qo(),{players:d}=rD(),{tags:p}=Fy(),h=y=>{const v=async(b,_,k,S)=>{const $=await b(y);!$||!r||(_(y,$),s({title:S,component:k}))};switch(t.title){case"linkedReports":v(b=>Ee("getReport",b),l,x(hB,{reportId:y}),"reports");break;case"linkedProfiles":case"paramedics":case"patients":v(b=>Ee("getProfile",b),u,x(nhe,{profileId:y}),"profiles");break}},m=()=>{if(!r)return;const y=v=>{Tn.open({centered:!0,title:j[t.title],children:v})};switch(t.title){case"tags":y(x(ZQ,{currentTags:t.data,pageId:n,updateData:r}));break;case"paramedics":case"patients":y(x(ty,{title:t.title,allPlayers:t.title==="paramedics"?c:d,currentPlayers:t.data,pageId:n,updateData:r}));break;case"linkedProfiles":y(x(ty,{title:t.title,allPlayers:d,currentPlayers:t.data,pageId:n,includeReason:!0,updateData:r}));break;case"linkedReports":y(x(vk,{title:t.title,allReports:o,currentReports:t.data,pageId:n,updateData:r}));break;case"photos":y(x(u2,{pageId:n,currentPhotos:t.data,updateData:r}));break}};t.title==="photos"&&wt("photoTaken",y=>{!r||y.page!=="photos"||Tn.open({centered:!0,title:t.title,children:x(u2,{pageId:n,currentUrl:y.url,currentPhotos:t.data,updateData:r})})});const g=y=>{if(!r)return;const v=(b,_)=>{r(n,{sideBarData:{[b]:t.data.filter(_)}})};switch(t.title){case"tags":v(t.title,b=>b!==y);break;case"paramedics":case"patients":case"linkedProfiles":v(t.title,b=>b.identifier!==y);break;default:v(t.title,b=>b.id!==y);break}};return B(Fe,{children:[x(Bt,{w:"100%",h:50,bg:"dark.7",radius:"xs",shadow:"xs",onClick:a,style:{cursor:"pointer"},mb:10,children:B(me,{position:"apart",h:"100%",px:15,children:[x(Te,{size:15,fw:450,children:j[t.title]}),(t.title==="linkedProfiles"||t.title==="tags"||t.title==="paramedics"||t.title==="patients"||t.title==="photos"||e!=="profile"&&t.title==="linkedReports")&&x(Le,{color:"blue",variant:"subtle",onClick:y=>{y.stopPropagation(),m()},children:x(zy,{})})]})}),x(Fe,{children:x(U2,{in:i,children:x(Mn.Autosize,{mah:500,type:"always",scrollbarSize:3,pb:15,children:x(me,{spacing:10,pb:5,children:(!(t!=null&&t.data)||t.data.length===0)&&x(xt,{color:"dark",children:j.no_sidebar_data.format(j[t.title])})||(t.title==="jobs"||t.title==="charges")&&t.data.map((y,v)=>x(xt,{children:y},v))||t.title==="tags"&&r&&t.data.map((y,v)=>{const b=p.find(_=>_.name===y);return b?x(xt,{style:{backgroundColor:b.color,color:"#ced4da",textShadow:"0px 1px 2px rgba(0, 0, 0, 1.0"},rightSection:x(Le,{size:14,variant:"transparent",onClick:()=>g(y),children:x(pi,{})}),children:y},v):null})||(t.title==="driving"||t.title==="professionalism"||t.title==="generalKnowledge"||t.title==="reports"||t.title==="radio")&&r&&x(aee,{sidebar:t,pageId:n,updateData:r})||(t.title==="paramedics"||t.title==="patients")&&r&&t.data.map((y,v)=>x(xt,{style:{cursor:"pointer"},onClick:()=>h(y.identifier),rightSection:x(Le,{size:14,variant:"transparent",onClick:b=>{b.stopPropagation(),g(y.identifier)},children:x(pi,{})}),children:y.name},v))||t.title==="linkedReports"&&Og(t.data).map((y,v)=>{const b=o.find(_=>_.id===y);return b?x(xt,{onClick:()=>h(y),style:{cursor:"pointer"},rightSection:e!=="evidence"&&e!=="weapon"&&x(Le,{size:14,onClick:_=>{_.stopPropagation(),g(y)},children:x(pi,{})}),children:`${b.title} (ID: ${y})`},v):null})||t.title==="linkedProfiles"&&t.data.map((y,v)=>B(xt,{onClick:()=>h(y.identifier),style:{cursor:"pointer"},rightSection:x(Le,{size:14,variant:"transparent",onClick:b=>{b.stopPropagation(),g(y.identifier)},children:x(pi,{})}),children:[y.name,": ",y.reason]},v))||t.title==="photos"&&t.data.map((y,v)=>x(is,{p:5,label:x("img",{src:y,width:576}),position:"left",color:"dark.6",withArrow:!0,withinPortal:!0,children:x(ws,{src:y,maw:192,style:{cursor:"pointer"},onClick:()=>{!r||Tn.openConfirmModal({title:j.are_you_sure,centered:!0,children:x(Te,{size:"sm",children:j.are_you_sure_remove_photo}),labels:{confirm:j.confirm,cancel:j.cancel},onConfirm:()=>r(n,{sideBarData:{photos:t.data.filter(b=>b!==b)}})})}})},v))||t.data.map((y,v)=>x(xt,{children:y},v))})})})})]})}function ihe({page:e,sidebar:t,pageId:n,updateData:r}){const{sidebarOrder:i}=Zt();if(!t)return null;const a=Object.keys(t).filter(s=>i.includes(s)).sort((s,o)=>{const l=i.indexOf(s),u=i.indexOf(o);return(l===-1?i.length:l)-(u===-1?i.length:u)});return x(Mn,{w:"38%",h:"81vh",type:"never",children:x(Ce,{justify:"flex-start",h:"100%",spacing:0,children:a.map((s,o)=>x(eTt,{pageTitle:e,sidebar:{title:s,data:t[s]},pageId:n,updateData:r},o))})})}function hB({reportId:e}){const{reports:t,updateReport:n}=Gu(),{updateTab:r}=_o(),[i,a]=I.exports.useState(t.find(b=>b.id===e)),{dateFormat:s}=Zt(),[o,l]=I.exports.useState(i==null?void 0:i.title),[u]=Kt(o,500),c=I.exports.useRef(0),[d]=Kt(c.current,2500),p=I.exports.useRef(!1);I.exports.useEffect(()=>{const b=t.find(_=>_.id===e);b&&(a(b),!p.current&&h&&b.content&&(p.current=!0,h.commands.setContent(b.content)))},[t,e]);const h=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),xm,_m.configure({limit:1e5})],content:i==null?void 0:i.content}),m=I.exports.useRef(!1);I.exports.useEffect(()=>{!h||!(i!=null&&i.content)||m.current||(m.current=!0,h.commands.setContent(i.content),i!=null&&i.title&&l(i.title))},[h,i]),I.exports.useEffect(()=>{!i||n(i.id,{...i,title:u})},[u]),I.exports.useEffect(()=>{const b=h==null?void 0:h.getHTML();!i||b===void 0||n(i.id,{...i,content:h==null?void 0:h.getHTML()})},[d]),I.exports.useEffect(()=>{if(h){const b=()=>{c.current++};return h.on("update",b),()=>{h.off("update",b)}}},[h]),I.exports.useEffect(()=>{h&&h.setOptions({editorProps:{handlePaste:(b,_,k)=>{const S=_.clipboardData,$=S==null?void 0:S.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test($||"")&&$?(_.preventDefault(),h.commands.setImage({src:$}),!0):!1}}})},[h]);const g=I.exports.useCallback(()=>{r({title:"reports",component:x(hA,{})})},[i,r]),y=I.exports.useCallback(()=>{const b={...i,title:o,content:h==null?void 0:h.getHTML()};Ee("saveReport",b).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{title:o,content:h==null?void 0:h.getHTML()}),Ir(j.mdt,j.saved_successfully)})},[i,o,h]),v=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeReport",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"reports",component:x(hA,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,h:"100%",style:{alignItems:"start"},children:[B(Ce,{w:"59%",h:"100%",justify:"flex-start",spacing:10,children:[x(Bt,{w:"100%",h:80,color:"dark.6",radius:"xs",px:10,shadow:"xs",children:B(Ce,{h:"100%",justify:"center",spacing:5,children:[B(me,{position:"apart",children:[x(Ze,{variant:"filled",value:o||"",onChange:b=>l(b.currentTarget.value),sx:{input:{fontSize:18,fontWeight:630}},w:"60%"}),B(me,{spacing:10,children:[B(xt,{radius:"sm",children:["ID: ",i.id===-1&&"Temporary"||i.id]}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:y,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:v,children:x(vo,{})})]})]}),B(Te,{fw:550,size:12,color:"gray.6",children:[i.creator," - ",new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})]})]})}),x(Bt,{w:"100%",h:"100%",color:"dark.7",radius:"xs",p:20,shadow:"xs",children:x(km,{editor:h})})]}),x(ihe,{page:"report",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function tTt({searchQuery:e,filters:t}){const{reports:n,updateReport:r}=Gu(),{updateTab:i}=_o(),{dateFormat:a}=Zt(),s=I.exports.useMemo(()=>n.filter(l=>{var d,p,h,m;const u=((d=l.title)==null?void 0:d.toLowerCase().includes(e.toLowerCase()))||((p=l.id)==null?void 0:p.toString())===e||l.sideBarData&&(((h=l.sideBarData.paramedics)==null?void 0:h.some(g=>{var y;return(y=g==null?void 0:g.name)==null?void 0:y.toLowerCase().includes(e.toLowerCase())}))||((m=l.sideBarData.patients)==null?void 0:m.some(g=>{var y;return(y=g==null?void 0:g.name)==null?void 0:y.toLowerCase().includes(e.toLowerCase())})));if(!t)return u;const c=t.every(g=>{if(!l.sideBarData)return!1;let y;if(g.type in l.sideBarData?y=l.sideBarData[g.type]:y=l[g.type],Array.isArray(y)&&y.length>0){if(typeof y[0]=="object")return y.some(v=>Object.values(v).some(b=>typeof b=="string"?b.toLowerCase().includes(g.value.toLowerCase()):!1));if(typeof y[0]=="string")return y.some(v=>v.toLowerCase().includes(g.value.toLowerCase()))}return typeof y=="string"?y.toLowerCase().includes(g.value.toLowerCase()):!1});return u&&c}).sort((l,u)=>u.id-l.id),[e,t,n]),o=({index:l,style:u})=>{const c=s[l];return c.id<=-1?null:x("div",{style:{...u},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getReport",c.id).then(d=>{!d||!c.id||r(c.id,d)}),i({title:"reports",component:x(hB,{reportId:c.id})})},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:c.title}),B(xt,{radius:"sm",children:["ID: ",c.id]})]}),c.sideBarData.paramedics&&c.sideBarData.paramedics.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.paramedics_list," ",c.sideBarData.paramedics.map(d=>d==null?void 0:d.name).join(", ")]}),c.sideBarData.patients&&c.sideBarData.patients.length>0&&B(Te,{w:700,fw:500,size:13,color:"gray.4",style:{overflow:"hidden",wordBreak:"break-all",textOverflow:"ellipsis"},children:[j.patients_list," ",c.sideBarData.patients.map(d=>d.name).join(", ")]}),x(Te,{fw:500,size:12,color:"gray.5",children:new Date(c.date*1e3).toLocaleString([],a||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:s.length,itemSize:110,width:"100%",children:o})}function hA(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,i]=I.exports.useState(),[a,s]=I.exports.useState([{type:"creator",value:""},{type:"tags",value:""},{type:"paramedics",value:""},{type:"patients",value:""}]),{updateTab:o}=_o(),l=()=>{Ee("createReport").then(u=>{!u||o({title:"reports",component:x(hB,{reportId:u.id})})})};return B(Fe,{children:[x(_a,{title:j.reports,searchQuery:e,filterInputs:a,filters:r,setFilterInputs:s,setSearchQuery:t,setFilters:i,createNew:l}),x(tTt,{searchQuery:n,filters:r})]})}function ahe({reportId:e}){const{trainingReports:t,updateTrainingReport:n}=ew(),{updateTab:r}=_o(),[i,a]=I.exports.useState(t.find(b=>b.id===e)),{dateFormat:s}=Zt(),[o,l]=I.exports.useState(i==null?void 0:i.title),[u]=Kt(o,500),c=I.exports.useRef(0),[d]=Kt(c.current,2500),p=I.exports.useRef(!1);I.exports.useEffect(()=>{const b=t.find(_=>_.id===e);b&&(a(b),!p.current&&h&&b.content&&(p.current=!0,h.commands.setContent(b.content)))},[t,e]);const h=fm({extensions:[gm,ym,bm,wm,mm,f0,h0,vm.configure({types:["heading","paragraph"]}),eB,xm,_m.configure({limit:1e5})],content:i==null?void 0:i.content}),m=I.exports.useRef(!1);I.exports.useEffect(()=>{!h||!(i!=null&&i.content)||m.current||(m.current=!0,h.commands.setContent(i.content),i!=null&&i.title&&l(i.title))},[h,i]),I.exports.useEffect(()=>{!i||n(i.id,{...i,title:u})},[u]),I.exports.useEffect(()=>{const b=h==null?void 0:h.getHTML();!i||b===void 0||n(i.id,{...i,content:h==null?void 0:h.getHTML()})},[d]),I.exports.useEffect(()=>{if(h){const b=()=>{c.current++};return h.on("update",b),()=>{h.off("update",b)}}},[h]),I.exports.useEffect(()=>{h&&h.setOptions({editorProps:{handlePaste:(b,_,k)=>{const S=_.clipboardData,$=S==null?void 0:S.getData("text/plain");return/https?:\/\/\S+\.(jpg|jpeg|png|gif)/i.test($||"")&&$?(_.preventDefault(),h.commands.setImage({src:$}),!0):!1}}})},[h]);const g=I.exports.useCallback(()=>{r({title:"trainingReports",component:x(fA,{})})},[i,r]),y=I.exports.useCallback(()=>{const b={...i,title:o,content:h==null?void 0:h.getHTML()};Ee("saveTrainingReport",b).then(()=>{i!=null&&i.id&&n(i==null?void 0:i.id,{title:o,content:h==null?void 0:h.getHTML()}),Ir(j.mdt,j.saved_successfully)})},[i,o,h]),v=I.exports.useCallback(()=>{Tn.openConfirmModal({title:j.are_you_sure_remove,labels:{confirm:j.confirm,cancel:j.cancel},centered:!0,onConfirm:()=>{Ee("removeTrainingReport",i==null?void 0:i.id).then(()=>{Ir(j.mdt,j.removed_successfully)}),r({title:"trainingReports",component:x(fA,{})})}})},[i,r]);return x(Fe,{children:i&&B(me,{spacing:20,h:"100%",style:{alignItems:"start"},children:[B(Ce,{w:"59%",h:"100%",spacing:10,children:[x(Bt,{w:"100%",h:80,color:"dark.6",radius:"xs",px:10,shadow:"xs",children:B(Ce,{h:"100%",justify:"center",spacing:5,children:[B(me,{position:"apart",children:[x(Ze,{variant:"filled",value:o,onChange:b=>l(b.currentTarget.value),sx:{input:{fontSize:18,fontWeight:630}},w:"60%"}),B(me,{spacing:10,children:[B(xt,{radius:"sm",children:["ID: ",i.id]}),x(Le,{variant:"subtle",color:"blue",onClick:g,children:x(_s,{})}),x(Le,{variant:"subtle",color:"blue",onClick:y,children:x(Gs,{})}),x(Le,{variant:"subtle",color:"red",onClick:v,children:x(vo,{})})]})]}),B(Te,{fw:550,size:12,color:"gray.6",children:[i.creator," - ",new Date(i.date*1e3).toLocaleString([],s||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})," - ",j.trainee.format(i.trainee)]})]})}),x(Bt,{w:"100%",h:"72%",color:"dark.7",radius:"xs",p:20,shadow:"xs",children:x(km,{editor:h})})]}),x(ihe,{page:"trainingReport",sidebar:i.sideBarData,pageId:i.id,updateData:n})]})})}function nTt({searchQuery:e}){const{updateTab:t}=_o(),{trainingReports:n,updateTrainingReport:r}=ew(),{dateFormat:i}=Zt(),a=I.exports.useMemo(()=>n.filter(o=>{var l,u,c;return((l=o.creator)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))||((u=o.trainee)==null?void 0:u.toLowerCase().includes(e.toLowerCase()))||((c=o.id)==null?void 0:c.toString())===e}).sort((o,l)=>l.id-o.id),[e,n]),s=({index:o,style:l})=>{const u=a[o];return x("div",{style:{...l},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getTrainingReport",u.id).then(c=>{!c||!u.id||r(u.id,c)}),t({title:"trainingReports",component:x(ahe,{reportId:u.id})})},p:10,children:x(me,{spacing:15,children:B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:u.title}),B(xt,{radius:"sm",children:["ID: ",u.id]})]}),B(Te,{fw:500,size:12,color:"gray.5",children:[u.creator," - ",new Date(u.date*1e3).toLocaleString([],i||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})," - ",j.trainee.format(u.trainee)]})]})})})})};return x(na,{height:window.innerHeight*.77,itemCount:a.length,itemSize:110,width:"100%",children:s})}function fA(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200),[r,{open:i,close:a}]=Tr(!1),[s,o]=I.exports.useState(),{employees:l,minTrainingReportGrade:u,maxTraineeGrade:c}=Qo(),{playerGrade:d,isBoss:p}=Zt(),{updateTab:h}=_o(),m=()=>{i()};return I.exports.useEffect(()=>{!s||s===""||Ee("createTrainingReport",s).then(g=>{!g||h({title:"trainingReports",component:x(ahe,{reportId:g.id})})})},[s]),B(Fe,{children:[x(_a,{title:j.trainingReports,searchQuery:e,setSearchQuery:t,createNew:d>=u?m:void 0}),p&&x(nTt,{searchQuery:n}),x(nr,{opened:r,onClose:a,title:j.new_training_report,centered:!0,children:x(ty,{allPlayers:l.filter(g=>g.gradeNumber<=c),setTrainee:o})})]})}function rTt(){const{tabs:e,activeTab:t,initialTab:n,updateTab:r,setInitialTab:i,setTabs:a,setActiveTab:s}=_o(),{emsPages:o}=Zt(),l=[{name:"home",icon:x(CP,{}),component:x(Y$t,{})},{name:"profiles",icon:x(oD,{}),component:x(rhe,{})},{name:"reports",icon:x(VQ,{}),component:x(hA,{})},{name:"trainingReports",icon:x(HQ,{}),component:x(fA,{})},{name:"map",icon:x(WQ,{}),component:x(Xpe,{})},{name:"employees",icon:x(UQ,{}),component:x(Qpe,{})}];I.exports.useEffect(()=>{var h;if(n)return;const c=(h=l.find(m=>m.name===o[0]))==null?void 0:h.component,d=Du(),p={id:d,title:o[0],component:c};i(p),a([p]),s(d)},[o]);const u=c=>{r({title:c.name,component:c.component})};return B(Fe,{children:[x(Mn,{w:220,h:"84vh",bg:"dark.7",px:10,py:10,scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{h:"100%",spacing:5,align:"flex-start",children:l.map((c,d)=>{var m;if(!o.includes(c.name))return;const h=((m=e.find(g=>g.id===t))==null?void 0:m.title)===c.name;return x(Ct,{leftIcon:c.icon,color:"gray",variant:h?"light":"subtle",w:"100%",h:40,px:10,styles:{inner:{justifyContent:"start"}},onClick:()=>u(c),children:j[c.name]},d)})})}),x(Fs,{orientation:"vertical",color:"dark.6"})]})}function iTt(){const{tabs:e,activeTab:t,setActiveTab:n}=_o();return x(bi,{value:t,onTabChange:n,children:e.map(r=>x(bi.Panel,{value:r.id,children:r.component},r.id))})}function aTt(){const{tabs:e,activeTab:t,setActiveTab:n,removeTab:r,addTab:i}=_o(),{employees:a}=Qo(),{identifier:s,dateFormat:o,images:l}=Zt(),[u,c]=I.exports.useState(j.paramedic),[d,p]=I.exports.useState();I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);c((b==null?void 0:b.name)||j.paramedic),p(b==null?void 0:b.image)},[]),I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);p(b==null?void 0:b.image)},[a]);var[h,m]=I.exports.useState(new Date);I.exports.useEffect(()=>{const b=setInterval(()=>{m(new Date)},6e4);return()=>clearInterval(b)},[]);const g=I.exports.useRef(null),y=I.exports.useRef({}),v=b=>{g.current&&(g.current.scrollLeft-=.2*b.deltaY)};return B(Fe,{children:[x(vt,{h:70,bg:"dark.7",px:20,children:B(me,{h:"100%",position:"apart",children:[B(me,{spacing:105,w:"70%",children:[x(me,{w:"18.5%",position:l&&l.ems&&"center"||"left",children:l&&l.ems?x(ws,{src:l.ems,width:95,height:60,fit:"contain"}):x(t$,{order:1,pl:20,children:j.ems})}),x(bi,{value:t,onTabChange:n,mt:28,defaultValue:"gallery",children:B(me,{w:"100%",spacing:10,children:[x(Mn,{maw:900,type:"never",onWheel:v,viewportRef:g,children:x(bi.List,{sx:{flexFlow:"row",borderBottom:"0px"},children:e.map(b=>x(bi.Tab,{py:10,value:b.id,ref:_=>y.current[b.id]=_,mb:0,rightSection:x(Le,{color:"blue",className:"remove-icon",variant:"subtle",size:20,onClick:_=>{_.stopPropagation(),r(b.id)},children:x(pi,{size:14})}),children:j[b.title]},b.id))})}),x(Le,{ml:10,onClick:()=>{i(),setTimeout(()=>{const b=e[e.length-1].id;y.current[b]&&y.current[b].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},0)},children:x(zy,{})})]})})]}),B(me,{spacing:10,children:[B(Ce,{align:"flex-end",spacing:0,children:[x(Te,{fw:650,size:20,children:u}),x(Te,{fw:600,size:13,color:"gray.5",children:h.toLocaleString([],o||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),x(Yn,{size:40,src:d})]})]})}),x(Fs,{color:"dark.6"})]})}const yx=tD((e,t)=>({tabs:[],initialTab:null,activeTab:null,setInitialTab:n=>e({initialTab:n}),setTabs:n=>e({tabs:n}),addTab:n=>{if(!t().initialTab&&!n)return;const i=Du();e(a=>{var s;return{tabs:[...a.tabs,{id:i,title:(n==null?void 0:n.title)||((s=a.initialTab)==null?void 0:s.title)||"",component:(n==null?void 0:n.component)||a.initialTab&&a.initialTab.component}],activeTab:i}})},removeTab:n=>{const r=t();if(!!r.initialTab){if(r.tabs.length===1){r.updateTab({title:r.initialTab.title,component:r.initialTab.component});return}e(i=>{const a=i.tabs.filter(o=>o.id!==n),s=i.activeTab===n&&a.length>0?a[0].id:i.activeTab;return{tabs:a,activeTab:s}})}},setActiveTab:n=>e({activeTab:n}),updateTab:n=>{const r=Du();e(i=>({tabs:i.tabs.map(a=>a.id===i.activeTab?{...n,id:r}:a),activeTab:r}))}}));function sTt({pageTitle:e,sidebar:t,pageId:n,updateData:r}){const[i,{toggle:a}]=Tr(!1);return B(Fe,{children:[x(Bt,{w:"100%",h:50,bg:"dark.7",radius:"xs",shadow:"xs",onClick:a,style:{cursor:"pointer"},mb:10,children:x(me,{position:"apart",h:"100%",px:15,children:x(Te,{size:15,fw:450,children:j[t.title]})})}),x(Fe,{children:x(U2,{in:i,children:x(Mn.Autosize,{mah:500,type:"always",scrollbarSize:3,pb:15,children:x(me,{spacing:10,pb:5,children:(!(t!=null&&t.data)||t.data.length===0)&&x(xt,{color:"dark",children:j.no_sidebar_data.format(j[t.title])})||t.title==="charges"&&t.data.map((s,o)=>x(xt,{children:s},o))||t.title==="licenses"&&r&&t.data.map((s,o)=>x(xt,{children:s},o))||t.title==="properties"&&t.data.map((s,o)=>B(xt,{children:[s.name," (ID: ",s.id,")"]},o))||t.title==="vehicles"&&t.data.map((s,o)=>B(xt,{children:[s.name," [",s.plate,"]"]},o))||t.title==="warrants"&&t.data.map((s,o)=>B(xt,{children:[s.incidentTitle," (ID: ",s.incidentId,")"]},o))||t.data.map((s,o)=>x(xt,{children:s},o))})})})})]})}function oTt({page:e,sidebar:t,pageId:n,updateData:r}){const{sidebarOrder:i}=Zt();if(!t)return null;const a=Object.keys(t).filter(s=>i.includes(s)).sort((s,o)=>{const l=i.indexOf(s),u=i.indexOf(o);return(l===-1?i.length:l)-(u===-1?i.length:u)});return x(Mn,{w:"38%",h:"81vh",type:"never",children:x(Ce,{justify:"flex-start",h:"100%",spacing:0,children:a.map((s,o)=>x(sTt,{pageTitle:e,sidebar:{title:s,data:t[s]},pageId:n,updateData:r},o))})})}const lTt=tt(e=>({wave:{position:"absolute",bottom:0,width:"100%",height:"40%",zIndex:-1,color:e.colors.dark[7]}}));function uTt({profileId:e}){lTt();const{profiles:t,updateProfile:n}=Us(),{updateTab:r}=yx(),[i,a]=I.exports.useState(t.find(p=>p.identifier===e)),[s,{open:o,close:l}]=Tr(!1),[u,c]=I.exports.useState(i==null?void 0:i.image);I.exports.useState(i==null?void 0:i.notes),I.exports.useEffect(()=>{a(t.find(p=>p.identifier===e))},[t]),I.exports.useEffect(()=>{c(i==null?void 0:i.image)},[i]);const d=I.exports.useCallback(()=>{r({title:"profiles",component:x(she,{})})},[i,r]);return B(Fe,{children:[i&&B(me,{spacing:20,sx:{alignItems:"start"},children:[x(Bt,{w:"59%",h:"23vh",color:"dark.6",radius:"xs",p:20,shadow:"xs",children:B(Ce,{w:"100%",spacing:25,align:"flex-start",children:[B(me,{w:"100%",position:"apart",children:[B(xt,{radius:"sm",children:["ID: ",i.identifier]}),x(Le,{variant:"subtle",color:"blue",onClick:d,children:x(_s,{})})]}),x(me,{w:"100%",position:"apart",children:B(me,{w:"90%",children:[x(Yn,{size:160,src:i.image,onClick:o,sx:{cursor:"pointer"}}),x(Mn,{w:"75%",h:160,scrollHideDelay:0,scrollbarSize:5,children:B(me,{w:"100%",spacing:10,children:[x(Ze,{label:j.player_name,variant:"filled",readOnly:!0,value:i.name,size:"xs"}),x(Ze,{label:j.dob,variant:"filled",readOnly:!0,value:i.dob,size:"xs"})]})})]})})]})}),x(oTt,{page:"profile",sidebar:i.sideBarData,pageId:i.identifier,updateData:n})]}),x(nr,{size:"40%",centered:!0,title:i==null?void 0:i.name,opened:s,onClose:l,withinPortal:!0,children:B(Ce,{spacing:20,children:[x(ws,{radius:"md",src:i==null?void 0:i.image}),x(Ze,{label:j.image_url,placeholder:j.url,variant:"filled",value:u,readOnly:!0})]})})]})}function cTt({searchQuery:e}){const{profiles:t,updateProfile:n}=Us(),{updateTab:r}=yx(),i=I.exports.useMemo(()=>t.filter(s=>{var o,l;return((o=s.name)==null?void 0:o.toLowerCase().includes(e.toLowerCase()))||((l=s.identifier)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))}),[e,t]),a=({index:s,style:o})=>{const l=i[s];return x("div",{style:{...o},children:x(Ct,{w:"100%",h:100,variant:"light",color:"gray",styles:{inner:{justifyContent:"start"}},onClick:()=>{Ee("getProfile",l.identifier).then(u=>{!u||!l.identifier||n(l.identifier,u)}),r({title:"profiles",component:x(uTt,{profileId:l.identifier})})},p:10,children:B(me,{spacing:15,children:[x(Yn,{size:80,src:l.image}),B(Ce,{spacing:1,children:[B(me,{spacing:10,children:[x(Te,{fw:600,size:16,children:l.name}),B(xt,{radius:"sm",children:["ID: ",l.identifier]})]}),x(Te,{fw:500,size:12,color:"gray.5",children:l.dob})]})]})})})};return x(na,{height:window.innerHeight*.77,itemCount:i.length,itemSize:110,width:"100%",children:a})}function she(){const[e,t]=I.exports.useState(""),[n]=Kt(e,200);return B(Fe,{children:[x(_a,{title:j.profiles,searchQuery:e,setSearchQuery:t}),x(cTt,{searchQuery:n})]})}function dTt(){const{tabs:e,activeTab:t,initialTab:n,updateTab:r,setInitialTab:i,setTabs:a,setActiveTab:s}=yx(),{citizenPages:o}=Zt(),l=[{name:"profiles",icon:x(oD,{}),component:x(she,{})},{name:"charges",icon:x(eI,{}),component:x(pD,{isCitizen:!0})},{name:"legislation",icon:x(BQ,{}),component:x(the,{isCitizen:!0})}];I.exports.useEffect(()=>{var h;if(n)return;const c=(h=l.find(m=>m.name===o[0]))==null?void 0:h.component,d=Du(),p={id:d,title:o[0],component:c};i(p),a([p]),s(d)},[o]);const u=c=>{r({title:c.name,component:c.component})};return B(Fe,{children:[x(Mn,{w:220,h:"84vh",bg:"dark.7",px:10,py:10,scrollHideDelay:0,scrollbarSize:5,children:x(Ce,{h:"100%",spacing:5,align:"flex-start",children:l.map((c,d)=>{var m;if(!o.includes(c.name))return;const h=((m=e.find(g=>g.id===t))==null?void 0:m.title)===c.name;return x(Ct,{leftIcon:c.icon,color:"gray",variant:h?"light":"subtle",w:"100%",h:40,px:10,styles:{inner:{justifyContent:"start"}},onClick:()=>u(c),children:j[c.name]},d)})})}),x(Fs,{orientation:"vertical",color:"dark.6"})]})}function pTt(){const{tabs:e,activeTab:t,setActiveTab:n,removeTab:r,addTab:i}=yx(),{profiles:a}=Us(),{identifier:s,dateFormat:o,images:l}=Zt(),[u,c]=I.exports.useState(j.citizen),[d,p]=I.exports.useState();I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);c((b==null?void 0:b.name)||j.citizen),p(b==null?void 0:b.image)},[]),I.exports.useEffect(()=>{const b=a.find(_=>_.identifier===s);p(b==null?void 0:b.image)},[a]);var[h,m]=I.exports.useState(new Date);I.exports.useEffect(()=>{const b=setInterval(()=>{m(new Date)},6e4);return()=>clearInterval(b)},[]);const g=I.exports.useRef(null),y=I.exports.useRef({}),v=b=>{g.current&&(g.current.scrollLeft-=.2*b.deltaY)};return B(Fe,{children:[x(vt,{h:70,bg:"dark.7",px:20,children:B(me,{h:"100%",position:"apart",children:[B(me,{spacing:105,w:"70%",children:[x(me,{w:"18.5%",position:l&&l.citizen&&"center"||"left",children:l&&l.citizen?x(ws,{src:l.citizen,width:95,height:60,fit:"contain"}):x(t$,{order:1,pl:20,children:j.citizen})}),x(bi,{value:t,onTabChange:n,mt:28,defaultValue:"gallery",children:B(me,{w:"100%",spacing:10,children:[x(Mn,{maw:900,type:"never",onWheel:v,viewportRef:g,children:x(bi.List,{sx:{flexFlow:"row",borderBottom:"0px"},children:e.map(b=>x(bi.Tab,{py:10,value:b.id,ref:_=>y.current[b.id]=_,mb:0,rightSection:x(Le,{color:"blue",className:"remove-icon",variant:"subtle",size:20,onClick:_=>{_.stopPropagation(),r(b.id)},children:x(pi,{size:14})}),children:j[b.title]},b.id))})}),x(Le,{ml:10,onClick:()=>{i(),setTimeout(()=>{const b=e[e.length-1].id;y.current[b]&&y.current[b].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},0)},children:x(zy,{})})]})})]}),B(me,{spacing:10,children:[B(Ce,{align:"flex-end",spacing:0,children:[x(Te,{fw:650,size:20,children:u}),x(Te,{fw:600,size:13,color:"gray.5",children:h.toLocaleString([],o||{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),x(Yn,{size:40,src:d})]})]})}),x(Fs,{color:"dark.6"})]})}function hTt(){const{tabs:e,activeTab:t,setActiveTab:n}=yx();return x(bi,{value:t,onTabChange:n,children:e.map(r=>x(bi.Panel,{value:r.id,children:r.component},r.id))})}function fTt(){const{setLoading:e,setIdentifier:t,setPlayerJob:n,setPlayerGrade:r,setIsBoss:i,setName:a,setPhoneNumber:s,setSidebarOrder:o,setPolicePages:l,setEMSPages:u,setCitizenPages:c,setDateFormat:d,setImages:p,setShowIdentifiers:h}=Zt(),{setPlayers:m}=rD(),{setGrades:g}=KQ(),{setLicenses:y}=XQ(),{setTags:v,addTag:b}=Fy(),{setProfiles:_,updateProfile:k,addProfile:S}=Us(),{setVehicles:$,updateVehicle:N,addVehicle:P}=Rh(),{setProperties:D}=r$(),{setBusinesses:O}=nD(),{setIncidents:F,addIncident:E,updateIncident:z,removeIncident:q}=Ed(),{setReports:K,addReport:Z,updateReport:te,removeReport:V}=Gu(),{setTrainingReports:ee,addTrainingReport:Y,updateTrainingReport:Q,removeTrainingReport:oe}=ew(),{setPoliceReports:pe,addPoliceReport:he,removePoliceReport:ge,updatePoliceReport:_e}=d1(),{setEvidence:Ne,addEvidence:Se,updateEvidence:Re,removeEvidence:Ke}=tw(),{setWeapons:it,addWeapon:Xe,updateWeapon:at,removeWeapon:He}=nw(),{setCharges:_t,addCharge:mt,updateCharge:ht,removeCharge:Lt}=i$(),{setLaws:Un,addLaw:kt,updateLaw:bn,removeLaw:tn}=ehe(),{addEmployee:Mt,setEmployees:sr,setEmployeeLicenses:Rn,setStatus:wn,updateEmployee:un,setMinTrainingReportGrade:cn,setMaxTraineeGrade:Er}=Qo(),{setMessages:ki,addMessage:Qn}=iD(),{setAnnouncements:Ta,addAnnouncement:yn,togglePin:Ge,removeAnnouncement:rt}=aD(),{setCalls:Si,addCall:Dn,removeCall:qn}=sD(),[ai,Ur]=I.exports.useState(1),hr=J=>{const{clientX:At,clientY:Ft}=J,St=window.innerWidth*.9,bt=window.innerHeight*.9,Jt=(window.innerWidth-St)/2,Be=(window.innerHeight-bt)/2,oi=At>=Jt&&At<=Jt+St&&Ft>=Be&&Ft<=Be+bt;Ur(oi?1:.3)};I.exports.useEffect(()=>(window.addEventListener("mousemove",hr),()=>{window.removeEventListener("mousemove",hr)}),[]);const wr=tt(J=>({app:{borderRadius:10,position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:J.colors.dark[8],height:"90vh",width:"90vw",mx:"auto",overflow:"hidden",transition:"opacity 0.1s",opacity:ai}})),{classes:si}=wr();wt("init",J=>{J.locales&&rH(J.locales),J.dateFormat&&d(J.dateFormat),J.sidebarOrder&&o(J.sidebarOrder),J.policePages&&l(J.policePages),J.emsPages&&u(J.emsPages),J.citizenPages&&c(J.citizenPages),J.name&&a(J.name),J.phoneNumber&&s(J.phoneNumber),J.identifier&&t(J.identifier),J.players&&m(J.players),J.grades&&g(J.grades),J.licenses&&y(J.licenses),J.employeeLicenses&&Rn(J.employeeLicenses),J.status&&wn(J.status),J.minTrainingReportGrade&&cn(J.minTrainingReportGrade),J.maxTraineeGrade&&Er(J.maxTraineeGrade),J.tags&&v(J.tags),J.charges&&_t(J.charges),J.laws&&Un(J.laws),J.profiles&&_(J.profiles),J.vehicles&&$(J.vehicles),J.properties&&D(J.properties),J.businesses&&O(J.businesses),J.incidents&&F(J.incidents),J.reports&&K(J.reports),J.trainingReports&&ee(J.trainingReports),J.policeReports&&pe(J.policeReports),J.evidence&&Ne(J.evidence),J.weapons&&it(J.weapons),J.employees&&sr(J.employees),J.chatMessages&&ki(J.chatMessages),J.announcements&&Ta(J.announcements),J.employeeLicenses&&Rn(J.employeeLicenses),J.calls&&Si(J.calls),J.enableNotifications!==void 0&&nLe(J.enableNotifications),J.showIdentifiers!==void 0&&h(J.showIdentifiers),J.images&&p(J.images),e(!1)}),wt("setJob",J=>{n(J.playerJob),r(J.playerGrade)}),wt("addEmployee",J=>{Mt(J)}),wt("addTag",J=>{b(J)}),wt("addIncident",J=>{E(J)}),wt("addReport",J=>{Z(J)}),wt("addTrainingReport",J=>{Y(J)}),wt("addPoliceReport",J=>{he(J)}),wt("addEvidence",J=>{Se(J)}),wt("addWeapon",J=>{Xe(J)}),wt("addCharge",J=>{mt(J)}),wt("updateCharge",J=>{ht(J.id,{name:J.name,class:J.class,description:J.description,fine:J.fine,sentence:J.sentence,points:J.points})}),wt("removeCharge",J=>{Lt(J)}),wt("removeLaw",J=>{tn(J)}),wt("addLaw",J=>{kt(J)}),wt("updateLaw",J=>{bn(J.id,{name:J.name})}),wt("addChatMessage",J=>{Qn(J)}),wt("addAnnouncement",J=>{yn(J)}),wt("toggleAnnouncementPin",J=>{Ge(J.id,J.pinned)}),wt("removeAnnouncement",J=>{rt(J)}),wt("updateEmployeeImage",J=>{un(J.identifier,{image:J.image})}),wt("updateEmployeeCallsign",J=>{un(J.identifier,{callsign:J.callsign})}),wt("updateEmployeeStatus",J=>{un(J.identifier,{status:J.status})}),wt("updateEmployeeNotes",J=>{un(J.identifier,{notes:J.notes})}),wt("updateEmployeeLicenses",J=>{un(J.identifier,{licenses:J.licenses})}),wt("addCall",J=>{Dn(J)}),wt("removeCall",J=>{qn(J)}),wt("updateIncident",J=>{z(J.id,{title:J.title,sideBarData:{tags:J.sideBarData.tags,officers:J.sideBarData.officers,criminals:J.sideBarData.criminals,civilians:J.sideBarData.civilians}})}),wt("updateVehicle",J=>{N(J.plate,{sideBarData:{bolos:J.bolos}})}),wt("updateProfile",J=>{k(J.identifier,{image:J.image,sideBarData:{warrants:J.warrants}})}),wt("updateReport",J=>{te(J.id,{title:J.title,sideBarData:{tags:J.sideBarData.tags,officers:J.sideBarData.officers,suspects:J.sideBarData.suspects,civilians:J.sideBarData.civilians}})}),wt("updateTrainingReport",J=>{Q(J.id,{title:J.title})}),wt("updatePoliceReport",J=>{_e(J.id,{sideBarData:{tags:J.sideBarData.tags}})}),wt("updateEvidence",J=>{Re(J.id,{name:J.name,image:J.image,sideBarData:{tags:J.sideBarData.tags}})}),wt("updateWeapon",J=>{at(J.id,{name:J.name,image:J.image,sideBarData:{tags:J.sideBarData.tags,owners:J.sideBarData.owners}})}),wt("removeEvidence",J=>{Ke(J)}),wt("removeWeapon",J=>{He(J)}),wt("removePoliceReport",J=>{ge(J)}),wt("removeIncident",J=>{q(J)}),wt("removeReport",J=>{V(J)}),wt("removeTrainingReport",J=>{oe(J)}),wt("addProfile",J=>{S(J)}),wt("addVehicle",J=>{P(J)});const{visible:xn,page:_n}=dAe();I.exports.useEffect(()=>{xn&&((!j||Object.keys(j).length<=0)&&(console.log("No locales found, this can lead to missing translations. Trying to fetch locales again."),Ee("getLocales").then(J=>{!J||J.length<=0||rH(J)})),(_n==="police"||_n==="ambulance")&&Ee("getJobData").then(J=>{n(J.job),r(J.grade),i(J.isBoss)}))},[xn,_n]);const ve=I.exports.useRef(null),Ie=I.exports.useRef(null),Je=I.exports.useRef(null);return B(Fe,{children:[x(ku,{mounted:xn&&_n==="police",transition:"slide-up",duration:400,timingFunction:"ease",children:J=>x("div",{style:{...J,height:"100%",width:"100%"},children:B(ck,{className:si.app,padding:"md",navbar:x(q$t,{}),header:x(K$t,{}),ref:ve,children:[x(Z$t,{}),x(Su,{target:ve.current||void 0})]})})}),x(ku,{mounted:xn&&_n==="ambulance",transition:"slide-up",duration:400,timingFunction:"ease",children:J=>x("div",{style:{...J,height:"100%",width:"100%"},children:B(ck,{className:si.app,padding:"md",navbar:x(rTt,{}),header:x(aTt,{}),ref:Ie,children:[x(iTt,{}),x(Su,{target:Ie.current||void 0})]})})}),x(ku,{mounted:xn&&_n==="citizen",transition:"slide-up",duration:400,timingFunction:"ease",children:J=>x("div",{style:{...J,height:"100%",width:"100%"},children:B(ck,{className:si.app,padding:"md",navbar:x(dTt,{}),header:x(pTt,{}),ref:Je,children:[x(hTt,{}),x(Su,{target:Je.current||void 0})]})})}),xn&&_n==="report"&&x(RAe,{})]})}const mTt=()=>x(oK,{withNormalizeCSS:!0,withGlobalStyles:!0,theme:{..._ge},children:x(mDe,{children:x(fTt,{})})});/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p2.apply(this,arguments)}var Ap;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ap||(Ap={}));const u7="popstate";function gTt(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:s,hash:o}=r.location;return mA("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lhe(i)}return vTt(t,n,null,e)}function ohe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yTt(){return Math.random().toString(36).substr(2,8)}function c7(e,t){return{usr:e.state,key:e.key,idx:t}}function mA(e,t,n,r){return n===void 0&&(n=null),p2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uhe(t):t,{state:n,key:t&&t.key||r||yTt()})}function lhe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function uhe(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vTt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Ap.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(p2({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function d(){o=Ap.Pop;let y=c(),v=y==null?null:y-u;u=y,l&&l({action:o,location:g.location,delta:v})}function p(y,v){o=Ap.Push;let b=mA(g.location,y,v);n&&n(b,y),u=c()+1;let _=c7(b,u),k=g.createHref(b);try{s.pushState(_,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}a&&l&&l({action:o,location:g.location,delta:1})}function h(y,v){o=Ap.Replace;let b=mA(g.location,y,v);n&&n(b,y),u=c();let _=c7(b,u),k=g.createHref(b);s.replaceState(_,"",k),a&&l&&l({action:o,location:g.location,delta:0})}function m(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof y=="string"?y:lhe(y);return b=b.replace(/ $/,"%20"),ohe(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return o},get location(){return e(i,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(u7,d),l=y,()=>{i.removeEventListener(u7,d),l=null}},createHref(y){return t(i,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:h,go(y){return s.go(y)}};return g}var d7;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(d7||(d7={}));function bTt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const wTt=["post","put","patch","delete"];[...wTt];/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gA(){return gA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gA.apply(this,arguments)}const xTt=I.exports.createContext(null),che=I.exports.createContext(null);function _Tt(){return I.exports.useContext(che)!=null}const kTt="startTransition";Xp[kTt];function STt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ap.Pop,navigator:a,static:s=!1,future:o}=e;_Tt()&&ohe(!1);let l=t.replace(/^\/*/,"/"),u=I.exports.useMemo(()=>({basename:l,navigator:a,static:s,future:gA({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=uhe(r));let{pathname:c="/",search:d="",hash:p="",state:h=null,key:m="default"}=r,g=I.exports.useMemo(()=>{let y=bTt(c,l);return y==null?null:{location:{pathname:y,search:d,hash:p,state:h,key:m},navigationType:i}},[l,c,d,p,h,m,i]);return g==null?null:x(xTt.Provider,{value:u,children:x(che.Provider,{children:n,value:g})})}new Promise(()=>{});/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const CTt="6";try{window.__reactRouterVersion=CTt}catch{}const ITt="startTransition",p7=Xp[ITt],$Tt="flushSync";xge[$Tt];const TTt="useId";Xp[TTt];function NTt(e){let{basename:t,children:n,future:r,window:i}=e,a=I.exports.useRef();a.current==null&&(a.current=gTt({window:i,v5Compat:!0}));let s=a.current,[o,l]=I.exports.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},c=I.exports.useCallback(d=>{u&&p7?p7(()=>l(d)):l(d)},[l,u]);return I.exports.useLayoutEffect(()=>s.listen(c),[s,c]),x(STt,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}var h7;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(h7||(h7={}));var f7;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(f7||(f7={}));if(eD()){const e=document.getElementById("root");e.style.backgroundImage='url("https://i.imgur.com/3pzRj9n.png")',e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center"}const ETt=document.getElementById("root");pO.createRoot(ETt).render(x(kr.StrictMode,{children:x(cAe,{children:x(NTt,{children:x(mTt,{})})})}));
